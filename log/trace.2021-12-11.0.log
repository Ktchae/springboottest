2021-12-11 15:45:59.819 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-11 15:45:59.830 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 2848 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-11 15:45:59.830 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-11 15:46:00.019 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-11 15:46:00.019 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-11 15:46:04.805 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-11 15:46:04.815 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-11 15:46:05.425 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 578 ms. Found 0 Redis repository interfaces.
2021-12-11 15:46:07.035 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-11 15:46:07.075 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-11 15:46:07.075 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-11 15:46:07.075 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-11 15:46:07.205 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-11 15:46:07.205 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 7186 ms
2021-12-11 15:46:10.083 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-11 15:46:10.143 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-11 15:46:10.173 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-11 15:46:10.223 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 12.234 seconds (JVM running for 15.448)
2021-12-11 15:46:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m124778761479655424[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:15.124 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m124778761479655424[0;39m HikariPool-1 - Starting...
2021-12-11 15:46:15.891 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m124778761479655424[0;39m HikariPool-1 - Start completed.
2021-12-11 15:46:15.939 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778761479655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:15.969 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778761479655424[0;39m ==> Parameters: 
2021-12-11 15:46:16.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778761479655424[0;39m <==    Updates: 0
2021-12-11 15:46:16.084 INFO  com.job.EbookSnapshotJob                          :35   [32m124778761479655424[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö1070ÊØ´Áßí
2021-12-11 15:46:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m124778782451175424[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778782451175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778782451175424[0;39m ==> Parameters: 
2021-12-11 15:46:20.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778782451175424[0;39m <==    Updates: 0
2021-12-11 15:46:20.154 INFO  com.job.EbookSnapshotJob                          :35   [32m124778782451175424[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö140ÊØ´Áßí
2021-12-11 15:46:25.018 INFO  com.job.EbookSnapshotJob                          :32   [32m124778803439472640[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:25.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778803439472640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:25.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778803439472640[0;39m ==> Parameters: 
2021-12-11 15:46:25.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778803439472640[0;39m <==    Updates: 0
2021-12-11 15:46:25.172 INFO  com.job.EbookSnapshotJob                          :35   [32m124778803439472640[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö154ÊØ´Áßí
2021-12-11 15:46:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m124778824364855296[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778824364855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778824364855296[0;39m ==> Parameters: 
2021-12-11 15:46:30.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778824364855296[0;39m <==    Updates: 0
2021-12-11 15:46:30.163 INFO  com.job.EbookSnapshotJob                          :35   [32m124778824364855296[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö156ÊØ´Áßí
2021-12-11 15:46:35.007 INFO  com.job.EbookSnapshotJob                          :32   [32m124778845336375296[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:35.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778845336375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:35.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778845336375296[0;39m ==> Parameters: 
2021-12-11 15:46:35.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778845336375296[0;39m <==    Updates: 0
2021-12-11 15:46:35.147 INFO  com.job.EbookSnapshotJob                          :35   [32m124778845336375296[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö140ÊØ´Áßí
2021-12-11 15:46:35.147 INFO  com.job.DocJob                                    :32   [32m124778845923577856[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÂºÄÂßã
2021-12-11 15:46:35.162 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124778845923577856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-11 15:46:35.162 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124778845923577856[0;39m ==> Parameters: 
2021-12-11 15:46:35.259 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124778845923577856[0;39m <==    Updates: 2
2021-12-11 15:46:35.260 INFO  com.job.DocJob                                    :35   [32m124778845923577856[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÁªìÊùüÔºåËÄóÊó∂Ôºö113ÊØ´Áßí
2021-12-11 15:46:40.008 INFO  com.job.EbookSnapshotJob                          :32   [32m124778866312089600[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778866312089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778866312089600[0;39m ==> Parameters: 
2021-12-11 15:46:40.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778866312089600[0;39m <==    Updates: 0
2021-12-11 15:46:40.154 INFO  com.job.EbookSnapshotJob                          :35   [32m124778866312089600[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö146ÊØ´Áßí
2021-12-11 15:46:45.003 INFO  com.job.EbookSnapshotJob                          :32   [32m124778887262638080[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 15:46:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778887262638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778887262638080[0;39m ==> Parameters: 
2021-12-11 15:46:45.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778887262638080[0;39m <==    Updates: 0
2021-12-11 15:46:45.153 INFO  com.job.EbookSnapshotJob                          :35   [32m124778887262638080[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö150ÊØ´Áßí
2021-12-11 23:14:03.580 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-11 23:14:03.580 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 10244 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-11 23:14:03.598 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-11 23:14:03.870 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-11 23:14:03.870 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-11 23:14:12.005 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-11 23:14:12.005 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-11 23:14:12.854 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 692 ms. Found 0 Redis repository interfaces.
2021-12-11 23:14:18.045 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-11 23:14:18.075 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-11 23:14:18.075 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-11 23:14:18.075 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-11 23:14:18.485 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-11 23:14:18.485 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 14615 ms
2021-12-11 23:14:25.275 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-11 23:14:25.404 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-11 23:14:25.455 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-11 23:14:25.550 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 23.812 seconds (JVM running for 27.282)
2021-12-11 23:14:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891567247986688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:14:30.135 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m124891567247986688[0;39m HikariPool-1 - Starting...
2021-12-11 23:14:31.285 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m124891567247986688[0;39m HikariPool-1 - Start completed.
2021-12-11 23:14:31.325 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891567247986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:14:31.350 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891567247986688[0;39m ==> Parameters: 
2021-12-11 23:14:31.475 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891567247986688[0;39m <==    Updates: 0
2021-12-11 23:14:31.475 INFO  com.job.EbookSnapshotJob                          :35   [32m124891567247986688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö1470ÊØ´Áßí
2021-12-11 23:14:35.005 INFO  com.job.DocJob                                    :32   [32m124891588219506688[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÂºÄÂßã
2021-12-11 23:14:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891588219506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-11 23:14:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891588219506688[0;39m ==> Parameters: 
2021-12-11 23:14:35.205 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891588219506688[0;39m <==    Updates: 2
2021-12-11 23:14:35.205 INFO  com.job.DocJob                                    :35   [32m124891588219506688[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÁªìÊùüÔºåËÄóÊó∂Ôºö200ÊØ´Áßí
2021-12-11 23:14:35.205 INFO  com.job.EbookSnapshotJob                          :32   [32m124891589058367488[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:14:35.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891589058367488[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:14:35.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891589058367488[0;39m ==> Parameters: 
2021-12-11 23:14:35.334 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891589058367488[0;39m <==    Updates: 0
2021-12-11 23:14:35.334 INFO  com.job.EbookSnapshotJob                          :35   [32m124891589058367488[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö129ÊØ´Áßí
2021-12-11 23:14:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891609232969728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:14:40.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891609232969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:14:40.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891609232969728[0;39m ==> Parameters: 
2021-12-11 23:14:40.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891609232969728[0;39m <==    Updates: 0
2021-12-11 23:14:40.214 INFO  com.job.EbookSnapshotJob                          :35   [32m124891609232969728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö199ÊØ´Áßí
2021-12-11 23:14:45.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891630162546688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:14:45.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891630162546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:14:45.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891630162546688[0;39m ==> Parameters: 
2021-12-11 23:14:45.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891630162546688[0;39m <==    Updates: 0
2021-12-11 23:14:45.195 INFO  com.job.EbookSnapshotJob                          :35   [32m124891630162546688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö190ÊØ´Áßí
2021-12-11 23:14:50.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891651176009728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:14:50.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891651176009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:14:50.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891651176009728[0;39m ==> Parameters: 
2021-12-11 23:14:50.196 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891651176009728[0;39m <==    Updates: 0
2021-12-11 23:14:50.196 INFO  com.job.EbookSnapshotJob                          :35   [32m124891651176009728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö181ÊØ´Áßí
2021-12-11 23:14:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891672147529728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:14:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891672147529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:14:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891672147529728[0;39m ==> Parameters: 
2021-12-11 23:14:55.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891672147529728[0;39m <==    Updates: 0
2021-12-11 23:14:55.205 INFO  com.job.EbookSnapshotJob                          :35   [32m124891672147529728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö190ÊØ´Áßí
2021-12-11 23:15:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891693119049728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891693119049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891693119049728[0;39m ==> Parameters: 
2021-12-11 23:15:00.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891693119049728[0;39m <==    Updates: 0
2021-12-11 23:15:00.210 INFO  com.job.EbookSnapshotJob                          :35   [32m124891693119049728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö195ÊØ´Áßí
2021-12-11 23:15:05.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891714048626688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:05.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891714048626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:05.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891714048626688[0;39m ==> Parameters: 
2021-12-11 23:15:05.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891714048626688[0;39m <==    Updates: 0
2021-12-11 23:15:05.195 INFO  com.job.EbookSnapshotJob                          :35   [32m124891714048626688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö190ÊØ´Áßí
2021-12-11 23:15:05.204 INFO  com.job.DocJob                                    :32   [32m124891714883293184[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÂºÄÂßã
2021-12-11 23:15:05.204 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891714883293184[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-11 23:15:05.204 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891714883293184[0;39m ==> Parameters: 
2021-12-11 23:15:05.345 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891714883293184[0;39m <==    Updates: 2
2021-12-11 23:15:05.345 INFO  com.job.DocJob                                    :35   [32m124891714883293184[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÁªìÊùüÔºåËÄóÊó∂Ôºö141ÊØ´Áßí
2021-12-11 23:15:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891735020146688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891735020146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891735020146688[0;39m ==> Parameters: 
2021-12-11 23:15:10.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891735020146688[0;39m <==    Updates: 0
2021-12-11 23:15:10.195 INFO  com.job.EbookSnapshotJob                          :35   [32m124891735020146688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö190ÊØ´Áßí
2021-12-11 23:15:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m124891755987472384[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:15.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891755987472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:15.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891755987472384[0;39m ==> Parameters: 
2021-12-11 23:15:15.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891755987472384[0;39m <==    Updates: 0
2021-12-11 23:15:15.195 INFO  com.job.EbookSnapshotJob                          :35   [32m124891755987472384[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö191ÊØ´Áßí
2021-12-11 23:15:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891777005129728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891777005129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891777005129728[0;39m ==> Parameters: 
2021-12-11 23:15:20.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891777005129728[0;39m <==    Updates: 0
2021-12-11 23:15:20.218 INFO  com.job.EbookSnapshotJob                          :35   [32m124891777005129728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö203ÊØ´Áßí
2021-12-11 23:15:25.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891797934706688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:25.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891797934706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:25.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891797934706688[0;39m ==> Parameters: 
2021-12-11 23:15:25.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891797934706688[0;39m <==    Updates: 0
2021-12-11 23:15:25.210 INFO  com.job.EbookSnapshotJob                          :35   [32m124891797934706688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö205ÊØ´Áßí
2021-12-11 23:15:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891818906226688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:30.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891818906226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:30.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891818906226688[0;39m ==> Parameters: 
2021-12-11 23:15:30.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891818906226688[0;39m <==    Updates: 0
2021-12-11 23:15:30.205 INFO  com.job.EbookSnapshotJob                          :35   [32m124891818906226688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö200ÊØ´Áßí
2021-12-11 23:15:35.005 INFO  com.job.DocJob                                    :32   [32m124891839877746688[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÂºÄÂßã
2021-12-11 23:15:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891839877746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-11 23:15:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891839877746688[0;39m ==> Parameters: 
2021-12-11 23:15:35.205 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891839877746688[0;39m <==    Updates: 2
2021-12-11 23:15:35.205 INFO  com.job.DocJob                                    :35   [32m124891839877746688[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÁªìÊùüÔºåËÄóÊó∂Ôºö200ÊØ´Áßí
2021-12-11 23:15:35.210 INFO  com.job.EbookSnapshotJob                          :32   [32m124891840737579008[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:35.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891840737579008[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:35.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891840737579008[0;39m ==> Parameters: 
2021-12-11 23:15:35.355 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891840737579008[0;39m <==    Updates: 0
2021-12-11 23:15:35.355 INFO  com.job.EbookSnapshotJob                          :35   [32m124891840737579008[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö145ÊØ´Áßí
2021-12-11 23:15:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m124891860887015424[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:40.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891860887015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:40.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891860887015424[0;39m ==> Parameters: 
2021-12-11 23:15:40.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891860887015424[0;39m <==    Updates: 0
2021-12-11 23:15:40.219 INFO  com.job.EbookSnapshotJob                          :35   [32m124891860887015424[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö205ÊØ´Áßí
2021-12-11 23:15:45.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891881862729728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:45.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891881862729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:45.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891881862729728[0;39m ==> Parameters: 
2021-12-11 23:15:45.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891881862729728[0;39m <==    Updates: 0
2021-12-11 23:15:45.205 INFO  com.job.EbookSnapshotJob                          :35   [32m124891881862729728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö180ÊØ´Áßí
2021-12-11 23:15:50.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891902792306688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:50.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891902792306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:50.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891902792306688[0;39m ==> Parameters: 
2021-12-11 23:15:50.185 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891902792306688[0;39m <==    Updates: 0
2021-12-11 23:15:50.185 INFO  com.job.EbookSnapshotJob                          :35   [32m124891902792306688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö180ÊØ´Áßí
2021-12-11 23:15:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891923805769728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:15:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891923805769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:15:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891923805769728[0;39m ==> Parameters: 
2021-12-11 23:15:55.200 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891923805769728[0;39m <==    Updates: 0
2021-12-11 23:15:55.200 INFO  com.job.EbookSnapshotJob                          :35   [32m124891923805769728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö185ÊØ´Áßí
2021-12-11 23:15:59.983 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-11 23:15:59.984 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-11 23:15:59.986 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-12-11 23:16:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m124891944777289728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:16:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891944777289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:16:00.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891944777289728[0;39m ==> Parameters: 
2021-12-11 23:16:00.167 INFO  com.aspect.LogAspect                              :54   [32m124891945402241024[0;39m ------------- ÂºÄÂßã -------------
2021-12-11 23:16:00.168 INFO  com.aspect.LogAspect                              :55   [32m124891945402241024[0;39m ËØ∑Ê±ÇÂú∞ÂùÄ: http://localhost:8081/category/all GET
2021-12-11 23:16:00.169 INFO  com.aspect.LogAspect                              :56   [32m124891945402241024[0;39m Á±ªÂêçÊñπÊ≥ï: com.controller.CategoryController.all
2021-12-11 23:16:00.170 INFO  com.aspect.LogAspect                              :57   [32m124891945402241024[0;39m ËøúÁ®ãÂú∞ÂùÄ: 0:0:0:0:0:0:0:1
2021-12-11 23:16:00.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891944777289728[0;39m <==    Updates: 0
2021-12-11 23:16:00.217 INFO  com.job.EbookSnapshotJob                          :35   [32m124891944777289728[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö202ÊØ´Áßí
2021-12-11 23:16:00.362 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m ÊúâÊñ∞ËøûÊé•ÔºötokenÔºöTsKsyDgWwHÔºåsession idÔºö0ÔºåÂΩìÂâçËøûÊé•Êï∞Ôºö1
2021-12-11 23:16:00.382 INFO  com.aspect.LogAspect                              :80   [32m124891945402241024[0;39m ËØ∑Ê±ÇÂèÇÊï∞: []
2021-12-11 23:16:00.442 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m124891945402241024[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-11 23:16:00.442 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m124891945402241024[0;39m ==> Parameters: 
2021-12-11 23:16:00.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==    Columns: id, parent, name, sort
2021-12-11 23:16:00.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-11 23:16:00.600 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-11 23:16:00.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-11 23:16:00.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 100, 0, ÂâçÁ´ØÂºÄÂèë, 100
2021-12-11 23:16:00.602 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 101, 100, Vue, 101
2021-12-11 23:16:00.602 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-11 23:16:00.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 200, 0, Java, 200
2021-12-11 23:16:00.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 201, 200, Âü∫Á°ÄÂ∫îÁî®, 201
2021-12-11 23:16:00.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 202, 200, Ê°ÜÊû∂Â∫îÁî®, 202
2021-12-11 23:16:00.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 300, 0, Python, 300
2021-12-11 23:16:00.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 301, 300, Âü∫Á°ÄÂ∫îÁî®, 301
2021-12-11 23:16:00.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 302, 300, ËøõÈò∂ÊñπÂêëÂ∫îÁî®, 302
2021-12-11 23:16:00.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 400, 0, Êï∞ÊçÆÂ∫ì, 400
2021-12-11 23:16:00.609 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-11 23:16:00.610 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-11 23:16:00.611 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 500, 0, ÂÖ∂‰ªñ, 500
2021-12-11 23:16:00.614 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 501, 500, ÊúçÂä°Âô®, 501
2021-12-11 23:16:00.615 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 502, 500, ÂºÄÂèëÂ∑•ÂÖ∑, 502
2021-12-11 23:16:00.616 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m124891945402241024[0;39m <==        Row: 503, 500, ÁÉ≠Èó®ÊúçÂä°Á´ØËØ≠Ë®Ä, 503
2021-12-11 23:16:00.617 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m124891945402241024[0;39m <==      Total: 19
2021-12-11 23:16:00.875 INFO  com.aspect.LogAspect                              :92   [32m124891945402241024[0;39m ËøîÂõûÁªìÊûú: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"ÂâçÁ´ØÂºÄÂèë","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"Âü∫Á°ÄÂ∫îÁî®","parent":200,"sort":201},{"id":202,"name":"Ê°ÜÊû∂Â∫îÁî®","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"Âü∫Á°ÄÂ∫îÁî®","parent":300,"sort":301},{"id":302,"name":"ËøõÈò∂ÊñπÂêëÂ∫îÁî®","parent":300,"sort":302},{"id":400,"name":"Êï∞ÊçÆÂ∫ì","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"ÂÖ∂‰ªñ","parent":0,"sort":500},{"id":501,"name":"ÊúçÂä°Âô®","parent":500,"sort":501},{"id":502,"name":"ÂºÄÂèëÂ∑•ÂÖ∑","parent":500,"sort":502},{"id":503,"name":"ÁÉ≠Èó®ÊúçÂä°Á´ØËØ≠Ë®Ä","parent":500,"sort":503}],"success":true}
2021-12-11 23:16:00.875 INFO  com.aspect.LogAspect                              :93   [32m124891945402241024[0;39m ------------- ÁªìÊùü ËÄóÊó∂Ôºö711 ms -------------
2021-12-11 23:16:05.005 INFO  com.job.DocJob                                    :32   [32m124891965706866688[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÂºÄÂßã
2021-12-11 23:16:05.078 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891965706866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-11 23:16:05.079 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891965706866688[0;39m ==> Parameters: 
2021-12-11 23:16:05.220 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124891965706866688[0;39m <==    Updates: 2
2021-12-11 23:16:05.220 INFO  com.job.DocJob                                    :35   [32m124891965706866688[0;39m Êõ¥Êñ∞ÁîµÂ≠ê‰π¶‰∏ãÁöÑÊñáÊ°£Êï∞ÊçÆÁªìÊùüÔºåËÄóÊó∂Ôºö215ÊØ´Áßí
2021-12-11 23:16:05.221 INFO  com.job.EbookSnapshotJob                          :32   [32m124891966612836352[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:16:05.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891966612836352[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:16:05.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891966612836352[0;39m ==> Parameters: 
2021-12-11 23:16:05.358 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891966612836352[0;39m <==    Updates: 0
2021-12-11 23:16:05.358 INFO  com.job.EbookSnapshotJob                          :35   [32m124891966612836352[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö137ÊØ´Áßí
2021-12-11 23:16:09.187 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m ËøûÊé•ÂÖ≥Èó≠ÔºåtokenÔºöTsKsyDgWwHÔºåsession idÔºö0ÔºÅÂΩìÂâçËøûÊé•Êï∞Ôºö0
2021-12-11 23:16:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m124891986678386688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÂºÄÂßã
2021-12-11 23:16:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891986678386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 23:16:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891986678386688[0;39m ==> Parameters: 
2021-12-11 23:16:10.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124891986678386688[0;39m <==    Updates: 0
2021-12-11 23:16:10.230 INFO  com.job.EbookSnapshotJob                          :35   [32m124891986678386688[0;39m ÁîüÊàê‰ªäÊó•ÁîµÂ≠ê‰π¶Âø´ÁÖßÁªìÊùüÔºåËÄóÊó∂Ôºö225ÊØ´Áßí
