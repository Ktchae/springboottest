2021-12-16 00:13:57.329 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-16 00:13:57.407 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 8912 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-16 00:13:57.407 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-16 00:13:57.607 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-16 00:13:57.607 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-16 00:14:02.024 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-16 00:14:02.024 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-16 00:14:02.605 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 549 ms. Found 0 Redis repository interfaces.
2021-12-16 00:14:04.214 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-16 00:14:04.246 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-16 00:14:04.246 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-16 00:14:04.246 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-16 00:14:04.401 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-16 00:14:04.401 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6794 ms
2021-12-16 00:14:07.088 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-16 00:14:07.151 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-16 00:14:07.213 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-16 00:14:07.260 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 11.594 seconds (JVM running for 14.444)
2021-12-16 00:14:10.020 INFO  com.job.EbookSnapshotJob                          :32   [32m126356134381621248[0;39m 生成今日电子书快照开始
2021-12-16 00:14:10.129 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m126356134381621248[0;39m HikariPool-1 - Starting...
2021-12-16 00:14:10.881 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m126356134381621248[0;39m HikariPool-1 - Start completed.
2021-12-16 00:14:10.912 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356134381621248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:10.928 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356134381621248[0;39m ==> Parameters: 
2021-12-16 00:14:11.026 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356134381621248[0;39m <==    Updates: 6
2021-12-16 00:14:11.026 INFO  com.job.EbookSnapshotJob                          :35   [32m126356134381621248[0;39m 生成今日电子书快照结束，耗时：1006毫秒
2021-12-16 00:14:15.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126356155348946944[0;39m 生成今日电子书快照开始
2021-12-16 00:14:15.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356155348946944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:15.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356155348946944[0;39m ==> Parameters: 
2021-12-16 00:14:15.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356155348946944[0;39m <==    Updates: 0
2021-12-16 00:14:15.144 INFO  com.job.EbookSnapshotJob                          :35   [32m126356155348946944[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-16 00:14:18.371 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-16 00:14:18.372 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-16 00:14:18.373 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-16 00:14:18.475 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：ONiyUfbTdN，session id：0，当前连接数：1
2021-12-16 00:14:18.603 INFO  com.aspect.LogAspect                              :54   [32m126356170368749569[0;39m ------------- 开始 -------------
2021-12-16 00:14:18.603 INFO  com.aspect.LogAspect                              :54   [32m126356170368749568[0;39m ------------- 开始 -------------
2021-12-16 00:14:18.603 INFO  com.aspect.LogAspect                              :54   [32m126356170368749570[0;39m ------------- 开始 -------------
2021-12-16 00:14:18.606 INFO  com.aspect.LogAspect                              :55   [32m126356170368749569[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:14:18.606 INFO  com.aspect.LogAspect                              :55   [32m126356170368749568[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:14:18.606 INFO  com.aspect.LogAspect                              :55   [32m126356170368749570[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:14:18.607 INFO  com.aspect.LogAspect                              :56   [32m126356170368749569[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:14:18.607 INFO  com.aspect.LogAspect                              :56   [32m126356170368749570[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:14:18.607 INFO  com.aspect.LogAspect                              :56   [32m126356170368749568[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:14:18.608 INFO  com.aspect.LogAspect                              :57   [32m126356170368749569[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:18.608 INFO  com.aspect.LogAspect                              :57   [32m126356170368749568[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:18.608 INFO  com.aspect.LogAspect                              :57   [32m126356170368749570[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:18.658 INFO  com.aspect.LogAspect                              :80   [32m126356170368749570[0;39m 请求参数: []
2021-12-16 00:14:18.658 INFO  com.aspect.LogAspect                              :80   [32m126356170368749568[0;39m 请求参数: []
2021-12-16 00:14:18.658 INFO  com.aspect.LogAspect                              :80   [32m126356170368749569[0;39m 请求参数: []
2021-12-16 00:14:18.709 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356170368749569[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:14:18.709 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356170368749570[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:14:18.709 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356170368749570[0;39m ==> Parameters: 
2021-12-16 00:14:18.709 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356170368749569[0;39m ==> Parameters: 
2021-12-16 00:14:18.760 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356170368749568[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:14:18.762 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356170368749568[0;39m ==> Parameters: 
2021-12-16 00:14:18.810 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:14:18.810 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356170368749570[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:14:18.810 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:14:18.811 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:14:18.813 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356170368749570[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:14:18.813 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:14:18.837 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:14:18.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:14:18.839 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:14:18.839 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356170368749570[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:14:18.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:14:18.839 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:14:18.839 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356170368749570[0;39m <==      Total: 2
2021-12-16 00:14:18.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:14:18.850 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:14:18.852 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:14:18.852 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:14:18.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:14:18.854 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:14:18.857 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:14:18.857 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356170368749569[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:14:18.858 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356170368749569[0;39m <==      Total: 6
2021-12-16 00:14:18.858 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:14:18.860 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:14:18.861 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:14:18.862 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:14:18.864 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:14:18.865 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:14:18.865 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:14:18.868 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:14:18.869 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:14:18.870 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356170368749568[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:14:18.871 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356170368749568[0;39m <==      Total: 19
2021-12-16 00:14:18.888 INFO  com.aspect.LogAspect                              :92   [32m126356170368749568[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:14:18.889 INFO  com.aspect.LogAspect                              :92   [32m126356170368749570[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:14:18.889 INFO  com.aspect.LogAspect                              :92   [32m126356170368749569[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:14:18.889 INFO  com.aspect.LogAspect                              :93   [32m126356170368749570[0;39m ------------- 结束 耗时：289 ms -------------
2021-12-16 00:14:18.889 INFO  com.aspect.LogAspect                              :93   [32m126356170368749569[0;39m ------------- 结束 耗时：289 ms -------------
2021-12-16 00:14:18.889 INFO  com.aspect.LogAspect                              :93   [32m126356170368749568[0;39m ------------- 结束 耗时：289 ms -------------
2021-12-16 00:14:20.030 INFO  com.job.EbookSnapshotJob                          :32   [32m126356176366604288[0;39m 生成今日电子书快照开始
2021-12-16 00:14:20.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356176366604288[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356176366604288[0;39m ==> Parameters: 
2021-12-16 00:14:20.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356176366604288[0;39m <==    Updates: 0
2021-12-16 00:14:20.179 INFO  com.job.EbookSnapshotJob                          :35   [32m126356176366604288[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-16 00:14:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356197254238208[0;39m 生成今日电子书快照开始
2021-12-16 00:14:25.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356197254238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:25.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356197254238208[0;39m ==> Parameters: 
2021-12-16 00:14:25.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356197254238208[0;39m <==    Updates: 0
2021-12-16 00:14:25.275 INFO  com.job.EbookSnapshotJob                          :35   [32m126356197254238208[0;39m 生成今日电子书快照结束，耗时：265毫秒
2021-12-16 00:14:28.617 INFO  com.aspect.LogAspect                              :54   [32m126356212383092736[0;39m ------------- 开始 -------------
2021-12-16 00:14:28.617 INFO  com.aspect.LogAspect                              :55   [32m126356212383092736[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-16 00:14:28.617 INFO  com.aspect.LogAspect                              :56   [32m126356212383092736[0;39m 类名方法: com.controller.EbookController.list
2021-12-16 00:14:28.617 INFO  com.aspect.LogAspect                              :57   [32m126356212383092736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:28.619 INFO  com.aspect.LogAspect                              :80   [32m126356212383092736[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-16 00:14:28.742 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126356212383092736[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-16 00:14:28.742 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126356212383092736[0;39m ==> Parameters: 101(Long)
2021-12-16 00:14:28.793 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m126356212383092736[0;39m <==    Columns: count(0)
2021-12-16 00:14:28.793 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m126356212383092736[0;39m <==        Row: 1
2021-12-16 00:14:28.793 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126356212383092736[0;39m <==      Total: 1
2021-12-16 00:14:28.793 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126356212383092736[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-16 00:14:28.793 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126356212383092736[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-16 00:14:28.841 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126356212383092736[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-16 00:14:28.841 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126356212383092736[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 74, 27
2021-12-16 00:14:28.841 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126356212383092736[0;39m <==      Total: 1
2021-12-16 00:14:28.841 INFO  com.servicess.EbookService                        :48   [32m126356212383092736[0;39m 总行数：1
2021-12-16 00:14:28.841 INFO  com.servicess.EbookService                        :49   [32m126356212383092736[0;39m 总页数：1
2021-12-16 00:14:28.872 INFO  com.aspect.LogAspect                              :92   [32m126356212383092736[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":74,"voteCount":27}],"total":1},"success":true}
2021-12-16 00:14:28.872 INFO  com.aspect.LogAspect                              :93   [32m126356212383092736[0;39m ------------- 结束 耗时：255 ms -------------
2021-12-16 00:14:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126356218229952512[0;39m 生成今日电子书快照开始
2021-12-16 00:14:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356218229952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356218229952512[0;39m ==> Parameters: 
2021-12-16 00:14:30.189 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356218229952512[0;39m <==    Updates: 0
2021-12-16 00:14:30.190 INFO  com.job.EbookSnapshotJob                          :35   [32m126356218229952512[0;39m 生成今日电子书快照结束，耗时：178毫秒
2021-12-16 00:14:33.894 INFO  com.aspect.LogAspect                              :54   [32m126356234516434944[0;39m ------------- 开始 -------------
2021-12-16 00:14:33.894 INFO  com.aspect.LogAspect                              :55   [32m126356234516434944[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-16 00:14:33.894 INFO  com.aspect.LogAspect                              :56   [32m126356234516434944[0;39m 类名方法: com.controller.UserController.login
2021-12-16 00:14:33.895 INFO  com.aspect.LogAspect                              :57   [32m126356234516434944[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:33.896 INFO  com.aspect.LogAspect                              :80   [32m126356234516434944[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-16 00:14:33.968 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126356234516434944[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-16 00:14:33.969 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126356234516434944[0;39m ==> Parameters: test123(String)
2021-12-16 00:14:34.027 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126356234516434944[0;39m <==    Columns: id, login_name, name, password
2021-12-16 00:14:34.028 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126356234516434944[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-16 00:14:34.030 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126356234516434944[0;39m <==      Total: 1
2021-12-16 00:14:34.057 INFO  com.controller.UserController                     :77   [32m126356234516434944[0;39m 生成单点登录token:126356235200106496,并放入redis中
2021-12-16 00:14:35.008 INFO  com.job.EbookSnapshotJob                          :32   [32m126356239188889600[0;39m 生成今日电子书快照开始
2021-12-16 00:14:35.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356239188889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:35.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356239188889600[0;39m ==> Parameters: 
2021-12-16 00:14:35.080 INFO  com.aspect.LogAspect                              :92   [32m126356234516434944[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"126356235200106496"},"success":true}
2021-12-16 00:14:35.080 INFO  com.aspect.LogAspect                              :93   [32m126356234516434944[0;39m ------------- 结束 耗时：1186 ms -------------
2021-12-16 00:14:35.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356239188889600[0;39m <==    Updates: 0
2021-12-16 00:14:35.161 INFO  com.job.EbookSnapshotJob                          :35   [32m126356239188889600[0;39m 生成今日电子书快照结束，耗时：153毫秒
2021-12-16 00:14:35.161 INFO  com.job.DocJob                                    :32   [32m126356239830618112[0;39m 更新电子书下的文档数据开始
2021-12-16 00:14:35.167 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356239830618112[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:14:35.168 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356239830618112[0;39m ==> Parameters: 
2021-12-16 00:14:35.265 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356239830618112[0;39m <==    Updates: 3
2021-12-16 00:14:35.267 INFO  com.job.DocJob                                    :35   [32m126356239830618112[0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2021-12-16 00:14:35.271 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：ONiyUfbTdN，session id：0！当前连接数：0
2021-12-16 00:14:37.025 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：Hr1AKhEYp6，session id：1，当前连接数：1
2021-12-16 00:14:37.180 INFO  com.aspect.LogAspect                              :54   [32m126356248298917888[0;39m ------------- 开始 -------------
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :55   [32m126356248298917888[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :56   [32m126356248298917888[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :54   [32m126356248303112192[0;39m ------------- 开始 -------------
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :57   [32m126356248298917888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :55   [32m126356248303112192[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :56   [32m126356248303112192[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:14:37.181 INFO  com.aspect.LogAspect                              :80   [32m126356248298917888[0;39m 请求参数: []
2021-12-16 00:14:37.182 INFO  com.aspect.LogAspect                              :57   [32m126356248303112192[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:37.182 INFO  com.aspect.LogAspect                              :80   [32m126356248303112192[0;39m 请求参数: []
2021-12-16 00:14:37.184 INFO  com.aspect.LogAspect                              :54   [32m126356248315695104[0;39m ------------- 开始 -------------
2021-12-16 00:14:37.185 INFO  com.aspect.LogAspect                              :55   [32m126356248315695104[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:14:37.185 INFO  com.aspect.LogAspect                              :56   [32m126356248315695104[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:14:37.185 INFO  com.aspect.LogAspect                              :57   [32m126356248315695104[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:37.186 INFO  com.aspect.LogAspect                              :80   [32m126356248315695104[0;39m 请求参数: []
2021-12-16 00:14:37.228 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356248298917888[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:14:37.229 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356248298917888[0;39m ==> Parameters: 
2021-12-16 00:14:37.237 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356248315695104[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:14:37.237 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356248303112192[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:14:37.238 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356248315695104[0;39m ==> Parameters: 
2021-12-16 00:14:37.238 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356248303112192[0;39m ==> Parameters: 
2021-12-16 00:14:37.280 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:14:37.281 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:14:37.282 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:14:37.282 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:14:37.283 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:14:37.284 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:14:37.285 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356248298917888[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:14:37.286 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356248298917888[0;39m <==      Total: 6
2021-12-16 00:14:37.287 INFO  com.aspect.LogAspect                              :92   [32m126356248298917888[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:14:37.287 INFO  com.aspect.LogAspect                              :93   [32m126356248298917888[0;39m ------------- 结束 耗时：107 ms -------------
2021-12-16 00:14:37.298 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356248303112192[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:14:37.299 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356248303112192[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:14:37.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:14:37.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:14:37.300 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356248303112192[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:14:37.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:14:37.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:14:37.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:14:37.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:14:37.302 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356248303112192[0;39m <==      Total: 2
2021-12-16 00:14:37.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:14:37.303 INFO  com.aspect.LogAspect                              :92   [32m126356248303112192[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:14:37.303 INFO  com.aspect.LogAspect                              :93   [32m126356248303112192[0;39m ------------- 结束 耗时：122 ms -------------
2021-12-16 00:14:37.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:14:37.304 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:14:37.304 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:14:37.305 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:14:37.305 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:14:37.306 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:14:37.306 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:14:37.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:14:37.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:14:37.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:14:37.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:14:37.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:14:37.309 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356248315695104[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:14:37.309 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356248315695104[0;39m <==      Total: 19
2021-12-16 00:14:37.313 INFO  com.aspect.LogAspect                              :92   [32m126356248315695104[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:14:37.313 INFO  com.aspect.LogAspect                              :93   [32m126356248315695104[0;39m ------------- 结束 耗时：129 ms -------------
2021-12-16 00:14:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356260168798208[0;39m 生成今日电子书快照开始
2021-12-16 00:14:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356260168798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356260168798208[0;39m ==> Parameters: 
2021-12-16 00:14:40.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356260168798208[0;39m <==    Updates: 0
2021-12-16 00:14:40.156 INFO  com.job.EbookSnapshotJob                          :35   [32m126356260168798208[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-16 00:14:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126356281152901120[0;39m 生成今日电子书快照开始
2021-12-16 00:14:45.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356281152901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356281152901120[0;39m ==> Parameters: 
2021-12-16 00:14:45.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356281152901120[0;39m <==    Updates: 0
2021-12-16 00:14:45.156 INFO  com.job.EbookSnapshotJob                          :35   [32m126356281152901120[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-16 00:14:47.845 INFO  com.aspect.LogAspect                              :54   [32m126356293031170048[0;39m ------------- 开始 -------------
2021-12-16 00:14:47.846 INFO  com.aspect.LogAspect                              :55   [32m126356293031170048[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:14:47.846 INFO  com.aspect.LogAspect                              :56   [32m126356293031170048[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:14:47.846 INFO  com.aspect.LogAspect                              :57   [32m126356293031170048[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:14:47.846 INFO  com.aspect.LogAspect                              :80   [32m126356293031170048[0;39m 请求参数: []
2021-12-16 00:14:47.895 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356293031170048[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:14:47.895 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356293031170048[0;39m ==> Parameters: 
2021-12-16 00:14:47.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:14:47.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:14:47.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:14:47.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:14:47.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:14:47.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:14:47.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:14:47.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:14:47.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:14:47.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:14:47.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:14:47.954 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:14:47.954 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:14:47.956 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:14:47.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:14:47.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:14:47.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:14:47.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:14:47.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:14:47.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356293031170048[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:14:47.958 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356293031170048[0;39m <==      Total: 19
2021-12-16 00:14:47.960 INFO  com.aspect.LogAspect                              :92   [32m126356293031170048[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:14:47.960 INFO  com.aspect.LogAspect                              :93   [32m126356293031170048[0;39m ------------- 结束 耗时：115 ms -------------
2021-12-16 00:14:50.018 INFO  com.job.EbookSnapshotJob                          :32   [32m126356302145392640[0;39m 生成今日电子书快照开始
2021-12-16 00:14:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356302145392640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:50.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356302145392640[0;39m ==> Parameters: 
2021-12-16 00:14:50.403 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356302145392640[0;39m <==    Updates: 0
2021-12-16 00:14:50.403 INFO  com.job.EbookSnapshotJob                          :35   [32m126356302145392640[0;39m 生成今日电子书快照结束，耗时：384毫秒
2021-12-16 00:14:51.070 INFO  com.websocket.WebSocketServer                     :41   [32m126356234516434944[0;39m 连接关闭，token：Hr1AKhEYp6，session id：1！当前连接数：0
2021-12-16 00:14:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126356323095941120[0;39m 生成今日电子书快照开始
2021-12-16 00:14:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356323095941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:14:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356323095941120[0;39m ==> Parameters: 
2021-12-16 00:14:55.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356323095941120[0;39m <==    Updates: 0
2021-12-16 00:14:55.157 INFO  com.job.EbookSnapshotJob                          :35   [32m126356323095941120[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:15:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126356344092626944[0;39m 生成今日电子书快照开始
2021-12-16 00:15:00.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356344092626944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:00.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356344092626944[0;39m ==> Parameters: 
2021-12-16 00:15:00.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356344092626944[0;39m <==    Updates: 0
2021-12-16 00:15:00.144 INFO  com.job.EbookSnapshotJob                          :35   [32m126356344092626944[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-16 00:15:05.014 INFO  com.job.DocJob                                    :32   [32m126356365043175424[0;39m 更新电子书下的文档数据开始
2021-12-16 00:15:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356365043175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:15:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356365043175424[0;39m ==> Parameters: 
2021-12-16 00:15:05.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356365043175424[0;39m <==    Updates: 3
2021-12-16 00:15:05.172 INFO  com.job.DocJob                                    :35   [32m126356365043175424[0;39m 更新电子书下的文档数据结束，耗时：158毫秒
2021-12-16 00:15:05.172 INFO  com.job.EbookSnapshotJob                          :32   [32m126356365705875456[0;39m 生成今日电子书快照开始
2021-12-16 00:15:05.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356365705875456[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:05.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356365705875456[0;39m ==> Parameters: 
2021-12-16 00:15:05.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356365705875456[0;39m <==    Updates: 0
2021-12-16 00:15:05.281 INFO  com.job.EbookSnapshotJob                          :35   [32m126356365705875456[0;39m 生成今日电子书快照结束，耗时：109毫秒
2021-12-16 00:15:10.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126356385993723904[0;39m 生成今日电子书快照开始
2021-12-16 00:15:10.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356385993723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:10.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356385993723904[0;39m ==> Parameters: 
2021-12-16 00:15:10.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356385993723904[0;39m <==    Updates: 0
2021-12-16 00:15:10.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126356385993723904[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:15:15.028 INFO  com.job.EbookSnapshotJob                          :32   [32m126356407044935680[0;39m 生成今日电子书快照开始
2021-12-16 00:15:15.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356407044935680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:15.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356407044935680[0;39m ==> Parameters: 
2021-12-16 00:15:15.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356407044935680[0;39m <==    Updates: 0
2021-12-16 00:15:15.172 INFO  com.job.EbookSnapshotJob                          :35   [32m126356407044935680[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:15:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356427940958208[0;39m 生成今日电子书快照开始
2021-12-16 00:15:20.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356427940958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:20.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356427940958208[0;39m ==> Parameters: 
2021-12-16 00:15:20.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356427940958208[0;39m <==    Updates: 0
2021-12-16 00:15:20.156 INFO  com.job.EbookSnapshotJob                          :35   [32m126356427940958208[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-16 00:15:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356448912478208[0;39m 生成今日电子书快照开始
2021-12-16 00:15:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356448912478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356448912478208[0;39m ==> Parameters: 
2021-12-16 00:15:25.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356448912478208[0;39m <==    Updates: 0
2021-12-16 00:15:25.153 INFO  com.job.EbookSnapshotJob                          :35   [32m126356448912478208[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:15:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m126356469904969728[0;39m 生成今日电子书快照开始
2021-12-16 00:15:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356469904969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356469904969728[0;39m ==> Parameters: 
2021-12-16 00:15:30.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356469904969728[0;39m <==    Updates: 0
2021-12-16 00:15:30.158 INFO  com.job.EbookSnapshotJob                          :35   [32m126356469904969728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:15:35.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126356490851323904[0;39m 生成今日电子书快照开始
2021-12-16 00:15:35.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356490851323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:35.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356490851323904[0;39m ==> Parameters: 
2021-12-16 00:15:35.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356490851323904[0;39m <==    Updates: 0
2021-12-16 00:15:35.228 INFO  com.job.EbookSnapshotJob                          :35   [32m126356490851323904[0;39m 生成今日电子书快照结束，耗时：219毫秒
2021-12-16 00:15:35.228 INFO  com.job.DocJob                                    :32   [32m126356491769876480[0;39m 更新电子书下的文档数据开始
2021-12-16 00:15:35.228 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356491769876480[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:15:35.228 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356491769876480[0;39m ==> Parameters: 
2021-12-16 00:15:35.343 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356491769876480[0;39m <==    Updates: 3
2021-12-16 00:15:35.343 INFO  com.job.DocJob                                    :35   [32m126356491769876480[0;39m 更新电子书下的文档数据结束，耗时：115毫秒
2021-12-16 00:15:40.025 INFO  com.job.EbookSnapshotJob                          :32   [32m126356511889952768[0;39m 生成今日电子书快照开始
2021-12-16 00:15:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356511889952768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356511889952768[0;39m ==> Parameters: 
2021-12-16 00:15:40.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356511889952768[0;39m <==    Updates: 0
2021-12-16 00:15:40.197 INFO  com.job.EbookSnapshotJob                          :35   [32m126356511889952768[0;39m 生成今日电子书快照结束，耗时：172毫秒
2021-12-16 00:15:45.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356532798558208[0;39m 生成今日电子书快照开始
2021-12-16 00:15:45.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356532798558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:45.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356532798558208[0;39m ==> Parameters: 
2021-12-16 00:15:45.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356532798558208[0;39m <==    Updates: 0
2021-12-16 00:15:45.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126356532798558208[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:15:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126356553782661120[0;39m 生成今日电子书快照开始
2021-12-16 00:15:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356553782661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356553782661120[0;39m ==> Parameters: 
2021-12-16 00:15:50.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356553782661120[0;39m <==    Updates: 0
2021-12-16 00:15:50.157 INFO  com.job.EbookSnapshotJob                          :35   [32m126356553782661120[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:15:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126356574737403904[0;39m 生成今日电子书快照开始
2021-12-16 00:15:55.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356574737403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:15:55.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356574737403904[0;39m ==> Parameters: 
2021-12-16 00:15:55.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356574737403904[0;39m <==    Updates: 0
2021-12-16 00:15:55.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126356574737403904[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:16:00.026 INFO  com.job.EbookSnapshotJob                          :32   [32m126356595780227072[0;39m 生成今日电子书快照开始
2021-12-16 00:16:00.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356595780227072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:00.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356595780227072[0;39m ==> Parameters: 
2021-12-16 00:16:00.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356595780227072[0;39m <==    Updates: 0
2021-12-16 00:16:00.157 INFO  com.job.EbookSnapshotJob                          :35   [32m126356595780227072[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-16 00:16:05.003 INFO  com.job.DocJob                                    :32   [32m126356616655278080[0;39m 更新电子书下的文档数据开始
2021-12-16 00:16:05.034 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356616655278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:16:05.050 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356616655278080[0;39m ==> Parameters: 
2021-12-16 00:16:05.128 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356616655278080[0;39m <==    Updates: 3
2021-12-16 00:16:05.128 INFO  com.job.DocJob                                    :35   [32m126356616655278080[0;39m 更新电子书下的文档数据结束，耗时：125毫秒
2021-12-16 00:16:05.143 INFO  com.job.EbookSnapshotJob                          :32   [32m126356617242480640[0;39m 生成今日电子书快照开始
2021-12-16 00:16:05.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356617242480640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:05.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356617242480640[0;39m ==> Parameters: 
2021-12-16 00:16:05.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356617242480640[0;39m <==    Updates: 0
2021-12-16 00:16:05.240 INFO  com.job.EbookSnapshotJob                          :35   [32m126356617242480640[0;39m 生成今日电子书快照结束，耗时：97毫秒
2021-12-16 00:16:10.003 INFO  com.job.EbookSnapshotJob                          :32   [32m126356637626798080[0;39m 生成今日电子书快照开始
2021-12-16 00:16:10.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356637626798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:10.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356637626798080[0;39m ==> Parameters: 
2021-12-16 00:16:10.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356637626798080[0;39m <==    Updates: 0
2021-12-16 00:16:10.303 INFO  com.job.EbookSnapshotJob                          :35   [32m126356637626798080[0;39m 生成今日电子书快照结束，耗时：300毫秒
2021-12-16 00:16:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356658627678208[0;39m 生成今日电子书快照开始
2021-12-16 00:16:15.041 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356658627678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:15.041 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356658627678208[0;39m ==> Parameters: 
2021-12-16 00:16:15.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356658627678208[0;39m <==    Updates: 0
2021-12-16 00:16:15.135 INFO  com.job.EbookSnapshotJob                          :35   [32m126356658627678208[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-16 00:16:20.021 INFO  com.job.EbookSnapshotJob                          :32   [32m126356679645335552[0;39m 生成今日电子书快照开始
2021-12-16 00:16:20.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356679645335552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:20.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356679645335552[0;39m ==> Parameters: 
2021-12-16 00:16:20.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356679645335552[0;39m <==    Updates: 0
2021-12-16 00:16:20.146 INFO  com.job.EbookSnapshotJob                          :35   [32m126356679645335552[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-16 00:16:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m126356700579106816[0;39m 生成今日电子书快照开始
2021-12-16 00:16:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356700579106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356700579106816[0;39m ==> Parameters: 
2021-12-16 00:16:25.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356700579106816[0;39m <==    Updates: 0
2021-12-16 00:16:25.156 INFO  com.job.EbookSnapshotJob                          :35   [32m126356700579106816[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:16:30.004 INFO  com.job.EbookSnapshotJob                          :32   [32m126356721517072384[0;39m 生成今日电子书快照开始
2021-12-16 00:16:30.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356721517072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:30.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356721517072384[0;39m ==> Parameters: 
2021-12-16 00:16:30.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356721517072384[0;39m <==    Updates: 0
2021-12-16 00:16:30.144 INFO  com.job.EbookSnapshotJob                          :35   [32m126356721517072384[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:16:35.010 INFO  com.job.DocJob                                    :32   [32m126356742513758208[0;39m 更新电子书下的文档数据开始
2021-12-16 00:16:35.056 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356742513758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:16:35.056 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356742513758208[0;39m ==> Parameters: 
2021-12-16 00:16:35.135 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356742513758208[0;39m <==    Updates: 3
2021-12-16 00:16:35.135 INFO  com.job.DocJob                                    :35   [32m126356742513758208[0;39m 更新电子书下的文档数据结束，耗时：125毫秒
2021-12-16 00:16:35.150 INFO  com.job.EbookSnapshotJob                          :32   [32m126356743100960768[0;39m 生成今日电子书快照开始
2021-12-16 00:16:35.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356743100960768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:35.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356743100960768[0;39m ==> Parameters: 
2021-12-16 00:16:35.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356743100960768[0;39m <==    Updates: 0
2021-12-16 00:16:35.244 INFO  com.job.EbookSnapshotJob                          :35   [32m126356743100960768[0;39m 生成今日电子书快照结束，耗时：94毫秒
2021-12-16 00:16:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356763485278208[0;39m 生成今日电子书快照开始
2021-12-16 00:16:40.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356763485278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:40.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356763485278208[0;39m ==> Parameters: 
2021-12-16 00:16:40.325 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356763485278208[0;39m <==    Updates: 0
2021-12-16 00:16:40.325 INFO  com.job.EbookSnapshotJob                          :35   [32m126356763485278208[0;39m 生成今日电子书快照结束，耗时：315毫秒
2021-12-16 00:16:45.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356784456798208[0;39m 生成今日电子书快照开始
2021-12-16 00:16:45.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356784456798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:45.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356784456798208[0;39m ==> Parameters: 
2021-12-16 00:16:45.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356784456798208[0;39m <==    Updates: 0
2021-12-16 00:16:45.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126356784456798208[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:16:50.020 INFO  com.job.EbookSnapshotJob                          :32   [32m126356805470261248[0;39m 生成今日电子书快照开始
2021-12-16 00:16:50.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356805470261248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:50.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356805470261248[0;39m ==> Parameters: 
2021-12-16 00:16:50.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356805470261248[0;39m <==    Updates: 0
2021-12-16 00:16:50.160 INFO  com.job.EbookSnapshotJob                          :35   [32m126356805470261248[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:16:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126356826437586944[0;39m 生成今日电子书快照开始
2021-12-16 00:16:55.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356826437586944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:16:55.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356826437586944[0;39m ==> Parameters: 
2021-12-16 00:16:55.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356826437586944[0;39m <==    Updates: 0
2021-12-16 00:16:55.159 INFO  com.job.EbookSnapshotJob                          :35   [32m126356826437586944[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:17:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126356847367163904[0;39m 生成今日电子书快照开始
2021-12-16 00:17:00.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356847367163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:00.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356847367163904[0;39m ==> Parameters: 
2021-12-16 00:17:00.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356847367163904[0;39m <==    Updates: 0
2021-12-16 00:17:00.135 INFO  com.job.EbookSnapshotJob                          :35   [32m126356847367163904[0;39m 生成今日电子书快照结束，耗时：126毫秒
2021-12-16 00:17:05.003 INFO  com.job.DocJob                                    :32   [32m126356868313518080[0;39m 更新电子书下的文档数据开始
2021-12-16 00:17:05.050 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356868313518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:17:05.050 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356868313518080[0;39m ==> Parameters: 
2021-12-16 00:17:05.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356868313518080[0;39m <==    Updates: 3
2021-12-16 00:17:05.160 INFO  com.job.DocJob                                    :35   [32m126356868313518080[0;39m 更新电子书下的文档数据结束，耗时：157毫秒
2021-12-16 00:17:05.160 INFO  com.job.EbookSnapshotJob                          :32   [32m126356868972023808[0;39m 生成今日电子书快照开始
2021-12-16 00:17:05.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356868972023808[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:05.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356868972023808[0;39m ==> Parameters: 
2021-12-16 00:17:05.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356868972023808[0;39m <==    Updates: 0
2021-12-16 00:17:05.253 INFO  com.job.EbookSnapshotJob                          :35   [32m126356868972023808[0;39m 生成今日电子书快照结束，耗时：93毫秒
2021-12-16 00:17:06.997 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：2TqPBuD8SD，session id：2，当前连接数：1
2021-12-16 00:17:07.197 INFO  com.aspect.LogAspect                              :54   [32m126356877515821056[0;39m ------------- 开始 -------------
2021-12-16 00:17:07.197 INFO  com.aspect.LogAspect                              :55   [32m126356877515821056[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:17:07.197 INFO  com.aspect.LogAspect                              :56   [32m126356877515821056[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:17:07.197 INFO  com.aspect.LogAspect                              :57   [32m126356877515821056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:07.198 INFO  com.aspect.LogAspect                              :54   [32m126356877520015360[0;39m ------------- 开始 -------------
2021-12-16 00:17:07.198 INFO  com.aspect.LogAspect                              :80   [32m126356877515821056[0;39m 请求参数: []
2021-12-16 00:17:07.199 INFO  com.aspect.LogAspect                              :55   [32m126356877520015360[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:17:07.199 INFO  com.aspect.LogAspect                              :56   [32m126356877520015360[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:17:07.199 INFO  com.aspect.LogAspect                              :57   [32m126356877520015360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:07.199 INFO  com.aspect.LogAspect                              :80   [32m126356877520015360[0;39m 请求参数: []
2021-12-16 00:17:07.201 INFO  com.aspect.LogAspect                              :54   [32m126356877532598272[0;39m ------------- 开始 -------------
2021-12-16 00:17:07.202 INFO  com.aspect.LogAspect                              :55   [32m126356877532598272[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:17:07.202 INFO  com.aspect.LogAspect                              :56   [32m126356877532598272[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:17:07.203 INFO  com.aspect.LogAspect                              :57   [32m126356877532598272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:07.203 INFO  com.aspect.LogAspect                              :80   [32m126356877532598272[0;39m 请求参数: []
2021-12-16 00:17:07.240 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356877515821056[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:17:07.240 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356877515821056[0;39m ==> Parameters: 
2021-12-16 00:17:07.249 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356877520015360[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:17:07.249 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356877520015360[0;39m ==> Parameters: 
2021-12-16 00:17:07.250 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356877532598272[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:17:07.251 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356877532598272[0;39m ==> Parameters: 
2021-12-16 00:17:07.291 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356877515821056[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:17:07.291 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356877515821056[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:17:07.293 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356877515821056[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:17:07.293 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356877515821056[0;39m <==      Total: 2
2021-12-16 00:17:07.294 INFO  com.aspect.LogAspect                              :92   [32m126356877515821056[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:17:07.294 INFO  com.aspect.LogAspect                              :93   [32m126356877515821056[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-16 00:17:07.295 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:17:07.295 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:17:07.296 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:17:07.297 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:17:07.297 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:17:07.299 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:17:07.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:17:07.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:17:07.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:17:07.300 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356877520015360[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:17:07.300 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356877520015360[0;39m <==      Total: 6
2021-12-16 00:17:07.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:17:07.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:17:07.301 INFO  com.aspect.LogAspect                              :92   [32m126356877520015360[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:17:07.301 INFO  com.aspect.LogAspect                              :93   [32m126356877520015360[0;39m ------------- 结束 耗时：103 ms -------------
2021-12-16 00:17:07.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:17:07.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:17:07.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:17:07.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:17:07.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:17:07.304 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:17:07.304 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:17:07.305 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:17:07.305 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:17:07.306 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:17:07.306 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:17:07.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:17:07.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:17:07.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:17:07.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356877532598272[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:17:07.309 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356877532598272[0;39m <==      Total: 19
2021-12-16 00:17:07.311 INFO  com.aspect.LogAspect                              :92   [32m126356877532598272[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:17:07.311 INFO  com.aspect.LogAspect                              :93   [32m126356877532598272[0;39m ------------- 结束 耗时：110 ms -------------
2021-12-16 00:17:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m126356889335369728[0;39m 生成今日电子书快照开始
2021-12-16 00:17:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356889335369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356889335369728[0;39m ==> Parameters: 
2021-12-16 00:17:10.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356889335369728[0;39m <==    Updates: 0
2021-12-16 00:17:10.159 INFO  com.job.EbookSnapshotJob                          :35   [32m126356889335369728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:17:10.662 INFO  com.aspect.LogAspect                              :54   [32m126356892049084416[0;39m ------------- 开始 -------------
2021-12-16 00:17:10.663 INFO  com.aspect.LogAspect                              :55   [32m126356892049084416[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-16 00:17:10.663 INFO  com.aspect.LogAspect                              :56   [32m126356892049084416[0;39m 类名方法: com.controller.UserController.login
2021-12-16 00:17:10.663 INFO  com.aspect.LogAspect                              :57   [32m126356892049084416[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:10.663 INFO  com.aspect.LogAspect                              :80   [32m126356892049084416[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-16 00:17:10.791 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126356892049084416[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-16 00:17:10.792 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126356892049084416[0;39m ==> Parameters: test123(String)
2021-12-16 00:17:10.837 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126356892049084416[0;39m <==    Columns: id, login_name, name, password
2021-12-16 00:17:10.837 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126356892049084416[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-16 00:17:10.837 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126356892049084416[0;39m <==      Total: 1
2021-12-16 00:17:10.838 INFO  com.controller.UserController                     :77   [32m126356892049084416[0;39m 生成单点登录token:126356892787281920,并放入redis中
2021-12-16 00:17:10.851 INFO  com.aspect.LogAspect                              :92   [32m126356892049084416[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"126356892787281920"},"success":true}
2021-12-16 00:17:10.851 INFO  com.aspect.LogAspect                              :93   [32m126356892049084416[0;39m ------------- 结束 耗时：189 ms -------------
2021-12-16 00:17:11.005 INFO  com.websocket.WebSocketServer                     :41   [32m126356234516434944[0;39m 连接关闭，token：2TqPBuD8SD，session id：2！当前连接数：0
2021-12-16 00:17:11.840 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：q2k0ehuWp5，session id：3，当前连接数：1
2021-12-16 00:17:11.922 INFO  com.aspect.LogAspect                              :54   [32m126356897333907456[0;39m ------------- 开始 -------------
2021-12-16 00:17:11.922 INFO  com.aspect.LogAspect                              :55   [32m126356897333907456[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:17:11.923 INFO  com.aspect.LogAspect                              :56   [32m126356897333907456[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:17:11.923 INFO  com.aspect.LogAspect                              :57   [32m126356897333907456[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:11.923 INFO  com.aspect.LogAspect                              :80   [32m126356897333907456[0;39m 请求参数: []
2021-12-16 00:17:11.926 INFO  com.aspect.LogAspect                              :54   [32m126356897350684672[0;39m ------------- 开始 -------------
2021-12-16 00:17:11.926 INFO  com.aspect.LogAspect                              :55   [32m126356897350684672[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:17:11.926 INFO  com.aspect.LogAspect                              :54   [32m126356897350684673[0;39m ------------- 开始 -------------
2021-12-16 00:17:11.926 INFO  com.aspect.LogAspect                              :56   [32m126356897350684672[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:17:11.926 INFO  com.aspect.LogAspect                              :55   [32m126356897350684673[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:17:11.927 INFO  com.aspect.LogAspect                              :57   [32m126356897350684672[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:11.927 INFO  com.aspect.LogAspect                              :56   [32m126356897350684673[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:17:11.927 INFO  com.aspect.LogAspect                              :80   [32m126356897350684672[0;39m 请求参数: []
2021-12-16 00:17:11.927 INFO  com.aspect.LogAspect                              :57   [32m126356897350684673[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:11.927 INFO  com.aspect.LogAspect                              :80   [32m126356897350684673[0;39m 请求参数: []
2021-12-16 00:17:11.966 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356897333907456[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:17:11.967 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356897333907456[0;39m ==> Parameters: 
2021-12-16 00:17:11.979 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356897350684672[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:17:11.979 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356897350684673[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:17:11.979 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356897350684672[0;39m ==> Parameters: 
2021-12-16 00:17:11.979 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356897350684673[0;39m ==> Parameters: 
2021-12-16 00:17:12.014 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356897333907456[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:17:12.015 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356897333907456[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:17:12.017 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126356897333907456[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:17:12.018 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126356897333907456[0;39m <==      Total: 2
2021-12-16 00:17:12.019 INFO  com.aspect.LogAspect                              :92   [32m126356897333907456[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:17:12.019 INFO  com.aspect.LogAspect                              :93   [32m126356897333907456[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-16 00:17:12.022 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:17:12.023 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:17:12.023 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:17:12.023 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:17:12.023 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:17:12.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:17:12.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:17:12.024 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:17:12.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:17:12.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:17:12.025 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:17:12.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:17:12.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:17:12.026 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:17:12.026 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:17:12.026 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:17:12.027 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:17:12.027 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:17:12.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:17:12.028 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126356897350684672[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:17:12.033 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126356897350684672[0;39m <==      Total: 6
2021-12-16 00:17:12.033 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:17:12.033 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:17:12.034 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:17:12.034 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:17:12.034 INFO  com.aspect.LogAspect                              :92   [32m126356897350684672[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:17:12.034 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:17:12.034 INFO  com.aspect.LogAspect                              :93   [32m126356897350684672[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-16 00:17:12.034 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:17:12.035 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356897350684673[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:17:12.035 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356897350684673[0;39m <==      Total: 19
2021-12-16 00:17:12.037 INFO  com.aspect.LogAspect                              :92   [32m126356897350684673[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:17:12.037 INFO  com.aspect.LogAspect                              :93   [32m126356897350684673[0;39m ------------- 结束 耗时：111 ms -------------
2021-12-16 00:17:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356910285918208[0;39m 生成今日电子书快照开始
2021-12-16 00:17:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356910285918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:15.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356910285918208[0;39m ==> Parameters: 
2021-12-16 00:17:15.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356910285918208[0;39m <==    Updates: 0
2021-12-16 00:17:15.201 INFO  com.job.EbookSnapshotJob                          :35   [32m126356910285918208[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-16 00:17:18.805 INFO  com.aspect.LogAspect                              :54   [32m126356926203301888[0;39m ------------- 开始 -------------
2021-12-16 00:17:18.806 INFO  com.aspect.LogAspect                              :55   [32m126356926203301888[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:17:18.806 INFO  com.aspect.LogAspect                              :56   [32m126356926203301888[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:17:18.806 INFO  com.aspect.LogAspect                              :57   [32m126356926203301888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:17:18.806 INFO  com.aspect.LogAspect                              :80   [32m126356926203301888[0;39m 请求参数: []
2021-12-16 00:17:18.851 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356926203301888[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:17:18.851 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356926203301888[0;39m ==> Parameters: 
2021-12-16 00:17:18.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:17:18.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:17:18.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:17:18.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:17:18.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:17:18.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:17:18.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:17:18.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:17:18.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:17:18.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:17:18.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:17:18.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:17:18.897 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126356926203301888[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:17:18.897 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126356926203301888[0;39m <==      Total: 19
2021-12-16 00:17:18.898 INFO  com.aspect.LogAspect                              :92   [32m126356926203301888[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:17:18.898 INFO  com.aspect.LogAspect                              :93   [32m126356926203301888[0;39m ------------- 结束 耗时：93 ms -------------
2021-12-16 00:17:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m126356931282604032[0;39m 生成今日电子书快照开始
2021-12-16 00:17:20.310 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356931282604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:20.312 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356931282604032[0;39m ==> Parameters: 
2021-12-16 00:17:20.420 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356931282604032[0;39m <==    Updates: 0
2021-12-16 00:17:20.420 INFO  com.job.EbookSnapshotJob                          :35   [32m126356931282604032[0;39m 生成今日电子书快照结束，耗时：403毫秒
2021-12-16 00:17:23.308 INFO  com.websocket.WebSocketServer                     :41   [32m126356892049084416[0;39m 连接关闭，token：q2k0ehuWp5，session id：3！当前连接数：0
2021-12-16 00:17:25.004 INFO  com.job.EbookSnapshotJob                          :32   [32m126356952203792384[0;39m 生成今日电子书快照开始
2021-12-16 00:17:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356952203792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356952203792384[0;39m ==> Parameters: 
2021-12-16 00:17:25.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356952203792384[0;39m <==    Updates: 0
2021-12-16 00:17:25.144 INFO  com.job.EbookSnapshotJob                          :35   [32m126356952203792384[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:17:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126356973200478208[0;39m 生成今日电子书快照开始
2021-12-16 00:17:30.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356973200478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:30.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356973200478208[0;39m ==> Parameters: 
2021-12-16 00:17:30.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356973200478208[0;39m <==    Updates: 0
2021-12-16 00:17:30.141 INFO  com.job.EbookSnapshotJob                          :35   [32m126356973200478208[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-16 00:17:35.003 INFO  com.job.DocJob                                    :32   [32m126356994142638080[0;39m 更新电子书下的文档数据开始
2021-12-16 00:17:35.035 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356994142638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:17:35.035 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356994142638080[0;39m ==> Parameters: 
2021-12-16 00:17:35.128 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126356994142638080[0;39m <==    Updates: 3
2021-12-16 00:17:35.128 INFO  com.job.DocJob                                    :35   [32m126356994142638080[0;39m 更新电子书下的文档数据结束，耗时：125毫秒
2021-12-16 00:17:35.128 INFO  com.job.EbookSnapshotJob                          :32   [32m126356994666926080[0;39m 生成今日电子书快照开始
2021-12-16 00:17:35.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356994666926080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:35.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356994666926080[0;39m ==> Parameters: 
2021-12-16 00:17:35.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126356994666926080[0;39m <==    Updates: 0
2021-12-16 00:17:35.226 INFO  com.job.EbookSnapshotJob                          :35   [32m126356994666926080[0;39m 生成今日电子书快照结束，耗时：98毫秒
2021-12-16 00:17:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126357015156101120[0;39m 生成今日电子书快照开始
2021-12-16 00:17:40.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357015156101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:40.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357015156101120[0;39m ==> Parameters: 
2021-12-16 00:17:40.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357015156101120[0;39m <==    Updates: 0
2021-12-16 00:17:40.157 INFO  com.job.EbookSnapshotJob                          :35   [32m126357015156101120[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:17:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126357036127621120[0;39m 生成今日电子书快照开始
2021-12-16 00:17:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357036127621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357036127621120[0;39m ==> Parameters: 
2021-12-16 00:17:45.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357036127621120[0;39m <==    Updates: 0
2021-12-16 00:17:45.142 INFO  com.job.EbookSnapshotJob                          :35   [32m126357036127621120[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-16 00:17:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126357057099141120[0;39m 生成今日电子书快照开始
2021-12-16 00:17:50.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357057099141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:50.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357057099141120[0;39m ==> Parameters: 
2021-12-16 00:17:50.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357057099141120[0;39m <==    Updates: 0
2021-12-16 00:17:50.157 INFO  com.job.EbookSnapshotJob                          :35   [32m126357057099141120[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:17:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126357078095826944[0;39m 生成今日电子书快照开始
2021-12-16 00:17:55.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357078095826944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:17:55.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357078095826944[0;39m ==> Parameters: 
2021-12-16 00:17:55.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357078095826944[0;39m <==    Updates: 0
2021-12-16 00:17:55.147 INFO  com.job.EbookSnapshotJob                          :35   [32m126357078095826944[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-16 00:18:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126357099042181120[0;39m 生成今日电子书快照开始
2021-12-16 00:18:00.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357099042181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:00.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357099042181120[0;39m ==> Parameters: 
2021-12-16 00:18:00.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357099042181120[0;39m <==    Updates: 0
2021-12-16 00:18:00.156 INFO  com.job.EbookSnapshotJob                          :35   [32m126357099042181120[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:18:05.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126357120038866944[0;39m 生成今日电子书快照开始
2021-12-16 00:18:05.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357120038866944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:05.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357120038866944[0;39m ==> Parameters: 
2021-12-16 00:18:05.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357120038866944[0;39m <==    Updates: 0
2021-12-16 00:18:05.160 INFO  com.job.EbookSnapshotJob                          :35   [32m126357120038866944[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:18:05.160 INFO  com.job.DocJob                                    :32   [32m126357120630263808[0;39m 更新电子书下的文档数据开始
2021-12-16 00:18:05.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357120630263808[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:18:05.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357120630263808[0;39m ==> Parameters: 
2021-12-16 00:18:05.272 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357120630263808[0;39m <==    Updates: 3
2021-12-16 00:18:05.272 INFO  com.job.DocJob                                    :35   [32m126357120630263808[0;39m 更新电子书下的文档数据结束，耗时：112毫秒
2021-12-16 00:18:10.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126357141010386944[0;39m 生成今日电子书快照开始
2021-12-16 00:18:10.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357141010386944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:10.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357141010386944[0;39m ==> Parameters: 
2021-12-16 00:18:10.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357141010386944[0;39m <==    Updates: 0
2021-12-16 00:18:10.257 INFO  com.job.EbookSnapshotJob                          :35   [32m126357141010386944[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-16 00:18:15.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126357161939963904[0;39m 生成今日电子书快照开始
2021-12-16 00:18:15.041 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357161939963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:15.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357161939963904[0;39m ==> Parameters: 
2021-12-16 00:18:15.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357161939963904[0;39m <==    Updates: 0
2021-12-16 00:18:15.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126357161939963904[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:18:20.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126357182911483904[0;39m 生成今日电子书快照开始
2021-12-16 00:18:20.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357182911483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:20.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357182911483904[0;39m ==> Parameters: 
2021-12-16 00:18:20.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357182911483904[0;39m <==    Updates: 0
2021-12-16 00:18:20.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126357182911483904[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:18:25.009 INFO  com.job.EbookSnapshotJob                          :32   [32m126357203883003904[0;39m 生成今日电子书快照开始
2021-12-16 00:18:25.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357203883003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:25.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357203883003904[0;39m ==> Parameters: 
2021-12-16 00:18:25.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357203883003904[0;39m <==    Updates: 0
2021-12-16 00:18:25.150 INFO  com.job.EbookSnapshotJob                          :35   [32m126357203883003904[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:18:30.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126357224896466944[0;39m 生成今日电子书快照开始
2021-12-16 00:18:30.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357224896466944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:30.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357224896466944[0;39m ==> Parameters: 
2021-12-16 00:18:30.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357224896466944[0;39m <==    Updates: 0
2021-12-16 00:18:30.159 INFO  com.job.EbookSnapshotJob                          :35   [32m126357224896466944[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:18:35.013 INFO  com.job.DocJob                                    :32   [32m126357245842821120[0;39m 更新电子书下的文档数据开始
2021-12-16 00:18:35.078 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357245842821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:18:35.078 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357245842821120[0;39m ==> Parameters: 
2021-12-16 00:18:35.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357245842821120[0;39m <==    Updates: 3
2021-12-16 00:18:35.172 INFO  com.job.DocJob                                    :35   [32m126357245842821120[0;39m 更新电子书下的文档数据结束，耗时：159毫秒
2021-12-16 00:18:35.172 INFO  com.job.EbookSnapshotJob                          :32   [32m126357246509715456[0;39m 生成今日电子书快照开始
2021-12-16 00:18:35.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357246509715456[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:35.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357246509715456[0;39m ==> Parameters: 
2021-12-16 00:18:35.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357246509715456[0;39m <==    Updates: 0
2021-12-16 00:18:35.282 INFO  com.job.EbookSnapshotJob                          :35   [32m126357246509715456[0;39m 生成今日电子书快照结束，耗时：110毫秒
2021-12-16 00:18:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126357266814341120[0;39m 生成今日电子书快照开始
2021-12-16 00:18:40.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357266814341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:40.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357266814341120[0;39m ==> Parameters: 
2021-12-16 00:18:40.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357266814341120[0;39m <==    Updates: 0
2021-12-16 00:18:40.172 INFO  com.job.EbookSnapshotJob                          :35   [32m126357266814341120[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-16 00:18:45.003 INFO  com.job.EbookSnapshotJob                          :32   [32m126357287743918080[0;39m 生成今日电子书快照开始
2021-12-16 00:18:45.034 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357287743918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:45.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357287743918080[0;39m ==> Parameters: 
2021-12-16 00:18:45.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357287743918080[0;39m <==    Updates: 0
2021-12-16 00:18:45.144 INFO  com.job.EbookSnapshotJob                          :35   [32m126357287743918080[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:18:50.027 INFO  com.job.EbookSnapshotJob                          :32   [32m126357308816101376[0;39m 生成今日电子书快照开始
2021-12-16 00:18:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357308816101376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357308816101376[0;39m ==> Parameters: 
2021-12-16 00:18:50.188 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357308816101376[0;39m <==    Updates: 0
2021-12-16 00:18:50.188 INFO  com.job.EbookSnapshotJob                          :35   [32m126357308816101376[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-16 00:18:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126357329754066944[0;39m 生成今日电子书快照开始
2021-12-16 00:18:55.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357329754066944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:18:55.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357329754066944[0;39m ==> Parameters: 
2021-12-16 00:18:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357329754066944[0;39m <==    Updates: 0
2021-12-16 00:18:55.160 INFO  com.job.EbookSnapshotJob                          :35   [32m126357329754066944[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:19:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m126357350700421120[0;39m 生成今日电子书快照开始
2021-12-16 00:19:00.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357350700421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:00.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357350700421120[0;39m ==> Parameters: 
2021-12-16 00:19:00.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357350700421120[0;39m <==    Updates: 0
2021-12-16 00:19:00.157 INFO  com.job.EbookSnapshotJob                          :35   [32m126357350700421120[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-16 00:19:05.010 INFO  com.job.DocJob                                    :32   [32m126357371659358208[0;39m 更新电子书下的文档数据开始
2021-12-16 00:19:05.088 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357371659358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:19:05.088 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357371659358208[0;39m ==> Parameters: 
2021-12-16 00:19:05.213 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357371659358208[0;39m <==    Updates: 3
2021-12-16 00:19:05.213 INFO  com.job.DocJob                                    :35   [32m126357371659358208[0;39m 更新电子书下的文档数据结束，耗时：203毫秒
2021-12-16 00:19:05.213 INFO  com.job.EbookSnapshotJob                          :32   [32m126357372510801920[0;39m 生成今日电子书快照开始
2021-12-16 00:19:05.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357372510801920[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:05.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357372510801920[0;39m ==> Parameters: 
2021-12-16 00:19:05.326 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357372510801920[0;39m <==    Updates: 0
2021-12-16 00:19:05.326 INFO  com.job.EbookSnapshotJob                          :35   [32m126357372510801920[0;39m 生成今日电子书快照结束，耗时：113毫秒
2021-12-16 00:19:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126357392630878208[0;39m 生成今日电子书快照开始
2021-12-16 00:19:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357392630878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357392630878208[0;39m ==> Parameters: 
2021-12-16 00:19:10.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357392630878208[0;39m <==    Updates: 0
2021-12-16 00:19:10.172 INFO  com.job.EbookSnapshotJob                          :35   [32m126357392630878208[0;39m 生成今日电子书快照结束，耗时：162毫秒
2021-12-16 00:19:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126357413602398208[0;39m 生成今日电子书快照开始
2021-12-16 00:19:15.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357413602398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:15.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357413602398208[0;39m ==> Parameters: 
2021-12-16 00:19:15.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357413602398208[0;39m <==    Updates: 0
2021-12-16 00:19:15.151 INFO  com.job.EbookSnapshotJob                          :35   [32m126357413602398208[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:19:20.019 INFO  com.job.EbookSnapshotJob                          :32   [32m126357434611666944[0;39m 生成今日电子书快照开始
2021-12-16 00:19:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357434611666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357434611666944[0;39m ==> Parameters: 
2021-12-16 00:19:20.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357434611666944[0;39m <==    Updates: 0
2021-12-16 00:19:20.210 INFO  com.job.EbookSnapshotJob                          :35   [32m126357434611666944[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-16 00:19:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m126357455516078080[0;39m 生成今日电子书快照开始
2021-12-16 00:19:25.034 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357455516078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:25.034 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357455516078080[0;39m ==> Parameters: 
2021-12-16 00:19:25.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357455516078080[0;39m <==    Updates: 0
2021-12-16 00:19:25.143 INFO  com.job.EbookSnapshotJob                          :35   [32m126357455516078080[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-16 00:19:30.025 INFO  com.job.EbookSnapshotJob                          :32   [32m126357476579872768[0;39m 生成今日电子书快照开始
2021-12-16 00:19:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357476579872768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357476579872768[0;39m ==> Parameters: 
2021-12-16 00:19:30.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357476579872768[0;39m <==    Updates: 0
2021-12-16 00:19:30.166 INFO  com.job.EbookSnapshotJob                          :35   [32m126357476579872768[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:19:35.017 INFO  com.job.DocJob                                    :32   [32m126357497517838336[0;39m 更新电子书下的文档数据开始
2021-12-16 00:19:35.049 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357497517838336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:19:35.049 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357497517838336[0;39m ==> Parameters: 
2021-12-16 00:19:35.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126357497517838336[0;39m <==    Updates: 3
2021-12-16 00:19:35.158 INFO  com.job.DocJob                                    :35   [32m126357497517838336[0;39m 更新电子书下的文档数据结束，耗时：141毫秒
2021-12-16 00:19:35.158 INFO  com.job.EbookSnapshotJob                          :32   [32m126357498109235200[0;39m 生成今日电子书快照开始
2021-12-16 00:19:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357498109235200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357498109235200[0;39m ==> Parameters: 
2021-12-16 00:19:35.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357498109235200[0;39m <==    Updates: 0
2021-12-16 00:19:35.272 INFO  com.job.EbookSnapshotJob                          :35   [32m126357498109235200[0;39m 生成今日电子书快照结束，耗时：114毫秒
2021-12-16 00:19:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m126357518468386816[0;39m 生成今日电子书快照开始
2021-12-16 00:19:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357518468386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:19:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357518468386816[0;39m ==> Parameters: 
2021-12-16 00:19:40.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126357518468386816[0;39m <==    Updates: 0
2021-12-16 00:19:40.153 INFO  com.job.EbookSnapshotJob                          :35   [32m126357518468386816[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:35:38.056 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-16 00:35:38.112 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 11544 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-16 00:35:38.112 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-16 00:35:38.318 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-16 00:35:38.318 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-16 00:35:42.725 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-16 00:35:42.741 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-16 00:35:43.378 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 603 ms. Found 0 Redis repository interfaces.
2021-12-16 00:35:44.971 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-16 00:35:45.003 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-16 00:35:45.003 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-16 00:35:45.003 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-16 00:35:45.175 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-16 00:35:45.175 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6857 ms
2021-12-16 00:35:47.889 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-16 00:35:47.921 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-16 00:35:48.022 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-16 00:35:48.054 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 11.5 seconds (JVM running for 14.274)
2021-12-16 00:35:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126361586939072512[0;39m 生成今日电子书快照开始
2021-12-16 00:35:50.105 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m126361586939072512[0;39m HikariPool-1 - Starting...
2021-12-16 00:35:50.899 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m126361586939072512[0;39m HikariPool-1 - Start completed.
2021-12-16 00:35:50.930 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361586939072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:35:50.961 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361586939072512[0;39m ==> Parameters: 
2021-12-16 00:35:51.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361586939072512[0;39m <==    Updates: 0
2021-12-16 00:35:51.074 INFO  com.job.EbookSnapshotJob                          :35   [32m126361586939072512[0;39m 生成今日电子书快照结束，耗时：1063毫秒
2021-12-16 00:35:55.004 INFO  com.job.EbookSnapshotJob                          :32   [32m126361607881232384[0;39m 生成今日电子书快照开始
2021-12-16 00:35:55.035 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361607881232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:35:55.035 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361607881232384[0;39m ==> Parameters: 
2021-12-16 00:35:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361607881232384[0;39m <==    Updates: 0
2021-12-16 00:35:55.160 INFO  com.job.EbookSnapshotJob                          :35   [32m126361607881232384[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-16 00:36:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126361628882112512[0;39m 生成今日电子书快照开始
2021-12-16 00:36:00.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361628882112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:00.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361628882112512[0;39m ==> Parameters: 
2021-12-16 00:36:00.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361628882112512[0;39m <==    Updates: 0
2021-12-16 00:36:00.154 INFO  com.job.EbookSnapshotJob                          :35   [32m126361628882112512[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:36:05.014 INFO  com.job.DocJob                                    :32   [32m126361649866215424[0;39m 更新电子书下的文档数据开始
2021-12-16 00:36:05.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361649866215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:36:05.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361649866215424[0;39m ==> Parameters: 
2021-12-16 00:36:05.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361649866215424[0;39m <==    Updates: 3
2021-12-16 00:36:05.159 INFO  com.job.DocJob                                    :35   [32m126361649866215424[0;39m 更新电子书下的文档数据结束，耗时：145毫秒
2021-12-16 00:36:05.159 INFO  com.job.EbookSnapshotJob                          :32   [32m126361650474389504[0;39m 生成今日电子书快照开始
2021-12-16 00:36:05.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361650474389504[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:05.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361650474389504[0;39m ==> Parameters: 
2021-12-16 00:36:05.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361650474389504[0;39m <==    Updates: 0
2021-12-16 00:36:05.252 INFO  com.job.EbookSnapshotJob                          :35   [32m126361650474389504[0;39m 生成今日电子书快照结束，耗时：93毫秒
2021-12-16 00:36:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126361670825152512[0;39m 生成今日电子书快照开始
2021-12-16 00:36:10.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361670825152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:10.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361670825152512[0;39m ==> Parameters: 
2021-12-16 00:36:10.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361670825152512[0;39m <==    Updates: 0
2021-12-16 00:36:10.137 INFO  com.job.EbookSnapshotJob                          :35   [32m126361670825152512[0;39m 生成今日电子书快照结束，耗时：126毫秒
2021-12-16 00:36:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m126361691809255424[0;39m 生成今日电子书快照开始
2021-12-16 00:36:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361691809255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361691809255424[0;39m ==> Parameters: 
2021-12-16 00:36:15.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361691809255424[0;39m <==    Updates: 0
2021-12-16 00:36:15.174 INFO  com.job.EbookSnapshotJob                          :35   [32m126361691809255424[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-16 00:36:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m126361712784969728[0;39m 生成今日电子书快照开始
2021-12-16 00:36:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361712784969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361712784969728[0;39m ==> Parameters: 
2021-12-16 00:36:20.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361712784969728[0;39m <==    Updates: 0
2021-12-16 00:36:20.158 INFO  com.job.EbookSnapshotJob                          :35   [32m126361712784969728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:36:25.021 INFO  com.job.EbookSnapshotJob                          :32   [32m126361733781655552[0;39m 生成今日电子书快照开始
2021-12-16 00:36:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361733781655552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361733781655552[0;39m ==> Parameters: 
2021-12-16 00:36:25.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361733781655552[0;39m <==    Updates: 0
2021-12-16 00:36:25.162 INFO  com.job.EbookSnapshotJob                          :35   [32m126361733781655552[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:36:30.020 INFO  com.job.EbookSnapshotJob                          :32   [32m126361754748981248[0;39m 生成今日电子书快照开始
2021-12-16 00:36:30.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361754748981248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:30.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361754748981248[0;39m ==> Parameters: 
2021-12-16 00:36:30.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361754748981248[0;39m <==    Updates: 0
2021-12-16 00:36:30.161 INFO  com.job.EbookSnapshotJob                          :35   [32m126361754748981248[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:36:35.015 INFO  com.job.DocJob                                    :32   [32m126361775699529728[0;39m 更新电子书下的文档数据开始
2021-12-16 00:36:35.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361775699529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:36:35.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361775699529728[0;39m ==> Parameters: 
2021-12-16 00:36:35.527 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361775699529728[0;39m <==    Updates: 3
2021-12-16 00:36:35.527 INFO  com.job.DocJob                                    :35   [32m126361775699529728[0;39m 更新电子书下的文档数据结束，耗时：512毫秒
2021-12-16 00:36:35.527 INFO  com.job.EbookSnapshotJob                          :32   [32m126361777847013376[0;39m 生成今日电子书快照开始
2021-12-16 00:36:35.527 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361777847013376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:35.527 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361777847013376[0;39m ==> Parameters: 
2021-12-16 00:36:35.621 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361777847013376[0;39m <==    Updates: 0
2021-12-16 00:36:35.621 INFO  com.job.EbookSnapshotJob                          :35   [32m126361777847013376[0;39m 生成今日电子书快照结束，耗时：94毫秒
2021-12-16 00:36:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m126361796658466816[0;39m 生成今日电子书快照开始
2021-12-16 00:36:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361796658466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:40.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361796658466816[0;39m ==> Parameters: 
2021-12-16 00:36:40.199 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361796658466816[0;39m <==    Updates: 0
2021-12-16 00:36:40.199 INFO  com.job.EbookSnapshotJob                          :35   [32m126361796658466816[0;39m 生成今日电子书快照结束，耗时：187毫秒
2021-12-16 00:36:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m126361817629986816[0;39m 生成今日电子书快照开始
2021-12-16 00:36:45.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361817629986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:45.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361817629986816[0;39m ==> Parameters: 
2021-12-16 00:36:45.505 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361817629986816[0;39m <==    Updates: 0
2021-12-16 00:36:45.505 INFO  com.job.EbookSnapshotJob                          :35   [32m126361817629986816[0;39m 生成今日电子书快照结束，耗时：493毫秒
2021-12-16 00:36:50.030 INFO  com.job.EbookSnapshotJob                          :32   [32m126361838677004288[0;39m 生成今日电子书快照开始
2021-12-16 00:36:50.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361838677004288[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:50.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361838677004288[0;39m ==> Parameters: 
2021-12-16 00:36:50.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361838677004288[0;39m <==    Updates: 0
2021-12-16 00:36:50.173 INFO  com.job.EbookSnapshotJob                          :35   [32m126361838677004288[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:36:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126361859568832512[0;39m 生成今日电子书快照开始
2021-12-16 00:36:55.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361859568832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:36:55.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361859568832512[0;39m ==> Parameters: 
2021-12-16 00:36:55.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361859568832512[0;39m <==    Updates: 0
2021-12-16 00:36:55.152 INFO  com.job.EbookSnapshotJob                          :35   [32m126361859568832512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:37:00.028 INFO  com.job.EbookSnapshotJob                          :32   [32m126361880611655680[0;39m 生成今日电子书快照开始
2021-12-16 00:37:00.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361880611655680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:00.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361880611655680[0;39m ==> Parameters: 
2021-12-16 00:37:00.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361880611655680[0;39m <==    Updates: 0
2021-12-16 00:37:00.182 INFO  com.job.EbookSnapshotJob                          :35   [32m126361880611655680[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-16 00:37:05.015 INFO  com.job.DocJob                                    :32   [32m126361901528649728[0;39m 更新电子书下的文档数据开始
2021-12-16 00:37:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361901528649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:37:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361901528649728[0;39m ==> Parameters: 
2021-12-16 00:37:05.196 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126361901528649728[0;39m <==    Updates: 3
2021-12-16 00:37:05.196 INFO  com.job.DocJob                                    :35   [32m126361901528649728[0;39m 更新电子书下的文档数据结束，耗时：181毫秒
2021-12-16 00:37:05.196 INFO  com.job.EbookSnapshotJob                          :32   [32m126361902287818752[0;39m 生成今日电子书快照开始
2021-12-16 00:37:05.196 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361902287818752[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:05.196 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361902287818752[0;39m ==> Parameters: 
2021-12-16 00:37:05.327 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361902287818752[0;39m <==    Updates: 0
2021-12-16 00:37:05.327 INFO  com.job.EbookSnapshotJob                          :35   [32m126361902287818752[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-16 00:37:09.230 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-16 00:37:09.230 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-16 00:37:09.231 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-16 00:37:09.271 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：V1lwto29Wi，session id：0，当前连接数：1
2021-12-16 00:37:09.467 INFO  com.aspect.LogAspect                              :54   [32m126361920193302530[0;39m ------------- 开始 -------------
2021-12-16 00:37:09.467 INFO  com.aspect.LogAspect                              :54   [32m126361920193302529[0;39m ------------- 开始 -------------
2021-12-16 00:37:09.467 INFO  com.aspect.LogAspect                              :54   [32m126361920193302528[0;39m ------------- 开始 -------------
2021-12-16 00:37:09.469 INFO  com.aspect.LogAspect                              :55   [32m126361920193302530[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:09.469 INFO  com.aspect.LogAspect                              :55   [32m126361920193302529[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:37:09.469 INFO  com.aspect.LogAspect                              :55   [32m126361920193302528[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:37:09.470 INFO  com.aspect.LogAspect                              :56   [32m126361920193302528[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:37:09.470 INFO  com.aspect.LogAspect                              :56   [32m126361920193302530[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:09.470 INFO  com.aspect.LogAspect                              :56   [32m126361920193302529[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:37:09.471 INFO  com.aspect.LogAspect                              :57   [32m126361920193302530[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:09.471 INFO  com.aspect.LogAspect                              :57   [32m126361920193302529[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:09.471 INFO  com.aspect.LogAspect                              :57   [32m126361920193302528[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:09.511 INFO  com.aspect.LogAspect                              :80   [32m126361920193302530[0;39m 请求参数: []
2021-12-16 00:37:09.511 INFO  com.aspect.LogAspect                              :80   [32m126361920193302529[0;39m 请求参数: []
2021-12-16 00:37:09.511 INFO  com.aspect.LogAspect                              :80   [32m126361920193302528[0;39m 请求参数: []
2021-12-16 00:37:09.557 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126361920193302528[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:09.557 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126361920193302528[0;39m ==> Parameters: 
2021-12-16 00:37:09.559 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126361920193302529[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:09.559 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126361920193302529[0;39m ==> Parameters: 
2021-12-16 00:37:09.602 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126361920193302530[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:09.605 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126361920193302530[0;39m ==> Parameters: 
2021-12-16 00:37:09.637 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126361920193302529[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:37:09.637 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:37:09.638 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126361920193302529[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:37:09.638 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:37:09.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:09.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:09.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:09.657 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:09.658 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:37:09.658 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126361920193302529[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:37:09.658 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:09.659 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126361920193302529[0;39m <==      Total: 2
2021-12-16 00:37:09.659 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:37:09.660 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:09.660 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:37:09.660 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:09.661 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:09.661 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:37:09.662 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:09.663 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361920193302528[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:37:09.663 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:09.663 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126361920193302528[0;39m <==      Total: 6
2021-12-16 00:37:09.664 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:09.665 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:09.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:09.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:09.667 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:09.668 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:09.669 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:09.671 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:09.672 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:09.673 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361920193302530[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:09.674 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126361920193302530[0;39m <==      Total: 19
2021-12-16 00:37:09.691 INFO  com.aspect.LogAspect                              :92   [32m126361920193302530[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:09.691 INFO  com.aspect.LogAspect                              :93   [32m126361920193302530[0;39m ------------- 结束 耗时：227 ms -------------
2021-12-16 00:37:09.693 INFO  com.aspect.LogAspect                              :92   [32m126361920193302529[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:37:09.693 INFO  com.aspect.LogAspect                              :92   [32m126361920193302528[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:37:09.693 INFO  com.aspect.LogAspect                              :93   [32m126361920193302529[0;39m ------------- 结束 耗时：229 ms -------------
2021-12-16 00:37:09.693 INFO  com.aspect.LogAspect                              :93   [32m126361920193302528[0;39m ------------- 结束 耗时：229 ms -------------
2021-12-16 00:37:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m126361922504364032[0;39m 生成今日电子书快照开始
2021-12-16 00:37:10.017 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361922504364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:10.018 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361922504364032[0;39m ==> Parameters: 
2021-12-16 00:37:10.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361922504364032[0;39m <==    Updates: 0
2021-12-16 00:37:10.109 INFO  com.job.EbookSnapshotJob                          :35   [32m126361922504364032[0;39m 生成今日电子书快照结束，耗时：92毫秒
2021-12-16 00:37:12.979 INFO  com.aspect.LogAspect                              :54   [32m126361934932086784[0;39m ------------- 开始 -------------
2021-12-16 00:37:12.980 INFO  com.aspect.LogAspect                              :55   [32m126361934932086784[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-16 00:37:12.980 INFO  com.aspect.LogAspect                              :56   [32m126361934932086784[0;39m 类名方法: com.controller.UserController.login
2021-12-16 00:37:12.980 INFO  com.aspect.LogAspect                              :57   [32m126361934932086784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:12.982 INFO  com.aspect.LogAspect                              :80   [32m126361934932086784[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-16 00:37:13.075 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126361934932086784[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-16 00:37:13.076 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126361934932086784[0;39m ==> Parameters: test123(String)
2021-12-16 00:37:13.119 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126361934932086784[0;39m <==    Columns: id, login_name, name, password
2021-12-16 00:37:13.119 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126361934932086784[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-16 00:37:13.119 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126361934932086784[0;39m <==      Total: 1
2021-12-16 00:37:13.124 INFO  com.controller.UserController                     :77   [32m126361934932086784[0;39m 生成单点登录token:126361935540260864,并放入redis中
2021-12-16 00:37:14.275 INFO  com.aspect.LogAspect                              :92   [32m126361934932086784[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"126361935540260864"},"success":true}
2021-12-16 00:37:14.275 INFO  com.aspect.LogAspect                              :93   [32m126361934932086784[0;39m ------------- 结束 耗时：1296 ms -------------
2021-12-16 00:37:14.649 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：V1lwto29Wi，session id：0！当前连接数：0
2021-12-16 00:37:15.001 INFO  com.job.EbookSnapshotJob                          :32   [32m126361943412969472[0;39m 生成今日电子书快照开始
2021-12-16 00:37:15.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361943412969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:15.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361943412969472[0;39m ==> Parameters: 
2021-12-16 00:37:15.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361943412969472[0;39m <==    Updates: 0
2021-12-16 00:37:15.147 INFO  com.job.EbookSnapshotJob                          :35   [32m126361943412969472[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-16 00:37:15.485 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：sCXiLzeeIF，session id：1，当前连接数：1
2021-12-16 00:37:15.572 INFO  com.aspect.LogAspect                              :54   [32m126361945807917057[0;39m ------------- 开始 -------------
2021-12-16 00:37:15.572 INFO  com.aspect.LogAspect                              :55   [32m126361945807917057[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:15.572 INFO  com.aspect.LogAspect                              :56   [32m126361945807917057[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:15.573 INFO  com.aspect.LogAspect                              :57   [32m126361945807917057[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:15.573 INFO  com.aspect.LogAspect                              :80   [32m126361945807917057[0;39m 请求参数: []
2021-12-16 00:37:15.573 INFO  com.aspect.LogAspect                              :54   [32m126361945812111360[0;39m ------------- 开始 -------------
2021-12-16 00:37:15.573 INFO  com.aspect.LogAspect                              :55   [32m126361945812111360[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:37:15.573 INFO  com.aspect.LogAspect                              :56   [32m126361945812111360[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:37:15.573 INFO  com.aspect.LogAspect                              :57   [32m126361945812111360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:15.572 INFO  com.aspect.LogAspect                              :54   [32m126361945807917056[0;39m ------------- 开始 -------------
2021-12-16 00:37:15.574 INFO  com.aspect.LogAspect                              :80   [32m126361945812111360[0;39m 请求参数: []
2021-12-16 00:37:15.574 INFO  com.aspect.LogAspect                              :55   [32m126361945807917056[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:37:15.574 INFO  com.aspect.LogAspect                              :56   [32m126361945807917056[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:37:15.574 INFO  com.aspect.LogAspect                              :57   [32m126361945807917056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:15.574 INFO  com.aspect.LogAspect                              :80   [32m126361945807917056[0;39m 请求参数: []
2021-12-16 00:37:15.634 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126361945812111360[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:15.634 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126361945807917056[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:15.634 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126361945807917057[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:15.635 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126361945812111360[0;39m ==> Parameters: 
2021-12-16 00:37:15.635 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126361945807917057[0;39m ==> Parameters: 
2021-12-16 00:37:15.635 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126361945807917056[0;39m ==> Parameters: 
2021-12-16 00:37:15.685 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126361945807917056[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:37:15.685 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:37:15.685 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:15.686 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:15.686 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:37:15.686 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126361945807917056[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:37:15.686 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:15.686 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:15.687 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:37:15.687 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126361945807917056[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:37:15.687 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:15.687 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126361945807917056[0;39m <==      Total: 2
2021-12-16 00:37:15.687 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:37:15.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:15.688 INFO  com.aspect.LogAspect                              :92   [32m126361945807917056[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:37:15.688 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:37:15.688 INFO  com.aspect.LogAspect                              :93   [32m126361945807917056[0;39m ------------- 结束 耗时：116 ms -------------
2021-12-16 00:37:15.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:15.688 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:37:15.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:15.689 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:15.689 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126361945812111360[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:37:15.689 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:15.690 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:15.690 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126361945812111360[0;39m <==      Total: 6
2021-12-16 00:37:15.690 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:15.691 INFO  com.aspect.LogAspect                              :92   [32m126361945812111360[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:15.691 INFO  com.aspect.LogAspect                              :93   [32m126361945812111360[0;39m ------------- 结束 耗时：118 ms -------------
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:15.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126361945807917057[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:15.691 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126361945807917057[0;39m <==      Total: 19
2021-12-16 00:37:15.698 INFO  com.aspect.LogAspect                              :92   [32m126361945807917057[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:15.699 INFO  com.aspect.LogAspect                              :93   [32m126361945807917057[0;39m ------------- 结束 耗时：126 ms -------------
2021-12-16 00:37:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m126361964451598336[0;39m 生成今日电子书快照开始
2021-12-16 00:37:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361964451598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361964451598336[0;39m ==> Parameters: 
2021-12-16 00:37:20.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361964451598336[0;39m <==    Updates: 0
2021-12-16 00:37:20.160 INFO  com.job.EbookSnapshotJob                          :35   [32m126361964451598336[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-16 00:37:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126361985397952512[0;39m 生成今日电子书快照开始
2021-12-16 00:37:25.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361985397952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:25.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361985397952512[0;39m ==> Parameters: 
2021-12-16 00:37:25.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126361985397952512[0;39m <==    Updates: 0
2021-12-16 00:37:25.152 INFO  com.job.EbookSnapshotJob                          :35   [32m126361985397952512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-16 00:37:29.998 INFO  com.aspect.LogAspect                              :54   [32m126362006314946560[0;39m ------------- 开始 -------------
2021-12-16 00:37:29.998 INFO  com.aspect.LogAspect                              :55   [32m126362006314946560[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:29.998 INFO  com.aspect.LogAspect                              :56   [32m126362006314946560[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:29.999 INFO  com.aspect.LogAspect                              :57   [32m126362006314946560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:29.999 INFO  com.aspect.LogAspect                              :80   [32m126362006314946560[0;39m 请求参数: []
2021-12-16 00:37:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m126362006365278208[0;39m 生成今日电子书快照开始
2021-12-16 00:37:30.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362006365278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:30.070 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362006314946560[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:30.070 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362006314946560[0;39m ==> Parameters: 
2021-12-16 00:37:30.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362006365278208[0;39m ==> Parameters: 
2021-12-16 00:37:30.136 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:30.139 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:30.141 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:30.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:30.145 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:30.147 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:30.148 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:30.149 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:30.154 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:30.156 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:30.158 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:30.159 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:30.161 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:30.164 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:30.166 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:30.171 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:30.173 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:30.177 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:30.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:30.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362006314946560[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:30.180 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362006314946560[0;39m <==      Total: 19
2021-12-16 00:37:30.186 INFO  com.aspect.LogAspect                              :92   [32m126362006314946560[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:30.187 INFO  com.aspect.LogAspect                              :93   [32m126362006314946560[0;39m ------------- 结束 耗时：189 ms -------------
2021-12-16 00:37:30.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362006365278208[0;39m <==    Updates: 0
2021-12-16 00:37:30.201 INFO  com.job.EbookSnapshotJob                          :35   [32m126362006365278208[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-16 00:37:32.609 INFO  com.aspect.LogAspect                              :54   [32m126362017266274304[0;39m ------------- 开始 -------------
2021-12-16 00:37:32.609 INFO  com.aspect.LogAspect                              :55   [32m126362017266274304[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:32.610 INFO  com.aspect.LogAspect                              :56   [32m126362017266274304[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:32.610 INFO  com.aspect.LogAspect                              :57   [32m126362017266274304[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:32.610 INFO  com.aspect.LogAspect                              :80   [32m126362017266274304[0;39m 请求参数: []
2021-12-16 00:37:32.655 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362017266274304[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:32.656 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362017266274304[0;39m ==> Parameters: 
2021-12-16 00:37:32.702 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:32.704 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:32.706 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:32.708 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:32.709 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:32.710 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:32.711 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:32.711 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:32.713 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:32.715 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:32.718 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:32.720 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:32.722 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:32.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:32.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:32.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:32.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:32.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:32.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:32.731 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362017266274304[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:32.733 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362017266274304[0;39m <==      Total: 19
2021-12-16 00:37:32.740 INFO  com.aspect.LogAspect                              :92   [32m126362017266274304[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:32.741 INFO  com.aspect.LogAspect                              :93   [32m126362017266274304[0;39m ------------- 结束 耗时：132 ms -------------
2021-12-16 00:37:34.008 INFO  com.aspect.LogAspect                              :54   [32m126362023134105600[0;39m ------------- 开始 -------------
2021-12-16 00:37:34.009 INFO  com.aspect.LogAspect                              :55   [32m126362023134105600[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:34.009 INFO  com.aspect.LogAspect                              :56   [32m126362023134105600[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:34.009 INFO  com.aspect.LogAspect                              :57   [32m126362023134105600[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:34.009 INFO  com.aspect.LogAspect                              :80   [32m126362023134105600[0;39m 请求参数: []
2021-12-16 00:37:34.051 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362023134105600[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:34.051 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362023134105600[0;39m ==> Parameters: 
2021-12-16 00:37:34.104 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:34.104 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:34.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:34.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:34.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:34.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:34.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:34.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:34.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:34.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:34.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:34.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:34.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:34.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:34.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:34.108 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:34.108 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:34.108 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:34.108 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:34.109 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362023134105600[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:34.109 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362023134105600[0;39m <==      Total: 19
2021-12-16 00:37:34.110 INFO  com.aspect.LogAspect                              :92   [32m126362023134105600[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:34.110 INFO  com.aspect.LogAspect                              :93   [32m126362023134105600[0;39m ------------- 结束 耗时：102 ms -------------
2021-12-16 00:37:34.159 INFO  com.aspect.LogAspect                              :54   [32m126362023767445504[0;39m ------------- 开始 -------------
2021-12-16 00:37:34.159 INFO  com.aspect.LogAspect                              :55   [32m126362023767445504[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-16 00:37:34.159 INFO  com.aspect.LogAspect                              :56   [32m126362023767445504[0;39m 类名方法: com.controller.EbookController.list
2021-12-16 00:37:34.159 INFO  com.aspect.LogAspect                              :57   [32m126362023767445504[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:34.162 INFO  com.aspect.LogAspect                              :80   [32m126362023767445504[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-16 00:37:34.257 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126362023767445504[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-16 00:37:34.257 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126362023767445504[0;39m ==> Parameters: 
2021-12-16 00:37:34.303 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m126362023767445504[0;39m <==    Columns: count(0)
2021-12-16 00:37:34.304 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m126362023767445504[0;39m <==        Row: 6
2021-12-16 00:37:34.304 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126362023767445504[0;39m <==      Total: 1
2021-12-16 00:37:34.306 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126362023767445504[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-16 00:37:34.306 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126362023767445504[0;39m ==> Parameters: 10(Integer)
2021-12-16 00:37:34.348 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-16 00:37:34.349 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 93, 16
2021-12-16 00:37:34.349 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 74, 27
2021-12-16 00:37:34.350 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-16 00:37:34.351 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-16 00:37:34.352 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-16 00:37:34.352 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362023767445504[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-16 00:37:34.353 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126362023767445504[0;39m <==      Total: 6
2021-12-16 00:37:34.354 INFO  com.servicess.EbookService                        :48   [32m126362023767445504[0;39m 总行数：6
2021-12-16 00:37:34.355 INFO  com.servicess.EbookService                        :49   [32m126362023767445504[0;39m 总页数：1
2021-12-16 00:37:34.366 INFO  com.aspect.LogAspect                              :92   [32m126362023767445504[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":93,"voteCount":16},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":74,"voteCount":27},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-16 00:37:34.366 INFO  com.aspect.LogAspect                              :93   [32m126362023767445504[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-16 00:37:35.015 INFO  com.job.EbookSnapshotJob                          :32   [32m126362027357769728[0;39m 生成今日电子书快照开始
2021-12-16 00:37:35.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362027357769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:35.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362027357769728[0;39m ==> Parameters: 
2021-12-16 00:37:35.184 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362027357769728[0;39m <==    Updates: 0
2021-12-16 00:37:35.185 INFO  com.job.EbookSnapshotJob                          :35   [32m126362027357769728[0;39m 生成今日电子书快照结束，耗时：168毫秒
2021-12-16 00:37:35.187 INFO  com.job.DocJob                                    :32   [32m126362028074995712[0;39m 更新电子书下的文档数据开始
2021-12-16 00:37:35.188 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126362028074995712[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:37:35.189 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126362028074995712[0;39m ==> Parameters: 
2021-12-16 00:37:35.276 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126362028074995712[0;39m <==    Updates: 3
2021-12-16 00:37:35.276 INFO  com.job.DocJob                                    :35   [32m126362028074995712[0;39m 更新电子书下的文档数据结束，耗时：89毫秒
2021-12-16 00:37:36.930 INFO  com.aspect.LogAspect                              :54   [32m126362035389861888[0;39m ------------- 开始 -------------
2021-12-16 00:37:36.936 INFO  com.aspect.LogAspect                              :55   [32m126362035389861888[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-16 00:37:36.937 INFO  com.aspect.LogAspect                              :56   [32m126362035389861888[0;39m 类名方法: com.controller.DocController.all
2021-12-16 00:37:36.937 INFO  com.aspect.LogAspect                              :57   [32m126362035389861888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:36.937 INFO  com.aspect.LogAspect                              :80   [32m126362035389861888[0;39m 请求参数: [1]
2021-12-16 00:37:37.011 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m126362035389861888[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-16 00:37:37.013 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m126362035389861888[0;39m ==> Parameters: 1(Long)
2021-12-16 00:37:37.065 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-16 00:37:37.066 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-16 00:37:37.067 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 13, 4
2021-12-16 00:37:37.068 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 8, 2
2021-12-16 00:37:37.069 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 14, 2
2021-12-16 00:37:37.069 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 21, 4
2021-12-16 00:37:37.070 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-16 00:37:37.071 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362035389861888[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 13, 1
2021-12-16 00:37:37.071 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m126362035389861888[0;39m <==      Total: 7
2021-12-16 00:37:37.100 INFO  com.aspect.LogAspect                              :92   [32m126362035389861888[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":13,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":8,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":21,"voteCount":4},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":13,"voteCount":1}],"success":true}
2021-12-16 00:37:37.101 INFO  com.aspect.LogAspect                              :93   [32m126362035389861888[0;39m ------------- 结束 耗时：171 ms -------------
2021-12-16 00:37:38.190 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-16 00:37:38.190 INFO  com.interceptor.LoginInterceptor                  :65   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-16 00:37:38.193 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-16 00:37:38.194 INFO  com.interceptor.LoginInterceptor                  :40   [32m                  [0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-16 00:37:38.194 INFO  com.interceptor.LoginInterceptor                  :44   [32m                  [0;39m 登录校验开始，token：126361935540260864
2021-12-16 00:37:38.235 INFO  com.interceptor.LoginInterceptor                  :56   [32m                  [0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"126361935540260864"}
2021-12-16 00:37:38.241 INFO  com.aspect.LogAspect                              :54   [32m126362040888594432[0;39m ------------- 开始 -------------
2021-12-16 00:37:38.241 INFO  com.aspect.LogAspect                              :55   [32m126362040888594432[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-16 00:37:38.241 INFO  com.aspect.LogAspect                              :56   [32m126362040888594432[0;39m 类名方法: com.controller.UserController.list
2021-12-16 00:37:38.241 INFO  com.aspect.LogAspect                              :57   [32m126362040888594432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:38.242 INFO  com.aspect.LogAspect                              :80   [32m126362040888594432[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-16 00:37:38.304 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m126362040888594432[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-16 00:37:38.305 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m126362040888594432[0;39m ==> Parameters: 
2021-12-16 00:37:38.358 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m126362040888594432[0;39m <==    Columns: count(0)
2021-12-16 00:37:38.360 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m126362040888594432[0;39m <==        Row: 7
2021-12-16 00:37:38.364 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m126362040888594432[0;39m <==      Total: 1
2021-12-16 00:37:38.367 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126362040888594432[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-16 00:37:38.369 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126362040888594432[0;39m ==> Parameters: 10(Integer)
2021-12-16 00:37:38.418 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==    Columns: id, login_name, name, password
2021-12-16 00:37:38.418 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-16 00:37:38.419 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-16 00:37:38.420 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-16 00:37:38.421 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-16 00:37:38.422 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-16 00:37:38.422 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-16 00:37:38.423 TRACE com.mapper.UserMapper.selectByExample             :143  [32m126362040888594432[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-16 00:37:38.424 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m126362040888594432[0;39m <==      Total: 7
2021-12-16 00:37:38.425 INFO  com.servicess.UserService                         :52   [32m126362040888594432[0;39m 总行数：7
2021-12-16 00:37:38.425 INFO  com.servicess.UserService                         :53   [32m126362040888594432[0;39m 总页数：1
2021-12-16 00:37:38.442 INFO  com.aspect.LogAspect                              :92   [32m126362040888594432[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-16 00:37:38.443 INFO  com.aspect.LogAspect                              :93   [32m126362040888594432[0;39m ------------- 结束 耗时：202 ms -------------
2021-12-16 00:37:38.449 INFO  com.interceptor.LoginInterceptor                  :65   [32m126362040888594432[0;39m ------------- LoginInterceptor 结束 耗时：255 ms -------------
2021-12-16 00:37:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m126362048312512512[0;39m 生成今日电子书快照开始
2021-12-16 00:37:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362048312512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362048312512512[0;39m ==> Parameters: 
2021-12-16 00:37:40.167 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362048312512512[0;39m <==    Updates: 0
2021-12-16 00:37:40.167 INFO  com.job.EbookSnapshotJob                          :35   [32m126362048312512512[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :54   [32m126362063382646784[0;39m ------------- 开始 -------------
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :54   [32m126362063382646785[0;39m ------------- 开始 -------------
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :55   [32m126362063382646784[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :55   [32m126362063382646785[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :56   [32m126362063382646784[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :56   [32m126362063382646785[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :57   [32m126362063382646784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :57   [32m126362063382646785[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :80   [32m126362063382646785[0;39m 请求参数: []
2021-12-16 00:37:43.604 INFO  com.aspect.LogAspect                              :80   [32m126362063382646784[0;39m 请求参数: []
2021-12-16 00:37:43.606 INFO  com.aspect.LogAspect                              :54   [32m126362063391035392[0;39m ------------- 开始 -------------
2021-12-16 00:37:43.606 INFO  com.aspect.LogAspect                              :55   [32m126362063391035392[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:43.607 INFO  com.aspect.LogAspect                              :56   [32m126362063391035392[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:43.607 INFO  com.aspect.LogAspect                              :57   [32m126362063391035392[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:43.607 INFO  com.aspect.LogAspect                              :80   [32m126362063391035392[0;39m 请求参数: []
2021-12-16 00:37:43.663 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126362063382646784[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:43.663 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126362063382646785[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:43.663 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362063391035392[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:43.663 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126362063382646784[0;39m ==> Parameters: 
2021-12-16 00:37:43.663 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362063391035392[0;39m ==> Parameters: 
2021-12-16 00:37:43.663 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126362063382646785[0;39m ==> Parameters: 
2021-12-16 00:37:43.726 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:37:43.726 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126362063382646784[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:37:43.728 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126362063382646784[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:37:43.728 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:37:43.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:43.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:43.731 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:43.732 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:37:43.732 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126362063382646784[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:37:43.732 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:43.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:43.733 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126362063382646784[0;39m <==      Total: 2
2021-12-16 00:37:43.734 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:37:43.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:43.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:43.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:43.736 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:37:43.737 INFO  com.aspect.LogAspect                              :92   [32m126362063382646784[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:37:43.738 INFO  com.aspect.LogAspect                              :93   [32m126362063382646784[0;39m ------------- 结束 耗时：134 ms -------------
2021-12-16 00:37:43.739 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:37:43.738 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:43.741 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:43.741 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362063382646785[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:37:43.742 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:43.742 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126362063382646785[0;39m <==      Total: 6
2021-12-16 00:37:43.743 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:43.744 INFO  com.aspect.LogAspect                              :92   [32m126362063382646785[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:37:43.744 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:43.745 INFO  com.aspect.LogAspect                              :93   [32m126362063382646785[0;39m ------------- 结束 耗时：141 ms -------------
2021-12-16 00:37:43.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:43.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:43.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:43.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:43.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:43.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:43.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362063391035392[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:43.755 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362063391035392[0;39m <==      Total: 19
2021-12-16 00:37:43.765 INFO  com.aspect.LogAspect                              :92   [32m126362063391035392[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:43.766 INFO  com.aspect.LogAspect                              :93   [32m126362063391035392[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-16 00:37:45.003 INFO  com.job.EbookSnapshotJob                          :32   [32m126362069250478080[0;39m 生成今日电子书快照开始
2021-12-16 00:37:45.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362069250478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:45.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362069250478080[0;39m ==> Parameters: 
2021-12-16 00:37:45.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362069250478080[0;39m <==    Updates: 0
2021-12-16 00:37:45.160 INFO  com.job.EbookSnapshotJob                          :35   [32m126362069250478080[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-16 00:37:45.761 INFO  com.aspect.LogAspect                              :54   [32m126362072429760512[0;39m ------------- 开始 -------------
2021-12-16 00:37:45.762 INFO  com.aspect.LogAspect                              :55   [32m126362072429760512[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-16 00:37:45.762 INFO  com.aspect.LogAspect                              :56   [32m126362072429760512[0;39m 类名方法: com.controller.EbookController.list
2021-12-16 00:37:45.762 INFO  com.aspect.LogAspect                              :57   [32m126362072429760512[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:45.762 INFO  com.aspect.LogAspect                              :80   [32m126362072429760512[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-16 00:37:45.837 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126362072429760512[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-16 00:37:45.837 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126362072429760512[0;39m ==> Parameters: 101(Long)
2021-12-16 00:37:45.894 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m126362072429760512[0;39m <==    Columns: count(0)
2021-12-16 00:37:45.894 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m126362072429760512[0;39m <==        Row: 1
2021-12-16 00:37:45.895 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m126362072429760512[0;39m <==      Total: 1
2021-12-16 00:37:45.897 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126362072429760512[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-16 00:37:45.898 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126362072429760512[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-16 00:37:45.954 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362072429760512[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-16 00:37:45.954 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m126362072429760512[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 74, 27
2021-12-16 00:37:45.955 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m126362072429760512[0;39m <==      Total: 1
2021-12-16 00:37:45.956 INFO  com.servicess.EbookService                        :48   [32m126362072429760512[0;39m 总行数：1
2021-12-16 00:37:45.956 INFO  com.servicess.EbookService                        :49   [32m126362072429760512[0;39m 总页数：1
2021-12-16 00:37:45.957 INFO  com.aspect.LogAspect                              :92   [32m126362072429760512[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":74,"voteCount":27}],"total":1},"success":true}
2021-12-16 00:37:45.957 INFO  com.aspect.LogAspect                              :93   [32m126362072429760512[0;39m ------------- 结束 耗时：196 ms -------------
2021-12-16 00:37:46.703 INFO  com.aspect.LogAspect                              :54   [32m126362076380794880[0;39m ------------- 开始 -------------
2021-12-16 00:37:46.703 INFO  com.aspect.LogAspect                              :55   [32m126362076380794880[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-16 00:37:46.703 INFO  com.aspect.LogAspect                              :56   [32m126362076380794880[0;39m 类名方法: com.controller.DocController.all
2021-12-16 00:37:46.703 INFO  com.aspect.LogAspect                              :57   [32m126362076380794880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:46.704 INFO  com.aspect.LogAspect                              :80   [32m126362076380794880[0;39m 请求参数: [2]
2021-12-16 00:37:46.752 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m126362076380794880[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-16 00:37:46.752 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m126362076380794880[0;39m ==> Parameters: 2(Long)
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 9, 2, 0, 文档1, 1, 30, 4
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 10, 4
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 7, 5
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-16 00:37:46.798 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 7, 4
2021-12-16 00:37:46.814 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 4, 4
2021-12-16 00:37:46.814 TRACE com.mapper.DocMapper.selectByExample              :143  [32m126362076380794880[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 2, 2
2021-12-16 00:37:46.814 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m126362076380794880[0;39m <==      Total: 8
2021-12-16 00:37:46.814 INFO  com.aspect.LogAspect                              :92   [32m126362076380794880[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":30,"voteCount":4},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":10,"voteCount":4},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":7,"voteCount":5},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":7,"voteCount":4},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":4,"voteCount":4},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":2,"voteCount":2}],"success":true}
2021-12-16 00:37:46.814 INFO  com.aspect.LogAspect                              :93   [32m126362076380794880[0;39m ------------- 结束 耗时：112 ms -------------
2021-12-16 00:37:46.887 INFO  com.aspect.LogAspect                              :54   [32m126362077152546816[0;39m ------------- 开始 -------------
2021-12-16 00:37:46.887 INFO  com.aspect.LogAspect                              :55   [32m126362077152546816[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-16 00:37:46.887 INFO  com.aspect.LogAspect                              :56   [32m126362077152546816[0;39m 类名方法: com.controller.DocController.findContent
2021-12-16 00:37:46.887 INFO  com.aspect.LogAspect                              :57   [32m126362077152546816[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:46.888 INFO  com.aspect.LogAspect                              :80   [32m126362077152546816[0;39m 请求参数: [9]
2021-12-16 00:37:46.888 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m126362077152546816[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-16 00:37:46.889 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m126362077152546816[0;39m ==> Parameters: 9(Long)
2021-12-16 00:37:46.933 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m126362077152546816[0;39m <==      Total: 0
2021-12-16 00:37:46.934 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m126362077152546816[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-16 00:37:46.935 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m126362077152546816[0;39m ==> Parameters: 9(Long)
2021-12-16 00:37:47.024 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m126362077152546816[0;39m <==    Updates: 1
2021-12-16 00:37:47.024 INFO  com.aspect.LogAspect                              :92   [32m126362077152546816[0;39m 返回结果: {"content":"","success":true}
2021-12-16 00:37:47.025 INFO  com.aspect.LogAspect                              :93   [32m126362077152546816[0;39m ------------- 结束 耗时：138 ms -------------
2021-12-16 00:37:50.008 INFO  com.job.EbookSnapshotJob                          :32   [32m126362090242969600[0;39m 生成今日电子书快照开始
2021-12-16 00:37:50.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362090242969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:50.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362090242969600[0;39m ==> Parameters: 
2021-12-16 00:37:50.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362090242969600[0;39m <==    Updates: 0
2021-12-16 00:37:50.158 INFO  com.job.EbookSnapshotJob                          :35   [32m126362090242969600[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-16 00:37:52.378 INFO  com.aspect.LogAspect                              :54   [32m126362100183470080[0;39m ------------- 开始 -------------
2021-12-16 00:37:52.378 INFO  com.aspect.LogAspect                              :55   [32m126362100183470080[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:52.378 INFO  com.aspect.LogAspect                              :56   [32m126362100183470080[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:52.378 INFO  com.aspect.LogAspect                              :57   [32m126362100183470080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:52.379 INFO  com.aspect.LogAspect                              :80   [32m126362100183470080[0;39m 请求参数: []
2021-12-16 00:37:52.433 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362100183470080[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:52.433 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362100183470080[0;39m ==> Parameters: 
2021-12-16 00:37:52.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:52.483 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:52.484 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:52.484 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:52.485 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:52.485 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:52.485 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:52.486 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:52.486 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:52.486 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:52.486 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:52.487 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:52.487 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:52.487 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:52.488 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:52.488 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:52.488 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:52.489 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:52.489 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:52.490 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362100183470080[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:52.490 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362100183470080[0;39m <==      Total: 19
2021-12-16 00:37:52.492 INFO  com.aspect.LogAspect                              :92   [32m126362100183470080[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:52.492 INFO  com.aspect.LogAspect                              :93   [32m126362100183470080[0;39m ------------- 结束 耗时：114 ms -------------
2021-12-16 00:37:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m126362111239655424[0;39m 生成今日电子书快照开始
2021-12-16 00:37:55.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362111239655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:37:55.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362111239655424[0;39m ==> Parameters: 
2021-12-16 00:37:55.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362111239655424[0;39m <==    Updates: 0
2021-12-16 00:37:55.171 INFO  com.job.EbookSnapshotJob                          :35   [32m126362111239655424[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-16 00:37:57.917 INFO  com.aspect.LogAspect                              :54   [32m126362123415719936[0;39m ------------- 开始 -------------
2021-12-16 00:37:57.918 INFO  com.aspect.LogAspect                              :55   [32m126362123415719936[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-16 00:37:57.918 INFO  com.aspect.LogAspect                              :56   [32m126362123415719936[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-16 00:37:57.919 INFO  com.aspect.LogAspect                              :57   [32m126362123415719936[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:57.919 INFO  com.aspect.LogAspect                              :80   [32m126362123415719936[0;39m 请求参数: []
2021-12-16 00:37:57.920 INFO  com.aspect.LogAspect                              :54   [32m126362123428302848[0;39m ------------- 开始 -------------
2021-12-16 00:37:57.920 INFO  com.aspect.LogAspect                              :55   [32m126362123428302848[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-16 00:37:57.920 INFO  com.aspect.LogAspect                              :56   [32m126362123428302848[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-16 00:37:57.921 INFO  com.aspect.LogAspect                              :57   [32m126362123428302848[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:57.921 INFO  com.aspect.LogAspect                              :80   [32m126362123428302848[0;39m 请求参数: []
2021-12-16 00:37:57.922 INFO  com.aspect.LogAspect                              :54   [32m126362123436691456[0;39m ------------- 开始 -------------
2021-12-16 00:37:57.922 INFO  com.aspect.LogAspect                              :55   [32m126362123436691456[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-16 00:37:57.922 INFO  com.aspect.LogAspect                              :56   [32m126362123436691456[0;39m 类名方法: com.controller.CategoryController.all
2021-12-16 00:37:57.923 INFO  com.aspect.LogAspect                              :57   [32m126362123436691456[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-16 00:37:57.923 INFO  com.aspect.LogAspect                              :80   [32m126362123436691456[0;39m 请求参数: []
2021-12-16 00:37:57.963 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126362123415719936[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:57.963 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126362123415719936[0;39m ==> Parameters: 
2021-12-16 00:37:57.964 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126362123428302848[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-16 00:37:57.964 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126362123428302848[0;39m ==> Parameters: 
2021-12-16 00:37:57.971 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362123436691456[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-16 00:37:57.971 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362123436691456[0;39m ==> Parameters: 
2021-12-16 00:37:58.008 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126362123415719936[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-16 00:37:58.008 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-16 00:37:58.009 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-16 00:37:58.009 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126362123415719936[0;39m <==        Row: 2021-12-15, 492, 166, 2, 1
2021-12-16 00:37:58.010 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-16 00:37:58.010 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m126362123415719936[0;39m <==        Row: 2021-12-16, 492, 166, 0, 0
2021-12-16 00:37:58.010 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m126362123415719936[0;39m <==      Total: 2
2021-12-16 00:37:58.011 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-16 00:37:58.011 INFO  com.aspect.LogAspect                              :92   [32m126362123415719936[0;39m 返回结果: {"content":[{"date":1639497600000,"viewCount":492,"viewIncrease":2,"voteCount":166,"voteIncrease":1},{"date":1639584000000,"viewCount":492,"viewIncrease":0,"voteCount":166,"voteIncrease":0}],"success":true}
2021-12-16 00:37:58.011 INFO  com.aspect.LogAspect                              :93   [32m126362123415719936[0;39m ------------- 结束 耗时：94 ms -------------
2021-12-16 00:37:58.012 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-16 00:37:58.012 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-16 00:37:58.013 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m126362123428302848[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-16 00:37:58.014 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m126362123428302848[0;39m <==      Total: 6
2021-12-16 00:37:58.015 INFO  com.aspect.LogAspect                              :92   [32m126362123428302848[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1}],"success":true}
2021-12-16 00:37:58.015 INFO  com.aspect.LogAspect                              :93   [32m126362123428302848[0;39m ------------- 结束 耗时：95 ms -------------
2021-12-16 00:37:58.023 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==    Columns: id, parent, name, sort
2021-12-16 00:37:58.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-16 00:37:58.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-16 00:37:58.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-16 00:37:58.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-16 00:37:58.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 101, 100, Vue, 101
2021-12-16 00:37:58.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-16 00:37:58.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 200, 0, Java, 200
2021-12-16 00:37:58.026 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-16 00:37:58.026 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-16 00:37:58.027 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 300, 0, Python, 300
2021-12-16 00:37:58.027 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-16 00:37:58.027 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-16 00:37:58.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-16 00:37:58.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-16 00:37:58.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-16 00:37:58.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 500, 0, 其他, 500
2021-12-16 00:37:58.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-16 00:37:58.029 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-16 00:37:58.029 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m126362123436691456[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-16 00:37:58.029 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m126362123436691456[0;39m <==      Total: 19
2021-12-16 00:37:58.030 INFO  com.aspect.LogAspect                              :92   [32m126362123436691456[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-16 00:37:58.031 INFO  com.aspect.LogAspect                              :93   [32m126362123436691456[0;39m ------------- 结束 耗时：109 ms -------------
2021-12-16 00:38:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m126362132202786816[0;39m 生成今日电子书快照开始
2021-12-16 00:38:00.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362132202786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:38:00.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362132202786816[0;39m ==> Parameters: 
2021-12-16 00:38:00.189 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362132202786816[0;39m <==    Updates: 0
2021-12-16 00:38:00.189 INFO  com.job.EbookSnapshotJob                          :35   [32m126362132202786816[0;39m 生成今日电子书快照结束，耗时：177毫秒
2021-12-16 00:38:05.013 INFO  com.job.DocJob                                    :32   [32m126362153178501120[0;39m 更新电子书下的文档数据开始
2021-12-16 00:38:05.154 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126362153178501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-16 00:38:05.157 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126362153178501120[0;39m ==> Parameters: 
2021-12-16 00:38:05.253 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m126362153178501120[0;39m <==    Updates: 3
2021-12-16 00:38:05.254 INFO  com.job.DocJob                                    :35   [32m126362153178501120[0;39m 更新电子书下的文档数据结束，耗时：241毫秒
2021-12-16 00:38:05.255 INFO  com.job.EbookSnapshotJob                          :32   [32m126362154193522688[0;39m 生成今日电子书快照开始
2021-12-16 00:38:05.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362154193522688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:38:05.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362154193522688[0;39m ==> Parameters: 
2021-12-16 00:38:05.543 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362154193522688[0;39m <==    Updates: 0
2021-12-16 00:38:05.543 INFO  com.job.EbookSnapshotJob                          :35   [32m126362154193522688[0;39m 生成今日电子书快照结束，耗时：288毫秒
2021-12-16 00:38:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m126362174162604032[0;39m 生成今日电子书快照开始
2021-12-16 00:38:10.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362174162604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:38:10.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362174162604032[0;39m ==> Parameters: 
2021-12-16 00:38:10.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362174162604032[0;39m <==    Updates: 0
2021-12-16 00:38:10.161 INFO  com.job.EbookSnapshotJob                          :35   [32m126362174162604032[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-16 00:38:12.342 INFO  com.websocket.WebSocketServer                     :41   [32m126362006314946560[0;39m 连接关闭，token：sCXiLzeeIF，session id：1！当前连接数：0
2021-12-16 00:38:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m126362195129929728[0;39m 生成今日电子书快照开始
2021-12-16 00:38:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362195129929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-16 00:38:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m126362195129929728[0;39m ==> Parameters: 
