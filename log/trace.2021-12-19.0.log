2021-12-19 14:43:17.573 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 14:43:17.604 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 3320 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 14:43:17.620 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 14:43:17.818 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 14:43:17.818 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 14:43:22.067 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 14:43:22.067 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 14:43:22.660 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 559 ms. Found 0 Redis repository interfaces.
2021-12-19 14:43:24.410 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 14:43:24.457 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 14:43:24.457 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 14:43:24.457 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 14:43:24.582 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 14:43:24.582 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6764 ms
2021-12-19 14:43:27.449 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 14:43:27.495 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 14:43:27.527 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 14:43:27.589 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 11.695 seconds (JVM running for 15.201)
2021-12-19 14:43:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127662072837312512[0;39m 生成今日电子书快照开始
2021-12-19 14:43:30.167 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127662072837312512[0;39m HikariPool-1 - Starting...
2021-12-19 14:43:30.914 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127662072837312512[0;39m HikariPool-1 - Start completed.
2021-12-19 14:43:30.965 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662072837312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:43:30.980 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662072837312512[0;39m ==> Parameters: 
2021-12-19 14:43:31.199 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662072837312512[0;39m <==    Updates: 6
2021-12-19 14:43:31.199 INFO  com.job.EbookSnapshotJob                          :35   [32m127662072837312512[0;39m 生成今日电子书快照结束，耗时：1188毫秒
2021-12-19 14:43:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127662093808832512[0;39m 生成今日电子书快照开始
2021-12-19 14:43:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662093808832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:43:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662093808832512[0;39m ==> Parameters: 
2021-12-19 14:43:35.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662093808832512[0;39m <==    Updates: 0
2021-12-19 14:43:35.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127662093808832512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:43:35.152 INFO  com.job.DocJob                                    :32   [32m127662094400229376[0;39m 更新电子书下的文档数据开始
2021-12-19 14:43:35.152 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662094400229376[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:43:35.152 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662094400229376[0;39m ==> Parameters: 
2021-12-19 14:43:35.250 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662094400229376[0;39m <==    Updates: 3
2021-12-19 14:43:35.250 INFO  com.job.DocJob                                    :35   [32m127662094400229376[0;39m 更新电子书下的文档数据结束，耗时：98毫秒
2021-12-19 14:43:40.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127662114818101248[0;39m 生成今日电子书快照开始
2021-12-19 14:43:40.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662114818101248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:43:40.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662114818101248[0;39m ==> Parameters: 
2021-12-19 14:43:40.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662114818101248[0;39m <==    Updates: 0
2021-12-19 14:43:40.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127662114818101248[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 14:43:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127662135751872512[0;39m 生成今日电子书快照开始
2021-12-19 14:43:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662135751872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:43:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662135751872512[0;39m ==> Parameters: 
2021-12-19 14:43:45.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662135751872512[0;39m <==    Updates: 0
2021-12-19 14:43:45.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127662135751872512[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 14:43:50.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127662156698226688[0;39m 生成今日电子书快照开始
2021-12-19 14:43:50.036 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662156698226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:43:50.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662156698226688[0;39m ==> Parameters: 
2021-12-19 14:43:50.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662156698226688[0;39m <==    Updates: 0
2021-12-19 14:43:50.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127662156698226688[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 14:43:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662177711689728[0;39m 生成今日电子书快照开始
2021-12-19 14:43:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662177711689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:43:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662177711689728[0;39m ==> Parameters: 
2021-12-19 14:43:55.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662177711689728[0;39m <==    Updates: 0
2021-12-19 14:43:55.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127662177711689728[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:44:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127662198679015424[0;39m 生成今日电子书快照开始
2021-12-19 14:44:00.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662198679015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:00.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662198679015424[0;39m ==> Parameters: 
2021-12-19 14:44:00.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662198679015424[0;39m <==    Updates: 0
2021-12-19 14:44:00.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127662198679015424[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 14:44:05.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127662219612786688[0;39m 生成今日电子书快照开始
2021-12-19 14:44:05.036 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662219612786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:05.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662219612786688[0;39m ==> Parameters: 
2021-12-19 14:44:05.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662219612786688[0;39m <==    Updates: 0
2021-12-19 14:44:05.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127662219612786688[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:44:05.149 INFO  com.job.DocJob                                    :32   [32m127662220216766464[0;39m 更新电子书下的文档数据开始
2021-12-19 14:44:05.149 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662220216766464[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:44:05.149 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662220216766464[0;39m ==> Parameters: 
2021-12-19 14:44:05.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662220216766464[0;39m <==    Updates: 3
2021-12-19 14:44:05.243 INFO  com.job.DocJob                                    :35   [32m127662220216766464[0;39m 更新电子书下的文档数据结束，耗时：94毫秒
2021-12-19 14:44:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662240613666816[0;39m 生成今日电子书快照开始
2021-12-19 14:44:10.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662240613666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:10.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662240613666816[0;39m ==> Parameters: 
2021-12-19 14:44:10.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662240613666816[0;39m <==    Updates: 0
2021-12-19 14:44:10.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127662240613666816[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 14:44:15.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662261622935552[0;39m 生成今日电子书快照开始
2021-12-19 14:44:15.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662261622935552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:15.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662261622935552[0;39m ==> Parameters: 
2021-12-19 14:44:15.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662261622935552[0;39m <==    Updates: 0
2021-12-19 14:44:15.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127662261622935552[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 14:44:20.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127662282619621376[0;39m 生成今日电子书快照开始
2021-12-19 14:44:20.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662282619621376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:20.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662282619621376[0;39m ==> Parameters: 
2021-12-19 14:44:20.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662282619621376[0;39m <==    Updates: 0
2021-12-19 14:44:20.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127662282619621376[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:44:25.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127662303582752768[0;39m 生成今日电子书快照开始
2021-12-19 14:44:25.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662303582752768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:25.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662303582752768[0;39m ==> Parameters: 
2021-12-19 14:44:25.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662303582752768[0;39m <==    Updates: 0
2021-12-19 14:44:25.182 INFO  com.job.EbookSnapshotJob                          :35   [32m127662303582752768[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 14:44:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662324512329728[0;39m 生成今日电子书快照开始
2021-12-19 14:44:30.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662324512329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:30.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662324512329728[0;39m ==> Parameters: 
2021-12-19 14:44:30.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662324512329728[0;39m <==    Updates: 0
2021-12-19 14:44:30.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127662324512329728[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 14:44:35.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662345483849728[0;39m 生成今日电子书快照开始
2021-12-19 14:44:35.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662345483849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:35.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662345483849728[0;39m ==> Parameters: 
2021-12-19 14:44:35.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662345483849728[0;39m <==    Updates: 0
2021-12-19 14:44:35.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127662345483849728[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 14:44:35.161 INFO  com.job.DocJob                                    :32   [32m127662346096218112[0;39m 更新电子书下的文档数据开始
2021-12-19 14:44:35.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662346096218112[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:44:35.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662346096218112[0;39m ==> Parameters: 
2021-12-19 14:44:35.255 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662346096218112[0;39m <==    Updates: 3
2021-12-19 14:44:35.255 INFO  com.job.DocJob                                    :35   [32m127662346096218112[0;39m 更新电子书下的文档数据结束，耗时：94毫秒
2021-12-19 14:44:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662366455369728[0;39m 生成今日电子书快照开始
2021-12-19 14:44:40.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662366455369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:40.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662366455369728[0;39m ==> Parameters: 
2021-12-19 14:44:40.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662366455369728[0;39m <==    Updates: 0
2021-12-19 14:44:40.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127662366455369728[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:44:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127662387410112512[0;39m 生成今日电子书快照开始
2021-12-19 14:44:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662387410112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662387410112512[0;39m ==> Parameters: 
2021-12-19 14:44:45.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662387410112512[0;39m <==    Updates: 0
2021-12-19 14:44:45.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127662387410112512[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 14:44:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127662408381632512[0;39m 生成今日电子书快照开始
2021-12-19 14:44:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662408381632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662408381632512[0;39m ==> Parameters: 
2021-12-19 14:44:50.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662408381632512[0;39m <==    Updates: 0
2021-12-19 14:44:50.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127662408381632512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:44:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662429369929728[0;39m 生成今日电子书快照开始
2021-12-19 14:44:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662429369929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:44:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662429369929728[0;39m ==> Parameters: 
2021-12-19 14:44:55.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662429369929728[0;39m <==    Updates: 0
2021-12-19 14:44:55.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127662429369929728[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 14:45:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662450366615552[0;39m 生成今日电子书快照开始
2021-12-19 14:45:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662450366615552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662450366615552[0;39m ==> Parameters: 
2021-12-19 14:45:00.180 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662450366615552[0;39m <==    Updates: 0
2021-12-19 14:45:00.180 INFO  com.job.EbookSnapshotJob                          :35   [32m127662450366615552[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 14:45:05.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127662471304581120[0;39m 生成今日电子书快照开始
2021-12-19 14:45:05.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662471304581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:05.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662471304581120[0;39m ==> Parameters: 
2021-12-19 14:45:05.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662471304581120[0;39m <==    Updates: 0
2021-12-19 14:45:05.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127662471304581120[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 14:45:05.158 INFO  com.job.DocJob                                    :32   [32m127662471912755200[0;39m 更新电子书下的文档数据开始
2021-12-19 14:45:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662471912755200[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:45:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662471912755200[0;39m ==> Parameters: 
2021-12-19 14:45:05.267 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662471912755200[0;39m <==    Updates: 3
2021-12-19 14:45:05.267 INFO  com.job.DocJob                                    :35   [32m127662471912755200[0;39m 更新电子书下的文档数据结束，耗时：109毫秒
2021-12-19 14:45:10.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662492309655552[0;39m 生成今日电子书快照开始
2021-12-19 14:45:10.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662492309655552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:10.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662492309655552[0;39m ==> Parameters: 
2021-12-19 14:45:10.352 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662492309655552[0;39m <==    Updates: 0
2021-12-19 14:45:10.352 INFO  com.job.EbookSnapshotJob                          :35   [32m127662492309655552[0;39m 生成今日电子书快照结束，耗时：331毫秒
2021-12-19 14:45:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127662513251815424[0;39m 生成今日电子书快照开始
2021-12-19 14:45:15.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662513251815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:15.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662513251815424[0;39m ==> Parameters: 
2021-12-19 14:45:15.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662513251815424[0;39m <==    Updates: 0
2021-12-19 14:45:15.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127662513251815424[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 14:45:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127662534235918336[0;39m 生成今日电子书快照开始
2021-12-19 14:45:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662534235918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662534235918336[0;39m ==> Parameters: 
2021-12-19 14:45:20.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662534235918336[0;39m <==    Updates: 0
2021-12-19 14:45:20.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127662534235918336[0;39m 生成今日电子书快照结束，耗时：164毫秒
2021-12-19 14:45:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662555186466816[0;39m 生成今日电子书快照开始
2021-12-19 14:45:25.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662555186466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:25.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662555186466816[0;39m ==> Parameters: 
2021-12-19 14:45:25.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662555186466816[0;39m <==    Updates: 0
2021-12-19 14:45:25.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127662555186466816[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 14:45:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662576170569728[0;39m 生成今日电子书快照开始
2021-12-19 14:45:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662576170569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662576170569728[0;39m ==> Parameters: 
2021-12-19 14:45:30.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662576170569728[0;39m <==    Updates: 0
2021-12-19 14:45:30.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127662576170569728[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-19 14:45:35.011 INFO  com.job.DocJob                                    :32   [32m127662597125312512[0;39m 更新电子书下的文档数据开始
2021-12-19 14:45:35.059 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662597125312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:45:35.059 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662597125312512[0;39m ==> Parameters: 
2021-12-19 14:45:35.489 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662597125312512[0;39m <==    Updates: 3
2021-12-19 14:45:35.489 INFO  com.job.DocJob                                    :35   [32m127662597125312512[0;39m 更新电子书下的文档数据结束，耗时：478毫秒
2021-12-19 14:45:35.489 INFO  com.job.EbookSnapshotJob                          :32   [32m127662599130189824[0;39m 生成今日电子书快照开始
2021-12-19 14:45:35.489 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662599130189824[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:35.489 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662599130189824[0;39m ==> Parameters: 
2021-12-19 14:45:35.583 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662599130189824[0;39m <==    Updates: 0
2021-12-19 14:45:35.583 INFO  com.job.EbookSnapshotJob                          :35   [32m127662599130189824[0;39m 生成今日电子书快照结束，耗时：94毫秒
2021-12-19 14:45:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662618113609728[0;39m 生成今日电子书快照开始
2021-12-19 14:45:40.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662618113609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:40.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662618113609728[0;39m ==> Parameters: 
2021-12-19 14:45:40.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662618113609728[0;39m <==    Updates: 0
2021-12-19 14:45:40.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127662618113609728[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 14:45:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662639110295552[0;39m 生成今日电子书快照开始
2021-12-19 14:45:45.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662639110295552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:45.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662639110295552[0;39m ==> Parameters: 
2021-12-19 14:45:45.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662639110295552[0;39m <==    Updates: 0
2021-12-19 14:45:45.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127662639110295552[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:45:50.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127662660111175680[0;39m 生成今日电子书快照开始
2021-12-19 14:45:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662660111175680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662660111175680[0;39m ==> Parameters: 
2021-12-19 14:45:50.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662660111175680[0;39m <==    Updates: 0
2021-12-19 14:45:50.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127662660111175680[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 14:45:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662681028169728[0;39m 生成今日电子书快照开始
2021-12-19 14:45:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662681028169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:45:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662681028169728[0;39m ==> Parameters: 
2021-12-19 14:45:55.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662681028169728[0;39m <==    Updates: 0
2021-12-19 14:45:55.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127662681028169728[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:46:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662702024855552[0;39m 生成今日电子书快照开始
2021-12-19 14:46:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662702024855552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662702024855552[0;39m ==> Parameters: 
2021-12-19 14:46:00.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662702024855552[0;39m <==    Updates: 0
2021-12-19 14:46:00.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127662702024855552[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 14:46:05.012 INFO  com.job.DocJob                                    :32   [32m127662722958626816[0;39m 更新电子书下的文档数据开始
2021-12-19 14:46:05.074 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662722958626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:46:05.074 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662722958626816[0;39m ==> Parameters: 
2021-12-19 14:46:05.190 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662722958626816[0;39m <==    Updates: 3
2021-12-19 14:46:05.190 INFO  com.job.DocJob                                    :35   [32m127662722958626816[0;39m 更新电子书下的文档数据结束，耗时：178毫秒
2021-12-19 14:46:05.190 INFO  com.job.EbookSnapshotJob                          :32   [32m127662723705212928[0;39m 生成今日电子书快照开始
2021-12-19 14:46:05.190 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662723705212928[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:05.190 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662723705212928[0;39m ==> Parameters: 
2021-12-19 14:46:05.331 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662723705212928[0;39m <==    Updates: 0
2021-12-19 14:46:05.331 INFO  com.job.EbookSnapshotJob                          :35   [32m127662723705212928[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:46:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662743930146816[0;39m 生成今日电子书快照开始
2021-12-19 14:46:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662743930146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:10.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662743930146816[0;39m ==> Parameters: 
2021-12-19 14:46:10.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662743930146816[0;39m <==    Updates: 0
2021-12-19 14:46:10.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127662743930146816[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-19 14:46:15.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662764939415552[0;39m 生成今日电子书快照开始
2021-12-19 14:46:15.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662764939415552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:15.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662764939415552[0;39m ==> Parameters: 
2021-12-19 14:46:15.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662764939415552[0;39m <==    Updates: 0
2021-12-19 14:46:15.148 INFO  com.job.EbookSnapshotJob                          :35   [32m127662764939415552[0;39m 生成今日电子书快照结束，耗时：127毫秒
2021-12-19 14:46:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127662785885769728[0;39m 生成今日电子书快照开始
2021-12-19 14:46:20.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662785885769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:20.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662785885769728[0;39m ==> Parameters: 
2021-12-19 14:46:20.299 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662785885769728[0;39m <==    Updates: 0
2021-12-19 14:46:20.299 INFO  com.job.EbookSnapshotJob                          :35   [32m127662785885769728[0;39m 生成今日电子书快照结束，耗时：284毫秒
2021-12-19 14:46:25.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127662806907621376[0;39m 生成今日电子书快照开始
2021-12-19 14:46:25.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662806907621376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:25.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662806907621376[0;39m ==> Parameters: 
2021-12-19 14:46:25.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662806907621376[0;39m <==    Updates: 0
2021-12-19 14:46:25.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127662806907621376[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:46:30.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127662827853975552[0;39m 生成今日电子书快照开始
2021-12-19 14:46:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662827853975552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662827853975552[0;39m ==> Parameters: 
2021-12-19 14:46:30.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662827853975552[0;39m <==    Updates: 0
2021-12-19 14:46:30.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127662827853975552[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:46:35.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127662848762580992[0;39m 生成今日电子书快照开始
2021-12-19 14:46:35.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662848762580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:35.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662848762580992[0;39m ==> Parameters: 
2021-12-19 14:46:35.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662848762580992[0;39m <==    Updates: 0
2021-12-19 14:46:35.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127662848762580992[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 14:46:35.149 INFO  com.job.DocJob                                    :32   [32m127662849362366464[0;39m 更新电子书下的文档数据开始
2021-12-19 14:46:35.149 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662849362366464[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:46:35.149 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662849362366464[0;39m ==> Parameters: 
2021-12-19 14:46:35.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662849362366464[0;39m <==    Updates: 3
2021-12-19 14:46:35.243 INFO  com.job.DocJob                                    :35   [32m127662849362366464[0;39m 更新电子书下的文档数据结束，耗时：94毫秒
2021-12-19 14:46:40.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127662869729906688[0;39m 生成今日电子书快照开始
2021-12-19 14:46:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662869729906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662869729906688[0;39m ==> Parameters: 
2021-12-19 14:46:40.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662869729906688[0;39m <==    Updates: 0
2021-12-19 14:46:40.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127662869729906688[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:46:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662890730786816[0;39m 生成今日电子书快照开始
2021-12-19 14:46:45.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662890730786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:45.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662890730786816[0;39m ==> Parameters: 
2021-12-19 14:46:45.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662890730786816[0;39m <==    Updates: 0
2021-12-19 14:46:45.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127662890730786816[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-19 14:46:50.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127662911765221376[0;39m 生成今日电子书快照开始
2021-12-19 14:46:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662911765221376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662911765221376[0;39m ==> Parameters: 
2021-12-19 14:46:50.186 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662911765221376[0;39m <==    Updates: 0
2021-12-19 14:46:50.187 INFO  com.job.EbookSnapshotJob                          :35   [32m127662911765221376[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 14:46:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662932673826816[0;39m 生成今日电子书快照开始
2021-12-19 14:46:55.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662932673826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:46:55.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662932673826816[0;39m ==> Parameters: 
2021-12-19 14:46:55.184 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662932673826816[0;39m <==    Updates: 0
2021-12-19 14:46:55.184 INFO  com.job.EbookSnapshotJob                          :35   [32m127662932673826816[0;39m 生成今日电子书快照结束，耗时：172毫秒
2021-12-19 14:47:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127662953641152512[0;39m 生成今日电子书快照开始
2021-12-19 14:47:00.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662953641152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:00.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662953641152512[0;39m ==> Parameters: 
2021-12-19 14:47:00.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662953641152512[0;39m <==    Updates: 0
2021-12-19 14:47:00.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127662953641152512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:47:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662974616866816[0;39m 生成今日电子书快照开始
2021-12-19 14:47:05.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662974616866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:05.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662974616866816[0;39m ==> Parameters: 
2021-12-19 14:47:05.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662974616866816[0;39m <==    Updates: 0
2021-12-19 14:47:05.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127662974616866816[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:47:05.153 INFO  com.job.DocJob                                    :32   [32m127662975208263680[0;39m 更新电子书下的文档数据开始
2021-12-19 14:47:05.153 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662975208263680[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:47:05.153 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662975208263680[0;39m ==> Parameters: 
2021-12-19 14:47:05.249 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127662975208263680[0;39m <==    Updates: 3
2021-12-19 14:47:05.249 INFO  com.job.DocJob                                    :35   [32m127662975208263680[0;39m 更新电子书下的文档数据结束，耗时：96毫秒
2021-12-19 14:47:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127662995588386816[0;39m 生成今日电子书快照开始
2021-12-19 14:47:10.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662995588386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:10.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662995588386816[0;39m ==> Parameters: 
2021-12-19 14:47:10.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127662995588386816[0;39m <==    Updates: 0
2021-12-19 14:47:10.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127662995588386816[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-19 14:47:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127663016551518208[0;39m 生成今日电子书快照开始
2021-12-19 14:47:15.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663016551518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:15.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663016551518208[0;39m ==> Parameters: 
2021-12-19 14:47:15.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663016551518208[0;39m <==    Updates: 0
2021-12-19 14:47:15.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127663016551518208[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 14:47:15.464 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 14:47:15.464 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 14:47:15.466 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-12-19 14:47:15.674 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：aEddmubyyl，session id：0，当前连接数：1
2021-12-19 14:47:15.752 INFO  com.aspect.LogAspect                              :54   [32m127663019651108866[0;39m ------------- 开始 -------------
2021-12-19 14:47:15.752 INFO  com.aspect.LogAspect                              :54   [32m127663019651108865[0;39m ------------- 开始 -------------
2021-12-19 14:47:15.752 INFO  com.aspect.LogAspect                              :54   [32m127663019651108864[0;39m ------------- 开始 -------------
2021-12-19 14:47:15.754 INFO  com.aspect.LogAspect                              :55   [32m127663019651108866[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 14:47:15.754 INFO  com.aspect.LogAspect                              :55   [32m127663019651108864[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:47:15.754 INFO  com.aspect.LogAspect                              :55   [32m127663019651108865[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 14:47:15.754 INFO  com.aspect.LogAspect                              :56   [32m127663019651108866[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 14:47:15.754 INFO  com.aspect.LogAspect                              :56   [32m127663019651108865[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 14:47:15.754 INFO  com.aspect.LogAspect                              :56   [32m127663019651108864[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:47:15.755 INFO  com.aspect.LogAspect                              :57   [32m127663019651108864[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:15.755 INFO  com.aspect.LogAspect                              :57   [32m127663019651108866[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:15.755 INFO  com.aspect.LogAspect                              :57   [32m127663019651108865[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:15.793 INFO  com.aspect.LogAspect                              :80   [32m127663019651108865[0;39m 请求参数: []
2021-12-19 14:47:15.793 INFO  com.aspect.LogAspect                              :80   [32m127663019651108864[0;39m 请求参数: []
2021-12-19 14:47:15.793 INFO  com.aspect.LogAspect                              :80   [32m127663019651108866[0;39m 请求参数: []
2021-12-19 14:47:15.850 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663019651108865[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:47:15.850 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663019651108866[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:47:15.850 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663019651108865[0;39m ==> Parameters: 
2021-12-19 14:47:15.850 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663019651108866[0;39m ==> Parameters: 
2021-12-19 14:47:15.893 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663019651108864[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:47:15.894 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663019651108864[0;39m ==> Parameters: 
2021-12-19 14:47:15.915 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663019651108866[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 14:47:15.915 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 14:47:15.916 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 14:47:15.916 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663019651108866[0;39m <==        Row: 2021-12-19, 493, 166, 493, 166
2021-12-19 14:47:15.940 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663019651108866[0;39m <==      Total: 1
2021-12-19 14:47:15.940 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 14:47:15.941 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 14:47:15.942 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 14:47:15.943 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 14:47:15.943 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 14:47:15.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663019651108865[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 14:47:15.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:47:15.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:47:15.945 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663019651108865[0;39m <==      Total: 7
2021-12-19 14:47:15.946 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:47:15.946 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:47:15.947 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:47:15.947 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:47:15.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:47:15.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:47:15.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:47:15.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:47:15.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:47:15.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:47:15.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:47:15.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:47:15.953 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:47:15.953 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:47:15.954 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:47:15.956 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:47:15.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:47:15.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663019651108864[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:47:15.958 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663019651108864[0;39m <==      Total: 19
2021-12-19 14:47:15.994 INFO  com.aspect.LogAspect                              :92   [32m127663019651108864[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:47:15.994 INFO  com.aspect.LogAspect                              :93   [32m127663019651108864[0;39m ------------- 结束 耗时：245 ms -------------
2021-12-19 14:47:15.994 INFO  com.aspect.LogAspect                              :92   [32m127663019651108866[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":493,"viewIncrease":493,"voteCount":166,"voteIncrease":166}],"success":true}
2021-12-19 14:47:15.994 INFO  com.aspect.LogAspect                              :92   [32m127663019651108865[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 14:47:15.994 INFO  com.aspect.LogAspect                              :93   [32m127663019651108865[0;39m ------------- 结束 耗时：245 ms -------------
2021-12-19 14:47:15.994 INFO  com.aspect.LogAspect                              :93   [32m127663019651108866[0;39m ------------- 结束 耗时：245 ms -------------
2021-12-19 14:47:20.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127663037502066688[0;39m 生成今日电子书快照开始
2021-12-19 14:47:20.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663037502066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:20.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663037502066688[0;39m ==> Parameters: 
2021-12-19 14:47:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663037502066688[0;39m <==    Updates: 0
2021-12-19 14:47:20.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127663037502066688[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:47:25.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127663058473586688[0;39m 生成今日电子书快照开始
2021-12-19 14:47:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663058473586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663058473586688[0;39m ==> Parameters: 
2021-12-19 14:47:25.179 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663058473586688[0;39m <==    Updates: 0
2021-12-19 14:47:25.179 INFO  com.job.EbookSnapshotJob                          :35   [32m127663058473586688[0;39m 生成今日电子书快照结束，耗时：174毫秒
2021-12-19 14:47:28.777 INFO  com.aspect.LogAspect                              :54   [32m127663074294501376[0;39m ------------- 开始 -------------
2021-12-19 14:47:28.777 INFO  com.aspect.LogAspect                              :55   [32m127663074294501376[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 14:47:28.777 INFO  com.aspect.LogAspect                              :56   [32m127663074294501376[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 14:47:28.777 INFO  com.aspect.LogAspect                              :57   [32m127663074294501376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:28.779 INFO  com.aspect.LogAspect                              :80   [32m127663074294501376[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-19 14:47:28.900 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127663074294501376[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 14:47:28.900 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127663074294501376[0;39m ==> Parameters: 101(Long)
2021-12-19 14:47:28.950 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127663074294501376[0;39m <==    Columns: count(0)
2021-12-19 14:47:28.950 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127663074294501376[0;39m <==        Row: 1
2021-12-19 14:47:28.950 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127663074294501376[0;39m <==      Total: 1
2021-12-19 14:47:28.965 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127663074294501376[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 14:47:28.965 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127663074294501376[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-19 14:47:29.012 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663074294501376[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 14:47:29.012 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663074294501376[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 75, 27
2021-12-19 14:47:29.012 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127663074294501376[0;39m <==      Total: 1
2021-12-19 14:47:29.012 INFO  com.servicess.EbookService                        :48   [32m127663074294501376[0;39m 总行数：1
2021-12-19 14:47:29.012 INFO  com.servicess.EbookService                        :49   [32m127663074294501376[0;39m 总页数：1
2021-12-19 14:47:29.028 INFO  com.aspect.LogAspect                              :92   [32m127663074294501376[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":75,"voteCount":27}],"total":1},"success":true}
2021-12-19 14:47:29.028 INFO  com.aspect.LogAspect                              :93   [32m127663074294501376[0;39m ------------- 结束 耗时：251 ms -------------
2021-12-19 14:47:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127663079466078208[0;39m 生成今日电子书快照开始
2021-12-19 14:47:30.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663079466078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663079466078208[0;39m ==> Parameters: 
2021-12-19 14:47:30.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663079466078208[0;39m <==    Updates: 0
2021-12-19 14:47:30.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127663079466078208[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 14:47:30.178 INFO  com.aspect.LogAspect                              :54   [32m127663080170721280[0;39m ------------- 开始 -------------
2021-12-19 14:47:30.179 INFO  com.aspect.LogAspect                              :55   [32m127663080170721280[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-19 14:47:30.181 INFO  com.aspect.LogAspect                              :56   [32m127663080170721280[0;39m 类名方法: com.controller.DocController.all
2021-12-19 14:47:30.182 INFO  com.aspect.LogAspect                              :57   [32m127663080170721280[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:30.183 INFO  com.aspect.LogAspect                              :80   [32m127663080170721280[0;39m 请求参数: [2]
2021-12-19 14:47:30.191 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127663080170721280[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-19 14:47:30.191 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127663080170721280[0;39m ==> Parameters: 2(Long)
2021-12-19 14:47:30.233 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 14:47:30.233 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 9, 2, 0, 文档1, 1, 31, 4
2021-12-19 14:47:30.233 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-19 14:47:30.233 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 10, 4
2021-12-19 14:47:30.233 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 7, 5
2021-12-19 14:47:30.233 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-19 14:47:30.248 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 7, 4
2021-12-19 14:47:30.248 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 4, 4
2021-12-19 14:47:30.248 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127663080170721280[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 2, 2
2021-12-19 14:47:30.248 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127663080170721280[0;39m <==      Total: 8
2021-12-19 14:47:30.248 INFO  com.aspect.LogAspect                              :92   [32m127663080170721280[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":31,"voteCount":4},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":10,"voteCount":4},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":7,"voteCount":5},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":7,"voteCount":4},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":4,"voteCount":4},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":2,"voteCount":2}],"success":true}
2021-12-19 14:47:30.248 INFO  com.aspect.LogAspect                              :93   [32m127663080170721280[0;39m ------------- 结束 耗时：70 ms -------------
2021-12-19 14:47:30.282 INFO  com.aspect.LogAspect                              :54   [32m127663080606928896[0;39m ------------- 开始 -------------
2021-12-19 14:47:30.282 INFO  com.aspect.LogAspect                              :55   [32m127663080606928896[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-19 14:47:30.282 INFO  com.aspect.LogAspect                              :56   [32m127663080606928896[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 14:47:30.282 INFO  com.aspect.LogAspect                              :57   [32m127663080606928896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:30.282 INFO  com.aspect.LogAspect                              :80   [32m127663080606928896[0;39m 请求参数: [9]
2021-12-19 14:47:30.282 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127663080606928896[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 14:47:30.282 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127663080606928896[0;39m ==> Parameters: 9(Long)
2021-12-19 14:47:30.332 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127663080606928896[0;39m <==      Total: 0
2021-12-19 14:47:30.334 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127663080606928896[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 14:47:30.334 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127663080606928896[0;39m ==> Parameters: 9(Long)
2021-12-19 14:47:30.415 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127663080606928896[0;39m <==    Updates: 1
2021-12-19 14:47:30.415 INFO  com.aspect.LogAspect                              :92   [32m127663080606928896[0;39m 返回结果: {"content":"","success":true}
2021-12-19 14:47:30.415 INFO  com.aspect.LogAspect                              :93   [32m127663080606928896[0;39m ------------- 结束 耗时：133 ms -------------
2021-12-19 14:47:31.838 INFO  com.aspect.LogAspect                              :54   [32m127663087133265920[0;39m ------------- 开始 -------------
2021-12-19 14:47:31.838 INFO  com.aspect.LogAspect                              :55   [32m127663087133265920[0;39m 请求地址: http://localhost:8081/doc/vote/9 GET
2021-12-19 14:47:31.838 INFO  com.aspect.LogAspect                              :56   [32m127663087133265920[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 14:47:31.839 INFO  com.aspect.LogAspect                              :57   [32m127663087133265920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:31.839 INFO  com.aspect.LogAspect                              :80   [32m127663087133265920[0;39m 请求参数: [9]
2021-12-19 14:47:32.976 INFO  com.Util.RedisUtil                                :31   [32m127663087133265920[0;39m key不存在，放入：DOC_VOTE_9_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 14:47:33.051 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127663087133265920[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 14:47:33.052 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127663087133265920[0;39m ==> Parameters: 9(Long)
2021-12-19 14:47:33.143 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127663087133265920[0;39m <==    Updates: 1
2021-12-19 14:47:33.143 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127663087133265920[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 14:47:33.144 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127663087133265920[0;39m ==> Parameters: 9(Long)
2021-12-19 14:47:33.192 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127663087133265920[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 14:47:33.193 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127663087133265920[0;39m <==        Row: 9, 2, 0, 文档1, 1, 32, 5
2021-12-19 14:47:33.194 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127663087133265920[0;39m <==      Total: 1
2021-12-19 14:47:33.198 INFO  com.aspect.LogAspect                              :92   [32m127663087133265920[0;39m 返回结果: {"success":true}
2021-12-19 14:47:33.199 INFO  com.aspect.LogAspect                              :93   [32m127663087133265920[0;39m ------------- 结束 耗时：1361 ms -------------
2021-12-19 14:47:33.237 INFO  com.websocket.WebSocketServer                     :71   [32m127663087133265920[0;39m 推送消息：aEddmubyyl，内容：【文档1】被点赞！
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :54   [32m127663097203789824[0;39m ------------- 开始 -------------
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :54   [32m127663097203789825[0;39m ------------- 开始 -------------
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :55   [32m127663097203789824[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :55   [32m127663097203789825[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :56   [32m127663097203789824[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :56   [32m127663097203789825[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :57   [32m127663097203789824[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:34.239 INFO  com.aspect.LogAspect                              :57   [32m127663097203789825[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:34.240 INFO  com.aspect.LogAspect                              :80   [32m127663097203789824[0;39m 请求参数: []
2021-12-19 14:47:34.240 INFO  com.aspect.LogAspect                              :80   [32m127663097203789825[0;39m 请求参数: []
2021-12-19 14:47:34.241 INFO  com.aspect.LogAspect                              :54   [32m127663097212178432[0;39m ------------- 开始 -------------
2021-12-19 14:47:34.242 INFO  com.aspect.LogAspect                              :55   [32m127663097212178432[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 14:47:34.242 INFO  com.aspect.LogAspect                              :56   [32m127663097212178432[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 14:47:34.242 INFO  com.aspect.LogAspect                              :57   [32m127663097212178432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:47:34.242 INFO  com.aspect.LogAspect                              :80   [32m127663097212178432[0;39m 请求参数: []
2021-12-19 14:47:34.279 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663097203789825[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:47:34.279 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663097203789824[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:47:34.279 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663097203789825[0;39m ==> Parameters: 
2021-12-19 14:47:34.279 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663097203789824[0;39m ==> Parameters: 
2021-12-19 14:47:34.279 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663097212178432[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:47:34.295 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663097212178432[0;39m ==> Parameters: 
2021-12-19 14:47:34.326 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663097203789825[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 14:47:34.326 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663097203789825[0;39m <==        Row: 2021-12-19, 493, 166, 493, 166
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:47:34.340 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663097203789825[0;39m <==      Total: 1
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:47:34.340 INFO  com.aspect.LogAspect                              :92   [32m127663097203789825[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":493,"viewIncrease":493,"voteCount":166,"voteIncrease":166}],"success":true}
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:47:34.340 INFO  com.aspect.LogAspect                              :93   [32m127663097203789825[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:47:34.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663097203789824[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:47:34.340 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663097203789824[0;39m <==      Total: 19
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 14:47:34.340 INFO  com.aspect.LogAspect                              :92   [32m127663097203789824[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 14:47:34.340 INFO  com.aspect.LogAspect                              :93   [32m127663097203789824[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 14:47:34.340 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663097212178432[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 14:47:34.340 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663097212178432[0;39m <==      Total: 7
2021-12-19 14:47:34.340 INFO  com.aspect.LogAspect                              :92   [32m127663097212178432[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 14:47:34.340 INFO  com.aspect.LogAspect                              :93   [32m127663097212178432[0;39m ------------- 结束 耗时：99 ms -------------
2021-12-19 14:47:35.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127663100437598208[0;39m 生成今日电子书快照开始
2021-12-19 14:47:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663100437598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:35.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663100437598208[0;39m ==> Parameters: 
2021-12-19 14:47:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663100437598208[0;39m <==    Updates: 0
2021-12-19 14:47:35.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127663100437598208[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 14:47:35.158 INFO  com.job.DocJob                                    :32   [32m127663101058355200[0;39m 更新电子书下的文档数据开始
2021-12-19 14:47:35.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663101058355200[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:47:35.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663101058355200[0;39m ==> Parameters: 
2021-12-19 14:47:35.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663101058355200[0;39m <==    Updates: 3
2021-12-19 14:47:35.268 INFO  com.job.DocJob                                    :35   [32m127663101058355200[0;39m 更新电子书下的文档数据结束，耗时：110毫秒
2021-12-19 14:47:40.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127663121392340992[0;39m 生成今日电子书快照开始
2021-12-19 14:47:40.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663121392340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:40.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663121392340992[0;39m ==> Parameters: 
2021-12-19 14:47:40.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663121392340992[0;39m <==    Updates: 0
2021-12-19 14:47:40.130 INFO  com.job.EbookSnapshotJob                          :35   [32m127663121392340992[0;39m 生成今日电子书快照结束，耗时：124毫秒
2021-12-19 14:47:45.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127663142401609728[0;39m 生成今日电子书快照开始
2021-12-19 14:47:45.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663142401609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:45.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663142401609728[0;39m ==> Parameters: 
2021-12-19 14:47:45.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663142401609728[0;39m <==    Updates: 0
2021-12-19 14:47:45.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127663142401609728[0;39m 生成今日电子书快照结束，耗时：221毫秒
2021-12-19 14:47:50.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127663163398295552[0;39m 生成今日电子书快照开始
2021-12-19 14:47:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663163398295552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663163398295552[0;39m ==> Parameters: 
2021-12-19 14:47:50.180 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663163398295552[0;39m <==    Updates: 0
2021-12-19 14:47:50.180 INFO  com.job.EbookSnapshotJob                          :35   [32m127663163398295552[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 14:47:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127663184344649728[0;39m 生成今日电子书快照开始
2021-12-19 14:47:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663184344649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:47:55.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663184344649728[0;39m ==> Parameters: 
2021-12-19 14:47:55.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663184344649728[0;39m <==    Updates: 0
2021-12-19 14:47:55.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127663184344649728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 14:48:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127663205341335552[0;39m 生成今日电子书快照开始
2021-12-19 14:48:00.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663205341335552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663205341335552[0;39m ==> Parameters: 
2021-12-19 14:48:00.180 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663205341335552[0;39m <==    Updates: 0
2021-12-19 14:48:00.180 INFO  com.job.EbookSnapshotJob                          :35   [32m127663205341335552[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 14:48:05.012 INFO  com.job.DocJob                                    :32   [32m127663226275106816[0;39m 更新电子书下的文档数据开始
2021-12-19 14:48:05.059 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663226275106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:48:05.059 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663226275106816[0;39m ==> Parameters: 
2021-12-19 14:48:05.153 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663226275106816[0;39m <==    Updates: 3
2021-12-19 14:48:05.153 INFO  com.job.DocJob                                    :35   [32m127663226275106816[0;39m 更新电子书下的文档数据结束，耗时：141毫秒
2021-12-19 14:48:05.153 INFO  com.job.EbookSnapshotJob                          :32   [32m127663226866503680[0;39m 生成今日电子书快照开始
2021-12-19 14:48:05.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663226866503680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:05.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663226866503680[0;39m ==> Parameters: 
2021-12-19 14:48:05.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663226866503680[0;39m <==    Updates: 0
2021-12-19 14:48:05.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127663226866503680[0;39m 生成今日电子书快照结束，耗时：96毫秒
2021-12-19 14:48:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663247255015424[0;39m 生成今日电子书快照开始
2021-12-19 14:48:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663247255015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663247255015424[0;39m ==> Parameters: 
2021-12-19 14:48:10.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663247255015424[0;39m <==    Updates: 0
2021-12-19 14:48:10.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127663247255015424[0;39m 生成今日电子书快照结束，耗时：210毫秒
2021-12-19 14:48:15.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127663268268478464[0;39m 生成今日电子书快照开始
2021-12-19 14:48:15.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663268268478464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:15.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663268268478464[0;39m ==> Parameters: 
2021-12-19 14:48:15.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663268268478464[0;39m <==    Updates: 0
2021-12-19 14:48:15.163 INFO  com.job.EbookSnapshotJob                          :35   [32m127663268268478464[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 14:48:17.843 INFO  com.aspect.LogAspect                              :54   [32m127663280092221440[0;39m ------------- 开始 -------------
2021-12-19 14:48:17.844 INFO  com.aspect.LogAspect                              :55   [32m127663280092221440[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-19 14:48:17.844 INFO  com.aspect.LogAspect                              :56   [32m127663280092221440[0;39m 类名方法: com.controller.UserController.login
2021-12-19 14:48:17.844 INFO  com.aspect.LogAspect                              :57   [32m127663280092221440[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:17.845 INFO  com.aspect.LogAspect                              :80   [32m127663280092221440[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-19 14:48:17.890 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127663280092221440[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-19 14:48:17.891 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127663280092221440[0;39m ==> Parameters: test123(String)
2021-12-19 14:48:17.959 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663280092221440[0;39m <==    Columns: id, login_name, name, password
2021-12-19 14:48:17.959 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663280092221440[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 14:48:17.960 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127663280092221440[0;39m <==      Total: 1
2021-12-19 14:48:17.969 INFO  com.controller.UserController                     :77   [32m127663280092221440[0;39m 生成单点登录token:127663280620703744,并放入redis中
2021-12-19 14:48:18.000 INFO  com.aspect.LogAspect                              :92   [32m127663280092221440[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127663280620703744"},"success":true}
2021-12-19 14:48:18.001 INFO  com.aspect.LogAspect                              :93   [32m127663280092221440[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-19 14:48:18.348 INFO  com.websocket.WebSocketServer                     :41   [32m127663019651108866[0;39m 连接关闭，token：aEddmubyyl，session id：0！当前连接数：0
2021-12-19 14:48:19.435 INFO  com.websocket.WebSocketServer                     :32   [32m127663074294501376[0;39m 有新连接：token：LcZpluYtMU，session id：1，当前连接数：1
2021-12-19 14:48:19.522 INFO  com.aspect.LogAspect                              :54   [32m127663287134457856[0;39m ------------- 开始 -------------
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :55   [32m127663287134457856[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :54   [32m127663287138652160[0;39m ------------- 开始 -------------
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :56   [32m127663287134457856[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :55   [32m127663287138652160[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :57   [32m127663287134457856[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :56   [32m127663287138652160[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :80   [32m127663287134457856[0;39m 请求参数: []
2021-12-19 14:48:19.523 INFO  com.aspect.LogAspect                              :57   [32m127663287138652160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:19.524 INFO  com.aspect.LogAspect                              :80   [32m127663287138652160[0;39m 请求参数: []
2021-12-19 14:48:19.526 INFO  com.aspect.LogAspect                              :54   [32m127663287151235072[0;39m ------------- 开始 -------------
2021-12-19 14:48:19.527 INFO  com.aspect.LogAspect                              :55   [32m127663287151235072[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:48:19.527 INFO  com.aspect.LogAspect                              :56   [32m127663287151235072[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:48:19.527 INFO  com.aspect.LogAspect                              :57   [32m127663287151235072[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:19.527 INFO  com.aspect.LogAspect                              :80   [32m127663287151235072[0;39m 请求参数: []
2021-12-19 14:48:19.571 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663287138652160[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:48:19.571 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663287134457856[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:48:19.572 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663287138652160[0;39m ==> Parameters: 
2021-12-19 14:48:19.572 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663287134457856[0;39m ==> Parameters: 
2021-12-19 14:48:19.576 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663287151235072[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:48:19.576 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663287151235072[0;39m ==> Parameters: 
2021-12-19 14:48:19.620 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663287134457856[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 14:48:19.620 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 14:48:19.621 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663287134457856[0;39m <==        Row: 2021-12-19, 494, 167, 494, 167
2021-12-19 14:48:19.621 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 14:48:19.623 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663287134457856[0;39m <==      Total: 1
2021-12-19 14:48:19.623 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 14:48:19.624 INFO  com.aspect.LogAspect                              :92   [32m127663287134457856[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":494,"viewIncrease":494,"voteCount":167,"voteIncrease":167}],"success":true}
2021-12-19 14:48:19.624 INFO  com.aspect.LogAspect                              :93   [32m127663287134457856[0;39m ------------- 结束 耗时：102 ms -------------
2021-12-19 14:48:19.624 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 14:48:19.625 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 14:48:19.625 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:48:19.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:48:19.626 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 14:48:19.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:48:19.626 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 14:48:19.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:48:19.627 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:48:19.627 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663287138652160[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 14:48:19.627 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:48:19.627 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663287138652160[0;39m <==      Total: 7
2021-12-19 14:48:19.627 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:48:19.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:48:19.628 INFO  com.aspect.LogAspect                              :92   [32m127663287138652160[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 14:48:19.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:48:19.628 INFO  com.aspect.LogAspect                              :93   [32m127663287138652160[0;39m ------------- 结束 耗时：105 ms -------------
2021-12-19 14:48:19.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:48:19.629 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:48:19.629 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:48:19.630 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:48:19.630 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:48:19.630 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:48:19.631 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:48:19.631 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:48:19.631 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:48:19.631 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:48:19.632 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663287151235072[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:48:19.632 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663287151235072[0;39m <==      Total: 19
2021-12-19 14:48:19.634 INFO  com.aspect.LogAspect                              :92   [32m127663287151235072[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:48:19.634 INFO  com.aspect.LogAspect                              :93   [32m127663287151235072[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 14:48:20.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127663289147723776[0;39m 生成今日电子书快照开始
2021-12-19 14:48:20.003 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663289147723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:20.003 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663289147723776[0;39m ==> Parameters: 
2021-12-19 14:48:20.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663289147723776[0;39m <==    Updates: 0
2021-12-19 14:48:20.106 INFO  com.job.EbookSnapshotJob                          :35   [32m127663289147723776[0;39m 生成今日电子书快照结束，耗时：104毫秒
2021-12-19 14:48:24.080 INFO  com.aspect.LogAspect                              :54   [32m127663306252095488[0;39m ------------- 开始 -------------
2021-12-19 14:48:24.081 INFO  com.aspect.LogAspect                              :55   [32m127663306252095488[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:48:24.081 INFO  com.aspect.LogAspect                              :56   [32m127663306252095488[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:48:24.081 INFO  com.aspect.LogAspect                              :57   [32m127663306252095488[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:24.081 INFO  com.aspect.LogAspect                              :80   [32m127663306252095488[0;39m 请求参数: []
2021-12-19 14:48:24.152 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663306252095488[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:48:24.153 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663306252095488[0;39m ==> Parameters: 
2021-12-19 14:48:24.257 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:48:24.257 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:48:24.258 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:48:24.258 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:48:24.259 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:48:24.259 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:48:24.260 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:48:24.260 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:48:24.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:48:24.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:48:24.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:48:24.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:48:24.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:48:24.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:48:24.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:48:24.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:48:24.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:48:24.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:48:24.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:48:24.265 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663306252095488[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:48:24.266 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663306252095488[0;39m <==      Total: 19
2021-12-19 14:48:24.272 INFO  com.aspect.LogAspect                              :92   [32m127663306252095488[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:48:24.273 INFO  com.aspect.LogAspect                              :93   [32m127663306252095488[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-19 14:48:24.627 INFO  com.aspect.LogAspect                              :54   [32m127663308546379776[0;39m ------------- 开始 -------------
2021-12-19 14:48:24.628 INFO  com.aspect.LogAspect                              :55   [32m127663308546379776[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:48:24.628 INFO  com.aspect.LogAspect                              :56   [32m127663308546379776[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:48:24.628 INFO  com.aspect.LogAspect                              :57   [32m127663308546379776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:24.628 INFO  com.aspect.LogAspect                              :80   [32m127663308546379776[0;39m 请求参数: []
2021-12-19 14:48:24.674 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663308546379776[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:48:24.674 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663308546379776[0;39m ==> Parameters: 
2021-12-19 14:48:24.745 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:48:24.745 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:48:24.745 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:48:24.745 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:48:24.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:48:24.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:48:24.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:48:24.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:48:24.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:48:24.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:48:24.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:48:24.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:48:24.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:48:24.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:48:24.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:48:24.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:48:24.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:48:24.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:48:24.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:48:24.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663308546379776[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:48:24.750 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663308546379776[0;39m <==      Total: 19
2021-12-19 14:48:24.752 INFO  com.aspect.LogAspect                              :92   [32m127663308546379776[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:48:24.752 INFO  com.aspect.LogAspect                              :93   [32m127663308546379776[0;39m ------------- 结束 耗时：125 ms -------------
2021-12-19 14:48:24.773 INFO  com.aspect.LogAspect                              :54   [32m127663309158748160[0;39m ------------- 开始 -------------
2021-12-19 14:48:24.774 INFO  com.aspect.LogAspect                              :55   [32m127663309158748160[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 14:48:24.774 INFO  com.aspect.LogAspect                              :56   [32m127663309158748160[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 14:48:24.774 INFO  com.aspect.LogAspect                              :57   [32m127663309158748160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:24.774 INFO  com.aspect.LogAspect                              :80   [32m127663309158748160[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 14:48:24.868 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127663309158748160[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 14:48:24.869 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127663309158748160[0;39m ==> Parameters: 
2021-12-19 14:48:24.975 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127663309158748160[0;39m <==    Columns: count(0)
2021-12-19 14:48:24.975 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127663309158748160[0;39m <==        Row: 6
2021-12-19 14:48:24.976 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127663309158748160[0;39m <==      Total: 1
2021-12-19 14:48:24.976 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127663309158748160[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 14:48:24.977 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127663309158748160[0;39m ==> Parameters: 10(Integer)
2021-12-19 14:48:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127663310123438080[0;39m 生成今日电子书快照开始
2021-12-19 14:48:25.003 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663310123438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:25.005 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663310123438080[0;39m ==> Parameters: 
2021-12-19 14:48:25.026 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 14:48:25.027 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 93, 16
2021-12-19 14:48:25.027 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 14:48:25.027 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 14:48:25.028 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 14:48:25.028 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 14:48:25.028 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127663309158748160[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 14:48:25.029 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127663309158748160[0;39m <==      Total: 6
2021-12-19 14:48:25.029 INFO  com.servicess.EbookService                        :48   [32m127663309158748160[0;39m 总行数：6
2021-12-19 14:48:25.029 INFO  com.servicess.EbookService                        :49   [32m127663309158748160[0;39m 总页数：1
2021-12-19 14:48:25.030 INFO  com.aspect.LogAspect                              :92   [32m127663309158748160[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":93,"voteCount":16},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 14:48:25.031 INFO  com.aspect.LogAspect                              :93   [32m127663309158748160[0;39m ------------- 结束 耗时：258 ms -------------
2021-12-19 14:48:25.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663310123438080[0;39m <==    Updates: 0
2021-12-19 14:48:25.116 INFO  com.job.EbookSnapshotJob                          :35   [32m127663310123438080[0;39m 生成今日电子书快照结束，耗时：113毫秒
2021-12-19 14:48:25.347 INFO  com.interceptor.LoginInterceptor                  :29   [32m127663080170721280[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 14:48:25.347 INFO  com.interceptor.LoginInterceptor                  :65   [32m127663080170721280[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-19 14:48:25.354 INFO  com.interceptor.LoginInterceptor                  :29   [32m127663080606928896[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 14:48:25.355 INFO  com.interceptor.LoginInterceptor                  :40   [32m127663080606928896[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 14:48:25.355 INFO  com.interceptor.LoginInterceptor                  :44   [32m127663080606928896[0;39m 登录校验开始，token：127663280620703744
2021-12-19 14:48:25.377 INFO  com.interceptor.LoginInterceptor                  :56   [32m127663080606928896[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127663280620703744"}
2021-12-19 14:48:25.392 INFO  com.aspect.LogAspect                              :54   [32m127663311755022336[0;39m ------------- 开始 -------------
2021-12-19 14:48:25.392 INFO  com.aspect.LogAspect                              :55   [32m127663311755022336[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 14:48:25.393 INFO  com.aspect.LogAspect                              :56   [32m127663311755022336[0;39m 类名方法: com.controller.UserController.list
2021-12-19 14:48:25.393 INFO  com.aspect.LogAspect                              :57   [32m127663311755022336[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:25.394 INFO  com.aspect.LogAspect                              :80   [32m127663311755022336[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 14:48:25.396 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127663311755022336[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 14:48:25.396 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127663311755022336[0;39m ==> Parameters: 
2021-12-19 14:48:25.457 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127663311755022336[0;39m <==    Columns: count(0)
2021-12-19 14:48:25.457 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127663311755022336[0;39m <==        Row: 7
2021-12-19 14:48:25.457 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127663311755022336[0;39m <==      Total: 1
2021-12-19 14:48:25.458 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127663311755022336[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 14:48:25.458 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127663311755022336[0;39m ==> Parameters: 10(Integer)
2021-12-19 14:48:25.504 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==    Columns: id, login_name, name, password
2021-12-19 14:48:25.504 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 14:48:25.505 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 14:48:25.505 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 14:48:25.505 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 14:48:25.506 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 14:48:25.506 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 14:48:25.507 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127663311755022336[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 14:48:25.508 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127663311755022336[0;39m <==      Total: 7
2021-12-19 14:48:25.508 INFO  com.servicess.UserService                         :52   [32m127663311755022336[0;39m 总行数：7
2021-12-19 14:48:25.509 INFO  com.servicess.UserService                         :53   [32m127663311755022336[0;39m 总页数：1
2021-12-19 14:48:25.519 INFO  com.aspect.LogAspect                              :92   [32m127663311755022336[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 14:48:25.520 INFO  com.aspect.LogAspect                              :93   [32m127663311755022336[0;39m ------------- 结束 耗时：128 ms -------------
2021-12-19 14:48:25.524 INFO  com.interceptor.LoginInterceptor                  :65   [32m127663311755022336[0;39m ------------- LoginInterceptor 结束 耗时：169 ms -------------
2021-12-19 14:48:26.169 INFO  com.aspect.LogAspect                              :54   [32m127663315013996544[0;39m ------------- 开始 -------------
2021-12-19 14:48:26.169 INFO  com.aspect.LogAspect                              :55   [32m127663315013996544[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 14:48:26.169 INFO  com.aspect.LogAspect                              :56   [32m127663315013996544[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 14:48:26.170 INFO  com.aspect.LogAspect                              :57   [32m127663315013996544[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:26.170 INFO  com.aspect.LogAspect                              :80   [32m127663315013996544[0;39m 请求参数: []
2021-12-19 14:48:26.170 INFO  com.aspect.LogAspect                              :54   [32m127663315018190848[0;39m ------------- 开始 -------------
2021-12-19 14:48:26.170 INFO  com.aspect.LogAspect                              :55   [32m127663315018190848[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 14:48:26.171 INFO  com.aspect.LogAspect                              :56   [32m127663315018190848[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 14:48:26.171 INFO  com.aspect.LogAspect                              :57   [32m127663315018190848[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:26.171 INFO  com.aspect.LogAspect                              :80   [32m127663315018190848[0;39m 请求参数: []
2021-12-19 14:48:26.173 INFO  com.aspect.LogAspect                              :54   [32m127663315030773760[0;39m ------------- 开始 -------------
2021-12-19 14:48:26.173 INFO  com.aspect.LogAspect                              :55   [32m127663315030773760[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:48:26.173 INFO  com.aspect.LogAspect                              :56   [32m127663315030773760[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:48:26.173 INFO  com.aspect.LogAspect                              :57   [32m127663315030773760[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:26.174 INFO  com.aspect.LogAspect                              :80   [32m127663315030773760[0;39m 请求参数: []
2021-12-19 14:48:26.213 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663315013996544[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:48:26.214 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663315013996544[0;39m ==> Parameters: 
2021-12-19 14:48:26.218 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663315018190848[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:48:26.218 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663315018190848[0;39m ==> Parameters: 
2021-12-19 14:48:26.222 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663315030773760[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:48:26.222 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663315030773760[0;39m ==> Parameters: 
2021-12-19 14:48:26.273 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663315013996544[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 14:48:26.273 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 14:48:26.273 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:48:26.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:48:26.274 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 14:48:26.274 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663315013996544[0;39m <==        Row: 2021-12-19, 494, 167, 494, 167
2021-12-19 14:48:26.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:48:26.274 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663315013996544[0;39m <==      Total: 1
2021-12-19 14:48:26.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:48:26.274 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 14:48:26.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:48:26.275 INFO  com.aspect.LogAspect                              :92   [32m127663315013996544[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":494,"viewIncrease":494,"voteCount":167,"voteIncrease":167}],"success":true}
2021-12-19 14:48:26.275 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 14:48:26.275 INFO  com.aspect.LogAspect                              :93   [32m127663315013996544[0;39m ------------- 结束 耗时：106 ms -------------
2021-12-19 14:48:26.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:48:26.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:48:26.275 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 14:48:26.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:48:26.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:48:26.276 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 14:48:26.276 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:48:26.276 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:48:26.276 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 14:48:26.276 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:48:26.277 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:48:26.277 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663315018190848[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 14:48:26.277 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:48:26.277 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663315018190848[0;39m <==      Total: 7
2021-12-19 14:48:26.277 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:48:26.277 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:48:26.278 INFO  com.aspect.LogAspect                              :92   [32m127663315018190848[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 14:48:26.278 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:48:26.278 INFO  com.aspect.LogAspect                              :93   [32m127663315018190848[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 14:48:26.278 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:48:26.278 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:48:26.279 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663315030773760[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:48:26.279 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663315030773760[0;39m <==      Total: 19
2021-12-19 14:48:26.281 INFO  com.aspect.LogAspect                              :92   [32m127663315030773760[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:48:26.281 INFO  com.aspect.LogAspect                              :93   [32m127663315030773760[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 14:48:29.905 INFO  com.websocket.WebSocketServer                     :41   [32m127663287151235072[0;39m 连接关闭，token：LcZpluYtMU，session id：1！当前连接数：0
2021-12-19 14:48:30.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127663331136901120[0;39m 生成今日电子书快照开始
2021-12-19 14:48:30.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663331136901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:30.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663331136901120[0;39m ==> Parameters: 
2021-12-19 14:48:30.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663331136901120[0;39m <==    Updates: 0
2021-12-19 14:48:30.173 INFO  com.job.EbookSnapshotJob                          :35   [32m127663331136901120[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 14:48:33.489 INFO  com.websocket.WebSocketServer                     :32   [32m127663309158748160[0;39m 有新连接：token：Hikvr0oBl2，session id：2，当前连接数：1
2021-12-19 14:48:33.661 INFO  com.aspect.LogAspect                              :54   [32m127663346437722112[0;39m ------------- 开始 -------------
2021-12-19 14:48:33.662 INFO  com.aspect.LogAspect                              :55   [32m127663346437722112[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 14:48:33.662 INFO  com.aspect.LogAspect                              :56   [32m127663346437722112[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 14:48:33.662 INFO  com.aspect.LogAspect                              :57   [32m127663346437722112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:33.662 INFO  com.aspect.LogAspect                              :80   [32m127663346437722112[0;39m 请求参数: []
2021-12-19 14:48:33.663 INFO  com.aspect.LogAspect                              :54   [32m127663346441916416[0;39m ------------- 开始 -------------
2021-12-19 14:48:33.663 INFO  com.aspect.LogAspect                              :55   [32m127663346441916416[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 14:48:33.663 INFO  com.aspect.LogAspect                              :56   [32m127663346441916416[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 14:48:33.663 INFO  com.aspect.LogAspect                              :57   [32m127663346441916416[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:33.663 INFO  com.aspect.LogAspect                              :80   [32m127663346441916416[0;39m 请求参数: []
2021-12-19 14:48:33.665 INFO  com.aspect.LogAspect                              :54   [32m127663346454499328[0;39m ------------- 开始 -------------
2021-12-19 14:48:33.665 INFO  com.aspect.LogAspect                              :55   [32m127663346454499328[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:48:33.665 INFO  com.aspect.LogAspect                              :56   [32m127663346454499328[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:48:33.665 INFO  com.aspect.LogAspect                              :57   [32m127663346454499328[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:48:33.666 INFO  com.aspect.LogAspect                              :80   [32m127663346454499328[0;39m 请求参数: []
2021-12-19 14:48:33.706 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663346441916416[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:48:33.707 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663346441916416[0;39m ==> Parameters: 
2021-12-19 14:48:33.707 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663346437722112[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:48:33.707 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663346437722112[0;39m ==> Parameters: 
2021-12-19 14:48:33.717 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663346454499328[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:48:33.717 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663346454499328[0;39m ==> Parameters: 
2021-12-19 14:48:33.753 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 14:48:33.753 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663346441916416[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 14:48:33.754 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 14:48:33.754 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127663346441916416[0;39m <==        Row: 2021-12-19, 494, 167, 494, 167
2021-12-19 14:48:33.754 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127663346441916416[0;39m <==      Total: 1
2021-12-19 14:48:33.755 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 14:48:33.755 INFO  com.aspect.LogAspect                              :92   [32m127663346441916416[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":494,"viewIncrease":494,"voteCount":167,"voteIncrease":167}],"success":true}
2021-12-19 14:48:33.755 INFO  com.aspect.LogAspect                              :93   [32m127663346441916416[0;39m ------------- 结束 耗时：93 ms -------------
2021-12-19 14:48:33.755 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 14:48:33.756 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 14:48:33.756 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 14:48:33.757 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 14:48:33.758 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127663346437722112[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 14:48:33.759 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127663346437722112[0;39m <==      Total: 7
2021-12-19 14:48:33.760 INFO  com.aspect.LogAspect                              :92   [32m127663346437722112[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 14:48:33.760 INFO  com.aspect.LogAspect                              :93   [32m127663346437722112[0;39m ------------- 结束 耗时：99 ms -------------
2021-12-19 14:48:33.765 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:48:33.766 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:48:33.766 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:48:33.766 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:48:33.767 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:48:33.767 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:48:33.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:48:33.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:48:33.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:48:33.769 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:48:33.769 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:48:33.769 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:48:33.769 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:48:33.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:48:33.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:48:33.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:48:33.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:48:33.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:48:33.771 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:48:33.771 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127663346454499328[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:48:33.771 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127663346454499328[0;39m <==      Total: 19
2021-12-19 14:48:33.772 INFO  com.aspect.LogAspect                              :92   [32m127663346454499328[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:48:33.778 INFO  com.aspect.LogAspect                              :93   [32m127663346454499328[0;39m ------------- 结束 耗时：113 ms -------------
2021-12-19 14:48:35.012 INFO  com.job.DocJob                                    :32   [32m127663352104226816[0;39m 更新电子书下的文档数据开始
2021-12-19 14:48:35.055 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663352104226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:48:35.055 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663352104226816[0;39m ==> Parameters: 
2021-12-19 14:48:35.142 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663352104226816[0;39m <==    Updates: 3
2021-12-19 14:48:35.143 INFO  com.job.DocJob                                    :35   [32m127663352104226816[0;39m 更新电子书下的文档数据结束，耗时：131毫秒
2021-12-19 14:48:35.144 INFO  com.job.EbookSnapshotJob                          :32   [32m127663352657874944[0;39m 生成今日电子书快照开始
2021-12-19 14:48:35.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663352657874944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:35.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663352657874944[0;39m ==> Parameters: 
2021-12-19 14:48:35.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663352657874944[0;39m <==    Updates: 0
2021-12-19 14:48:35.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127663352657874944[0;39m 生成今日电子书快照结束，耗时：89毫秒
2021-12-19 14:48:40.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127663373033803776[0;39m 生成今日电子书快照开始
2021-12-19 14:48:40.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663373033803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:40.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663373033803776[0;39m ==> Parameters: 
2021-12-19 14:48:40.331 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663373033803776[0;39m <==    Updates: 0
2021-12-19 14:48:40.331 INFO  com.job.EbookSnapshotJob                          :35   [32m127663373033803776[0;39m 生成今日电子书快照结束，耗时：329毫秒
2021-12-19 14:48:45.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127663394009518080[0;39m 生成今日电子书快照开始
2021-12-19 14:48:45.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663394009518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:45.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663394009518080[0;39m ==> Parameters: 
2021-12-19 14:48:45.200 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663394009518080[0;39m <==    Updates: 0
2021-12-19 14:48:45.201 INFO  com.job.EbookSnapshotJob                          :35   [32m127663394009518080[0;39m 生成今日电子书快照结束，耗时：198毫秒
2021-12-19 14:48:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127663415014592512[0;39m 生成今日电子书快照开始
2021-12-19 14:48:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663415014592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663415014592512[0;39m ==> Parameters: 
2021-12-19 14:48:50.199 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663415014592512[0;39m <==    Updates: 0
2021-12-19 14:48:50.199 INFO  com.job.EbookSnapshotJob                          :35   [32m127663415014592512[0;39m 生成今日电子书快照结束，耗时：188毫秒
2021-12-19 14:48:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663435998695424[0;39m 生成今日电子书快照开始
2021-12-19 14:48:55.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663435998695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:48:55.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663435998695424[0;39m ==> Parameters: 
2021-12-19 14:48:55.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663435998695424[0;39m <==    Updates: 0
2021-12-19 14:48:55.128 INFO  com.job.EbookSnapshotJob                          :35   [32m127663435998695424[0;39m 生成今日电子书快照结束，耗时：114毫秒
2021-12-19 14:49:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127663456999575552[0;39m 生成今日电子书快照开始
2021-12-19 14:49:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663456999575552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663456999575552[0;39m ==> Parameters: 
2021-12-19 14:49:00.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663456999575552[0;39m <==    Updates: 0
2021-12-19 14:49:00.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127663456999575552[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 14:49:05.002 INFO  com.job.DocJob                                    :32   [32m127663477891403776[0;39m 更新电子书下的文档数据开始
2021-12-19 14:49:05.033 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663477891403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:49:05.033 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663477891403776[0;39m ==> Parameters: 
2021-12-19 14:49:05.127 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663477891403776[0;39m <==    Updates: 3
2021-12-19 14:49:05.127 INFO  com.job.DocJob                                    :35   [32m127663477891403776[0;39m 更新电子书下的文档数据结束，耗时：125毫秒
2021-12-19 14:49:05.127 INFO  com.job.EbookSnapshotJob                          :32   [32m127663478415691776[0;39m 生成今日电子书快照开始
2021-12-19 14:49:05.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663478415691776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:05.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663478415691776[0;39m ==> Parameters: 
2021-12-19 14:49:05.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663478415691776[0;39m <==    Updates: 0
2021-12-19 14:49:05.220 INFO  com.job.EbookSnapshotJob                          :35   [32m127663478415691776[0;39m 生成今日电子书快照结束，耗时：93毫秒
2021-12-19 14:49:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127663498917449728[0;39m 生成今日电子书快照开始
2021-12-19 14:49:10.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663498917449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:10.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663498917449728[0;39m ==> Parameters: 
2021-12-19 14:49:10.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663498917449728[0;39m <==    Updates: 0
2021-12-19 14:49:10.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127663498917449728[0;39m 生成今日电子书快照结束，耗时：132毫秒
2021-12-19 14:49:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663519884775424[0;39m 生成今日电子书快照开始
2021-12-19 14:49:15.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663519884775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:15.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663519884775424[0;39m ==> Parameters: 
2021-12-19 14:49:15.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663519884775424[0;39m <==    Updates: 0
2021-12-19 14:49:15.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127663519884775424[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:49:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127663540860489728[0;39m 生成今日电子书快照开始
2021-12-19 14:49:20.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663540860489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:20.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663540860489728[0;39m ==> Parameters: 
2021-12-19 14:49:20.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663540860489728[0;39m <==    Updates: 0
2021-12-19 14:49:20.174 INFO  com.job.EbookSnapshotJob                          :35   [32m127663540860489728[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 14:49:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127663561815232512[0;39m 生成今日电子书快照开始
2021-12-19 14:49:25.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663561815232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:25.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663561815232512[0;39m ==> Parameters: 
2021-12-19 14:49:25.199 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663561815232512[0;39m <==    Updates: 0
2021-12-19 14:49:25.199 INFO  com.job.EbookSnapshotJob                          :35   [32m127663561815232512[0;39m 生成今日电子书快照结束，耗时：188毫秒
2021-12-19 14:49:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127663582786752512[0;39m 生成今日电子书快照开始
2021-12-19 14:49:30.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663582786752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:30.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663582786752512[0;39m ==> Parameters: 
2021-12-19 14:49:30.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663582786752512[0;39m <==    Updates: 0
2021-12-19 14:49:30.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127663582786752512[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 14:49:35.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127663603733106688[0;39m 生成今日电子书快照开始
2021-12-19 14:49:35.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663603733106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:35.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663603733106688[0;39m ==> Parameters: 
2021-12-19 14:49:35.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663603733106688[0;39m <==    Updates: 0
2021-12-19 14:49:35.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127663603733106688[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-19 14:49:35.227 INFO  com.job.DocJob                                    :32   [32m127663604664242176[0;39m 更新电子书下的文档数据开始
2021-12-19 14:49:35.227 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663604664242176[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:49:35.227 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663604664242176[0;39m ==> Parameters: 
2021-12-19 14:49:35.415 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663604664242176[0;39m <==    Updates: 3
2021-12-19 14:49:35.415 INFO  com.job.DocJob                                    :35   [32m127663604664242176[0;39m 更新电子书下的文档数据结束，耗时：188毫秒
2021-12-19 14:49:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127663624729792512[0;39m 生成今日电子书快照开始
2021-12-19 14:49:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663624729792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663624729792512[0;39m ==> Parameters: 
2021-12-19 14:49:40.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663624729792512[0;39m <==    Updates: 0
2021-12-19 14:49:40.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127663624729792512[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-19 14:49:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127663645709701120[0;39m 生成今日电子书快照开始
2021-12-19 14:49:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663645709701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663645709701120[0;39m ==> Parameters: 
2021-12-19 14:49:45.299 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663645709701120[0;39m <==    Updates: 0
2021-12-19 14:49:45.299 INFO  com.job.EbookSnapshotJob                          :35   [32m127663645709701120[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-19 14:49:50.030 INFO  com.job.EbookSnapshotJob                          :32   [32m127663666752524288[0;39m 生成今日电子书快照开始
2021-12-19 14:49:50.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663666752524288[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:50.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663666752524288[0;39m ==> Parameters: 
2021-12-19 14:49:50.296 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663666752524288[0;39m <==    Updates: 0
2021-12-19 14:49:50.296 INFO  com.job.EbookSnapshotJob                          :35   [32m127663666752524288[0;39m 生成今日电子书快照结束，耗时：266毫秒
2021-12-19 14:49:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127663687648546816[0;39m 生成今日电子书快照开始
2021-12-19 14:49:55.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663687648546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:49:55.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663687648546816[0;39m ==> Parameters: 
2021-12-19 14:49:55.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663687648546816[0;39m <==    Updates: 0
2021-12-19 14:49:55.137 INFO  com.job.EbookSnapshotJob                          :35   [32m127663687648546816[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 14:50:00.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127663708682981376[0;39m 生成今日电子书快照开始
2021-12-19 14:50:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663708682981376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663708682981376[0;39m ==> Parameters: 
2021-12-19 14:50:00.183 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663708682981376[0;39m <==    Updates: 0
2021-12-19 14:50:00.183 INFO  com.job.EbookSnapshotJob                          :35   [32m127663708682981376[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 14:50:05.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663729599975424[0;39m 生成今日电子书快照开始
2021-12-19 14:50:05.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663729599975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:05.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663729599975424[0;39m ==> Parameters: 
2021-12-19 14:50:05.350 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663729599975424[0;39m <==    Updates: 0
2021-12-19 14:50:05.350 INFO  com.job.EbookSnapshotJob                          :35   [32m127663729599975424[0;39m 生成今日电子书快照结束，耗时：336毫秒
2021-12-19 14:50:05.350 INFO  com.job.DocJob                                    :32   [32m127663731009261568[0;39m 更新电子书下的文档数据开始
2021-12-19 14:50:05.350 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663731009261568[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:50:05.350 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663731009261568[0;39m ==> Parameters: 
2021-12-19 14:50:05.527 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663731009261568[0;39m <==    Updates: 3
2021-12-19 14:50:05.527 INFO  com.job.DocJob                                    :35   [32m127663731009261568[0;39m 更新电子书下的文档数据结束，耗时：177毫秒
2021-12-19 14:50:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663750571495424[0;39m 生成今日电子书快照开始
2021-12-19 14:50:10.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663750571495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:10.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663750571495424[0;39m ==> Parameters: 
2021-12-19 14:50:10.374 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663750571495424[0;39m <==    Updates: 0
2021-12-19 14:50:10.374 INFO  com.job.EbookSnapshotJob                          :35   [32m127663750571495424[0;39m 生成今日电子书快照结束，耗时：360毫秒
2021-12-19 14:50:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127663771547209728[0;39m 生成今日电子书快照开始
2021-12-19 14:50:15.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663771547209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:15.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663771547209728[0;39m ==> Parameters: 
2021-12-19 14:50:15.492 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663771547209728[0;39m <==    Updates: 0
2021-12-19 14:50:15.492 INFO  com.job.EbookSnapshotJob                          :35   [32m127663771547209728[0;39m 生成今日电子书快照结束，耗时：477毫秒
2021-12-19 14:50:20.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127663792543895552[0;39m 生成今日电子书快照开始
2021-12-19 14:50:20.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663792543895552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:20.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663792543895552[0;39m ==> Parameters: 
2021-12-19 14:50:20.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663792543895552[0;39m <==    Updates: 0
2021-12-19 14:50:20.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127663792543895552[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:50:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663813486055424[0;39m 生成今日电子书快照开始
2021-12-19 14:50:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663813486055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663813486055424[0;39m ==> Parameters: 
2021-12-19 14:50:25.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663813486055424[0;39m <==    Updates: 0
2021-12-19 14:50:25.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127663813486055424[0;39m 生成今日电子书快照结束，耗时：213毫秒
2021-12-19 14:50:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127663834424020992[0;39m 生成今日电子书快照开始
2021-12-19 14:50:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663834424020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663834424020992[0;39m ==> Parameters: 
2021-12-19 14:50:30.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663834424020992[0;39m <==    Updates: 0
2021-12-19 14:50:30.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127663834424020992[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-19 14:50:35.013 INFO  com.job.DocJob                                    :32   [32m127663855424901120[0;39m 更新电子书下的文档数据开始
2021-12-19 14:50:35.049 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663855424901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:50:35.049 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663855424901120[0;39m ==> Parameters: 
2021-12-19 14:50:35.143 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663855424901120[0;39m <==    Updates: 3
2021-12-19 14:50:35.143 INFO  com.job.DocJob                                    :35   [32m127663855424901120[0;39m 更新电子书下的文档数据结束，耗时：130毫秒
2021-12-19 14:50:35.158 INFO  com.job.EbookSnapshotJob                          :32   [32m127663856033075200[0;39m 生成今日电子书快照开始
2021-12-19 14:50:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663856033075200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663856033075200[0;39m ==> Parameters: 
2021-12-19 14:50:35.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663856033075200[0;39m <==    Updates: 0
2021-12-19 14:50:35.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127663856033075200[0;39m 生成今日电子书快照结束，耗时：78毫秒
2021-12-19 14:50:40.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127663876459335680[0;39m 生成今日电子书快照开始
2021-12-19 14:50:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663876459335680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663876459335680[0;39m ==> Parameters: 
2021-12-19 14:50:40.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663876459335680[0;39m <==    Updates: 0
2021-12-19 14:50:40.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127663876459335680[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 14:50:45.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127663897313415168[0;39m 生成今日电子书快照开始
2021-12-19 14:50:45.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663897313415168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:45.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663897313415168[0;39m ==> Parameters: 
2021-12-19 14:50:45.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663897313415168[0;39m <==    Updates: 0
2021-12-19 14:50:45.141 INFO  com.job.EbookSnapshotJob                          :35   [32m127663897313415168[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 14:50:50.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127663918343655424[0;39m 生成今日电子书快照开始
2021-12-19 14:50:50.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663918343655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:50.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663918343655424[0;39m ==> Parameters: 
2021-12-19 14:50:50.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663918343655424[0;39m <==    Updates: 0
2021-12-19 14:50:50.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127663918343655424[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 14:50:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127663939319369728[0;39m 生成今日电子书快照开始
2021-12-19 14:50:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663939319369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:50:55.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663939319369728[0;39m ==> Parameters: 
2021-12-19 14:50:55.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663939319369728[0;39m <==    Updates: 0
2021-12-19 14:50:55.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127663939319369728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 14:51:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127663960282501120[0;39m 生成今日电子书快照开始
2021-12-19 14:51:00.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663960282501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:00.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663960282501120[0;39m ==> Parameters: 
2021-12-19 14:51:00.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663960282501120[0;39m <==    Updates: 0
2021-12-19 14:51:00.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127663960282501120[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 14:51:05.005 INFO  com.job.DocJob                                    :32   [32m127663981220466688[0;39m 更新电子书下的文档数据开始
2021-12-19 14:51:05.052 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663981220466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:51:05.052 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663981220466688[0;39m ==> Parameters: 
2021-12-19 14:51:05.212 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127663981220466688[0;39m <==    Updates: 3
2021-12-19 14:51:05.212 INFO  com.job.DocJob                                    :35   [32m127663981220466688[0;39m 更新电子书下的文档数据结束，耗时：207毫秒
2021-12-19 14:51:05.212 INFO  com.job.EbookSnapshotJob                          :32   [32m127663982088687616[0;39m 生成今日电子书快照开始
2021-12-19 14:51:05.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663982088687616[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:05.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663982088687616[0;39m ==> Parameters: 
2021-12-19 14:51:05.368 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127663982088687616[0;39m <==    Updates: 0
2021-12-19 14:51:05.368 INFO  com.job.EbookSnapshotJob                          :35   [32m127663982088687616[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 14:51:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127664002238124032[0;39m 生成今日电子书快照开始
2021-12-19 14:51:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664002238124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664002238124032[0;39m ==> Parameters: 
2021-12-19 14:51:10.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664002238124032[0;39m <==    Updates: 0
2021-12-19 14:51:10.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127664002238124032[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 14:51:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127664023192866816[0;39m 生成今日电子书快照开始
2021-12-19 14:51:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664023192866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664023192866816[0;39m ==> Parameters: 
2021-12-19 14:51:15.199 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664023192866816[0;39m <==    Updates: 0
2021-12-19 14:51:15.199 INFO  com.job.EbookSnapshotJob                          :35   [32m127664023192866816[0;39m 生成今日电子书快照结束，耗时：187毫秒
2021-12-19 14:51:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127664044172775424[0;39m 生成今日电子书快照开始
2021-12-19 14:51:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664044172775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664044172775424[0;39m ==> Parameters: 
2021-12-19 14:51:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664044172775424[0;39m <==    Updates: 0
2021-12-19 14:51:20.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127664044172775424[0;39m 生成今日电子书快照结束，耗时：135毫秒
2021-12-19 14:51:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127664065135906816[0;39m 生成今日电子书快照开始
2021-12-19 14:51:25.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664065135906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:25.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664065135906816[0;39m ==> Parameters: 
2021-12-19 14:51:25.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664065135906816[0;39m <==    Updates: 0
2021-12-19 14:51:25.137 INFO  com.job.EbookSnapshotJob                          :35   [32m127664065135906816[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 14:51:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127664086107426816[0;39m 生成今日电子书快照开始
2021-12-19 14:51:30.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664086107426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:30.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664086107426816[0;39m ==> Parameters: 
2021-12-19 14:51:30.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664086107426816[0;39m <==    Updates: 0
2021-12-19 14:51:30.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127664086107426816[0;39m 生成今日电子书快照结束，耗时：134毫秒
2021-12-19 14:51:33.234 INFO  com.websocket.WebSocketServer                     :41   [32m127663306252095488[0;39m 连接关闭，token：Hikvr0oBl2，session id：2！当前连接数：0
2021-12-19 14:51:35.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127664107070558208[0;39m 生成今日电子书快照开始
2021-12-19 14:51:35.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664107070558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:35.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664107070558208[0;39m ==> Parameters: 
2021-12-19 14:51:35.059 INFO  com.websocket.WebSocketServer                     :32   [32m127663308546379776[0;39m 有新连接：token：vPm1eR0ZN7，session id：3，当前连接数：1
2021-12-19 14:51:35.126 INFO  com.aspect.LogAspect                              :54   [32m127664107557097472[0;39m ------------- 开始 -------------
2021-12-19 14:51:35.127 INFO  com.aspect.LogAspect                              :55   [32m127664107557097472[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 14:51:35.127 INFO  com.aspect.LogAspect                              :56   [32m127664107557097472[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 14:51:35.127 INFO  com.aspect.LogAspect                              :57   [32m127664107557097472[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:51:35.127 INFO  com.aspect.LogAspect                              :54   [32m127664107561291776[0;39m ------------- 开始 -------------
2021-12-19 14:51:35.127 INFO  com.aspect.LogAspect                              :80   [32m127664107557097472[0;39m 请求参数: []
2021-12-19 14:51:35.128 INFO  com.aspect.LogAspect                              :55   [32m127664107561291776[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 14:51:35.128 INFO  com.aspect.LogAspect                              :56   [32m127664107561291776[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 14:51:35.128 INFO  com.aspect.LogAspect                              :57   [32m127664107561291776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:51:35.128 INFO  com.aspect.LogAspect                              :80   [32m127664107561291776[0;39m 请求参数: []
2021-12-19 14:51:35.131 INFO  com.aspect.LogAspect                              :54   [32m127664107578068992[0;39m ------------- 开始 -------------
2021-12-19 14:51:35.131 INFO  com.aspect.LogAspect                              :55   [32m127664107578068992[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 14:51:35.131 INFO  com.aspect.LogAspect                              :56   [32m127664107578068992[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 14:51:35.131 INFO  com.aspect.LogAspect                              :57   [32m127664107578068992[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 14:51:35.132 INFO  com.aspect.LogAspect                              :80   [32m127664107578068992[0;39m 请求参数: []
2021-12-19 14:51:35.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664107070558208[0;39m <==    Updates: 0
2021-12-19 14:51:35.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127664107070558208[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 14:51:35.149 INFO  com.job.DocJob                                    :32   [32m127664107653566464[0;39m 更新电子书下的文档数据开始
2021-12-19 14:51:35.149 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127664107653566464[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 14:51:35.150 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127664107653566464[0;39m ==> Parameters: 
2021-12-19 14:51:35.174 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127664107557097472[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:51:35.174 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127664107557097472[0;39m ==> Parameters: 
2021-12-19 14:51:35.174 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127664107561291776[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 14:51:35.175 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127664107561291776[0;39m ==> Parameters: 
2021-12-19 14:51:35.181 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127664107578068992[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 14:51:35.182 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127664107578068992[0;39m ==> Parameters: 
2021-12-19 14:51:35.252 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127664107557097472[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 14:51:35.253 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127664107557097472[0;39m <==        Row: 2021-12-19, 494, 167, 494, 167
2021-12-19 14:51:35.253 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==    Columns: id, parent, name, sort
2021-12-19 14:51:35.253 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 14:51:35.252 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 14:51:35.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127664107653566464[0;39m <==    Updates: 3
2021-12-19 14:51:35.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 14:51:35.254 INFO  com.job.DocJob                                    :35   [32m127664107653566464[0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2021-12-19 14:51:35.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 14:51:35.254 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 14:51:35.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 14:51:35.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 14:51:35.255 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 14:51:35.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 14:51:35.255 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127664107557097472[0;39m <==      Total: 1
2021-12-19 14:51:35.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 14:51:35.255 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 14:51:35.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 14:51:35.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 14:51:35.256 INFO  com.aspect.LogAspect                              :92   [32m127664107557097472[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":494,"viewIncrease":494,"voteCount":167,"voteIncrease":167}],"success":true}
2021-12-19 14:51:35.256 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 14:51:35.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 14:51:35.256 INFO  com.aspect.LogAspect                              :93   [32m127664107557097472[0;39m ------------- 结束 耗时：130 ms -------------
2021-12-19 14:51:35.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 14:51:35.256 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 14:51:35.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 14:51:35.256 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 14:51:35.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 14:51:35.270 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127664107561291776[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 14:51:35.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 14:51:35.270 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127664107561291776[0;39m <==      Total: 7
2021-12-19 14:51:35.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 14:51:35.271 INFO  com.aspect.LogAspect                              :92   [32m127664107561291776[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 14:51:35.271 INFO  com.aspect.LogAspect                              :93   [32m127664107561291776[0;39m ------------- 结束 耗时：144 ms -------------
2021-12-19 14:51:35.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 14:51:35.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 14:51:35.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 14:51:35.272 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127664107578068992[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 14:51:35.272 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127664107578068992[0;39m <==      Total: 19
2021-12-19 14:51:35.274 INFO  com.aspect.LogAspect                              :92   [32m127664107578068992[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 14:51:35.274 INFO  com.aspect.LogAspect                              :93   [32m127664107578068992[0;39m ------------- 结束 耗时：143 ms -------------
2021-12-19 14:51:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127664128058855424[0;39m 生成今日电子书快照开始
2021-12-19 14:51:40.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664128058855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:40.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664128058855424[0;39m ==> Parameters: 
2021-12-19 14:51:40.193 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664128058855424[0;39m <==    Updates: 0
2021-12-19 14:51:40.193 INFO  com.job.EbookSnapshotJob                          :35   [32m127664128058855424[0;39m 生成今日电子书快照结束，耗时：179毫秒
2021-12-19 14:51:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127664149021986816[0;39m 生成今日电子书快照开始
2021-12-19 14:51:45.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664149021986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:45.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664149021986816[0;39m ==> Parameters: 
2021-12-19 14:51:45.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664149021986816[0;39m <==    Updates: 0
2021-12-19 14:51:45.136 INFO  com.job.EbookSnapshotJob                          :35   [32m127664149021986816[0;39m 生成今日电子书快照结束，耗时：124毫秒
2021-12-19 14:51:50.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127664170022866944[0;39m 生成今日电子书快照开始
2021-12-19 14:51:50.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664170022866944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:50.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664170022866944[0;39m ==> Parameters: 
2021-12-19 14:51:50.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664170022866944[0;39m <==    Updates: 0
2021-12-19 14:51:50.148 INFO  com.job.EbookSnapshotJob                          :35   [32m127664170022866944[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 14:51:50.595 INFO  com.websocket.WebSocketServer                     :41   [32m127663346437722112[0;39m 连接关闭，token：vPm1eR0ZN7，session id：3！当前连接数：0
2021-12-19 14:51:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127664190960832512[0;39m 生成今日电子书快照开始
2021-12-19 14:51:55.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664190960832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 14:51:55.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664190960832512[0;39m ==> Parameters: 
2021-12-19 14:51:55.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127664190960832512[0;39m <==    Updates: 0
2021-12-19 14:51:55.136 INFO  com.job.EbookSnapshotJob                          :35   [32m127664190960832512[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:36:10.500 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 15:36:10.515 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 11604 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 15:36:10.515 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 15:36:10.575 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 15:36:10.575 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 15:36:11.849 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 15:36:11.849 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 15:36:12.310 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 440 ms. Found 0 Redis repository interfaces.
2021-12-19 15:36:12.888 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 15:36:12.904 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 15:36:12.904 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 15:36:12.904 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 15:36:12.951 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 15:36:12.951 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2376 ms
2021-12-19 15:36:14.215 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 15:36:14.246 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 15:36:14.265 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 15:36:14.281 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 4.538 seconds (JVM running for 5.837)
2021-12-19 15:36:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127675347813666816[0;39m 生成今日电子书快照开始
2021-12-19 15:36:15.028 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127675347813666816[0;39m HikariPool-1 - Starting...
2021-12-19 15:36:15.765 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127675347813666816[0;39m HikariPool-1 - Start completed.
2021-12-19 15:36:15.781 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675347813666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:15.797 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675347813666816[0;39m ==> Parameters: 
2021-12-19 15:36:15.896 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675347813666816[0;39m <==    Updates: 0
2021-12-19 15:36:15.896 INFO  com.job.EbookSnapshotJob                          :35   [32m127675347813666816[0;39m 生成今日电子书快照结束，耗时：884毫秒
2021-12-19 15:36:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127675368789381120[0;39m 生成今日电子书快照开始
2021-12-19 15:36:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675368789381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675368789381120[0;39m ==> Parameters: 
2021-12-19 15:36:20.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675368789381120[0;39m <==    Updates: 0
2021-12-19 15:36:20.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127675368789381120[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 15:36:25.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127675389727346688[0;39m 生成今日电子书快照开始
2021-12-19 15:36:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675389727346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675389727346688[0;39m ==> Parameters: 
2021-12-19 15:36:25.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675389727346688[0;39m <==    Updates: 0
2021-12-19 15:36:25.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127675389727346688[0;39m 生成今日电子书快照结束，耗时：176毫秒
2021-12-19 15:36:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127675410736615424[0;39m 生成今日电子书快照开始
2021-12-19 15:36:30.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675410736615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:30.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675410736615424[0;39m ==> Parameters: 
2021-12-19 15:36:30.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675410736615424[0;39m <==    Updates: 0
2021-12-19 15:36:30.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127675410736615424[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 15:36:35.014 INFO  com.job.DocJob                                    :32   [32m127675431708135424[0;39m 更新电子书下的文档数据开始
2021-12-19 15:36:35.066 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675431708135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:36:35.066 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675431708135424[0;39m ==> Parameters: 
2021-12-19 15:36:35.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675431708135424[0;39m <==    Updates: 3
2021-12-19 15:36:35.144 INFO  com.job.DocJob                                    :35   [32m127675431708135424[0;39m 更新电子书下的文档数据结束，耗时：130毫秒
2021-12-19 15:36:35.144 INFO  com.job.EbookSnapshotJob                          :32   [32m127675432253394944[0;39m 生成今日电子书快照开始
2021-12-19 15:36:35.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675432253394944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:35.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675432253394944[0;39m ==> Parameters: 
2021-12-19 15:36:35.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675432253394944[0;39m <==    Updates: 0
2021-12-19 15:36:35.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127675432253394944[0;39m 生成今日电子书快照结束，耗时：100毫秒
2021-12-19 15:36:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127675452675461120[0;39m 生成今日电子书快照开始
2021-12-19 15:36:40.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675452675461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:40.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675452675461120[0;39m ==> Parameters: 
2021-12-19 15:36:40.329 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675452675461120[0;39m <==    Updates: 0
2021-12-19 15:36:40.329 INFO  com.job.EbookSnapshotJob                          :35   [32m127675452675461120[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-19 15:36:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127675473638592512[0;39m 生成今日电子书快照开始
2021-12-19 15:36:45.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675473638592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675473638592512[0;39m ==> Parameters: 
2021-12-19 15:36:45.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675473638592512[0;39m <==    Updates: 0
2021-12-19 15:36:45.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127675473638592512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:36:50.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127675494626889728[0;39m 生成今日电子书快照开始
2021-12-19 15:36:50.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675494626889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:50.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675494626889728[0;39m ==> Parameters: 
2021-12-19 15:36:50.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675494626889728[0;39m <==    Updates: 0
2021-12-19 15:36:50.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127675494626889728[0;39m 生成今日电子书快照结束，耗时：197毫秒
2021-12-19 15:36:55.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127675515652935680[0;39m 生成今日电子书快照开始
2021-12-19 15:36:55.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675515652935680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:36:55.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675515652935680[0;39m ==> Parameters: 
2021-12-19 15:36:55.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675515652935680[0;39m <==    Updates: 0
2021-12-19 15:36:55.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127675515652935680[0;39m 生成今日电子书快照结束，耗时：134毫秒
2021-12-19 15:36:55.971 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 15:36:55.972 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 15:36:55.973 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 15:36:56.109 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：K5iTd5pdOl，session id：0，当前连接数：1
2021-12-19 15:36:56.240 INFO  com.aspect.LogAspect                              :54   [32m127675520715460608[0;39m ------------- 开始 -------------
2021-12-19 15:36:56.240 INFO  com.aspect.LogAspect                              :54   [32m127675520715460610[0;39m ------------- 开始 -------------
2021-12-19 15:36:56.240 INFO  com.aspect.LogAspect                              :54   [32m127675520715460609[0;39m ------------- 开始 -------------
2021-12-19 15:36:56.242 INFO  com.aspect.LogAspect                              :55   [32m127675520715460608[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:36:56.242 INFO  com.aspect.LogAspect                              :55   [32m127675520715460609[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:36:56.242 INFO  com.aspect.LogAspect                              :55   [32m127675520715460610[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:36:56.243 INFO  com.aspect.LogAspect                              :56   [32m127675520715460608[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:36:56.243 INFO  com.aspect.LogAspect                              :56   [32m127675520715460610[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:36:56.243 INFO  com.aspect.LogAspect                              :56   [32m127675520715460609[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:36:56.245 INFO  com.aspect.LogAspect                              :57   [32m127675520715460608[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:36:56.245 INFO  com.aspect.LogAspect                              :57   [32m127675520715460610[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:36:56.245 INFO  com.aspect.LogAspect                              :57   [32m127675520715460609[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:36:56.282 INFO  com.aspect.LogAspect                              :80   [32m127675520715460608[0;39m 请求参数: []
2021-12-19 15:36:56.282 INFO  com.aspect.LogAspect                              :80   [32m127675520715460610[0;39m 请求参数: []
2021-12-19 15:36:56.282 INFO  com.aspect.LogAspect                              :80   [32m127675520715460609[0;39m 请求参数: []
2021-12-19 15:36:56.330 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127675520715460609[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:36:56.330 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127675520715460610[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:36:56.331 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127675520715460610[0;39m ==> Parameters: 
2021-12-19 15:36:56.331 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127675520715460609[0;39m ==> Parameters: 
2021-12-19 15:36:56.385 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127675520715460608[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:36:56.387 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127675520715460608[0;39m ==> Parameters: 
2021-12-19 15:36:56.410 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:36:56.410 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127675520715460610[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:36:56.411 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127675520715460610[0;39m <==        Row: 2021-12-19, 494, 167, 494, 167
2021-12-19 15:36:56.411 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:36:56.425 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127675520715460610[0;39m <==      Total: 1
2021-12-19 15:36:56.425 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:36:56.426 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:36:56.427 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:36:56.428 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:36:56.429 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:36:56.430 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675520715460609[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:36:56.431 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127675520715460609[0;39m <==      Total: 7
2021-12-19 15:36:56.437 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:36:56.437 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:36:56.438 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:36:56.439 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:36:56.439 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:36:56.440 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:36:56.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:36:56.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:36:56.442 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:36:56.443 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:36:56.443 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:36:56.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:36:56.445 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:36:56.445 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:36:56.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:36:56.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:36:56.447 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:36:56.449 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:36:56.449 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:36:56.450 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675520715460608[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:36:56.450 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127675520715460608[0;39m <==      Total: 19
2021-12-19 15:36:56.457 INFO  com.aspect.LogAspect                              :92   [32m127675520715460610[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":494,"viewIncrease":494,"voteCount":167,"voteIncrease":167}],"success":true}
2021-12-19 15:36:56.458 INFO  com.aspect.LogAspect                              :93   [32m127675520715460610[0;39m ------------- 结束 耗时：223 ms -------------
2021-12-19 15:36:56.462 INFO  com.aspect.LogAspect                              :92   [32m127675520715460609[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:36:56.462 INFO  com.aspect.LogAspect                              :93   [32m127675520715460609[0;39m ------------- 结束 耗时：227 ms -------------
2021-12-19 15:36:56.465 INFO  com.aspect.LogAspect                              :92   [32m127675520715460608[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:36:56.467 INFO  com.aspect.LogAspect                              :93   [32m127675520715460608[0;39m ------------- 结束 耗时：232 ms -------------
2021-12-19 15:37:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127675536553152512[0;39m 生成今日电子书快照开始
2021-12-19 15:37:00.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675536553152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:00.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675536553152512[0;39m ==> Parameters: 
2021-12-19 15:37:00.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675536553152512[0;39m <==    Updates: 0
2021-12-19 15:37:00.174 INFO  com.job.EbookSnapshotJob                          :35   [32m127675536553152512[0;39m 生成今日电子书快照结束，耗时：162毫秒
2021-12-19 15:37:05.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127675557516283904[0;39m 生成今日电子书快照开始
2021-12-19 15:37:05.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675557516283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:05.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675557516283904[0;39m ==> Parameters: 
2021-12-19 15:37:05.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675557516283904[0;39m <==    Updates: 0
2021-12-19 15:37:05.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127675557516283904[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 15:37:05.158 INFO  com.job.DocJob                                    :32   [32m127675558141235200[0;39m 更新电子书下的文档数据开始
2021-12-19 15:37:05.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675558141235200[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:37:05.164 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675558141235200[0;39m ==> Parameters: 
2021-12-19 15:37:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675558141235200[0;39m <==    Updates: 3
2021-12-19 15:37:05.255 INFO  com.job.DocJob                                    :35   [32m127675558141235200[0;39m 更新电子书下的文档数据结束，耗时：96毫秒
2021-12-19 15:37:07.618 INFO  com.aspect.LogAspect                              :54   [32m127675568459223040[0;39m ------------- 开始 -------------
2021-12-19 15:37:07.618 INFO  com.aspect.LogAspect                              :55   [32m127675568459223040[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:37:07.618 INFO  com.aspect.LogAspect                              :56   [32m127675568459223040[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:37:07.618 INFO  com.aspect.LogAspect                              :57   [32m127675568459223040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:07.633 INFO  com.aspect.LogAspect                              :80   [32m127675568459223040[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-19 15:37:07.766 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127675568459223040[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 15:37:07.766 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127675568459223040[0;39m ==> Parameters: 201(Long)
2021-12-19 15:37:07.813 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127675568459223040[0;39m <==    Columns: count(0)
2021-12-19 15:37:07.813 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127675568459223040[0;39m <==        Row: 0
2021-12-19 15:37:07.813 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127675568459223040[0;39m <==      Total: 1
2021-12-19 15:37:07.813 INFO  com.servicess.EbookService                        :48   [32m127675568459223040[0;39m 总行数：0
2021-12-19 15:37:07.813 INFO  com.servicess.EbookService                        :49   [32m127675568459223040[0;39m 总页数：0
2021-12-19 15:37:07.813 INFO  com.aspect.LogAspect                              :92   [32m127675568459223040[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-19 15:37:07.813 INFO  com.aspect.LogAspect                              :93   [32m127675568459223040[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-19 15:37:09.303 INFO  com.aspect.LogAspect                              :54   [32m127675575526625280[0;39m ------------- 开始 -------------
2021-12-19 15:37:09.305 INFO  com.aspect.LogAspect                              :55   [32m127675575526625280[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:37:09.305 INFO  com.aspect.LogAspect                              :56   [32m127675575526625280[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:37:09.305 INFO  com.aspect.LogAspect                              :57   [32m127675575526625280[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:09.307 INFO  com.aspect.LogAspect                              :80   [32m127675575526625280[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-19 15:37:09.359 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127675575526625280[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 15:37:09.359 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127675575526625280[0;39m ==> Parameters: 202(Long)
2021-12-19 15:37:09.410 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127675575526625280[0;39m <==    Columns: count(0)
2021-12-19 15:37:09.411 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127675575526625280[0;39m <==        Row: 1
2021-12-19 15:37:09.412 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127675575526625280[0;39m <==      Total: 1
2021-12-19 15:37:09.416 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127675575526625280[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 15:37:09.417 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127675575526625280[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-19 15:37:09.462 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127675575526625280[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:37:09.463 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127675575526625280[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 93, 16
2021-12-19 15:37:09.464 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127675575526625280[0;39m <==      Total: 1
2021-12-19 15:37:09.465 INFO  com.servicess.EbookService                        :48   [32m127675575526625280[0;39m 总行数：1
2021-12-19 15:37:09.465 INFO  com.servicess.EbookService                        :49   [32m127675575526625280[0;39m 总页数：1
2021-12-19 15:37:09.482 INFO  com.aspect.LogAspect                              :92   [32m127675575526625280[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":93,"voteCount":16}],"total":1},"success":true}
2021-12-19 15:37:09.483 INFO  com.aspect.LogAspect                              :93   [32m127675575526625280[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-19 15:37:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127675578475220992[0;39m 生成今日电子书快照开始
2021-12-19 15:37:10.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675578475220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:10.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675578475220992[0;39m ==> Parameters: 
2021-12-19 15:37:10.130 INFO  com.aspect.LogAspect                              :54   [32m127675578995314688[0;39m ------------- 开始 -------------
2021-12-19 15:37:10.130 INFO  com.aspect.LogAspect                              :55   [32m127675578995314688[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-19 15:37:10.130 INFO  com.aspect.LogAspect                              :56   [32m127675578995314688[0;39m 类名方法: com.controller.DocController.all
2021-12-19 15:37:10.131 INFO  com.aspect.LogAspect                              :57   [32m127675578995314688[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:10.131 INFO  com.aspect.LogAspect                              :80   [32m127675578995314688[0;39m 请求参数: [1]
2021-12-19 15:37:10.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675578475220992[0;39m <==    Updates: 0
2021-12-19 15:37:10.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127675578475220992[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 15:37:10.160 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127675578995314688[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-19 15:37:10.161 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127675578995314688[0;39m ==> Parameters: 1(Long)
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 13, 4
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 8, 2
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 14, 2
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 21, 4
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-19 15:37:10.202 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127675578995314688[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 13, 1
2021-12-19 15:37:10.202 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127675578995314688[0;39m <==      Total: 7
2021-12-19 15:37:10.202 INFO  com.aspect.LogAspect                              :92   [32m127675578995314688[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":13,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":8,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":21,"voteCount":4},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":13,"voteCount":1}],"success":true}
2021-12-19 15:37:10.202 INFO  com.aspect.LogAspect                              :93   [32m127675578995314688[0;39m ------------- 结束 耗时：72 ms -------------
2021-12-19 15:37:10.237 INFO  com.aspect.LogAspect                              :54   [32m127675579439910912[0;39m ------------- 开始 -------------
2021-12-19 15:37:10.237 INFO  com.aspect.LogAspect                              :55   [32m127675579439910912[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-19 15:37:10.237 INFO  com.aspect.LogAspect                              :56   [32m127675579439910912[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 15:37:10.238 INFO  com.aspect.LogAspect                              :57   [32m127675579439910912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:10.238 INFO  com.aspect.LogAspect                              :80   [32m127675579439910912[0;39m 请求参数: [119304585604108288]
2021-12-19 15:37:10.239 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127675579439910912[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 15:37:10.239 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127675579439910912[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 15:37:10.283 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127675579439910912[0;39m <==    Columns: id, content
2021-12-19 15:37:10.283 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127675579439910912[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-19 15:37:10.284 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127675579439910912[0;39m <==      Total: 1
2021-12-19 15:37:10.285 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127675579439910912[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 15:37:10.286 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127675579439910912[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 15:37:10.370 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127675579439910912[0;39m <==    Updates: 1
2021-12-19 15:37:10.386 INFO  com.aspect.LogAspect                              :92   [32m127675579439910912[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-19 15:37:10.387 INFO  com.aspect.LogAspect                              :93   [32m127675579439910912[0;39m ------------- 结束 耗时：151 ms -------------
2021-12-19 15:37:11.866 INFO  com.aspect.LogAspect                              :54   [32m127675586276626432[0;39m ------------- 开始 -------------
2021-12-19 15:37:11.866 INFO  com.aspect.LogAspect                              :55   [32m127675586276626432[0;39m 请求地址: http://localhost:8081/doc/vote/119304585604108288 GET
2021-12-19 15:37:11.866 INFO  com.aspect.LogAspect                              :56   [32m127675586276626432[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 15:37:11.866 INFO  com.aspect.LogAspect                              :57   [32m127675586276626432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:11.867 INFO  com.aspect.LogAspect                              :80   [32m127675586276626432[0;39m 请求参数: [119304585604108288]
2021-12-19 15:37:12.922 INFO  com.Util.RedisUtil                                :31   [32m127675586276626432[0;39m key不存在，放入：DOC_VOTE_119304585604108288_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 15:37:12.985 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127675586276626432[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 15:37:12.985 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127675586276626432[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 15:37:13.075 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127675586276626432[0;39m <==    Updates: 1
2021-12-19 15:37:13.076 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127675586276626432[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 15:37:13.076 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127675586276626432[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 15:37:13.119 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127675586276626432[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 15:37:13.119 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127675586276626432[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 22, 5
2021-12-19 15:37:13.120 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127675586276626432[0;39m <==      Total: 1
2021-12-19 15:37:13.124 INFO  com.aspect.LogAspect                              :92   [32m127675586276626432[0;39m 返回结果: {"success":true}
2021-12-19 15:37:13.124 INFO  com.aspect.LogAspect                              :93   [32m127675586276626432[0;39m ------------- 结束 耗时：1258 ms -------------
2021-12-19 15:37:13.158 INFO  com.websocket.WebSocketServer                     :71   [32m127675586276626432[0;39m 推送消息：K5iTd5pdOl，内容：【Ant Design of Vue】被点赞！
2021-12-19 15:37:13.213 INFO  com.aspect.LogAspect                              :54   [32m127675591926353920[0;39m ------------- 开始 -------------
2021-12-19 15:37:13.213 INFO  com.aspect.LogAspect                              :55   [32m127675591926353920[0;39m 请求地址: http://localhost:8081/doc/find-content/118617791401168896 GET
2021-12-19 15:37:13.213 INFO  com.aspect.LogAspect                              :56   [32m127675591926353920[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 15:37:13.214 INFO  com.aspect.LogAspect                              :57   [32m127675591926353920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:13.214 INFO  com.aspect.LogAspect                              :80   [32m127675591926353920[0;39m 请求参数: [118617791401168896]
2021-12-19 15:37:13.214 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127675591926353920[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 15:37:13.215 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127675591926353920[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-19 15:37:13.259 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127675591926353920[0;39m <==      Total: 0
2021-12-19 15:37:13.260 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127675591926353920[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 15:37:13.260 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127675591926353920[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-19 15:37:13.347 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127675591926353920[0;39m <==    Updates: 1
2021-12-19 15:37:13.347 INFO  com.aspect.LogAspect                              :92   [32m127675591926353920[0;39m 返回结果: {"content":"","success":true}
2021-12-19 15:37:13.347 INFO  com.aspect.LogAspect                              :93   [32m127675591926353920[0;39m ------------- 结束 耗时：134 ms -------------
2021-12-19 15:37:14.273 INFO  com.aspect.LogAspect                              :54   [32m127675596372316160[0;39m ------------- 开始 -------------
2021-12-19 15:37:14.274 INFO  com.aspect.LogAspect                              :55   [32m127675596372316160[0;39m 请求地址: http://localhost:8081/doc/vote/118617791401168896 GET
2021-12-19 15:37:14.274 INFO  com.aspect.LogAspect                              :56   [32m127675596372316160[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 15:37:14.274 INFO  com.aspect.LogAspect                              :57   [32m127675596372316160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:14.274 INFO  com.aspect.LogAspect                              :80   [32m127675596372316160[0;39m 请求参数: [118617791401168896]
2021-12-19 15:37:14.298 INFO  com.Util.RedisUtil                                :31   [32m127675596372316160[0;39m key不存在，放入：DOC_VOTE_118617791401168896_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 15:37:14.357 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127675596372316160[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 15:37:14.358 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127675596372316160[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-19 15:37:14.445 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127675596372316160[0;39m <==    Updates: 1
2021-12-19 15:37:14.445 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127675596372316160[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 15:37:14.446 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127675596372316160[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-19 15:37:14.488 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127675596372316160[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 15:37:14.490 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127675596372316160[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 15, 3
2021-12-19 15:37:14.491 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127675596372316160[0;39m <==      Total: 1
2021-12-19 15:37:14.493 INFO  com.aspect.LogAspect                              :92   [32m127675596372316160[0;39m 返回结果: {"success":true}
2021-12-19 15:37:14.493 INFO  com.aspect.LogAspect                              :93   [32m127675596372316160[0;39m ------------- 结束 耗时：220 ms -------------
2021-12-19 15:37:14.493 INFO  com.websocket.WebSocketServer                     :71   [32m127675596372316160[0;39m 推送消息：K5iTd5pdOl，内容：【文档2.2.1】被点赞！
2021-12-19 15:37:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127675599471906816[0;39m 生成今日电子书快照开始
2021-12-19 15:37:15.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675599471906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675599471906816[0;39m ==> Parameters: 
2021-12-19 15:37:15.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675599471906816[0;39m <==    Updates: 0
2021-12-19 15:37:15.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127675599471906816[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:37:15.735 INFO  com.aspect.LogAspect                              :54   [32m127675602504388608[0;39m ------------- 开始 -------------
2021-12-19 15:37:15.735 INFO  com.aspect.LogAspect                              :55   [32m127675602504388608[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:37:15.735 INFO  com.aspect.LogAspect                              :56   [32m127675602504388608[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:37:15.736 INFO  com.aspect.LogAspect                              :57   [32m127675602504388608[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:15.736 INFO  com.aspect.LogAspect                              :80   [32m127675602504388608[0;39m 请求参数: []
2021-12-19 15:37:15.736 INFO  com.aspect.LogAspect                              :54   [32m127675602508582912[0;39m ------------- 开始 -------------
2021-12-19 15:37:15.736 INFO  com.aspect.LogAspect                              :55   [32m127675602508582912[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:37:15.737 INFO  com.aspect.LogAspect                              :56   [32m127675602508582912[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:37:15.737 INFO  com.aspect.LogAspect                              :57   [32m127675602508582912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:15.737 INFO  com.aspect.LogAspect                              :80   [32m127675602508582912[0;39m 请求参数: []
2021-12-19 15:37:15.738 INFO  com.aspect.LogAspect                              :54   [32m127675602516971520[0;39m ------------- 开始 -------------
2021-12-19 15:37:15.738 INFO  com.aspect.LogAspect                              :55   [32m127675602516971520[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:37:15.739 INFO  com.aspect.LogAspect                              :56   [32m127675602516971520[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:37:15.739 INFO  com.aspect.LogAspect                              :57   [32m127675602516971520[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:37:15.739 INFO  com.aspect.LogAspect                              :80   [32m127675602516971520[0;39m 请求参数: []
2021-12-19 15:37:15.780 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127675602504388608[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:37:15.780 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127675602508582912[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:37:15.780 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127675602516971520[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:37:15.781 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127675602508582912[0;39m ==> Parameters: 
2021-12-19 15:37:15.781 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127675602504388608[0;39m ==> Parameters: 
2021-12-19 15:37:15.781 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127675602516971520[0;39m ==> Parameters: 
2021-12-19 15:37:15.815 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127675602504388608[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:37:15.815 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:37:15.815 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127675602504388608[0;39m <==        Row: 2021-12-19, 494, 167, 494, 167
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:37:15.827 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127675602504388608[0;39m <==      Total: 1
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:37:15.827 INFO  com.aspect.LogAspect                              :92   [32m127675602504388608[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":494,"viewIncrease":494,"voteCount":167,"voteIncrease":167}],"success":true}
2021-12-19 15:37:15.827 INFO  com.aspect.LogAspect                              :93   [32m127675602504388608[0;39m ------------- 结束 耗时：92 ms -------------
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:37:15.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127675602508582912[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:37:15.827 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127675602508582912[0;39m <==      Total: 7
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:37:15.827 INFO  com.aspect.LogAspect                              :92   [32m127675602508582912[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:37:15.827 INFO  com.aspect.LogAspect                              :93   [32m127675602508582912[0;39m ------------- 结束 耗时：91 ms -------------
2021-12-19 15:37:15.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127675602516971520[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:37:15.827 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127675602516971520[0;39m <==      Total: 19
2021-12-19 15:37:15.827 INFO  com.aspect.LogAspect                              :92   [32m127675602516971520[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:37:15.827 INFO  com.aspect.LogAspect                              :93   [32m127675602516971520[0;39m ------------- 结束 耗时：89 ms -------------
2021-12-19 15:37:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127675620422455296[0;39m 生成今日电子书快照开始
2021-12-19 15:37:20.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675620422455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675620422455296[0;39m ==> Parameters: 
2021-12-19 15:37:20.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675620422455296[0;39m <==    Updates: 0
2021-12-19 15:37:20.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127675620422455296[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:37:25.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127675641393975296[0;39m 生成今日电子书快照开始
2021-12-19 15:37:25.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675641393975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:25.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675641393975296[0;39m ==> Parameters: 
2021-12-19 15:37:25.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675641393975296[0;39m <==    Updates: 0
2021-12-19 15:37:25.148 INFO  com.job.EbookSnapshotJob                          :35   [32m127675641393975296[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:37:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127675662357106688[0;39m 生成今日电子书快照开始
2021-12-19 15:37:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675662357106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:30.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675662357106688[0;39m ==> Parameters: 
2021-12-19 15:37:30.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675662357106688[0;39m <==    Updates: 0
2021-12-19 15:37:30.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127675662357106688[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 15:37:35.015 INFO  com.job.DocJob                                    :32   [32m127675683370569728[0;39m 更新电子书下的文档数据开始
2021-12-19 15:37:35.046 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675683370569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:37:35.046 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675683370569728[0;39m ==> Parameters: 
2021-12-19 15:37:35.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675683370569728[0;39m <==    Updates: 3
2021-12-19 15:37:35.159 INFO  com.job.DocJob                                    :35   [32m127675683370569728[0;39m 更新电子书下的文档数据结束，耗时：144毫秒
2021-12-19 15:37:35.159 INFO  com.job.EbookSnapshotJob                          :32   [32m127675683974549504[0;39m 生成今日电子书快照开始
2021-12-19 15:37:35.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675683974549504[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:35.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675683974549504[0;39m ==> Parameters: 
2021-12-19 15:37:35.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675683974549504[0;39m <==    Updates: 0
2021-12-19 15:37:35.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127675683974549504[0;39m 生成今日电子书快照结束，耗时：93毫秒
2021-12-19 15:37:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127675704329506816[0;39m 生成今日电子书快照开始
2021-12-19 15:37:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675704329506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675704329506816[0;39m ==> Parameters: 
2021-12-19 15:37:40.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675704329506816[0;39m <==    Updates: 0
2021-12-19 15:37:40.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127675704329506816[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 15:37:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127675725338775552[0;39m 生成今日电子书快照开始
2021-12-19 15:37:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675725338775552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675725338775552[0;39m ==> Parameters: 
2021-12-19 15:37:45.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675725338775552[0;39m <==    Updates: 0
2021-12-19 15:37:45.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127675725338775552[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:37:50.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127675746335461376[0;39m 生成今日电子书快照开始
2021-12-19 15:37:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675746335461376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675746335461376[0;39m ==> Parameters: 
2021-12-19 15:37:50.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675746335461376[0;39m <==    Updates: 0
2021-12-19 15:37:50.168 INFO  com.job.EbookSnapshotJob                          :35   [32m127675746335461376[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:37:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127675767256649728[0;39m 生成今日电子书快照开始
2021-12-19 15:37:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675767256649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:37:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675767256649728[0;39m ==> Parameters: 
2021-12-19 15:37:55.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675767256649728[0;39m <==    Updates: 0
2021-12-19 15:37:55.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127675767256649728[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 15:38:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127675788253335552[0;39m 生成今日电子书快照开始
2021-12-19 15:38:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675788253335552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675788253335552[0;39m ==> Parameters: 
2021-12-19 15:38:00.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675788253335552[0;39m <==    Updates: 0
2021-12-19 15:38:00.166 INFO  com.job.EbookSnapshotJob                          :35   [32m127675788253335552[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 15:38:04.999 INFO  com.job.EbookSnapshotJob                          :32   [32m127675809132580864[0;39m 生成今日电子书快照开始
2021-12-19 15:38:05.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675809132580864[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:05.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675809132580864[0;39m ==> Parameters: 
2021-12-19 15:38:05.207 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675809132580864[0;39m <==    Updates: 0
2021-12-19 15:38:05.207 INFO  com.job.EbookSnapshotJob                          :35   [32m127675809132580864[0;39m 生成今日电子书快照结束，耗时：208毫秒
2021-12-19 15:38:05.207 INFO  com.job.DocJob                                    :32   [32m127675810004996096[0;39m 更新电子书下的文档数据开始
2021-12-19 15:38:05.207 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675810004996096[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:38:05.207 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675810004996096[0;39m ==> Parameters: 
2021-12-19 15:38:05.285 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675810004996096[0;39m <==    Updates: 3
2021-12-19 15:38:05.285 INFO  com.job.DocJob                                    :35   [32m127675810004996096[0;39m 更新电子书下的文档数据结束，耗时：78毫秒
2021-12-19 15:38:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127675830162821120[0;39m 生成今日电子书快照开始
2021-12-19 15:38:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675830162821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675830162821120[0;39m ==> Parameters: 
2021-12-19 15:38:10.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675830162821120[0;39m <==    Updates: 0
2021-12-19 15:38:10.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127675830162821120[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 15:38:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127675851138535424[0;39m 生成今日电子书快照开始
2021-12-19 15:38:15.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675851138535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:15.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675851138535424[0;39m ==> Parameters: 
2021-12-19 15:38:15.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675851138535424[0;39m <==    Updates: 0
2021-12-19 15:38:15.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127675851138535424[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 15:38:20.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127675872076500992[0;39m 生成今日电子书快照开始
2021-12-19 15:38:20.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675872076500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:20.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675872076500992[0;39m ==> Parameters: 
2021-12-19 15:38:20.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675872076500992[0;39m <==    Updates: 0
2021-12-19 15:38:20.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127675872076500992[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 15:38:25.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127675893102546944[0;39m 生成今日电子书快照开始
2021-12-19 15:38:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675893102546944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675893102546944[0;39m ==> Parameters: 
2021-12-19 15:38:25.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675893102546944[0;39m <==    Updates: 0
2021-12-19 15:38:25.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127675893102546944[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:38:30.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127675914086649856[0;39m 生成今日电子书快照开始
2021-12-19 15:38:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675914086649856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675914086649856[0;39m ==> Parameters: 
2021-12-19 15:38:30.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675914086649856[0;39m <==    Updates: 0
2021-12-19 15:38:30.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127675914086649856[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:38:35.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127675935028809728[0;39m 生成今日电子书快照开始
2021-12-19 15:38:35.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675935028809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:35.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675935028809728[0;39m ==> Parameters: 
2021-12-19 15:38:35.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675935028809728[0;39m <==    Updates: 0
2021-12-19 15:38:35.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127675935028809728[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 15:38:35.144 INFO  com.job.DocJob                                    :32   [32m127675935569874944[0;39m 更新电子书下的文档数据开始
2021-12-19 15:38:35.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675935569874944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:38:35.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675935569874944[0;39m ==> Parameters: 
2021-12-19 15:38:35.244 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127675935569874944[0;39m <==    Updates: 3
2021-12-19 15:38:35.244 INFO  com.job.DocJob                                    :35   [32m127675935569874944[0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2021-12-19 15:38:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127675956000329728[0;39m 生成今日电子书快照开始
2021-12-19 15:38:40.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675956000329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:40.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675956000329728[0;39m ==> Parameters: 
2021-12-19 15:38:40.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675956000329728[0;39m <==    Updates: 0
2021-12-19 15:38:40.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127675956000329728[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 15:38:45.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127675976971849728[0;39m 生成今日电子书快照开始
2021-12-19 15:38:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675976971849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675976971849728[0;39m ==> Parameters: 
2021-12-19 15:38:45.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675976971849728[0;39m <==    Updates: 0
2021-12-19 15:38:45.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127675976971849728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:38:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127675997926592512[0;39m 生成今日电子书快照开始
2021-12-19 15:38:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675997926592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675997926592512[0;39m ==> Parameters: 
2021-12-19 15:38:50.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127675997926592512[0;39m <==    Updates: 0
2021-12-19 15:38:50.137 INFO  com.job.EbookSnapshotJob                          :35   [32m127675997926592512[0;39m 生成今日电子书快照结束，耗时：126毫秒
2021-12-19 15:38:55.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127676018973609984[0;39m 生成今日电子书快照开始
2021-12-19 15:38:55.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676018973609984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:38:55.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676018973609984[0;39m ==> Parameters: 
2021-12-19 15:38:55.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676018973609984[0;39m <==    Updates: 0
2021-12-19 15:38:55.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127676018973609984[0;39m 生成今日电子书快照结束，耗时：192毫秒
2021-12-19 15:39:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127676039911575552[0;39m 生成今日电子书快照开始
2021-12-19 15:39:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676039911575552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676039911575552[0;39m ==> Parameters: 
2021-12-19 15:39:00.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676039911575552[0;39m <==    Updates: 0
2021-12-19 15:39:00.170 INFO  com.job.EbookSnapshotJob                          :35   [32m127676039911575552[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :54   [32m127676049273262080[0;39m ------------- 开始 -------------
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :55   [32m127676049273262080[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :56   [32m127676049273262080[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :57   [32m127676049273262080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :80   [32m127676049273262080[0;39m 请求参数: []
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :54   [32m127676049273262081[0;39m ------------- 开始 -------------
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :55   [32m127676049273262081[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :56   [32m127676049273262081[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :57   [32m127676049273262081[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:02.253 INFO  com.aspect.LogAspect                              :80   [32m127676049273262081[0;39m 请求参数: []
2021-12-19 15:39:02.284 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676049273262080[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:02.284 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676049273262080[0;39m ==> Parameters: 
2021-12-19 15:39:02.300 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676049273262081[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:02.300 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676049273262081[0;39m ==> Parameters: 
2021-12-19 15:39:02.378 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:39:02.378 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676049273262080[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:39:02.378 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:39:02.378 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676049273262080[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:39:02.384 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676049273262080[0;39m <==      Total: 1
2021-12-19 15:39:02.384 INFO  com.aspect.LogAspect                              :92   [32m127676049273262080[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:39:02.384 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:39:02.384 INFO  com.aspect.LogAspect                              :93   [32m127676049273262080[0;39m ------------- 结束 耗时：131 ms -------------
2021-12-19 15:39:02.384 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:39:02.384 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:39:02.384 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:39:02.384 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:39:02.384 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676049273262081[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:39:02.384 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676049273262081[0;39m <==      Total: 7
2021-12-19 15:39:02.384 INFO  com.aspect.LogAspect                              :92   [32m127676049273262081[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:39:02.384 INFO  com.aspect.LogAspect                              :93   [32m127676049273262081[0;39m ------------- 结束 耗时：131 ms -------------
2021-12-19 15:39:05.015 INFO  com.job.DocJob                                    :32   [32m127676060857929728[0;39m 更新电子书下的文档数据开始
2021-12-19 15:39:05.071 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676060857929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:39:05.072 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676060857929728[0;39m ==> Parameters: 
2021-12-19 15:39:05.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676060857929728[0;39m <==    Updates: 3
2021-12-19 15:39:05.173 INFO  com.job.DocJob                                    :35   [32m127676060857929728[0;39m 更新电子书下的文档数据结束，耗时：158毫秒
2021-12-19 15:39:05.173 INFO  com.job.EbookSnapshotJob                          :32   [32m127676061520629760[0;39m 生成今日电子书快照开始
2021-12-19 15:39:05.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676061520629760[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:05.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676061520629760[0;39m ==> Parameters: 
2021-12-19 15:39:05.299 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676061520629760[0;39m <==    Updates: 0
2021-12-19 15:39:05.299 INFO  com.job.EbookSnapshotJob                          :35   [32m127676061520629760[0;39m 生成今日电子书快照结束，耗时：126毫秒
2021-12-19 15:39:05.691 INFO  com.websocket.WebSocketServer                     :41   [32m127675591926353920[0;39m 连接关闭，token：K5iTd5pdOl，session id：0！当前连接数：0
2021-12-19 15:39:06.758 INFO  com.websocket.WebSocketServer                     :32   [32m127675596372316160[0;39m 有新连接：token：Wg5Cvh5RFT，session id：1，当前连接数：1
2021-12-19 15:39:06.825 INFO  com.aspect.LogAspect                              :54   [32m127676068449619968[0;39m ------------- 开始 -------------
2021-12-19 15:39:06.825 INFO  com.aspect.LogAspect                              :55   [32m127676068449619968[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:39:06.825 INFO  com.aspect.LogAspect                              :56   [32m127676068449619968[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:39:06.826 INFO  com.aspect.LogAspect                              :57   [32m127676068449619968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:06.826 INFO  com.aspect.LogAspect                              :80   [32m127676068449619968[0;39m 请求参数: []
2021-12-19 15:39:06.829 INFO  com.aspect.LogAspect                              :54   [32m127676068466397184[0;39m ------------- 开始 -------------
2021-12-19 15:39:06.829 INFO  com.aspect.LogAspect                              :55   [32m127676068466397184[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:39:06.830 INFO  com.aspect.LogAspect                              :56   [32m127676068466397184[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:39:06.830 INFO  com.aspect.LogAspect                              :57   [32m127676068466397184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:06.830 INFO  com.aspect.LogAspect                              :80   [32m127676068466397184[0;39m 请求参数: []
2021-12-19 15:39:06.833 INFO  com.aspect.LogAspect                              :54   [32m127676068483174400[0;39m ------------- 开始 -------------
2021-12-19 15:39:06.834 INFO  com.aspect.LogAspect                              :55   [32m127676068483174400[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:39:06.834 INFO  com.aspect.LogAspect                              :56   [32m127676068483174400[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:39:06.834 INFO  com.aspect.LogAspect                              :57   [32m127676068483174400[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:06.834 INFO  com.aspect.LogAspect                              :80   [32m127676068483174400[0;39m 请求参数: []
2021-12-19 15:39:06.871 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676068449619968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:06.872 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676068449619968[0;39m ==> Parameters: 
2021-12-19 15:39:06.873 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676068466397184[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:06.874 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676068466397184[0;39m ==> Parameters: 
2021-12-19 15:39:06.879 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676068483174400[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:39:06.880 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676068483174400[0;39m ==> Parameters: 
2021-12-19 15:39:06.917 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676068449619968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:39:06.918 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676068449619968[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:39:06.920 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676068449619968[0;39m <==      Total: 1
2021-12-19 15:39:06.921 INFO  com.aspect.LogAspect                              :92   [32m127676068449619968[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:39:06.921 INFO  com.aspect.LogAspect                              :93   [32m127676068449619968[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-19 15:39:06.922 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:39:06.923 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:39:06.924 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:39:06.926 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:39:06.927 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:39:06.927 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:39:06.928 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:39:06.929 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676068466397184[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:39:06.930 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676068466397184[0;39m <==      Total: 7
2021-12-19 15:39:06.930 INFO  com.aspect.LogAspect                              :92   [32m127676068466397184[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:39:06.931 INFO  com.aspect.LogAspect                              :93   [32m127676068466397184[0;39m ------------- 结束 耗时：102 ms -------------
2021-12-19 15:39:06.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:39:06.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:39:06.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:39:06.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:39:06.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:39:06.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:39:06.935 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:39:06.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:39:06.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:39:06.938 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:39:06.938 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:39:06.939 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:39:06.940 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:39:06.940 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:39:06.941 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:39:06.941 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:39:06.941 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:39:06.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:39:06.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:39:06.943 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676068483174400[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:39:06.943 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676068483174400[0;39m <==      Total: 19
2021-12-19 15:39:06.945 INFO  com.aspect.LogAspect                              :92   [32m127676068483174400[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:39:06.945 INFO  com.aspect.LogAspect                              :93   [32m127676068483174400[0;39m ------------- 结束 耗时：112 ms -------------
2021-12-19 15:39:10.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127676081837838336[0;39m 生成今日电子书快照开始
2021-12-19 15:39:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676081837838336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676081837838336[0;39m ==> Parameters: 
2021-12-19 15:39:10.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676081837838336[0;39m <==    Updates: 0
2021-12-19 15:39:10.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127676081837838336[0;39m 生成今日电子书快照结束，耗时：137毫秒
2021-12-19 15:39:10.322 INFO  com.websocket.WebSocketServer                     :41   [32m127675568459223040[0;39m 连接关闭，token：Wg5Cvh5RFT，session id：1！当前连接数：0
2021-12-19 15:39:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127676102754832384[0;39m 生成今日电子书快照开始
2021-12-19 15:39:15.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676102754832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:15.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676102754832384[0;39m ==> Parameters: 
2021-12-19 15:39:15.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676102754832384[0;39m <==    Updates: 0
2021-12-19 15:39:15.141 INFO  com.job.EbookSnapshotJob                          :35   [32m127676102754832384[0;39m 生成今日电子书快照结束，耗时：137毫秒
2021-12-19 15:39:16.374 INFO  com.websocket.WebSocketServer                     :32   [32m127676049273262081[0;39m 有新连接：token：doPLVJaqv1，session id：2，当前连接数：1
2021-12-19 15:39:16.623 INFO  com.aspect.LogAspect                              :54   [32m127676109545410560[0;39m ------------- 开始 -------------
2021-12-19 15:39:16.623 INFO  com.aspect.LogAspect                              :55   [32m127676109545410560[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:39:16.623 INFO  com.aspect.LogAspect                              :56   [32m127676109545410560[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:39:16.624 INFO  com.aspect.LogAspect                              :57   [32m127676109545410560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:16.624 INFO  com.aspect.LogAspect                              :80   [32m127676109545410560[0;39m 请求参数: []
2021-12-19 15:39:16.627 INFO  com.aspect.LogAspect                              :54   [32m127676109562187776[0;39m ------------- 开始 -------------
2021-12-19 15:39:16.628 INFO  com.aspect.LogAspect                              :55   [32m127676109562187776[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:39:16.628 INFO  com.aspect.LogAspect                              :56   [32m127676109562187776[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:39:16.629 INFO  com.aspect.LogAspect                              :57   [32m127676109562187776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:16.629 INFO  com.aspect.LogAspect                              :80   [32m127676109562187776[0;39m 请求参数: []
2021-12-19 15:39:16.632 INFO  com.aspect.LogAspect                              :54   [32m127676109583159296[0;39m ------------- 开始 -------------
2021-12-19 15:39:16.632 INFO  com.aspect.LogAspect                              :55   [32m127676109583159296[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:39:16.633 INFO  com.aspect.LogAspect                              :56   [32m127676109583159296[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:39:16.633 INFO  com.aspect.LogAspect                              :57   [32m127676109583159296[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:16.633 INFO  com.aspect.LogAspect                              :80   [32m127676109583159296[0;39m 请求参数: []
2021-12-19 15:39:16.666 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676109545410560[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:16.667 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676109545410560[0;39m ==> Parameters: 
2021-12-19 15:39:16.672 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676109562187776[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:16.673 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676109562187776[0;39m ==> Parameters: 
2021-12-19 15:39:16.677 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676109583159296[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:39:16.678 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676109583159296[0;39m ==> Parameters: 
2021-12-19 15:39:16.709 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676109545410560[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:39:16.710 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676109545410560[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:39:16.711 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676109545410560[0;39m <==      Total: 1
2021-12-19 15:39:16.711 INFO  com.aspect.LogAspect                              :92   [32m127676109545410560[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:39:16.711 INFO  com.aspect.LogAspect                              :93   [32m127676109545410560[0;39m ------------- 结束 耗时：88 ms -------------
2021-12-19 15:39:16.715 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:39:16.716 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:39:16.717 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:39:16.718 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:39:16.719 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:39:16.720 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:39:16.721 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:39:16.722 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676109562187776[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:39:16.723 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676109562187776[0;39m <==      Total: 7
2021-12-19 15:39:16.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:39:16.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:39:16.724 INFO  com.aspect.LogAspect                              :92   [32m127676109562187776[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:39:16.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:39:16.724 INFO  com.aspect.LogAspect                              :93   [32m127676109562187776[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-19 15:39:16.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:39:16.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:39:16.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:39:16.726 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:39:16.726 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:39:16.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:39:16.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:39:16.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:39:16.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:39:16.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:39:16.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:39:16.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:39:16.731 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:39:16.732 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:39:16.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:39:16.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:39:16.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676109583159296[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:39:16.735 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676109583159296[0;39m <==      Total: 19
2021-12-19 15:39:16.736 INFO  com.aspect.LogAspect                              :92   [32m127676109583159296[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:39:16.737 INFO  com.aspect.LogAspect                              :93   [32m127676109583159296[0;39m ------------- 结束 耗时：105 ms -------------
2021-12-19 15:39:20.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127676123734740992[0;39m 生成今日电子书快照开始
2021-12-19 15:39:20.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676123734740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:20.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676123734740992[0;39m ==> Parameters: 
2021-12-19 15:39:20.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676123734740992[0;39m <==    Updates: 0
2021-12-19 15:39:20.139 INFO  com.job.EbookSnapshotJob                          :35   [32m127676123734740992[0;39m 生成今日电子书快照结束，耗时：133毫秒
2021-12-19 15:39:20.907 INFO  com.websocket.WebSocketServer                     :41   [32m127676068466397184[0;39m 连接关闭，token：doPLVJaqv1，session id：2！当前连接数：0
2021-12-19 15:39:25.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127676144681095168[0;39m 生成今日电子书快照开始
2021-12-19 15:39:25.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676144681095168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:25.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676144681095168[0;39m ==> Parameters: 
2021-12-19 15:39:25.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676144681095168[0;39m <==    Updates: 0
2021-12-19 15:39:25.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127676144681095168[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 15:39:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127676165715529728[0;39m 生成今日电子书快照开始
2021-12-19 15:39:30.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676165715529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:30.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676165715529728[0;39m ==> Parameters: 
2021-12-19 15:39:30.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676165715529728[0;39m <==    Updates: 0
2021-12-19 15:39:30.145 INFO  com.job.EbookSnapshotJob                          :35   [32m127676165715529728[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 15:39:35.013 INFO  com.job.DocJob                                    :32   [32m127676186678661120[0;39m 更新电子书下的文档数据开始
2021-12-19 15:39:35.080 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676186678661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:39:35.080 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676186678661120[0;39m ==> Parameters: 
2021-12-19 15:39:35.174 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676186678661120[0;39m <==    Updates: 3
2021-12-19 15:39:35.174 INFO  com.job.DocJob                                    :35   [32m127676186678661120[0;39m 更新电子书下的文档数据结束，耗时：161毫秒
2021-12-19 15:39:35.174 INFO  com.job.EbookSnapshotJob                          :32   [32m127676187353944064[0;39m 生成今日电子书快照开始
2021-12-19 15:39:35.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676187353944064[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:35.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676187353944064[0;39m ==> Parameters: 
2021-12-19 15:39:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676187353944064[0;39m <==    Updates: 0
2021-12-19 15:39:35.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127676187353944064[0;39m 生成今日电子书快照结束，耗时：93毫秒
2021-12-19 15:39:38.459 INFO  com.websocket.WebSocketServer                     :32   [32m127675578995314688[0;39m 有新连接：token：AmXSwbtRvI，session id：3，当前连接数：1
2021-12-19 15:39:38.701 INFO  com.aspect.LogAspect                              :54   [32m127676202147254272[0;39m ------------- 开始 -------------
2021-12-19 15:39:38.701 INFO  com.aspect.LogAspect                              :55   [32m127676202147254272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:39:38.701 INFO  com.aspect.LogAspect                              :56   [32m127676202147254272[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:39:38.702 INFO  com.aspect.LogAspect                              :57   [32m127676202147254272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:38.702 INFO  com.aspect.LogAspect                              :80   [32m127676202147254272[0;39m 请求参数: []
2021-12-19 15:39:38.704 INFO  com.aspect.LogAspect                              :54   [32m127676202159837184[0;39m ------------- 开始 -------------
2021-12-19 15:39:38.705 INFO  com.aspect.LogAspect                              :55   [32m127676202159837184[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:39:38.705 INFO  com.aspect.LogAspect                              :56   [32m127676202159837184[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:39:38.706 INFO  com.aspect.LogAspect                              :57   [32m127676202159837184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:38.706 INFO  com.aspect.LogAspect                              :80   [32m127676202159837184[0;39m 请求参数: []
2021-12-19 15:39:38.707 INFO  com.aspect.LogAspect                              :54   [32m127676202172420096[0;39m ------------- 开始 -------------
2021-12-19 15:39:38.707 INFO  com.aspect.LogAspect                              :55   [32m127676202172420096[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:39:38.707 INFO  com.aspect.LogAspect                              :56   [32m127676202172420096[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:39:38.708 INFO  com.aspect.LogAspect                              :57   [32m127676202172420096[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:39:38.708 INFO  com.aspect.LogAspect                              :80   [32m127676202172420096[0;39m 请求参数: []
2021-12-19 15:39:38.755 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676202172420096[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:39:38.755 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676202159837184[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:38.755 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676202147254272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:39:38.755 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676202147254272[0;39m ==> Parameters: 
2021-12-19 15:39:38.755 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676202172420096[0;39m ==> Parameters: 
2021-12-19 15:39:38.755 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676202159837184[0;39m ==> Parameters: 
2021-12-19 15:39:38.812 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:39:38.812 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:39:38.812 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676202147254272[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:39:38.812 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:39:38.813 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676202147254272[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:39:38.813 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:39:38.813 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:39:38.813 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676202147254272[0;39m <==      Total: 1
2021-12-19 15:39:38.813 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:39:38.813 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:39:38.813 INFO  com.aspect.LogAspect                              :92   [32m127676202147254272[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:39:38.813 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:39:38.814 INFO  com.aspect.LogAspect                              :93   [32m127676202147254272[0;39m ------------- 结束 耗时：113 ms -------------
2021-12-19 15:39:38.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:39:38.814 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:39:38.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:39:38.814 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:39:38.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:39:38.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:39:38.815 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:39:38.815 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:39:38.815 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:39:38.815 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:39:38.815 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:39:38.816 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:39:38.816 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676202159837184[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:39:38.816 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:39:38.816 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676202159837184[0;39m <==      Total: 7
2021-12-19 15:39:38.816 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:39:38.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:39:38.817 INFO  com.aspect.LogAspect                              :92   [32m127676202159837184[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:39:38.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:39:38.817 INFO  com.aspect.LogAspect                              :93   [32m127676202159837184[0;39m ------------- 结束 耗时：113 ms -------------
2021-12-19 15:39:38.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:39:38.818 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:39:38.818 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676202172420096[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:39:38.818 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676202172420096[0;39m <==      Total: 19
2021-12-19 15:39:38.820 INFO  com.aspect.LogAspect                              :92   [32m127676202172420096[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:39:38.821 INFO  com.aspect.LogAspect                              :93   [32m127676202172420096[0;39m ------------- 结束 耗时：114 ms -------------
2021-12-19 15:39:40.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127676207625015296[0;39m 生成今日电子书快照开始
2021-12-19 15:39:40.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676207625015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:40.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676207625015296[0;39m ==> Parameters: 
2021-12-19 15:39:40.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676207625015296[0;39m <==    Updates: 0
2021-12-19 15:39:40.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127676207625015296[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 15:39:42.969 INFO  com.websocket.WebSocketServer                     :41   [32m127676109562187776[0;39m 连接关闭，token：AmXSwbtRvI，session id：3！当前连接数：0
2021-12-19 15:39:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127676228621701120[0;39m 生成今日电子书快照开始
2021-12-19 15:39:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676228621701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676228621701120[0;39m ==> Parameters: 
2021-12-19 15:39:45.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676228621701120[0;39m <==    Updates: 0
2021-12-19 15:39:45.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127676228621701120[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 15:39:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127676249589026816[0;39m 生成今日电子书快照开始
2021-12-19 15:39:50.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676249589026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:50.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676249589026816[0;39m ==> Parameters: 
2021-12-19 15:39:50.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676249589026816[0;39m <==    Updates: 0
2021-12-19 15:39:50.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127676249589026816[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:39:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127676270573129728[0;39m 生成今日电子书快照开始
2021-12-19 15:39:55.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676270573129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:39:55.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676270573129728[0;39m ==> Parameters: 
2021-12-19 15:39:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676270573129728[0;39m <==    Updates: 0
2021-12-19 15:39:55.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127676270573129728[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 15:39:59.999 INFO  com.job.EbookSnapshotJob                          :32   [32m127676291477540864[0;39m 生成今日电子书快照开始
2021-12-19 15:40:00.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676291477540864[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:00.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676291477540864[0;39m ==> Parameters: 
2021-12-19 15:40:00.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676291477540864[0;39m <==    Updates: 0
2021-12-19 15:40:00.128 INFO  com.job.EbookSnapshotJob                          :35   [32m127676291477540864[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 15:40:05.012 INFO  com.job.DocJob                                    :32   [32m127676312503586816[0;39m 更新电子书下的文档数据开始
2021-12-19 15:40:05.043 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676312503586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:40:05.058 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676312503586816[0;39m ==> Parameters: 
2021-12-19 15:40:05.136 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676312503586816[0;39m <==    Updates: 3
2021-12-19 15:40:05.136 INFO  com.job.DocJob                                    :35   [32m127676312503586816[0;39m 更新电子书下的文档数据结束，耗时：124毫秒
2021-12-19 15:40:05.136 INFO  com.job.EbookSnapshotJob                          :32   [32m127676313023680512[0;39m 生成今日电子书快照开始
2021-12-19 15:40:05.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676313023680512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:05.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676313023680512[0;39m ==> Parameters: 
2021-12-19 15:40:05.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676313023680512[0;39m <==    Updates: 0
2021-12-19 15:40:05.246 INFO  com.job.EbookSnapshotJob                          :35   [32m127676313023680512[0;39m 生成今日电子书快照结束，耗时：110毫秒
2021-12-19 15:40:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127676333487689728[0;39m 生成今日电子书快照开始
2021-12-19 15:40:10.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676333487689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:10.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676333487689728[0;39m ==> Parameters: 
2021-12-19 15:40:10.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676333487689728[0;39m <==    Updates: 0
2021-12-19 15:40:10.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127676333487689728[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-19 15:40:15.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127676354484375552[0;39m 生成今日电子书快照开始
2021-12-19 15:40:15.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676354484375552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:15.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676354484375552[0;39m ==> Parameters: 
2021-12-19 15:40:15.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676354484375552[0;39m <==    Updates: 0
2021-12-19 15:40:15.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127676354484375552[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:40:20.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127676375455895552[0;39m 生成今日电子书快照开始
2021-12-19 15:40:20.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676375455895552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:20.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676375455895552[0;39m ==> Parameters: 
2021-12-19 15:40:20.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676375455895552[0;39m <==    Updates: 0
2021-12-19 15:40:20.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127676375455895552[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:40:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127676396389666816[0;39m 生成今日电子书快照开始
2021-12-19 15:40:25.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676396389666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:25.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676396389666816[0;39m ==> Parameters: 
2021-12-19 15:40:25.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676396389666816[0;39m <==    Updates: 0
2021-12-19 15:40:25.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127676396389666816[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 15:40:30.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127676417424101376[0;39m 生成今日电子书快照开始
2021-12-19 15:40:30.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676417424101376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:30.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676417424101376[0;39m ==> Parameters: 
2021-12-19 15:40:30.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676417424101376[0;39m <==    Updates: 0
2021-12-19 15:40:30.183 INFO  com.job.EbookSnapshotJob                          :35   [32m127676417424101376[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 15:40:35.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127676438332706816[0;39m 生成今日电子书快照开始
2021-12-19 15:40:35.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676438332706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:35.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676438332706816[0;39m ==> Parameters: 
2021-12-19 15:40:35.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676438332706816[0;39m <==    Updates: 0
2021-12-19 15:40:35.139 INFO  com.job.EbookSnapshotJob                          :35   [32m127676438332706816[0;39m 生成今日电子书快照结束，耗时：127毫秒
2021-12-19 15:40:35.139 INFO  com.job.DocJob                                    :32   [32m127676438865383424[0;39m 更新电子书下的文档数据开始
2021-12-19 15:40:35.139 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676438865383424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:40:35.139 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676438865383424[0;39m ==> Parameters: 
2021-12-19 15:40:35.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676438865383424[0;39m <==    Updates: 3
2021-12-19 15:40:35.232 INFO  com.job.DocJob                                    :35   [32m127676438865383424[0;39m 更新电子书下的文档数据结束，耗时：93毫秒
2021-12-19 15:40:39.778 INFO  com.websocket.WebSocketServer                     :32   [32m127675568459223040[0;39m 有新连接：token：dzrm86MFek，session id：4，当前连接数：1
2021-12-19 15:40:39.973 INFO  com.aspect.LogAspect                              :54   [32m127676459140648960[0;39m ------------- 开始 -------------
2021-12-19 15:40:39.973 INFO  com.aspect.LogAspect                              :55   [32m127676459140648960[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:40:39.974 INFO  com.aspect.LogAspect                              :56   [32m127676459140648960[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:40:39.974 INFO  com.aspect.LogAspect                              :57   [32m127676459140648960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:39.974 INFO  com.aspect.LogAspect                              :80   [32m127676459140648960[0;39m 请求参数: []
2021-12-19 15:40:39.974 INFO  com.aspect.LogAspect                              :54   [32m127676459144843264[0;39m ------------- 开始 -------------
2021-12-19 15:40:39.975 INFO  com.aspect.LogAspect                              :55   [32m127676459144843264[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:40:39.975 INFO  com.aspect.LogAspect                              :56   [32m127676459144843264[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:40:39.975 INFO  com.aspect.LogAspect                              :57   [32m127676459144843264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:39.976 INFO  com.aspect.LogAspect                              :80   [32m127676459144843264[0;39m 请求参数: []
2021-12-19 15:40:39.978 INFO  com.aspect.LogAspect                              :54   [32m127676459161620480[0;39m ------------- 开始 -------------
2021-12-19 15:40:39.979 INFO  com.aspect.LogAspect                              :55   [32m127676459161620480[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:39.979 INFO  com.aspect.LogAspect                              :56   [32m127676459161620480[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:39.979 INFO  com.aspect.LogAspect                              :57   [32m127676459161620480[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:39.979 INFO  com.aspect.LogAspect                              :80   [32m127676459161620480[0;39m 请求参数: []
2021-12-19 15:40:40.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127676459325198336[0;39m 生成今日电子书快照开始
2021-12-19 15:40:40.017 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676459140648960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:40:40.017 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676459140648960[0;39m ==> Parameters: 
2021-12-19 15:40:40.018 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676459144843264[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:40:40.018 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676459144843264[0;39m ==> Parameters: 
2021-12-19 15:40:40.029 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676459161620480[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:40.030 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676459161620480[0;39m ==> Parameters: 
2021-12-19 15:40:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676459325198336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:40.062 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:40:40.063 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676459140648960[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:40:40.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676459325198336[0;39m ==> Parameters: 
2021-12-19 15:40:40.063 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:40:40.063 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676459140648960[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:40:40.064 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676459140648960[0;39m <==      Total: 1
2021-12-19 15:40:40.064 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:40:40.064 INFO  com.aspect.LogAspect                              :92   [32m127676459140648960[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:40:40.064 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:40:40.064 INFO  com.aspect.LogAspect                              :93   [32m127676459140648960[0;39m ------------- 结束 耗时：91 ms -------------
2021-12-19 15:40:40.065 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:40:40.066 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:40:40.067 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:40:40.068 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676459144843264[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:40:40.069 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676459144843264[0;39m <==      Total: 7
2021-12-19 15:40:40.071 INFO  com.aspect.LogAspect                              :92   [32m127676459144843264[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:40:40.071 INFO  com.aspect.LogAspect                              :93   [32m127676459144843264[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-19 15:40:40.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:40.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:40.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:40.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:40.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:40.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:40.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:40.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:40.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:40.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:40.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:40.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:40.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:40.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:40.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:40.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:40.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:40.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:40.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:40.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676459161620480[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:40.083 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676459161620480[0;39m <==      Total: 19
2021-12-19 15:40:40.084 INFO  com.aspect.LogAspect                              :92   [32m127676459161620480[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:40.084 INFO  com.aspect.LogAspect                              :93   [32m127676459161620480[0;39m ------------- 结束 耗时：106 ms -------------
2021-12-19 15:40:40.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676459325198336[0;39m <==    Updates: 0
2021-12-19 15:40:40.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127676459325198336[0;39m 生成今日电子书快照结束，耗时：135毫秒
2021-12-19 15:40:42.975 INFO  com.aspect.LogAspect                              :54   [32m127676471731949568[0;39m ------------- 开始 -------------
2021-12-19 15:40:42.975 INFO  com.aspect.LogAspect                              :55   [32m127676471731949568[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-19 15:40:42.975 INFO  com.aspect.LogAspect                              :56   [32m127676471731949568[0;39m 类名方法: com.controller.UserController.login
2021-12-19 15:40:42.976 INFO  com.aspect.LogAspect                              :57   [32m127676471731949568[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:42.977 INFO  com.aspect.LogAspect                              :80   [32m127676471731949568[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-19 15:40:43.036 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676471731949568[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-19 15:40:43.037 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676471731949568[0;39m ==> Parameters: test123(String)
2021-12-19 15:40:43.083 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676471731949568[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:40:43.084 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676471731949568[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:40:43.084 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676471731949568[0;39m <==      Total: 1
2021-12-19 15:40:43.091 INFO  com.controller.UserController                     :77   [32m127676471731949568[0;39m 生成单点登录token:127676472218488832,并放入redis中
2021-12-19 15:40:43.120 INFO  com.aspect.LogAspect                              :92   [32m127676471731949568[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"},"success":true}
2021-12-19 15:40:43.120 INFO  com.aspect.LogAspect                              :93   [32m127676471731949568[0;39m ------------- 结束 耗时：145 ms -------------
2021-12-19 15:40:43.284 INFO  com.websocket.WebSocketServer                     :41   [32m127676109562187776[0;39m 连接关闭，token：dzrm86MFek，session id：4！当前连接数：0
2021-12-19 15:40:44.225 INFO  com.websocket.WebSocketServer                     :32   [32m127676109583159296[0;39m 有新连接：token：6KejYBcRbE，session id：5，当前连接数：1
2021-12-19 15:40:44.307 INFO  com.aspect.LogAspect                              :54   [32m127676477318762496[0;39m ------------- 开始 -------------
2021-12-19 15:40:44.307 INFO  com.aspect.LogAspect                              :54   [32m127676477318762497[0;39m ------------- 开始 -------------
2021-12-19 15:40:44.307 INFO  com.aspect.LogAspect                              :55   [32m127676477318762497[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:40:44.307 INFO  com.aspect.LogAspect                              :55   [32m127676477318762496[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:40:44.308 INFO  com.aspect.LogAspect                              :56   [32m127676477318762497[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:40:44.308 INFO  com.aspect.LogAspect                              :56   [32m127676477318762496[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:40:44.308 INFO  com.aspect.LogAspect                              :57   [32m127676477318762497[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:44.308 INFO  com.aspect.LogAspect                              :57   [32m127676477318762496[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:44.308 INFO  com.aspect.LogAspect                              :80   [32m127676477318762497[0;39m 请求参数: []
2021-12-19 15:40:44.308 INFO  com.aspect.LogAspect                              :80   [32m127676477318762496[0;39m 请求参数: []
2021-12-19 15:40:44.310 INFO  com.aspect.LogAspect                              :54   [32m127676477331345408[0;39m ------------- 开始 -------------
2021-12-19 15:40:44.311 INFO  com.aspect.LogAspect                              :55   [32m127676477331345408[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:44.311 INFO  com.aspect.LogAspect                              :56   [32m127676477331345408[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:44.311 INFO  com.aspect.LogAspect                              :57   [32m127676477331345408[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:44.311 INFO  com.aspect.LogAspect                              :80   [32m127676477331345408[0;39m 请求参数: []
2021-12-19 15:40:44.351 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676477318762496[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:40:44.351 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676477318762496[0;39m ==> Parameters: 
2021-12-19 15:40:44.355 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676477318762497[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:40:44.355 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676477318762497[0;39m ==> Parameters: 
2021-12-19 15:40:44.357 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676477331345408[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:44.358 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676477331345408[0;39m ==> Parameters: 
2021-12-19 15:40:44.394 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:40:44.395 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:40:44.395 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:40:44.396 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:40:44.397 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:40:44.398 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:40:44.399 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676477318762497[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:40:44.399 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676477318762497[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:40:44.399 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:40:44.399 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676477318762497[0;39m <==      Total: 1
2021-12-19 15:40:44.400 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676477318762496[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:40:44.400 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676477318762496[0;39m <==      Total: 7
2021-12-19 15:40:44.400 INFO  com.aspect.LogAspect                              :92   [32m127676477318762497[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:40:44.401 INFO  com.aspect.LogAspect                              :93   [32m127676477318762497[0;39m ------------- 结束 耗时：94 ms -------------
2021-12-19 15:40:44.401 INFO  com.aspect.LogAspect                              :92   [32m127676477318762496[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:40:44.401 INFO  com.aspect.LogAspect                              :93   [32m127676477318762496[0;39m ------------- 结束 耗时：94 ms -------------
2021-12-19 15:40:44.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:44.403 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:44.403 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:44.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:44.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:44.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:44.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:44.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:44.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:44.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:44.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:44.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:44.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:44.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:44.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:44.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:44.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:44.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:44.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:44.409 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676477331345408[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:44.409 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676477331345408[0;39m <==      Total: 19
2021-12-19 15:40:44.410 INFO  com.aspect.LogAspect                              :92   [32m127676477331345408[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:44.411 INFO  com.aspect.LogAspect                              :93   [32m127676477331345408[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-19 15:40:44.502 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676202159837184[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:40:44.502 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676202159837184[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-19 15:40:44.504 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676471731949568[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:40:44.505 INFO  com.interceptor.LoginInterceptor                  :40   [32m127676471731949568[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:40:44.505 INFO  com.interceptor.LoginInterceptor                  :44   [32m127676471731949568[0;39m 登录校验开始，token：127676472218488832
2021-12-19 15:40:44.556 INFO  com.interceptor.LoginInterceptor                  :56   [32m127676471731949568[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"}
2021-12-19 15:40:44.563 INFO  com.aspect.LogAspect                              :54   [32m127676478392504320[0;39m ------------- 开始 -------------
2021-12-19 15:40:44.563 INFO  com.aspect.LogAspect                              :55   [32m127676478392504320[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:40:44.563 INFO  com.aspect.LogAspect                              :56   [32m127676478392504320[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:40:44.563 INFO  com.aspect.LogAspect                              :57   [32m127676478392504320[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:44.564 INFO  com.aspect.LogAspect                              :80   [32m127676478392504320[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:40:44.565 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676478392504320[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:40:44.566 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676478392504320[0;39m ==> Parameters: 
2021-12-19 15:40:44.616 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676478392504320[0;39m <==    Columns: count(0)
2021-12-19 15:40:44.618 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676478392504320[0;39m <==        Row: 7
2021-12-19 15:40:44.620 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676478392504320[0;39m <==      Total: 1
2021-12-19 15:40:44.623 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676478392504320[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:40:44.625 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676478392504320[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:40:44.670 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:40:44.672 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:44.673 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:44.675 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:44.675 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:44.676 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:40:44.676 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:40:44.677 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676478392504320[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:40:44.677 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676478392504320[0;39m <==      Total: 7
2021-12-19 15:40:44.678 INFO  com.servicess.UserService                         :52   [32m127676478392504320[0;39m 总行数：7
2021-12-19 15:40:44.678 INFO  com.servicess.UserService                         :53   [32m127676478392504320[0;39m 总页数：1
2021-12-19 15:40:44.695 INFO  com.aspect.LogAspect                              :92   [32m127676478392504320[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:40:44.695 INFO  com.aspect.LogAspect                              :93   [32m127676478392504320[0;39m ------------- 结束 耗时：132 ms -------------
2021-12-19 15:40:44.699 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676478392504320[0;39m ------------- LoginInterceptor 结束 耗时：194 ms -------------
2021-12-19 15:40:45.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127676480250580992[0;39m 生成今日电子书快照开始
2021-12-19 15:40:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676480250580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:45.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676480250580992[0;39m ==> Parameters: 
2021-12-19 15:40:45.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676480250580992[0;39m <==    Updates: 0
2021-12-19 15:40:45.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127676480250580992[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:40:45.877 INFO  com.aspect.LogAspect                              :54   [32m127676483903819776[0;39m ------------- 开始 -------------
2021-12-19 15:40:45.877 INFO  com.aspect.LogAspect                              :55   [32m127676483903819776[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:45.877 INFO  com.aspect.LogAspect                              :56   [32m127676483903819776[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:45.877 INFO  com.aspect.LogAspect                              :57   [32m127676483903819776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:45.878 INFO  com.aspect.LogAspect                              :80   [32m127676483903819776[0;39m 请求参数: []
2021-12-19 15:40:45.922 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676483903819776[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:45.923 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676483903819776[0;39m ==> Parameters: 
2021-12-19 15:40:45.968 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:45.968 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:45.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:45.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:45.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:45.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:45.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:45.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:45.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:45.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:45.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:45.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:45.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676483903819776[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:45.972 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676483903819776[0;39m <==      Total: 19
2021-12-19 15:40:45.972 INFO  com.aspect.LogAspect                              :92   [32m127676483903819776[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:45.973 INFO  com.aspect.LogAspect                              :93   [32m127676483903819776[0;39m ------------- 结束 耗时：96 ms -------------
2021-12-19 15:40:45.988 INFO  com.aspect.LogAspect                              :54   [32m127676484369387520[0;39m ------------- 开始 -------------
2021-12-19 15:40:45.988 INFO  com.aspect.LogAspect                              :55   [32m127676484369387520[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:40:45.988 INFO  com.aspect.LogAspect                              :56   [32m127676484369387520[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:40:45.988 INFO  com.aspect.LogAspect                              :57   [32m127676484369387520[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:45.988 INFO  com.aspect.LogAspect                              :80   [32m127676484369387520[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:40:45.989 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676484369387520[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:40:45.990 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676484369387520[0;39m ==> Parameters: 
2021-12-19 15:40:46.033 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676484369387520[0;39m <==    Columns: count(0)
2021-12-19 15:40:46.034 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676484369387520[0;39m <==        Row: 6
2021-12-19 15:40:46.035 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676484369387520[0;39m <==      Total: 1
2021-12-19 15:40:46.036 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676484369387520[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:40:46.036 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676484369387520[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:40:46.088 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:40:46.088 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:40:46.088 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:40:46.089 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:40:46.089 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:40:46.090 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:40:46.090 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676484369387520[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:40:46.090 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676484369387520[0;39m <==      Total: 6
2021-12-19 15:40:46.091 INFO  com.servicess.EbookService                        :48   [32m127676484369387520[0;39m 总行数：6
2021-12-19 15:40:46.091 INFO  com.servicess.EbookService                        :49   [32m127676484369387520[0;39m 总页数：1
2021-12-19 15:40:46.092 INFO  com.aspect.LogAspect                              :92   [32m127676484369387520[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:40:46.092 INFO  com.aspect.LogAspect                              :93   [32m127676484369387520[0;39m ------------- 结束 耗时：105 ms -------------
2021-12-19 15:40:46.867 INFO  com.aspect.LogAspect                              :54   [32m127676488056180736[0;39m ------------- 开始 -------------
2021-12-19 15:40:46.868 INFO  com.aspect.LogAspect                              :55   [32m127676488056180736[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:46.868 INFO  com.aspect.LogAspect                              :56   [32m127676488056180736[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:46.868 INFO  com.aspect.LogAspect                              :57   [32m127676488056180736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:46.868 INFO  com.aspect.LogAspect                              :80   [32m127676488056180736[0;39m 请求参数: []
2021-12-19 15:40:46.911 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676488056180736[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:46.911 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676488056180736[0;39m ==> Parameters: 
2021-12-19 15:40:46.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:46.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:46.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:46.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:46.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:46.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:46.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:46.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:46.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:46.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:46.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:46.961 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:46.961 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:46.961 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676488056180736[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:46.961 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676488056180736[0;39m <==      Total: 19
2021-12-19 15:40:46.962 INFO  com.aspect.LogAspect                              :92   [32m127676488056180736[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:46.962 INFO  com.aspect.LogAspect                              :93   [32m127676488056180736[0;39m ------------- 结束 耗时：95 ms -------------
2021-12-19 15:40:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127676501251461120[0;39m 生成今日电子书快照开始
2021-12-19 15:40:50.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676501251461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:50.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676501251461120[0;39m ==> Parameters: 
2021-12-19 15:40:50.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676501251461120[0;39m <==    Updates: 0
2021-12-19 15:40:50.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127676501251461120[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 15:40:51.897 INFO  com.aspect.LogAspect                              :54   [32m127676509153529856[0;39m ------------- 开始 -------------
2021-12-19 15:40:51.897 INFO  com.aspect.LogAspect                              :55   [32m127676509153529856[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:40:51.898 INFO  com.aspect.LogAspect                              :56   [32m127676509153529856[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:40:51.898 INFO  com.aspect.LogAspect                              :57   [32m127676509153529856[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:51.898 INFO  com.aspect.LogAspect                              :80   [32m127676509153529856[0;39m 请求参数: []
2021-12-19 15:40:51.898 INFO  com.aspect.LogAspect                              :54   [32m127676509157724160[0;39m ------------- 开始 -------------
2021-12-19 15:40:51.898 INFO  com.aspect.LogAspect                              :55   [32m127676509157724160[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:40:51.899 INFO  com.aspect.LogAspect                              :56   [32m127676509157724160[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:40:51.899 INFO  com.aspect.LogAspect                              :57   [32m127676509157724160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:51.899 INFO  com.aspect.LogAspect                              :80   [32m127676509157724160[0;39m 请求参数: []
2021-12-19 15:40:51.900 INFO  com.aspect.LogAspect                              :54   [32m127676509166112768[0;39m ------------- 开始 -------------
2021-12-19 15:40:51.900 INFO  com.aspect.LogAspect                              :55   [32m127676509166112768[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:51.901 INFO  com.aspect.LogAspect                              :56   [32m127676509166112768[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:51.901 INFO  com.aspect.LogAspect                              :57   [32m127676509166112768[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:51.901 INFO  com.aspect.LogAspect                              :80   [32m127676509166112768[0;39m 请求参数: []
2021-12-19 15:40:51.941 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676509153529856[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:40:51.941 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676509157724160[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:40:51.942 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676509153529856[0;39m ==> Parameters: 
2021-12-19 15:40:51.942 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676509157724160[0;39m ==> Parameters: 
2021-12-19 15:40:51.945 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676509166112768[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:51.946 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676509166112768[0;39m ==> Parameters: 
2021-12-19 15:40:51.990 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:40:51.990 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:51.990 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676509153529856[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:40:51.990 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:51.991 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676509153529856[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:40:51.991 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:40:51.991 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:51.991 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676509153529856[0;39m <==      Total: 1
2021-12-19 15:40:51.991 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:40:51.991 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:51.991 INFO  com.aspect.LogAspect                              :92   [32m127676509153529856[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:40:51.991 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:51.991 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:40:51.992 INFO  com.aspect.LogAspect                              :93   [32m127676509153529856[0;39m ------------- 结束 耗时：95 ms -------------
2021-12-19 15:40:51.992 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:51.992 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:40:51.992 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:51.992 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:51.992 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:40:51.992 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:51.993 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:51.993 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:40:51.993 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:51.993 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:51.993 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676509157724160[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:40:51.994 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:51.994 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676509157724160[0;39m <==      Total: 7
2021-12-19 15:40:51.994 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:51.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:51.995 INFO  com.aspect.LogAspect                              :92   [32m127676509157724160[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:40:51.995 INFO  com.aspect.LogAspect                              :93   [32m127676509157724160[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-19 15:40:51.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:51.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:51.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:51.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:51.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676509166112768[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:51.997 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676509166112768[0;39m <==      Total: 19
2021-12-19 15:40:51.999 INFO  com.aspect.LogAspect                              :92   [32m127676509166112768[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:52.000 INFO  com.aspect.LogAspect                              :93   [32m127676509166112768[0;39m ------------- 结束 耗时：100 ms -------------
2021-12-19 15:40:53.232 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676477331345408[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:40:53.232 INFO  com.interceptor.LoginInterceptor                  :40   [32m127676477331345408[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:40:53.233 INFO  com.interceptor.LoginInterceptor                  :44   [32m127676477331345408[0;39m 登录校验开始，token：127676472218488832
2021-12-19 15:40:53.254 INFO  com.interceptor.LoginInterceptor                  :56   [32m127676477331345408[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"}
2021-12-19 15:40:53.255 INFO  com.aspect.LogAspect                              :54   [32m127676514845200384[0;39m ------------- 开始 -------------
2021-12-19 15:40:53.255 INFO  com.aspect.LogAspect                              :55   [32m127676514845200384[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:40:53.255 INFO  com.aspect.LogAspect                              :56   [32m127676514845200384[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:40:53.255 INFO  com.aspect.LogAspect                              :57   [32m127676514845200384[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:53.255 INFO  com.aspect.LogAspect                              :80   [32m127676514845200384[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:40:53.300 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676514845200384[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:40:53.300 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676514845200384[0;39m ==> Parameters: 
2021-12-19 15:40:53.345 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676514845200384[0;39m <==    Columns: count(0)
2021-12-19 15:40:53.345 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676514845200384[0;39m <==        Row: 7
2021-12-19 15:40:53.347 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676514845200384[0;39m <==      Total: 1
2021-12-19 15:40:53.347 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676514845200384[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:40:53.348 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676514845200384[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:40:53.403 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:40:53.403 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:53.404 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:53.404 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:53.404 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:40:53.404 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:40:53.405 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:40:53.405 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676514845200384[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:40:53.406 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676514845200384[0;39m <==      Total: 7
2021-12-19 15:40:53.406 INFO  com.servicess.UserService                         :52   [32m127676514845200384[0;39m 总行数：7
2021-12-19 15:40:53.407 INFO  com.servicess.UserService                         :53   [32m127676514845200384[0;39m 总页数：1
2021-12-19 15:40:53.407 INFO  com.aspect.LogAspect                              :92   [32m127676514845200384[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:40:53.407 INFO  com.aspect.LogAspect                              :93   [32m127676514845200384[0;39m ------------- 结束 耗时：153 ms -------------
2021-12-19 15:40:53.408 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676514845200384[0;39m ------------- LoginInterceptor 结束 耗时：176 ms -------------
2021-12-19 15:40:55.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127676522239758336[0;39m 生成今日电子书快照开始
2021-12-19 15:40:55.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676522239758336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:40:55.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676522239758336[0;39m ==> Parameters: 
2021-12-19 15:40:55.176 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676522239758336[0;39m <==    Updates: 0
2021-12-19 15:40:55.177 INFO  com.job.EbookSnapshotJob                          :35   [32m127676522239758336[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 15:40:55.601 INFO  com.aspect.LogAspect                              :54   [32m127676524689231872[0;39m ------------- 开始 -------------
2021-12-19 15:40:55.601 INFO  com.aspect.LogAspect                              :55   [32m127676524689231872[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:55.601 INFO  com.aspect.LogAspect                              :56   [32m127676524689231872[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:55.602 INFO  com.aspect.LogAspect                              :57   [32m127676524689231872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:55.602 INFO  com.aspect.LogAspect                              :80   [32m127676524689231872[0;39m 请求参数: []
2021-12-19 15:40:55.644 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676524689231872[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:55.645 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676524689231872[0;39m ==> Parameters: 
2021-12-19 15:40:55.692 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:55.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:55.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:55.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:55.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:55.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:55.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:55.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:55.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:55.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:55.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:55.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:55.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:55.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:55.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:55.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:55.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:55.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:55.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:55.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676524689231872[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:55.698 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676524689231872[0;39m <==      Total: 19
2021-12-19 15:40:55.699 INFO  com.aspect.LogAspect                              :92   [32m127676524689231872[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:55.700 INFO  com.aspect.LogAspect                              :93   [32m127676524689231872[0;39m ------------- 结束 耗时：99 ms -------------
2021-12-19 15:40:55.717 INFO  com.aspect.LogAspect                              :54   [32m127676525175771136[0;39m ------------- 开始 -------------
2021-12-19 15:40:55.717 INFO  com.aspect.LogAspect                              :55   [32m127676525175771136[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:40:55.717 INFO  com.aspect.LogAspect                              :56   [32m127676525175771136[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:40:55.717 INFO  com.aspect.LogAspect                              :57   [32m127676525175771136[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:55.717 INFO  com.aspect.LogAspect                              :80   [32m127676525175771136[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:40:55.765 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676525175771136[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:40:55.766 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676525175771136[0;39m ==> Parameters: 
2021-12-19 15:40:55.815 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676525175771136[0;39m <==    Columns: count(0)
2021-12-19 15:40:55.815 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676525175771136[0;39m <==        Row: 6
2021-12-19 15:40:55.815 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676525175771136[0;39m <==      Total: 1
2021-12-19 15:40:55.816 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676525175771136[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:40:55.816 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676525175771136[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:40:55.864 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:40:55.864 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:40:55.865 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:40:55.865 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:40:55.865 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:40:55.865 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:40:55.866 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676525175771136[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:40:55.866 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676525175771136[0;39m <==      Total: 6
2021-12-19 15:40:55.866 INFO  com.servicess.EbookService                        :48   [32m127676525175771136[0;39m 总行数：6
2021-12-19 15:40:55.866 INFO  com.servicess.EbookService                        :49   [32m127676525175771136[0;39m 总页数：1
2021-12-19 15:40:55.867 INFO  com.aspect.LogAspect                              :92   [32m127676525175771136[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:40:55.867 INFO  com.aspect.LogAspect                              :93   [32m127676525175771136[0;39m ------------- 结束 耗时：150 ms -------------
2021-12-19 15:40:58.244 INFO  com.aspect.LogAspect                              :54   [32m127676535774777344[0;39m ------------- 开始 -------------
2021-12-19 15:40:58.245 INFO  com.aspect.LogAspect                              :55   [32m127676535774777344[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:40:58.245 INFO  com.aspect.LogAspect                              :56   [32m127676535774777344[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:40:58.245 INFO  com.aspect.LogAspect                              :57   [32m127676535774777344[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:40:58.245 INFO  com.aspect.LogAspect                              :80   [32m127676535774777344[0;39m 请求参数: []
2021-12-19 15:40:58.289 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676535774777344[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:40:58.290 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676535774777344[0;39m ==> Parameters: 
2021-12-19 15:40:58.339 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:40:58.340 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:40:58.341 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:40:58.341 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:40:58.342 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:40:58.342 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:40:58.342 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:40:58.342 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:40:58.342 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:40:58.343 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:40:58.343 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:40:58.343 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:40:58.343 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:40:58.343 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:40:58.344 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:40:58.344 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:40:58.344 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:40:58.344 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:40:58.344 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:40:58.345 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676535774777344[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:40:58.345 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676535774777344[0;39m <==      Total: 19
2021-12-19 15:40:58.346 INFO  com.aspect.LogAspect                              :92   [32m127676535774777344[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:40:58.346 INFO  com.aspect.LogAspect                              :93   [32m127676535774777344[0;39m ------------- 结束 耗时：102 ms -------------
2021-12-19 15:41:00.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127676543160946688[0;39m 生成今日电子书快照开始
2021-12-19 15:41:00.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676543160946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:00.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676543160946688[0;39m ==> Parameters: 
2021-12-19 15:41:00.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676543160946688[0;39m <==    Updates: 0
2021-12-19 15:41:00.163 INFO  com.job.EbookSnapshotJob                          :35   [32m127676543160946688[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 15:41:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127676564161826816[0;39m 生成今日电子书快照开始
2021-12-19 15:41:05.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676564161826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:05.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676564161826816[0;39m ==> Parameters: 
2021-12-19 15:41:05.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676564161826816[0;39m <==    Updates: 0
2021-12-19 15:41:05.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127676564161826816[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 15:41:05.159 INFO  com.job.DocJob                                    :32   [32m127676564778389504[0;39m 更新电子书下的文档数据开始
2021-12-19 15:41:05.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676564778389504[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:41:05.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676564778389504[0;39m ==> Parameters: 
2021-12-19 15:41:05.237 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676564778389504[0;39m <==    Updates: 3
2021-12-19 15:41:05.253 INFO  com.job.DocJob                                    :35   [32m127676564778389504[0;39m 更新电子书下的文档数据结束，耗时：94毫秒
2021-12-19 15:41:10.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127676585120763904[0;39m 生成今日电子书快照开始
2021-12-19 15:41:10.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676585120763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676585120763904[0;39m ==> Parameters: 
2021-12-19 15:41:10.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676585120763904[0;39m <==    Updates: 0
2021-12-19 15:41:10.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127676585120763904[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-19 15:41:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127676606109061120[0;39m 生成今日电子书快照开始
2021-12-19 15:41:15.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676606109061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:15.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676606109061120[0;39m ==> Parameters: 
2021-12-19 15:41:15.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676606109061120[0;39m <==    Updates: 0
2021-12-19 15:41:15.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127676606109061120[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-19 15:41:17.026 INFO  com.aspect.LogAspect                              :54   [32m127676614552195072[0;39m ------------- 开始 -------------
2021-12-19 15:41:17.026 INFO  com.aspect.LogAspect                              :55   [32m127676614552195072[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:41:17.026 INFO  com.aspect.LogAspect                              :56   [32m127676614552195072[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:41:17.026 INFO  com.aspect.LogAspect                              :57   [32m127676614552195072[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:17.027 INFO  com.aspect.LogAspect                              :80   [32m127676614552195072[0;39m 请求参数: []
2021-12-19 15:41:17.081 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676614552195072[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:41:17.081 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676614552195072[0;39m ==> Parameters: 
2021-12-19 15:41:17.132 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:41:17.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:41:17.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:41:17.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:41:17.134 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:41:17.134 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:41:17.134 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:41:17.135 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:41:17.135 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:41:17.135 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:41:17.135 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:41:17.135 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:41:17.136 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:41:17.136 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:41:17.136 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:41:17.136 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:41:17.136 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:41:17.137 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:41:17.137 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:41:17.137 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676614552195072[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:41:17.137 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676614552195072[0;39m <==      Total: 19
2021-12-19 15:41:17.139 INFO  com.aspect.LogAspect                              :92   [32m127676614552195072[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:41:17.139 INFO  com.aspect.LogAspect                              :93   [32m127676614552195072[0;39m ------------- 结束 耗时：113 ms -------------
2021-12-19 15:41:20.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127676627139301376[0;39m 生成今日电子书快照开始
2021-12-19 15:41:20.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676627139301376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:20.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676627139301376[0;39m ==> Parameters: 
2021-12-19 15:41:20.184 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676627139301376[0;39m <==    Updates: 0
2021-12-19 15:41:20.184 INFO  com.job.EbookSnapshotJob                          :35   [32m127676627139301376[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 15:41:20.821 INFO  com.aspect.LogAspect                              :54   [32m127676630469578752[0;39m ------------- 开始 -------------
2021-12-19 15:41:20.822 INFO  com.aspect.LogAspect                              :55   [32m127676630469578752[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:41:20.822 INFO  com.aspect.LogAspect                              :56   [32m127676630469578752[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:41:20.822 INFO  com.aspect.LogAspect                              :57   [32m127676630469578752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:20.822 INFO  com.aspect.LogAspect                              :80   [32m127676630469578752[0;39m 请求参数: []
2021-12-19 15:41:20.873 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676630469578752[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:41:20.873 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676630469578752[0;39m ==> Parameters: 
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:41:20.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:41:20.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:41:20.925 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:41:20.925 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:41:20.925 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676630469578752[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:41:20.925 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676630469578752[0;39m <==      Total: 19
2021-12-19 15:41:20.926 INFO  com.aspect.LogAspect                              :92   [32m127676630469578752[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:41:20.926 INFO  com.aspect.LogAspect                              :93   [32m127676630469578752[0;39m ------------- 结束 耗时：105 ms -------------
2021-12-19 15:41:20.937 INFO  com.aspect.LogAspect                              :54   [32m127676630956118016[0;39m ------------- 开始 -------------
2021-12-19 15:41:20.937 INFO  com.aspect.LogAspect                              :55   [32m127676630956118016[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:41:20.938 INFO  com.aspect.LogAspect                              :56   [32m127676630956118016[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:41:20.939 INFO  com.aspect.LogAspect                              :57   [32m127676630956118016[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:20.939 INFO  com.aspect.LogAspect                              :80   [32m127676630956118016[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:41:20.970 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676630956118016[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:41:20.970 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676630956118016[0;39m ==> Parameters: 
2021-12-19 15:41:21.030 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676630956118016[0;39m <==    Columns: count(0)
2021-12-19 15:41:21.030 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676630956118016[0;39m <==        Row: 6
2021-12-19 15:41:21.030 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676630956118016[0;39m <==      Total: 1
2021-12-19 15:41:21.031 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676630956118016[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:41:21.031 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676630956118016[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:41:21.084 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:41:21.084 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:41:21.085 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:41:21.086 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:41:21.090 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:41:21.091 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:41:21.091 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676630956118016[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:41:21.091 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676630956118016[0;39m <==      Total: 6
2021-12-19 15:41:21.091 INFO  com.servicess.EbookService                        :48   [32m127676630956118016[0;39m 总行数：6
2021-12-19 15:41:21.092 INFO  com.servicess.EbookService                        :49   [32m127676630956118016[0;39m 总页数：1
2021-12-19 15:41:21.095 INFO  com.aspect.LogAspect                              :92   [32m127676630956118016[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:41:21.096 INFO  com.aspect.LogAspect                              :93   [32m127676630956118016[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-19 15:41:22.311 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676509153529856[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:41:22.311 INFO  com.interceptor.LoginInterceptor                  :40   [32m127676509153529856[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:41:22.311 INFO  com.interceptor.LoginInterceptor                  :44   [32m127676509153529856[0;39m 登录校验开始，token：127676472218488832
2021-12-19 15:41:22.391 INFO  com.interceptor.LoginInterceptor                  :56   [32m127676509153529856[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"}
2021-12-19 15:41:22.392 INFO  com.aspect.LogAspect                              :54   [32m127676637058830336[0;39m ------------- 开始 -------------
2021-12-19 15:41:22.392 INFO  com.aspect.LogAspect                              :55   [32m127676637058830336[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:41:22.392 INFO  com.aspect.LogAspect                              :56   [32m127676637058830336[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:41:22.392 INFO  com.aspect.LogAspect                              :57   [32m127676637058830336[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:22.392 INFO  com.aspect.LogAspect                              :80   [32m127676637058830336[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:41:22.443 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676637058830336[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:41:22.443 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676637058830336[0;39m ==> Parameters: 
2021-12-19 15:41:22.492 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676637058830336[0;39m <==    Columns: count(0)
2021-12-19 15:41:22.493 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676637058830336[0;39m <==        Row: 7
2021-12-19 15:41:22.494 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676637058830336[0;39m <==      Total: 1
2021-12-19 15:41:22.496 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676637058830336[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:41:22.497 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676637058830336[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:41:22.546 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:41:22.547 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:41:22.549 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:41:22.550 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:41:22.551 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:41:22.552 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:41:22.553 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:41:22.555 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676637058830336[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:41:22.556 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676637058830336[0;39m <==      Total: 7
2021-12-19 15:41:22.557 INFO  com.servicess.UserService                         :52   [32m127676637058830336[0;39m 总行数：7
2021-12-19 15:41:22.557 INFO  com.servicess.UserService                         :53   [32m127676637058830336[0;39m 总页数：1
2021-12-19 15:41:22.559 INFO  com.aspect.LogAspect                              :92   [32m127676637058830336[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:41:22.560 INFO  com.aspect.LogAspect                              :93   [32m127676637058830336[0;39m ------------- 结束 耗时：168 ms -------------
2021-12-19 15:41:22.561 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676637058830336[0;39m ------------- LoginInterceptor 结束 耗时：250 ms -------------
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :54   [32m127676643383840768[0;39m ------------- 开始 -------------
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :54   [32m127676643383840769[0;39m ------------- 开始 -------------
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :55   [32m127676643383840768[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :55   [32m127676643383840769[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :54   [32m127676643383840770[0;39m ------------- 开始 -------------
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :56   [32m127676643383840768[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :56   [32m127676643383840769[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :55   [32m127676643383840770[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :57   [32m127676643383840768[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:23.900 INFO  com.aspect.LogAspect                              :57   [32m127676643383840769[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:23.901 INFO  com.aspect.LogAspect                              :56   [32m127676643383840770[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:41:23.901 INFO  com.aspect.LogAspect                              :80   [32m127676643383840768[0;39m 请求参数: []
2021-12-19 15:41:23.901 INFO  com.aspect.LogAspect                              :57   [32m127676643383840770[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:41:23.901 INFO  com.aspect.LogAspect                              :80   [32m127676643383840769[0;39m 请求参数: []
2021-12-19 15:41:23.901 INFO  com.aspect.LogAspect                              :80   [32m127676643383840770[0;39m 请求参数: []
2021-12-19 15:41:23.948 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676643383840768[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:41:23.948 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676643383840769[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:41:23.947 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676643383840770[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:41:23.948 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676643383840768[0;39m ==> Parameters: 
2021-12-19 15:41:23.948 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676643383840770[0;39m ==> Parameters: 
2021-12-19 15:41:23.948 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676643383840769[0;39m ==> Parameters: 
2021-12-19 15:41:23.994 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676643383840768[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:41:23.994 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:41:23.994 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:41:23.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:41:23.995 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676643383840768[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:41:23.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:41:23.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:41:23.995 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:41:23.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:41:23.995 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676643383840768[0;39m <==      Total: 1
2021-12-19 15:41:23.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:41:23.995 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:41:23.996 INFO  com.aspect.LogAspect                              :92   [32m127676643383840768[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:41:23.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:41:23.996 INFO  com.aspect.LogAspect                              :93   [32m127676643383840768[0;39m ------------- 结束 耗时：96 ms -------------
2021-12-19 15:41:23.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:41:23.996 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:41:23.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:41:23.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:41:23.996 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:41:23.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:41:23.997 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:41:23.997 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:41:23.997 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:41:23.997 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:41:23.997 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:41:23.997 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:41:23.998 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:41:23.998 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:41:23.998 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:41:23.998 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676643383840769[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:41:23.998 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:41:23.998 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676643383840770[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:41:23.998 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676643383840769[0;39m <==      Total: 7
2021-12-19 15:41:23.998 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676643383840770[0;39m <==      Total: 19
2021-12-19 15:41:23.999 INFO  com.aspect.LogAspect                              :92   [32m127676643383840769[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:41:23.999 INFO  com.aspect.LogAspect                              :93   [32m127676643383840769[0;39m ------------- 结束 耗时：99 ms -------------
2021-12-19 15:41:24.001 INFO  com.aspect.LogAspect                              :92   [32m127676643383840770[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:41:24.001 INFO  com.aspect.LogAspect                              :93   [32m127676643383840770[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-19 15:41:25.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127676648081461248[0;39m 生成今日电子书快照开始
2021-12-19 15:41:25.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676648081461248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676648081461248[0;39m ==> Parameters: 
2021-12-19 15:41:25.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676648081461248[0;39m <==    Updates: 0
2021-12-19 15:41:25.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127676648081461248[0;39m 生成今日电子书快照结束，耗时：135毫秒
2021-12-19 15:41:30.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127676669002649600[0;39m 生成今日电子书快照开始
2021-12-19 15:41:30.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676669002649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:30.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676669002649600[0;39m ==> Parameters: 
2021-12-19 15:41:30.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676669002649600[0;39m <==    Updates: 0
2021-12-19 15:41:30.220 INFO  com.job.EbookSnapshotJob                          :35   [32m127676669002649600[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-19 15:41:35.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127676689965780992[0;39m 生成今日电子书快照开始
2021-12-19 15:41:35.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676689965780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:35.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676689965780992[0;39m ==> Parameters: 
2021-12-19 15:41:35.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676689965780992[0;39m <==    Updates: 0
2021-12-19 15:41:35.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127676689965780992[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:41:35.162 INFO  com.job.DocJob                                    :32   [32m127676690620092416[0;39m 更新电子书下的文档数据开始
2021-12-19 15:41:35.163 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676690620092416[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:41:35.164 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676690620092416[0;39m ==> Parameters: 
2021-12-19 15:41:35.265 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676690620092416[0;39m <==    Updates: 3
2021-12-19 15:41:35.265 INFO  com.job.DocJob                                    :35   [32m127676690620092416[0;39m 更新电子书下的文档数据结束，耗时：103毫秒
2021-12-19 15:41:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127676710966661120[0;39m 生成今日电子书快照开始
2021-12-19 15:41:40.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676710966661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676710966661120[0;39m ==> Parameters: 
2021-12-19 15:41:40.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676710966661120[0;39m <==    Updates: 0
2021-12-19 15:41:40.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127676710966661120[0;39m 生成今日电子书快照结束，耗时：208毫秒
2021-12-19 15:41:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127676731971735552[0;39m 生成今日电子书快照开始
2021-12-19 15:41:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676731971735552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676731971735552[0;39m ==> Parameters: 
2021-12-19 15:41:45.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676731971735552[0;39m <==    Updates: 0
2021-12-19 15:41:45.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127676731971735552[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 15:41:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127676752905506816[0;39m 生成今日电子书快照开始
2021-12-19 15:41:50.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676752905506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:50.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676752905506816[0;39m ==> Parameters: 
2021-12-19 15:41:50.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676752905506816[0;39m <==    Updates: 0
2021-12-19 15:41:50.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127676752905506816[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:41:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127676773851860992[0;39m 生成今日电子书快照开始
2021-12-19 15:41:55.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676773851860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:41:55.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676773851860992[0;39m ==> Parameters: 
2021-12-19 15:41:55.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676773851860992[0;39m <==    Updates: 0
2021-12-19 15:41:55.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127676773851860992[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 15:42:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127676794861129728[0;39m 生成今日电子书快照开始
2021-12-19 15:42:00.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676794861129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:00.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676794861129728[0;39m ==> Parameters: 
2021-12-19 15:42:00.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676794861129728[0;39m <==    Updates: 0
2021-12-19 15:42:00.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127676794861129728[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 15:42:04.436 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676524689231872[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:42:04.436 INFO  com.interceptor.LoginInterceptor                  :40   [32m127676524689231872[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:42:04.436 INFO  com.interceptor.LoginInterceptor                  :44   [32m127676524689231872[0;39m 登录校验开始，token：127676472218488832
2021-12-19 15:42:04.461 INFO  com.interceptor.LoginInterceptor                  :56   [32m127676524689231872[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"}
2021-12-19 15:42:04.462 INFO  com.aspect.LogAspect                              :54   [32m127676813513199616[0;39m ------------- 开始 -------------
2021-12-19 15:42:04.462 INFO  com.aspect.LogAspect                              :55   [32m127676813513199616[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:42:04.462 INFO  com.aspect.LogAspect                              :56   [32m127676813513199616[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:42:04.463 INFO  com.aspect.LogAspect                              :57   [32m127676813513199616[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:04.463 INFO  com.aspect.LogAspect                              :80   [32m127676813513199616[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:04.525 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676813513199616[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:42:04.525 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676813513199616[0;39m ==> Parameters: 
2021-12-19 15:42:04.570 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676813513199616[0;39m <==    Columns: count(0)
2021-12-19 15:42:04.570 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676813513199616[0;39m <==        Row: 7
2021-12-19 15:42:04.570 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676813513199616[0;39m <==      Total: 1
2021-12-19 15:42:04.571 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676813513199616[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:42:04.571 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676813513199616[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:04.617 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:42:04.617 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:04.618 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:04.618 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:04.619 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:04.619 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:42:04.620 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:42:04.620 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676813513199616[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:42:04.620 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676813513199616[0;39m <==      Total: 7
2021-12-19 15:42:04.621 INFO  com.servicess.UserService                         :52   [32m127676813513199616[0;39m 总行数：7
2021-12-19 15:42:04.621 INFO  com.servicess.UserService                         :53   [32m127676813513199616[0;39m 总页数：1
2021-12-19 15:42:04.621 INFO  com.aspect.LogAspect                              :92   [32m127676813513199616[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:42:04.621 INFO  com.aspect.LogAspect                              :93   [32m127676813513199616[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-19 15:42:04.622 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676813513199616[0;39m ------------- LoginInterceptor 结束 耗时：186 ms -------------
2021-12-19 15:42:05.013 INFO  com.job.DocJob                                    :32   [32m127676815824261120[0;39m 更新电子书下的文档数据开始
2021-12-19 15:42:05.063 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676815824261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:42:05.064 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676815824261120[0;39m ==> Parameters: 
2021-12-19 15:42:05.152 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676815824261120[0;39m <==    Updates: 3
2021-12-19 15:42:05.152 INFO  com.job.DocJob                                    :35   [32m127676815824261120[0;39m 更新电子书下的文档数据结束，耗时：139毫秒
2021-12-19 15:42:05.152 INFO  com.job.EbookSnapshotJob                          :32   [32m127676816407269376[0;39m 生成今日电子书快照开始
2021-12-19 15:42:05.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676816407269376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:05.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676816407269376[0;39m ==> Parameters: 
2021-12-19 15:42:05.173 INFO  com.aspect.LogAspect                              :54   [32m127676816495349760[0;39m ------------- 开始 -------------
2021-12-19 15:42:05.173 INFO  com.aspect.LogAspect                              :55   [32m127676816495349760[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:05.174 INFO  com.aspect.LogAspect                              :56   [32m127676816495349760[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:05.174 INFO  com.aspect.LogAspect                              :57   [32m127676816495349760[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:05.174 INFO  com.aspect.LogAspect                              :80   [32m127676816495349760[0;39m 请求参数: []
2021-12-19 15:42:05.220 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676816495349760[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:05.220 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676816495349760[0;39m ==> Parameters: 
2021-12-19 15:42:05.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676816407269376[0;39m <==    Updates: 0
2021-12-19 15:42:05.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127676816407269376[0;39m 生成今日电子书快照结束，耗时：91毫秒
2021-12-19 15:42:05.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:05.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:05.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:05.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:05.271 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676816495349760[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:05.271 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676816495349760[0;39m <==      Total: 19
2021-12-19 15:42:05.272 INFO  com.aspect.LogAspect                              :92   [32m127676816495349760[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:05.272 INFO  com.aspect.LogAspect                              :93   [32m127676816495349760[0;39m ------------- 结束 耗时：99 ms -------------
2021-12-19 15:42:05.285 INFO  com.aspect.LogAspect                              :54   [32m127676816965111808[0;39m ------------- 开始 -------------
2021-12-19 15:42:05.285 INFO  com.aspect.LogAspect                              :55   [32m127676816965111808[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:42:05.285 INFO  com.aspect.LogAspect                              :56   [32m127676816965111808[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:42:05.286 INFO  com.aspect.LogAspect                              :57   [32m127676816965111808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:05.286 INFO  com.aspect.LogAspect                              :80   [32m127676816965111808[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:05.344 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676816965111808[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:42:05.344 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676816965111808[0;39m ==> Parameters: 
2021-12-19 15:42:05.388 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676816965111808[0;39m <==    Columns: count(0)
2021-12-19 15:42:05.388 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676816965111808[0;39m <==        Row: 6
2021-12-19 15:42:05.388 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676816965111808[0;39m <==      Total: 1
2021-12-19 15:42:05.389 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676816965111808[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:42:05.389 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676816965111808[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:05.436 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:42:05.436 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:42:05.437 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:42:05.437 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:42:05.437 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:42:05.438 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:42:05.438 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676816965111808[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:42:05.438 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676816965111808[0;39m <==      Total: 6
2021-12-19 15:42:05.438 INFO  com.servicess.EbookService                        :48   [32m127676816965111808[0;39m 总行数：6
2021-12-19 15:42:05.438 INFO  com.servicess.EbookService                        :49   [32m127676816965111808[0;39m 总页数：1
2021-12-19 15:42:05.439 INFO  com.aspect.LogAspect                              :92   [32m127676816965111808[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:42:05.439 INFO  com.aspect.LogAspect                              :93   [32m127676816965111808[0;39m ------------- 结束 耗时：154 ms -------------
2021-12-19 15:42:06.085 INFO  com.aspect.LogAspect                              :54   [32m127676820320555008[0;39m ------------- 开始 -------------
2021-12-19 15:42:06.085 INFO  com.aspect.LogAspect                              :55   [32m127676820320555008[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:06.085 INFO  com.aspect.LogAspect                              :56   [32m127676820320555008[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:06.086 INFO  com.aspect.LogAspect                              :57   [32m127676820320555008[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:06.086 INFO  com.aspect.LogAspect                              :80   [32m127676820320555008[0;39m 请求参数: []
2021-12-19 15:42:06.145 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676820320555008[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:06.147 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676820320555008[0;39m ==> Parameters: 
2021-12-19 15:42:06.194 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:06.194 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:06.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:06.202 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:06.203 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:06.204 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:06.205 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:06.205 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:06.206 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:06.206 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:06.207 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:06.207 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:06.208 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:06.208 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:06.209 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:06.209 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:06.210 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:06.210 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:06.211 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:06.211 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676820320555008[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:06.211 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676820320555008[0;39m <==      Total: 19
2021-12-19 15:42:06.218 INFO  com.aspect.LogAspect                              :92   [32m127676820320555008[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:06.219 INFO  com.aspect.LogAspect                              :93   [32m127676820320555008[0;39m ------------- 结束 耗时：134 ms -------------
2021-12-19 15:42:08.279 INFO  com.aspect.LogAspect                              :54   [32m127676829522857984[0;39m ------------- 开始 -------------
2021-12-19 15:42:08.280 INFO  com.aspect.LogAspect                              :55   [32m127676829522857984[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:08.280 INFO  com.aspect.LogAspect                              :56   [32m127676829522857984[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:08.280 INFO  com.aspect.LogAspect                              :57   [32m127676829522857984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:08.280 INFO  com.aspect.LogAspect                              :80   [32m127676829522857984[0;39m 请求参数: []
2021-12-19 15:42:08.445 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676829522857984[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:08.447 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676829522857984[0;39m ==> Parameters: 
2021-12-19 15:42:08.490 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:08.491 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:08.492 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:08.492 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:08.493 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:08.493 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:08.495 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:08.496 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:08.497 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:08.498 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:08.499 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:08.500 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:08.501 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:08.501 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:08.502 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:08.503 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:08.503 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:08.504 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:08.504 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:08.505 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676829522857984[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:08.505 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676829522857984[0;39m <==      Total: 19
2021-12-19 15:42:08.507 INFO  com.aspect.LogAspect                              :92   [32m127676829522857984[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:08.507 INFO  com.aspect.LogAspect                              :93   [32m127676829522857984[0;39m ------------- 结束 耗时：228 ms -------------
2021-12-19 15:42:08.535 INFO  com.aspect.LogAspect                              :54   [32m127676830596599808[0;39m ------------- 开始 -------------
2021-12-19 15:42:08.536 INFO  com.aspect.LogAspect                              :55   [32m127676830596599808[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:42:08.537 INFO  com.aspect.LogAspect                              :56   [32m127676830596599808[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:42:08.538 INFO  com.aspect.LogAspect                              :57   [32m127676830596599808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:08.538 INFO  com.aspect.LogAspect                              :80   [32m127676830596599808[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:08.588 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676830596599808[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:42:08.589 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676830596599808[0;39m ==> Parameters: 
2021-12-19 15:42:08.636 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676830596599808[0;39m <==    Columns: count(0)
2021-12-19 15:42:08.636 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676830596599808[0;39m <==        Row: 6
2021-12-19 15:42:08.637 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676830596599808[0;39m <==      Total: 1
2021-12-19 15:42:08.637 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676830596599808[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:42:08.638 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676830596599808[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:08.692 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:42:08.695 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:42:08.697 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:42:08.698 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:42:08.699 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:42:08.701 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:42:08.702 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676830596599808[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:42:08.703 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676830596599808[0;39m <==      Total: 6
2021-12-19 15:42:08.704 INFO  com.servicess.EbookService                        :48   [32m127676830596599808[0;39m 总行数：6
2021-12-19 15:42:08.704 INFO  com.servicess.EbookService                        :49   [32m127676830596599808[0;39m 总页数：1
2021-12-19 15:42:08.706 INFO  com.aspect.LogAspect                              :92   [32m127676830596599808[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:42:08.707 INFO  com.aspect.LogAspect                              :93   [32m127676830596599808[0;39m ------------- 结束 耗时：172 ms -------------
2021-12-19 15:42:09.924 INFO  com.aspect.LogAspect                              :54   [32m127676836422488064[0;39m ------------- 开始 -------------
2021-12-19 15:42:09.925 INFO  com.aspect.LogAspect                              :55   [32m127676836422488064[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-19 15:42:09.925 INFO  com.aspect.LogAspect                              :56   [32m127676836422488064[0;39m 类名方法: com.controller.DocController.all
2021-12-19 15:42:09.925 INFO  com.aspect.LogAspect                              :57   [32m127676836422488064[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:09.925 INFO  com.aspect.LogAspect                              :80   [32m127676836422488064[0;39m 请求参数: [1]
2021-12-19 15:42:09.968 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127676836422488064[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-19 15:42:09.968 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127676836422488064[0;39m ==> Parameters: 1(Long)
2021-12-19 15:42:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127676836783198208[0;39m 生成今日电子书快照开始
2021-12-19 15:42:10.019 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 15:42:10.020 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-19 15:42:10.021 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 13, 4
2021-12-19 15:42:10.021 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 8, 2
2021-12-19 15:42:10.021 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 15, 3
2021-12-19 15:42:10.022 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 22, 5
2021-12-19 15:42:10.022 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-19 15:42:10.023 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127676836422488064[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 13, 1
2021-12-19 15:42:10.026 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127676836422488064[0;39m <==      Total: 7
2021-12-19 15:42:10.028 INFO  com.aspect.LogAspect                              :92   [32m127676836422488064[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":13,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":8,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":15,"voteCount":3},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":22,"voteCount":5},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":13,"voteCount":1}],"success":true}
2021-12-19 15:42:10.028 INFO  com.aspect.LogAspect                              :93   [32m127676836422488064[0;39m ------------- 结束 耗时：104 ms -------------
2021-12-19 15:42:10.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676836783198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:10.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676836783198208[0;39m ==> Parameters: 
2021-12-19 15:42:10.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676836783198208[0;39m <==    Updates: 0
2021-12-19 15:42:10.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127676836783198208[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 15:42:10.982 INFO  com.aspect.LogAspect                              :54   [32m127676840860061696[0;39m ------------- 开始 -------------
2021-12-19 15:42:10.983 INFO  com.aspect.LogAspect                              :55   [32m127676840860061696[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:10.983 INFO  com.aspect.LogAspect                              :56   [32m127676840860061696[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:10.983 INFO  com.aspect.LogAspect                              :57   [32m127676840860061696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:10.983 INFO  com.aspect.LogAspect                              :80   [32m127676840860061696[0;39m 请求参数: []
2021-12-19 15:42:11.030 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676840860061696[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:11.031 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676840860061696[0;39m ==> Parameters: 
2021-12-19 15:42:11.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:11.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:11.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:11.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:11.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676840860061696[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:11.082 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676840860061696[0;39m <==      Total: 19
2021-12-19 15:42:11.083 INFO  com.aspect.LogAspect                              :92   [32m127676840860061696[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:11.083 INFO  com.aspect.LogAspect                              :93   [32m127676840860061696[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-19 15:42:14.845 INFO  com.aspect.LogAspect                              :54   [32m127676857062658048[0;39m ------------- 开始 -------------
2021-12-19 15:42:14.845 INFO  com.aspect.LogAspect                              :55   [32m127676857062658048[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:14.846 INFO  com.aspect.LogAspect                              :56   [32m127676857062658048[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:14.846 INFO  com.aspect.LogAspect                              :57   [32m127676857062658048[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:14.846 INFO  com.aspect.LogAspect                              :80   [32m127676857062658048[0;39m 请求参数: []
2021-12-19 15:42:14.888 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676857062658048[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:14.890 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676857062658048[0;39m ==> Parameters: 
2021-12-19 15:42:14.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:14.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:14.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:14.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:14.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:14.938 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:14.939 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:14.940 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:14.941 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:14.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:14.943 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:14.943 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:14.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:14.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:14.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:14.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:14.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:14.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:14.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:14.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676857062658048[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:14.946 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676857062658048[0;39m <==      Total: 19
2021-12-19 15:42:14.947 INFO  com.aspect.LogAspect                              :92   [32m127676857062658048[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:14.947 INFO  com.aspect.LogAspect                              :93   [32m127676857062658048[0;39m ------------- 结束 耗时：102 ms -------------
2021-12-19 15:42:14.969 INFO  com.aspect.LogAspect                              :54   [32m127676857582751744[0;39m ------------- 开始 -------------
2021-12-19 15:42:14.969 INFO  com.aspect.LogAspect                              :55   [32m127676857582751744[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:42:14.970 INFO  com.aspect.LogAspect                              :56   [32m127676857582751744[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:42:14.970 INFO  com.aspect.LogAspect                              :57   [32m127676857582751744[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:14.970 INFO  com.aspect.LogAspect                              :80   [32m127676857582751744[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:15.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127676857805049856[0;39m 生成今日电子书快照开始
2021-12-19 15:42:15.039 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676857582751744[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:42:15.040 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676857582751744[0;39m ==> Parameters: 
2021-12-19 15:42:15.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676857805049856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:15.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676857805049856[0;39m ==> Parameters: 
2021-12-19 15:42:15.084 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676857582751744[0;39m <==    Columns: count(0)
2021-12-19 15:42:15.084 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676857582751744[0;39m <==        Row: 6
2021-12-19 15:42:15.085 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676857582751744[0;39m <==      Total: 1
2021-12-19 15:42:15.086 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676857582751744[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:42:15.116 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676857582751744[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:15.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676857805049856[0;39m <==    Updates: 0
2021-12-19 15:42:15.175 INFO  com.job.EbookSnapshotJob                          :35   [32m127676857805049856[0;39m 生成今日电子书快照结束，耗时：152毫秒
2021-12-19 15:42:15.174 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:42:15.176 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:42:15.177 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:42:15.178 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:42:15.178 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:42:15.179 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:42:15.179 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676857582751744[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:42:15.180 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676857582751744[0;39m <==      Total: 6
2021-12-19 15:42:15.181 INFO  com.servicess.EbookService                        :48   [32m127676857582751744[0;39m 总行数：6
2021-12-19 15:42:15.181 INFO  com.servicess.EbookService                        :49   [32m127676857582751744[0;39m 总页数：1
2021-12-19 15:42:15.182 INFO  com.aspect.LogAspect                              :92   [32m127676857582751744[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:42:15.182 INFO  com.aspect.LogAspect                              :93   [32m127676857582751744[0;39m ------------- 结束 耗时：213 ms -------------
2021-12-19 15:42:15.316 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676816495349760[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:42:15.316 INFO  com.interceptor.LoginInterceptor                  :40   [32m127676816495349760[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:42:15.317 INFO  com.interceptor.LoginInterceptor                  :44   [32m127676816495349760[0;39m 登录校验开始，token：127676472218488832
2021-12-19 15:42:15.340 INFO  com.interceptor.LoginInterceptor                  :56   [32m127676816495349760[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"}
2021-12-19 15:42:15.341 INFO  com.aspect.LogAspect                              :54   [32m127676859143032832[0;39m ------------- 开始 -------------
2021-12-19 15:42:15.342 INFO  com.aspect.LogAspect                              :55   [32m127676859143032832[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:42:15.342 INFO  com.aspect.LogAspect                              :56   [32m127676859143032832[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:42:15.342 INFO  com.aspect.LogAspect                              :57   [32m127676859143032832[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:15.342 INFO  com.aspect.LogAspect                              :80   [32m127676859143032832[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:15.386 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676859143032832[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:42:15.390 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676859143032832[0;39m ==> Parameters: 
2021-12-19 15:42:15.449 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676859143032832[0;39m <==    Columns: count(0)
2021-12-19 15:42:15.449 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676859143032832[0;39m <==        Row: 7
2021-12-19 15:42:15.450 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676859143032832[0;39m <==      Total: 1
2021-12-19 15:42:15.450 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676859143032832[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:42:15.450 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676859143032832[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:15.499 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:42:15.500 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:15.501 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:15.502 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:15.502 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:15.502 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:42:15.503 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:42:15.504 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676859143032832[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:42:15.504 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676859143032832[0;39m <==      Total: 7
2021-12-19 15:42:15.506 INFO  com.servicess.UserService                         :52   [32m127676859143032832[0;39m 总行数：7
2021-12-19 15:42:15.509 INFO  com.servicess.UserService                         :53   [32m127676859143032832[0;39m 总页数：1
2021-12-19 15:42:15.512 INFO  com.aspect.LogAspect                              :92   [32m127676859143032832[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:42:15.513 INFO  com.aspect.LogAspect                              :93   [32m127676859143032832[0;39m ------------- 结束 耗时：172 ms -------------
2021-12-19 15:42:15.516 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676859143032832[0;39m ------------- LoginInterceptor 结束 耗时：199 ms -------------
2021-12-19 15:42:16.998 INFO  com.aspect.LogAspect                              :54   [32m127676866092994560[0;39m ------------- 开始 -------------
2021-12-19 15:42:16.998 INFO  com.aspect.LogAspect                              :55   [32m127676866092994560[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:16.998 INFO  com.aspect.LogAspect                              :56   [32m127676866092994560[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:16.998 INFO  com.aspect.LogAspect                              :57   [32m127676866092994560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:16.998 INFO  com.aspect.LogAspect                              :80   [32m127676866092994560[0;39m 请求参数: []
2021-12-19 15:42:17.044 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676866092994560[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:17.044 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676866092994560[0;39m ==> Parameters: 
2021-12-19 15:42:17.088 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:17.089 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:17.091 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:17.092 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:17.093 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:17.094 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:17.094 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:17.095 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:17.096 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:17.096 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:17.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:17.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:17.098 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:17.098 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:17.099 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:17.099 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:17.099 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:17.100 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:17.100 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:17.101 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676866092994560[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:17.101 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676866092994560[0;39m <==      Total: 19
2021-12-19 15:42:17.105 INFO  com.aspect.LogAspect                              :92   [32m127676866092994560[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:17.106 INFO  com.aspect.LogAspect                              :93   [32m127676866092994560[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 15:42:17.128 INFO  com.aspect.LogAspect                              :54   [32m127676866634059776[0;39m ------------- 开始 -------------
2021-12-19 15:42:17.128 INFO  com.aspect.LogAspect                              :55   [32m127676866634059776[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:42:17.128 INFO  com.aspect.LogAspect                              :56   [32m127676866634059776[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:42:17.128 INFO  com.aspect.LogAspect                              :57   [32m127676866634059776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:17.128 INFO  com.aspect.LogAspect                              :80   [32m127676866634059776[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:17.173 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676866634059776[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:42:17.173 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676866634059776[0;39m ==> Parameters: 
2021-12-19 15:42:17.221 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676866634059776[0;39m <==    Columns: count(0)
2021-12-19 15:42:17.221 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127676866634059776[0;39m <==        Row: 6
2021-12-19 15:42:17.222 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127676866634059776[0;39m <==      Total: 1
2021-12-19 15:42:17.223 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676866634059776[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:42:17.223 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676866634059776[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:17.275 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:42:17.276 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:42:17.277 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:42:17.278 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:42:17.278 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:42:17.279 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:42:17.279 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127676866634059776[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:42:17.280 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127676866634059776[0;39m <==      Total: 6
2021-12-19 15:42:17.281 INFO  com.servicess.EbookService                        :48   [32m127676866634059776[0;39m 总行数：6
2021-12-19 15:42:17.281 INFO  com.servicess.EbookService                        :49   [32m127676866634059776[0;39m 总页数：1
2021-12-19 15:42:17.284 INFO  com.aspect.LogAspect                              :92   [32m127676866634059776[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:42:17.284 INFO  com.aspect.LogAspect                              :93   [32m127676866634059776[0;39m ------------- 结束 耗时：157 ms -------------
2021-12-19 15:42:20.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127676878705266688[0;39m 生成今日电子书快照开始
2021-12-19 15:42:20.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676878705266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:20.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676878705266688[0;39m ==> Parameters: 
2021-12-19 15:42:20.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676878705266688[0;39m <==    Updates: 0
2021-12-19 15:42:20.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127676878705266688[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-19 15:42:21.225 INFO  com.interceptor.LoginInterceptor                  :29   [32m127676829522857984[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:42:21.225 INFO  com.interceptor.LoginInterceptor                  :40   [32m127676829522857984[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:42:21.226 INFO  com.interceptor.LoginInterceptor                  :44   [32m127676829522857984[0;39m 登录校验开始，token：127676472218488832
2021-12-19 15:42:21.244 INFO  com.interceptor.LoginInterceptor                  :56   [32m127676829522857984[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127676472218488832"}
2021-12-19 15:42:21.245 INFO  com.aspect.LogAspect                              :54   [32m127676883906203648[0;39m ------------- 开始 -------------
2021-12-19 15:42:21.245 INFO  com.aspect.LogAspect                              :55   [32m127676883906203648[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:42:21.245 INFO  com.aspect.LogAspect                              :56   [32m127676883906203648[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:42:21.245 INFO  com.aspect.LogAspect                              :57   [32m127676883906203648[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:21.245 INFO  com.aspect.LogAspect                              :80   [32m127676883906203648[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:42:21.293 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676883906203648[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:42:21.293 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676883906203648[0;39m ==> Parameters: 
2021-12-19 15:42:21.337 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676883906203648[0;39m <==    Columns: count(0)
2021-12-19 15:42:21.338 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127676883906203648[0;39m <==        Row: 7
2021-12-19 15:42:21.338 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127676883906203648[0;39m <==      Total: 1
2021-12-19 15:42:21.338 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676883906203648[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:42:21.339 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676883906203648[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:42:21.388 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:42:21.389 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:21.390 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:21.391 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:21.392 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:42:21.392 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:42:21.392 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:42:21.393 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127676883906203648[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:42:21.393 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127676883906203648[0;39m <==      Total: 7
2021-12-19 15:42:21.394 INFO  com.servicess.UserService                         :52   [32m127676883906203648[0;39m 总行数：7
2021-12-19 15:42:21.395 INFO  com.servicess.UserService                         :53   [32m127676883906203648[0;39m 总页数：1
2021-12-19 15:42:21.396 INFO  com.aspect.LogAspect                              :92   [32m127676883906203648[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:42:21.396 INFO  com.aspect.LogAspect                              :93   [32m127676883906203648[0;39m ------------- 结束 耗时：151 ms -------------
2021-12-19 15:42:21.398 INFO  com.interceptor.LoginInterceptor                  :65   [32m127676883906203648[0;39m ------------- LoginInterceptor 结束 耗时：173 ms -------------
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :54   [32m127676892215119872[0;39m ------------- 开始 -------------
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :55   [32m127676892215119872[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :54   [32m127676892215119873[0;39m ------------- 开始 -------------
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :56   [32m127676892215119872[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :55   [32m127676892215119873[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :57   [32m127676892215119872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :56   [32m127676892215119873[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :54   [32m127676892215119874[0;39m ------------- 开始 -------------
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :80   [32m127676892215119872[0;39m 请求参数: []
2021-12-19 15:42:23.226 INFO  com.aspect.LogAspect                              :57   [32m127676892215119873[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:23.227 INFO  com.aspect.LogAspect                              :55   [32m127676892215119874[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:42:23.227 INFO  com.aspect.LogAspect                              :56   [32m127676892215119874[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:42:23.227 INFO  com.aspect.LogAspect                              :80   [32m127676892215119873[0;39m 请求参数: []
2021-12-19 15:42:23.227 INFO  com.aspect.LogAspect                              :57   [32m127676892215119874[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:42:23.227 INFO  com.aspect.LogAspect                              :80   [32m127676892215119874[0;39m 请求参数: []
2021-12-19 15:42:23.272 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676892215119872[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:42:23.272 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676892215119873[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:42:23.272 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676892215119872[0;39m ==> Parameters: 
2021-12-19 15:42:23.272 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676892215119873[0;39m ==> Parameters: 
2021-12-19 15:42:23.273 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676892215119874[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:42:23.273 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676892215119874[0;39m ==> Parameters: 
2021-12-19 15:42:23.322 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676892215119872[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:42:23.322 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:42:23.322 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:42:23.323 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:42:23.323 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127676892215119872[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:42:23.323 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:42:23.323 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:42:23.323 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:42:23.323 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127676892215119872[0;39m <==      Total: 1
2021-12-19 15:42:23.324 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:42:23.324 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:42:23.324 INFO  com.aspect.LogAspect                              :92   [32m127676892215119872[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:42:23.324 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:42:23.324 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:42:23.324 INFO  com.aspect.LogAspect                              :93   [32m127676892215119872[0;39m ------------- 结束 耗时：98 ms -------------
2021-12-19 15:42:23.325 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:42:23.325 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:42:23.325 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:42:23.325 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:42:23.326 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:42:23.326 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:42:23.326 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:42:23.326 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:42:23.326 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:42:23.327 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:42:23.327 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127676892215119873[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:42:23.327 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:42:23.327 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127676892215119873[0;39m <==      Total: 7
2021-12-19 15:42:23.327 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:42:23.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:42:23.328 INFO  com.aspect.LogAspect                              :92   [32m127676892215119873[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:42:23.328 INFO  com.aspect.LogAspect                              :93   [32m127676892215119873[0;39m ------------- 结束 耗时：102 ms -------------
2021-12-19 15:42:23.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:42:23.329 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:42:23.329 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:42:23.330 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127676892215119874[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:42:23.330 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127676892215119874[0;39m <==      Total: 19
2021-12-19 15:42:23.333 INFO  com.aspect.LogAspect                              :92   [32m127676892215119874[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:42:23.334 INFO  com.aspect.LogAspect                              :93   [32m127676892215119874[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 15:42:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127676899668398080[0;39m 生成今日电子书快照开始
2021-12-19 15:42:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676899668398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676899668398080[0;39m ==> Parameters: 
2021-12-19 15:42:25.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676899668398080[0;39m <==    Updates: 0
2021-12-19 15:42:25.128 INFO  com.job.EbookSnapshotJob                          :35   [32m127676899668398080[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:42:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127676920690249728[0;39m 生成今日电子书快照开始
2021-12-19 15:42:30.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676920690249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:30.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676920690249728[0;39m ==> Parameters: 
2021-12-19 15:42:30.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676920690249728[0;39m <==    Updates: 0
2021-12-19 15:42:30.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127676920690249728[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 15:42:35.012 INFO  com.job.DocJob                                    :32   [32m127676941649186816[0;39m 更新电子书下的文档数据开始
2021-12-19 15:42:35.044 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676941649186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:42:35.059 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676941649186816[0;39m ==> Parameters: 
2021-12-19 15:42:35.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127676941649186816[0;39m <==    Updates: 3
2021-12-19 15:42:35.144 INFO  com.job.DocJob                                    :35   [32m127676941649186816[0;39m 更新电子书下的文档数据结束，耗时：132毫秒
2021-12-19 15:42:35.144 INFO  com.job.EbookSnapshotJob                          :32   [32m127676942202834944[0;39m 生成今日电子书快照开始
2021-12-19 15:42:35.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676942202834944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:35.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676942202834944[0;39m ==> Parameters: 
2021-12-19 15:42:35.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676942202834944[0;39m <==    Updates: 0
2021-12-19 15:42:35.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127676942202834944[0;39m 生成今日电子书快照结束，耗时：109毫秒
2021-12-19 15:42:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127676962633289728[0;39m 生成今日电子书快照开始
2021-12-19 15:42:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676962633289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:40.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676962633289728[0;39m ==> Parameters: 
2021-12-19 15:42:40.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676962633289728[0;39m <==    Updates: 0
2021-12-19 15:42:40.275 INFO  com.job.EbookSnapshotJob                          :35   [32m127676962633289728[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-19 15:42:45.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127676983583838208[0;39m 生成今日电子书快照开始
2021-12-19 15:42:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676983583838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:45.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676983583838208[0;39m ==> Parameters: 
2021-12-19 15:42:45.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127676983583838208[0;39m <==    Updates: 0
2021-12-19 15:42:45.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127676983583838208[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 15:42:50.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127677004530192384[0;39m 生成今日电子书快照开始
2021-12-19 15:42:50.041 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677004530192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:50.041 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677004530192384[0;39m ==> Parameters: 
2021-12-19 15:42:50.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677004530192384[0;39m <==    Updates: 0
2021-12-19 15:42:50.135 INFO  com.job.EbookSnapshotJob                          :35   [32m127677004530192384[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-19 15:42:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127677025564626944[0;39m 生成今日电子书快照开始
2021-12-19 15:42:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677025564626944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:42:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677025564626944[0;39m ==> Parameters: 
2021-12-19 15:42:55.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677025564626944[0;39m <==    Updates: 0
2021-12-19 15:42:55.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127677025564626944[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 15:43:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127677046515175424[0;39m 生成今日电子书快照开始
2021-12-19 15:43:00.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677046515175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:43:00.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677046515175424[0;39m ==> Parameters: 
2021-12-19 15:43:00.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677046515175424[0;39m <==    Updates: 0
2021-12-19 15:43:00.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127677046515175424[0;39m 生成今日电子书快照结束，耗时：135毫秒
2021-12-19 15:43:02.134 INFO  com.websocket.WebSocketServer                     :41   [32m127676840860061696[0;39m 连接关闭，token：6KejYBcRbE，session id：5！当前连接数：0
2021-12-19 15:43:05.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127677067482501120[0;39m 生成今日电子书快照开始
2021-12-19 15:43:05.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677067482501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:43:05.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677067482501120[0;39m ==> Parameters: 
2021-12-19 15:43:05.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677067482501120[0;39m <==    Updates: 0
2021-12-19 15:43:05.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127677067482501120[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 15:43:05.158 INFO  com.job.DocJob                                    :32   [32m127677068090675200[0;39m 更新电子书下的文档数据开始
2021-12-19 15:43:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677068090675200[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:43:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677068090675200[0;39m ==> Parameters: 
2021-12-19 15:43:05.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677068090675200[0;39m <==    Updates: 3
2021-12-19 15:43:05.268 INFO  com.job.DocJob                                    :35   [32m127677068090675200[0;39m 更新电子书下的文档数据结束，耗时：110毫秒
2021-12-19 15:45:08.854 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 8044 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 15:45:08.854 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 15:45:08.903 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 15:45:08.931 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 15:45:08.931 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 15:45:11.030 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 15:45:11.030 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 15:45:11.671 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 617 ms. Found 0 Redis repository interfaces.
2021-12-19 15:45:12.358 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 15:45:12.358 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 15:45:12.358 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 15:45:12.358 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 15:45:12.421 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 15:45:12.421 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3490 ms
2021-12-19 15:45:13.689 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 15:45:13.704 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 15:45:13.736 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 15:45:13.736 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.773 seconds (JVM running for 7.208)
2021-12-19 15:45:15.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127677612771381248[0;39m 生成今日电子书快照开始
2021-12-19 15:45:15.051 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127677612771381248[0;39m HikariPool-1 - Starting...
2021-12-19 15:45:15.814 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127677612771381248[0;39m HikariPool-1 - Start completed.
2021-12-19 15:45:15.833 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677612771381248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:15.848 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677612771381248[0;39m ==> Parameters: 
2021-12-19 15:45:15.942 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677612771381248[0;39m <==    Updates: 0
2021-12-19 15:45:15.958 INFO  com.job.EbookSnapshotJob                          :35   [32m127677612771381248[0;39m 生成今日电子书快照结束，耗时：938毫秒
2021-12-19 15:45:20.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127677633742901248[0;39m 生成今日电子书快照开始
2021-12-19 15:45:20.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677633742901248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:20.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677633742901248[0;39m ==> Parameters: 
2021-12-19 15:45:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677633742901248[0;39m <==    Updates: 0
2021-12-19 15:45:20.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127677633742901248[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 15:45:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127677654685061120[0;39m 生成今日电子书快照开始
2021-12-19 15:45:25.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677654685061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:25.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677654685061120[0;39m ==> Parameters: 
2021-12-19 15:45:25.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677654685061120[0;39m <==    Updates: 0
2021-12-19 15:45:25.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127677654685061120[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 15:45:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127677675648192512[0;39m 生成今日电子书快照开始
2021-12-19 15:45:30.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677675648192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:30.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677675648192512[0;39m ==> Parameters: 
2021-12-19 15:45:30.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677675648192512[0;39m <==    Updates: 0
2021-12-19 15:45:30.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127677675648192512[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 15:45:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127677696632295424[0;39m 生成今日电子书快照开始
2021-12-19 15:45:35.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677696632295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:35.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677696632295424[0;39m ==> Parameters: 
2021-12-19 15:45:35.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677696632295424[0;39m <==    Updates: 0
2021-12-19 15:45:35.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127677696632295424[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-19 15:45:35.236 INFO  com.job.DocJob                                    :32   [32m127677697563430912[0;39m 更新电子书下的文档数据开始
2021-12-19 15:45:35.252 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677697563430912[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:45:35.252 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677697563430912[0;39m ==> Parameters: 
2021-12-19 15:45:35.348 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677697563430912[0;39m <==    Updates: 3
2021-12-19 15:45:35.348 INFO  com.job.DocJob                                    :35   [32m127677697563430912[0;39m 更新电子书下的文档数据结束，耗时：96毫秒
2021-12-19 15:45:40.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127677717620592640[0;39m 生成今日电子书快照开始
2021-12-19 15:45:40.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677717620592640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:40.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677717620592640[0;39m ==> Parameters: 
2021-12-19 15:45:40.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677717620592640[0;39m <==    Updates: 0
2021-12-19 15:45:40.195 INFO  com.job.EbookSnapshotJob                          :35   [32m127677717620592640[0;39m 生成今日电子书快照结束，耗时：177毫秒
2021-12-19 15:45:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127677738575335424[0;39m 生成今日电子书快照开始
2021-12-19 15:45:45.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677738575335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:45.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677738575335424[0;39m ==> Parameters: 
2021-12-19 15:45:45.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677738575335424[0;39m <==    Updates: 0
2021-12-19 15:45:45.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127677738575335424[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:45:50.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127677759546855424[0;39m 生成今日电子书快照开始
2021-12-19 15:45:50.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677759546855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:50.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677759546855424[0;39m ==> Parameters: 
2021-12-19 15:45:50.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677759546855424[0;39m <==    Updates: 0
2021-12-19 15:45:50.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127677759546855424[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:45:55.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127677780560318464[0;39m 生成今日电子书快照开始
2021-12-19 15:45:55.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677780560318464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:45:55.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677780560318464[0;39m ==> Parameters: 
2021-12-19 15:45:55.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677780560318464[0;39m <==    Updates: 0
2021-12-19 15:45:55.176 INFO  com.job.EbookSnapshotJob                          :35   [32m127677780560318464[0;39m 生成今日电子书快照结束，耗时：152毫秒
2021-12-19 15:45:55.334 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 15:45:55.335 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 15:45:55.336 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 15:45:55.376 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：dL8CO3G8qF，session id：0，当前连接数：1
2021-12-19 15:45:55.716 INFO  com.aspect.LogAspect                              :54   [32m127677783458582528[0;39m ------------- 开始 -------------
2021-12-19 15:45:55.716 INFO  com.aspect.LogAspect                              :54   [32m127677783458582529[0;39m ------------- 开始 -------------
2021-12-19 15:45:55.717 INFO  com.aspect.LogAspect                              :55   [32m127677783458582528[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:45:55.717 INFO  com.aspect.LogAspect                              :55   [32m127677783458582529[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:45:55.718 INFO  com.aspect.LogAspect                              :56   [32m127677783458582529[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:45:55.718 INFO  com.aspect.LogAspect                              :56   [32m127677783458582528[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:45:55.718 INFO  com.aspect.LogAspect                              :57   [32m127677783458582529[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:45:55.718 INFO  com.aspect.LogAspect                              :57   [32m127677783458582528[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:45:55.734 INFO  com.aspect.LogAspect                              :54   [32m127677783538274304[0;39m ------------- 开始 -------------
2021-12-19 15:45:55.735 INFO  com.aspect.LogAspect                              :55   [32m127677783538274304[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:45:55.736 INFO  com.aspect.LogAspect                              :56   [32m127677783538274304[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:45:55.736 INFO  com.aspect.LogAspect                              :57   [32m127677783538274304[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:45:55.813 INFO  com.aspect.LogAspect                              :80   [32m127677783458582529[0;39m 请求参数: []
2021-12-19 15:45:55.813 INFO  com.aspect.LogAspect                              :80   [32m127677783538274304[0;39m 请求参数: []
2021-12-19 15:45:55.822 INFO  com.aspect.LogAspect                              :80   [32m127677783458582528[0;39m 请求参数: []
2021-12-19 15:45:55.864 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677783458582528[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:45:55.865 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677783458582528[0;39m ==> Parameters: 
2021-12-19 15:45:55.865 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677783458582529[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:45:55.866 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677783458582529[0;39m ==> Parameters: 
2021-12-19 15:45:55.900 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677783538274304[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:45:55.901 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677783538274304[0;39m ==> Parameters: 
2021-12-19 15:45:55.938 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127677783458582529[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:45:55.938 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:45:55.940 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127677783458582529[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:45:55.940 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:45:55.943 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677783458582529[0;39m <==      Total: 1
2021-12-19 15:45:55.943 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:45:55.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:45:55.945 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:45:55.947 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:45:55.948 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:45:55.949 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:45:55.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:45:55.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:45:55.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:45:55.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:45:55.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:45:55.953 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:45:55.954 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:45:55.955 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:45:55.956 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:45:55.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:45:55.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:45:55.955 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677783458582528[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:45:55.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:45:55.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:45:55.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:45:55.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:45:55.960 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677783458582528[0;39m <==      Total: 7
2021-12-19 15:45:55.961 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:45:55.963 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:45:55.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:45:55.965 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677783538274304[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:45:55.965 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677783538274304[0;39m <==      Total: 19
2021-12-19 15:45:55.980 INFO  com.aspect.LogAspect                              :92   [32m127677783538274304[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:45:55.981 INFO  com.aspect.LogAspect                              :93   [32m127677783538274304[0;39m ------------- 结束 耗时：247 ms -------------
2021-12-19 15:45:55.981 INFO  com.aspect.LogAspect                              :92   [32m127677783458582529[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:45:55.981 INFO  com.aspect.LogAspect                              :93   [32m127677783458582529[0;39m ------------- 结束 耗时：266 ms -------------
2021-12-19 15:45:55.982 INFO  com.aspect.LogAspect                              :92   [32m127677783458582528[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:45:55.983 INFO  com.aspect.LogAspect                              :93   [32m127677783458582528[0;39m ------------- 结束 耗时：269 ms -------------
2021-12-19 15:45:59.999 INFO  com.job.EbookSnapshotJob                          :32   [32m127677801426980864[0;39m 生成今日电子书快照开始
2021-12-19 15:46:00.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677801426980864[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:00.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677801426980864[0;39m ==> Parameters: 
2021-12-19 15:46:00.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677801426980864[0;39m <==    Updates: 0
2021-12-19 15:46:00.139 INFO  com.job.EbookSnapshotJob                          :35   [32m127677801426980864[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 15:46:05.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127677822465609728[0;39m 生成今日电子书快照开始
2021-12-19 15:46:05.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677822465609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:05.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677822465609728[0;39m ==> Parameters: 
2021-12-19 15:46:05.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677822465609728[0;39m <==    Updates: 0
2021-12-19 15:46:05.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127677822465609728[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:46:05.158 INFO  com.job.DocJob                                    :32   [32m127677823065395200[0;39m 更新电子书下的文档数据开始
2021-12-19 15:46:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677823065395200[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:46:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677823065395200[0;39m ==> Parameters: 
2021-12-19 15:46:05.252 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677823065395200[0;39m <==    Updates: 3
2021-12-19 15:46:05.267 INFO  com.job.DocJob                                    :35   [32m127677823065395200[0;39m 更新电子书下的文档数据结束，耗时：109毫秒
2021-12-19 15:46:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127677843424546816[0;39m 生成今日电子书快照开始
2021-12-19 15:46:10.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677843424546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:10.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677843424546816[0;39m ==> Parameters: 
2021-12-19 15:46:10.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677843424546816[0;39m <==    Updates: 0
2021-12-19 15:46:10.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127677843424546816[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 15:46:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127677864396066816[0;39m 生成今日电子书快照开始
2021-12-19 15:46:15.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677864396066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:15.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677864396066816[0;39m ==> Parameters: 
2021-12-19 15:46:15.133 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677864396066816[0;39m <==    Updates: 0
2021-12-19 15:46:15.133 INFO  com.job.EbookSnapshotJob                          :35   [32m127677864396066816[0;39m 生成今日电子书快照结束，耗时：121毫秒
2021-12-19 15:46:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127677885375975424[0;39m 生成今日电子书快照开始
2021-12-19 15:46:20.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677885375975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:20.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677885375975424[0;39m ==> Parameters: 
2021-12-19 15:46:20.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677885375975424[0;39m <==    Updates: 0
2021-12-19 15:46:20.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127677885375975424[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 15:46:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127677906322329600[0;39m 生成今日电子书快照开始
2021-12-19 15:46:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677906322329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677906322329600[0;39m ==> Parameters: 
2021-12-19 15:46:25.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677906322329600[0;39m <==    Updates: 0
2021-12-19 15:46:25.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127677906322329600[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-19 15:46:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127677927306432512[0;39m 生成今日电子书快照开始
2021-12-19 15:46:30.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677927306432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:30.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677927306432512[0;39m ==> Parameters: 
2021-12-19 15:46:30.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677927306432512[0;39m <==    Updates: 0
2021-12-19 15:46:30.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127677927306432512[0;39m 生成今日电子书快照结束，耗时：132毫秒
2021-12-19 15:46:34.122 INFO  com.aspect.LogAspect                              :54   [32m127677944549216256[0;39m ------------- 开始 -------------
2021-12-19 15:46:34.122 INFO  com.aspect.LogAspect                              :55   [32m127677944549216256[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-19 15:46:34.122 INFO  com.aspect.LogAspect                              :56   [32m127677944549216256[0;39m 类名方法: com.controller.UserController.login
2021-12-19 15:46:34.122 INFO  com.aspect.LogAspect                              :57   [32m127677944549216256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:34.123 INFO  com.aspect.LogAspect                              :80   [32m127677944549216256[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-19 15:46:34.193 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127677944549216256[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-19 15:46:34.194 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127677944549216256[0;39m ==> Parameters: test123(String)
2021-12-19 15:46:34.245 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677944549216256[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:46:34.245 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677944549216256[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:46:34.245 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127677944549216256[0;39m <==      Total: 1
2021-12-19 15:46:34.266 INFO  com.controller.UserController                     :77   [32m127677944549216256[0;39m 生成单点登录token:127677945153196032,并放入redis中
2021-12-19 15:46:34.790 INFO  com.aspect.LogAspect                              :92   [32m127677944549216256[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127677945153196032"},"success":true}
2021-12-19 15:46:34.791 INFO  com.aspect.LogAspect                              :93   [32m127677944549216256[0;39m ------------- 结束 耗时：669 ms -------------
2021-12-19 15:46:34.938 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：dL8CO3G8qF，session id：0！当前连接数：0
2021-12-19 15:46:35.012 INFO  com.job.DocJob                                    :32   [32m127677948282146816[0;39m 更新电子书下的文档数据开始
2021-12-19 15:46:35.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677948282146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:46:35.063 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677948282146816[0;39m ==> Parameters: 
2021-12-19 15:46:35.154 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127677948282146816[0;39m <==    Updates: 3
2021-12-19 15:46:35.154 INFO  com.job.DocJob                                    :35   [32m127677948282146816[0;39m 更新电子书下的文档数据结束，耗时：141毫秒
2021-12-19 15:46:35.154 INFO  com.job.EbookSnapshotJob                          :32   [32m127677948877737984[0;39m 生成今日电子书快照开始
2021-12-19 15:46:35.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677948877737984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:35.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677948877737984[0;39m ==> Parameters: 
2021-12-19 15:46:35.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677948877737984[0;39m <==    Updates: 0
2021-12-19 15:46:35.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127677948877737984[0;39m 生成今日电子书快照结束，耗时：102毫秒
2021-12-19 15:46:36.043 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：9JqXpElRVu，session id：1，当前连接数：1
2021-12-19 15:46:36.136 INFO  com.aspect.LogAspect                              :54   [32m127677952996544512[0;39m ------------- 开始 -------------
2021-12-19 15:46:36.137 INFO  com.aspect.LogAspect                              :55   [32m127677952996544512[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:46:36.137 INFO  com.aspect.LogAspect                              :54   [32m127677953000738816[0;39m ------------- 开始 -------------
2021-12-19 15:46:36.137 INFO  com.aspect.LogAspect                              :56   [32m127677952996544512[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:46:36.137 INFO  com.aspect.LogAspect                              :55   [32m127677953000738816[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:46:36.137 INFO  com.aspect.LogAspect                              :57   [32m127677952996544512[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:36.138 INFO  com.aspect.LogAspect                              :56   [32m127677953000738816[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:46:36.138 INFO  com.aspect.LogAspect                              :80   [32m127677952996544512[0;39m 请求参数: []
2021-12-19 15:46:36.138 INFO  com.aspect.LogAspect                              :57   [32m127677953000738816[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:36.138 INFO  com.aspect.LogAspect                              :80   [32m127677953000738816[0;39m 请求参数: []
2021-12-19 15:46:36.141 INFO  com.aspect.LogAspect                              :54   [32m127677953017516032[0;39m ------------- 开始 -------------
2021-12-19 15:46:36.141 INFO  com.aspect.LogAspect                              :55   [32m127677953017516032[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:46:36.142 INFO  com.aspect.LogAspect                              :56   [32m127677953017516032[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:46:36.142 INFO  com.aspect.LogAspect                              :57   [32m127677953017516032[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:36.142 INFO  com.aspect.LogAspect                              :80   [32m127677953017516032[0;39m 请求参数: []
2021-12-19 15:46:36.179 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677952996544512[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:46:36.180 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677952996544512[0;39m ==> Parameters: 
2021-12-19 15:46:36.188 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677953000738816[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:46:36.188 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677953017516032[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:46:36.189 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677953000738816[0;39m ==> Parameters: 
2021-12-19 15:46:36.189 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677953017516032[0;39m ==> Parameters: 
2021-12-19 15:46:36.223 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127677952996544512[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:46:36.224 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127677952996544512[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:46:36.225 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677952996544512[0;39m <==      Total: 1
2021-12-19 15:46:36.226 INFO  com.aspect.LogAspect                              :92   [32m127677952996544512[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:46:36.226 INFO  com.aspect.LogAspect                              :93   [32m127677952996544512[0;39m ------------- 结束 耗时：90 ms -------------
2021-12-19 15:46:36.238 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:46:36.238 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:46:36.238 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:46:36.239 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:46:36.239 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:46:36.239 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:46:36.239 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:46:36.240 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:46:36.240 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:46:36.240 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:46:36.240 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:46:36.240 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677953000738816[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:46:36.240 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677953000738816[0;39m <==      Total: 7
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:46:36.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:46:36.240 INFO  com.aspect.LogAspect                              :92   [32m127677953000738816[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:46:36.248 INFO  com.aspect.LogAspect                              :93   [32m127677953000738816[0;39m ------------- 结束 耗时：111 ms -------------
2021-12-19 15:46:36.248 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:46:36.248 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:46:36.249 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677953017516032[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:46:36.249 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677953017516032[0;39m <==      Total: 19
2021-12-19 15:46:36.251 INFO  com.aspect.LogAspect                              :92   [32m127677953017516032[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:46:36.252 INFO  com.aspect.LogAspect                              :93   [32m127677953017516032[0;39m ------------- 结束 耗时：111 ms -------------
2021-12-19 15:46:40.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127677969224306688[0;39m 生成今日电子书快照开始
2021-12-19 15:46:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677969224306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:40.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677969224306688[0;39m ==> Parameters: 
2021-12-19 15:46:40.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677969224306688[0;39m <==    Updates: 0
2021-12-19 15:46:40.175 INFO  com.job.EbookSnapshotJob                          :35   [32m127677969224306688[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-19 15:46:41.631 INFO  com.aspect.LogAspect                              :54   [32m127677976044244992[0;39m ------------- 开始 -------------
2021-12-19 15:46:41.631 INFO  com.aspect.LogAspect                              :55   [32m127677976044244992[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:46:41.631 INFO  com.aspect.LogAspect                              :56   [32m127677976044244992[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:46:41.632 INFO  com.aspect.LogAspect                              :57   [32m127677976044244992[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:41.632 INFO  com.aspect.LogAspect                              :80   [32m127677976044244992[0;39m 请求参数: []
2021-12-19 15:46:41.677 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677976044244992[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:46:41.679 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677976044244992[0;39m ==> Parameters: 
2021-12-19 15:46:41.722 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:46:41.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:46:41.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:46:41.726 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:46:41.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:46:41.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:46:41.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:46:41.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:46:41.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:46:41.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:46:41.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:46:41.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:46:41.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:46:41.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:46:41.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:46:41.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:46:41.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:46:41.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:46:41.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:46:41.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677976044244992[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:46:41.730 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677976044244992[0;39m <==      Total: 19
2021-12-19 15:46:41.731 INFO  com.aspect.LogAspect                              :92   [32m127677976044244992[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:46:41.731 INFO  com.aspect.LogAspect                              :93   [32m127677976044244992[0;39m ------------- 结束 耗时：100 ms -------------
2021-12-19 15:46:42.310 INFO  com.aspect.LogAspect                              :54   [32m127677978892177408[0;39m ------------- 开始 -------------
2021-12-19 15:46:42.310 INFO  com.aspect.LogAspect                              :55   [32m127677978892177408[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:46:42.311 INFO  com.aspect.LogAspect                              :56   [32m127677978892177408[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:46:42.311 INFO  com.aspect.LogAspect                              :57   [32m127677978892177408[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:42.311 INFO  com.aspect.LogAspect                              :80   [32m127677978892177408[0;39m 请求参数: []
2021-12-19 15:46:42.356 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677978892177408[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:46:42.358 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677978892177408[0;39m ==> Parameters: 
2021-12-19 15:46:42.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:46:42.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:46:42.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:46:42.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:46:42.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:46:42.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:46:42.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:46:42.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:46:42.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:46:42.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:46:42.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:46:42.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:46:42.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:46:42.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:46:42.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:46:42.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:46:42.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:46:42.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:46:42.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:46:42.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677978892177408[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:46:42.417 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677978892177408[0;39m <==      Total: 19
2021-12-19 15:46:42.418 INFO  com.aspect.LogAspect                              :92   [32m127677978892177408[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:46:42.418 INFO  com.aspect.LogAspect                              :93   [32m127677978892177408[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 15:46:42.461 INFO  com.aspect.LogAspect                              :54   [32m127677979525517312[0;39m ------------- 开始 -------------
2021-12-19 15:46:42.461 INFO  com.aspect.LogAspect                              :55   [32m127677979525517312[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:46:42.461 INFO  com.aspect.LogAspect                              :56   [32m127677979525517312[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:46:42.461 INFO  com.aspect.LogAspect                              :57   [32m127677979525517312[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:42.463 INFO  com.aspect.LogAspect                              :80   [32m127677979525517312[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:46:42.502 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127677979525517312[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-19 15:46:42.502 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127677979525517312[0;39m ==> Parameters: 
2021-12-19 15:46:42.552 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127677979525517312[0;39m <==    Columns: count(0)
2021-12-19 15:46:42.552 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127677979525517312[0;39m <==        Row: 6
2021-12-19 15:46:42.553 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127677979525517312[0;39m <==      Total: 1
2021-12-19 15:46:42.555 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127677979525517312[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-19 15:46:42.556 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127677979525517312[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:46:42.608 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:46:42.609 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 15:46:42.609 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:46:42.610 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-19 15:46:42.610 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-19 15:46:42.611 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-19 15:46:42.611 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677979525517312[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:46:42.611 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127677979525517312[0;39m <==      Total: 6
2021-12-19 15:46:42.612 INFO  com.servicess.EbookService                        :48   [32m127677979525517312[0;39m 总行数：6
2021-12-19 15:46:42.613 INFO  com.servicess.EbookService                        :49   [32m127677979525517312[0;39m 总页数：1
2021-12-19 15:46:42.624 INFO  com.aspect.LogAspect                              :92   [32m127677979525517312[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-19 15:46:42.625 INFO  com.aspect.LogAspect                              :93   [32m127677979525517312[0;39m ------------- 结束 耗时：164 ms -------------
2021-12-19 15:46:42.814 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:46:42.814 INFO  com.interceptor.LoginInterceptor                  :65   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-19 15:46:42.817 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:46:42.818 INFO  com.interceptor.LoginInterceptor                  :40   [32m                  [0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-19 15:46:42.818 INFO  com.interceptor.LoginInterceptor                  :44   [32m                  [0;39m 登录校验开始，token：127677945153196032
2021-12-19 15:46:42.836 INFO  com.interceptor.LoginInterceptor                  :56   [32m                  [0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127677945153196032"}
2021-12-19 15:46:42.849 INFO  com.aspect.LogAspect                              :54   [32m127677981152907264[0;39m ------------- 开始 -------------
2021-12-19 15:46:42.849 INFO  com.aspect.LogAspect                              :55   [32m127677981152907264[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-19 15:46:42.849 INFO  com.aspect.LogAspect                              :56   [32m127677981152907264[0;39m 类名方法: com.controller.UserController.list
2021-12-19 15:46:42.849 INFO  com.aspect.LogAspect                              :57   [32m127677981152907264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:42.851 INFO  com.aspect.LogAspect                              :80   [32m127677981152907264[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-19 15:46:42.858 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127677981152907264[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-19 15:46:42.859 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127677981152907264[0;39m ==> Parameters: 
2021-12-19 15:46:42.904 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127677981152907264[0;39m <==    Columns: count(0)
2021-12-19 15:46:42.904 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127677981152907264[0;39m <==        Row: 7
2021-12-19 15:46:42.908 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127677981152907264[0;39m <==      Total: 1
2021-12-19 15:46:42.911 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127677981152907264[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-19 15:46:42.913 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127677981152907264[0;39m ==> Parameters: 10(Integer)
2021-12-19 15:46:42.962 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:46:42.963 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:46:42.965 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:46:42.967 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:46:42.968 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-19 15:46:42.968 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-19 15:46:42.969 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:46:42.970 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127677981152907264[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:46:42.971 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127677981152907264[0;39m <==      Total: 7
2021-12-19 15:46:42.977 INFO  com.servicess.UserService                         :52   [32m127677981152907264[0;39m 总行数：7
2021-12-19 15:46:42.978 INFO  com.servicess.UserService                         :53   [32m127677981152907264[0;39m 总页数：1
2021-12-19 15:46:42.998 INFO  com.aspect.LogAspect                              :92   [32m127677981152907264[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-19 15:46:42.998 INFO  com.aspect.LogAspect                              :93   [32m127677981152907264[0;39m ------------- 结束 耗时：149 ms -------------
2021-12-19 15:46:43.001 INFO  com.interceptor.LoginInterceptor                  :65   [32m127677981152907264[0;39m ------------- LoginInterceptor 结束 耗时：183 ms -------------
2021-12-19 15:46:43.707 INFO  com.aspect.LogAspect                              :54   [32m127677984751620096[0;39m ------------- 开始 -------------
2021-12-19 15:46:43.708 INFO  com.aspect.LogAspect                              :55   [32m127677984751620096[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:46:43.708 INFO  com.aspect.LogAspect                              :56   [32m127677984751620096[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:46:43.708 INFO  com.aspect.LogAspect                              :57   [32m127677984751620096[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:43.709 INFO  com.aspect.LogAspect                              :80   [32m127677984751620096[0;39m 请求参数: []
2021-12-19 15:46:43.709 INFO  com.aspect.LogAspect                              :54   [32m127677984760008704[0;39m ------------- 开始 -------------
2021-12-19 15:46:43.709 INFO  com.aspect.LogAspect                              :55   [32m127677984760008704[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:46:43.709 INFO  com.aspect.LogAspect                              :56   [32m127677984760008704[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:46:43.710 INFO  com.aspect.LogAspect                              :57   [32m127677984760008704[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:43.710 INFO  com.aspect.LogAspect                              :80   [32m127677984760008704[0;39m 请求参数: []
2021-12-19 15:46:43.713 INFO  com.aspect.LogAspect                              :54   [32m127677984776785920[0;39m ------------- 开始 -------------
2021-12-19 15:46:43.713 INFO  com.aspect.LogAspect                              :55   [32m127677984776785920[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:46:43.713 INFO  com.aspect.LogAspect                              :56   [32m127677984776785920[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:46:43.713 INFO  com.aspect.LogAspect                              :57   [32m127677984776785920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:43.714 INFO  com.aspect.LogAspect                              :80   [32m127677984776785920[0;39m 请求参数: []
2021-12-19 15:46:43.752 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677984760008704[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:46:43.752 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677984760008704[0;39m ==> Parameters: 
2021-12-19 15:46:43.756 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677984751620096[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:46:43.756 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677984751620096[0;39m ==> Parameters: 
2021-12-19 15:46:43.757 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677984776785920[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:46:43.757 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677984776785920[0;39m ==> Parameters: 
2021-12-19 15:46:43.794 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:46:43.795 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:46:43.796 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:46:43.797 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:46:43.797 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:46:43.798 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:46:43.798 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:46:43.799 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127677984760008704[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:46:43.799 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127677984760008704[0;39m <==      Total: 7
2021-12-19 15:46:43.800 INFO  com.aspect.LogAspect                              :92   [32m127677984760008704[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:46:43.800 INFO  com.aspect.LogAspect                              :93   [32m127677984760008704[0;39m ------------- 结束 耗时：91 ms -------------
2021-12-19 15:46:43.808 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127677984751620096[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:46:43.809 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:46:43.809 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127677984751620096[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:46:43.809 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:46:43.810 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:46:43.810 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127677984751620096[0;39m <==      Total: 1
2021-12-19 15:46:43.810 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:46:43.810 INFO  com.aspect.LogAspect                              :92   [32m127677984751620096[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:46:43.811 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:46:43.811 INFO  com.aspect.LogAspect                              :93   [32m127677984751620096[0;39m ------------- 结束 耗时：104 ms -------------
2021-12-19 15:46:43.811 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:46:43.811 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:46:43.812 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:46:43.813 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:46:43.813 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:46:43.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:46:43.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:46:43.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:46:43.815 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:46:43.815 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:46:43.816 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:46:43.816 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:46:43.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:46:43.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:46:43.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127677984776785920[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:46:43.818 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127677984776785920[0;39m <==      Total: 19
2021-12-19 15:46:43.820 INFO  com.aspect.LogAspect                              :92   [32m127677984776785920[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:46:43.820 INFO  com.aspect.LogAspect                              :93   [32m127677984776785920[0;39m ------------- 结束 耗时：107 ms -------------
2021-12-19 15:46:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127677990225186816[0;39m 生成今日电子书快照开始
2021-12-19 15:46:45.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677990225186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:45.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677990225186816[0;39m ==> Parameters: 
2021-12-19 15:46:45.169 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127677990225186816[0;39m <==    Updates: 0
2021-12-19 15:46:45.170 INFO  com.job.EbookSnapshotJob                          :35   [32m127677990225186816[0;39m 生成今日电子书快照结束，耗时：158毫秒
2021-12-19 15:46:46.300 INFO  com.aspect.LogAspect                              :54   [32m127677995627450368[0;39m ------------- 开始 -------------
2021-12-19 15:46:46.300 INFO  com.aspect.LogAspect                              :55   [32m127677995627450368[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:46:46.300 INFO  com.aspect.LogAspect                              :56   [32m127677995627450368[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:46:46.300 INFO  com.aspect.LogAspect                              :57   [32m127677995627450368[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:46.301 INFO  com.aspect.LogAspect                              :80   [32m127677995627450368[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-19 15:46:46.366 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127677995627450368[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 15:46:46.366 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127677995627450368[0;39m ==> Parameters: 101(Long)
2021-12-19 15:46:46.422 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127677995627450368[0;39m <==    Columns: count(0)
2021-12-19 15:46:46.423 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127677995627450368[0;39m <==        Row: 1
2021-12-19 15:46:46.424 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127677995627450368[0;39m <==      Total: 1
2021-12-19 15:46:46.426 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127677995627450368[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 15:46:46.428 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127677995627450368[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-19 15:46:46.477 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677995627450368[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:46:46.478 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127677995627450368[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 76, 28
2021-12-19 15:46:46.479 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127677995627450368[0;39m <==      Total: 1
2021-12-19 15:46:46.480 INFO  com.servicess.EbookService                        :48   [32m127677995627450368[0;39m 总行数：1
2021-12-19 15:46:46.481 INFO  com.servicess.EbookService                        :49   [32m127677995627450368[0;39m 总页数：1
2021-12-19 15:46:46.482 INFO  com.aspect.LogAspect                              :92   [32m127677995627450368[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":76,"voteCount":28}],"total":1},"success":true}
2021-12-19 15:46:46.483 INFO  com.aspect.LogAspect                              :93   [32m127677995627450368[0;39m ------------- 结束 耗时：183 ms -------------
2021-12-19 15:46:48.020 INFO  com.aspect.LogAspect                              :54   [32m127678002841653248[0;39m ------------- 开始 -------------
2021-12-19 15:46:48.020 INFO  com.aspect.LogAspect                              :55   [32m127678002841653248[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-19 15:46:48.020 INFO  com.aspect.LogAspect                              :56   [32m127678002841653248[0;39m 类名方法: com.controller.DocController.all
2021-12-19 15:46:48.021 INFO  com.aspect.LogAspect                              :57   [32m127678002841653248[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:48.021 INFO  com.aspect.LogAspect                              :80   [32m127678002841653248[0;39m 请求参数: [2]
2021-12-19 15:46:48.073 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127678002841653248[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-19 15:46:48.074 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127678002841653248[0;39m ==> Parameters: 2(Long)
2021-12-19 15:46:48.119 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 15:46:48.120 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 9, 2, 0, 文档1, 1, 32, 5
2021-12-19 15:46:48.121 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-19 15:46:48.122 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 10, 4
2021-12-19 15:46:48.123 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 7, 5
2021-12-19 15:46:48.124 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-19 15:46:48.125 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 7, 4
2021-12-19 15:46:48.125 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 4, 4
2021-12-19 15:46:48.126 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127678002841653248[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 2, 2
2021-12-19 15:46:48.127 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127678002841653248[0;39m <==      Total: 8
2021-12-19 15:46:48.151 INFO  com.aspect.LogAspect                              :92   [32m127678002841653248[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":32,"voteCount":5},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":10,"voteCount":4},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":7,"voteCount":5},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":7,"voteCount":4},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":4,"voteCount":4},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":2,"voteCount":2}],"success":true}
2021-12-19 15:46:48.151 INFO  com.aspect.LogAspect                              :93   [32m127678002841653248[0;39m ------------- 结束 耗时：131 ms -------------
2021-12-19 15:46:48.183 INFO  com.aspect.LogAspect                              :54   [32m127678003525324800[0;39m ------------- 开始 -------------
2021-12-19 15:46:48.184 INFO  com.aspect.LogAspect                              :55   [32m127678003525324800[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-19 15:46:48.184 INFO  com.aspect.LogAspect                              :56   [32m127678003525324800[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 15:46:48.184 INFO  com.aspect.LogAspect                              :57   [32m127678003525324800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:48.184 INFO  com.aspect.LogAspect                              :80   [32m127678003525324800[0;39m 请求参数: [9]
2021-12-19 15:46:48.184 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127678003525324800[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 15:46:48.185 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127678003525324800[0;39m ==> Parameters: 9(Long)
2021-12-19 15:46:48.233 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127678003525324800[0;39m <==      Total: 0
2021-12-19 15:46:48.234 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127678003525324800[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 15:46:48.235 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127678003525324800[0;39m ==> Parameters: 9(Long)
2021-12-19 15:46:48.333 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127678003525324800[0;39m <==    Updates: 1
2021-12-19 15:46:48.333 INFO  com.aspect.LogAspect                              :92   [32m127678003525324800[0;39m 返回结果: {"content":"","success":true}
2021-12-19 15:46:48.333 INFO  com.aspect.LogAspect                              :93   [32m127678003525324800[0;39m ------------- 结束 耗时：150 ms -------------
2021-12-19 15:46:49.764 INFO  com.aspect.LogAspect                              :54   [32m127678010156519424[0;39m ------------- 开始 -------------
2021-12-19 15:46:49.765 INFO  com.aspect.LogAspect                              :55   [32m127678010156519424[0;39m 请求地址: http://localhost:8081/doc/vote/9 GET
2021-12-19 15:46:49.765 INFO  com.aspect.LogAspect                              :56   [32m127678010156519424[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 15:46:49.765 INFO  com.aspect.LogAspect                              :57   [32m127678010156519424[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:49.766 INFO  com.aspect.LogAspect                              :80   [32m127678010156519424[0;39m 请求参数: [9]
2021-12-19 15:46:49.793 INFO  com.Util.RedisUtil                                :31   [32m127678010156519424[0;39m key不存在，放入：DOC_VOTE_9_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 15:46:49.859 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127678010156519424[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 15:46:49.860 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127678010156519424[0;39m ==> Parameters: 9(Long)
2021-12-19 15:46:49.943 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127678010156519424[0;39m <==    Updates: 1
2021-12-19 15:46:49.945 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127678010156519424[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 15:46:49.946 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127678010156519424[0;39m ==> Parameters: 9(Long)
2021-12-19 15:46:49.992 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127678010156519424[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 15:46:49.993 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127678010156519424[0;39m <==        Row: 9, 2, 0, 文档1, 1, 33, 6
2021-12-19 15:46:49.994 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127678010156519424[0;39m <==      Total: 1
2021-12-19 15:46:50.003 INFO  com.aspect.LogAspect                              :92   [32m127678010156519424[0;39m 返回结果: {"success":true}
2021-12-19 15:46:50.004 INFO  com.aspect.LogAspect                              :93   [32m127678010156519424[0;39m ------------- 结束 耗时：240 ms -------------
2021-12-19 15:46:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127678011192512512[0;39m 生成今日电子书快照开始
2021-12-19 15:46:50.021 INFO  com.websocket.WebSocketServer                     :71   [32m127678010156519424[0;39m 推送消息：9JqXpElRVu，内容：【文档1】被点赞！
2021-12-19 15:46:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678011192512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678011192512512[0;39m ==> Parameters: 
2021-12-19 15:46:50.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678011192512512[0;39m <==    Updates: 0
2021-12-19 15:46:50.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127678011192512512[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 15:46:51.138 INFO  com.aspect.LogAspect                              :54   [32m127678015919493120[0;39m ------------- 开始 -------------
2021-12-19 15:46:51.139 INFO  com.aspect.LogAspect                              :55   [32m127678015919493120[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:46:51.139 INFO  com.aspect.LogAspect                              :54   [32m127678015923687424[0;39m ------------- 开始 -------------
2021-12-19 15:46:51.139 INFO  com.aspect.LogAspect                              :56   [32m127678015919493120[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:46:51.139 INFO  com.aspect.LogAspect                              :55   [32m127678015923687424[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:46:51.139 INFO  com.aspect.LogAspect                              :57   [32m127678015919493120[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:51.139 INFO  com.aspect.LogAspect                              :56   [32m127678015923687424[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:46:51.140 INFO  com.aspect.LogAspect                              :57   [32m127678015923687424[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:51.140 INFO  com.aspect.LogAspect                              :80   [32m127678015919493120[0;39m 请求参数: []
2021-12-19 15:46:51.140 INFO  com.aspect.LogAspect                              :80   [32m127678015923687424[0;39m 请求参数: []
2021-12-19 15:46:51.141 INFO  com.aspect.LogAspect                              :54   [32m127678015932076032[0;39m ------------- 开始 -------------
2021-12-19 15:46:51.141 INFO  com.aspect.LogAspect                              :55   [32m127678015932076032[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:46:51.141 INFO  com.aspect.LogAspect                              :56   [32m127678015932076032[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:46:51.141 INFO  com.aspect.LogAspect                              :57   [32m127678015932076032[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:51.141 INFO  com.aspect.LogAspect                              :80   [32m127678015932076032[0;39m 请求参数: []
2021-12-19 15:46:51.186 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678015932076032[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:46:51.186 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678015919493120[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:46:51.186 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678015932076032[0;39m ==> Parameters: 
2021-12-19 15:46:51.186 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678015919493120[0;39m ==> Parameters: 
2021-12-19 15:46:51.188 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678015923687424[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:46:51.188 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678015923687424[0;39m ==> Parameters: 
2021-12-19 15:46:51.232 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678015919493120[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:46:51.232 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:46:51.232 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:46:51.243 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:46:51.243 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:46:51.243 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678015919493120[0;39m <==        Row: 2021-12-19, 496, 169, 496, 169
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:46:51.244 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678015919493120[0;39m <==      Total: 1
2021-12-19 15:46:51.244 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:46:51.244 INFO  com.aspect.LogAspect                              :92   [32m127678015919493120[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":496,"viewIncrease":496,"voteCount":169,"voteIncrease":169}],"success":true}
2021-12-19 15:46:51.244 INFO  com.aspect.LogAspect                              :93   [32m127678015919493120[0;39m ------------- 结束 耗时：106 ms -------------
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:46:51.244 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:46:51.244 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:46:51.244 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:46:51.244 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:46:51.244 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678015923687424[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:46:51.244 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678015923687424[0;39m <==      Total: 7
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:46:51.244 INFO  com.aspect.LogAspect                              :92   [32m127678015923687424[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:46:51.244 INFO  com.aspect.LogAspect                              :93   [32m127678015923687424[0;39m ------------- 结束 耗时：105 ms -------------
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:46:51.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678015932076032[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:46:51.244 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678015932076032[0;39m <==      Total: 19
2021-12-19 15:46:51.256 INFO  com.aspect.LogAspect                              :92   [32m127678015932076032[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:46:51.256 INFO  com.aspect.LogAspect                              :93   [32m127678015932076032[0;39m ------------- 结束 耗时：115 ms -------------
2021-12-19 15:46:55.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127678032185004032[0;39m 生成今日电子书快照开始
2021-12-19 15:46:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678032185004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:46:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678032185004032[0;39m ==> Parameters: 
2021-12-19 15:46:55.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678032185004032[0;39m <==    Updates: 0
2021-12-19 15:46:55.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127678032185004032[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 15:46:59.246 INFO  com.interceptor.LoginInterceptor                  :29   [32m127677995627450368[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:46:59.247 INFO  com.interceptor.LoginInterceptor                  :65   [32m127677995627450368[0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-12-19 15:46:59.250 INFO  com.interceptor.LoginInterceptor                  :29   [32m127677978892177408[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:46:59.251 INFO  com.interceptor.LoginInterceptor                  :40   [32m127677978892177408[0;39m 接口登录拦截：，path：http://localhost:8081/user/logout/127677945153196032
2021-12-19 15:46:59.251 INFO  com.interceptor.LoginInterceptor                  :44   [32m127677978892177408[0;39m 登录校验开始，token：127677945153196032
2021-12-19 15:46:59.270 INFO  com.interceptor.LoginInterceptor                  :56   [32m127677978892177408[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127677945153196032"}
2021-12-19 15:46:59.304 INFO  com.aspect.LogAspect                              :54   [32m127678050170179584[0;39m ------------- 开始 -------------
2021-12-19 15:46:59.304 INFO  com.aspect.LogAspect                              :55   [32m127678050170179584[0;39m 请求地址: http://localhost:8081/user/logout/127677945153196032 GET
2021-12-19 15:46:59.305 INFO  com.aspect.LogAspect                              :56   [32m127678050170179584[0;39m 类名方法: com.controller.UserController.logout
2021-12-19 15:46:59.305 INFO  com.aspect.LogAspect                              :57   [32m127678050170179584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:46:59.305 INFO  com.aspect.LogAspect                              :80   [32m127678050170179584[0;39m 请求参数: ["127677945153196032"]
2021-12-19 15:46:59.323 INFO  com.controller.UserController                     :89   [32m127678050170179584[0;39m 从redis中删除token：127677945153196032
2021-12-19 15:46:59.323 INFO  com.aspect.LogAspect                              :92   [32m127678050170179584[0;39m 返回结果: {"success":true}
2021-12-19 15:46:59.323 INFO  com.aspect.LogAspect                              :93   [32m127678050170179584[0;39m ------------- 结束 耗时：19 ms -------------
2021-12-19 15:46:59.324 INFO  com.interceptor.LoginInterceptor                  :65   [32m127678050170179584[0;39m ------------- LoginInterceptor 结束 耗时：74 ms -------------
2021-12-19 15:47:00.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127678053173301248[0;39m 生成今日电子书快照开始
2021-12-19 15:47:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678053173301248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678053173301248[0;39m ==> Parameters: 
2021-12-19 15:47:00.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678053173301248[0;39m <==    Updates: 0
2021-12-19 15:47:00.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127678053173301248[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 15:47:05.005 INFO  com.job.DocJob                                    :32   [32m127678074081906688[0;39m 更新电子书下的文档数据开始
2021-12-19 15:47:05.056 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127678074081906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:47:05.057 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127678074081906688[0;39m ==> Parameters: 
2021-12-19 15:47:05.157 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127678074081906688[0;39m <==    Updates: 3
2021-12-19 15:47:05.158 INFO  com.job.DocJob                                    :35   [32m127678074081906688[0;39m 更新电子书下的文档数据结束，耗时：152毫秒
2021-12-19 15:47:05.159 INFO  com.job.EbookSnapshotJob                          :32   [32m127678074723635200[0;39m 生成今日电子书快照开始
2021-12-19 15:47:05.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678074723635200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:05.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678074723635200[0;39m ==> Parameters: 
2021-12-19 15:47:05.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678074723635200[0;39m <==    Updates: 0
2021-12-19 15:47:05.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127678074723635200[0;39m 生成今日电子书快照结束，耗时：100毫秒
2021-12-19 15:47:06.409 INFO  com.aspect.LogAspect                              :54   [32m127678079970709504[0;39m ------------- 开始 -------------
2021-12-19 15:47:06.409 INFO  com.aspect.LogAspect                              :54   [32m127678079970709505[0;39m ------------- 开始 -------------
2021-12-19 15:47:06.409 INFO  com.aspect.LogAspect                              :55   [32m127678079970709504[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:47:06.409 INFO  com.aspect.LogAspect                              :55   [32m127678079970709505[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:47:06.409 INFO  com.aspect.LogAspect                              :56   [32m127678079970709504[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:47:06.409 INFO  com.aspect.LogAspect                              :56   [32m127678079970709505[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:47:06.410 INFO  com.aspect.LogAspect                              :57   [32m127678079970709504[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:06.410 INFO  com.aspect.LogAspect                              :57   [32m127678079970709505[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:06.410 INFO  com.aspect.LogAspect                              :80   [32m127678079970709505[0;39m 请求参数: []
2021-12-19 15:47:06.410 INFO  com.aspect.LogAspect                              :80   [32m127678079970709504[0;39m 请求参数: []
2021-12-19 15:47:06.411 INFO  com.aspect.LogAspect                              :54   [32m127678079979098112[0;39m ------------- 开始 -------------
2021-12-19 15:47:06.411 INFO  com.aspect.LogAspect                              :55   [32m127678079979098112[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:47:06.411 INFO  com.aspect.LogAspect                              :56   [32m127678079979098112[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:47:06.411 INFO  com.aspect.LogAspect                              :57   [32m127678079979098112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:06.412 INFO  com.aspect.LogAspect                              :80   [32m127678079979098112[0;39m 请求参数: []
2021-12-19 15:47:06.465 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678079979098112[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:47:06.465 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678079970709505[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:06.465 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678079970709504[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:06.465 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678079970709504[0;39m ==> Parameters: 
2021-12-19 15:47:06.465 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678079979098112[0;39m ==> Parameters: 
2021-12-19 15:47:06.465 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678079970709505[0;39m ==> Parameters: 
2021-12-19 15:47:06.513 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678079970709504[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:47:06.514 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678079970709504[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 15:47:06.515 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678079970709504[0;39m <==      Total: 1
2021-12-19 15:47:06.515 INFO  com.aspect.LogAspect                              :92   [32m127678079970709504[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 15:47:06.515 INFO  com.aspect.LogAspect                              :93   [32m127678079970709504[0;39m ------------- 结束 耗时：106 ms -------------
2021-12-19 15:47:06.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:47:06.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:47:06.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:47:06.521 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:47:06.522 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:47:06.523 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:47:06.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:47:06.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:47:06.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:47:06.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:47:06.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:47:06.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:47:06.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:47:06.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:47:06.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:47:06.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:47:06.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:47:06.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:47:06.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:47:06.530 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678079979098112[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:47:06.530 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678079979098112[0;39m <==      Total: 19
2021-12-19 15:47:06.533 INFO  com.aspect.LogAspect                              :92   [32m127678079979098112[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:47:06.533 INFO  com.aspect.LogAspect                              :93   [32m127678079979098112[0;39m ------------- 结束 耗时：122 ms -------------
2021-12-19 15:47:06.743 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:47:06.745 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:47:06.746 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:47:06.747 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:47:06.749 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:47:06.750 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:47:06.751 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:47:06.753 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678079970709505[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:47:06.754 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678079970709505[0;39m <==      Total: 7
2021-12-19 15:47:06.755 INFO  com.aspect.LogAspect                              :92   [32m127678079970709505[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:47:06.756 INFO  com.aspect.LogAspect                              :93   [32m127678079970709505[0;39m ------------- 结束 耗时：347 ms -------------
2021-12-19 15:47:09.400 INFO  com.aspect.LogAspect                              :54   [32m127678092515872768[0;39m ------------- 开始 -------------
2021-12-19 15:47:09.400 INFO  com.aspect.LogAspect                              :55   [32m127678092515872768[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-19 15:47:09.401 INFO  com.aspect.LogAspect                              :56   [32m127678092515872768[0;39m 类名方法: com.controller.UserController.login
2021-12-19 15:47:09.401 INFO  com.aspect.LogAspect                              :57   [32m127678092515872768[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:09.402 INFO  com.aspect.LogAspect                              :80   [32m127678092515872768[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-19 15:47:09.447 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127678092515872768[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-19 15:47:09.447 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127678092515872768[0;39m ==> Parameters: test123(String)
2021-12-19 15:47:09.492 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127678092515872768[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:47:09.493 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127678092515872768[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:47:09.494 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127678092515872768[0;39m <==      Total: 1
2021-12-19 15:47:09.496 INFO  com.controller.UserController                     :77   [32m127678092515872768[0;39m 生成单点登录token:127678092918525952,并放入redis中
2021-12-19 15:47:09.531 INFO  com.aspect.LogAspect                              :92   [32m127678092515872768[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127678092918525952"},"success":true}
2021-12-19 15:47:09.531 INFO  com.aspect.LogAspect                              :93   [32m127678092515872768[0;39m ------------- 结束 耗时：131 ms -------------
2021-12-19 15:47:09.620 INFO  com.websocket.WebSocketServer                     :41   [32m127678010156519424[0;39m 连接关闭，token：9JqXpElRVu，session id：1！当前连接数：0
2021-12-19 15:47:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127678095082786816[0;39m 生成今日电子书快照开始
2021-12-19 15:47:10.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678095082786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:10.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678095082786816[0;39m ==> Parameters: 
2021-12-19 15:47:10.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678095082786816[0;39m <==    Updates: 0
2021-12-19 15:47:10.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127678095082786816[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-19 15:47:10.270 INFO  com.websocket.WebSocketServer                     :32   [32m127678015919493120[0;39m 有新连接：token：BO6R3TjEaf，session id：2，当前连接数：1
2021-12-19 15:47:10.353 INFO  com.aspect.LogAspect                              :54   [32m127678096513044480[0;39m ------------- 开始 -------------
2021-12-19 15:47:10.353 INFO  com.aspect.LogAspect                              :55   [32m127678096513044480[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:47:10.354 INFO  com.aspect.LogAspect                              :56   [32m127678096513044480[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:47:10.354 INFO  com.aspect.LogAspect                              :57   [32m127678096513044480[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:10.354 INFO  com.aspect.LogAspect                              :80   [32m127678096513044480[0;39m 请求参数: []
2021-12-19 15:47:10.354 INFO  com.aspect.LogAspect                              :54   [32m127678096517238784[0;39m ------------- 开始 -------------
2021-12-19 15:47:10.354 INFO  com.aspect.LogAspect                              :55   [32m127678096517238784[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:47:10.354 INFO  com.aspect.LogAspect                              :56   [32m127678096517238784[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:47:10.355 INFO  com.aspect.LogAspect                              :57   [32m127678096517238784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:10.355 INFO  com.aspect.LogAspect                              :80   [32m127678096517238784[0;39m 请求参数: []
2021-12-19 15:47:10.357 INFO  com.aspect.LogAspect                              :54   [32m127678096529821696[0;39m ------------- 开始 -------------
2021-12-19 15:47:10.358 INFO  com.aspect.LogAspect                              :55   [32m127678096529821696[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:47:10.358 INFO  com.aspect.LogAspect                              :56   [32m127678096529821696[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:47:10.358 INFO  com.aspect.LogAspect                              :57   [32m127678096529821696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:10.358 INFO  com.aspect.LogAspect                              :80   [32m127678096529821696[0;39m 请求参数: []
2021-12-19 15:47:10.359 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678096529821696[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:47:10.360 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678096529821696[0;39m ==> Parameters: 
2021-12-19 15:47:10.398 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678096517238784[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:10.398 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678096517238784[0;39m ==> Parameters: 
2021-12-19 15:47:10.401 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678096513044480[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:10.401 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678096513044480[0;39m ==> Parameters: 
2021-12-19 15:47:10.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:47:10.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:47:10.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:47:10.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:47:10.409 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:47:10.409 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:47:10.411 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:47:10.411 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:47:10.411 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:47:10.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:47:10.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:47:10.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:47:10.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:47:10.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:47:10.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:47:10.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:47:10.414 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:47:10.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:47:10.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:47:10.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678096529821696[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:47:10.416 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678096529821696[0;39m <==      Total: 19
2021-12-19 15:47:10.418 INFO  com.aspect.LogAspect                              :92   [32m127678096529821696[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:47:10.418 INFO  com.aspect.LogAspect                              :93   [32m127678096529821696[0;39m ------------- 结束 耗时：61 ms -------------
2021-12-19 15:47:10.439 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:47:10.440 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:47:10.440 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:47:10.441 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:47:10.441 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:47:10.442 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:47:10.442 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:47:10.443 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678096517238784[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:47:10.444 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678096517238784[0;39m <==      Total: 7
2021-12-19 15:47:10.444 INFO  com.aspect.LogAspect                              :92   [32m127678096517238784[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:47:10.445 INFO  com.aspect.LogAspect                              :93   [32m127678096517238784[0;39m ------------- 结束 耗时：91 ms -------------
2021-12-19 15:47:10.447 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678096513044480[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:47:10.448 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678096513044480[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 15:47:10.449 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678096513044480[0;39m <==      Total: 1
2021-12-19 15:47:10.450 INFO  com.aspect.LogAspect                              :92   [32m127678096513044480[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 15:47:10.450 INFO  com.aspect.LogAspect                              :93   [32m127678096513044480[0;39m ------------- 结束 耗时：97 ms -------------
2021-12-19 15:47:14.495 INFO  com.interceptor.LoginInterceptor                  :29   [32m127678050170179584[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:47:14.495 INFO  com.interceptor.LoginInterceptor                  :65   [32m127678050170179584[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-19 15:47:14.499 INFO  com.interceptor.LoginInterceptor                  :29   [32m127678079970709504[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 15:47:14.500 INFO  com.interceptor.LoginInterceptor                  :40   [32m127678079970709504[0;39m 接口登录拦截：，path：http://localhost:8081/user/logout/127678092918525952
2021-12-19 15:47:14.500 INFO  com.interceptor.LoginInterceptor                  :44   [32m127678079970709504[0;39m 登录校验开始，token：127678092918525952
2021-12-19 15:47:14.518 INFO  com.interceptor.LoginInterceptor                  :56   [32m127678079970709504[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127678092918525952"}
2021-12-19 15:47:14.518 INFO  com.aspect.LogAspect                              :54   [32m127678113982320640[0;39m ------------- 开始 -------------
2021-12-19 15:47:14.518 INFO  com.aspect.LogAspect                              :55   [32m127678113982320640[0;39m 请求地址: http://localhost:8081/user/logout/127678092918525952 GET
2021-12-19 15:47:14.518 INFO  com.aspect.LogAspect                              :56   [32m127678113982320640[0;39m 类名方法: com.controller.UserController.logout
2021-12-19 15:47:14.518 INFO  com.aspect.LogAspect                              :57   [32m127678113982320640[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:14.518 INFO  com.aspect.LogAspect                              :80   [32m127678113982320640[0;39m 请求参数: ["127678092918525952"]
2021-12-19 15:47:14.534 INFO  com.controller.UserController                     :89   [32m127678113982320640[0;39m 从redis中删除token：127678092918525952
2021-12-19 15:47:14.534 INFO  com.aspect.LogAspect                              :92   [32m127678113982320640[0;39m 返回结果: {"success":true}
2021-12-19 15:47:14.534 INFO  com.aspect.LogAspect                              :93   [32m127678113982320640[0;39m ------------- 结束 耗时：16 ms -------------
2021-12-19 15:47:14.536 INFO  com.interceptor.LoginInterceptor                  :65   [32m127678113982320640[0;39m ------------- LoginInterceptor 结束 耗时：37 ms -------------
2021-12-19 15:47:15.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127678116016558080[0;39m 生成今日电子书快照开始
2021-12-19 15:47:15.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678116016558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:15.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678116016558080[0;39m ==> Parameters: 
2021-12-19 15:47:15.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678116016558080[0;39m <==    Updates: 0
2021-12-19 15:47:15.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127678116016558080[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 15:47:15.851 INFO  com.websocket.WebSocketServer                     :41   [32m127678079979098112[0;39m 连接关闭，token：BO6R3TjEaf，session id：2！当前连接数：0
2021-12-19 15:47:20.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127678136996466688[0;39m 生成今日电子书快照开始
2021-12-19 15:47:20.316 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678136996466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:20.317 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678136996466688[0;39m ==> Parameters: 
2021-12-19 15:47:20.426 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678136996466688[0;39m <==    Updates: 0
2021-12-19 15:47:20.427 INFO  com.job.EbookSnapshotJob                          :35   [32m127678136996466688[0;39m 生成今日电子书快照结束，耗时：421毫秒
2021-12-19 15:47:21.401 INFO  com.websocket.WebSocketServer                     :32   [32m127678015919493120[0;39m 有新连接：token：w3lVtRmjrv，session id：3，当前连接数：1
2021-12-19 15:47:21.672 INFO  com.aspect.LogAspect                              :54   [32m127678143988371456[0;39m ------------- 开始 -------------
2021-12-19 15:47:21.672 INFO  com.aspect.LogAspect                              :55   [32m127678143988371456[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:47:21.673 INFO  com.aspect.LogAspect                              :56   [32m127678143988371456[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:47:21.673 INFO  com.aspect.LogAspect                              :54   [32m127678143992565760[0;39m ------------- 开始 -------------
2021-12-19 15:47:21.673 INFO  com.aspect.LogAspect                              :57   [32m127678143988371456[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:21.673 INFO  com.aspect.LogAspect                              :55   [32m127678143992565760[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:47:21.673 INFO  com.aspect.LogAspect                              :80   [32m127678143988371456[0;39m 请求参数: []
2021-12-19 15:47:21.673 INFO  com.aspect.LogAspect                              :56   [32m127678143992565760[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:47:21.674 INFO  com.aspect.LogAspect                              :57   [32m127678143992565760[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:21.674 INFO  com.aspect.LogAspect                              :80   [32m127678143992565760[0;39m 请求参数: []
2021-12-19 15:47:21.677 INFO  com.aspect.LogAspect                              :54   [32m127678144009342976[0;39m ------------- 开始 -------------
2021-12-19 15:47:21.678 INFO  com.aspect.LogAspect                              :55   [32m127678144009342976[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:47:21.678 INFO  com.aspect.LogAspect                              :56   [32m127678144009342976[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:47:21.678 INFO  com.aspect.LogAspect                              :57   [32m127678144009342976[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:21.678 INFO  com.aspect.LogAspect                              :80   [32m127678144009342976[0;39m 请求参数: []
2021-12-19 15:47:21.727 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678144009342976[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:47:21.727 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678143992565760[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:21.727 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678143988371456[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:21.727 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678144009342976[0;39m ==> Parameters: 
2021-12-19 15:47:21.727 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678143992565760[0;39m ==> Parameters: 
2021-12-19 15:47:21.727 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678143988371456[0;39m ==> Parameters: 
2021-12-19 15:47:21.790 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:47:21.791 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:47:21.792 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:47:21.792 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:47:21.793 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:47:21.793 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:47:21.793 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:47:21.794 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:47:21.794 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:47:21.794 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:47:21.794 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:47:21.795 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:47:21.795 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:47:21.795 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:47:21.795 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:47:21.796 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:47:21.796 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:47:21.796 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:47:21.796 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:47:21.797 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678144009342976[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:47:21.797 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678144009342976[0;39m <==      Total: 19
2021-12-19 15:47:21.798 INFO  com.aspect.LogAspect                              :92   [32m127678144009342976[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:47:21.798 INFO  com.aspect.LogAspect                              :93   [32m127678144009342976[0;39m ------------- 结束 耗时：121 ms -------------
2021-12-19 15:47:21.800 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:47:21.800 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678143988371456[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:47:21.801 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678143988371456[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 15:47:21.801 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:47:21.802 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678143988371456[0;39m <==      Total: 1
2021-12-19 15:47:21.802 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:47:21.802 INFO  com.aspect.LogAspect                              :92   [32m127678143988371456[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 15:47:21.803 INFO  com.aspect.LogAspect                              :93   [32m127678143988371456[0;39m ------------- 结束 耗时：131 ms -------------
2021-12-19 15:47:21.802 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:47:21.803 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:47:21.804 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:47:21.805 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:47:21.806 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678143992565760[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:47:21.807 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678143992565760[0;39m <==      Total: 7
2021-12-19 15:47:21.807 INFO  com.aspect.LogAspect                              :92   [32m127678143992565760[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:47:21.807 INFO  com.aspect.LogAspect                              :93   [32m127678143992565760[0;39m ------------- 结束 耗时：134 ms -------------
2021-12-19 15:47:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127678157993152512[0;39m 生成今日电子书快照开始
2021-12-19 15:47:25.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678157993152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:25.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678157993152512[0;39m ==> Parameters: 
2021-12-19 15:47:25.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678157993152512[0;39m <==    Updates: 0
2021-12-19 15:47:25.136 INFO  com.job.EbookSnapshotJob                          :35   [32m127678157993152512[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 15:47:30.030 INFO  com.job.EbookSnapshotJob                          :32   [32m127678179044364288[0;39m 生成今日电子书快照开始
2021-12-19 15:47:30.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678179044364288[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:30.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678179044364288[0;39m ==> Parameters: 
2021-12-19 15:47:30.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678179044364288[0;39m <==    Updates: 0
2021-12-19 15:47:30.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127678179044364288[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 15:47:32.668 INFO  com.websocket.WebSocketServer                     :41   [32m127678050170179584[0;39m 连接关闭，token：w3lVtRmjrv，session id：3！当前连接数：0
2021-12-19 15:47:33.472 INFO  com.websocket.WebSocketServer                     :32   [32m127678113982320640[0;39m 有新连接：token：idw0JB6gjx，session id：4，当前连接数：1
2021-12-19 15:47:33.554 INFO  com.aspect.LogAspect                              :54   [32m127678193825091584[0;39m ------------- 开始 -------------
2021-12-19 15:47:33.554 INFO  com.aspect.LogAspect                              :55   [32m127678193825091584[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:47:33.554 INFO  com.aspect.LogAspect                              :56   [32m127678193825091584[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:47:33.554 INFO  com.aspect.LogAspect                              :54   [32m127678193825091585[0;39m ------------- 开始 -------------
2021-12-19 15:47:33.554 INFO  com.aspect.LogAspect                              :54   [32m127678193825091586[0;39m ------------- 开始 -------------
2021-12-19 15:47:33.554 INFO  com.aspect.LogAspect                              :57   [32m127678193825091584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :55   [32m127678193825091585[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :80   [32m127678193825091584[0;39m 请求参数: []
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :56   [32m127678193825091585[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :57   [32m127678193825091585[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :55   [32m127678193825091586[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :80   [32m127678193825091585[0;39m 请求参数: []
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :56   [32m127678193825091586[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:47:33.555 INFO  com.aspect.LogAspect                              :57   [32m127678193825091586[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:47:33.556 INFO  com.aspect.LogAspect                              :80   [32m127678193825091586[0;39m 请求参数: []
2021-12-19 15:47:33.648 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678193825091586[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:47:33.648 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678193825091585[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:33.648 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678193825091584[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:47:33.649 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678193825091586[0;39m ==> Parameters: 
2021-12-19 15:47:33.649 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678193825091584[0;39m ==> Parameters: 
2021-12-19 15:47:33.649 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678193825091585[0;39m ==> Parameters: 
2021-12-19 15:47:33.714 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:47:33.714 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:47:33.715 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:47:33.716 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:47:33.717 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:47:33.717 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:47:33.718 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:47:33.718 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678193825091584[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:47:33.718 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:47:33.719 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127678193825091584[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 15:47:33.719 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:47:33.719 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:47:33.719 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:47:33.720 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127678193825091584[0;39m <==      Total: 1
2021-12-19 15:47:33.720 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:47:33.720 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:47:33.720 INFO  com.aspect.LogAspect                              :92   [32m127678193825091584[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 15:47:33.721 INFO  com.aspect.LogAspect                              :93   [32m127678193825091584[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-19 15:47:33.721 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:47:33.721 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:47:33.721 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:47:33.721 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:47:33.722 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:47:33.722 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:47:33.722 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127678193825091585[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:47:33.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:47:33.723 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127678193825091585[0;39m <==      Total: 7
2021-12-19 15:47:33.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:47:33.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:47:33.724 INFO  com.aspect.LogAspect                              :92   [32m127678193825091585[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:47:33.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:47:33.724 INFO  com.aspect.LogAspect                              :93   [32m127678193825091585[0;39m ------------- 结束 耗时：170 ms -------------
2021-12-19 15:47:33.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:47:33.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:47:33.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:47:33.726 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127678193825091586[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:47:33.726 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127678193825091586[0;39m <==      Total: 19
2021-12-19 15:47:33.729 INFO  com.aspect.LogAspect                              :92   [32m127678193825091586[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:47:33.729 INFO  com.aspect.LogAspect                              :93   [32m127678193825091586[0;39m ------------- 结束 耗时：175 ms -------------
2021-12-19 15:47:35.002 INFO  com.job.DocJob                                    :32   [32m127678199898443776[0;39m 更新电子书下的文档数据开始
2021-12-19 15:47:35.046 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127678199898443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:47:35.047 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127678199898443776[0;39m ==> Parameters: 
2021-12-19 15:47:35.141 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127678199898443776[0;39m <==    Updates: 3
2021-12-19 15:47:35.141 INFO  com.job.DocJob                                    :35   [32m127678199898443776[0;39m 更新电子书下的文档数据结束，耗时：139毫秒
2021-12-19 15:47:35.141 INFO  com.job.EbookSnapshotJob                          :32   [32m127678200481452032[0;39m 生成今日电子书快照开始
2021-12-19 15:47:35.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678200481452032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:47:35.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678200481452032[0;39m ==> Parameters: 
2021-12-19 15:47:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127678200481452032[0;39m <==    Updates: 0
2021-12-19 15:47:35.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127678200481452032[0;39m 生成今日电子书快照结束，耗时：92毫秒
2021-12-19 15:47:35.816 INFO  com.websocket.WebSocketServer                     :41   [32m127678010156519424[0;39m 连接关闭，token：idw0JB6gjx，session id：4！当前连接数：0
2021-12-19 15:59:09.206 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 2920 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 15:59:09.214 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 15:59:09.255 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 15:59:09.278 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 15:59:09.278 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 15:59:10.925 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 15:59:10.935 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 15:59:11.624 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 681 ms. Found 0 Redis repository interfaces.
2021-12-19 15:59:12.454 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 15:59:12.464 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 15:59:12.464 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 15:59:12.464 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 15:59:12.544 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 15:59:12.544 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3266 ms
2021-12-19 15:59:14.369 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 15:59:14.409 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 15:59:14.429 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 15:59:14.439 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 6.028 seconds (JVM running for 7.188)
2021-12-19 15:59:15.039 INFO  com.job.EbookSnapshotJob                          :32   [32m127681136066433024[0;39m 生成今日电子书快照开始
2021-12-19 15:59:15.059 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127681136066433024[0;39m HikariPool-1 - Starting...
2021-12-19 15:59:15.875 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127681136066433024[0;39m HikariPool-1 - Start completed.
2021-12-19 15:59:15.887 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681136066433024[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:15.917 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681136066433024[0;39m ==> Parameters: 
2021-12-19 15:59:16.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681136066433024[0;39m <==    Updates: 0
2021-12-19 15:59:16.054 INFO  com.job.EbookSnapshotJob                          :35   [32m127681136066433024[0;39m 生成今日电子书快照结束，耗时：1015毫秒
2021-12-19 15:59:20.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127681156907929600[0;39m 生成今日电子书快照开始
2021-12-19 15:59:20.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681156907929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:20.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681156907929600[0;39m ==> Parameters: 
2021-12-19 15:59:20.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681156907929600[0;39m <==    Updates: 0
2021-12-19 15:59:20.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127681156907929600[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-19 15:59:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127681177879449600[0;39m 生成今日电子书快照开始
2021-12-19 15:59:25.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681177879449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:25.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681177879449600[0;39m ==> Parameters: 
2021-12-19 15:59:25.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681177879449600[0;39m <==    Updates: 0
2021-12-19 15:59:25.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127681177879449600[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 15:59:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127681198846775296[0;39m 生成今日电子书快照开始
2021-12-19 15:59:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681198846775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681198846775296[0;39m ==> Parameters: 
2021-12-19 15:59:30.167 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681198846775296[0;39m <==    Updates: 0
2021-12-19 15:59:30.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127681198846775296[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 15:59:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127681219847655424[0;39m 生成今日电子书快照开始
2021-12-19 15:59:35.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681219847655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:35.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681219847655424[0;39m ==> Parameters: 
2021-12-19 15:59:35.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681219847655424[0;39m <==    Updates: 0
2021-12-19 15:59:35.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127681219847655424[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 15:59:35.161 INFO  com.job.DocJob                                    :32   [32m127681220464218112[0;39m 更新电子书下的文档数据开始
2021-12-19 15:59:35.181 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681220464218112[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 15:59:35.181 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681220464218112[0;39m ==> Parameters: 
2021-12-19 15:59:35.291 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681220464218112[0;39m <==    Updates: 3
2021-12-19 15:59:35.291 INFO  com.job.DocJob                                    :35   [32m127681220464218112[0;39m 更新电子书下的文档数据结束，耗时：130毫秒
2021-12-19 15:59:39.853 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 15:59:39.853 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 15:59:39.855 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 15:59:39.891 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：nsF9Jp273U，session id：0，当前连接数：1
2021-12-19 15:59:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127681240823369728[0;39m 生成今日电子书快照开始
2021-12-19 15:59:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681240823369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:40.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681240823369728[0;39m ==> Parameters: 
2021-12-19 15:59:40.127 INFO  com.aspect.LogAspect                              :54   [32m127681241284743168[0;39m ------------- 开始 -------------
2021-12-19 15:59:40.127 INFO  com.aspect.LogAspect                              :54   [32m127681241288937473[0;39m ------------- 开始 -------------
2021-12-19 15:59:40.127 INFO  com.aspect.LogAspect                              :54   [32m127681241288937472[0;39m ------------- 开始 -------------
2021-12-19 15:59:40.129 INFO  com.aspect.LogAspect                              :55   [32m127681241288937473[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 15:59:40.129 INFO  com.aspect.LogAspect                              :55   [32m127681241288937472[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 15:59:40.129 INFO  com.aspect.LogAspect                              :55   [32m127681241284743168[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 15:59:40.129 INFO  com.aspect.LogAspect                              :56   [32m127681241288937473[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 15:59:40.129 INFO  com.aspect.LogAspect                              :56   [32m127681241284743168[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 15:59:40.129 INFO  com.aspect.LogAspect                              :56   [32m127681241288937472[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 15:59:40.130 INFO  com.aspect.LogAspect                              :57   [32m127681241288937473[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:59:40.130 INFO  com.aspect.LogAspect                              :57   [32m127681241288937472[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:59:40.130 INFO  com.aspect.LogAspect                              :57   [32m127681241284743168[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:59:40.167 INFO  com.aspect.LogAspect                              :80   [32m127681241284743168[0;39m 请求参数: []
2021-12-19 15:59:40.167 INFO  com.aspect.LogAspect                              :80   [32m127681241288937473[0;39m 请求参数: []
2021-12-19 15:59:40.167 INFO  com.aspect.LogAspect                              :80   [32m127681241288937472[0;39m 请求参数: []
2021-12-19 15:59:40.193 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681240823369728[0;39m <==    Updates: 0
2021-12-19 15:59:40.193 INFO  com.job.EbookSnapshotJob                          :35   [32m127681240823369728[0;39m 生成今日电子书快照结束，耗时：178毫秒
2021-12-19 15:59:40.220 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681241288937472[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:59:40.221 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681241288937472[0;39m ==> Parameters: 
2021-12-19 15:59:40.235 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681241284743168[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 15:59:40.236 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681241284743168[0;39m ==> Parameters: 
2021-12-19 15:59:40.236 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681241288937473[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 15:59:40.236 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681241288937473[0;39m ==> Parameters: 
2021-12-19 15:59:40.297 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==    Columns: id, parent, name, sort
2021-12-19 15:59:40.297 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127681241288937472[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 15:59:40.297 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 15:59:40.298 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 15:59:40.299 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127681241288937472[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 15:59:40.299 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 15:59:40.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 15:59:40.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 15:59:40.301 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681241288937472[0;39m <==      Total: 1
2021-12-19 15:59:40.301 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 15:59:40.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 15:59:40.302 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 15:59:40.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 15:59:40.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 15:59:40.303 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 15:59:40.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 15:59:40.304 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 15:59:40.304 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 15:59:40.305 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 15:59:40.305 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 15:59:40.306 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681241288937473[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 15:59:40.306 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 15:59:40.307 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681241288937473[0;39m <==      Total: 7
2021-12-19 15:59:40.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 15:59:40.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 15:59:40.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 15:59:40.309 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 15:59:40.310 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 15:59:40.311 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 15:59:40.313 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 15:59:40.314 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 15:59:40.315 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681241284743168[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 15:59:40.315 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681241284743168[0;39m <==      Total: 19
2021-12-19 15:59:40.331 INFO  com.aspect.LogAspect                              :92   [32m127681241288937473[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 15:59:40.331 INFO  com.aspect.LogAspect                              :93   [32m127681241288937473[0;39m ------------- 结束 耗时：206 ms -------------
2021-12-19 15:59:40.331 INFO  com.aspect.LogAspect                              :92   [32m127681241284743168[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 15:59:40.331 INFO  com.aspect.LogAspect                              :93   [32m127681241284743168[0;39m ------------- 结束 耗时：206 ms -------------
2021-12-19 15:59:40.333 INFO  com.aspect.LogAspect                              :92   [32m127681241288937472[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 15:59:40.334 INFO  com.aspect.LogAspect                              :93   [32m127681241288937472[0;39m ------------- 结束 耗时：209 ms -------------
2021-12-19 15:59:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127681261786501120[0;39m 生成今日电子书快照开始
2021-12-19 15:59:45.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681261786501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681261786501120[0;39m ==> Parameters: 
2021-12-19 15:59:45.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681261786501120[0;39m <==    Updates: 0
2021-12-19 15:59:45.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127681261786501120[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 15:59:50.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127681282703495168[0;39m 生成今日电子书快照开始
2021-12-19 15:59:50.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681282703495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:50.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681282703495168[0;39m ==> Parameters: 
2021-12-19 15:59:50.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681282703495168[0;39m <==    Updates: 0
2021-12-19 15:59:50.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127681282703495168[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 15:59:52.973 INFO  com.aspect.LogAspect                              :54   [32m127681295173160960[0;39m ------------- 开始 -------------
2021-12-19 15:59:52.973 INFO  com.aspect.LogAspect                              :55   [32m127681295173160960[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 15:59:52.974 INFO  com.aspect.LogAspect                              :56   [32m127681295173160960[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 15:59:52.974 INFO  com.aspect.LogAspect                              :57   [32m127681295173160960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:59:52.976 INFO  com.aspect.LogAspect                              :80   [32m127681295173160960[0;39m 请求参数: [{"categoryId2":115484763686572032,"page":1,"size":1000}]
2021-12-19 15:59:53.063 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127681295173160960[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 15:59:53.065 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127681295173160960[0;39m ==> Parameters: 115484763686572032(Long)
2021-12-19 15:59:53.113 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127681295173160960[0;39m <==    Columns: count(0)
2021-12-19 15:59:53.114 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127681295173160960[0;39m <==        Row: 1
2021-12-19 15:59:53.114 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127681295173160960[0;39m <==      Total: 1
2021-12-19 15:59:53.116 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127681295173160960[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 15:59:53.118 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127681295173160960[0;39m ==> Parameters: 115484763686572032(Long), 1000(Integer)
2021-12-19 15:59:53.188 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127681295173160960[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 15:59:53.189 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127681295173160960[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 15:59:53.191 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127681295173160960[0;39m <==      Total: 1
2021-12-19 15:59:53.196 INFO  com.servicess.EbookService                        :48   [32m127681295173160960[0;39m 总行数：1
2021-12-19 15:59:53.197 INFO  com.servicess.EbookService                        :49   [32m127681295173160960[0;39m 总页数：1
2021-12-19 15:59:53.227 INFO  com.aspect.LogAspect                              :92   [32m127681295173160960[0;39m 返回结果: {"content":{"list":[{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":1},"success":true}
2021-12-19 15:59:53.227 INFO  com.aspect.LogAspect                              :93   [32m127681295173160960[0;39m ------------- 结束 耗时：254 ms -------------
2021-12-19 15:59:55.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127681303695986688[0;39m 生成今日电子书快照开始
2021-12-19 15:59:55.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681303695986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 15:59:55.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681303695986688[0;39m ==> Parameters: 
2021-12-19 15:59:55.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681303695986688[0;39m <==    Updates: 0
2021-12-19 15:59:55.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127681303695986688[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-19 15:59:58.067 INFO  com.aspect.LogAspect                              :54   [32m127681316538945536[0;39m ------------- 开始 -------------
2021-12-19 15:59:58.068 INFO  com.aspect.LogAspect                              :55   [32m127681316538945536[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-19 15:59:58.068 INFO  com.aspect.LogAspect                              :56   [32m127681316538945536[0;39m 类名方法: com.controller.UserController.login
2021-12-19 15:59:58.068 INFO  com.aspect.LogAspect                              :57   [32m127681316538945536[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 15:59:58.069 INFO  com.aspect.LogAspect                              :80   [32m127681316538945536[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-19 15:59:58.141 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127681316538945536[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-19 15:59:58.142 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127681316538945536[0;39m ==> Parameters: test123(String)
2021-12-19 15:59:58.193 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127681316538945536[0;39m <==    Columns: id, login_name, name, password
2021-12-19 15:59:58.193 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127681316538945536[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 15:59:58.193 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127681316538945536[0;39m <==      Total: 1
2021-12-19 15:59:58.200 INFO  com.controller.UserController                     :77   [32m127681316538945536[0;39m 生成单点登录token:127681317096787968,并放入redis中
2021-12-19 15:59:59.687 INFO  com.aspect.LogAspect                              :92   [32m127681316538945536[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127681317096787968"},"success":true}
2021-12-19 15:59:59.688 INFO  com.aspect.LogAspect                              :93   [32m127681316538945536[0;39m ------------- 结束 耗时：1621 ms -------------
2021-12-19 15:59:59.813 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：nsF9Jp273U，session id：0！当前连接数：0
2021-12-19 16:00:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127681324726226944[0;39m 生成今日电子书快照开始
2021-12-19 16:00:00.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681324726226944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:00.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681324726226944[0;39m ==> Parameters: 
2021-12-19 16:00:00.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681324726226944[0;39m <==    Updates: 0
2021-12-19 16:00:00.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127681324726226944[0;39m 生成今日电子书快照结束，耗时：211毫秒
2021-12-19 16:00:01.017 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：KjlDvLmATK，session id：1，当前连接数：1
2021-12-19 16:00:01.112 INFO  com.aspect.LogAspect                              :54   [32m127681329310601216[0;39m ------------- 开始 -------------
2021-12-19 16:00:01.112 INFO  com.aspect.LogAspect                              :54   [32m127681329310601217[0;39m ------------- 开始 -------------
2021-12-19 16:00:01.112 INFO  com.aspect.LogAspect                              :54   [32m127681329310601218[0;39m ------------- 开始 -------------
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :55   [32m127681329310601216[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :55   [32m127681329310601217[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :55   [32m127681329310601218[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :56   [32m127681329310601216[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :56   [32m127681329310601218[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :56   [32m127681329310601217[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :57   [32m127681329310601216[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :57   [32m127681329310601218[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :57   [32m127681329310601217[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :80   [32m127681329310601218[0;39m 请求参数: []
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :80   [32m127681329310601217[0;39m 请求参数: []
2021-12-19 16:00:01.113 INFO  com.aspect.LogAspect                              :80   [32m127681329310601216[0;39m 请求参数: []
2021-12-19 16:00:01.165 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681329310601217[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:00:01.165 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681329310601216[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:00:01.165 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681329310601218[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:00:01.165 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681329310601217[0;39m ==> Parameters: 
2021-12-19 16:00:01.165 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681329310601218[0;39m ==> Parameters: 
2021-12-19 16:00:01.165 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681329310601216[0;39m ==> Parameters: 
2021-12-19 16:00:01.281 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:00:01.281 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:00:01.282 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:00:01.282 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127681329310601217[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:00:01.283 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:00:01.284 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:00:01.284 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127681329310601217[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:00:01.285 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:00:01.286 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:00:01.286 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681329310601217[0;39m <==      Total: 1
2021-12-19 16:00:01.287 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:00:01.288 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:00:01.288 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:00:01.288 INFO  com.aspect.LogAspect                              :92   [32m127681329310601217[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:00:01.289 INFO  com.aspect.LogAspect                              :93   [32m127681329310601217[0;39m ------------- 结束 耗时：177 ms -------------
2021-12-19 16:00:01.289 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:00:01.290 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:00:01.291 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:00:01.292 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:00:01.292 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:00:01.296 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:00:01.298 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:00:01.299 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:00:01.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:00:01.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:00:01.301 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681329310601216[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:00:01.304 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:00:01.307 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:00:01.308 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681329310601216[0;39m <==      Total: 7
2021-12-19 16:00:01.309 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:00:01.312 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:00:01.312 INFO  com.aspect.LogAspect                              :92   [32m127681329310601216[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:00:01.313 INFO  com.aspect.LogAspect                              :93   [32m127681329310601216[0;39m ------------- 结束 耗时：201 ms -------------
2021-12-19 16:00:01.313 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:00:01.315 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:00:01.316 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681329310601218[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:00:01.318 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681329310601218[0;39m <==      Total: 19
2021-12-19 16:00:01.322 INFO  com.aspect.LogAspect                              :92   [32m127681329310601218[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:00:01.322 INFO  com.aspect.LogAspect                              :93   [32m127681329310601218[0;39m ------------- 结束 耗时：210 ms -------------
2021-12-19 16:00:05.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127681345626443776[0;39m 生成今日电子书快照开始
2021-12-19 16:00:05.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681345626443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:05.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681345626443776[0;39m ==> Parameters: 
2021-12-19 16:00:05.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681345626443776[0;39m <==    Updates: 0
2021-12-19 16:00:05.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127681345626443776[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 16:00:05.162 INFO  com.job.DocJob                                    :32   [32m127681346297532416[0;39m 更新电子书下的文档数据开始
2021-12-19 16:00:05.163 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681346297532416[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:00:05.163 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681346297532416[0;39m ==> Parameters: 
2021-12-19 16:00:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681346297532416[0;39m <==    Updates: 3
2021-12-19 16:00:05.254 INFO  com.job.DocJob                                    :35   [32m127681346297532416[0;39m 更新电子书下的文档数据结束，耗时：92毫秒
2021-12-19 16:00:07.585 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 16:00:07.585 INFO  com.interceptor.LoginInterceptor                  :65   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-19 16:00:07.589 INFO  com.interceptor.LoginInterceptor                  :29   [32m127681316538945536[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-19 16:00:07.589 INFO  com.interceptor.LoginInterceptor                  :40   [32m127681316538945536[0;39m 接口登录拦截：，path：http://localhost:8081/user/logout/127681317096787968
2021-12-19 16:00:07.590 INFO  com.interceptor.LoginInterceptor                  :44   [32m127681316538945536[0;39m 登录校验开始，token：127681317096787968
2021-12-19 16:00:07.611 INFO  com.interceptor.LoginInterceptor                  :56   [32m127681316538945536[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127681317096787968"}
2021-12-19 16:00:07.616 INFO  com.aspect.LogAspect                              :54   [32m127681356590354432[0;39m ------------- 开始 -------------
2021-12-19 16:00:07.616 INFO  com.aspect.LogAspect                              :55   [32m127681356590354432[0;39m 请求地址: http://localhost:8081/user/logout/127681317096787968 GET
2021-12-19 16:00:07.616 INFO  com.aspect.LogAspect                              :56   [32m127681356590354432[0;39m 类名方法: com.controller.UserController.logout
2021-12-19 16:00:07.616 INFO  com.aspect.LogAspect                              :57   [32m127681356590354432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:07.617 INFO  com.aspect.LogAspect                              :80   [32m127681356590354432[0;39m 请求参数: ["127681317096787968"]
2021-12-19 16:00:07.660 INFO  com.controller.UserController                     :89   [32m127681356590354432[0;39m 从redis中删除token：127681317096787968
2021-12-19 16:00:07.661 INFO  com.aspect.LogAspect                              :92   [32m127681356590354432[0;39m 返回结果: {"success":true}
2021-12-19 16:00:07.661 INFO  com.aspect.LogAspect                              :93   [32m127681356590354432[0;39m ------------- 结束 耗时：45 ms -------------
2021-12-19 16:00:07.662 INFO  com.interceptor.LoginInterceptor                  :65   [32m127681356590354432[0;39m ------------- LoginInterceptor 结束 耗时：73 ms -------------
2021-12-19 16:00:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127681366610546688[0;39m 生成今日电子书快照开始
2021-12-19 16:00:10.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681366610546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681366610546688[0;39m ==> Parameters: 
2021-12-19 16:00:10.190 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681366610546688[0;39m <==    Updates: 0
2021-12-19 16:00:10.200 INFO  com.job.EbookSnapshotJob                          :35   [32m127681366610546688[0;39m 生成今日电子书快照结束，耗时：193毫秒
2021-12-19 16:00:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681387603038208[0;39m 生成今日电子书快照开始
2021-12-19 16:00:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681387603038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681387603038208[0;39m ==> Parameters: 
2021-12-19 16:00:15.178 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681387603038208[0;39m <==    Updates: 0
2021-12-19 16:00:15.178 INFO  com.job.EbookSnapshotJob                          :35   [32m127681387603038208[0;39m 生成今日电子书快照结束，耗时：168毫秒
2021-12-19 16:00:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127681408561975296[0;39m 生成今日电子书快照开始
2021-12-19 16:00:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681408561975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681408561975296[0;39m ==> Parameters: 
2021-12-19 16:00:20.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681408561975296[0;39m <==    Updates: 0
2021-12-19 16:00:20.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127681408561975296[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 16:00:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127681429567049728[0;39m 生成今日电子书快照开始
2021-12-19 16:00:25.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681429567049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:25.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681429567049728[0;39m ==> Parameters: 
2021-12-19 16:00:25.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681429567049728[0;39m <==    Updates: 0
2021-12-19 16:00:25.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127681429567049728[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:00:29.319 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：KjlDvLmATK，session id：1！当前连接数：0
2021-12-19 16:00:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127681450505015296[0;39m 生成今日电子书快照开始
2021-12-19 16:00:30.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681450505015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:30.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681450505015296[0;39m ==> Parameters: 
2021-12-19 16:00:30.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681450505015296[0;39m <==    Updates: 0
2021-12-19 16:00:30.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127681450505015296[0;39m 生成今日电子书快照结束，耗时：153毫秒
2021-12-19 16:00:33.308 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：ASMQlK9DK5，session id：2，当前连接数：1
2021-12-19 16:00:33.571 INFO  com.aspect.LogAspect                              :54   [32m127681465453514752[0;39m ------------- 开始 -------------
2021-12-19 16:00:33.571 INFO  com.aspect.LogAspect                              :55   [32m127681465453514752[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:00:33.572 INFO  com.aspect.LogAspect                              :56   [32m127681465453514752[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:00:33.572 INFO  com.aspect.LogAspect                              :57   [32m127681465453514752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:33.572 INFO  com.aspect.LogAspect                              :80   [32m127681465453514752[0;39m 请求参数: []
2021-12-19 16:00:33.576 INFO  com.aspect.LogAspect                              :54   [32m127681465474486272[0;39m ------------- 开始 -------------
2021-12-19 16:00:33.576 INFO  com.aspect.LogAspect                              :55   [32m127681465474486272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:00:33.576 INFO  com.aspect.LogAspect                              :56   [32m127681465474486272[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:00:33.577 INFO  com.aspect.LogAspect                              :57   [32m127681465474486272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:33.577 INFO  com.aspect.LogAspect                              :80   [32m127681465474486272[0;39m 请求参数: []
2021-12-19 16:00:33.580 INFO  com.aspect.LogAspect                              :54   [32m127681465491263488[0;39m ------------- 开始 -------------
2021-12-19 16:00:33.580 INFO  com.aspect.LogAspect                              :55   [32m127681465491263488[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:00:33.580 INFO  com.aspect.LogAspect                              :56   [32m127681465491263488[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:00:33.581 INFO  com.aspect.LogAspect                              :57   [32m127681465491263488[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:00:33.581 INFO  com.aspect.LogAspect                              :80   [32m127681465491263488[0;39m 请求参数: []
2021-12-19 16:00:33.627 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681465474486272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:00:33.627 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681465491263488[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:00:33.627 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681465453514752[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:00:33.628 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681465491263488[0;39m ==> Parameters: 
2021-12-19 16:00:33.628 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681465453514752[0;39m ==> Parameters: 
2021-12-19 16:00:33.628 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681465474486272[0;39m ==> Parameters: 
2021-12-19 16:00:33.687 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:00:33.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:00:33.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:00:33.688 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127681465453514752[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:00:33.688 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:00:33.689 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:00:33.690 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:00:33.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:00:33.692 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:00:33.692 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:00:33.689 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127681465453514752[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:00:33.693 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:00:33.692 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:00:33.693 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:00:33.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:00:33.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:00:33.694 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:00:33.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:00:33.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:00:33.693 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127681465453514752[0;39m <==      Total: 1
2021-12-19 16:00:33.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:00:33.695 INFO  com.aspect.LogAspect                              :92   [32m127681465453514752[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:00:33.695 INFO  com.aspect.LogAspect                              :93   [32m127681465453514752[0;39m ------------- 结束 耗时：124 ms -------------
2021-12-19 16:00:33.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:00:33.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:00:33.694 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:00:33.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:00:33.697 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127681465474486272[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:00:33.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:00:33.697 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127681465474486272[0;39m <==      Total: 7
2021-12-19 16:00:33.698 INFO  com.aspect.LogAspect                              :92   [32m127681465474486272[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:00:33.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:00:33.698 INFO  com.aspect.LogAspect                              :93   [32m127681465474486272[0;39m ------------- 结束 耗时：122 ms -------------
2021-12-19 16:00:33.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:00:33.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:00:33.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127681465491263488[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:00:33.701 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127681465491263488[0;39m <==      Total: 19
2021-12-19 16:00:33.705 INFO  com.aspect.LogAspect                              :92   [32m127681465491263488[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:00:33.705 INFO  com.aspect.LogAspect                              :93   [32m127681465491263488[0;39m ------------- 结束 耗时：125 ms -------------
2021-12-19 16:00:35.008 INFO  com.job.DocJob                                    :32   [32m127681471480729600[0;39m 更新电子书下的文档数据开始
2021-12-19 16:00:35.057 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681471480729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:00:35.058 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681471480729600[0;39m ==> Parameters: 
2021-12-19 16:00:35.152 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681471480729600[0;39m <==    Updates: 3
2021-12-19 16:00:35.153 INFO  com.job.DocJob                                    :35   [32m127681471480729600[0;39m 更新电子书下的文档数据结束，耗时：145毫秒
2021-12-19 16:00:35.154 INFO  com.job.EbookSnapshotJob                          :32   [32m127681472093097984[0;39m 生成今日电子书快照开始
2021-12-19 16:00:35.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681472093097984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:35.198 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681472093097984[0;39m ==> Parameters: 
2021-12-19 16:00:35.324 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681472093097984[0;39m <==    Updates: 0
2021-12-19 16:00:35.324 INFO  com.job.EbookSnapshotJob                          :35   [32m127681472093097984[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-19 16:00:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127681492456443904[0;39m 生成今日电子书快照开始
2021-12-19 16:00:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681492456443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681492456443904[0;39m ==> Parameters: 
2021-12-19 16:00:40.179 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681492456443904[0;39m <==    Updates: 0
2021-12-19 16:00:40.179 INFO  com.job.EbookSnapshotJob                          :35   [32m127681492456443904[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-19 16:00:45.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127681513427963904[0;39m 生成今日电子书快照开始
2021-12-19 16:00:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681513427963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681513427963904[0;39m ==> Parameters: 
2021-12-19 16:00:45.372 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681513427963904[0;39m <==    Updates: 0
2021-12-19 16:00:45.373 INFO  com.job.EbookSnapshotJob                          :35   [32m127681513427963904[0;39m 生成今日电子书快照结束，耗时：363毫秒
2021-12-19 16:00:50.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681534403678208[0;39m 生成今日电子书快照开始
2021-12-19 16:00:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681534403678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681534403678208[0;39m ==> Parameters: 
2021-12-19 16:00:50.179 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681534403678208[0;39m <==    Updates: 0
2021-12-19 16:00:50.180 INFO  com.job.EbookSnapshotJob                          :35   [32m127681534403678208[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-19 16:00:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127681555379392512[0;39m 生成今日电子书快照开始
2021-12-19 16:00:55.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681555379392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:00:55.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681555379392512[0;39m ==> Parameters: 
2021-12-19 16:00:55.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681555379392512[0;39m <==    Updates: 0
2021-12-19 16:00:55.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127681555379392512[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:01:00.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127681576317358080[0;39m 生成今日电子书快照开始
2021-12-19 16:01:00.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681576317358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:00.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681576317358080[0;39m ==> Parameters: 
2021-12-19 16:01:00.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681576317358080[0;39m <==    Updates: 0
2021-12-19 16:01:00.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127681576317358080[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 16:01:05.005 INFO  com.job.DocJob                                    :32   [32m127681597297266688[0;39m 更新电子书下的文档数据开始
2021-12-19 16:01:05.055 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681597297266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:01:05.055 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681597297266688[0;39m ==> Parameters: 
2021-12-19 16:01:05.157 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681597297266688[0;39m <==    Updates: 3
2021-12-19 16:01:05.158 INFO  com.job.DocJob                                    :35   [32m127681597297266688[0;39m 更新电子书下的文档数据结束，耗时：153毫秒
2021-12-19 16:01:05.159 INFO  com.job.EbookSnapshotJob                          :32   [32m127681597943189504[0;39m 生成今日电子书快照开始
2021-12-19 16:01:05.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681597943189504[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:05.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681597943189504[0;39m ==> Parameters: 
2021-12-19 16:01:05.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681597943189504[0;39m <==    Updates: 0
2021-12-19 16:01:05.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127681597943189504[0;39m 生成今日电子书快照结束，耗时：96毫秒
2021-12-19 16:01:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127681618298146816[0;39m 生成今日电子书快照开始
2021-12-19 16:01:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681618298146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681618298146816[0;39m ==> Parameters: 
2021-12-19 16:01:10.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681618298146816[0;39m <==    Updates: 0
2021-12-19 16:01:10.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127681618298146816[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 16:01:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681639261278208[0;39m 生成今日电子书快照开始
2021-12-19 16:01:15.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681639261278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:15.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681639261278208[0;39m ==> Parameters: 
2021-12-19 16:01:15.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681639261278208[0;39m <==    Updates: 0
2021-12-19 16:01:15.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127681639261278208[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:01:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681660232798208[0;39m 生成今日电子书快照开始
2021-12-19 16:01:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681660232798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681660232798208[0;39m ==> Parameters: 
2021-12-19 16:01:20.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681660232798208[0;39m <==    Updates: 0
2021-12-19 16:01:20.175 INFO  com.job.EbookSnapshotJob                          :35   [32m127681660232798208[0;39m 生成今日电子书快照结束，耗时：165毫秒
2021-12-19 16:01:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127681681212706816[0;39m 生成今日电子书快照开始
2021-12-19 16:01:25.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681681212706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:25.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681681212706816[0;39m ==> Parameters: 
2021-12-19 16:01:25.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681681212706816[0;39m <==    Updates: 0
2021-12-19 16:01:25.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127681681212706816[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 16:01:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127681702192615424[0;39m 生成今日电子书快照开始
2021-12-19 16:01:30.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681702192615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:30.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681702192615424[0;39m ==> Parameters: 
2021-12-19 16:01:30.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681702192615424[0;39m <==    Updates: 0
2021-12-19 16:01:30.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127681702192615424[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:01:35.010 INFO  com.job.DocJob                                    :32   [32m127681723147358208[0;39m 更新电子书下的文档数据开始
2021-12-19 16:01:35.050 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681723147358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:01:35.050 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681723147358208[0;39m ==> Parameters: 
2021-12-19 16:01:35.148 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681723147358208[0;39m <==    Updates: 3
2021-12-19 16:01:35.148 INFO  com.job.DocJob                                    :35   [32m127681723147358208[0;39m 更新电子书下的文档数据结束，耗时：138毫秒
2021-12-19 16:01:35.148 INFO  com.job.EbookSnapshotJob                          :32   [32m127681723726172160[0;39m 生成今日电子书快照开始
2021-12-19 16:01:35.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681723726172160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681723726172160[0;39m ==> Parameters: 
2021-12-19 16:01:35.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681723726172160[0;39m <==    Updates: 0
2021-12-19 16:01:35.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127681723726172160[0;39m 生成今日电子书快照结束，耗时：113毫秒
2021-12-19 16:01:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127681744114683904[0;39m 生成今日电子书快照开始
2021-12-19 16:01:40.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681744114683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:40.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681744114683904[0;39m ==> Parameters: 
2021-12-19 16:01:40.330 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681744114683904[0;39m <==    Updates: 0
2021-12-19 16:01:40.330 INFO  com.job.EbookSnapshotJob                          :35   [32m127681744114683904[0;39m 生成今日电子书快照结束，耗时：321毫秒
2021-12-19 16:01:45.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127681765082009600[0;39m 生成今日电子书快照开始
2021-12-19 16:01:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681765082009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681765082009600[0;39m ==> Parameters: 
2021-12-19 16:01:45.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681765082009600[0;39m <==    Updates: 0
2021-12-19 16:01:45.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127681765082009600[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 16:01:50.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681786061918208[0;39m 生成今日电子书快照开始
2021-12-19 16:01:50.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681786061918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:50.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681786061918208[0;39m ==> Parameters: 
2021-12-19 16:01:50.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681786061918208[0;39m <==    Updates: 0
2021-12-19 16:01:50.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127681786061918208[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-19 16:01:55.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681807033438208[0;39m 生成今日电子书快照开始
2021-12-19 16:01:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681807033438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:01:55.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681807033438208[0;39m ==> Parameters: 
2021-12-19 16:01:55.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681807033438208[0;39m <==    Updates: 0
2021-12-19 16:01:55.170 INFO  com.job.EbookSnapshotJob                          :35   [32m127681807033438208[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:02:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127681828013346816[0;39m 生成今日电子书快照开始
2021-12-19 16:02:00.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681828013346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:00.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681828013346816[0;39m ==> Parameters: 
2021-12-19 16:02:00.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681828013346816[0;39m <==    Updates: 0
2021-12-19 16:02:00.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127681828013346816[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:02:05.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681848976478208[0;39m 生成今日电子书快照开始
2021-12-19 16:02:05.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681848976478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:05.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681848976478208[0;39m ==> Parameters: 
2021-12-19 16:02:05.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681848976478208[0;39m <==    Updates: 0
2021-12-19 16:02:05.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127681848976478208[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:02:05.160 INFO  com.job.DocJob                                    :32   [32m127681849605623808[0;39m 更新电子书下的文档数据开始
2021-12-19 16:02:05.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681849605623808[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:02:05.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681849605623808[0;39m ==> Parameters: 
2021-12-19 16:02:05.260 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681849605623808[0;39m <==    Updates: 3
2021-12-19 16:02:05.260 INFO  com.job.DocJob                                    :35   [32m127681849605623808[0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2021-12-19 16:02:10.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127681869943803904[0;39m 生成今日电子书快照开始
2021-12-19 16:02:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681869943803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681869943803904[0;39m ==> Parameters: 
2021-12-19 16:02:10.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681869943803904[0;39m <==    Updates: 0
2021-12-19 16:02:10.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127681869943803904[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-19 16:02:15.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127681890906935296[0;39m 生成今日电子书快照开始
2021-12-19 16:02:15.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681890906935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:15.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681890906935296[0;39m ==> Parameters: 
2021-12-19 16:02:15.167 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681890906935296[0;39m <==    Updates: 0
2021-12-19 16:02:15.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127681890906935296[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:02:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681911891038208[0;39m 生成今日电子书快照开始
2021-12-19 16:02:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681911891038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:20.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681911891038208[0;39m ==> Parameters: 
2021-12-19 16:02:20.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681911891038208[0;39m <==    Updates: 0
2021-12-19 16:02:20.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127681911891038208[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:02:25.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127681932858363904[0;39m 生成今日电子书快照开始
2021-12-19 16:02:25.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681932858363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:25.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681932858363904[0;39m ==> Parameters: 
2021-12-19 16:02:25.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681932858363904[0;39m <==    Updates: 0
2021-12-19 16:02:25.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127681932858363904[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:02:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681953834078208[0;39m 生成今日电子书快照开始
2021-12-19 16:02:30.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681953834078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:30.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681953834078208[0;39m ==> Parameters: 
2021-12-19 16:02:30.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681953834078208[0;39m <==    Updates: 0
2021-12-19 16:02:30.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127681953834078208[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:02:35.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681974805598208[0;39m 生成今日电子书快照开始
2021-12-19 16:02:35.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681974805598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:35.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681974805598208[0;39m ==> Parameters: 
2021-12-19 16:02:35.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681974805598208[0;39m <==    Updates: 0
2021-12-19 16:02:35.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127681974805598208[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:02:35.159 INFO  com.job.DocJob                                    :32   [32m127681975430549504[0;39m 更新电子书下的文档数据开始
2021-12-19 16:02:35.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681975430549504[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:02:35.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681975430549504[0;39m ==> Parameters: 
2021-12-19 16:02:35.259 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127681975430549504[0;39m <==    Updates: 3
2021-12-19 16:02:35.259 INFO  com.job.DocJob                                    :35   [32m127681975430549504[0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2021-12-19 16:02:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127681995777118208[0;39m 生成今日电子书快照开始
2021-12-19 16:02:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681995777118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681995777118208[0;39m ==> Parameters: 
2021-12-19 16:02:40.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127681995777118208[0;39m <==    Updates: 0
2021-12-19 16:02:40.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127681995777118208[0;39m 生成今日电子书快照结束，耗时：171毫秒
2021-12-19 16:02:45.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127682016748638208[0;39m 生成今日电子书快照开始
2021-12-19 16:02:45.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682016748638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:45.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682016748638208[0;39m ==> Parameters: 
2021-12-19 16:02:45.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682016748638208[0;39m <==    Updates: 0
2021-12-19 16:02:45.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127682016748638208[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:02:49.653 INFO  com.websocket.WebSocketServer                     :41   [32m127681241288937472[0;39m 连接关闭，token：ASMQlK9DK5，session id：2！当前连接数：0
2021-12-19 16:02:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127682037715963904[0;39m 生成今日电子书快照开始
2021-12-19 16:02:50.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682037715963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:50.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682037715963904[0;39m ==> Parameters: 
2021-12-19 16:02:50.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682037715963904[0;39m <==    Updates: 0
2021-12-19 16:02:50.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127682037715963904[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-19 16:02:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127682058687483904[0;39m 生成今日电子书快照开始
2021-12-19 16:02:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682058687483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:02:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682058687483904[0;39m ==> Parameters: 
2021-12-19 16:02:55.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682058687483904[0;39m <==    Updates: 0
2021-12-19 16:02:55.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127682058687483904[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:03:00.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127682079663198208[0;39m 生成今日电子书快照开始
2021-12-19 16:03:00.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682079663198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:00.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682079663198208[0;39m ==> Parameters: 
2021-12-19 16:03:00.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682079663198208[0;39m <==    Updates: 0
2021-12-19 16:03:00.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127682079663198208[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:03:05.032 INFO  com.job.EbookSnapshotJob                          :32   [32m127682100726992896[0;39m 生成今日电子书快照开始
2021-12-19 16:03:05.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682100726992896[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:05.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682100726992896[0;39m ==> Parameters: 
2021-12-19 16:03:05.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682100726992896[0;39m <==    Updates: 0
2021-12-19 16:03:05.201 INFO  com.job.EbookSnapshotJob                          :35   [32m127682100726992896[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-19 16:03:05.201 INFO  com.job.DocJob                                    :32   [32m127682101435830272[0;39m 更新电子书下的文档数据开始
2021-12-19 16:03:05.201 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127682101435830272[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:03:05.203 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127682101435830272[0;39m ==> Parameters: 
2021-12-19 16:03:05.298 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127682101435830272[0;39m <==    Updates: 3
2021-12-19 16:03:05.298 INFO  com.job.DocJob                                    :35   [32m127682101435830272[0;39m 更新电子书下的文档数据结束，耗时：97毫秒
2021-12-19 16:03:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127682121589460992[0;39m 生成今日电子书快照开始
2021-12-19 16:03:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682121589460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:10.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682121589460992[0;39m ==> Parameters: 
2021-12-19 16:03:10.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682121589460992[0;39m <==    Updates: 0
2021-12-19 16:03:10.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127682121589460992[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 16:03:10.977 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：PKwQX8mDzG，session id：3，当前连接数：1
2021-12-19 16:03:11.247 INFO  com.aspect.LogAspect                              :54   [32m127682126794592256[0;39m ------------- 开始 -------------
2021-12-19 16:03:11.248 INFO  com.aspect.LogAspect                              :55   [32m127682126794592256[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:03:11.248 INFO  com.aspect.LogAspect                              :56   [32m127682126794592256[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:03:11.248 INFO  com.aspect.LogAspect                              :57   [32m127682126794592256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:11.248 INFO  com.aspect.LogAspect                              :80   [32m127682126794592256[0;39m 请求参数: []
2021-12-19 16:03:11.249 INFO  com.aspect.LogAspect                              :54   [32m127682126802980864[0;39m ------------- 开始 -------------
2021-12-19 16:03:11.250 INFO  com.aspect.LogAspect                              :55   [32m127682126802980864[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:03:11.250 INFO  com.aspect.LogAspect                              :56   [32m127682126802980864[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:03:11.250 INFO  com.aspect.LogAspect                              :57   [32m127682126802980864[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:11.250 INFO  com.aspect.LogAspect                              :80   [32m127682126802980864[0;39m 请求参数: []
2021-12-19 16:03:11.255 INFO  com.aspect.LogAspect                              :54   [32m127682126828146688[0;39m ------------- 开始 -------------
2021-12-19 16:03:11.255 INFO  com.aspect.LogAspect                              :55   [32m127682126828146688[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:03:11.255 INFO  com.aspect.LogAspect                              :56   [32m127682126828146688[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:03:11.256 INFO  com.aspect.LogAspect                              :57   [32m127682126828146688[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:11.256 INFO  com.aspect.LogAspect                              :80   [32m127682126828146688[0;39m 请求参数: []
2021-12-19 16:03:11.298 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127682126802980864[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:03:11.298 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127682126794592256[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:03:11.299 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127682126794592256[0;39m ==> Parameters: 
2021-12-19 16:03:11.299 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127682126802980864[0;39m ==> Parameters: 
2021-12-19 16:03:11.315 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127682126828146688[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:03:11.315 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127682126828146688[0;39m ==> Parameters: 
2021-12-19 16:03:11.365 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:03:11.365 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127682126794592256[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:03:11.365 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:03:11.365 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:03:11.366 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:03:11.366 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127682126794592256[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:03:11.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:03:11.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:03:11.366 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127682126794592256[0;39m <==      Total: 1
2021-12-19 16:03:11.366 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:03:11.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:03:11.367 INFO  com.aspect.LogAspect                              :92   [32m127682126794592256[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:03:11.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:03:11.367 INFO  com.aspect.LogAspect                              :93   [32m127682126794592256[0;39m ------------- 结束 耗时：120 ms -------------
2021-12-19 16:03:11.367 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:03:11.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:03:11.367 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:03:11.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:03:11.368 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:03:11.368 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:03:11.368 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:03:11.368 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:03:11.368 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:03:11.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:03:11.369 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682126802980864[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:03:11.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:03:11.369 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127682126802980864[0;39m <==      Total: 7
2021-12-19 16:03:11.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:03:11.370 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:03:11.370 INFO  com.aspect.LogAspect                              :92   [32m127682126802980864[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:03:11.370 INFO  com.aspect.LogAspect                              :93   [32m127682126802980864[0;39m ------------- 结束 耗时：121 ms -------------
2021-12-19 16:03:11.370 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:03:11.371 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:03:11.371 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:03:11.372 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:03:11.372 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682126828146688[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:03:11.372 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127682126828146688[0;39m <==      Total: 19
2021-12-19 16:03:11.374 INFO  com.aspect.LogAspect                              :92   [32m127682126828146688[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:03:11.375 INFO  com.aspect.LogAspect                              :93   [32m127682126828146688[0;39m ------------- 结束 耗时：120 ms -------------
2021-12-19 16:03:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127682142594535424[0;39m 生成今日电子书快照开始
2021-12-19 16:03:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682142594535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:15.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682142594535424[0;39m ==> Parameters: 
2021-12-19 16:03:15.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682142594535424[0;39m <==    Updates: 0
2021-12-19 16:03:15.213 INFO  com.job.EbookSnapshotJob                          :35   [32m127682142594535424[0;39m 生成今日电子书快照结束，耗时：199毫秒
2021-12-19 16:03:15.386 INFO  com.aspect.LogAspect                              :54   [32m127682144154816512[0;39m ------------- 开始 -------------
2021-12-19 16:03:15.386 INFO  com.aspect.LogAspect                              :55   [32m127682144154816512[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-19 16:03:15.386 INFO  com.aspect.LogAspect                              :56   [32m127682144154816512[0;39m 类名方法: com.controller.UserController.login
2021-12-19 16:03:15.386 INFO  com.aspect.LogAspect                              :57   [32m127682144154816512[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:15.387 INFO  com.aspect.LogAspect                              :80   [32m127682144154816512[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-19 16:03:15.429 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127682144154816512[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-19 16:03:15.430 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127682144154816512[0;39m ==> Parameters: test123(String)
2021-12-19 16:03:15.500 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127682144154816512[0;39m <==    Columns: id, login_name, name, password
2021-12-19 16:03:15.500 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127682144154816512[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-19 16:03:15.501 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127682144154816512[0;39m <==      Total: 1
2021-12-19 16:03:15.502 INFO  com.controller.UserController                     :77   [32m127682144154816512[0;39m 生成单点登录token:127682144641355776,并放入redis中
2021-12-19 16:03:15.526 INFO  com.aspect.LogAspect                              :92   [32m127682144154816512[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127682144641355776"},"success":true}
2021-12-19 16:03:15.527 INFO  com.aspect.LogAspect                              :93   [32m127682144154816512[0;39m ------------- 结束 耗时：141 ms -------------
2021-12-19 16:03:15.731 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：PKwQX8mDzG，session id：3！当前连接数：0
2021-12-19 16:03:16.609 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：xD57TKw7Mc，session id：4，当前连接数：1
2021-12-19 16:03:16.691 INFO  com.aspect.LogAspect                              :54   [32m127682149628383232[0;39m ------------- 开始 -------------
2021-12-19 16:03:16.691 INFO  com.aspect.LogAspect                              :55   [32m127682149628383232[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:03:16.691 INFO  com.aspect.LogAspect                              :56   [32m127682149628383232[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:03:16.691 INFO  com.aspect.LogAspect                              :57   [32m127682149628383232[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:16.691 INFO  com.aspect.LogAspect                              :80   [32m127682149628383232[0;39m 请求参数: []
2021-12-19 16:03:16.691 INFO  com.aspect.LogAspect                              :54   [32m127682149628383233[0;39m ------------- 开始 -------------
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :54   [32m127682149628383234[0;39m ------------- 开始 -------------
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :55   [32m127682149628383233[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :55   [32m127682149628383234[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :56   [32m127682149628383234[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :56   [32m127682149628383233[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :57   [32m127682149628383234[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :57   [32m127682149628383233[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :80   [32m127682149628383234[0;39m 请求参数: []
2021-12-19 16:03:16.692 INFO  com.aspect.LogAspect                              :80   [32m127682149628383233[0;39m 请求参数: []
2021-12-19 16:03:16.737 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127682149628383234[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:03:16.738 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127682149628383234[0;39m ==> Parameters: 
2021-12-19 16:03:16.741 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127682149628383233[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:03:16.741 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127682149628383232[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:03:16.741 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127682149628383233[0;39m ==> Parameters: 
2021-12-19 16:03:16.741 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127682149628383232[0;39m ==> Parameters: 
2021-12-19 16:03:16.782 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:03:16.782 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:03:16.783 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:03:16.783 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:03:16.784 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:03:16.784 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:03:16.785 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:03:16.785 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:03:16.786 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:03:16.786 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:03:16.787 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:03:16.787 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:03:16.788 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:03:16.788 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:03:16.788 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:03:16.789 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:03:16.789 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:03:16.789 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:03:16.790 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:03:16.791 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:03:16.792 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:03:16.793 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:03:16.793 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127682149628383234[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:03:16.793 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127682149628383232[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:03:16.794 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:03:16.794 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127682149628383234[0;39m <==      Total: 19
2021-12-19 16:03:16.794 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127682149628383232[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:03:16.794 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:03:16.795 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127682149628383232[0;39m <==      Total: 1
2021-12-19 16:03:16.795 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:03:16.795 INFO  com.aspect.LogAspect                              :92   [32m127682149628383232[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:03:16.796 INFO  com.aspect.LogAspect                              :93   [32m127682149628383232[0;39m ------------- 结束 耗时：106 ms -------------
2021-12-19 16:03:16.796 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:03:16.796 INFO  com.aspect.LogAspect                              :92   [32m127682149628383234[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:03:16.796 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127682149628383233[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:03:16.796 INFO  com.aspect.LogAspect                              :93   [32m127682149628383234[0;39m ------------- 结束 耗时：105 ms -------------
2021-12-19 16:03:16.797 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127682149628383233[0;39m <==      Total: 7
2021-12-19 16:03:16.797 INFO  com.aspect.LogAspect                              :92   [32m127682149628383233[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:03:16.798 INFO  com.aspect.LogAspect                              :93   [32m127682149628383233[0;39m ------------- 结束 耗时：107 ms -------------
2021-12-19 16:03:20.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127682163519918080[0;39m 生成今日电子书快照开始
2021-12-19 16:03:20.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682163519918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:20.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682163519918080[0;39m ==> Parameters: 
2021-12-19 16:03:20.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682163519918080[0;39m <==    Updates: 0
2021-12-19 16:03:20.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127682163519918080[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 16:03:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127682184520798208[0;39m 生成今日电子书快照开始
2021-12-19 16:03:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682184520798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682184520798208[0;39m ==> Parameters: 
2021-12-19 16:03:25.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682184520798208[0;39m <==    Updates: 0
2021-12-19 16:03:25.170 INFO  com.job.EbookSnapshotJob                          :35   [32m127682184520798208[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:03:28.790 INFO  com.websocket.WebSocketServer                     :41   [32m127681465474486272[0;39m 连接关闭，token：xD57TKw7Mc，session id：4！当前连接数：0
2021-12-19 16:03:30.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127682205483929600[0;39m 生成今日电子书快照开始
2021-12-19 16:03:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682205483929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:03:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682205483929600[0;39m ==> Parameters: 
2021-12-19 16:03:30.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127682205483929600[0;39m <==    Updates: 0
2021-12-19 16:03:30.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127682205483929600[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:12:50.977 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 10012 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 16:12:50.977 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 16:12:51.008 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 16:12:51.069 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 16:12:51.069 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 16:12:52.327 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 16:12:52.327 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 16:12:52.805 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 466 ms. Found 0 Redis repository interfaces.
2021-12-19 16:12:53.465 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 16:12:53.475 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 16:12:53.475 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 16:12:53.475 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 16:12:53.545 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 16:12:53.545 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2468 ms
2021-12-19 16:12:54.874 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 16:12:54.904 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 16:12:54.924 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 16:12:54.934 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 4.672 seconds (JVM running for 5.988)
2021-12-19 16:12:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127684575290855424[0;39m 生成今日电子书快照开始
2021-12-19 16:12:55.024 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127684575290855424[0;39m HikariPool-1 - Starting...
2021-12-19 16:12:55.760 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127684575290855424[0;39m HikariPool-1 - Start completed.
2021-12-19 16:12:55.773 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684575290855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:12:55.803 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684575290855424[0;39m ==> Parameters: 
2021-12-19 16:12:55.912 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684575290855424[0;39m <==    Updates: 0
2021-12-19 16:12:55.922 INFO  com.job.EbookSnapshotJob                          :35   [32m127684575290855424[0;39m 生成今日电子书快照结束，耗时：908毫秒
2021-12-19 16:13:00.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127684596212043776[0;39m 生成今日电子书快照开始
2021-12-19 16:13:00.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684596212043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:00.040 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684596212043776[0;39m ==> Parameters: 
2021-12-19 16:13:00.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684596212043776[0;39m <==    Updates: 0
2021-12-19 16:13:00.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127684596212043776[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 16:13:05.006 INFO  com.job.DocJob                                    :32   [32m127684617200340992[0;39m 更新电子书下的文档数据开始
2021-12-19 16:13:05.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684617200340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:13:05.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684617200340992[0;39m ==> Parameters: 
2021-12-19 16:13:05.151 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684617200340992[0;39m <==    Updates: 3
2021-12-19 16:13:05.151 INFO  com.job.DocJob                                    :35   [32m127684617200340992[0;39m 更新电子书下的文档数据结束，耗时：145毫秒
2021-12-19 16:13:05.151 INFO  com.job.EbookSnapshotJob                          :32   [32m127684617808515072[0;39m 生成今日电子书快照开始
2021-12-19 16:13:05.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684617808515072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:05.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684617808515072[0;39m ==> Parameters: 
2021-12-19 16:13:05.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684617808515072[0;39m <==    Updates: 0
2021-12-19 16:13:05.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127684617808515072[0;39m 生成今日电子书快照结束，耗时：110毫秒
2021-12-19 16:13:10.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127684638217998336[0;39m 生成今日电子书快照开始
2021-12-19 16:13:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684638217998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684638217998336[0;39m ==> Parameters: 
2021-12-19 16:13:10.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684638217998336[0;39m <==    Updates: 0
2021-12-19 16:13:10.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127684638217998336[0;39m 生成今日电子书快照结束，耗时：175毫秒
2021-12-19 16:13:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127684659160158208[0;39m 生成今日电子书快照开始
2021-12-19 16:13:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684659160158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684659160158208[0;39m ==> Parameters: 
2021-12-19 16:13:15.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684659160158208[0;39m <==    Updates: 0
2021-12-19 16:13:15.163 INFO  com.job.EbookSnapshotJob                          :35   [32m127684659160158208[0;39m 生成今日电子书快照结束，耗时：153毫秒
2021-12-19 16:13:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127684680144261120[0;39m 生成今日电子书快照开始
2021-12-19 16:13:20.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684680144261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:20.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684680144261120[0;39m ==> Parameters: 
2021-12-19 16:13:20.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684680144261120[0;39m <==    Updates: 0
2021-12-19 16:13:20.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127684680144261120[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 16:13:25.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127684701065449472[0;39m 生成今日电子书快照开始
2021-12-19 16:13:25.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684701065449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:25.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684701065449472[0;39m ==> Parameters: 
2021-12-19 16:13:25.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684701065449472[0;39m <==    Updates: 0
2021-12-19 16:13:25.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127684701065449472[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-19 16:13:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127684722083106816[0;39m 生成今日电子书快照开始
2021-12-19 16:13:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684722083106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684722083106816[0;39m ==> Parameters: 
2021-12-19 16:13:30.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684722083106816[0;39m <==    Updates: 0
2021-12-19 16:13:30.163 INFO  com.job.EbookSnapshotJob                          :35   [32m127684722083106816[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 16:13:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127684743050432512[0;39m 生成今日电子书快照开始
2021-12-19 16:13:35.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684743050432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:35.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684743050432512[0;39m ==> Parameters: 
2021-12-19 16:13:35.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684743050432512[0;39m <==    Updates: 0
2021-12-19 16:13:35.172 INFO  com.job.EbookSnapshotJob                          :35   [32m127684743050432512[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-19 16:13:35.172 INFO  com.job.DocJob                                    :32   [32m127684743725715456[0;39m 更新电子书下的文档数据开始
2021-12-19 16:13:35.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684743725715456[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:13:35.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684743725715456[0;39m ==> Parameters: 
2021-12-19 16:13:35.291 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684743725715456[0;39m <==    Updates: 3
2021-12-19 16:13:35.291 INFO  com.job.DocJob                                    :35   [32m127684743725715456[0;39m 更新电子书下的文档数据结束，耗时：119毫秒
2021-12-19 16:13:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127684764042924032[0;39m 生成今日电子书快照开始
2021-12-19 16:13:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684764042924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:40.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684764042924032[0;39m ==> Parameters: 
2021-12-19 16:13:40.176 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684764042924032[0;39m <==    Updates: 0
2021-12-19 16:13:40.176 INFO  com.job.EbookSnapshotJob                          :35   [32m127684764042924032[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:13:45.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127684784951529472[0;39m 生成今日电子书快照开始
2021-12-19 16:13:45.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684784951529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684784951529472[0;39m ==> Parameters: 
2021-12-19 16:13:45.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684784951529472[0;39m <==    Updates: 0
2021-12-19 16:13:45.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127684784951529472[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 16:13:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127684805969186816[0;39m 生成今日电子书快照开始
2021-12-19 16:13:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684805969186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:50.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684805969186816[0;39m ==> Parameters: 
2021-12-19 16:13:50.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684805969186816[0;39m <==    Updates: 0
2021-12-19 16:13:50.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127684805969186816[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:13:55.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127684826898763776[0;39m 生成今日电子书快照开始
2021-12-19 16:13:55.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684826898763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:13:55.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684826898763776[0;39m ==> Parameters: 
2021-12-19 16:13:55.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684826898763776[0;39m <==    Updates: 0
2021-12-19 16:13:55.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127684826898763776[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:14:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127684847912226816[0;39m 生成今日电子书快照开始
2021-12-19 16:14:00.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684847912226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:00.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684847912226816[0;39m ==> Parameters: 
2021-12-19 16:14:00.463 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684847912226816[0;39m <==    Updates: 0
2021-12-19 16:14:00.472 INFO  com.job.EbookSnapshotJob                          :35   [32m127684847912226816[0;39m 生成今日电子书快照结束，耗时：460毫秒
2021-12-19 16:14:05.002 INFO  com.job.DocJob                                    :32   [32m127684868841803776[0;39m 更新电子书下的文档数据开始
2021-12-19 16:14:05.042 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684868841803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:14:05.051 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684868841803776[0;39m ==> Parameters: 
2021-12-19 16:14:05.142 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684868841803776[0;39m <==    Updates: 3
2021-12-19 16:14:05.142 INFO  com.job.DocJob                                    :35   [32m127684868841803776[0;39m 更新电子书下的文档数据结束，耗时：140毫秒
2021-12-19 16:14:05.142 INFO  com.job.EbookSnapshotJob                          :32   [32m127684869429006336[0;39m 生成今日电子书快照开始
2021-12-19 16:14:05.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684869429006336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:05.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684869429006336[0;39m ==> Parameters: 
2021-12-19 16:14:05.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684869429006336[0;39m <==    Updates: 0
2021-12-19 16:14:05.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127684869429006336[0;39m 生成今日电子书快照结束，耗时：90毫秒
2021-12-19 16:14:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127684889855266816[0;39m 生成今日电子书快照开始
2021-12-19 16:14:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684889855266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684889855266816[0;39m ==> Parameters: 
2021-12-19 16:14:10.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684889855266816[0;39m <==    Updates: 0
2021-12-19 16:14:10.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127684889855266816[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:14:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127684910830981120[0;39m 生成今日电子书快照开始
2021-12-19 16:14:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684910830981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684910830981120[0;39m ==> Parameters: 
2021-12-19 16:14:15.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684910830981120[0;39m <==    Updates: 0
2021-12-19 16:14:15.172 INFO  com.job.EbookSnapshotJob                          :35   [32m127684910830981120[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 16:14:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127684931798306816[0;39m 生成今日电子书快照开始
2021-12-19 16:14:20.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684931798306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:20.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684931798306816[0;39m ==> Parameters: 
2021-12-19 16:14:20.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684931798306816[0;39m <==    Updates: 0
2021-12-19 16:14:20.166 INFO  com.job.EbookSnapshotJob                          :35   [32m127684931798306816[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-19 16:14:25.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127684952744660992[0;39m 生成今日电子书快照开始
2021-12-19 16:14:25.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684952744660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:25.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684952744660992[0;39m ==> Parameters: 
2021-12-19 16:14:25.202 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684952744660992[0;39m <==    Updates: 0
2021-12-19 16:14:25.202 INFO  com.job.EbookSnapshotJob                          :35   [32m127684952744660992[0;39m 生成今日电子书快照结束，耗时：196毫秒
2021-12-19 16:14:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127684973741346816[0;39m 生成今日电子书快照开始
2021-12-19 16:14:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684973741346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684973741346816[0;39m ==> Parameters: 
2021-12-19 16:14:30.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684973741346816[0;39m <==    Updates: 0
2021-12-19 16:14:30.182 INFO  com.job.EbookSnapshotJob                          :35   [32m127684973741346816[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-19 16:14:35.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127684994725449728[0;39m 生成今日电子书快照开始
2021-12-19 16:14:35.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684994725449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:35.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684994725449728[0;39m ==> Parameters: 
2021-12-19 16:14:35.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127684994725449728[0;39m <==    Updates: 0
2021-12-19 16:14:35.175 INFO  com.job.EbookSnapshotJob                          :35   [32m127684994725449728[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:14:35.175 INFO  com.job.DocJob                                    :32   [32m127684995396538368[0;39m 更新电子书下的文档数据开始
2021-12-19 16:14:35.175 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684995396538368[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:14:35.175 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684995396538368[0;39m ==> Parameters: 
2021-12-19 16:14:35.275 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127684995396538368[0;39m <==    Updates: 3
2021-12-19 16:14:35.275 INFO  com.job.DocJob                                    :35   [32m127684995396538368[0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2021-12-19 16:14:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685015680192512[0;39m 生成今日电子书快照开始
2021-12-19 16:14:40.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685015680192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:40.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685015680192512[0;39m ==> Parameters: 
2021-12-19 16:14:40.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685015680192512[0;39m <==    Updates: 0
2021-12-19 16:14:40.172 INFO  com.job.EbookSnapshotJob                          :35   [32m127685015680192512[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-19 16:14:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685036655906816[0;39m 生成今日电子书快照开始
2021-12-19 16:14:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685036655906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685036655906816[0;39m ==> Parameters: 
2021-12-19 16:14:45.176 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685036655906816[0;39m <==    Updates: 0
2021-12-19 16:14:45.176 INFO  com.job.EbookSnapshotJob                          :35   [32m127685036655906816[0;39m 生成今日电子书快照结束，耗时：164毫秒
2021-12-19 16:14:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685057623232512[0;39m 生成今日电子书快照开始
2021-12-19 16:14:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685057623232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685057623232512[0;39m ==> Parameters: 
2021-12-19 16:14:50.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685057623232512[0;39m <==    Updates: 0
2021-12-19 16:14:50.166 INFO  com.job.EbookSnapshotJob                          :35   [32m127685057623232512[0;39m 生成今日电子书快照结束，耗时：155毫秒
2021-12-19 16:14:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127685078603141120[0;39m 生成今日电子书快照开始
2021-12-19 16:14:55.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685078603141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:14:55.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685078603141120[0;39m ==> Parameters: 
2021-12-19 16:14:55.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685078603141120[0;39m <==    Updates: 0
2021-12-19 16:14:55.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127685078603141120[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:15:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685099566272512[0;39m 生成今日电子书快照开始
2021-12-19 16:15:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685099566272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685099566272512[0;39m ==> Parameters: 
2021-12-19 16:15:00.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685099566272512[0;39m <==    Updates: 0
2021-12-19 16:15:00.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127685099566272512[0;39m 生成今日电子书快照结束，耗时：135毫秒
2021-12-19 16:15:05.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685120537792512[0;39m 生成今日电子书快照开始
2021-12-19 16:15:05.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685120537792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:05.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685120537792512[0;39m ==> Parameters: 
2021-12-19 16:15:05.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685120537792512[0;39m <==    Updates: 0
2021-12-19 16:15:05.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127685120537792512[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:15:05.161 INFO  com.job.DocJob                                    :32   [32m127685121166938112[0;39m 更新电子书下的文档数据开始
2021-12-19 16:15:05.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685121166938112[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:15:05.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685121166938112[0;39m ==> Parameters: 
2021-12-19 16:15:05.261 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685121166938112[0;39m <==    Updates: 3
2021-12-19 16:15:05.261 INFO  com.job.DocJob                                    :35   [32m127685121166938112[0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2021-12-19 16:15:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685141509312512[0;39m 生成今日电子书快照开始
2021-12-19 16:15:10.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685141509312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685141509312512[0;39m ==> Parameters: 
2021-12-19 16:15:10.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685141509312512[0;39m <==    Updates: 0
2021-12-19 16:15:10.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127685141509312512[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 16:15:15.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127685162438889472[0;39m 生成今日电子书快照开始
2021-12-19 16:15:15.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685162438889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:15.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685162438889472[0;39m ==> Parameters: 
2021-12-19 16:15:15.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685162438889472[0;39m <==    Updates: 0
2021-12-19 16:15:15.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127685162438889472[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 16:15:20.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127685183414603776[0;39m 生成今日电子书快照开始
2021-12-19 16:15:20.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685183414603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685183414603776[0;39m ==> Parameters: 
2021-12-19 16:15:20.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685183414603776[0;39m <==    Updates: 0
2021-12-19 16:15:20.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127685183414603776[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:15:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685204423872512[0;39m 生成今日电子书快照开始
2021-12-19 16:15:25.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685204423872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:25.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685204423872512[0;39m ==> Parameters: 
2021-12-19 16:15:25.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685204423872512[0;39m <==    Updates: 0
2021-12-19 16:15:25.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127685204423872512[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:15:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685225399586816[0;39m 生成今日电子书快照开始
2021-12-19 16:15:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685225399586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685225399586816[0;39m ==> Parameters: 
2021-12-19 16:15:30.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685225399586816[0;39m <==    Updates: 0
2021-12-19 16:15:30.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127685225399586816[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-19 16:15:35.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127685246333358080[0;39m 生成今日电子书快照开始
2021-12-19 16:15:35.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685246333358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:35.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685246333358080[0;39m ==> Parameters: 
2021-12-19 16:15:35.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685246333358080[0;39m <==    Updates: 0
2021-12-19 16:15:35.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127685246333358080[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 16:15:35.160 INFO  com.job.DocJob                                    :32   [32m127685246991863808[0;39m 更新电子书下的文档数据开始
2021-12-19 16:15:35.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685246991863808[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:15:35.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685246991863808[0;39m ==> Parameters: 
2021-12-19 16:15:35.263 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685246991863808[0;39m <==    Updates: 3
2021-12-19 16:15:35.263 INFO  com.job.DocJob                                    :35   [32m127685246991863808[0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2021-12-19 16:15:40.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127685267296489472[0;39m 生成今日电子书快照开始
2021-12-19 16:15:40.041 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685267296489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:40.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685267296489472[0;39m ==> Parameters: 
2021-12-19 16:15:40.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685267296489472[0;39m <==    Updates: 0
2021-12-19 16:15:40.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127685267296489472[0;39m 生成今日电子书快照结束，耗时：155毫秒
2021-12-19 16:15:45.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127685288272203776[0;39m 生成今日电子书快照开始
2021-12-19 16:15:45.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685288272203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:45.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685288272203776[0;39m ==> Parameters: 
2021-12-19 16:15:45.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685288272203776[0;39m <==    Updates: 0
2021-12-19 16:15:45.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127685288272203776[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:15:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685309285666816[0;39m 生成今日电子书快照开始
2021-12-19 16:15:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685309285666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685309285666816[0;39m ==> Parameters: 
2021-12-19 16:15:50.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685309285666816[0;39m <==    Updates: 0
2021-12-19 16:15:50.172 INFO  com.job.EbookSnapshotJob                          :35   [32m127685309285666816[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:15:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685330252992512[0;39m 生成今日电子书快照开始
2021-12-19 16:15:55.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685330252992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:15:55.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685330252992512[0;39m ==> Parameters: 
2021-12-19 16:15:55.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685330252992512[0;39m <==    Updates: 0
2021-12-19 16:15:55.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127685330252992512[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 16:16:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127685351258066944[0;39m 生成今日电子书快照开始
2021-12-19 16:16:00.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685351258066944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:00.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685351258066944[0;39m ==> Parameters: 
2021-12-19 16:16:00.180 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685351258066944[0;39m <==    Updates: 0
2021-12-19 16:16:00.180 INFO  com.job.EbookSnapshotJob                          :35   [32m127685351258066944[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-19 16:16:05.011 INFO  com.job.DocJob                                    :32   [32m127685372196032512[0;39m 更新电子书下的文档数据开始
2021-12-19 16:16:05.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685372196032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:16:05.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685372196032512[0;39m ==> Parameters: 
2021-12-19 16:16:05.151 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685372196032512[0;39m <==    Updates: 3
2021-12-19 16:16:05.161 INFO  com.job.DocJob                                    :35   [32m127685372196032512[0;39m 更新电子书下的文档数据结束，耗时：150毫秒
2021-12-19 16:16:05.161 INFO  com.job.EbookSnapshotJob                          :32   [32m127685372825178112[0;39m 生成今日电子书快照开始
2021-12-19 16:16:05.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685372825178112[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:05.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685372825178112[0;39m ==> Parameters: 
2021-12-19 16:16:05.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685372825178112[0;39m <==    Updates: 0
2021-12-19 16:16:05.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127685372825178112[0;39m 生成今日电子书快照结束，耗时：96毫秒
2021-12-19 16:16:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685393167552512[0;39m 生成今日电子书快照开始
2021-12-19 16:16:10.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685393167552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:10.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685393167552512[0;39m ==> Parameters: 
2021-12-19 16:16:10.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685393167552512[0;39m <==    Updates: 0
2021-12-19 16:16:10.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127685393167552512[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:16:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685414139072512[0;39m 生成今日电子书快照开始
2021-12-19 16:16:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685414139072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685414139072512[0;39m ==> Parameters: 
2021-12-19 16:16:15.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685414139072512[0;39m <==    Updates: 0
2021-12-19 16:16:15.172 INFO  com.job.EbookSnapshotJob                          :35   [32m127685414139072512[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-19 16:16:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127685435118981120[0;39m 生成今日电子书快照开始
2021-12-19 16:16:20.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685435118981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:20.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685435118981120[0;39m ==> Parameters: 
2021-12-19 16:16:20.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685435118981120[0;39m <==    Updates: 0
2021-12-19 16:16:20.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127685435118981120[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:16:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685456086306816[0;39m 生成今日电子书快照开始
2021-12-19 16:16:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685456086306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685456086306816[0;39m ==> Parameters: 
2021-12-19 16:16:25.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685456086306816[0;39m <==    Updates: 0
2021-12-19 16:16:25.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127685456086306816[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:16:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685477053632512[0;39m 生成今日电子书快照开始
2021-12-19 16:16:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685477053632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685477053632512[0;39m ==> Parameters: 
2021-12-19 16:16:30.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685477053632512[0;39m <==    Updates: 0
2021-12-19 16:16:30.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127685477053632512[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:16:35.002 INFO  com.job.DocJob                                    :32   [32m127685497987403776[0;39m 更新电子书下的文档数据开始
2021-12-19 16:16:35.041 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685497987403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:16:35.041 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685497987403776[0;39m ==> Parameters: 
2021-12-19 16:16:35.151 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685497987403776[0;39m <==    Updates: 3
2021-12-19 16:16:35.151 INFO  com.job.DocJob                                    :35   [32m127685497987403776[0;39m 更新电子书下的文档数据结束，耗时：149毫秒
2021-12-19 16:16:35.151 INFO  com.job.EbookSnapshotJob                          :32   [32m127685498612355072[0;39m 生成今日电子书快照开始
2021-12-19 16:16:35.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685498612355072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:35.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685498612355072[0;39m ==> Parameters: 
2021-12-19 16:16:35.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685498612355072[0;39m <==    Updates: 0
2021-12-19 16:16:35.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127685498612355072[0;39m 生成今日电子书快照结束，耗时：100毫秒
2021-12-19 16:16:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685519000866816[0;39m 生成今日电子书快照开始
2021-12-19 16:16:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685519000866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685519000866816[0;39m ==> Parameters: 
2021-12-19 16:16:40.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685519000866816[0;39m <==    Updates: 0
2021-12-19 16:16:40.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127685519000866816[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 16:16:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685539968192512[0;39m 生成今日电子书快照开始
2021-12-19 16:16:45.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685539968192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:45.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685539968192512[0;39m ==> Parameters: 
2021-12-19 16:16:45.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685539968192512[0;39m <==    Updates: 0
2021-12-19 16:16:45.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127685539968192512[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:16:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685560939712512[0;39m 生成今日电子书快照开始
2021-12-19 16:16:50.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685560939712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:50.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685560939712512[0;39m ==> Parameters: 
2021-12-19 16:16:50.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685560939712512[0;39m <==    Updates: 0
2021-12-19 16:16:50.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127685560939712512[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-19 16:16:55.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127685581877678080[0;39m 生成今日电子书快照开始
2021-12-19 16:16:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685581877678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:16:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685581877678080[0;39m ==> Parameters: 
2021-12-19 16:16:55.193 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685581877678080[0;39m <==    Updates: 0
2021-12-19 16:16:55.193 INFO  com.job.EbookSnapshotJob                          :35   [32m127685581877678080[0;39m 生成今日电子书快照结束，耗时：190毫秒
2021-12-19 16:17:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685602882752512[0;39m 生成今日电子书快照开始
2021-12-19 16:17:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685602882752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685602882752512[0;39m ==> Parameters: 
2021-12-19 16:17:00.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685602882752512[0;39m <==    Updates: 0
2021-12-19 16:17:00.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127685602882752512[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:17:05.012 INFO  com.job.DocJob                                    :32   [32m127685623858466816[0;39m 更新电子书下的文档数据开始
2021-12-19 16:17:05.062 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685623858466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:17:05.062 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685623858466816[0;39m ==> Parameters: 
2021-12-19 16:17:05.152 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685623858466816[0;39m <==    Updates: 3
2021-12-19 16:17:05.152 INFO  com.job.DocJob                                    :35   [32m127685623858466816[0;39m 更新电子书下的文档数据结束，耗时：140毫秒
2021-12-19 16:17:05.162 INFO  com.job.EbookSnapshotJob                          :32   [32m127685624445669376[0;39m 生成今日电子书快照开始
2021-12-19 16:17:05.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685624445669376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:05.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685624445669376[0;39m ==> Parameters: 
2021-12-19 16:17:05.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685624445669376[0;39m <==    Updates: 0
2021-12-19 16:17:05.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127685624445669376[0;39m 生成今日电子书快照结束，耗时：90毫秒
2021-12-19 16:17:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685644825792512[0;39m 生成今日电子书快照开始
2021-12-19 16:17:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685644825792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685644825792512[0;39m ==> Parameters: 
2021-12-19 16:17:10.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685644825792512[0;39m <==    Updates: 0
2021-12-19 16:17:10.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127685644825792512[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:17:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685665801506816[0;39m 生成今日电子书快照开始
2021-12-19 16:17:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685665801506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685665801506816[0;39m ==> Parameters: 
2021-12-19 16:17:15.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685665801506816[0;39m <==    Updates: 0
2021-12-19 16:17:15.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127685665801506816[0;39m 生成今日电子书快照结束，耗时：210毫秒
2021-12-19 16:17:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685686773026816[0;39m 生成今日电子书快照开始
2021-12-19 16:17:20.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685686773026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685686773026816[0;39m ==> Parameters: 
2021-12-19 16:17:20.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685686773026816[0;39m <==    Updates: 0
2021-12-19 16:17:20.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127685686773026816[0;39m 生成今日电子书快照结束，耗时：199毫秒
2021-12-19 16:17:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685707740352512[0;39m 生成今日电子书快照开始
2021-12-19 16:17:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685707740352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685707740352512[0;39m ==> Parameters: 
2021-12-19 16:17:25.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685707740352512[0;39m <==    Updates: 0
2021-12-19 16:17:25.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127685707740352512[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-19 16:17:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685728711872512[0;39m 生成今日电子书快照开始
2021-12-19 16:17:30.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685728711872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:30.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685728711872512[0;39m ==> Parameters: 
2021-12-19 16:17:30.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685728711872512[0;39m <==    Updates: 0
2021-12-19 16:17:30.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127685728711872512[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-19 16:17:35.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127685749645643776[0;39m 生成今日电子书快照开始
2021-12-19 16:17:35.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685749645643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:35.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685749645643776[0;39m ==> Parameters: 
2021-12-19 16:17:35.486 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685749645643776[0;39m <==    Updates: 0
2021-12-19 16:17:35.486 INFO  com.job.EbookSnapshotJob                          :35   [32m127685749645643776[0;39m 生成今日电子书快照结束，耗时：484毫秒
2021-12-19 16:17:35.486 INFO  com.job.DocJob                                    :32   [32m127685751675686912[0;39m 更新电子书下的文档数据开始
2021-12-19 16:17:35.486 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685751675686912[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:17:35.486 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685751675686912[0;39m ==> Parameters: 
2021-12-19 16:17:35.616 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685751675686912[0;39m <==    Updates: 3
2021-12-19 16:17:35.616 INFO  com.job.DocJob                                    :35   [32m127685751675686912[0;39m 更新电子书下的文档数据结束，耗时：130毫秒
2021-12-19 16:17:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685770659106816[0;39m 生成今日电子书快照开始
2021-12-19 16:17:40.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685770659106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:40.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685770659106816[0;39m ==> Parameters: 
2021-12-19 16:17:40.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685770659106816[0;39m <==    Updates: 0
2021-12-19 16:17:40.182 INFO  com.job.EbookSnapshotJob                          :35   [32m127685770659106816[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-19 16:17:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685791626432512[0;39m 生成今日电子书快照开始
2021-12-19 16:17:45.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685791626432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:45.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685791626432512[0;39m ==> Parameters: 
2021-12-19 16:17:45.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685791626432512[0;39m <==    Updates: 0
2021-12-19 16:17:45.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127685791626432512[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-19 16:17:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685812597952512[0;39m 生成今日电子书快照开始
2021-12-19 16:17:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685812597952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685812597952512[0;39m ==> Parameters: 
2021-12-19 16:17:50.202 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685812597952512[0;39m <==    Updates: 0
2021-12-19 16:17:50.202 INFO  com.job.EbookSnapshotJob                          :35   [32m127685812597952512[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-19 16:17:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127685833577861120[0;39m 生成今日电子书快照开始
2021-12-19 16:17:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685833577861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:17:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685833577861120[0;39m ==> Parameters: 
2021-12-19 16:17:55.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685833577861120[0;39m <==    Updates: 0
2021-12-19 16:17:55.172 INFO  com.job.EbookSnapshotJob                          :35   [32m127685833577861120[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 16:18:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685854545186816[0;39m 生成今日电子书快照开始
2021-12-19 16:18:00.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685854545186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:00.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685854545186816[0;39m ==> Parameters: 
2021-12-19 16:18:00.181 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685854545186816[0;39m <==    Updates: 0
2021-12-19 16:18:00.181 INFO  com.job.EbookSnapshotJob                          :35   [32m127685854545186816[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-19 16:18:05.001 INFO  com.job.DocJob                                    :32   [32m127685875470569472[0;39m 更新电子书下的文档数据开始
2021-12-19 16:18:05.051 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685875470569472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:18:05.051 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685875470569472[0;39m ==> Parameters: 
2021-12-19 16:18:05.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127685875470569472[0;39m <==    Updates: 3
2021-12-19 16:18:05.161 INFO  com.job.DocJob                                    :35   [32m127685875470569472[0;39m 更新电子书下的文档数据结束，耗时：160毫秒
2021-12-19 16:18:05.161 INFO  com.job.EbookSnapshotJob                          :32   [32m127685876141658112[0;39m 生成今日电子书快照开始
2021-12-19 16:18:05.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685876141658112[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:05.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685876141658112[0;39m ==> Parameters: 
2021-12-19 16:18:05.291 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685876141658112[0;39m <==    Updates: 0
2021-12-19 16:18:05.291 INFO  com.job.EbookSnapshotJob                          :35   [32m127685876141658112[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 16:18:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685896488226816[0;39m 生成今日电子书快照开始
2021-12-19 16:18:10.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685896488226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:10.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685896488226816[0;39m ==> Parameters: 
2021-12-19 16:18:10.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685896488226816[0;39m <==    Updates: 0
2021-12-19 16:18:10.182 INFO  com.job.EbookSnapshotJob                          :35   [32m127685896488226816[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-19 16:18:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685917455552512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685917455552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:15.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685917455552512[0;39m ==> Parameters: 
2021-12-19 16:18:15.183 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685917455552512[0;39m <==    Updates: 0
2021-12-19 16:18:15.183 INFO  com.job.EbookSnapshotJob                          :35   [32m127685917455552512[0;39m 生成今日电子书快照结束，耗时：172毫秒
2021-12-19 16:18:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127685938435461120[0;39m 生成今日电子书快照开始
2021-12-19 16:18:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685938435461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685938435461120[0;39m ==> Parameters: 
2021-12-19 16:18:20.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685938435461120[0;39m <==    Updates: 0
2021-12-19 16:18:20.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127685938435461120[0;39m 生成今日电子书快照结束，耗时：199毫秒
2021-12-19 16:18:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127685959398592512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:25.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685959398592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:25.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685959398592512[0;39m ==> Parameters: 
2021-12-19 16:18:25.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685959398592512[0;39m <==    Updates: 0
2021-12-19 16:18:25.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127685959398592512[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-19 16:18:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127685980374306816[0;39m 生成今日电子书快照开始
2021-12-19 16:18:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685980374306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685980374306816[0;39m ==> Parameters: 
2021-12-19 16:18:30.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127685980374306816[0;39m <==    Updates: 0
2021-12-19 16:18:30.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127685980374306816[0;39m 生成今日电子书快照结束，耗时：180毫秒
2021-12-19 16:18:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686001341632512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:35.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686001341632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:35.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686001341632512[0;39m ==> Parameters: 
2021-12-19 16:18:35.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686001341632512[0;39m <==    Updates: 0
2021-12-19 16:18:35.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127686001341632512[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:18:35.171 INFO  com.job.DocJob                                    :32   [32m127686002012721152[0;39m 更新电子书下的文档数据开始
2021-12-19 16:18:35.171 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686002012721152[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:18:35.171 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686002012721152[0;39m ==> Parameters: 
2021-12-19 16:18:35.271 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686002012721152[0;39m <==    Updates: 3
2021-12-19 16:18:35.271 INFO  com.job.DocJob                                    :35   [32m127686002012721152[0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2021-12-19 16:18:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686022313152512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:40.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686022313152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:40.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686022313152512[0;39m ==> Parameters: 
2021-12-19 16:18:40.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686022313152512[0;39m <==    Updates: 0
2021-12-19 16:18:40.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127686022313152512[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:18:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686043284672512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:45.121 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686043284672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:45.121 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686043284672512[0;39m ==> Parameters: 
2021-12-19 16:18:45.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686043284672512[0;39m <==    Updates: 0
2021-12-19 16:18:45.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127686043284672512[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-19 16:18:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686064256192512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:50.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686064256192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:50.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686064256192512[0;39m ==> Parameters: 
2021-12-19 16:18:50.191 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686064256192512[0;39m <==    Updates: 0
2021-12-19 16:18:50.191 INFO  com.job.EbookSnapshotJob                          :35   [32m127686064256192512[0;39m 生成今日电子书快照结束，耗时：180毫秒
2021-12-19 16:18:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686085227712512[0;39m 生成今日电子书快照开始
2021-12-19 16:18:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686085227712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:18:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686085227712512[0;39m ==> Parameters: 
2021-12-19 16:18:55.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686085227712512[0;39m <==    Updates: 0
2021-12-19 16:18:55.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127686085227712512[0;39m 生成今日电子书快照结束，耗时：160毫秒
2021-12-19 16:19:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686106203426816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:00.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686106203426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:00.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686106203426816[0;39m ==> Parameters: 
2021-12-19 16:19:00.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686106203426816[0;39m <==    Updates: 0
2021-12-19 16:19:00.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127686106203426816[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-19 16:19:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686127174946816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:05.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686127174946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:05.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686127174946816[0;39m ==> Parameters: 
2021-12-19 16:19:05.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686127174946816[0;39m <==    Updates: 0
2021-12-19 16:19:05.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127686127174946816[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:19:05.162 INFO  com.job.DocJob                                    :32   [32m127686127804092416[0;39m 更新电子书下的文档数据开始
2021-12-19 16:19:05.162 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686127804092416[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:19:05.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686127804092416[0;39m ==> Parameters: 
2021-12-19 16:19:05.272 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686127804092416[0;39m <==    Updates: 3
2021-12-19 16:19:05.282 INFO  com.job.DocJob                                    :35   [32m127686127804092416[0;39m 更新电子书下的文档数据结束，耗时：120毫秒
2021-12-19 16:19:07.396 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 16:19:07.396 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 16:19:07.398 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-12-19 16:19:07.438 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：voXjwfVX4U，session id：0，当前连接数：1
2021-12-19 16:19:07.644 INFO  com.aspect.LogAspect                              :54   [32m127686138210160642[0;39m ------------- 开始 -------------
2021-12-19 16:19:07.644 INFO  com.aspect.LogAspect                              :54   [32m127686138210160640[0;39m ------------- 开始 -------------
2021-12-19 16:19:07.644 INFO  com.aspect.LogAspect                              :54   [32m127686138210160641[0;39m ------------- 开始 -------------
2021-12-19 16:19:07.645 INFO  com.aspect.LogAspect                              :55   [32m127686138210160642[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:19:07.645 INFO  com.aspect.LogAspect                              :55   [32m127686138210160641[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:19:07.645 INFO  com.aspect.LogAspect                              :55   [32m127686138210160640[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:19:07.646 INFO  com.aspect.LogAspect                              :56   [32m127686138210160640[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:19:07.646 INFO  com.aspect.LogAspect                              :56   [32m127686138210160641[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:19:07.646 INFO  com.aspect.LogAspect                              :56   [32m127686138210160642[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:19:07.646 INFO  com.aspect.LogAspect                              :57   [32m127686138210160641[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:19:07.646 INFO  com.aspect.LogAspect                              :57   [32m127686138210160640[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:19:07.646 INFO  com.aspect.LogAspect                              :57   [32m127686138210160642[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:19:07.684 INFO  com.aspect.LogAspect                              :80   [32m127686138210160640[0;39m 请求参数: []
2021-12-19 16:19:07.684 INFO  com.aspect.LogAspect                              :80   [32m127686138210160642[0;39m 请求参数: []
2021-12-19 16:19:07.698 INFO  com.aspect.LogAspect                              :80   [32m127686138210160641[0;39m 请求参数: []
2021-12-19 16:19:07.736 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127686138210160640[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:19:07.736 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127686138210160640[0;39m ==> Parameters: 
2021-12-19 16:19:07.747 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127686138210160641[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:19:07.748 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127686138210160641[0;39m ==> Parameters: 
2021-12-19 16:19:07.769 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127686138210160642[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:19:07.770 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127686138210160642[0;39m ==> Parameters: 
2021-12-19 16:19:07.825 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:19:07.825 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127686138210160641[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:19:07.827 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:19:07.827 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127686138210160641[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:19:07.830 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:19:07.830 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:19:07.832 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:19:07.832 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:19:07.832 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127686138210160641[0;39m <==      Total: 1
2021-12-19 16:19:07.832 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:19:07.833 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:19:07.833 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:19:07.834 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:19:07.834 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:19:07.834 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:19:07.835 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:19:07.836 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:19:07.836 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:19:07.837 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:19:07.838 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:19:07.838 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:19:07.839 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686138210160640[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:19:07.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:19:07.839 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127686138210160640[0;39m <==      Total: 7
2021-12-19 16:19:07.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:19:07.840 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:19:07.840 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:19:07.841 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:19:07.842 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:19:07.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:19:07.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:19:07.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686138210160642[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:19:07.847 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127686138210160642[0;39m <==      Total: 19
2021-12-19 16:19:07.866 INFO  com.aspect.LogAspect                              :92   [32m127686138210160642[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:19:07.867 INFO  com.aspect.LogAspect                              :93   [32m127686138210160642[0;39m ------------- 结束 耗时：224 ms -------------
2021-12-19 16:19:07.868 INFO  com.aspect.LogAspect                              :92   [32m127686138210160641[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:19:07.868 INFO  com.aspect.LogAspect                              :92   [32m127686138210160640[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:19:07.868 INFO  com.aspect.LogAspect                              :93   [32m127686138210160641[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 16:19:07.868 INFO  com.aspect.LogAspect                              :93   [32m127686138210160640[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 16:19:10.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127686148184215552[0;39m 生成今日电子书快照开始
2021-12-19 16:19:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686148184215552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686148184215552[0;39m ==> Parameters: 
2021-12-19 16:19:10.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686148184215552[0;39m <==    Updates: 0
2021-12-19 16:19:10.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127686148184215552[0;39m 生成今日电子书快照结束，耗时：213毫秒
2021-12-19 16:19:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686169117986816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686169117986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686169117986816[0;39m ==> Parameters: 
2021-12-19 16:19:15.178 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686169117986816[0;39m <==    Updates: 0
2021-12-19 16:19:15.178 INFO  com.job.EbookSnapshotJob                          :35   [32m127686169117986816[0;39m 生成今日电子书快照结束，耗时：166毫秒
2021-12-19 16:19:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686190089506816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:20.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686190089506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:20.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686190089506816[0;39m ==> Parameters: 
2021-12-19 16:19:20.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686190089506816[0;39m <==    Updates: 0
2021-12-19 16:19:20.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127686190089506816[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-19 16:19:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686211061026816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:25.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686211061026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:25.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686211061026816[0;39m ==> Parameters: 
2021-12-19 16:19:25.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686211061026816[0;39m <==    Updates: 0
2021-12-19 16:19:25.201 INFO  com.job.EbookSnapshotJob                          :35   [32m127686211061026816[0;39m 生成今日电子书快照结束，耗时：189毫秒
2021-12-19 16:19:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686232032546816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:30.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686232032546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686232032546816[0;39m ==> Parameters: 
2021-12-19 16:19:30.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686232032546816[0;39m <==    Updates: 0
2021-12-19 16:19:30.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127686232032546816[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 16:19:35.005 INFO  com.job.DocJob                                    :32   [32m127686252974706688[0;39m 更新电子书下的文档数据开始
2021-12-19 16:19:35.401 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686252974706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:19:35.401 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686252974706688[0;39m ==> Parameters: 
2021-12-19 16:19:35.502 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686252974706688[0;39m <==    Updates: 3
2021-12-19 16:19:35.502 INFO  com.job.DocJob                                    :35   [32m127686252974706688[0;39m 更新电子书下的文档数据结束，耗时：497毫秒
2021-12-19 16:19:35.502 INFO  com.job.EbookSnapshotJob                          :32   [32m127686255059275776[0;39m 生成今日电子书快照开始
2021-12-19 16:19:35.502 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686255059275776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:35.502 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686255059275776[0;39m ==> Parameters: 
2021-12-19 16:19:35.602 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686255059275776[0;39m <==    Updates: 0
2021-12-19 16:19:35.602 INFO  com.job.EbookSnapshotJob                          :35   [32m127686255059275776[0;39m 生成今日电子书快照结束，耗时：100毫秒
2021-12-19 16:19:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686273975586816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686273975586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686273975586816[0;39m ==> Parameters: 
2021-12-19 16:19:40.191 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686273975586816[0;39m <==    Updates: 0
2021-12-19 16:19:40.191 INFO  com.job.EbookSnapshotJob                          :35   [32m127686273975586816[0;39m 生成今日电子书快照结束，耗时：179毫秒
2021-12-19 16:19:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686294947106816[0;39m 生成今日电子书快照开始
2021-12-19 16:19:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686294947106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686294947106816[0;39m ==> Parameters: 
2021-12-19 16:19:45.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686294947106816[0;39m <==    Updates: 0
2021-12-19 16:19:45.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127686294947106816[0;39m 生成今日电子书快照结束，耗时：180毫秒
2021-12-19 16:19:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127686315906043904[0;39m 生成今日电子书快照开始
2021-12-19 16:19:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686315906043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:50.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686315906043904[0;39m ==> Parameters: 
2021-12-19 16:19:50.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686315906043904[0;39m <==    Updates: 0
2021-12-19 16:19:50.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127686315906043904[0;39m 生成今日电子书快照结束，耗时：155毫秒
2021-12-19 16:19:55.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127686336856592384[0;39m 生成今日电子书快照开始
2021-12-19 16:19:55.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686336856592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:19:55.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686336856592384[0;39m ==> Parameters: 
2021-12-19 16:19:55.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686336856592384[0;39m <==    Updates: 0
2021-12-19 16:19:55.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127686336856592384[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:20:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686357857472512[0;39m 生成今日电子书快照开始
2021-12-19 16:20:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686357857472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686357857472512[0;39m ==> Parameters: 
2021-12-19 16:20:00.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686357857472512[0;39m <==    Updates: 0
2021-12-19 16:20:00.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127686357857472512[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:20:04.326 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：voXjwfVX4U，session id：0！当前连接数：0
2021-12-19 16:20:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686378833186816[0;39m 生成今日电子书快照开始
2021-12-19 16:20:05.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686378833186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:05.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686378833186816[0;39m ==> Parameters: 
2021-12-19 16:20:05.208 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686378833186816[0;39m <==    Updates: 0
2021-12-19 16:20:05.208 INFO  com.job.EbookSnapshotJob                          :35   [32m127686378833186816[0;39m 生成今日电子书快照结束，耗时：195毫秒
2021-12-19 16:20:05.209 INFO  com.job.DocJob                                    :32   [32m127686379659464704[0;39m 更新电子书下的文档数据开始
2021-12-19 16:20:05.209 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686379659464704[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:20:05.209 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686379659464704[0;39m ==> Parameters: 
2021-12-19 16:20:05.320 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686379659464704[0;39m <==    Updates: 3
2021-12-19 16:20:05.320 INFO  com.job.DocJob                                    :35   [32m127686379659464704[0;39m 更新电子书下的文档数据结束，耗时：111毫秒
2021-12-19 16:20:05.404 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：lRbg3HCkmj，session id：1，当前连接数：1
2021-12-19 16:20:05.482 INFO  com.aspect.LogAspect                              :54   [32m127686380804509696[0;39m ------------- 开始 -------------
2021-12-19 16:20:05.484 INFO  com.aspect.LogAspect                              :54   [32m127686380812898304[0;39m ------------- 开始 -------------
2021-12-19 16:20:05.483 INFO  com.aspect.LogAspect                              :55   [32m127686380804509696[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:20:05.484 INFO  com.aspect.LogAspect                              :55   [32m127686380812898304[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:20:05.484 INFO  com.aspect.LogAspect                              :56   [32m127686380812898304[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:20:05.484 INFO  com.aspect.LogAspect                              :56   [32m127686380804509696[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:20:05.485 INFO  com.aspect.LogAspect                              :57   [32m127686380812898304[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:05.485 INFO  com.aspect.LogAspect                              :80   [32m127686380812898304[0;39m 请求参数: []
2021-12-19 16:20:05.485 INFO  com.aspect.LogAspect                              :57   [32m127686380804509696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:05.485 INFO  com.aspect.LogAspect                              :80   [32m127686380804509696[0;39m 请求参数: []
2021-12-19 16:20:05.486 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127686380812898304[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:20:05.486 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127686380812898304[0;39m ==> Parameters: 
2021-12-19 16:20:05.486 INFO  com.aspect.LogAspect                              :54   [32m127686380821286912[0;39m ------------- 开始 -------------
2021-12-19 16:20:05.487 INFO  com.aspect.LogAspect                              :55   [32m127686380821286912[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:20:05.487 INFO  com.aspect.LogAspect                              :56   [32m127686380821286912[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:20:05.487 INFO  com.aspect.LogAspect                              :57   [32m127686380821286912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:05.487 INFO  com.aspect.LogAspect                              :80   [32m127686380821286912[0;39m 请求参数: []
2021-12-19 16:20:05.559 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127686380804509696[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:20:05.559 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:20:05.559 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127686380821286912[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:20:05.560 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:20:05.560 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127686380821286912[0;39m ==> Parameters: 
2021-12-19 16:20:05.559 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127686380804509696[0;39m ==> Parameters: 
2021-12-19 16:20:05.561 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:20:05.562 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:20:05.563 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:20:05.564 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:20:05.565 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:20:05.566 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127686380812898304[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:20:05.566 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127686380812898304[0;39m <==      Total: 7
2021-12-19 16:20:05.568 INFO  com.aspect.LogAspect                              :92   [32m127686380812898304[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:20:05.568 INFO  com.aspect.LogAspect                              :93   [32m127686380812898304[0;39m ------------- 结束 耗时：84 ms -------------
2021-12-19 16:20:05.642 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127686380804509696[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:20:05.642 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127686380804509696[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:20:05.644 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127686380804509696[0;39m <==      Total: 1
2021-12-19 16:20:05.645 INFO  com.aspect.LogAspect                              :92   [32m127686380804509696[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:20:05.645 INFO  com.aspect.LogAspect                              :93   [32m127686380804509696[0;39m ------------- 结束 耗时：163 ms -------------
2021-12-19 16:20:05.652 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:20:05.653 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:20:05.653 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:20:05.653 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:20:05.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:20:05.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:20:05.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:20:05.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:20:05.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:20:05.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:20:05.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:20:05.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:20:05.657 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:20:05.658 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:20:05.658 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:20:05.659 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:20:05.659 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:20:05.660 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:20:05.660 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:20:05.661 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127686380821286912[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:20:05.662 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127686380821286912[0;39m <==      Total: 19
2021-12-19 16:20:05.664 INFO  com.aspect.LogAspect                              :92   [32m127686380821286912[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:20:05.664 INFO  com.aspect.LogAspect                              :93   [32m127686380821286912[0;39m ------------- 结束 耗时：178 ms -------------
2021-12-19 16:20:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127686399800512512[0;39m 生成今日电子书快照开始
2021-12-19 16:20:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686399800512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:10.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686399800512512[0;39m ==> Parameters: 
2021-12-19 16:20:10.200 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686399800512512[0;39m <==    Updates: 0
2021-12-19 16:20:10.200 INFO  com.job.EbookSnapshotJob                          :35   [32m127686399800512512[0;39m 生成今日电子书快照结束，耗时：189毫秒
2021-12-19 16:20:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127686420734283776[0;39m 生成今日电子书快照开始
2021-12-19 16:20:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686420734283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686420734283776[0;39m ==> Parameters: 
2021-12-19 16:20:15.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686420734283776[0;39m <==    Updates: 0
2021-12-19 16:20:15.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127686420734283776[0;39m 生成今日电子书快照结束，耗时：190毫秒
2021-12-19 16:20:20.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127686441714192384[0;39m 生成今日电子书快照开始
2021-12-19 16:20:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686441714192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686441714192384[0;39m ==> Parameters: 
2021-12-19 16:20:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686441714192384[0;39m <==    Updates: 0
2021-12-19 16:20:20.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127686441714192384[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:20:25.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127686462744432640[0;39m 生成今日电子书快照开始
2021-12-19 16:20:25.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686462744432640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686462744432640[0;39m ==> Parameters: 
2021-12-19 16:20:25.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686462744432640[0;39m <==    Updates: 0
2021-12-19 16:20:25.218 INFO  com.job.EbookSnapshotJob                          :35   [32m127686462744432640[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-19 16:20:27.652 INFO  com.aspect.LogAspect                              :54   [32m127686473792229376[0;39m ------------- 开始 -------------
2021-12-19 16:20:27.652 INFO  com.aspect.LogAspect                              :55   [32m127686473792229376[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:27.653 INFO  com.aspect.LogAspect                              :56   [32m127686473792229376[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:27.653 INFO  com.aspect.LogAspect                              :57   [32m127686473792229376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:27.658 INFO  com.aspect.LogAspect                              :80   [32m127686473792229376[0;39m 请求参数: [{"categoryId2":115484763686572032,"page":1,"size":1000}]
2021-12-19 16:20:27.774 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686473792229376[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:27.774 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686473792229376[0;39m ==> Parameters: 115484763686572032(Long)
2021-12-19 16:20:27.824 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686473792229376[0;39m <==    Columns: count(0)
2021-12-19 16:20:27.825 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686473792229376[0;39m <==        Row: 1
2021-12-19 16:20:27.829 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686473792229376[0;39m <==      Total: 1
2021-12-19 16:20:27.838 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686473792229376[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 16:20:27.839 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686473792229376[0;39m ==> Parameters: 115484763686572032(Long), 1000(Integer)
2021-12-19 16:20:27.900 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686473792229376[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 16:20:27.901 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686473792229376[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 16:20:27.902 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686473792229376[0;39m <==      Total: 1
2021-12-19 16:20:27.906 INFO  com.servicess.EbookService                        :48   [32m127686473792229376[0;39m 总行数：1
2021-12-19 16:20:27.907 INFO  com.servicess.EbookService                        :49   [32m127686473792229376[0;39m 总页数：1
2021-12-19 16:20:27.940 INFO  com.aspect.LogAspect                              :92   [32m127686473792229376[0;39m 返回结果: {"content":{"list":[{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":1},"success":true}
2021-12-19 16:20:27.940 INFO  com.aspect.LogAspect                              :93   [32m127686473792229376[0;39m ------------- 结束 耗时：288 ms -------------
2021-12-19 16:20:29.446 INFO  com.aspect.LogAspect                              :54   [32m127686481316810752[0;39m ------------- 开始 -------------
2021-12-19 16:20:29.447 INFO  com.aspect.LogAspect                              :55   [32m127686481316810752[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:29.447 INFO  com.aspect.LogAspect                              :56   [32m127686481316810752[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:29.447 INFO  com.aspect.LogAspect                              :57   [32m127686481316810752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:29.447 INFO  com.aspect.LogAspect                              :80   [32m127686481316810752[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-19 16:20:29.508 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686481316810752[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:29.509 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686481316810752[0;39m ==> Parameters: 101(Long)
2021-12-19 16:20:29.561 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686481316810752[0;39m <==    Columns: count(0)
2021-12-19 16:20:29.562 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686481316810752[0;39m <==        Row: 1
2021-12-19 16:20:29.562 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686481316810752[0;39m <==      Total: 1
2021-12-19 16:20:29.563 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686481316810752[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 16:20:29.564 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686481316810752[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-19 16:20:29.626 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686481316810752[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 16:20:29.627 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686481316810752[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 77, 29
2021-12-19 16:20:29.628 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686481316810752[0;39m <==      Total: 1
2021-12-19 16:20:29.629 INFO  com.servicess.EbookService                        :48   [32m127686481316810752[0;39m 总行数：1
2021-12-19 16:20:29.630 INFO  com.servicess.EbookService                        :49   [32m127686481316810752[0;39m 总页数：1
2021-12-19 16:20:29.630 INFO  com.aspect.LogAspect                              :92   [32m127686481316810752[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":77,"voteCount":29}],"total":1},"success":true}
2021-12-19 16:20:29.631 INFO  com.aspect.LogAspect                              :93   [32m127686481316810752[0;39m ------------- 结束 耗时：185 ms -------------
2021-12-19 16:20:29.882 INFO  com.aspect.LogAspect                              :54   [32m127686483145527296[0;39m ------------- 开始 -------------
2021-12-19 16:20:29.882 INFO  com.aspect.LogAspect                              :55   [32m127686483145527296[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:29.882 INFO  com.aspect.LogAspect                              :56   [32m127686483145527296[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:29.883 INFO  com.aspect.LogAspect                              :57   [32m127686483145527296[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:29.883 INFO  com.aspect.LogAspect                              :80   [32m127686483145527296[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2021-12-19 16:20:29.947 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686483145527296[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:29.948 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686483145527296[0;39m ==> Parameters: 102(Long)
2021-12-19 16:20:30.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127686483653038080[0;39m 生成今日电子书快照开始
2021-12-19 16:20:30.003 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686483145527296[0;39m <==    Columns: count(0)
2021-12-19 16:20:30.004 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686483653038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:30.004 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686483145527296[0;39m <==        Row: 0
2021-12-19 16:20:30.005 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686483145527296[0;39m <==      Total: 1
2021-12-19 16:20:30.006 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686483653038080[0;39m ==> Parameters: 
2021-12-19 16:20:30.006 INFO  com.servicess.EbookService                        :48   [32m127686483145527296[0;39m 总行数：0
2021-12-19 16:20:30.007 INFO  com.servicess.EbookService                        :49   [32m127686483145527296[0;39m 总页数：0
2021-12-19 16:20:30.008 INFO  com.aspect.LogAspect                              :92   [32m127686483145527296[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-19 16:20:30.009 INFO  com.aspect.LogAspect                              :93   [32m127686483145527296[0;39m ------------- 结束 耗时：127 ms -------------
2021-12-19 16:20:30.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686483653038080[0;39m <==    Updates: 0
2021-12-19 16:20:30.123 INFO  com.job.EbookSnapshotJob                          :35   [32m127686483653038080[0;39m 生成今日电子书快照结束，耗时：119毫秒
2021-12-19 16:20:30.827 INFO  com.aspect.LogAspect                              :54   [32m127686487109144576[0;39m ------------- 开始 -------------
2021-12-19 16:20:30.828 INFO  com.aspect.LogAspect                              :55   [32m127686487109144576[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:30.828 INFO  com.aspect.LogAspect                              :56   [32m127686487109144576[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:30.829 INFO  com.aspect.LogAspect                              :57   [32m127686487109144576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:30.829 INFO  com.aspect.LogAspect                              :80   [32m127686487109144576[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-19 16:20:30.878 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686487109144576[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:30.879 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686487109144576[0;39m ==> Parameters: 101(Long)
2021-12-19 16:20:30.926 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686487109144576[0;39m <==    Columns: count(0)
2021-12-19 16:20:30.927 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686487109144576[0;39m <==        Row: 1
2021-12-19 16:20:30.928 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686487109144576[0;39m <==      Total: 1
2021-12-19 16:20:30.929 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686487109144576[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 16:20:30.930 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686487109144576[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-19 16:20:30.979 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686487109144576[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 16:20:30.979 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686487109144576[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 77, 29
2021-12-19 16:20:30.980 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686487109144576[0;39m <==      Total: 1
2021-12-19 16:20:30.981 INFO  com.servicess.EbookService                        :48   [32m127686487109144576[0;39m 总行数：1
2021-12-19 16:20:30.981 INFO  com.servicess.EbookService                        :49   [32m127686487109144576[0;39m 总页数：1
2021-12-19 16:20:30.982 INFO  com.aspect.LogAspect                              :92   [32m127686487109144576[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":77,"voteCount":29}],"total":1},"success":true}
2021-12-19 16:20:30.982 INFO  com.aspect.LogAspect                              :93   [32m127686487109144576[0;39m ------------- 结束 耗时：155 ms -------------
2021-12-19 16:20:31.632 INFO  com.aspect.LogAspect                              :54   [32m127686490485559296[0;39m ------------- 开始 -------------
2021-12-19 16:20:31.632 INFO  com.aspect.LogAspect                              :55   [32m127686490485559296[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:31.632 INFO  com.aspect.LogAspect                              :56   [32m127686490485559296[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:31.632 INFO  com.aspect.LogAspect                              :57   [32m127686490485559296[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:31.633 INFO  com.aspect.LogAspect                              :80   [32m127686490485559296[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2021-12-19 16:20:31.688 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686490485559296[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:31.689 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686490485559296[0;39m ==> Parameters: 102(Long)
2021-12-19 16:20:31.736 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686490485559296[0;39m <==    Columns: count(0)
2021-12-19 16:20:31.737 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686490485559296[0;39m <==        Row: 0
2021-12-19 16:20:31.737 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686490485559296[0;39m <==      Total: 1
2021-12-19 16:20:31.737 INFO  com.servicess.EbookService                        :48   [32m127686490485559296[0;39m 总行数：0
2021-12-19 16:20:31.737 INFO  com.servicess.EbookService                        :49   [32m127686490485559296[0;39m 总页数：0
2021-12-19 16:20:31.738 INFO  com.aspect.LogAspect                              :92   [32m127686490485559296[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-19 16:20:31.738 INFO  com.aspect.LogAspect                              :93   [32m127686490485559296[0;39m ------------- 结束 耗时：106 ms -------------
2021-12-19 16:20:33.948 INFO  com.aspect.LogAspect                              :54   [32m127686500199567360[0;39m ------------- 开始 -------------
2021-12-19 16:20:33.948 INFO  com.aspect.LogAspect                              :55   [32m127686500199567360[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:33.948 INFO  com.aspect.LogAspect                              :56   [32m127686500199567360[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:33.948 INFO  com.aspect.LogAspect                              :57   [32m127686500199567360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:33.949 INFO  com.aspect.LogAspect                              :80   [32m127686500199567360[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-19 16:20:34.043 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686500199567360[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:34.044 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686500199567360[0;39m ==> Parameters: 201(Long)
2021-12-19 16:20:34.090 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686500199567360[0;39m <==    Columns: count(0)
2021-12-19 16:20:34.091 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686500199567360[0;39m <==        Row: 0
2021-12-19 16:20:34.092 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686500199567360[0;39m <==      Total: 1
2021-12-19 16:20:34.093 INFO  com.servicess.EbookService                        :48   [32m127686500199567360[0;39m 总行数：0
2021-12-19 16:20:34.093 INFO  com.servicess.EbookService                        :49   [32m127686500199567360[0;39m 总页数：0
2021-12-19 16:20:34.094 INFO  com.aspect.LogAspect                              :92   [32m127686500199567360[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-19 16:20:34.094 INFO  com.aspect.LogAspect                              :93   [32m127686500199567360[0;39m ------------- 结束 耗时：146 ms -------------
2021-12-19 16:20:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127686504670695424[0;39m 生成今日电子书快照开始
2021-12-19 16:20:35.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686504670695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:35.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686504670695424[0;39m ==> Parameters: 
2021-12-19 16:20:35.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686504670695424[0;39m <==    Updates: 0
2021-12-19 16:20:35.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127686504670695424[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-19 16:20:35.215 INFO  com.job.DocJob                                    :32   [32m127686505513750528[0;39m 更新电子书下的文档数据开始
2021-12-19 16:20:35.216 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686505513750528[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:20:35.216 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686505513750528[0;39m ==> Parameters: 
2021-12-19 16:20:35.327 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127686505513750528[0;39m <==    Updates: 3
2021-12-19 16:20:35.327 INFO  com.job.DocJob                                    :35   [32m127686505513750528[0;39m 更新电子书下的文档数据结束，耗时：112毫秒
2021-12-19 16:20:40.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127686525600272384[0;39m 生成今日电子书快照开始
2021-12-19 16:20:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686525600272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686525600272384[0;39m ==> Parameters: 
2021-12-19 16:20:40.179 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686525600272384[0;39m <==    Updates: 0
2021-12-19 16:20:40.179 INFO  com.job.EbookSnapshotJob                          :35   [32m127686525600272384[0;39m 生成今日电子书快照结束，耗时：175毫秒
2021-12-19 16:20:44.715 INFO  com.aspect.LogAspect                              :54   [32m127686545359638528[0;39m ------------- 开始 -------------
2021-12-19 16:20:44.715 INFO  com.aspect.LogAspect                              :55   [32m127686545359638528[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:20:44.715 INFO  com.aspect.LogAspect                              :56   [32m127686545359638528[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:20:44.715 INFO  com.aspect.LogAspect                              :57   [32m127686545359638528[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:20:44.716 INFO  com.aspect.LogAspect                              :80   [32m127686545359638528[0;39m 请求参数: [{"categoryId2":115484763686572032,"page":1,"size":1000}]
2021-12-19 16:20:44.809 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686545359638528[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:20:44.811 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686545359638528[0;39m ==> Parameters: 115484763686572032(Long)
2021-12-19 16:20:44.876 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686545359638528[0;39m <==    Columns: count(0)
2021-12-19 16:20:44.878 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127686545359638528[0;39m <==        Row: 1
2021-12-19 16:20:44.878 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127686545359638528[0;39m <==      Total: 1
2021-12-19 16:20:44.880 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686545359638528[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 16:20:44.880 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686545359638528[0;39m ==> Parameters: 115484763686572032(Long), 1000(Integer)
2021-12-19 16:20:44.938 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686545359638528[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 16:20:44.939 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127686545359638528[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-19 16:20:44.939 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127686545359638528[0;39m <==      Total: 1
2021-12-19 16:20:44.940 INFO  com.servicess.EbookService                        :48   [32m127686545359638528[0;39m 总行数：1
2021-12-19 16:20:44.940 INFO  com.servicess.EbookService                        :49   [32m127686545359638528[0;39m 总页数：1
2021-12-19 16:20:44.940 INFO  com.aspect.LogAspect                              :92   [32m127686545359638528[0;39m 返回结果: {"content":{"list":[{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":1},"success":true}
2021-12-19 16:20:44.940 INFO  com.aspect.LogAspect                              :93   [32m127686545359638528[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 16:20:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127686546605346816[0;39m 生成今日电子书快照开始
2021-12-19 16:20:45.013 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686546605346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:45.014 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686546605346816[0;39m ==> Parameters: 
2021-12-19 16:20:45.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686546605346816[0;39m <==    Updates: 0
2021-12-19 16:20:45.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127686546605346816[0;39m 生成今日电子书快照结束，耗时：134毫秒
2021-12-19 16:20:50.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127686567555895296[0;39m 生成今日电子书快照开始
2021-12-19 16:20:50.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686567555895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:50.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686567555895296[0;39m ==> Parameters: 
2021-12-19 16:20:50.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686567555895296[0;39m <==    Updates: 0
2021-12-19 16:20:50.182 INFO  com.job.EbookSnapshotJob                          :35   [32m127686567555895296[0;39m 生成今日电子书快照结束，耗时：175毫秒
2021-12-19 16:20:52.080 INFO  com.websocket.WebSocketServer                     :41   [32m127686380812898304[0;39m 连接关闭，token：lRbg3HCkmj，session id：1！当前连接数：0
2021-12-19 16:20:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127686588535803904[0;39m 生成今日电子书快照开始
2021-12-19 16:20:55.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686588535803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:20:55.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686588535803904[0;39m ==> Parameters: 
2021-12-19 16:20:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127686588535803904[0;39m <==    Updates: 0
2021-12-19 16:20:55.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127686588535803904[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-19 16:35:03.924 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 16:35:03.932 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 3796 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 16:35:03.932 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 16:35:04.025 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 16:35:04.025 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 16:35:05.224 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 16:35:05.224 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 16:35:05.674 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 433 ms. Found 0 Redis repository interfaces.
2021-12-19 16:35:06.324 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 16:35:06.334 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 16:35:06.334 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 16:35:06.334 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 16:35:06.414 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 16:35:06.414 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2389 ms
2021-12-19 16:35:08.402 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 16:35:08.422 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 16:35:08.442 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 16:35:08.462 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.323 seconds (JVM running for 6.598)
2021-12-19 16:35:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127690174682501120[0;39m 生成今日电子书快照开始
2021-12-19 16:35:10.023 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127690174682501120[0;39m HikariPool-1 - Starting...
2021-12-19 16:35:10.901 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127690174682501120[0;39m HikariPool-1 - Start completed.
2021-12-19 16:35:10.911 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690174682501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:10.931 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690174682501120[0;39m ==> Parameters: 
2021-12-19 16:35:11.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690174682501120[0;39m <==    Updates: 0
2021-12-19 16:35:11.061 INFO  com.job.EbookSnapshotJob                          :35   [32m127690174682501120[0;39m 生成今日电子书快照结束，耗时：1048毫秒
2021-12-19 16:35:15.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127690195637243904[0;39m 生成今日电子书快照开始
2021-12-19 16:35:15.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690195637243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:15.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690195637243904[0;39m ==> Parameters: 
2021-12-19 16:35:15.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690195637243904[0;39m <==    Updates: 0
2021-12-19 16:35:15.175 INFO  com.job.EbookSnapshotJob                          :35   [32m127690195637243904[0;39m 生成今日电子书快照结束，耗时：166毫秒
2021-12-19 16:35:20.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127690216583598080[0;39m 生成今日电子书快照开始
2021-12-19 16:35:20.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690216583598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:20.043 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690216583598080[0;39m ==> Parameters: 
2021-12-19 16:35:20.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690216583598080[0;39m <==    Updates: 0
2021-12-19 16:35:20.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127690216583598080[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:35:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127690237597061120[0;39m 生成今日电子书快照开始
2021-12-19 16:35:25.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690237597061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:25.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690237597061120[0;39m ==> Parameters: 
2021-12-19 16:35:25.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690237597061120[0;39m <==    Updates: 0
2021-12-19 16:35:25.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127690237597061120[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 16:35:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127690258555998208[0;39m 生成今日电子书快照开始
2021-12-19 16:35:30.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690258555998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:30.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690258555998208[0;39m ==> Parameters: 
2021-12-19 16:35:30.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690258555998208[0;39m <==    Updates: 0
2021-12-19 16:35:30.140 INFO  com.job.EbookSnapshotJob                          :35   [32m127690258555998208[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 16:35:35.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127690279519129600[0;39m 生成今日电子书快照开始
2021-12-19 16:35:35.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690279519129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:35.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690279519129600[0;39m ==> Parameters: 
2021-12-19 16:35:35.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690279519129600[0;39m <==    Updates: 0
2021-12-19 16:35:35.166 INFO  com.job.EbookSnapshotJob                          :35   [32m127690279519129600[0;39m 生成今日电子书快照结束，耗时：158毫秒
2021-12-19 16:35:35.167 INFO  com.job.DocJob                                    :32   [32m127690280186023936[0;39m 更新电子书下的文档数据开始
2021-12-19 16:35:35.173 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127690280186023936[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:35:35.174 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127690280186023936[0;39m ==> Parameters: 
2021-12-19 16:35:35.269 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127690280186023936[0;39m <==    Updates: 3
2021-12-19 16:35:35.269 INFO  com.job.DocJob                                    :35   [32m127690280186023936[0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2021-12-19 16:35:36.000 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 16:35:36.001 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 16:35:36.002 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 16:35:36.044 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：Xl1BpMWXXh，session id：0，当前连接数：1
2021-12-19 16:35:36.281 INFO  com.aspect.LogAspect                              :54   [32m127690284854284288[0;39m ------------- 开始 -------------
2021-12-19 16:35:36.281 INFO  com.aspect.LogAspect                              :54   [32m127690284854284289[0;39m ------------- 开始 -------------
2021-12-19 16:35:36.281 INFO  com.aspect.LogAspect                              :54   [32m127690284854284290[0;39m ------------- 开始 -------------
2021-12-19 16:35:36.282 INFO  com.aspect.LogAspect                              :55   [32m127690284854284289[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:35:36.282 INFO  com.aspect.LogAspect                              :55   [32m127690284854284288[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:35:36.282 INFO  com.aspect.LogAspect                              :55   [32m127690284854284290[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:35:36.282 INFO  com.aspect.LogAspect                              :56   [32m127690284854284289[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:35:36.282 INFO  com.aspect.LogAspect                              :56   [32m127690284854284288[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:35:36.283 INFO  com.aspect.LogAspect                              :57   [32m127690284854284289[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:35:36.283 INFO  com.aspect.LogAspect                              :57   [32m127690284854284288[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:35:36.282 INFO  com.aspect.LogAspect                              :56   [32m127690284854284290[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:35:36.284 INFO  com.aspect.LogAspect                              :57   [32m127690284854284290[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:35:36.317 INFO  com.aspect.LogAspect                              :80   [32m127690284854284290[0;39m 请求参数: []
2021-12-19 16:35:36.317 INFO  com.aspect.LogAspect                              :80   [32m127690284854284289[0;39m 请求参数: []
2021-12-19 16:35:36.324 INFO  com.aspect.LogAspect                              :80   [32m127690284854284288[0;39m 请求参数: []
2021-12-19 16:35:36.368 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127690284854284290[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:35:36.369 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127690284854284290[0;39m ==> Parameters: 
2021-12-19 16:35:36.371 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127690284854284288[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:35:36.372 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127690284854284288[0;39m ==> Parameters: 
2021-12-19 16:35:36.394 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127690284854284289[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:35:36.394 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127690284854284289[0;39m ==> Parameters: 
2021-12-19 16:35:36.459 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:35:36.459 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127690284854284290[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:35:36.459 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:35:36.459 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:35:36.460 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127690284854284290[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:35:36.460 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:35:36.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:35:36.462 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:35:36.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:35:36.464 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127690284854284290[0;39m <==      Total: 1
2021-12-19 16:35:36.464 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:35:36.464 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:35:36.465 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:35:36.465 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:35:36.465 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:35:36.466 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:35:36.466 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:35:36.468 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:35:36.468 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:35:36.469 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:35:36.470 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:35:36.471 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127690284854284288[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:35:36.471 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:35:36.471 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127690284854284288[0;39m <==      Total: 7
2021-12-19 16:35:36.471 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:35:36.471 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:35:36.472 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:35:36.473 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:35:36.473 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:35:36.476 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:35:36.476 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:35:36.477 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127690284854284289[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:35:36.478 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127690284854284289[0;39m <==      Total: 19
2021-12-19 16:35:36.494 INFO  com.aspect.LogAspect                              :92   [32m127690284854284289[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:35:36.495 INFO  com.aspect.LogAspect                              :93   [32m127690284854284289[0;39m ------------- 结束 耗时：215 ms -------------
2021-12-19 16:35:36.495 INFO  com.aspect.LogAspect                              :92   [32m127690284854284290[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:35:36.495 INFO  com.aspect.LogAspect                              :93   [32m127690284854284290[0;39m ------------- 结束 耗时：215 ms -------------
2021-12-19 16:35:36.495 INFO  com.aspect.LogAspect                              :92   [32m127690284854284288[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:35:36.496 INFO  com.aspect.LogAspect                              :93   [32m127690284854284288[0;39m ------------- 结束 耗时：216 ms -------------
2021-12-19 16:35:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127690300511621120[0;39m 生成今日电子书快照开始
2021-12-19 16:35:40.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690300511621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690300511621120[0;39m ==> Parameters: 
2021-12-19 16:35:40.193 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690300511621120[0;39m <==    Updates: 0
2021-12-19 16:35:40.193 INFO  com.job.EbookSnapshotJob                          :35   [32m127690300511621120[0;39m 生成今日电子书快照结束，耗时：180毫秒
2021-12-19 16:35:43.101 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：Xl1BpMWXXh，session id：0！当前连接数：0
2021-12-19 16:35:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127690321487335424[0;39m 生成今日电子书快照开始
2021-12-19 16:35:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690321487335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:45.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690321487335424[0;39m ==> Parameters: 
2021-12-19 16:35:45.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690321487335424[0;39m <==    Updates: 0
2021-12-19 16:35:45.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127690321487335424[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 16:35:50.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127690342412718080[0;39m 生成今日电子书快照开始
2021-12-19 16:35:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690342412718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:35:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690342412718080[0;39m ==> Parameters: 
2021-12-19 16:35:50.342 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127690342412718080[0;39m <==    Updates: 0
2021-12-19 16:35:50.342 INFO  com.job.EbookSnapshotJob                          :35   [32m127690342412718080[0;39m 生成今日电子书快照结束，耗时：329毫秒
2021-12-19 16:43:17.404 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 16:43:17.411 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 13440 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 16:43:17.411 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 16:43:17.471 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 16:43:17.471 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 16:43:19.071 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 16:43:19.071 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 16:43:19.721 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 628 ms. Found 0 Redis repository interfaces.
2021-12-19 16:43:20.625 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 16:43:20.641 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 16:43:20.641 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 16:43:20.641 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 16:43:20.711 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 16:43:20.711 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3240 ms
2021-12-19 16:43:22.496 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 16:43:22.535 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 16:43:22.561 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 16:43:22.571 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.942 seconds (JVM running for 7.408)
2021-12-19 16:43:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127692250854592512[0;39m 生成今日电子书快照开始
2021-12-19 16:43:25.026 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127692250854592512[0;39m HikariPool-1 - Starting...
2021-12-19 16:43:25.791 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127692250854592512[0;39m HikariPool-1 - Start completed.
2021-12-19 16:43:25.801 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692250854592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:25.837 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692250854592512[0;39m ==> Parameters: 
2021-12-19 16:43:25.971 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692250854592512[0;39m <==    Updates: 0
2021-12-19 16:43:25.974 INFO  com.job.EbookSnapshotJob                          :35   [32m127692250854592512[0;39m 生成今日电子书快照结束，耗时：963毫秒
2021-12-19 16:43:30.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127692271817723904[0;39m 生成今日电子书快照开始
2021-12-19 16:43:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692271817723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692271817723904[0;39m ==> Parameters: 
2021-12-19 16:43:30.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692271817723904[0;39m <==    Updates: 0
2021-12-19 16:43:30.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127692271817723904[0;39m 生成今日电子书快照结束，耗时：183毫秒
2021-12-19 16:43:35.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127692292780855296[0;39m 生成今日电子书快照开始
2021-12-19 16:43:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692292780855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692292780855296[0;39m ==> Parameters: 
2021-12-19 16:43:35.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692292780855296[0;39m <==    Updates: 0
2021-12-19 16:43:35.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127692292780855296[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:43:35.151 INFO  com.job.DocJob                                    :32   [32m127692293384835072[0;39m 更新电子书下的文档数据开始
2021-12-19 16:43:35.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692293384835072[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:43:35.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692293384835072[0;39m ==> Parameters: 
2021-12-19 16:43:35.392 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692293384835072[0;39m <==    Updates: 3
2021-12-19 16:43:35.392 INFO  com.job.DocJob                                    :35   [32m127692293384835072[0;39m 更新电子书下的文档数据结束，耗时：241毫秒
2021-12-19 16:43:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127692313769152512[0;39m 生成今日电子书快照开始
2021-12-19 16:43:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692313769152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692313769152512[0;39m ==> Parameters: 
2021-12-19 16:43:40.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692313769152512[0;39m <==    Updates: 0
2021-12-19 16:43:40.141 INFO  com.job.EbookSnapshotJob                          :35   [32m127692313769152512[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 16:43:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127692334740672512[0;39m 生成今日电子书快照开始
2021-12-19 16:43:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692334740672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692334740672512[0;39m ==> Parameters: 
2021-12-19 16:43:45.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692334740672512[0;39m <==    Updates: 0
2021-12-19 16:43:45.141 INFO  com.job.EbookSnapshotJob                          :35   [32m127692334740672512[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 16:43:50.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127692355670249472[0;39m 生成今日电子书快照开始
2021-12-19 16:43:50.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692355670249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:50.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692355670249472[0;39m ==> Parameters: 
2021-12-19 16:43:50.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692355670249472[0;39m <==    Updates: 0
2021-12-19 16:43:50.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127692355670249472[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:43:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692376687906816[0;39m 生成今日电子书快照开始
2021-12-19 16:43:55.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692376687906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:43:55.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692376687906816[0;39m ==> Parameters: 
2021-12-19 16:43:55.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692376687906816[0;39m <==    Updates: 0
2021-12-19 16:43:55.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127692376687906816[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-19 16:43:58.906 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 16:43:58.906 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 16:43:58.907 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 16:43:58.964 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：bJxU7paKIX，session id：0，当前连接数：1
2021-12-19 16:43:59.204 INFO  com.aspect.LogAspect                              :54   [32m127692394266234880[0;39m ------------- 开始 -------------
2021-12-19 16:43:59.204 INFO  com.aspect.LogAspect                              :54   [32m127692394266234881[0;39m ------------- 开始 -------------
2021-12-19 16:43:59.204 INFO  com.aspect.LogAspect                              :54   [32m127692394266234882[0;39m ------------- 开始 -------------
2021-12-19 16:43:59.205 INFO  com.aspect.LogAspect                              :55   [32m127692394266234881[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:43:59.205 INFO  com.aspect.LogAspect                              :55   [32m127692394266234882[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:43:59.205 INFO  com.aspect.LogAspect                              :55   [32m127692394266234880[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:43:59.206 INFO  com.aspect.LogAspect                              :56   [32m127692394266234882[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:43:59.206 INFO  com.aspect.LogAspect                              :56   [32m127692394266234881[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:43:59.206 INFO  com.aspect.LogAspect                              :56   [32m127692394266234880[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:43:59.206 INFO  com.aspect.LogAspect                              :57   [32m127692394266234882[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:43:59.206 INFO  com.aspect.LogAspect                              :57   [32m127692394266234880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:43:59.206 INFO  com.aspect.LogAspect                              :57   [32m127692394266234881[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:43:59.256 INFO  com.aspect.LogAspect                              :80   [32m127692394266234880[0;39m 请求参数: []
2021-12-19 16:43:59.256 INFO  com.aspect.LogAspect                              :80   [32m127692394266234881[0;39m 请求参数: []
2021-12-19 16:43:59.265 INFO  com.aspect.LogAspect                              :80   [32m127692394266234882[0;39m 请求参数: []
2021-12-19 16:43:59.312 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127692394266234881[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:43:59.315 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127692394266234881[0;39m ==> Parameters: 
2021-12-19 16:43:59.317 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127692394266234880[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:43:59.317 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127692394266234880[0;39m ==> Parameters: 
2021-12-19 16:43:59.350 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127692394266234882[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:43:59.350 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127692394266234882[0;39m ==> Parameters: 
2021-12-19 16:43:59.386 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:43:59.386 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127692394266234881[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:43:59.387 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-19 16:43:59.387 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127692394266234881[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:43:59.390 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-19 16:43:59.390 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127692394266234881[0;39m <==      Total: 1
2021-12-19 16:43:59.391 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-19 16:43:59.392 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-19 16:43:59.393 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-14, 7, 5
2021-12-19 16:43:59.392 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:43:59.394 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-15, 2, 1
2021-12-19 16:43:59.394 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:43:59.396 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127692394266234880[0;39m <==        Row: 2021-12-16, 1, 0
2021-12-19 16:43:59.398 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127692394266234880[0;39m <==      Total: 7
2021-12-19 16:43:59.398 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:43:59.399 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:43:59.400 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:43:59.400 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:43:59.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:43:59.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:43:59.403 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:43:59.403 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:43:59.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:43:59.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:43:59.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:43:59.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:43:59.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:43:59.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:43:59.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:43:59.410 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:43:59.410 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:43:59.411 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127692394266234882[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:43:59.411 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127692394266234882[0;39m <==      Total: 19
2021-12-19 16:43:59.428 INFO  com.aspect.LogAspect                              :92   [32m127692394266234881[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:43:59.428 INFO  com.aspect.LogAspect                              :92   [32m127692394266234880[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29},{"date":1639411200000,"viewCount":0,"viewIncrease":7,"voteCount":0,"voteIncrease":5},{"date":1639497600000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":1},{"date":1639584000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-19 16:43:59.428 INFO  com.aspect.LogAspect                              :92   [32m127692394266234882[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:43:59.428 INFO  com.aspect.LogAspect                              :93   [32m127692394266234881[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 16:43:59.428 INFO  com.aspect.LogAspect                              :93   [32m127692394266234880[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 16:43:59.428 INFO  com.aspect.LogAspect                              :93   [32m127692394266234882[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 16:44:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692397659426816[0;39m 生成今日电子书快照开始
2021-12-19 16:44:00.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692397659426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:00.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692397659426816[0;39m ==> Parameters: 
2021-12-19 16:44:00.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692397659426816[0;39m <==    Updates: 0
2021-12-19 16:44:00.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127692397659426816[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:44:05.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692418589003776[0;39m 生成今日电子书快照开始
2021-12-19 16:44:05.302 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692418589003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:05.311 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692418589003776[0;39m ==> Parameters: 
2021-12-19 16:44:05.402 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692418589003776[0;39m <==    Updates: 0
2021-12-19 16:44:05.402 INFO  com.job.EbookSnapshotJob                          :35   [32m127692418589003776[0;39m 生成今日电子书快照结束，耗时：400毫秒
2021-12-19 16:44:05.402 INFO  com.job.DocJob                                    :32   [32m127692420266725376[0;39m 更新电子书下的文档数据开始
2021-12-19 16:44:05.402 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692420266725376[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:44:05.411 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692420266725376[0;39m ==> Parameters: 
2021-12-19 16:44:05.491 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692420266725376[0;39m <==    Updates: 3
2021-12-19 16:44:05.491 INFO  com.job.DocJob                                    :35   [32m127692420266725376[0;39m 更新电子书下的文档数据结束，耗时：89毫秒
2021-12-19 16:44:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692439602466816[0;39m 生成今日电子书快照开始
2021-12-19 16:44:10.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692439602466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:10.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692439602466816[0;39m ==> Parameters: 
2021-12-19 16:44:10.326 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692439602466816[0;39m <==    Updates: 0
2021-12-19 16:44:10.326 INFO  com.job.EbookSnapshotJob                          :35   [32m127692439602466816[0;39m 生成今日电子书快照结束，耗时：314毫秒
2021-12-19 16:44:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692460573986816[0;39m 生成今日电子书快照开始
2021-12-19 16:44:15.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692460573986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:15.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692460573986816[0;39m ==> Parameters: 
2021-12-19 16:44:15.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692460573986816[0;39m <==    Updates: 0
2021-12-19 16:44:15.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127692460573986816[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:44:20.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692481503563776[0;39m 生成今日电子书快照开始
2021-12-19 16:44:20.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692481503563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:20.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692481503563776[0;39m ==> Parameters: 
2021-12-19 16:44:20.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692481503563776[0;39m <==    Updates: 0
2021-12-19 16:44:20.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127692481503563776[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:44:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127692502512832512[0;39m 生成今日电子书快照开始
2021-12-19 16:44:25.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692502512832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:25.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692502512832512[0;39m ==> Parameters: 
2021-12-19 16:44:25.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692502512832512[0;39m <==    Updates: 0
2021-12-19 16:44:25.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127692502512832512[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 16:44:30.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692523446603776[0;39m 生成今日电子书快照开始
2021-12-19 16:44:30.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692523446603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:30.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692523446603776[0;39m ==> Parameters: 
2021-12-19 16:44:30.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692523446603776[0;39m <==    Updates: 0
2021-12-19 16:44:30.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127692523446603776[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-19 16:44:35.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692544460066816[0;39m 生成今日电子书快照开始
2021-12-19 16:44:35.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692544460066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:35.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692544460066816[0;39m ==> Parameters: 
2021-12-19 16:44:35.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692544460066816[0;39m <==    Updates: 0
2021-12-19 16:44:35.173 INFO  com.job.EbookSnapshotJob                          :35   [32m127692544460066816[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-19 16:44:35.173 INFO  com.job.DocJob                                    :32   [32m127692545135349760[0;39m 更新电子书下的文档数据开始
2021-12-19 16:44:35.175 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692545135349760[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:44:35.175 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692545135349760[0;39m ==> Parameters: 
2021-12-19 16:44:35.272 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692545135349760[0;39m <==    Updates: 3
2021-12-19 16:44:35.272 INFO  com.job.DocJob                                    :35   [32m127692545135349760[0;39m 更新电子书下的文档数据结束，耗时：97毫秒
2021-12-19 16:44:40.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692565389643776[0;39m 生成今日电子书快照开始
2021-12-19 16:44:40.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692565389643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692565389643776[0;39m ==> Parameters: 
2021-12-19 16:44:40.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692565389643776[0;39m <==    Updates: 0
2021-12-19 16:44:40.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127692565389643776[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 16:44:45.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692586361163776[0;39m 生成今日电子书快照开始
2021-12-19 16:44:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692586361163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:45.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692586361163776[0;39m ==> Parameters: 
2021-12-19 16:44:45.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692586361163776[0;39m <==    Updates: 0
2021-12-19 16:44:45.138 INFO  com.job.EbookSnapshotJob                          :35   [32m127692586361163776[0;39m 生成今日电子书快照结束，耗时：136毫秒
2021-12-19 16:44:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692607374626816[0;39m 生成今日电子书快照开始
2021-12-19 16:44:50.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692607374626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:50.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692607374626816[0;39m ==> Parameters: 
2021-12-19 16:44:50.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692607374626816[0;39m <==    Updates: 0
2021-12-19 16:44:50.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127692607374626816[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 16:44:55.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692628304203776[0;39m 生成今日电子书快照开始
2021-12-19 16:44:55.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692628304203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:44:55.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692628304203776[0;39m ==> Parameters: 
2021-12-19 16:44:55.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692628304203776[0;39m <==    Updates: 0
2021-12-19 16:44:55.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127692628304203776[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:45:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692649317666816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692649317666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:00.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692649317666816[0;39m ==> Parameters: 
2021-12-19 16:45:00.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692649317666816[0;39m <==    Updates: 0
2021-12-19 16:45:00.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127692649317666816[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 16:45:05.012 INFO  com.job.DocJob                                    :32   [32m127692670289186816[0;39m 更新电子书下的文档数据开始
2021-12-19 16:45:05.087 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692670289186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:45:05.092 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692670289186816[0;39m ==> Parameters: 
2021-12-19 16:45:05.177 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692670289186816[0;39m <==    Updates: 3
2021-12-19 16:45:05.177 INFO  com.job.DocJob                                    :35   [32m127692670289186816[0;39m 更新电子书下的文档数据结束，耗时：165毫秒
2021-12-19 16:45:05.177 INFO  com.job.EbookSnapshotJob                          :32   [32m127692670981246976[0;39m 生成今日电子书快照开始
2021-12-19 16:45:05.177 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692670981246976[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:05.182 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692670981246976[0;39m ==> Parameters: 
2021-12-19 16:45:05.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692670981246976[0;39m <==    Updates: 0
2021-12-19 16:45:05.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127692670981246976[0;39m 生成今日电子书快照结束，耗时：95毫秒
2021-12-19 16:45:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692691260706816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:10.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692691260706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:10.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692691260706816[0;39m ==> Parameters: 
2021-12-19 16:45:10.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692691260706816[0;39m <==    Updates: 0
2021-12-19 16:45:10.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127692691260706816[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 16:45:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692712190283776[0;39m 生成今日电子书快照开始
2021-12-19 16:45:15.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692712190283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:15.042 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692712190283776[0;39m ==> Parameters: 
2021-12-19 16:45:15.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692712190283776[0;39m <==    Updates: 0
2021-12-19 16:45:15.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127692712190283776[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:45:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692733203746816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692733203746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692733203746816[0;39m ==> Parameters: 
2021-12-19 16:45:20.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692733203746816[0;39m <==    Updates: 0
2021-12-19 16:45:20.166 INFO  com.job.EbookSnapshotJob                          :35   [32m127692733203746816[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-19 16:45:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692754175266816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692754175266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692754175266816[0;39m ==> Parameters: 
2021-12-19 16:45:25.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692754175266816[0;39m <==    Updates: 0
2021-12-19 16:45:25.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127692754175266816[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-19 16:45:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692775146786816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:30.435 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692775146786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:30.436 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692775146786816[0;39m ==> Parameters: 
2021-12-19 16:45:30.533 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692775146786816[0;39m <==    Updates: 0
2021-12-19 16:45:30.534 INFO  com.job.EbookSnapshotJob                          :35   [32m127692775146786816[0;39m 生成今日电子书快照结束，耗时：522毫秒
2021-12-19 16:45:35.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692796118306816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:35.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692796118306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:35.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692796118306816[0;39m ==> Parameters: 
2021-12-19 16:45:35.322 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692796118306816[0;39m <==    Updates: 0
2021-12-19 16:45:35.322 INFO  com.job.EbookSnapshotJob                          :35   [32m127692796118306816[0;39m 生成今日电子书快照结束，耗时：310毫秒
2021-12-19 16:45:35.322 INFO  com.job.DocJob                                    :32   [32m127692797418541056[0;39m 更新电子书下的文档数据开始
2021-12-19 16:45:35.322 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692797418541056[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:45:35.322 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692797418541056[0;39m ==> Parameters: 
2021-12-19 16:45:35.432 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692797418541056[0;39m <==    Updates: 3
2021-12-19 16:45:35.432 INFO  com.job.DocJob                                    :35   [32m127692797418541056[0;39m 更新电子书下的文档数据结束，耗时：110毫秒
2021-12-19 16:45:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692817089826816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692817089826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692817089826816[0;39m ==> Parameters: 
2021-12-19 16:45:40.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692817089826816[0;39m <==    Updates: 0
2021-12-19 16:45:40.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127692817089826816[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:45:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692838061346816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:45.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692838061346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:45.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692838061346816[0;39m ==> Parameters: 
2021-12-19 16:45:45.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692838061346816[0;39m <==    Updates: 0
2021-12-19 16:45:45.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127692838061346816[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-19 16:45:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692859032866816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692859032866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:50.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692859032866816[0;39m ==> Parameters: 
2021-12-19 16:45:50.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692859032866816[0;39m <==    Updates: 0
2021-12-19 16:45:50.202 INFO  com.job.EbookSnapshotJob                          :35   [32m127692859032866816[0;39m 生成今日电子书快照结束，耗时：190毫秒
2021-12-19 16:45:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692880004386816[0;39m 生成今日电子书快照开始
2021-12-19 16:45:55.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692880004386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:45:55.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692880004386816[0;39m ==> Parameters: 
2021-12-19 16:45:55.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692880004386816[0;39m <==    Updates: 0
2021-12-19 16:45:55.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127692880004386816[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 16:46:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692900975906816[0;39m 生成今日电子书快照开始
2021-12-19 16:46:00.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692900975906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:00.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692900975906816[0;39m ==> Parameters: 
2021-12-19 16:46:00.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692900975906816[0;39m <==    Updates: 0
2021-12-19 16:46:00.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127692900975906816[0;39m 生成今日电子书快照结束，耗时：180毫秒
2021-12-19 16:46:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127692921947426816[0;39m 生成今日电子书快照开始
2021-12-19 16:46:05.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692921947426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:05.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692921947426816[0;39m ==> Parameters: 
2021-12-19 16:46:05.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692921947426816[0;39m <==    Updates: 0
2021-12-19 16:46:05.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127692921947426816[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-19 16:46:05.265 INFO  com.job.DocJob                                    :32   [32m127692923008585728[0;39m 更新电子书下的文档数据开始
2021-12-19 16:46:05.265 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692923008585728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:46:05.265 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692923008585728[0;39m ==> Parameters: 
2021-12-19 16:46:05.432 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127692923008585728[0;39m <==    Updates: 3
2021-12-19 16:46:05.432 INFO  com.job.DocJob                                    :35   [32m127692923008585728[0;39m 更新电子书下的文档数据结束，耗时：167毫秒
2021-12-19 16:46:10.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127692942877003776[0;39m 生成今日电子书快照开始
2021-12-19 16:46:10.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692942877003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:10.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692942877003776[0;39m ==> Parameters: 
2021-12-19 16:46:10.295 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692942877003776[0;39m <==    Updates: 0
2021-12-19 16:46:10.296 INFO  com.job.EbookSnapshotJob                          :35   [32m127692942877003776[0;39m 生成今日电子书快照结束，耗时：293毫秒
2021-12-19 16:46:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127692963886272512[0;39m 生成今日电子书快照开始
2021-12-19 16:46:15.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692963886272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692963886272512[0;39m ==> Parameters: 
2021-12-19 16:46:15.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692963886272512[0;39m <==    Updates: 0
2021-12-19 16:46:15.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127692963886272512[0;39m 生成今日电子书快照结束，耗时：228毫秒
2021-12-19 16:46:20.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127692984836820992[0;39m 生成今日电子书快照开始
2021-12-19 16:46:20.038 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692984836820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:20.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692984836820992[0;39m ==> Parameters: 
2021-12-19 16:46:20.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127692984836820992[0;39m <==    Updates: 0
2021-12-19 16:46:20.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127692984836820992[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-19 16:46:25.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127693005783175168[0;39m 生成今日电子书快照开始
2021-12-19 16:46:25.031 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693005783175168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:25.031 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693005783175168[0;39m ==> Parameters: 
2021-12-19 16:46:25.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693005783175168[0;39m <==    Updates: 0
2021-12-19 16:46:25.175 INFO  com.job.EbookSnapshotJob                          :35   [32m127693005783175168[0;39m 生成今日电子书快照结束，耗时：175毫秒
2021-12-19 16:46:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127693026779860992[0;39m 生成今日电子书快照开始
2021-12-19 16:46:30.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693026779860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:30.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693026779860992[0;39m ==> Parameters: 
2021-12-19 16:46:30.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693026779860992[0;39m <==    Updates: 0
2021-12-19 16:46:30.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127693026779860992[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:46:35.014 INFO  com.job.DocJob                                    :32   [32m127693047784935424[0;39m 更新电子书下的文档数据开始
2021-12-19 16:46:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693047784935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:46:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693047784935424[0;39m ==> Parameters: 
2021-12-19 16:46:35.260 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693047784935424[0;39m <==    Updates: 3
2021-12-19 16:46:35.260 INFO  com.job.DocJob                                    :35   [32m127693047784935424[0;39m 更新电子书下的文档数据结束，耗时：246毫秒
2021-12-19 16:46:35.260 INFO  com.job.EbookSnapshotJob                          :32   [32m127693048816734208[0;39m 生成今日电子书快照开始
2021-12-19 16:46:35.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693048816734208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:35.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693048816734208[0;39m ==> Parameters: 
2021-12-19 16:46:35.466 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693048816734208[0;39m <==    Updates: 0
2021-12-19 16:46:35.466 INFO  com.job.EbookSnapshotJob                          :35   [32m127693048816734208[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-19 16:46:40.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127693068790009856[0;39m 生成今日电子书快照开始
2021-12-19 16:46:40.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693068790009856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:40.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693068790009856[0;39m ==> Parameters: 
2021-12-19 16:46:40.307 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693068790009856[0;39m <==    Updates: 0
2021-12-19 16:46:40.307 INFO  com.job.EbookSnapshotJob                          :35   [32m127693068790009856[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-19 16:46:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127693089727975424[0;39m 生成今日电子书快照开始
2021-12-19 16:46:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693089727975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:45.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693089727975424[0;39m ==> Parameters: 
2021-12-19 16:46:45.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693089727975424[0;39m <==    Updates: 0
2021-12-19 16:46:45.145 INFO  com.job.EbookSnapshotJob                          :35   [32m127693089727975424[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-19 16:46:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693110707884032[0;39m 生成今日电子书快照开始
2021-12-19 16:46:50.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693110707884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:50.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693110707884032[0;39m ==> Parameters: 
2021-12-19 16:46:50.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693110707884032[0;39m <==    Updates: 0
2021-12-19 16:46:50.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127693110707884032[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-19 16:46:55.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693131679404032[0;39m 生成今日电子书快照开始
2021-12-19 16:46:55.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693131679404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:46:55.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693131679404032[0;39m ==> Parameters: 
2021-12-19 16:46:55.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693131679404032[0;39m <==    Updates: 0
2021-12-19 16:46:55.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127693131679404032[0;39m 生成今日电子书快照结束，耗时：127毫秒
2021-12-19 16:47:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693152650924032[0;39m 生成今日电子书快照开始
2021-12-19 16:47:00.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693152650924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:00.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693152650924032[0;39m ==> Parameters: 
2021-12-19 16:47:12.460 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693152650924032[0;39m <==    Updates: 0
2021-12-19 16:47:12.460 INFO  com.job.EbookSnapshotJob                          :35   [32m127693152650924032[0;39m 生成今日电子书快照结束，耗时：12444毫秒
2021-12-19 16:47:12.460 INFO  com.job.DocJob                                    :32   [32m127693204844843008[0;39m 更新电子书下的文档数据开始
2021-12-19 16:47:12.569 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693204844843008[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:47:12.569 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693204844843008[0;39m ==> Parameters: 
2021-12-19 16:47:12.683 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693204844843008[0;39m <==    Updates: 3
2021-12-19 16:47:12.683 INFO  com.job.DocJob                                    :35   [32m127693204844843008[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-19 16:47:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693215552901120[0;39m 生成今日电子书快照开始
2021-12-19 16:47:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693215552901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:15.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693215552901120[0;39m ==> Parameters: 
2021-12-19 16:47:15.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693215552901120[0;39m <==    Updates: 6
2021-12-19 16:47:15.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127693215552901120[0;39m 生成今日电子书快照结束，耗时：256毫秒
2021-12-19 16:47:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693236537004032[0;39m 生成今日电子书快照开始
2021-12-19 16:47:20.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693236537004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:20.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693236537004032[0;39m ==> Parameters: 
2021-12-19 16:47:20.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693236537004032[0;39m <==    Updates: 0
2021-12-19 16:47:20.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127693236537004032[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 16:47:24.608 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：bJxU7paKIX，session id：0！当前连接数：0
2021-12-19 16:47:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127693257504329728[0;39m 生成今日电子书快照开始
2021-12-19 16:47:25.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693257504329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:25.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693257504329728[0;39m ==> Parameters: 
2021-12-19 16:47:25.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693257504329728[0;39m <==    Updates: 0
2021-12-19 16:47:25.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127693257504329728[0;39m 生成今日电子书快照结束，耗时：137毫秒
2021-12-19 16:47:25.668 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：zMGmu5rpuw，session id：1，当前连接数：1
2021-12-19 16:47:25.741 INFO  com.aspect.LogAspect                              :54   [32m127693260549394432[0;39m ------------- 开始 -------------
2021-12-19 16:47:25.741 INFO  com.aspect.LogAspect                              :55   [32m127693260549394432[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:47:25.741 INFO  com.aspect.LogAspect                              :56   [32m127693260549394432[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:47:25.741 INFO  com.aspect.LogAspect                              :57   [32m127693260549394432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:47:25.742 INFO  com.aspect.LogAspect                              :80   [32m127693260549394432[0;39m 请求参数: []
2021-12-19 16:47:25.742 INFO  com.aspect.LogAspect                              :54   [32m127693260553588736[0;39m ------------- 开始 -------------
2021-12-19 16:47:25.742 INFO  com.aspect.LogAspect                              :55   [32m127693260553588736[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:47:25.743 INFO  com.aspect.LogAspect                              :56   [32m127693260553588736[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:47:25.743 INFO  com.aspect.LogAspect                              :57   [32m127693260553588736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:47:25.745 INFO  com.aspect.LogAspect                              :54   [32m127693260566171648[0;39m ------------- 开始 -------------
2021-12-19 16:47:25.745 INFO  com.aspect.LogAspect                              :55   [32m127693260566171648[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:47:25.745 INFO  com.aspect.LogAspect                              :56   [32m127693260566171648[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:47:25.745 INFO  com.aspect.LogAspect                              :57   [32m127693260566171648[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:47:25.745 INFO  com.aspect.LogAspect                              :80   [32m127693260566171648[0;39m 请求参数: []
2021-12-19 16:47:25.746 INFO  com.aspect.LogAspect                              :80   [32m127693260553588736[0;39m 请求参数: []
2021-12-19 16:47:25.787 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693260549394432[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:47:25.788 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693260549394432[0;39m ==> Parameters: 
2021-12-19 16:47:25.789 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693260566171648[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:47:25.789 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693260566171648[0;39m ==> Parameters: 
2021-12-19 16:47:25.798 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693260553588736[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:47:25.798 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693260553588736[0;39m ==> Parameters: 
2021-12-19 16:47:25.834 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693260549394432[0;39m <==      Total: 0
2021-12-19 16:47:25.835 INFO  com.aspect.LogAspect                              :92   [32m127693260549394432[0;39m 返回结果: {"content":[],"success":true}
2021-12-19 16:47:25.836 INFO  com.aspect.LogAspect                              :93   [32m127693260549394432[0;39m ------------- 结束 耗时：95 ms -------------
2021-12-19 16:47:25.837 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:47:25.837 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:47:25.838 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:47:25.838 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:47:25.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:47:25.840 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:47:25.841 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:47:25.841 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:47:25.842 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:47:25.842 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:47:25.843 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:47:25.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:47:25.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:47:25.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:47:25.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:47:25.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:47:25.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:47:25.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:47:25.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:47:25.849 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693260566171648[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:47:25.850 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693260566171648[0;39m <==      Total: 19
2021-12-19 16:47:25.850 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127693260553588736[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:47:25.852 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127693260553588736[0;39m <==        Row: 2021-12-19, 497, 170, 497, 170
2021-12-19 16:47:25.853 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693260553588736[0;39m <==      Total: 1
2021-12-19 16:47:25.853 INFO  com.aspect.LogAspect                              :92   [32m127693260566171648[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:47:25.853 INFO  com.aspect.LogAspect                              :93   [32m127693260566171648[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 16:47:25.854 INFO  com.aspect.LogAspect                              :92   [32m127693260553588736[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":497,"viewIncrease":497,"voteCount":170,"voteIncrease":170}],"success":true}
2021-12-19 16:47:25.854 INFO  com.aspect.LogAspect                              :93   [32m127693260553588736[0;39m ------------- 结束 耗时：112 ms -------------
2021-12-19 16:47:30.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693278467461120[0;39m 生成今日电子书快照开始
2021-12-19 16:47:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693278467461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693278467461120[0;39m ==> Parameters: 
2021-12-19 16:47:30.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693278467461120[0;39m <==    Updates: 0
2021-12-19 16:47:30.145 INFO  com.job.EbookSnapshotJob                          :35   [32m127693278467461120[0;39m 生成今日电子书快照结束，耗时：132毫秒
2021-12-19 16:47:35.013 INFO  com.job.DocJob                                    :32   [32m127693299438981120[0;39m 更新电子书下的文档数据开始
2021-12-19 16:47:35.075 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693299438981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:47:35.075 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693299438981120[0;39m ==> Parameters: 
2021-12-19 16:47:35.186 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693299438981120[0;39m <==    Updates: 3
2021-12-19 16:47:35.187 INFO  com.job.DocJob                                    :35   [32m127693299438981120[0;39m 更新电子书下的文档数据结束，耗时：174毫秒
2021-12-19 16:47:35.188 INFO  com.job.EbookSnapshotJob                          :32   [32m127693300172984320[0;39m 生成今日电子书快照开始
2021-12-19 16:47:35.189 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693300172984320[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:35.191 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693300172984320[0;39m ==> Parameters: 
2021-12-19 16:47:35.676 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693300172984320[0;39m <==    Updates: 0
2021-12-19 16:47:35.676 INFO  com.job.EbookSnapshotJob                          :35   [32m127693300172984320[0;39m 生成今日电子书快照结束，耗时：488毫秒
2021-12-19 16:47:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693320410501120[0;39m 生成今日电子书快照开始
2021-12-19 16:47:40.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693320410501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693320410501120[0;39m ==> Parameters: 
2021-12-19 16:47:40.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693320410501120[0;39m <==    Updates: 0
2021-12-19 16:47:40.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127693320410501120[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-19 16:47:45.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127693341390409728[0;39m 生成今日电子书快照开始
2021-12-19 16:47:45.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693341390409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:45.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693341390409728[0;39m ==> Parameters: 
2021-12-19 16:47:45.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693341390409728[0;39m <==    Updates: 0
2021-12-19 16:47:45.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127693341390409728[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:47:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127693362336763904[0;39m 生成今日电子书快照开始
2021-12-19 16:47:50.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693362336763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:50.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693362336763904[0;39m ==> Parameters: 
2021-12-19 16:47:50.300 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693362336763904[0;39m <==    Updates: 0
2021-12-19 16:47:50.300 INFO  com.job.EbookSnapshotJob                          :35   [32m127693362336763904[0;39m 生成今日电子书快照结束，耗时：291毫秒
2021-12-19 16:47:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127693383295700992[0;39m 生成今日电子书快照开始
2021-12-19 16:47:55.131 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693383295700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:47:55.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693383295700992[0;39m ==> Parameters: 
2021-12-19 16:47:55.353 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693383295700992[0;39m <==    Updates: 0
2021-12-19 16:47:55.353 INFO  com.job.EbookSnapshotJob                          :35   [32m127693383295700992[0;39m 生成今日电子书快照结束，耗时：347毫秒
2021-12-19 16:48:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693404296581120[0;39m 生成今日电子书快照开始
2021-12-19 16:48:00.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693404296581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:00.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693404296581120[0;39m ==> Parameters: 
2021-12-19 16:48:00.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693404296581120[0;39m <==    Updates: 0
2021-12-19 16:48:00.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127693404296581120[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:48:05.006 INFO  com.job.DocJob                                    :32   [32m127693425238740992[0;39m 更新电子书下的文档数据开始
2021-12-19 16:48:05.046 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693425238740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:48:05.046 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693425238740992[0;39m ==> Parameters: 
2021-12-19 16:48:05.139 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693425238740992[0;39m <==    Updates: 3
2021-12-19 16:48:05.139 INFO  com.job.DocJob                                    :35   [32m127693425238740992[0;39m 更新电子书下的文档数据结束，耗时：133毫秒
2021-12-19 16:48:05.139 INFO  com.job.EbookSnapshotJob                          :32   [32m127693425796583424[0;39m 生成今日电子书快照开始
2021-12-19 16:48:05.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693425796583424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:05.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693425796583424[0;39m ==> Parameters: 
2021-12-19 16:48:05.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693425796583424[0;39m <==    Updates: 0
2021-12-19 16:48:05.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127693425796583424[0;39m 生成今日电子书快照结束，耗时：94毫秒
2021-12-19 16:48:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693446239621120[0;39m 生成今日电子书快照开始
2021-12-19 16:48:10.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693446239621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693446239621120[0;39m ==> Parameters: 
2021-12-19 16:48:10.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693446239621120[0;39m <==    Updates: 0
2021-12-19 16:48:10.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127693446239621120[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-19 16:48:15.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693467223724032[0;39m 生成今日电子书快照开始
2021-12-19 16:48:15.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693467223724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:15.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693467223724032[0;39m ==> Parameters: 
2021-12-19 16:48:15.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693467223724032[0;39m <==    Updates: 0
2021-12-19 16:48:15.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127693467223724032[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 16:48:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127693488157495296[0;39m 生成今日电子书快照开始
2021-12-19 16:48:20.038 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693488157495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:20.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693488157495296[0;39m ==> Parameters: 
2021-12-19 16:48:20.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693488157495296[0;39m <==    Updates: 0
2021-12-19 16:48:20.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127693488157495296[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:48:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693509154181120[0;39m 生成今日电子书快照开始
2021-12-19 16:48:25.044 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693509154181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:25.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693509154181120[0;39m ==> Parameters: 
2021-12-19 16:48:25.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693509154181120[0;39m <==    Updates: 0
2021-12-19 16:48:25.232 INFO  com.job.EbookSnapshotJob                          :35   [32m127693509154181120[0;39m 生成今日电子书快照结束，耗时：219毫秒
2021-12-19 16:48:30.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127693530163449856[0;39m 生成今日电子书快照开始
2021-12-19 16:48:30.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693530163449856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:30.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693530163449856[0;39m ==> Parameters: 
2021-12-19 16:48:30.198 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693530163449856[0;39m <==    Updates: 0
2021-12-19 16:48:30.198 INFO  com.job.EbookSnapshotJob                          :35   [32m127693530163449856[0;39m 生成今日电子书快照结束，耗时：176毫秒
2021-12-19 16:48:35.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693551109804032[0;39m 生成今日电子书快照开始
2021-12-19 16:48:35.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693551109804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:35.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693551109804032[0;39m ==> Parameters: 
2021-12-19 16:48:35.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693551109804032[0;39m <==    Updates: 0
2021-12-19 16:48:35.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127693551109804032[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:48:35.160 INFO  com.job.DocJob                                    :32   [32m127693551713783808[0;39m 更新电子书下的文档数据开始
2021-12-19 16:48:35.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693551713783808[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:48:35.160 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693551713783808[0;39m ==> Parameters: 
2021-12-19 16:48:35.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693551713783808[0;39m <==    Updates: 3
2021-12-19 16:48:35.254 INFO  com.job.DocJob                                    :35   [32m127693551713783808[0;39m 更新电子书下的文档数据结束，耗时：94毫秒
2021-12-19 16:48:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693572068741120[0;39m 生成今日电子书快照开始
2021-12-19 16:48:40.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693572068741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:40.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693572068741120[0;39m ==> Parameters: 
2021-12-19 16:48:40.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693572068741120[0;39m <==    Updates: 0
2021-12-19 16:48:40.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127693572068741120[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-19 16:48:45.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127693593078009856[0;39m 生成今日电子书快照开始
2021-12-19 16:48:45.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693593078009856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:45.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693593078009856[0;39m ==> Parameters: 
2021-12-19 16:48:45.338 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693593078009856[0;39m <==    Updates: 0
2021-12-19 16:48:45.338 INFO  com.job.EbookSnapshotJob                          :35   [32m127693593078009856[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-19 16:48:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127693614007586816[0;39m 生成今日电子书快照开始
2021-12-19 16:48:50.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693614007586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:50.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693614007586816[0;39m ==> Parameters: 
2021-12-19 16:48:50.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693614007586816[0;39m <==    Updates: 0
2021-12-19 16:48:50.138 INFO  com.job.EbookSnapshotJob                          :35   [32m127693614007586816[0;39m 生成今日电子书快照结束，耗时：126毫秒
2021-12-19 16:48:55.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127693635046215680[0;39m 生成今日电子书快照开始
2021-12-19 16:48:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693635046215680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:48:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693635046215680[0;39m ==> Parameters: 
2021-12-19 16:48:55.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693635046215680[0;39m <==    Updates: 0
2021-12-19 16:48:55.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127693635046215680[0;39m 生成今日电子书快照结束，耗时：126毫秒
2021-12-19 16:49:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693655967404032[0;39m 生成今日电子书快照开始
2021-12-19 16:49:00.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693655967404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:00.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693655967404032[0;39m ==> Parameters: 
2021-12-19 16:49:00.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693655967404032[0;39m <==    Updates: 0
2021-12-19 16:49:00.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127693655967404032[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 16:49:05.007 INFO  com.job.DocJob                                    :32   [32m127693676901175296[0;39m 更新电子书下的文档数据开始
2021-12-19 16:49:05.038 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693676901175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:49:05.038 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693676901175296[0;39m ==> Parameters: 
2021-12-19 16:49:05.132 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693676901175296[0;39m <==    Updates: 3
2021-12-19 16:49:05.132 INFO  com.job.DocJob                                    :35   [32m127693676901175296[0;39m 更新电子书下的文档数据结束，耗时：125毫秒
2021-12-19 16:49:05.132 INFO  com.job.EbookSnapshotJob                          :32   [32m127693677425463296[0;39m 生成今日电子书快照开始
2021-12-19 16:49:05.132 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693677425463296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:05.132 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693677425463296[0;39m ==> Parameters: 
2021-12-19 16:49:05.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693677425463296[0;39m <==    Updates: 0
2021-12-19 16:49:05.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127693677425463296[0;39m 生成今日电子书快照结束，耗时：97毫秒
2021-12-19 16:49:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693697897861120[0;39m 生成今日电子书快照开始
2021-12-19 16:49:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693697897861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693697897861120[0;39m ==> Parameters: 
2021-12-19 16:49:10.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693697897861120[0;39m <==    Updates: 0
2021-12-19 16:49:10.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127693697897861120[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 16:49:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127693718869381120[0;39m 生成今日电子书快照开始
2021-12-19 16:49:15.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693718869381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:15.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693718869381120[0;39m ==> Parameters: 
2021-12-19 16:49:15.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693718869381120[0;39m <==    Updates: 0
2021-12-19 16:49:15.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127693718869381120[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-19 16:49:20.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127693739887038464[0;39m 生成今日电子书快照开始
2021-12-19 16:49:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693739887038464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693739887038464[0;39m ==> Parameters: 
2021-12-19 16:49:20.345 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693739887038464[0;39m <==    Updates: 0
2021-12-19 16:49:20.345 INFO  com.job.EbookSnapshotJob                          :35   [32m127693739887038464[0;39m 生成今日电子书快照结束，耗时：321毫秒
2021-12-19 16:49:25.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127693760850169856[0;39m 生成今日电子书快照开始
2021-12-19 16:49:25.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693760850169856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:25.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693760850169856[0;39m ==> Parameters: 
2021-12-19 16:49:25.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693760850169856[0;39m <==    Updates: 0
2021-12-19 16:49:25.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127693760850169856[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 16:49:30.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693781796524032[0;39m 生成今日电子书快照开始
2021-12-19 16:49:30.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693781796524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:30.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693781796524032[0;39m ==> Parameters: 
2021-12-19 16:49:30.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693781796524032[0;39m <==    Updates: 0
2021-12-19 16:49:30.145 INFO  com.job.EbookSnapshotJob                          :35   [32m127693781796524032[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 16:49:35.017 INFO  com.job.DocJob                                    :32   [32m127693802772238336[0;39m 更新电子书下的文档数据开始
2021-12-19 16:49:35.048 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693802772238336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:49:35.063 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693802772238336[0;39m ==> Parameters: 
2021-12-19 16:49:35.269 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693802772238336[0;39m <==    Updates: 3
2021-12-19 16:49:35.269 INFO  com.job.DocJob                                    :35   [32m127693802772238336[0;39m 更新电子书下的文档数据结束，耗时：252毫秒
2021-12-19 16:49:35.269 INFO  com.job.EbookSnapshotJob                          :32   [32m127693803829202944[0;39m 生成今日电子书快照开始
2021-12-19 16:49:35.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693803829202944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:35.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693803829202944[0;39m ==> Parameters: 
2021-12-19 16:49:35.475 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693803829202944[0;39m <==    Updates: 0
2021-12-19 16:49:35.475 INFO  com.job.EbookSnapshotJob                          :35   [32m127693803829202944[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-19 16:49:40.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127693823747952640[0;39m 生成今日电子书快照开始
2021-12-19 16:49:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693823747952640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693823747952640[0;39m ==> Parameters: 
2021-12-19 16:49:40.298 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693823747952640[0;39m <==    Updates: 0
2021-12-19 16:49:40.298 INFO  com.job.EbookSnapshotJob                          :35   [32m127693823747952640[0;39m 生成今日电子书快照结束，耗时：280毫秒
2021-12-19 16:49:45.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127693844757221376[0;39m 生成今日电子书快照开始
2021-12-19 16:49:45.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693844757221376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:45.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693844757221376[0;39m ==> Parameters: 
2021-12-19 16:49:45.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693844757221376[0;39m <==    Updates: 0
2021-12-19 16:49:45.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127693844757221376[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-19 16:49:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693865682604032[0;39m 生成今日电子书快照开始
2021-12-19 16:49:50.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693865682604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:50.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693865682604032[0;39m ==> Parameters: 
2021-12-19 16:49:50.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693865682604032[0;39m <==    Updates: 0
2021-12-19 16:49:50.228 INFO  com.job.EbookSnapshotJob                          :35   [32m127693865682604032[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-19 16:49:54.177 INFO  com.aspect.LogAspect                              :54   [32m127693883135102976[0;39m ------------- 开始 -------------
2021-12-19 16:49:54.177 INFO  com.aspect.LogAspect                              :55   [32m127693883135102976[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-19 16:49:54.178 INFO  com.aspect.LogAspect                              :56   [32m127693883135102976[0;39m 类名方法: com.controller.EbookController.list
2021-12-19 16:49:54.178 INFO  com.aspect.LogAspect                              :57   [32m127693883135102976[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:49:54.182 INFO  com.aspect.LogAspect                              :80   [32m127693883135102976[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-19 16:49:54.311 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127693883135102976[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-19 16:49:54.312 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127693883135102976[0;39m ==> Parameters: 202(Long)
2021-12-19 16:49:54.357 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127693883135102976[0;39m <==    Columns: count(0)
2021-12-19 16:49:54.358 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127693883135102976[0;39m <==        Row: 1
2021-12-19 16:49:54.359 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127693883135102976[0;39m <==      Total: 1
2021-12-19 16:49:54.363 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127693883135102976[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-19 16:49:54.364 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127693883135102976[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-19 16:49:54.410 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127693883135102976[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-19 16:49:54.410 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127693883135102976[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 95, 18
2021-12-19 16:49:54.411 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127693883135102976[0;39m <==      Total: 1
2021-12-19 16:49:54.413 INFO  com.servicess.EbookService                        :48   [32m127693883135102976[0;39m 总行数：1
2021-12-19 16:49:54.414 INFO  com.servicess.EbookService                        :49   [32m127693883135102976[0;39m 总页数：1
2021-12-19 16:49:54.430 INFO  com.aspect.LogAspect                              :92   [32m127693883135102976[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":95,"voteCount":18}],"total":1},"success":true}
2021-12-19 16:49:54.430 INFO  com.aspect.LogAspect                              :93   [32m127693883135102976[0;39m ------------- 结束 耗时：253 ms -------------
2021-12-19 16:49:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127693886633152512[0;39m 生成今日电子书快照开始
2021-12-19 16:49:55.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693886633152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:49:55.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693886633152512[0;39m ==> Parameters: 
2021-12-19 16:49:55.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693886633152512[0;39m <==    Updates: 0
2021-12-19 16:49:55.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127693886633152512[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 16:49:55.156 INFO  com.aspect.LogAspect                              :54   [32m127693887241326592[0;39m ------------- 开始 -------------
2021-12-19 16:49:55.156 INFO  com.aspect.LogAspect                              :55   [32m127693887241326592[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-19 16:49:55.156 INFO  com.aspect.LogAspect                              :56   [32m127693887241326592[0;39m 类名方法: com.controller.DocController.all
2021-12-19 16:49:55.156 INFO  com.aspect.LogAspect                              :57   [32m127693887241326592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:49:55.157 INFO  com.aspect.LogAspect                              :80   [32m127693887241326592[0;39m 请求参数: [1]
2021-12-19 16:49:55.165 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127693887241326592[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-19 16:49:55.165 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127693887241326592[0;39m ==> Parameters: 1(Long)
2021-12-19 16:49:55.210 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 16:49:55.211 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-19 16:49:55.211 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 13, 4
2021-12-19 16:49:55.212 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 8, 2
2021-12-19 16:49:55.212 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 15, 3
2021-12-19 16:49:55.213 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 22, 5
2021-12-19 16:49:55.213 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-19 16:49:55.214 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127693887241326592[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 13, 1
2021-12-19 16:49:55.214 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127693887241326592[0;39m <==      Total: 7
2021-12-19 16:49:55.224 INFO  com.aspect.LogAspect                              :92   [32m127693887241326592[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":13,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":8,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":15,"voteCount":3},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":22,"voteCount":5},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":13,"voteCount":1}],"success":true}
2021-12-19 16:49:55.224 INFO  com.aspect.LogAspect                              :93   [32m127693887241326592[0;39m ------------- 结束 耗时：68 ms -------------
2021-12-19 16:49:55.279 INFO  com.aspect.LogAspect                              :54   [32m127693887757225984[0;39m ------------- 开始 -------------
2021-12-19 16:49:55.279 INFO  com.aspect.LogAspect                              :55   [32m127693887757225984[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-19 16:49:55.280 INFO  com.aspect.LogAspect                              :56   [32m127693887757225984[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 16:49:55.280 INFO  com.aspect.LogAspect                              :57   [32m127693887757225984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:49:55.280 INFO  com.aspect.LogAspect                              :80   [32m127693887757225984[0;39m 请求参数: [119304585604108288]
2021-12-19 16:49:55.281 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693887757225984[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 16:49:55.282 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693887757225984[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 16:49:55.324 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127693887757225984[0;39m <==    Columns: id, content
2021-12-19 16:49:55.325 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127693887757225984[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-19 16:49:55.325 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693887757225984[0;39m <==      Total: 1
2021-12-19 16:49:55.327 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693887757225984[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 16:49:55.328 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693887757225984[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 16:49:55.413 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693887757225984[0;39m <==    Updates: 1
2021-12-19 16:49:55.414 INFO  com.aspect.LogAspect                              :92   [32m127693887757225984[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-19 16:49:55.414 INFO  com.aspect.LogAspect                              :93   [32m127693887757225984[0;39m ------------- 结束 耗时：135 ms -------------
2021-12-19 16:50:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127693907625644032[0;39m 生成今日电子书快照开始
2021-12-19 16:50:00.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693907625644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:00.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693907625644032[0;39m ==> Parameters: 
2021-12-19 16:50:00.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693907625644032[0;39m <==    Updates: 0
2021-12-19 16:50:00.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127693907625644032[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 16:50:03.504 INFO  com.aspect.LogAspect                              :54   [32m127693922255376384[0;39m ------------- 开始 -------------
2021-12-19 16:50:03.505 INFO  com.aspect.LogAspect                              :55   [32m127693922255376384[0;39m 请求地址: http://localhost:8081/doc/vote/119304585604108288 GET
2021-12-19 16:50:03.505 INFO  com.aspect.LogAspect                              :56   [32m127693922255376384[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 16:50:03.505 INFO  com.aspect.LogAspect                              :57   [32m127693922255376384[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:03.505 INFO  com.aspect.LogAspect                              :80   [32m127693922255376384[0;39m 请求参数: [119304585604108288]
2021-12-19 16:50:04.056 INFO  com.Util.RedisUtil                                :31   [32m127693922255376384[0;39m key不存在，放入：DOC_VOTE_119304585604108288_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 16:50:04.124 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693922255376384[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 16:50:04.129 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693922255376384[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 16:50:04.229 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693922255376384[0;39m <==    Updates: 1
2021-12-19 16:50:04.232 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693922255376384[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 16:50:04.235 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693922255376384[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-19 16:50:04.297 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127693922255376384[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 16:50:04.299 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127693922255376384[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 23, 6
2021-12-19 16:50:04.301 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693922255376384[0;39m <==      Total: 1
2021-12-19 16:50:04.307 INFO  com.aspect.LogAspect                              :92   [32m127693922255376384[0;39m 返回结果: {"success":true}
2021-12-19 16:50:04.307 INFO  com.aspect.LogAspect                              :93   [32m127693922255376384[0;39m ------------- 结束 耗时：803 ms -------------
2021-12-19 16:50:04.340 INFO  com.websocket.WebSocketServer                     :71   [32m127693922255376384[0;39m 推送消息：zMGmu5rpuw，内容：【Ant Design of Vue】被点赞！
2021-12-19 16:50:05.010 INFO  com.job.DocJob                                    :32   [32m127693928571998208[0;39m 更新电子书下的文档数据开始
2021-12-19 16:50:05.056 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693928571998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:50:05.056 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693928571998208[0;39m ==> Parameters: 
2021-12-19 16:50:05.147 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127693928571998208[0;39m <==    Updates: 3
2021-12-19 16:50:05.148 INFO  com.job.DocJob                                    :35   [32m127693928571998208[0;39m 更新电子书下的文档数据结束，耗时：138毫秒
2021-12-19 16:50:05.149 INFO  com.job.EbookSnapshotJob                          :32   [32m127693929155006464[0;39m 生成今日电子书快照开始
2021-12-19 16:50:05.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693929155006464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:05.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693929155006464[0;39m ==> Parameters: 
2021-12-19 16:50:05.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693929155006464[0;39m <==    Updates: 0
2021-12-19 16:50:05.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127693929155006464[0;39m 生成今日电子书快照结束，耗时：101毫秒
2021-12-19 16:50:05.518 INFO  com.aspect.LogAspect                              :54   [32m127693930702704640[0;39m ------------- 开始 -------------
2021-12-19 16:50:05.518 INFO  com.aspect.LogAspect                              :55   [32m127693930702704640[0;39m 请求地址: http://localhost:8081/doc/find-content/2 GET
2021-12-19 16:50:05.518 INFO  com.aspect.LogAspect                              :56   [32m127693930702704640[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 16:50:05.518 INFO  com.aspect.LogAspect                              :57   [32m127693930702704640[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:05.518 INFO  com.aspect.LogAspect                              :80   [32m127693930702704640[0;39m 请求参数: [2]
2021-12-19 16:50:05.519 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693930702704640[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 16:50:05.519 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693930702704640[0;39m ==> Parameters: 2(Long)
2021-12-19 16:50:05.564 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127693930702704640[0;39m <==    Columns: id, content
2021-12-19 16:50:05.564 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127693930702704640[0;39m <==        Row: 2, <<BLOB>>
2021-12-19 16:50:05.565 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693930702704640[0;39m <==      Total: 1
2021-12-19 16:50:05.565 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693930702704640[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 16:50:05.566 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693930702704640[0;39m ==> Parameters: 2(Long)
2021-12-19 16:50:05.665 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693930702704640[0;39m <==    Updates: 1
2021-12-19 16:50:05.665 INFO  com.aspect.LogAspect                              :92   [32m127693930702704640[0;39m 返回结果: {"content":"<p>123456</p>","success":true}
2021-12-19 16:50:05.665 INFO  com.aspect.LogAspect                              :93   [32m127693930702704640[0;39m ------------- 结束 耗时：147 ms -------------
2021-12-19 16:50:06.732 INFO  com.aspect.LogAspect                              :54   [32m127693935794589696[0;39m ------------- 开始 -------------
2021-12-19 16:50:06.733 INFO  com.aspect.LogAspect                              :55   [32m127693935794589696[0;39m 请求地址: http://localhost:8081/doc/vote/2 GET
2021-12-19 16:50:06.733 INFO  com.aspect.LogAspect                              :56   [32m127693935794589696[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 16:50:06.733 INFO  com.aspect.LogAspect                              :57   [32m127693935794589696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:06.734 INFO  com.aspect.LogAspect                              :80   [32m127693935794589696[0;39m 请求参数: [2]
2021-12-19 16:50:06.754 INFO  com.Util.RedisUtil                                :31   [32m127693935794589696[0;39m key不存在，放入：DOC_VOTE_2_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 16:50:06.822 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693935794589696[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 16:50:06.822 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693935794589696[0;39m ==> Parameters: 2(Long)
2021-12-19 16:50:06.909 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693935794589696[0;39m <==    Updates: 1
2021-12-19 16:50:06.909 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693935794589696[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 16:50:06.910 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693935794589696[0;39m ==> Parameters: 2(Long)
2021-12-19 16:50:06.964 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127693935794589696[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 16:50:06.964 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127693935794589696[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-19 16:50:06.965 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693935794589696[0;39m <==      Total: 1
2021-12-19 16:50:06.965 INFO  com.aspect.LogAspect                              :92   [32m127693935794589696[0;39m 返回结果: {"success":true}
2021-12-19 16:50:06.965 INFO  com.aspect.LogAspect                              :93   [32m127693935794589696[0;39m ------------- 结束 耗时：233 ms -------------
2021-12-19 16:50:06.966 INFO  com.websocket.WebSocketServer                     :71   [32m127693935794589696[0;39m 推送消息：zMGmu5rpuw，内容：【文档1.1】被点赞！
2021-12-19 16:50:08.026 INFO  com.aspect.LogAspect                              :54   [32m127693941222019072[0;39m ------------- 开始 -------------
2021-12-19 16:50:08.027 INFO  com.aspect.LogAspect                              :55   [32m127693941222019072[0;39m 请求地址: http://localhost:8081/doc/find-content/118617791401168896 GET
2021-12-19 16:50:08.027 INFO  com.aspect.LogAspect                              :56   [32m127693941222019072[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 16:50:08.027 INFO  com.aspect.LogAspect                              :57   [32m127693941222019072[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:08.028 INFO  com.aspect.LogAspect                              :80   [32m127693941222019072[0;39m 请求参数: [118617791401168896]
2021-12-19 16:50:08.076 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693941222019072[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 16:50:08.077 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693941222019072[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-19 16:50:08.126 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693941222019072[0;39m <==      Total: 0
2021-12-19 16:50:08.129 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693941222019072[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 16:50:08.131 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693941222019072[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-19 16:50:08.222 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693941222019072[0;39m <==    Updates: 1
2021-12-19 16:50:08.223 INFO  com.aspect.LogAspect                              :92   [32m127693941222019072[0;39m 返回结果: {"content":"","success":true}
2021-12-19 16:50:08.224 INFO  com.aspect.LogAspect                              :93   [32m127693941222019072[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-19 16:50:08.696 INFO  com.aspect.LogAspect                              :54   [32m127693944032202752[0;39m ------------- 开始 -------------
2021-12-19 16:50:08.696 INFO  com.aspect.LogAspect                              :55   [32m127693944032202752[0;39m 请求地址: http://localhost:8081/doc/find-content/5 GET
2021-12-19 16:50:08.696 INFO  com.aspect.LogAspect                              :56   [32m127693944032202752[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 16:50:08.696 INFO  com.aspect.LogAspect                              :57   [32m127693944032202752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:08.697 INFO  com.aspect.LogAspect                              :80   [32m127693944032202752[0;39m 请求参数: [5]
2021-12-19 16:50:08.751 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693944032202752[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 16:50:08.751 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693944032202752[0;39m ==> Parameters: 5(Long)
2021-12-19 16:50:08.803 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693944032202752[0;39m <==      Total: 0
2021-12-19 16:50:08.804 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693944032202752[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 16:50:08.805 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693944032202752[0;39m ==> Parameters: 5(Long)
2021-12-19 16:50:08.897 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693944032202752[0;39m <==    Updates: 1
2021-12-19 16:50:08.898 INFO  com.aspect.LogAspect                              :92   [32m127693944032202752[0;39m 返回结果: {"content":"","success":true}
2021-12-19 16:50:08.898 INFO  com.aspect.LogAspect                              :93   [32m127693944032202752[0;39m ------------- 结束 耗时：202 ms -------------
2021-12-19 16:50:09.737 INFO  com.aspect.LogAspect                              :54   [32m127693948398473216[0;39m ------------- 开始 -------------
2021-12-19 16:50:09.737 INFO  com.aspect.LogAspect                              :55   [32m127693948398473216[0;39m 请求地址: http://localhost:8081/doc/vote/5 GET
2021-12-19 16:50:09.737 INFO  com.aspect.LogAspect                              :56   [32m127693948398473216[0;39m 类名方法: com.controller.DocController.vote
2021-12-19 16:50:09.738 INFO  com.aspect.LogAspect                              :57   [32m127693948398473216[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:09.738 INFO  com.aspect.LogAspect                              :80   [32m127693948398473216[0;39m 请求参数: [5]
2021-12-19 16:50:09.762 INFO  com.Util.RedisUtil                                :31   [32m127693948398473216[0;39m key不存在，放入：DOC_VOTE_5_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-19 16:50:09.831 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693948398473216[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-19 16:50:09.831 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693948398473216[0;39m ==> Parameters: 5(Long)
2021-12-19 16:50:09.922 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127693948398473216[0;39m <==    Updates: 1
2021-12-19 16:50:09.922 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693948398473216[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-19 16:50:09.922 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693948398473216[0;39m ==> Parameters: 5(Long)
2021-12-19 16:50:09.967 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127693948398473216[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-19 16:50:09.967 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127693948398473216[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 14, 2
2021-12-19 16:50:09.967 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127693948398473216[0;39m <==      Total: 1
2021-12-19 16:50:09.968 INFO  com.aspect.LogAspect                              :92   [32m127693948398473216[0;39m 返回结果: {"success":true}
2021-12-19 16:50:09.969 INFO  com.aspect.LogAspect                              :93   [32m127693948398473216[0;39m ------------- 结束 耗时：232 ms -------------
2021-12-19 16:50:09.969 INFO  com.websocket.WebSocketServer                     :71   [32m127693948398473216[0;39m 推送消息：zMGmu5rpuw，内容：【文档2.2】被点赞！
2021-12-19 16:50:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127693949551906816[0;39m 生成今日电子书快照开始
2021-12-19 16:50:10.013 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693949551906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:10.014 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693949551906816[0;39m ==> Parameters: 
2021-12-19 16:50:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693949551906816[0;39m <==    Updates: 0
2021-12-19 16:50:10.099 INFO  com.job.EbookSnapshotJob                          :35   [32m127693949551906816[0;39m 生成今日电子书快照结束，耗时：87毫秒
2021-12-19 16:50:11.706 INFO  com.aspect.LogAspect                              :54   [32m127693956657057792[0;39m ------------- 开始 -------------
2021-12-19 16:50:11.706 INFO  com.aspect.LogAspect                              :55   [32m127693956657057792[0;39m 请求地址: http://localhost:8081/doc/find-content/4 GET
2021-12-19 16:50:11.707 INFO  com.aspect.LogAspect                              :56   [32m127693956657057792[0;39m 类名方法: com.controller.DocController.findContent
2021-12-19 16:50:11.707 INFO  com.aspect.LogAspect                              :57   [32m127693956657057792[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:11.708 INFO  com.aspect.LogAspect                              :80   [32m127693956657057792[0;39m 请求参数: [4]
2021-12-19 16:50:11.750 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693956657057792[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-19 16:50:11.750 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693956657057792[0;39m ==> Parameters: 4(Long)
2021-12-19 16:50:11.796 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127693956657057792[0;39m <==      Total: 0
2021-12-19 16:50:11.797 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693956657057792[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-19 16:50:11.797 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693956657057792[0;39m ==> Parameters: 4(Long)
2021-12-19 16:50:11.884 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127693956657057792[0;39m <==    Updates: 1
2021-12-19 16:50:11.884 INFO  com.aspect.LogAspect                              :92   [32m127693956657057792[0;39m 返回结果: {"content":"","success":true}
2021-12-19 16:50:11.884 INFO  com.aspect.LogAspect                              :93   [32m127693956657057792[0;39m ------------- 结束 耗时：178 ms -------------
2021-12-19 16:50:14.410 INFO  com.aspect.LogAspect                              :54   [32m127693967998455808[0;39m ------------- 开始 -------------
2021-12-19 16:50:14.411 INFO  com.aspect.LogAspect                              :55   [32m127693967998455808[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:50:14.411 INFO  com.aspect.LogAspect                              :56   [32m127693967998455808[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:50:14.411 INFO  com.aspect.LogAspect                              :57   [32m127693967998455808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:14.411 INFO  com.aspect.LogAspect                              :80   [32m127693967998455808[0;39m 请求参数: []
2021-12-19 16:50:14.411 INFO  com.aspect.LogAspect                              :54   [32m127693968002650112[0;39m ------------- 开始 -------------
2021-12-19 16:50:14.411 INFO  com.aspect.LogAspect                              :55   [32m127693968002650112[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:50:14.412 INFO  com.aspect.LogAspect                              :56   [32m127693968002650112[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:50:14.412 INFO  com.aspect.LogAspect                              :57   [32m127693968002650112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:14.412 INFO  com.aspect.LogAspect                              :80   [32m127693968002650112[0;39m 请求参数: []
2021-12-19 16:50:14.416 INFO  com.aspect.LogAspect                              :54   [32m127693968023621632[0;39m ------------- 开始 -------------
2021-12-19 16:50:14.416 INFO  com.aspect.LogAspect                              :55   [32m127693968023621632[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:50:14.416 INFO  com.aspect.LogAspect                              :56   [32m127693968023621632[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:50:14.417 INFO  com.aspect.LogAspect                              :57   [32m127693968023621632[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:14.417 INFO  com.aspect.LogAspect                              :80   [32m127693968023621632[0;39m 请求参数: []
2021-12-19 16:50:14.470 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693968023621632[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:50:14.470 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693967998455808[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:50:14.471 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693968023621632[0;39m ==> Parameters: 
2021-12-19 16:50:14.471 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693968002650112[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:50:14.471 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693967998455808[0;39m ==> Parameters: 
2021-12-19 16:50:14.471 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693968002650112[0;39m ==> Parameters: 
2021-12-19 16:50:14.525 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127693967998455808[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:50:14.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:50:14.525 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693968002650112[0;39m <==      Total: 0
2021-12-19 16:50:14.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:50:14.525 INFO  com.aspect.LogAspect                              :92   [32m127693968002650112[0;39m 返回结果: {"content":[],"success":true}
2021-12-19 16:50:14.525 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127693967998455808[0;39m <==        Row: 2021-12-19, 498, 171, 498, 171
2021-12-19 16:50:14.525 INFO  com.aspect.LogAspect                              :93   [32m127693968002650112[0;39m ------------- 结束 耗时：114 ms -------------
2021-12-19 16:50:14.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:50:14.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:50:14.526 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693967998455808[0;39m <==      Total: 1
2021-12-19 16:50:14.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:50:14.526 INFO  com.aspect.LogAspect                              :92   [32m127693967998455808[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":498,"viewIncrease":498,"voteCount":171,"voteIncrease":171}],"success":true}
2021-12-19 16:50:14.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:50:14.526 INFO  com.aspect.LogAspect                              :93   [32m127693967998455808[0;39m ------------- 结束 耗时：116 ms -------------
2021-12-19 16:50:14.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:50:14.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:50:14.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:50:14.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:50:14.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:50:14.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:50:14.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:50:14.530 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:50:14.530 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:50:14.531 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:50:14.532 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:50:14.533 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:50:14.534 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:50:14.534 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693968023621632[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:50:14.535 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693968023621632[0;39m <==      Total: 19
2021-12-19 16:50:14.537 INFO  com.aspect.LogAspect                              :92   [32m127693968023621632[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:50:14.537 INFO  com.aspect.LogAspect                              :93   [32m127693968023621632[0;39m ------------- 结束 耗时：121 ms -------------
2021-12-19 16:50:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127693970481483776[0;39m 生成今日电子书快照开始
2021-12-19 16:50:15.002 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693970481483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:15.003 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693970481483776[0;39m ==> Parameters: 
2021-12-19 16:50:15.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693970481483776[0;39m <==    Updates: 0
2021-12-19 16:50:15.106 INFO  com.job.EbookSnapshotJob                          :35   [32m127693970481483776[0;39m 生成今日电子书快照结束，耗时：104毫秒
2021-12-19 16:50:15.659 INFO  com.websocket.WebSocketServer                     :41   [32m127693922255376384[0;39m 连接关闭，token：zMGmu5rpuw，session id：1！当前连接数：0
2021-12-19 16:50:17.286 INFO  com.websocket.WebSocketServer                     :32   [32m127693930702704640[0;39m 有新连接：token：wKNRkxBycA，session id：2，当前连接数：1
2021-12-19 16:50:17.680 INFO  com.aspect.LogAspect                              :54   [32m127693981713829888[0;39m ------------- 开始 -------------
2021-12-19 16:50:17.680 INFO  com.aspect.LogAspect                              :55   [32m127693981713829888[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:50:17.680 INFO  com.aspect.LogAspect                              :56   [32m127693981713829888[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:50:17.681 INFO  com.aspect.LogAspect                              :57   [32m127693981713829888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:17.681 INFO  com.aspect.LogAspect                              :80   [32m127693981713829888[0;39m 请求参数: []
2021-12-19 16:50:17.681 INFO  com.aspect.LogAspect                              :54   [32m127693981718024192[0;39m ------------- 开始 -------------
2021-12-19 16:50:17.682 INFO  com.aspect.LogAspect                              :55   [32m127693981718024192[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:50:17.682 INFO  com.aspect.LogAspect                              :56   [32m127693981718024192[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:50:17.682 INFO  com.aspect.LogAspect                              :57   [32m127693981718024192[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:17.683 INFO  com.aspect.LogAspect                              :80   [32m127693981718024192[0;39m 请求参数: []
2021-12-19 16:50:17.686 INFO  com.aspect.LogAspect                              :54   [32m127693981738995712[0;39m ------------- 开始 -------------
2021-12-19 16:50:17.686 INFO  com.aspect.LogAspect                              :55   [32m127693981738995712[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:50:17.686 INFO  com.aspect.LogAspect                              :56   [32m127693981738995712[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:50:17.686 INFO  com.aspect.LogAspect                              :57   [32m127693981738995712[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:50:17.687 INFO  com.aspect.LogAspect                              :80   [32m127693981738995712[0;39m 请求参数: []
2021-12-19 16:50:17.737 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693981718024192[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:50:17.737 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693981713829888[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:50:17.737 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693981738995712[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:50:17.738 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693981718024192[0;39m ==> Parameters: 
2021-12-19 16:50:17.738 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693981738995712[0;39m ==> Parameters: 
2021-12-19 16:50:17.738 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693981713829888[0;39m ==> Parameters: 
2021-12-19 16:50:17.779 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127693981713829888[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:50:17.779 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:50:17.779 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:50:17.780 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127693981713829888[0;39m <==        Row: 2021-12-19, 498, 171, 498, 171
2021-12-19 16:50:17.780 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:50:17.780 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127693981713829888[0;39m <==      Total: 1
2021-12-19 16:50:17.780 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:50:17.781 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:50:17.781 INFO  com.aspect.LogAspect                              :92   [32m127693981713829888[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":498,"viewIncrease":498,"voteCount":171,"voteIncrease":171}],"success":true}
2021-12-19 16:50:17.781 INFO  com.aspect.LogAspect                              :93   [32m127693981713829888[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-19 16:50:17.781 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:50:17.781 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:50:17.782 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:50:17.784 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:50:17.784 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:50:17.786 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:50:17.787 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:50:17.788 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:50:17.789 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:50:17.790 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:50:17.790 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:50:17.791 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:50:17.791 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:50:17.792 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:50:17.792 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127693981738995712[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:50:17.793 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127693981738995712[0;39m <==      Total: 19
2021-12-19 16:50:17.795 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127693981718024192[0;39m <==      Total: 0
2021-12-19 16:50:17.797 INFO  com.aspect.LogAspect                              :92   [32m127693981718024192[0;39m 返回结果: {"content":[],"success":true}
2021-12-19 16:50:17.797 INFO  com.aspect.LogAspect                              :93   [32m127693981718024192[0;39m ------------- 结束 耗时：116 ms -------------
2021-12-19 16:50:17.798 INFO  com.aspect.LogAspect                              :92   [32m127693981738995712[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:50:17.799 INFO  com.aspect.LogAspect                              :93   [32m127693981738995712[0;39m ------------- 结束 耗时：113 ms -------------
2021-12-19 16:50:20.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127693991461392384[0;39m 生成今日电子书快照开始
2021-12-19 16:50:20.035 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693991461392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693991461392384[0;39m ==> Parameters: 
2021-12-19 16:50:20.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127693991461392384[0;39m <==    Updates: 0
2021-12-19 16:50:20.135 INFO  com.job.EbookSnapshotJob                          :35   [32m127693991461392384[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-19 16:50:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694012470661120[0;39m 生成今日电子书快照开始
2021-12-19 16:50:25.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694012470661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:25.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694012470661120[0;39m ==> Parameters: 
2021-12-19 16:50:25.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694012470661120[0;39m <==    Updates: 0
2021-12-19 16:50:25.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127694012470661120[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:50:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127694033446375424[0;39m 生成今日电子书快照开始
2021-12-19 16:50:30.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694033446375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:30.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694033446375424[0;39m ==> Parameters: 
2021-12-19 16:50:30.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694033446375424[0;39m <==    Updates: 0
2021-12-19 16:50:30.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127694033446375424[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 16:50:35.002 INFO  com.job.DocJob                                    :32   [32m127694054367563776[0;39m 更新电子书下的文档数据开始
2021-12-19 16:50:35.034 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694054367563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:50:35.034 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694054367563776[0;39m ==> Parameters: 
2021-12-19 16:50:35.145 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694054367563776[0;39m <==    Updates: 3
2021-12-19 16:50:35.145 INFO  com.job.DocJob                                    :35   [32m127694054367563776[0;39m 更新电子书下的文档数据结束，耗时：143毫秒
2021-12-19 16:50:35.145 INFO  com.job.EbookSnapshotJob                          :32   [32m127694054967349248[0;39m 生成今日电子书快照开始
2021-12-19 16:50:35.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694054967349248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:35.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694054967349248[0;39m ==> Parameters: 
2021-12-19 16:50:35.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694054967349248[0;39m <==    Updates: 0
2021-12-19 16:50:35.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127694054967349248[0;39m 生成今日电子书快照结束，耗时：99毫秒
2021-12-19 16:50:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127694075397804032[0;39m 生成今日电子书快照开始
2021-12-19 16:50:40.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694075397804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:40.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694075397804032[0;39m ==> Parameters: 
2021-12-19 16:50:40.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694075397804032[0;39m <==    Updates: 0
2021-12-19 16:50:40.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127694075397804032[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 16:50:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127694096369324032[0;39m 生成今日电子书快照开始
2021-12-19 16:50:45.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694096369324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:45.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694096369324032[0;39m ==> Parameters: 
2021-12-19 16:50:45.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694096369324032[0;39m <==    Updates: 0
2021-12-19 16:50:45.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127694096369324032[0;39m 生成今日电子书快照结束，耗时：266毫秒
2021-12-19 16:50:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127694117340844032[0;39m 生成今日电子书快照开始
2021-12-19 16:50:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694117340844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:50.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694117340844032[0;39m ==> Parameters: 
2021-12-19 16:50:50.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694117340844032[0;39m <==    Updates: 0
2021-12-19 16:50:50.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127694117340844032[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:50:55.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127694138274615296[0;39m 生成今日电子书快照开始
2021-12-19 16:50:55.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694138274615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:50:55.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694138274615296[0;39m ==> Parameters: 
2021-12-19 16:50:55.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694138274615296[0;39m <==    Updates: 0
2021-12-19 16:50:55.139 INFO  com.job.EbookSnapshotJob                          :35   [32m127694138274615296[0;39m 生成今日电子书快照结束，耗时：132毫秒
2021-12-19 16:51:00.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127694159241940992[0;39m 生成今日电子书快照开始
2021-12-19 16:51:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694159241940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:00.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694159241940992[0;39m ==> Parameters: 
2021-12-19 16:51:00.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694159241940992[0;39m <==    Updates: 0
2021-12-19 16:51:00.173 INFO  com.job.EbookSnapshotJob                          :35   [32m127694159241940992[0;39m 生成今日电子书快照结束，耗时：167毫秒
2021-12-19 16:51:05.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127694180213460992[0;39m 生成今日电子书快照开始
2021-12-19 16:51:05.038 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694180213460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:05.038 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694180213460992[0;39m ==> Parameters: 
2021-12-19 16:51:05.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694180213460992[0;39m <==    Updates: 0
2021-12-19 16:51:05.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127694180213460992[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:51:05.147 INFO  com.job.DocJob                                    :32   [32m127694180804857856[0;39m 更新电子书下的文档数据开始
2021-12-19 16:51:05.147 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694180804857856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:51:05.147 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694180804857856[0;39m ==> Parameters: 
2021-12-19 16:51:05.245 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694180804857856[0;39m <==    Updates: 3
2021-12-19 16:51:05.245 INFO  com.job.DocJob                                    :35   [32m127694180804857856[0;39m 更新电子书下的文档数据结束，耗时：98毫秒
2021-12-19 16:51:10.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127694201189175296[0;39m 生成今日电子书快照开始
2021-12-19 16:51:10.038 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694201189175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:10.038 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694201189175296[0;39m ==> Parameters: 
2021-12-19 16:51:10.131 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694201189175296[0;39m <==    Updates: 0
2021-12-19 16:51:10.131 INFO  com.job.EbookSnapshotJob                          :35   [32m127694201189175296[0;39m 生成今日电子书快照结束，耗时：124毫秒
2021-12-19 16:51:15.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127694222248775680[0;39m 生成今日电子书快照开始
2021-12-19 16:51:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694222248775680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694222248775680[0;39m ==> Parameters: 
2021-12-19 16:51:15.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694222248775680[0;39m <==    Updates: 0
2021-12-19 16:51:15.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127694222248775680[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 16:51:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127694243169964032[0;39m 生成今日电子书快照开始
2021-12-19 16:51:20.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694243169964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:20.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694243169964032[0;39m ==> Parameters: 
2021-12-19 16:51:20.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694243169964032[0;39m <==    Updates: 0
2021-12-19 16:51:20.145 INFO  com.job.EbookSnapshotJob                          :35   [32m127694243169964032[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 16:51:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694264128901120[0;39m 生成今日电子书快照开始
2021-12-19 16:51:25.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694264128901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:25.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694264128901120[0;39m ==> Parameters: 
2021-12-19 16:51:25.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694264128901120[0;39m <==    Updates: 0
2021-12-19 16:51:25.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127694264128901120[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 16:51:30.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127694285113004032[0;39m 生成今日电子书快照开始
2021-12-19 16:51:30.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694285113004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:30.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694285113004032[0;39m ==> Parameters: 
2021-12-19 16:51:30.300 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694285113004032[0;39m <==    Updates: 0
2021-12-19 16:51:30.300 INFO  com.job.EbookSnapshotJob                          :35   [32m127694285113004032[0;39m 生成今日电子书快照结束，耗时：284毫秒
2021-12-19 16:51:35.012 INFO  com.job.DocJob                                    :32   [32m127694306067746816[0;39m 更新电子书下的文档数据开始
2021-12-19 16:51:35.091 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694306067746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:51:35.091 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694306067746816[0;39m ==> Parameters: 
2021-12-19 16:51:35.231 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694306067746816[0;39m <==    Updates: 3
2021-12-19 16:51:35.231 INFO  com.job.DocJob                                    :35   [32m127694306067746816[0;39m 更新电子书下的文档数据结束，耗时：219毫秒
2021-12-19 16:51:35.231 INFO  com.job.EbookSnapshotJob                          :32   [32m127694306986299392[0;39m 生成今日电子书快照开始
2021-12-19 16:51:35.231 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694306986299392[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:35.231 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694306986299392[0;39m ==> Parameters: 
2021-12-19 16:51:35.314 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694306986299392[0;39m <==    Updates: 0
2021-12-19 16:51:35.314 INFO  com.job.EbookSnapshotJob                          :35   [32m127694306986299392[0;39m 生成今日电子书快照结束，耗时：83毫秒
2021-12-19 16:51:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127694327039266816[0;39m 生成今日电子书快照开始
2021-12-19 16:51:40.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694327039266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:40.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694327039266816[0;39m ==> Parameters: 
2021-12-19 16:51:40.469 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694327039266816[0;39m <==    Updates: 0
2021-12-19 16:51:40.469 INFO  com.job.EbookSnapshotJob                          :35   [32m127694327039266816[0;39m 生成今日电子书快照结束，耗时：457毫秒
2021-12-19 16:51:45.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127694347985620992[0;39m 生成今日电子书快照开始
2021-12-19 16:51:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694347985620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694347985620992[0;39m ==> Parameters: 
2021-12-19 16:51:45.167 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694347985620992[0;39m <==    Updates: 0
2021-12-19 16:51:45.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127694347985620992[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-19 16:51:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694368986501120[0;39m 生成今日电子书快照开始
2021-12-19 16:51:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694368986501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694368986501120[0;39m ==> Parameters: 
2021-12-19 16:51:50.169 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694368986501120[0;39m <==    Updates: 0
2021-12-19 16:51:50.169 INFO  com.job.EbookSnapshotJob                          :35   [32m127694368986501120[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 16:51:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694389958021120[0;39m 生成今日电子书快照开始
2021-12-19 16:51:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694389958021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:51:55.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694389958021120[0;39m ==> Parameters: 
2021-12-19 16:51:55.169 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694389958021120[0;39m <==    Updates: 0
2021-12-19 16:51:55.169 INFO  com.job.EbookSnapshotJob                          :35   [32m127694389958021120[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 16:52:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694410929541120[0;39m 生成今日电子书快照开始
2021-12-19 16:52:00.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694410929541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:00.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694410929541120[0;39m ==> Parameters: 
2021-12-19 16:52:00.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694410929541120[0;39m <==    Updates: 0
2021-12-19 16:52:00.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127694410929541120[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 16:52:05.007 INFO  com.job.DocJob                                    :32   [32m127694431875895296[0;39m 更新电子书下的文档数据开始
2021-12-19 16:52:05.038 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694431875895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:52:05.038 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694431875895296[0;39m ==> Parameters: 
2021-12-19 16:52:05.131 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694431875895296[0;39m <==    Updates: 3
2021-12-19 16:52:05.131 INFO  com.job.DocJob                                    :35   [32m127694431875895296[0;39m 更新电子书下的文档数据结束，耗时：124毫秒
2021-12-19 16:52:05.131 INFO  com.job.EbookSnapshotJob                          :32   [32m127694432395988992[0;39m 生成今日电子书快照开始
2021-12-19 16:52:05.131 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694432395988992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:05.131 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694432395988992[0;39m ==> Parameters: 
2021-12-19 16:52:05.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694432395988992[0;39m <==    Updates: 0
2021-12-19 16:52:05.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127694432395988992[0;39m 生成今日电子书快照结束，耗时：98毫秒
2021-12-19 16:52:10.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127694452914524160[0;39m 生成今日电子书快照开始
2021-12-19 16:52:10.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694452914524160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:10.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694452914524160[0;39m ==> Parameters: 
2021-12-19 16:52:10.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694452914524160[0;39m <==    Updates: 0
2021-12-19 16:52:10.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127694452914524160[0;39m 生成今日电子书快照结束，耗时：124毫秒
2021-12-19 16:52:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694473844101120[0;39m 生成今日电子书快照开始
2021-12-19 16:52:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694473844101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694473844101120[0;39m ==> Parameters: 
2021-12-19 16:52:15.169 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694473844101120[0;39m <==    Updates: 0
2021-12-19 16:52:15.169 INFO  com.job.EbookSnapshotJob                          :35   [32m127694473844101120[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 16:52:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127694494790455296[0;39m 生成今日电子书快照开始
2021-12-19 16:52:20.119 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694494790455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:20.119 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694494790455296[0;39m ==> Parameters: 
2021-12-19 16:52:20.306 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694494790455296[0;39m <==    Updates: 0
2021-12-19 16:52:20.306 INFO  com.job.EbookSnapshotJob                          :35   [32m127694494790455296[0;39m 生成今日电子书快照结束，耗时：299毫秒
2021-12-19 16:52:25.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127694515854249984[0;39m 生成今日电子书快照开始
2021-12-19 16:52:25.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694515854249984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:25.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694515854249984[0;39m ==> Parameters: 
2021-12-19 16:52:25.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694515854249984[0;39m <==    Updates: 0
2021-12-19 16:52:25.276 INFO  com.job.EbookSnapshotJob                          :35   [32m127694515854249984[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-19 16:52:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127694536762855424[0;39m 生成今日电子书快照开始
2021-12-19 16:52:30.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694536762855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:30.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694536762855424[0;39m ==> Parameters: 
2021-12-19 16:52:30.316 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694536762855424[0;39m <==    Updates: 0
2021-12-19 16:52:30.316 INFO  com.job.EbookSnapshotJob                          :35   [32m127694536762855424[0;39m 生成今日电子书快照结束，耗时：302毫秒
2021-12-19 16:52:35.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694557730181120[0;39m 生成今日电子书快照开始
2021-12-19 16:52:35.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694557730181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:35.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694557730181120[0;39m ==> Parameters: 
2021-12-19 16:52:35.329 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694557730181120[0;39m <==    Updates: 0
2021-12-19 16:52:35.329 INFO  com.job.EbookSnapshotJob                          :35   [32m127694557730181120[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-19 16:52:35.329 INFO  com.job.DocJob                                    :32   [32m127694559055581184[0;39m 更新电子书下的文档数据开始
2021-12-19 16:52:35.329 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694559055581184[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:52:35.329 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694559055581184[0;39m ==> Parameters: 
2021-12-19 16:52:35.532 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127694559055581184[0;39m <==    Updates: 3
2021-12-19 16:52:35.532 INFO  com.job.DocJob                                    :35   [32m127694559055581184[0;39m 更新电子书下的文档数据结束，耗时：203毫秒
2021-12-19 16:52:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127694578701701120[0;39m 生成今日电子书快照开始
2021-12-19 16:52:40.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694578701701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:40.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694578701701120[0;39m ==> Parameters: 
2021-12-19 16:52:40.297 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694578701701120[0;39m <==    Updates: 0
2021-12-19 16:52:40.297 INFO  com.job.EbookSnapshotJob                          :35   [32m127694578701701120[0;39m 生成今日电子书快照结束，耗时：284毫秒
2021-12-19 16:52:45.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127694599643860992[0;39m 生成今日电子书快照开始
2021-12-19 16:52:45.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694599643860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:45.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694599643860992[0;39m ==> Parameters: 
2021-12-19 16:52:45.198 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694599643860992[0;39m <==    Updates: 0
2021-12-19 16:52:45.198 INFO  com.job.EbookSnapshotJob                          :35   [32m127694599643860992[0;39m 生成今日电子书快照结束，耗时：192毫秒
2021-12-19 16:52:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127694620657324032[0;39m 生成今日电子书快照开始
2021-12-19 16:52:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694620657324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:52:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694620657324032[0;39m ==> Parameters: 
2021-12-19 16:52:50.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127694620657324032[0;39m <==    Updates: 0
2021-12-19 16:52:50.228 INFO  com.job.EbookSnapshotJob                          :35   [32m127694620657324032[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-19 16:54:24.937 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 16:54:24.952 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 14612 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 16:54:24.952 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 16:54:24.993 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 16:54:24.993 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 16:54:26.104 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 16:54:26.104 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 16:54:26.546 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 424 ms. Found 0 Redis repository interfaces.
2021-12-19 16:54:27.109 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 16:54:27.109 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 16:54:27.109 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 16:54:27.109 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 16:54:27.171 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 16:54:27.171 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2178 ms
2021-12-19 16:54:28.541 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 16:54:28.557 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 16:54:28.588 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 16:54:28.588 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 3.991 seconds (JVM running for 6.075)
2021-12-19 16:54:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127695040066752512[0;39m 生成今日电子书快照开始
2021-12-19 16:54:30.011 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127695040066752512[0;39m HikariPool-1 - Starting...
2021-12-19 16:54:30.773 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127695040066752512[0;39m HikariPool-1 - Start completed.
2021-12-19 16:54:30.773 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695040066752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:54:30.789 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695040066752512[0;39m ==> Parameters: 
2021-12-19 16:54:30.883 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695040066752512[0;39m <==    Updates: 6
2021-12-19 16:54:30.883 INFO  com.job.EbookSnapshotJob                          :35   [32m127695040066752512[0;39m 生成今日电子书快照结束，耗时：872毫秒
2021-12-19 16:54:35.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127695061046661120[0;39m 生成今日电子书快照开始
2021-12-19 16:54:35.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695061046661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:54:35.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695061046661120[0;39m ==> Parameters: 
2021-12-19 16:54:35.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695061046661120[0;39m <==    Updates: 0
2021-12-19 16:54:35.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127695061046661120[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 16:54:35.142 INFO  com.job.DocJob                                    :32   [32m127695061587726336[0;39m 更新电子书下的文档数据开始
2021-12-19 16:54:35.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695061587726336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:54:35.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695061587726336[0;39m ==> Parameters: 
2021-12-19 16:54:35.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695061587726336[0;39m <==    Updates: 3
2021-12-19 16:54:35.251 INFO  com.job.DocJob                                    :35   [32m127695061587726336[0;39m 更新电子书下的文档数据结束，耗时：109毫秒
2021-12-19 16:54:40.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127695082047541248[0;39m 生成今日电子书快照开始
2021-12-19 16:54:40.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695082047541248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:54:40.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695082047541248[0;39m ==> Parameters: 
2021-12-19 16:54:40.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695082047541248[0;39m <==    Updates: 0
2021-12-19 16:54:40.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127695082047541248[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 16:54:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127695102993895424[0;39m 生成今日电子书快照开始
2021-12-19 16:54:45.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695102993895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:54:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695102993895424[0;39m ==> Parameters: 
2021-12-19 16:54:45.132 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695102993895424[0;39m <==    Updates: 0
2021-12-19 16:54:45.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127695102993895424[0;39m 生成今日电子书快照结束，耗时：133毫秒
2021-12-19 16:54:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127695123952832512[0;39m 生成今日电子书快照开始
2021-12-19 16:54:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695123952832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:54:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695123952832512[0;39m ==> Parameters: 
2021-12-19 16:54:50.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695123952832512[0;39m <==    Updates: 0
2021-12-19 16:54:50.136 INFO  com.job.EbookSnapshotJob                          :35   [32m127695123952832512[0;39m 生成今日电子书快照结束，耗时：125毫秒
2021-12-19 16:54:55.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127695144991461376[0;39m 生成今日电子书快照开始
2021-12-19 16:54:55.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695144991461376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:54:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695144991461376[0;39m ==> Parameters: 
2021-12-19 16:54:55.148 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695144991461376[0;39m <==    Updates: 0
2021-12-19 16:54:55.148 INFO  com.job.EbookSnapshotJob                          :35   [32m127695144991461376[0;39m 生成今日电子书快照结束，耗时：121毫秒
2021-12-19 16:55:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127695165908455424[0;39m 生成今日电子书快照开始
2021-12-19 16:55:00.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695165908455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:00.045 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695165908455424[0;39m ==> Parameters: 
2021-12-19 16:55:00.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695165908455424[0;39m <==    Updates: 0
2021-12-19 16:55:00.143 INFO  com.job.EbookSnapshotJob                          :35   [32m127695165908455424[0;39m 生成今日电子书快照结束，耗时：129毫秒
2021-12-19 16:55:05.011 INFO  com.job.DocJob                                    :32   [32m127695186867392512[0;39m 更新电子书下的文档数据开始
2021-12-19 16:55:05.056 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695186867392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:55:05.058 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695186867392512[0;39m ==> Parameters: 
2021-12-19 16:55:05.175 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695186867392512[0;39m <==    Updates: 3
2021-12-19 16:55:05.175 INFO  com.job.DocJob                                    :35   [32m127695186867392512[0;39m 更新电子书下的文档数据结束，耗时：164毫秒
2021-12-19 16:55:05.176 INFO  com.job.EbookSnapshotJob                          :32   [32m127695187559452672[0;39m 生成今日电子书快照开始
2021-12-19 16:55:05.176 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695187559452672[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:05.177 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695187559452672[0;39m ==> Parameters: 
2021-12-19 16:55:05.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695187559452672[0;39m <==    Updates: 0
2021-12-19 16:55:05.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127695187559452672[0;39m 生成今日电子书快照结束，耗时：98毫秒
2021-12-19 16:55:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127695207817940992[0;39m 生成今日电子书快照开始
2021-12-19 16:55:10.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695207817940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:10.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695207817940992[0;39m ==> Parameters: 
2021-12-19 16:55:10.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695207817940992[0;39m <==    Updates: 0
2021-12-19 16:55:10.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127695207817940992[0;39m 生成今日电子书快照结束，耗时：158毫秒
2021-12-19 16:55:14.444 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 16:55:14.444 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 16:55:14.446 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-12-19 16:55:14.484 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：2L7jMAeRA9，session id：0，当前连接数：1
2021-12-19 16:55:14.653 INFO  com.aspect.LogAspect                              :54   [32m127695227304677378[0;39m ------------- 开始 -------------
2021-12-19 16:55:14.653 INFO  com.aspect.LogAspect                              :54   [32m127695227304677377[0;39m ------------- 开始 -------------
2021-12-19 16:55:14.653 INFO  com.aspect.LogAspect                              :54   [32m127695227304677376[0;39m ------------- 开始 -------------
2021-12-19 16:55:14.654 INFO  com.aspect.LogAspect                              :55   [32m127695227304677377[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 16:55:14.654 INFO  com.aspect.LogAspect                              :55   [32m127695227304677378[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 16:55:14.654 INFO  com.aspect.LogAspect                              :55   [32m127695227304677376[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 16:55:14.655 INFO  com.aspect.LogAspect                              :56   [32m127695227304677376[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 16:55:14.655 INFO  com.aspect.LogAspect                              :56   [32m127695227304677377[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 16:55:14.655 INFO  com.aspect.LogAspect                              :56   [32m127695227304677378[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 16:55:14.655 INFO  com.aspect.LogAspect                              :57   [32m127695227304677378[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:55:14.655 INFO  com.aspect.LogAspect                              :57   [32m127695227304677377[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:55:14.655 INFO  com.aspect.LogAspect                              :57   [32m127695227304677376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 16:55:14.694 INFO  com.aspect.LogAspect                              :80   [32m127695227304677377[0;39m 请求参数: []
2021-12-19 16:55:14.694 INFO  com.aspect.LogAspect                              :80   [32m127695227304677378[0;39m 请求参数: []
2021-12-19 16:55:14.694 INFO  com.aspect.LogAspect                              :80   [32m127695227304677376[0;39m 请求参数: []
2021-12-19 16:55:14.742 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127695227304677377[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:55:14.743 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127695227304677377[0;39m ==> Parameters: 
2021-12-19 16:55:14.772 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127695227304677376[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 16:55:14.772 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127695227304677378[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 16:55:14.774 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127695227304677378[0;39m ==> Parameters: 
2021-12-19 16:55:14.773 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127695227304677376[0;39m ==> Parameters: 
2021-12-19 16:55:14.862 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127695227304677378[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 16:55:14.862 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127695227304677377[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 16:55:14.862 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==    Columns: id, parent, name, sort
2021-12-19 16:55:14.863 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 16:55:14.864 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127695227304677377[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 16:55:14.864 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127695227304677378[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 16:55:14.865 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 16:55:14.866 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 16:55:14.867 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 16:55:14.868 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127695227304677378[0;39m <==      Total: 1
2021-12-19 16:55:14.868 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127695227304677377[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 16:55:14.868 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 16:55:14.869 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127695227304677377[0;39m <==      Total: 2
2021-12-19 16:55:14.869 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 16:55:14.870 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 16:55:14.871 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 16:55:14.873 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 16:55:14.874 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 16:55:14.877 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 16:55:14.878 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 16:55:14.879 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 16:55:14.879 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 16:55:14.880 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 16:55:14.880 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 16:55:14.882 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 16:55:14.882 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 16:55:14.883 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127695227304677376[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 16:55:14.883 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127695227304677376[0;39m <==      Total: 19
2021-12-19 16:55:14.898 INFO  com.aspect.LogAspect                              :92   [32m127695227304677378[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 16:55:14.898 INFO  com.aspect.LogAspect                              :92   [32m127695227304677376[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 16:55:14.898 INFO  com.aspect.LogAspect                              :92   [32m127695227304677377[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 16:55:14.898 INFO  com.aspect.LogAspect                              :93   [32m127695227304677378[0;39m ------------- 结束 耗时：246 ms -------------
2021-12-19 16:55:14.898 INFO  com.aspect.LogAspect                              :93   [32m127695227304677376[0;39m ------------- 结束 耗时：246 ms -------------
2021-12-19 16:55:14.898 INFO  com.aspect.LogAspect                              :93   [32m127695227304677377[0;39m ------------- 结束 耗时：246 ms -------------
2021-12-19 16:55:15.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127695228785266688[0;39m 生成今日电子书快照开始
2021-12-19 16:55:15.006 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695228785266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:15.006 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695228785266688[0;39m ==> Parameters: 
2021-12-19 16:55:15.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695228785266688[0;39m <==    Updates: 0
2021-12-19 16:55:15.110 INFO  com.job.EbookSnapshotJob                          :35   [32m127695228785266688[0;39m 生成今日电子书快照结束，耗时：105毫秒
2021-12-19 16:55:20.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127695249752592384[0;39m 生成今日电子书快照开始
2021-12-19 16:55:20.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695249752592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:20.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695249752592384[0;39m ==> Parameters: 
2021-12-19 16:55:20.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695249752592384[0;39m <==    Updates: 0
2021-12-19 16:55:20.173 INFO  com.job.EbookSnapshotJob                          :35   [32m127695249752592384[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-19 16:55:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127695270766055424[0;39m 生成今日电子书快照开始
2021-12-19 16:55:25.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695270766055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:25.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695270766055424[0;39m ==> Parameters: 
2021-12-19 16:55:25.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695270766055424[0;39m <==    Updates: 0
2021-12-19 16:55:25.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127695270766055424[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 16:55:26.686 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：2L7jMAeRA9，session id：0！当前连接数：0
2021-12-19 16:55:30.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127695291762741248[0;39m 生成今日电子书快照开始
2021-12-19 16:55:30.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695291762741248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:30.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695291762741248[0;39m ==> Parameters: 
2021-12-19 16:55:30.436 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695291762741248[0;39m <==    Updates: 0
2021-12-19 16:55:30.436 INFO  com.job.EbookSnapshotJob                          :35   [32m127695291762741248[0;39m 生成今日电子书快照结束，耗时：416毫秒
2021-12-19 16:55:35.010 INFO  com.job.DocJob                                    :32   [32m127695312692318208[0;39m 更新电子书下的文档数据开始
2021-12-19 16:55:35.042 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695312692318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 16:55:35.042 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695312692318208[0;39m ==> Parameters: 
2021-12-19 16:55:35.135 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127695312692318208[0;39m <==    Updates: 3
2021-12-19 16:55:35.151 INFO  com.job.DocJob                                    :35   [32m127695312692318208[0;39m 更新电子书下的文档数据结束，耗时：141毫秒
2021-12-19 16:55:35.151 INFO  com.job.EbookSnapshotJob                          :32   [32m127695313283715072[0;39m 生成今日电子书快照开始
2021-12-19 16:55:35.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695313283715072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:35.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695313283715072[0;39m ==> Parameters: 
2021-12-19 16:55:35.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695313283715072[0;39m <==    Updates: 0
2021-12-19 16:55:35.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127695313283715072[0;39m 生成今日电子书快照结束，耗时：94毫秒
2021-12-19 16:55:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127695333680615424[0;39m 生成今日电子书快照开始
2021-12-19 16:55:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695333680615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:40.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695333680615424[0;39m ==> Parameters: 
2021-12-19 16:55:40.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695333680615424[0;39m <==    Updates: 0
2021-12-19 16:55:40.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127695333680615424[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 16:55:45.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127695354677301248[0;39m 生成今日电子书快照开始
2021-12-19 16:55:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695354677301248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695354677301248[0;39m ==> Parameters: 
2021-12-19 16:55:45.179 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695354677301248[0;39m <==    Updates: 0
2021-12-19 16:55:45.179 INFO  com.job.EbookSnapshotJob                          :35   [32m127695354677301248[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 16:55:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127695375611072512[0;39m 生成今日电子书快照开始
2021-12-19 16:55:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695375611072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 16:55:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695375611072512[0;39m ==> Parameters: 
2021-12-19 16:55:50.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127695375611072512[0;39m <==    Updates: 0
2021-12-19 16:55:50.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127695375611072512[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 21:20:13.720 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 21:20:13.724 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 2328 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 21:20:13.725 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 21:20:13.788 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 21:20:13.789 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 21:20:14.986 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 21:20:14.988 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 21:20:15.461 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 462 ms. Found 0 Redis repository interfaces.
2021-12-19 21:20:16.189 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 21:20:16.197 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 21:20:16.198 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 21:20:16.199 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 21:20:16.278 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 21:20:16.279 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2489 ms
2021-12-19 21:20:18.199 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 21:20:18.249 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 21:20:18.279 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 21:20:18.322 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.309 seconds (JVM running for 6.489)
2021-12-19 21:20:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127761939211358208[0;39m 生成今日电子书快照开始
2021-12-19 21:20:20.074 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127761939211358208[0;39m HikariPool-1 - Starting...
2021-12-19 21:20:20.881 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127761939211358208[0;39m HikariPool-1 - Start completed.
2021-12-19 21:20:20.887 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761939211358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:20.906 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761939211358208[0;39m ==> Parameters: 
2021-12-19 21:20:20.998 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761939211358208[0;39m <==    Updates: 0
2021-12-19 21:20:21.000 INFO  com.job.EbookSnapshotJob                          :35   [32m127761939211358208[0;39m 生成今日电子书快照结束，耗时：988毫秒
2021-12-19 21:20:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127761960203849728[0;39m 生成今日电子书快照开始
2021-12-19 21:20:25.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761960203849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:25.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761960203849728[0;39m ==> Parameters: 
2021-12-19 21:20:25.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761960203849728[0;39m <==    Updates: 0
2021-12-19 21:20:25.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127761960203849728[0;39m 生成今日电子书快照结束，耗时：219毫秒
2021-12-19 21:20:30.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127761981125038080[0;39m 生成今日电子书快照开始
2021-12-19 21:20:30.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761981125038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:30.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761981125038080[0;39m ==> Parameters: 
2021-12-19 21:20:30.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127761981125038080[0;39m <==    Updates: 0
2021-12-19 21:20:30.148 INFO  com.job.EbookSnapshotJob                          :35   [32m127761981125038080[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 21:20:35.005 INFO  com.job.DocJob                                    :32   [32m127762002104946688[0;39m 更新电子书下的文档数据开始
2021-12-19 21:20:35.062 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762002104946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:20:35.063 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762002104946688[0;39m ==> Parameters: 
2021-12-19 21:20:35.172 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762002104946688[0;39m <==    Updates: 3
2021-12-19 21:20:35.173 INFO  com.job.DocJob                                    :35   [32m127762002104946688[0;39m 更新电子书下的文档数据结束，耗时：167毫秒
2021-12-19 21:20:35.175 INFO  com.job.EbookSnapshotJob                          :32   [32m127762002817978368[0;39m 生成今日电子书快照开始
2021-12-19 21:20:35.176 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762002817978368[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:35.179 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762002817978368[0;39m ==> Parameters: 
2021-12-19 21:20:35.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762002817978368[0;39m <==    Updates: 0
2021-12-19 21:20:35.277 INFO  com.job.EbookSnapshotJob                          :35   [32m127762002817978368[0;39m 生成今日电子书快照结束，耗时：101毫秒
2021-12-19 21:20:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127762023122604032[0;39m 生成今日电子书快照开始
2021-12-19 21:20:40.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762023122604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:40.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762023122604032[0;39m ==> Parameters: 
2021-12-19 21:20:40.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762023122604032[0;39m <==    Updates: 0
2021-12-19 21:20:40.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127762023122604032[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 21:20:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127762044081541120[0;39m 生成今日电子书快照开始
2021-12-19 21:20:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762044081541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:45.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762044081541120[0;39m ==> Parameters: 
2021-12-19 21:20:45.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762044081541120[0;39m <==    Updates: 0
2021-12-19 21:20:45.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127762044081541120[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 21:20:50.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127762065015312384[0;39m 生成今日电子书快照开始
2021-12-19 21:20:50.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762065015312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:50.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762065015312384[0;39m ==> Parameters: 
2021-12-19 21:20:50.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762065015312384[0;39m <==    Updates: 0
2021-12-19 21:20:50.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127762065015312384[0;39m 生成今日电子书快照结束，耗时：167毫秒
2021-12-19 21:20:55.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127762085978443776[0;39m 生成今日电子书快照开始
2021-12-19 21:20:55.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762085978443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:20:55.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762085978443776[0;39m ==> Parameters: 
2021-12-19 21:20:55.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762085978443776[0;39m <==    Updates: 0
2021-12-19 21:20:55.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127762085978443776[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 21:21:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127762106991906816[0;39m 生成今日电子书快照开始
2021-12-19 21:21:00.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762106991906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:00.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762106991906816[0;39m ==> Parameters: 
2021-12-19 21:21:00.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762106991906816[0;39m <==    Updates: 0
2021-12-19 21:21:00.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127762106991906816[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 21:21:05.001 INFO  com.job.DocJob                                    :32   [32m127762127917289472[0;39m 更新电子书下的文档数据开始
2021-12-19 21:21:05.046 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762127917289472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:21:05.047 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762127917289472[0;39m ==> Parameters: 
2021-12-19 21:21:05.136 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762127917289472[0;39m <==    Updates: 3
2021-12-19 21:21:05.137 INFO  com.job.DocJob                                    :35   [32m127762127917289472[0;39m 更新电子书下的文档数据结束，耗时：135毫秒
2021-12-19 21:21:05.138 INFO  com.job.EbookSnapshotJob                          :32   [32m127762128491909120[0;39m 生成今日电子书快照开始
2021-12-19 21:21:05.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762128491909120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:05.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762128491909120[0;39m ==> Parameters: 
2021-12-19 21:21:05.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762128491909120[0;39m <==    Updates: 0
2021-12-19 21:21:05.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127762128491909120[0;39m 生成今日电子书快照结束，耗时：118毫秒
2021-12-19 21:21:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127762148943335424[0;39m 生成今日电子书快照开始
2021-12-19 21:21:10.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762148943335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:10.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762148943335424[0;39m ==> Parameters: 
2021-12-19 21:21:10.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762148943335424[0;39m <==    Updates: 0
2021-12-19 21:21:10.160 INFO  com.job.EbookSnapshotJob                          :35   [32m127762148943335424[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 21:21:15.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127762169893883904[0;39m 生成今日电子书快照开始
2021-12-19 21:21:15.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762169893883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:15.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762169893883904[0;39m ==> Parameters: 
2021-12-19 21:21:15.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762169893883904[0;39m <==    Updates: 0
2021-12-19 21:21:15.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127762169893883904[0;39m 生成今日电子书快照结束，耗时：137毫秒
2021-12-19 21:21:20.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127762190836043776[0;39m 生成今日电子书快照开始
2021-12-19 21:21:20.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762190836043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:20.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762190836043776[0;39m ==> Parameters: 
2021-12-19 21:21:20.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762190836043776[0;39m <==    Updates: 0
2021-12-19 21:21:20.144 INFO  com.job.EbookSnapshotJob                          :35   [32m127762190836043776[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 21:21:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127762211811758080[0;39m 生成今日电子书快照开始
2021-12-19 21:21:25.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762211811758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:25.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762211811758080[0;39m ==> Parameters: 
2021-12-19 21:21:25.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762211811758080[0;39m <==    Updates: 0
2021-12-19 21:21:25.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127762211811758080[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-19 21:21:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127762232816832512[0;39m 生成今日电子书快照开始
2021-12-19 21:21:30.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762232816832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762232816832512[0;39m ==> Parameters: 
2021-12-19 21:21:30.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762232816832512[0;39m <==    Updates: 0
2021-12-19 21:21:30.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127762232816832512[0;39m 生成今日电子书快照结束，耗时：152毫秒
2021-12-19 21:21:35.010 INFO  com.job.DocJob                                    :32   [32m127762253784158208[0;39m 更新电子书下的文档数据开始
2021-12-19 21:21:35.055 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762253784158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:21:35.057 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762253784158208[0;39m ==> Parameters: 
2021-12-19 21:21:35.146 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762253784158208[0;39m <==    Updates: 3
2021-12-19 21:21:35.148 INFO  com.job.DocJob                                    :35   [32m127762253784158208[0;39m 更新电子书下的文档数据结束，耗时：136毫秒
2021-12-19 21:21:35.150 INFO  com.job.EbookSnapshotJob                          :32   [32m127762254371360768[0;39m 生成今日电子书快照开始
2021-12-19 21:21:35.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762254371360768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:35.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762254371360768[0;39m ==> Parameters: 
2021-12-19 21:21:35.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762254371360768[0;39m <==    Updates: 0
2021-12-19 21:21:35.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127762254371360768[0;39m 生成今日电子书快照结束，耗时：104毫秒
2021-12-19 21:21:40.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127762274738900992[0;39m 生成今日电子书快照开始
2021-12-19 21:21:40.190 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762274738900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:40.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762274738900992[0;39m ==> Parameters: 
2021-12-19 21:21:40.293 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762274738900992[0;39m <==    Updates: 0
2021-12-19 21:21:40.294 INFO  com.job.EbookSnapshotJob                          :35   [32m127762274738900992[0;39m 生成今日电子书快照结束，耗时：287毫秒
2021-12-19 21:21:45.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127762295685255168[0;39m 生成今日电子书快照开始
2021-12-19 21:21:45.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762295685255168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:45.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762295685255168[0;39m ==> Parameters: 
2021-12-19 21:21:45.309 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762295685255168[0;39m <==    Updates: 0
2021-12-19 21:21:45.309 INFO  com.job.EbookSnapshotJob                          :35   [32m127762295685255168[0;39m 生成今日电子书快照结束，耗时：308毫秒
2021-12-19 21:21:50.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127762316690329600[0;39m 生成今日电子书快照开始
2021-12-19 21:21:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762316690329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:50.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762316690329600[0;39m ==> Parameters: 
2021-12-19 21:21:50.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762316690329600[0;39m <==    Updates: 0
2021-12-19 21:21:50.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127762316690329600[0;39m 生成今日电子书快照结束，耗时：158毫秒
2021-12-19 21:21:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127762337691209728[0;39m 生成今日电子书快照开始
2021-12-19 21:21:55.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762337691209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:21:55.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762337691209728[0;39m ==> Parameters: 
2021-12-19 21:21:55.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762337691209728[0;39m <==    Updates: 0
2021-12-19 21:21:55.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127762337691209728[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 21:22:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127762358637563904[0;39m 生成今日电子书快照开始
2021-12-19 21:22:00.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762358637563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:00.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762358637563904[0;39m ==> Parameters: 
2021-12-19 21:22:00.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762358637563904[0;39m <==    Updates: 0
2021-12-19 21:22:00.148 INFO  com.job.EbookSnapshotJob                          :35   [32m127762358637563904[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-19 21:22:05.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127762379634249728[0;39m 生成今日电子书快照开始
2021-12-19 21:22:05.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762379634249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:05.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762379634249728[0;39m ==> Parameters: 
2021-12-19 21:22:05.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762379634249728[0;39m <==    Updates: 0
2021-12-19 21:22:05.165 INFO  com.job.EbookSnapshotJob                          :35   [32m127762379634249728[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 21:22:05.166 INFO  com.job.DocJob                                    :32   [32m127762380267589632[0;39m 更新电子书下的文档数据开始
2021-12-19 21:22:05.167 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762380267589632[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:22:05.168 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762380267589632[0;39m ==> Parameters: 
2021-12-19 21:22:05.261 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762380267589632[0;39m <==    Updates: 3
2021-12-19 21:22:05.262 INFO  com.job.DocJob                                    :35   [32m127762380267589632[0;39m 更新电子书下的文档数据结束，耗时：95毫秒
2021-12-19 21:22:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127762400568020992[0;39m 生成今日电子书快照开始
2021-12-19 21:22:10.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762400568020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:10.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762400568020992[0;39m ==> Parameters: 
2021-12-19 21:22:10.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762400568020992[0;39m <==    Updates: 0
2021-12-19 21:22:10.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127762400568020992[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 21:22:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127762421573095424[0;39m 生成今日电子书快照开始
2021-12-19 21:22:15.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762421573095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762421573095424[0;39m ==> Parameters: 
2021-12-19 21:22:15.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762421573095424[0;39m <==    Updates: 0
2021-12-19 21:22:15.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127762421573095424[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 21:22:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127762442527838208[0;39m 生成今日电子书快照开始
2021-12-19 21:22:20.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762442527838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:20.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762442527838208[0;39m ==> Parameters: 
2021-12-19 21:22:20.165 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762442527838208[0;39m <==    Updates: 0
2021-12-19 21:22:20.166 INFO  com.job.EbookSnapshotJob                          :35   [32m127762442527838208[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 21:22:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127762463490969600[0;39m 生成今日电子书快照开始
2021-12-19 21:22:25.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762463490969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:25.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762463490969600[0;39m ==> Parameters: 
2021-12-19 21:22:25.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762463490969600[0;39m <==    Updates: 0
2021-12-19 21:22:25.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127762463490969600[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 21:22:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127762484475072512[0;39m 生成今日电子书快照开始
2021-12-19 21:22:30.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762484475072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:30.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762484475072512[0;39m ==> Parameters: 
2021-12-19 21:22:30.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762484475072512[0;39m <==    Updates: 0
2021-12-19 21:22:30.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127762484475072512[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 21:22:35.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127762505421426688[0;39m 生成今日电子书快照开始
2021-12-19 21:22:35.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762505421426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:35.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762505421426688[0;39m ==> Parameters: 
2021-12-19 21:22:35.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762505421426688[0;39m <==    Updates: 0
2021-12-19 21:22:35.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127762505421426688[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 21:22:35.151 INFO  com.job.DocJob                                    :32   [32m127762506033795072[0;39m 更新电子书下的文档数据开始
2021-12-19 21:22:35.152 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762506033795072[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:22:35.153 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762506033795072[0;39m ==> Parameters: 
2021-12-19 21:22:35.244 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762506033795072[0;39m <==    Updates: 3
2021-12-19 21:22:35.245 INFO  com.job.DocJob                                    :35   [32m127762506033795072[0;39m 更新电子书下的文档数据结束，耗时：93毫秒
2021-12-19 21:22:40.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127762526376169472[0;39m 生成今日电子书快照开始
2021-12-19 21:22:40.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762526376169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762526376169472[0;39m ==> Parameters: 
2021-12-19 21:22:40.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762526376169472[0;39m <==    Updates: 0
2021-12-19 21:22:40.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127762526376169472[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 21:22:45.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127762547347689472[0;39m 生成今日电子书快照开始
2021-12-19 21:22:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762547347689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:45.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762547347689472[0;39m ==> Parameters: 
2021-12-19 21:22:45.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762547347689472[0;39m <==    Updates: 0
2021-12-19 21:22:45.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127762547347689472[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-19 21:22:50.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127762568319209472[0;39m 生成今日电子书快照开始
2021-12-19 21:22:50.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762568319209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:50.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762568319209472[0;39m ==> Parameters: 
2021-12-19 21:22:50.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762568319209472[0;39m <==    Updates: 0
2021-12-19 21:22:50.139 INFO  com.job.EbookSnapshotJob                          :35   [32m127762568319209472[0;39m 生成今日电子书快照结束，耗时：137毫秒
2021-12-19 21:22:55.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127762589303312384[0;39m 生成今日电子书快照开始
2021-12-19 21:22:55.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762589303312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:22:55.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762589303312384[0;39m ==> Parameters: 
2021-12-19 21:22:55.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762589303312384[0;39m <==    Updates: 0
2021-12-19 21:22:55.154 INFO  com.job.EbookSnapshotJob                          :35   [32m127762589303312384[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 21:23:00.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127762610270638080[0;39m 生成今日电子书快照开始
2021-12-19 21:23:00.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762610270638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:00.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762610270638080[0;39m ==> Parameters: 
2021-12-19 21:23:00.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762610270638080[0;39m <==    Updates: 0
2021-12-19 21:23:00.145 INFO  com.job.EbookSnapshotJob                          :35   [32m127762610270638080[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-19 21:23:05.011 INFO  com.job.DocJob                                    :32   [32m127762631275712512[0;39m 更新电子书下的文档数据开始
2021-12-19 21:23:05.064 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762631275712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:23:05.066 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762631275712512[0;39m ==> Parameters: 
2021-12-19 21:23:05.159 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762631275712512[0;39m <==    Updates: 3
2021-12-19 21:23:05.161 INFO  com.job.DocJob                                    :35   [32m127762631275712512[0;39m 更新电子书下的文档数据结束，耗时：148毫秒
2021-12-19 21:23:05.163 INFO  com.job.EbookSnapshotJob                          :32   [32m127762631904858112[0;39m 生成今日电子书快照开始
2021-12-19 21:23:05.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762631904858112[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:05.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762631904858112[0;39m ==> Parameters: 
2021-12-19 21:23:05.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762631904858112[0;39m <==    Updates: 0
2021-12-19 21:23:05.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127762631904858112[0;39m 生成今日电子书快照结束，耗时：100毫秒
2021-12-19 21:23:10.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127762652209483776[0;39m 生成今日电子书快照开始
2021-12-19 21:23:10.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762652209483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:10.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762652209483776[0;39m ==> Parameters: 
2021-12-19 21:23:10.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762652209483776[0;39m <==    Updates: 0
2021-12-19 21:23:10.150 INFO  com.job.EbookSnapshotJob                          :35   [32m127762652209483776[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 21:23:14.431 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 21:23:14.431 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 21:23:14.433 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 21:23:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127762673231335424[0;39m 生成今日电子书快照开始
2021-12-19 21:23:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762673231335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:15.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762673231335424[0;39m ==> Parameters: 
2021-12-19 21:23:15.132 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：3qn56suZRu，session id：0，当前连接数：1
2021-12-19 21:23:15.159 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762673231335424[0;39m <==    Updates: 0
2021-12-19 21:23:15.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127762673231335424[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 21:23:15.162 INFO  com.aspect.LogAspect                              :54   [32m127762673847898114[0;39m ------------- 开始 -------------
2021-12-19 21:23:15.162 INFO  com.aspect.LogAspect                              :54   [32m127762673847898112[0;39m ------------- 开始 -------------
2021-12-19 21:23:15.162 INFO  com.aspect.LogAspect                              :54   [32m127762673847898113[0;39m ------------- 开始 -------------
2021-12-19 21:23:15.164 INFO  com.aspect.LogAspect                              :55   [32m127762673847898114[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 21:23:15.164 INFO  com.aspect.LogAspect                              :55   [32m127762673847898113[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 21:23:15.164 INFO  com.aspect.LogAspect                              :55   [32m127762673847898112[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 21:23:15.164 INFO  com.aspect.LogAspect                              :56   [32m127762673847898114[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 21:23:15.164 INFO  com.aspect.LogAspect                              :56   [32m127762673847898113[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 21:23:15.164 INFO  com.aspect.LogAspect                              :56   [32m127762673847898112[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 21:23:15.165 INFO  com.aspect.LogAspect                              :57   [32m127762673847898112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:15.165 INFO  com.aspect.LogAspect                              :57   [32m127762673847898113[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:15.165 INFO  com.aspect.LogAspect                              :57   [32m127762673847898114[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:15.202 INFO  com.aspect.LogAspect                              :80   [32m127762673847898112[0;39m 请求参数: []
2021-12-19 21:23:15.202 INFO  com.aspect.LogAspect                              :80   [32m127762673847898113[0;39m 请求参数: []
2021-12-19 21:23:15.202 INFO  com.aspect.LogAspect                              :80   [32m127762673847898114[0;39m 请求参数: []
2021-12-19 21:23:15.207 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762673847898114[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:15.208 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762673847898114[0;39m ==> Parameters: 
2021-12-19 21:23:15.253 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762673847898113[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:15.254 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762673847898113[0;39m ==> Parameters: 
2021-12-19 21:23:15.284 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762673847898114[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 21:23:15.285 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762673847898114[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 21:23:15.304 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762673847898113[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 21:23:15.305 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762673847898113[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 21:23:15.308 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762673847898112[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 21:23:15.308 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762673847898112[0;39m ==> Parameters: 
2021-12-19 21:23:15.327 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762673847898113[0;39m <==      Total: 1
2021-12-19 21:23:15.328 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762673847898114[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 21:23:15.328 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762673847898114[0;39m <==      Total: 2
2021-12-19 21:23:15.348 INFO  com.aspect.LogAspect                              :92   [32m127762673847898113[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 21:23:15.349 INFO  com.aspect.LogAspect                              :93   [32m127762673847898113[0;39m ------------- 结束 耗时：188 ms -------------
2021-12-19 21:23:15.349 INFO  com.aspect.LogAspect                              :92   [32m127762673847898114[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 21:23:15.349 INFO  com.aspect.LogAspect                              :93   [32m127762673847898114[0;39m ------------- 结束 耗时：188 ms -------------
2021-12-19 21:23:15.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==    Columns: id, parent, name, sort
2021-12-19 21:23:15.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 21:23:15.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 21:23:15.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 21:23:15.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 21:23:15.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 21:23:15.364 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 21:23:15.364 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 21:23:15.365 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 21:23:15.365 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 21:23:15.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 21:23:15.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 21:23:15.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 21:23:15.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 21:23:15.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 21:23:15.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 21:23:15.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 21:23:15.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 21:23:15.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 21:23:15.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762673847898112[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 21:23:15.369 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762673847898112[0;39m <==      Total: 19
2021-12-19 21:23:15.398 INFO  com.aspect.LogAspect                              :92   [32m127762673847898112[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 21:23:15.398 INFO  com.aspect.LogAspect                              :93   [32m127762673847898112[0;39m ------------- 结束 耗时：237 ms -------------
2021-12-19 21:23:20.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127762694156718080[0;39m 生成今日电子书快照开始
2021-12-19 21:23:20.050 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762694156718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:20.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762694156718080[0;39m ==> Parameters: 
2021-12-19 21:23:20.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762694156718080[0;39m <==    Updates: 0
2021-12-19 21:23:20.141 INFO  com.job.EbookSnapshotJob                          :35   [32m127762694156718080[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :54   [32m127762704340488193[0;39m ------------- 开始 -------------
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :54   [32m127762704340488192[0;39m ------------- 开始 -------------
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :55   [32m127762704340488193[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :55   [32m127762704340488192[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :56   [32m127762704340488193[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :56   [32m127762704340488192[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :57   [32m127762704340488193[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :57   [32m127762704340488192[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :80   [32m127762704340488192[0;39m 请求参数: []
2021-12-19 21:23:22.431 INFO  com.aspect.LogAspect                              :80   [32m127762704340488193[0;39m 请求参数: []
2021-12-19 21:23:22.433 INFO  com.aspect.LogAspect                              :54   [32m127762704348876800[0;39m ------------- 开始 -------------
2021-12-19 21:23:22.433 INFO  com.aspect.LogAspect                              :55   [32m127762704348876800[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 21:23:22.434 INFO  com.aspect.LogAspect                              :56   [32m127762704348876800[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 21:23:22.434 INFO  com.aspect.LogAspect                              :57   [32m127762704348876800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:22.434 INFO  com.aspect.LogAspect                              :80   [32m127762704348876800[0;39m 请求参数: []
2021-12-19 21:23:22.601 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762704340488193[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:22.601 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762704348876800[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 21:23:22.601 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762704340488192[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:22.601 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762704340488193[0;39m ==> Parameters: 
2021-12-19 21:23:22.601 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762704340488192[0;39m ==> Parameters: 
2021-12-19 21:23:22.601 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762704348876800[0;39m ==> Parameters: 
2021-12-19 21:23:22.646 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==    Columns: id, parent, name, sort
2021-12-19 21:23:22.646 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 21:23:22.647 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 21:23:22.647 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 21:23:22.648 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 21:23:22.648 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762704340488192[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 21:23:22.648 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 21:23:22.649 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762704340488192[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 21:23:22.649 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 21:23:22.649 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 21:23:22.649 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 21:23:22.650 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762704340488193[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 21:23:22.650 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 21:23:22.650 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762704340488193[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 21:23:22.650 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 21:23:22.651 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762704340488193[0;39m <==      Total: 1
2021-12-19 21:23:22.651 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 21:23:22.651 INFO  com.aspect.LogAspect                              :92   [32m127762704340488193[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 21:23:22.651 INFO  com.aspect.LogAspect                              :93   [32m127762704340488193[0;39m ------------- 结束 耗时：220 ms -------------
2021-12-19 21:23:22.651 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 21:23:22.652 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 21:23:22.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 21:23:22.651 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762704340488192[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 21:23:22.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 21:23:22.655 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762704340488192[0;39m <==      Total: 2
2021-12-19 21:23:22.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 21:23:22.656 INFO  com.aspect.LogAspect                              :92   [32m127762704340488192[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 21:23:22.656 INFO  com.aspect.LogAspect                              :93   [32m127762704340488192[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-19 21:23:22.657 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 21:23:22.657 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 21:23:22.658 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762704348876800[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 21:23:22.658 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762704348876800[0;39m <==      Total: 19
2021-12-19 21:23:22.660 INFO  com.aspect.LogAspect                              :92   [32m127762704348876800[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 21:23:22.661 INFO  com.aspect.LogAspect                              :93   [32m127762704348876800[0;39m ------------- 结束 耗时：228 ms -------------
2021-12-19 21:23:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127762715161792512[0;39m 生成今日电子书快照开始
2021-12-19 21:23:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762715161792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:25.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762715161792512[0;39m ==> Parameters: 
2021-12-19 21:23:25.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762715161792512[0;39m <==    Updates: 0
2021-12-19 21:23:25.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127762715161792512[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 21:23:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127762736112340992[0;39m 生成今日电子书快照开始
2021-12-19 21:23:30.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762736112340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:30.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762736112340992[0;39m ==> Parameters: 
2021-12-19 21:23:30.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762736112340992[0;39m <==    Updates: 0
2021-12-19 21:23:30.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127762736112340992[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-19 21:23:35.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127762757100638208[0;39m 生成今日电子书快照开始
2021-12-19 21:23:35.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762757100638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:35.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762757100638208[0;39m ==> Parameters: 
2021-12-19 21:23:35.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762757100638208[0;39m <==    Updates: 0
2021-12-19 21:23:35.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127762757100638208[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 21:23:35.154 INFO  com.job.DocJob                                    :32   [32m127762757704617984[0;39m 更新电子书下的文档数据开始
2021-12-19 21:23:35.154 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762757704617984[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:23:35.155 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762757704617984[0;39m ==> Parameters: 
2021-12-19 21:23:35.252 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762757704617984[0;39m <==    Updates: 3
2021-12-19 21:23:35.252 INFO  com.job.DocJob                                    :35   [32m127762757704617984[0;39m 更新电子书下的文档数据结束，耗时：98毫秒
2021-12-19 21:23:40.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127762778055380992[0;39m 生成今日电子书快照开始
2021-12-19 21:23:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762778055380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:40.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762778055380992[0;39m ==> Parameters: 
2021-12-19 21:23:40.108 INFO  com.aspect.LogAspect                              :54   [32m127762778483200001[0;39m ------------- 开始 -------------
2021-12-19 21:23:40.108 INFO  com.aspect.LogAspect                              :54   [32m127762778483200000[0;39m ------------- 开始 -------------
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :55   [32m127762778483200001[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :55   [32m127762778483200000[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :56   [32m127762778483200001[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :56   [32m127762778483200000[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :57   [32m127762778483200001[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :57   [32m127762778483200000[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :80   [32m127762778483200001[0;39m 请求参数: []
2021-12-19 21:23:40.109 INFO  com.aspect.LogAspect                              :80   [32m127762778483200000[0;39m 请求参数: []
2021-12-19 21:23:40.112 INFO  com.aspect.LogAspect                              :54   [32m127762778499977216[0;39m ------------- 开始 -------------
2021-12-19 21:23:40.112 INFO  com.aspect.LogAspect                              :55   [32m127762778499977216[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 21:23:40.112 INFO  com.aspect.LogAspect                              :56   [32m127762778499977216[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 21:23:40.112 INFO  com.aspect.LogAspect                              :57   [32m127762778499977216[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:40.113 INFO  com.aspect.LogAspect                              :80   [32m127762778499977216[0;39m 请求参数: []
2021-12-19 21:23:40.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762778055380992[0;39m <==    Updates: 0
2021-12-19 21:23:40.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127762778055380992[0;39m 生成今日电子书快照结束，耗时：145毫秒
2021-12-19 21:23:40.154 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762778499977216[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 21:23:40.154 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762778483200000[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:40.155 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762778499977216[0;39m ==> Parameters: 
2021-12-19 21:23:40.155 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762778483200001[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:40.155 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762778483200000[0;39m ==> Parameters: 
2021-12-19 21:23:40.156 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762778483200001[0;39m ==> Parameters: 
2021-12-19 21:23:40.201 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762778483200001[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 21:23:40.201 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762778483200000[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 21:23:40.201 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==    Columns: id, parent, name, sort
2021-12-19 21:23:40.202 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 21:23:40.202 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762778483200001[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 21:23:40.202 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762778483200000[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 21:23:40.202 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 21:23:40.202 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 21:23:40.203 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762778483200000[0;39m <==      Total: 1
2021-12-19 21:23:40.203 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762778483200001[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 21:23:40.203 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 21:23:40.203 INFO  com.aspect.LogAspect                              :92   [32m127762778483200000[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 21:23:40.203 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 21:23:40.203 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762778483200001[0;39m <==      Total: 2
2021-12-19 21:23:40.203 INFO  com.aspect.LogAspect                              :93   [32m127762778483200000[0;39m ------------- 结束 耗时：95 ms -------------
2021-12-19 21:23:40.203 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 21:23:40.204 INFO  com.aspect.LogAspect                              :92   [32m127762778483200001[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 21:23:40.204 INFO  com.aspect.LogAspect                              :93   [32m127762778483200001[0;39m ------------- 结束 耗时：96 ms -------------
2021-12-19 21:23:40.204 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 21:23:40.205 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 21:23:40.206 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 21:23:40.206 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 21:23:40.207 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 21:23:40.207 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 21:23:40.208 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 21:23:40.209 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 21:23:40.209 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 21:23:40.210 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 21:23:40.210 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 21:23:40.211 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 21:23:40.212 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762778499977216[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 21:23:40.212 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762778499977216[0;39m <==      Total: 19
2021-12-19 21:23:40.215 INFO  com.aspect.LogAspect                              :92   [32m127762778499977216[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 21:23:40.215 INFO  com.aspect.LogAspect                              :93   [32m127762778499977216[0;39m ------------- 结束 耗时：104 ms -------------
2021-12-19 21:23:45.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127762799031095296[0;39m 生成今日电子书快照开始
2021-12-19 21:23:45.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762799031095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:45.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762799031095296[0;39m ==> Parameters: 
2021-12-19 21:23:45.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762799031095296[0;39m <==    Updates: 0
2021-12-19 21:23:45.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127762799031095296[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 21:23:50.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127762820006809600[0;39m 生成今日电子书快照开始
2021-12-19 21:23:50.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762820006809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:50.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762820006809600[0;39m ==> Parameters: 
2021-12-19 21:23:50.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762820006809600[0;39m <==    Updates: 0
2021-12-19 21:23:50.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127762820006809600[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 21:23:55.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127762840953163776[0;39m 生成今日电子书快照开始
2021-12-19 21:23:55.049 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762840953163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:23:55.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762840953163776[0;39m ==> Parameters: 
2021-12-19 21:23:55.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762840953163776[0;39m <==    Updates: 0
2021-12-19 21:23:55.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127762840953163776[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 21:23:56.469 INFO  com.aspect.LogAspect                              :54   [32m127762847106207744[0;39m ------------- 开始 -------------
2021-12-19 21:23:56.469 INFO  com.aspect.LogAspect                              :55   [32m127762847106207744[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 21:23:56.470 INFO  com.aspect.LogAspect                              :56   [32m127762847106207744[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 21:23:56.470 INFO  com.aspect.LogAspect                              :57   [32m127762847106207744[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:56.470 INFO  com.aspect.LogAspect                              :80   [32m127762847106207744[0;39m 请求参数: []
2021-12-19 21:23:56.471 INFO  com.aspect.LogAspect                              :54   [32m127762847114596352[0;39m ------------- 开始 -------------
2021-12-19 21:23:56.472 INFO  com.aspect.LogAspect                              :55   [32m127762847114596352[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 21:23:56.472 INFO  com.aspect.LogAspect                              :56   [32m127762847114596352[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 21:23:56.472 INFO  com.aspect.LogAspect                              :57   [32m127762847114596352[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:56.472 INFO  com.aspect.LogAspect                              :80   [32m127762847114596352[0;39m 请求参数: []
2021-12-19 21:23:56.472 INFO  com.aspect.LogAspect                              :54   [32m127762847118790656[0;39m ------------- 开始 -------------
2021-12-19 21:23:56.473 INFO  com.aspect.LogAspect                              :55   [32m127762847118790656[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 21:23:56.473 INFO  com.aspect.LogAspect                              :56   [32m127762847118790656[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 21:23:56.473 INFO  com.aspect.LogAspect                              :57   [32m127762847118790656[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 21:23:56.474 INFO  com.aspect.LogAspect                              :80   [32m127762847118790656[0;39m 请求参数: []
2021-12-19 21:23:56.523 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762847106207744[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:56.523 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762847106207744[0;39m ==> Parameters: 
2021-12-19 21:23:56.525 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762847114596352[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 21:23:56.526 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762847114596352[0;39m ==> Parameters: 
2021-12-19 21:23:56.528 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762847118790656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 21:23:56.528 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762847118790656[0;39m ==> Parameters: 
2021-12-19 21:23:56.574 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762847106207744[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 21:23:56.575 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762847106207744[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 21:23:56.575 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127762847106207744[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 21:23:56.577 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127762847106207744[0;39m <==      Total: 2
2021-12-19 21:23:56.577 INFO  com.aspect.LogAspect                              :92   [32m127762847106207744[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 21:23:56.577 INFO  com.aspect.LogAspect                              :93   [32m127762847106207744[0;39m ------------- 结束 耗时：108 ms -------------
2021-12-19 21:23:56.585 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==    Columns: id, parent, name, sort
2021-12-19 21:23:56.585 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762847118790656[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 21:23:56.585 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 21:23:56.586 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127762847118790656[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 21:23:56.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 21:23:56.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 21:23:56.586 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127762847118790656[0;39m <==      Total: 1
2021-12-19 21:23:56.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 21:23:56.587 INFO  com.aspect.LogAspect                              :92   [32m127762847118790656[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 21:23:56.587 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 21:23:56.587 INFO  com.aspect.LogAspect                              :93   [32m127762847118790656[0;39m ------------- 结束 耗时：115 ms -------------
2021-12-19 21:23:56.587 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 21:23:56.588 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 21:23:56.588 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 21:23:56.589 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 21:23:56.589 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 21:23:56.590 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 21:23:56.591 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 21:23:56.592 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 21:23:56.592 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 21:23:56.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 21:23:56.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 21:23:56.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 21:23:56.594 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 21:23:56.594 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127762847114596352[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 21:23:56.594 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127762847114596352[0;39m <==      Total: 19
2021-12-19 21:23:56.596 INFO  com.aspect.LogAspect                              :92   [32m127762847114596352[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 21:23:56.596 INFO  com.aspect.LogAspect                              :93   [32m127762847114596352[0;39m ------------- 结束 耗时：125 ms -------------
2021-12-19 21:24:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127762861954043904[0;39m 生成今日电子书快照开始
2021-12-19 21:24:00.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762861954043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:00.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762861954043904[0;39m ==> Parameters: 
2021-12-19 21:24:00.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762861954043904[0;39m <==    Updates: 0
2021-12-19 21:24:00.156 INFO  com.job.EbookSnapshotJob                          :35   [32m127762861954043904[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 21:24:05.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127762882892009472[0;39m 生成今日电子书快照开始
2021-12-19 21:24:05.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762882892009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:05.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762882892009472[0;39m ==> Parameters: 
2021-12-19 21:24:05.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762882892009472[0;39m <==    Updates: 0
2021-12-19 21:24:05.142 INFO  com.job.EbookSnapshotJob                          :35   [32m127762882892009472[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 21:24:05.143 INFO  com.job.DocJob                                    :32   [32m127762883483406336[0;39m 更新电子书下的文档数据开始
2021-12-19 21:24:05.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762883483406336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 21:24:05.144 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762883483406336[0;39m ==> Parameters: 
2021-12-19 21:24:05.235 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127762883483406336[0;39m <==    Updates: 3
2021-12-19 21:24:05.236 INFO  com.job.DocJob                                    :35   [32m127762883483406336[0;39m 更新电子书下的文档数据结束，耗时：93毫秒
2021-12-19 21:24:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127762903922249728[0;39m 生成今日电子书快照开始
2021-12-19 21:24:10.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762903922249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:10.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762903922249728[0;39m ==> Parameters: 
2021-12-19 21:24:10.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762903922249728[0;39m <==    Updates: 0
2021-12-19 21:24:10.163 INFO  com.job.EbookSnapshotJob                          :35   [32m127762903922249728[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 21:24:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127762924876992512[0;39m 生成今日电子书快照开始
2021-12-19 21:24:15.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762924876992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:15.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762924876992512[0;39m ==> Parameters: 
2021-12-19 21:24:15.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762924876992512[0;39m <==    Updates: 0
2021-12-19 21:24:15.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127762924876992512[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-19 21:24:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127762945848512512[0;39m 生成今日电子书快照开始
2021-12-19 21:24:20.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762945848512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:20.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762945848512512[0;39m ==> Parameters: 
2021-12-19 21:24:20.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762945848512512[0;39m <==    Updates: 0
2021-12-19 21:24:20.151 INFO  com.job.EbookSnapshotJob                          :35   [32m127762945848512512[0;39m 生成今日电子书快照结束，耗时：139毫秒
2021-12-19 21:24:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127762966820032512[0;39m 生成今日电子书快照开始
2021-12-19 21:24:25.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762966820032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:25.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762966820032512[0;39m ==> Parameters: 
2021-12-19 21:24:25.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762966820032512[0;39m <==    Updates: 0
2021-12-19 21:24:25.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127762966820032512[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 21:24:26.042 INFO  com.websocket.WebSocketServer                     :41   [32m127762673847898113[0;39m 连接关闭，token：3qn56suZRu，session id：0！当前连接数：0
2021-12-19 21:24:30.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127762987778969600[0;39m 生成今日电子书快照开始
2021-12-19 21:24:30.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762987778969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 21:24:30.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762987778969600[0;39m ==> Parameters: 
2021-12-19 21:24:30.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127762987778969600[0;39m <==    Updates: 0
2021-12-19 21:24:30.159 INFO  com.job.EbookSnapshotJob                          :35   [32m127762987778969600[0;39m 生成今日电子书快照结束，耗时：150毫秒
2021-12-19 22:04:36.461 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 3472 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-19 22:04:36.477 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-19 22:04:36.526 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-19 22:04:36.557 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-19 22:04:36.557 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-19 22:04:38.337 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-19 22:04:38.337 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-19 22:04:39.100 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 740 ms. Found 0 Redis repository interfaces.
2021-12-19 22:04:39.678 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-19 22:04:39.694 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-19 22:04:39.694 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-19 22:04:39.694 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-19 22:04:39.741 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-19 22:04:39.741 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3184 ms
2021-12-19 22:04:41.017 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-19 22:04:41.055 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-19 22:04:41.070 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-19 22:04:41.086 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.384 seconds (JVM running for 6.617)
2021-12-19 22:04:45.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127773117073461248[0;39m 生成今日电子书快照开始
2021-12-19 22:04:45.020 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127773117073461248[0;39m HikariPool-1 - Starting...
2021-12-19 22:04:45.749 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127773117073461248[0;39m HikariPool-1 - Start completed.
2021-12-19 22:04:45.749 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773117073461248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:04:45.764 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773117073461248[0;39m ==> Parameters: 
2021-12-19 22:04:45.874 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773117073461248[0;39m <==    Updates: 0
2021-12-19 22:04:45.889 INFO  com.job.EbookSnapshotJob                          :35   [32m127773117073461248[0;39m 生成今日电子书快照结束，耗时：869毫秒
2021-12-19 22:04:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127773138007232512[0;39m 生成今日电子书快照开始
2021-12-19 22:04:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773138007232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:04:50.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773138007232512[0;39m ==> Parameters: 
2021-12-19 22:04:50.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773138007232512[0;39m <==    Updates: 0
2021-12-19 22:04:50.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127773138007232512[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 22:04:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127773158995529728[0;39m 生成今日电子书快照开始
2021-12-19 22:04:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773158995529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:04:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773158995529728[0;39m ==> Parameters: 
2021-12-19 22:04:55.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773158995529728[0;39m <==    Updates: 0
2021-12-19 22:04:55.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127773158995529728[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-19 22:05:00.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127773179988021248[0;39m 生成今日电子书快照开始
2021-12-19 22:05:00.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773179988021248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:00.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773179988021248[0;39m ==> Parameters: 
2021-12-19 22:05:00.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773179988021248[0;39m <==    Updates: 0
2021-12-19 22:05:00.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127773179988021248[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 22:05:05.017 INFO  com.job.DocJob                                    :32   [32m127773200946958336[0;39m 更新电子书下的文档数据开始
2021-12-19 22:05:05.064 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773200946958336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 22:05:05.064 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773200946958336[0;39m ==> Parameters: 
2021-12-19 22:05:05.158 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773200946958336[0;39m <==    Updates: 3
2021-12-19 22:05:05.158 INFO  com.job.DocJob                                    :35   [32m127773200946958336[0;39m 更新电子书下的文档数据结束，耗时：141毫秒
2021-12-19 22:05:05.158 INFO  com.job.EbookSnapshotJob                          :32   [32m127773201538355200[0;39m 生成今日电子书快照开始
2021-12-19 22:05:05.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773201538355200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:05.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773201538355200[0;39m ==> Parameters: 
2021-12-19 22:05:05.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773201538355200[0;39m <==    Updates: 0
2021-12-19 22:05:05.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127773201538355200[0;39m 生成今日电子书快照结束，耗时：97毫秒
2021-12-19 22:05:10.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127773221918478336[0;39m 生成今日电子书快照开始
2021-12-19 22:05:10.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773221918478336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:10.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773221918478336[0;39m ==> Parameters: 
2021-12-19 22:05:10.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773221918478336[0;39m <==    Updates: 0
2021-12-19 22:05:10.158 INFO  com.job.EbookSnapshotJob                          :35   [32m127773221918478336[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 22:05:15.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127773242898386944[0;39m 生成今日电子书快照开始
2021-12-19 22:05:15.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773242898386944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:15.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773242898386944[0;39m ==> Parameters: 
2021-12-19 22:05:15.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773242898386944[0;39m <==    Updates: 0
2021-12-19 22:05:15.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127773242898386944[0;39m 生成今日电子书快照结束，耗时：136毫秒
2021-12-19 22:05:20.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127773263811186688[0;39m 生成今日电子书快照开始
2021-12-19 22:05:20.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773263811186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:20.037 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773263811186688[0;39m ==> Parameters: 
2021-12-19 22:05:20.133 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773263811186688[0;39m <==    Updates: 0
2021-12-19 22:05:20.133 INFO  com.job.EbookSnapshotJob                          :35   [32m127773263811186688[0;39m 生成今日电子书快照结束，耗时：128毫秒
2021-12-19 22:05:22.511 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-19 22:05:22.511 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-19 22:05:22.512 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-19 22:05:22.556 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：MzOovpzjEe，session id：0，当前连接数：1
2021-12-19 22:05:22.784 INFO  com.aspect.LogAspect                              :54   [32m127773275462963200[0;39m ------------- 开始 -------------
2021-12-19 22:05:22.784 INFO  com.aspect.LogAspect                              :54   [32m127773275462963202[0;39m ------------- 开始 -------------
2021-12-19 22:05:22.784 INFO  com.aspect.LogAspect                              :54   [32m127773275462963201[0;39m ------------- 开始 -------------
2021-12-19 22:05:22.785 INFO  com.aspect.LogAspect                              :55   [32m127773275462963202[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 22:05:22.785 INFO  com.aspect.LogAspect                              :55   [32m127773275462963200[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 22:05:22.785 INFO  com.aspect.LogAspect                              :55   [32m127773275462963201[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 22:05:22.785 INFO  com.aspect.LogAspect                              :56   [32m127773275462963201[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 22:05:22.785 INFO  com.aspect.LogAspect                              :56   [32m127773275462963202[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 22:05:22.786 INFO  com.aspect.LogAspect                              :57   [32m127773275462963202[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 22:05:22.786 INFO  com.aspect.LogAspect                              :57   [32m127773275462963201[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 22:05:22.785 INFO  com.aspect.LogAspect                              :56   [32m127773275462963200[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 22:05:22.786 INFO  com.aspect.LogAspect                              :57   [32m127773275462963200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 22:05:22.828 INFO  com.aspect.LogAspect                              :80   [32m127773275462963200[0;39m 请求参数: []
2021-12-19 22:05:22.828 INFO  com.aspect.LogAspect                              :80   [32m127773275462963201[0;39m 请求参数: []
2021-12-19 22:05:22.837 INFO  com.aspect.LogAspect                              :80   [32m127773275462963202[0;39m 请求参数: []
2021-12-19 22:05:22.895 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127773275462963200[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 22:05:22.895 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127773275462963201[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 22:05:22.896 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127773275462963200[0;39m ==> Parameters: 
2021-12-19 22:05:22.897 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127773275462963201[0;39m ==> Parameters: 
2021-12-19 22:05:22.924 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127773275462963202[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 22:05:22.925 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127773275462963202[0;39m ==> Parameters: 
2021-12-19 22:05:22.992 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127773275462963201[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 22:05:22.992 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127773275462963200[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 22:05:22.994 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127773275462963200[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 22:05:22.994 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127773275462963201[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 22:05:22.997 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127773275462963200[0;39m <==      Total: 1
2021-12-19 22:05:22.998 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127773275462963201[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 22:05:22.999 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127773275462963201[0;39m <==      Total: 2
2021-12-19 22:05:23.001 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==    Columns: id, parent, name, sort
2021-12-19 22:05:23.002 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 22:05:23.003 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 22:05:23.004 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 22:05:23.005 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 22:05:23.007 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 22:05:23.008 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 22:05:23.008 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 22:05:23.009 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 22:05:23.011 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 22:05:23.011 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 22:05:23.012 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 22:05:23.013 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 22:05:23.013 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 22:05:23.014 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 22:05:23.015 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 22:05:23.015 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 22:05:23.017 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 22:05:23.018 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 22:05:23.019 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773275462963202[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 22:05:23.019 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127773275462963202[0;39m <==      Total: 19
2021-12-19 22:05:23.032 INFO  com.aspect.LogAspect                              :92   [32m127773275462963200[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 22:05:23.032 INFO  com.aspect.LogAspect                              :92   [32m127773275462963201[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 22:05:23.033 INFO  com.aspect.LogAspect                              :93   [32m127773275462963200[0;39m ------------- 结束 耗时：251 ms -------------
2021-12-19 22:05:23.033 INFO  com.aspect.LogAspect                              :93   [32m127773275462963201[0;39m ------------- 结束 耗时：251 ms -------------
2021-12-19 22:05:23.033 INFO  com.aspect.LogAspect                              :92   [32m127773275462963202[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 22:05:23.033 INFO  com.aspect.LogAspect                              :93   [32m127773275462963202[0;39m ------------- 结束 耗时：251 ms -------------
2021-12-19 22:05:25.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127773284837232640[0;39m 生成今日电子书快照开始
2021-12-19 22:05:25.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773284837232640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:25.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773284837232640[0;39m ==> Parameters: 
2021-12-19 22:05:25.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773284837232640[0;39m <==    Updates: 0
2021-12-19 22:05:25.162 INFO  com.job.EbookSnapshotJob                          :35   [32m127773284837232640[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 22:05:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127773305779392512[0;39m 生成今日电子书快照开始
2021-12-19 22:05:30.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773305779392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:30.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773305779392512[0;39m ==> Parameters: 
2021-12-19 22:05:30.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773305779392512[0;39m <==    Updates: 0
2021-12-19 22:05:30.163 INFO  com.job.EbookSnapshotJob                          :35   [32m127773305779392512[0;39m 生成今日电子书快照结束，耗时：152毫秒
2021-12-19 22:05:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127773326750912512[0;39m 生成今日电子书快照开始
2021-12-19 22:05:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773326750912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:35.058 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773326750912512[0;39m ==> Parameters: 
2021-12-19 22:05:35.152 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773326750912512[0;39m <==    Updates: 0
2021-12-19 22:05:35.152 INFO  com.job.EbookSnapshotJob                          :35   [32m127773326750912512[0;39m 生成今日电子书快照结束，耗时：141毫秒
2021-12-19 22:05:35.153 INFO  com.job.DocJob                                    :32   [32m127773327346503680[0;39m 更新电子书下的文档数据开始
2021-12-19 22:05:35.154 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773327346503680[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 22:05:35.155 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773327346503680[0;39m ==> Parameters: 
2021-12-19 22:05:35.173 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：MzOovpzjEe，session id：0！当前连接数：0
2021-12-19 22:05:35.245 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773327346503680[0;39m <==    Updates: 3
2021-12-19 22:05:35.249 INFO  com.job.DocJob                                    :35   [32m127773327346503680[0;39m 更新电子书下的文档数据结束，耗时：96毫秒
2021-12-19 22:05:40.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127773347697266688[0;39m 生成今日电子书快照开始
2021-12-19 22:05:40.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773347697266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:40.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773347697266688[0;39m ==> Parameters: 
2021-12-19 22:05:40.411 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773347697266688[0;39m <==    Updates: 0
2021-12-19 22:05:40.411 INFO  com.job.EbookSnapshotJob                          :35   [32m127773347697266688[0;39m 生成今日电子书快照结束，耗时：406毫秒
2021-12-19 22:05:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127773368735895552[0;39m 生成今日电子书快照开始
2021-12-19 22:05:45.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773368735895552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:45.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773368735895552[0;39m ==> Parameters: 
2021-12-19 22:05:45.167 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773368735895552[0;39m <==    Updates: 0
2021-12-19 22:05:45.167 INFO  com.job.EbookSnapshotJob                          :35   [32m127773368735895552[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 22:05:48.683 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：0lrEBacoOi，session id：1，当前连接数：1
2021-12-19 22:05:48.907 INFO  com.aspect.LogAspect                              :54   [32m127773385034960896[0;39m ------------- 开始 -------------
2021-12-19 22:05:48.907 INFO  com.aspect.LogAspect                              :55   [32m127773385034960896[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-19 22:05:48.907 INFO  com.aspect.LogAspect                              :56   [32m127773385034960896[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-19 22:05:48.908 INFO  com.aspect.LogAspect                              :57   [32m127773385034960896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 22:05:48.908 INFO  com.aspect.LogAspect                              :80   [32m127773385034960896[0;39m 请求参数: []
2021-12-19 22:05:48.910 INFO  com.aspect.LogAspect                              :54   [32m127773385047543808[0;39m ------------- 开始 -------------
2021-12-19 22:05:48.912 INFO  com.aspect.LogAspect                              :54   [32m127773385055932416[0;39m ------------- 开始 -------------
2021-12-19 22:05:48.912 INFO  com.aspect.LogAspect                              :55   [32m127773385055932416[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-19 22:05:48.913 INFO  com.aspect.LogAspect                              :56   [32m127773385055932416[0;39m 类名方法: com.controller.CategoryController.all
2021-12-19 22:05:48.913 INFO  com.aspect.LogAspect                              :57   [32m127773385055932416[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 22:05:48.913 INFO  com.aspect.LogAspect                              :80   [32m127773385055932416[0;39m 请求参数: []
2021-12-19 22:05:48.914 INFO  com.aspect.LogAspect                              :55   [32m127773385047543808[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-19 22:05:48.915 INFO  com.aspect.LogAspect                              :56   [32m127773385047543808[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-19 22:05:48.915 INFO  com.aspect.LogAspect                              :57   [32m127773385047543808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-19 22:05:48.915 INFO  com.aspect.LogAspect                              :80   [32m127773385047543808[0;39m 请求参数: []
2021-12-19 22:05:48.955 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127773385034960896[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 22:05:48.955 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127773385034960896[0;39m ==> Parameters: 
2021-12-19 22:05:48.961 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127773385055932416[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-19 22:05:48.961 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127773385047543808[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-19 22:05:48.961 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127773385055932416[0;39m ==> Parameters: 
2021-12-19 22:05:48.962 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127773385047543808[0;39m ==> Parameters: 
2021-12-19 22:05:49.000 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127773385034960896[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-19 22:05:49.001 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127773385034960896[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-19 22:05:49.002 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127773385034960896[0;39m <==      Total: 1
2021-12-19 22:05:49.003 INFO  com.aspect.LogAspect                              :92   [32m127773385034960896[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173}],"success":true}
2021-12-19 22:05:49.003 INFO  com.aspect.LogAspect                              :93   [32m127773385034960896[0;39m ------------- 结束 耗时：96 ms -------------
2021-12-19 22:05:49.011 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==    Columns: id, parent, name, sort
2021-12-19 22:05:49.011 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127773385047543808[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-19 22:05:49.011 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-19 22:05:49.011 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127773385047543808[0;39m <==        Row: 2021-12-18, 502, 173, 502, 173
2021-12-19 22:05:49.012 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-19 22:05:49.012 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-19 22:05:49.013 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127773385047543808[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-19 22:05:49.013 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-19 22:05:49.013 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127773385047543808[0;39m <==      Total: 2
2021-12-19 22:05:49.014 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 101, 100, Vue, 101
2021-12-19 22:05:49.014 INFO  com.aspect.LogAspect                              :92   [32m127773385047543808[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":502,"viewIncrease":502,"voteCount":173,"voteIncrease":173},{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-19 22:05:49.014 INFO  com.aspect.LogAspect                              :93   [32m127773385047543808[0;39m ------------- 结束 耗时：104 ms -------------
2021-12-19 22:05:49.014 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-19 22:05:49.015 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 200, 0, Java, 200
2021-12-19 22:05:49.016 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-19 22:05:49.016 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-19 22:05:49.017 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 300, 0, Python, 300
2021-12-19 22:05:49.017 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-19 22:05:49.018 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-19 22:05:49.019 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-19 22:05:49.020 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-19 22:05:49.020 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-19 22:05:49.021 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 500, 0, 其他, 500
2021-12-19 22:05:49.022 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-19 22:05:49.023 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-19 22:05:49.024 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127773385055932416[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-19 22:05:49.026 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127773385055932416[0;39m <==      Total: 19
2021-12-19 22:05:49.029 INFO  com.aspect.LogAspect                              :92   [32m127773385055932416[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-19 22:05:49.029 INFO  com.aspect.LogAspect                              :93   [32m127773385055932416[0;39m ------------- 结束 耗时：117 ms -------------
2021-12-19 22:05:50.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127773389644500992[0;39m 生成今日电子书快照开始
2021-12-19 22:05:50.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773389644500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:50.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773389644500992[0;39m ==> Parameters: 
2021-12-19 22:05:50.196 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773389644500992[0;39m <==    Updates: 0
2021-12-19 22:05:50.197 INFO  com.job.EbookSnapshotJob                          :35   [32m127773389644500992[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-19 22:05:55.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127773410632798208[0;39m 生成今日电子书快照开始
2021-12-19 22:05:55.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773410632798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:05:55.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773410632798208[0;39m ==> Parameters: 
2021-12-19 22:05:55.156 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773410632798208[0;39m <==    Updates: 0
2021-12-19 22:05:55.157 INFO  com.job.EbookSnapshotJob                          :35   [32m127773410632798208[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-19 22:06:00.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127773431570763776[0;39m 生成今日电子书快照开始
2021-12-19 22:06:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773431570763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:00.051 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773431570763776[0;39m ==> Parameters: 
2021-12-19 22:06:00.145 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773431570763776[0;39m <==    Updates: 0
2021-12-19 22:06:00.146 INFO  com.job.EbookSnapshotJob                          :35   [32m127773431570763776[0;39m 生成今日电子书快照结束，耗时：143毫秒
2021-12-19 22:06:05.002 INFO  com.job.DocJob                                    :32   [32m127773452542283776[0;39m 更新电子书下的文档数据开始
2021-12-19 22:06:05.049 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773452542283776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-19 22:06:05.049 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773452542283776[0;39m ==> Parameters: 
2021-12-19 22:06:05.127 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127773452542283776[0;39m <==    Updates: 3
2021-12-19 22:06:05.143 INFO  com.job.DocJob                                    :35   [32m127773452542283776[0;39m 更新电子书下的文档数据结束，耗时：141毫秒
2021-12-19 22:06:05.144 INFO  com.job.EbookSnapshotJob                          :32   [32m127773453137874944[0;39m 生成今日电子书快照开始
2021-12-19 22:06:05.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773453137874944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:05.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773453137874944[0;39m ==> Parameters: 
2021-12-19 22:06:05.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773453137874944[0;39m <==    Updates: 0
2021-12-19 22:06:05.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127773453137874944[0;39m 生成今日电子书快照结束，耗时：94毫秒
2021-12-19 22:06:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127773473559941120[0;39m 生成今日电子书快照开始
2021-12-19 22:06:10.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773473559941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:10.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773473559941120[0;39m ==> Parameters: 
2021-12-19 22:06:10.163 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773473559941120[0;39m <==    Updates: 0
2021-12-19 22:06:10.164 INFO  com.job.EbookSnapshotJob                          :35   [32m127773473559941120[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-19 22:06:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127773494535655424[0;39m 生成今日电子书快照开始
2021-12-19 22:06:15.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773494535655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:15.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773494535655424[0;39m ==> Parameters: 
2021-12-19 22:06:15.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773494535655424[0;39m <==    Updates: 0
2021-12-19 22:06:15.171 INFO  com.job.EbookSnapshotJob                          :35   [32m127773494535655424[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-19 22:06:16.829 INFO  com.websocket.WebSocketServer                     :41   [32m127773275462963201[0;39m 连接关闭，token：0lrEBacoOi，session id：1！当前连接数：0
2021-12-19 22:06:20.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127773515469426688[0;39m 生成今日电子书快照开始
2021-12-19 22:06:20.054 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773515469426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:20.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773515469426688[0;39m ==> Parameters: 
2021-12-19 22:06:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773515469426688[0;39m <==    Updates: 0
2021-12-19 22:06:20.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127773515469426688[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-19 22:06:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127773536432558080[0;39m 生成今日电子书快照开始
2021-12-19 22:06:25.035 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773536432558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:25.035 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773536432558080[0;39m ==> Parameters: 
2021-12-19 22:06:25.133 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773536432558080[0;39m <==    Updates: 0
2021-12-19 22:06:25.133 INFO  com.job.EbookSnapshotJob                          :35   [32m127773536432558080[0;39m 生成今日电子书快照结束，耗时：130毫秒
2021-12-19 22:06:30.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127773557471186944[0;39m 生成今日电子书快照开始
2021-12-19 22:06:30.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773557471186944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-19 22:06:30.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773557471186944[0;39m ==> Parameters: 
2021-12-19 22:06:30.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127773557471186944[0;39m <==    Updates: 0
2021-12-19 22:06:30.149 INFO  com.job.EbookSnapshotJob                          :35   [32m127773557471186944[0;39m 生成今日电子书快照结束，耗时：130毫秒
