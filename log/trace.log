2021-12-20 10:36:42.084 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 10:36:42.129 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 9232 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 10:36:42.129 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 10:36:42.352 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 10:36:42.352 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 10:36:46.755 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 10:36:46.755 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 10:36:47.341 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 554 ms. Found 0 Redis repository interfaces.
2021-12-20 10:36:48.992 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 10:36:49.030 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 10:36:49.030 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 10:36:49.030 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 10:36:49.193 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 10:36:49.193 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6841 ms
2021-12-20 10:36:52.541 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 10:36:52.602 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 10:36:52.649 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 10:36:52.702 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 12.936 seconds (JVM running for 15.773)
2021-12-20 10:36:55.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127962405958455296[0;39m 生成今日电子书快照开始
2021-12-20 10:36:55.085 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127962405958455296[0;39m HikariPool-1 - Starting...
2021-12-20 10:36:56.094 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127962405958455296[0;39m HikariPool-1 - Start completed.
2021-12-20 10:36:56.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962405958455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:36:56.157 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962405958455296[0;39m ==> Parameters: 
2021-12-20 10:36:56.295 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962405958455296[0;39m <==    Updates: 6
2021-12-20 10:36:56.295 INFO  com.job.EbookSnapshotJob                          :35   [32m127962405958455296[0;39m 生成今日电子书快照结束，耗时：1288毫秒
2021-12-20 10:37:00.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127962426984501248[0;39m 生成今日电子书快照开始
2021-12-20 10:37:00.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962426984501248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:00.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962426984501248[0;39m ==> Parameters: 
2021-12-20 10:37:00.305 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962426984501248[0;39m <==    Updates: 0
2021-12-20 10:37:00.305 INFO  com.job.EbookSnapshotJob                          :35   [32m127962426984501248[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 10:37:05.015 INFO  com.job.DocJob                                    :32   [32m127962447935049728[0;39m 更新电子书下的文档数据开始
2021-12-20 10:37:05.084 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962447935049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:37:05.084 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962447935049728[0;39m ==> Parameters: 
2021-12-20 10:37:05.262 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962447935049728[0;39m <==    Updates: 3
2021-12-20 10:37:05.262 INFO  com.job.DocJob                                    :35   [32m127962447935049728[0;39m 更新电子书下的文档数据结束，耗时：247毫秒
2021-12-20 10:37:05.262 INFO  com.job.EbookSnapshotJob                          :32   [32m127962448971042816[0;39m 生成今日电子书快照开始
2021-12-20 10:37:05.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962448971042816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:05.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962448971042816[0;39m ==> Parameters: 
2021-12-20 10:37:05.416 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962448971042816[0;39m <==    Updates: 0
2021-12-20 10:37:05.416 INFO  com.job.EbookSnapshotJob                          :35   [32m127962448971042816[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-20 10:37:10.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127962468860432384[0;39m 生成今日电子书快照开始
2021-12-20 10:37:10.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962468860432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:10.056 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962468860432384[0;39m ==> Parameters: 
2021-12-20 10:37:10.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962468860432384[0;39m <==    Updates: 0
2021-12-20 10:37:10.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127962468860432384[0;39m 生成今日电子书快照结束，耗时：188毫秒
2021-12-20 10:37:15.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127962489886478336[0;39m 生成今日电子书快照开始
2021-12-20 10:37:15.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962489886478336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:15.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962489886478336[0;39m ==> Parameters: 
2021-12-20 10:37:15.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962489886478336[0;39m <==    Updates: 0
2021-12-20 10:37:15.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127962489886478336[0;39m 生成今日电子书快照结束，耗时：199毫秒
2021-12-20 10:37:20.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127962510883164160[0;39m 生成今日电子书快照开始
2021-12-20 10:37:20.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962510883164160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:20.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962510883164160[0;39m ==> Parameters: 
2021-12-20 10:37:20.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962510883164160[0;39m <==    Updates: 0
2021-12-20 10:37:20.292 INFO  com.job.EbookSnapshotJob                          :35   [32m127962510883164160[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 10:37:25.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127962531783380992[0;39m 生成今日电子书快照开始
2021-12-20 10:37:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962531783380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:25.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962531783380992[0;39m ==> Parameters: 
2021-12-20 10:37:25.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962531783380992[0;39m <==    Updates: 0
2021-12-20 10:37:25.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127962531783380992[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 10:37:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127962552750706688[0;39m 生成今日电子书快照开始
2021-12-20 10:37:30.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962552750706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:30.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962552750706688[0;39m ==> Parameters: 
2021-12-20 10:37:30.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962552750706688[0;39m <==    Updates: 0
2021-12-20 10:37:30.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127962552750706688[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 10:37:35.022 INFO  com.job.DocJob                                    :32   [32m127962573793529856[0;39m 更新电子书下的文档数据开始
2021-12-20 10:37:35.106 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962573793529856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:37:35.122 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962573793529856[0;39m ==> Parameters: 
2021-12-20 10:37:35.323 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962573793529856[0;39m <==    Updates: 3
2021-12-20 10:37:35.323 INFO  com.job.DocJob                                    :35   [32m127962573793529856[0;39m 更新电子书下的文档数据结束，耗时：301毫秒
2021-12-20 10:37:35.323 INFO  com.job.EbookSnapshotJob                          :32   [32m127962575056015360[0;39m 生成今日电子书快照开始
2021-12-20 10:37:35.338 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962575056015360[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:35.338 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962575056015360[0;39m ==> Parameters: 
2021-12-20 10:37:35.555 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962575056015360[0;39m <==    Updates: 0
2021-12-20 10:37:35.555 INFO  com.job.EbookSnapshotJob                          :35   [32m127962575056015360[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 10:37:40.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127962594693746688[0;39m 生成今日电子书快照开始
2021-12-20 10:37:40.371 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962594693746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:40.371 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962594693746688[0;39m ==> Parameters: 
2021-12-20 10:37:40.873 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962594693746688[0;39m <==    Updates: 0
2021-12-20 10:37:40.873 INFO  com.job.EbookSnapshotJob                          :35   [32m127962594693746688[0;39m 生成今日电子书快照结束，耗时：868毫秒
2021-12-20 10:37:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127962615703015424[0;39m 生成今日电子书快照开始
2021-12-20 10:37:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962615703015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962615703015424[0;39m ==> Parameters: 
2021-12-20 10:37:45.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962615703015424[0;39m <==    Updates: 0
2021-12-20 10:37:45.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127962615703015424[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:37:50.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127962636708089856[0;39m 生成今日电子书快照开始
2021-12-20 10:37:50.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962636708089856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:50.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962636708089856[0;39m ==> Parameters: 
2021-12-20 10:37:50.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962636708089856[0;39m <==    Updates: 0
2021-12-20 10:37:50.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127962636708089856[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-20 10:37:55.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127962657708969984[0;39m 生成今日电子书快照开始
2021-12-20 10:37:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962657708969984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:37:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962657708969984[0;39m ==> Parameters: 
2021-12-20 10:37:55.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962657708969984[0;39m <==    Updates: 0
2021-12-20 10:37:55.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127962657708969984[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 10:38:00.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127962678672101376[0;39m 生成今日电子书快照开始
2021-12-20 10:38:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962678672101376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962678672101376[0;39m ==> Parameters: 
2021-12-20 10:38:00.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962678672101376[0;39m <==    Updates: 0
2021-12-20 10:38:00.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127962678672101376[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 10:38:05.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127962699639427072[0;39m 生成今日电子书快照开始
2021-12-20 10:38:05.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962699639427072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:05.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962699639427072[0;39m ==> Parameters: 
2021-12-20 10:38:05.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962699639427072[0;39m <==    Updates: 0
2021-12-20 10:38:05.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127962699639427072[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 10:38:05.243 INFO  com.job.DocJob                                    :32   [32m127962700549591040[0;39m 更新电子书下的文档数据开始
2021-12-20 10:38:05.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962700549591040[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:38:05.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962700549591040[0;39m ==> Parameters: 
2021-12-20 10:38:05.400 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962700549591040[0;39m <==    Updates: 3
2021-12-20 10:38:05.400 INFO  com.job.DocJob                                    :35   [32m127962700549591040[0;39m 更新电子书下的文档数据结束，耗时：157毫秒
2021-12-20 10:38:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127962720522866688[0;39m 生成今日电子书快照开始
2021-12-20 10:38:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962720522866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962720522866688[0;39m ==> Parameters: 
2021-12-20 10:38:10.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962720522866688[0;39m <==    Updates: 0
2021-12-20 10:38:10.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127962720522866688[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 10:38:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127962741548912640[0;39m 生成今日电子书快照开始
2021-12-20 10:38:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962741548912640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:15.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962741548912640[0;39m ==> Parameters: 
2021-12-20 10:38:15.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962741548912640[0;39m <==    Updates: 0
2021-12-20 10:38:15.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127962741548912640[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:38:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127962762516238336[0;39m 生成今日电子书快照开始
2021-12-20 10:38:20.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962762516238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:20.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962762516238336[0;39m ==> Parameters: 
2021-12-20 10:38:20.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962762516238336[0;39m <==    Updates: 0
2021-12-20 10:38:20.303 INFO  com.job.EbookSnapshotJob                          :35   [32m127962762516238336[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 10:38:25.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127962783483564032[0;39m 生成今日电子书快照开始
2021-12-20 10:38:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962783483564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962783483564032[0;39m ==> Parameters: 
2021-12-20 10:38:25.285 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962783483564032[0;39m <==    Updates: 0
2021-12-20 10:38:25.285 INFO  com.job.EbookSnapshotJob                          :35   [32m127962783483564032[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 10:38:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127962804450889728[0;39m 生成今日电子书快照开始
2021-12-20 10:38:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962804450889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962804450889728[0;39m ==> Parameters: 
2021-12-20 10:38:30.300 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962804450889728[0;39m <==    Updates: 0
2021-12-20 10:38:30.300 INFO  com.job.EbookSnapshotJob                          :35   [32m127962804450889728[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 10:38:35.010 INFO  com.job.DocJob                                    :32   [32m127962825401438208[0;39m 更新电子书下的文档数据开始
2021-12-20 10:38:35.088 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962825401438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:38:35.090 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962825401438208[0;39m ==> Parameters: 
2021-12-20 10:38:35.320 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962825401438208[0;39m <==    Updates: 3
2021-12-20 10:38:35.321 INFO  com.job.DocJob                                    :35   [32m127962825401438208[0;39m 更新电子书下的文档数据结束，耗时：310毫秒
2021-12-20 10:38:35.322 INFO  com.job.EbookSnapshotJob                          :32   [32m127962826710061056[0;39m 生成今日电子书快照开始
2021-12-20 10:38:35.322 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962826710061056[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:35.323 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962826710061056[0;39m ==> Parameters: 
2021-12-20 10:38:35.463 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962826710061056[0;39m <==    Updates: 0
2021-12-20 10:38:35.464 INFO  com.job.EbookSnapshotJob                          :35   [32m127962826710061056[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-20 10:38:36.472 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 10:38:36.472 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 10:38:36.473 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 10:38:36.621 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：y5qCHXbtha，session id：0，当前连接数：1
2021-12-20 10:38:36.752 INFO  com.aspect.LogAspect                              :54   [32m127962832691138561[0;39m ------------- 开始 -------------
2021-12-20 10:38:36.752 INFO  com.aspect.LogAspect                              :54   [32m127962832691138562[0;39m ------------- 开始 -------------
2021-12-20 10:38:36.752 INFO  com.aspect.LogAspect                              :54   [32m127962832691138560[0;39m ------------- 开始 -------------
2021-12-20 10:38:36.754 INFO  com.aspect.LogAspect                              :55   [32m127962832691138560[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:38:36.754 INFO  com.aspect.LogAspect                              :55   [32m127962832691138562[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:38:36.754 INFO  com.aspect.LogAspect                              :55   [32m127962832691138561[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:38:36.755 INFO  com.aspect.LogAspect                              :56   [32m127962832691138562[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:38:36.755 INFO  com.aspect.LogAspect                              :56   [32m127962832691138561[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:38:36.755 INFO  com.aspect.LogAspect                              :56   [32m127962832691138560[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:38:36.756 INFO  com.aspect.LogAspect                              :57   [32m127962832691138562[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:38:36.756 INFO  com.aspect.LogAspect                              :57   [32m127962832691138561[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:38:36.756 INFO  com.aspect.LogAspect                              :57   [32m127962832691138560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:38:36.791 INFO  com.aspect.LogAspect                              :80   [32m127962832691138560[0;39m 请求参数: []
2021-12-20 10:38:36.791 INFO  com.aspect.LogAspect                              :80   [32m127962832691138562[0;39m 请求参数: []
2021-12-20 10:38:36.791 INFO  com.aspect.LogAspect                              :80   [32m127962832691138561[0;39m 请求参数: []
2021-12-20 10:38:36.879 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127962832691138562[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:38:36.880 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127962832691138562[0;39m ==> Parameters: 
2021-12-20 10:38:36.923 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127962832691138560[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:38:36.923 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127962832691138561[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:38:36.924 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127962832691138560[0;39m ==> Parameters: 
2021-12-20 10:38:36.925 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127962832691138561[0;39m ==> Parameters: 
2021-12-20 10:38:37.007 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127962832691138562[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:38:37.008 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127962832691138562[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:38:37.011 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127962832691138561[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:38:37.012 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127962832691138561[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:38:37.012 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:38:37.012 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:38:37.047 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:38:37.048 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:38:37.049 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127962832691138562[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:38:37.049 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127962832691138561[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:38:37.050 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127962832691138562[0;39m <==      Total: 2
2021-12-20 10:38:37.050 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127962832691138561[0;39m <==      Total: 2
2021-12-20 10:38:37.051 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:38:37.051 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:38:37.052 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:38:37.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:38:37.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:38:37.054 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:38:37.055 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:38:37.055 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:38:37.056 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:38:37.056 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:38:37.058 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:38:37.058 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:38:37.059 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:38:37.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:38:37.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:38:37.063 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127962832691138560[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:38:37.063 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127962832691138560[0;39m <==      Total: 19
2021-12-20 10:38:37.082 INFO  com.aspect.LogAspect                              :92   [32m127962832691138562[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:38:37.082 INFO  com.aspect.LogAspect                              :93   [32m127962832691138562[0;39m ------------- 结束 耗时：334 ms -------------
2021-12-20 10:38:37.083 INFO  com.aspect.LogAspect                              :92   [32m127962832691138560[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:38:37.083 INFO  com.aspect.LogAspect                              :92   [32m127962832691138561[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:38:37.083 INFO  com.aspect.LogAspect                              :93   [32m127962832691138560[0;39m ------------- 结束 耗时：335 ms -------------
2021-12-20 10:38:37.083 INFO  com.aspect.LogAspect                              :93   [32m127962832691138561[0;39m ------------- 结束 耗时：335 ms -------------
2021-12-20 10:38:40.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127962846335209472[0;39m 生成今日电子书快照开始
2021-12-20 10:38:40.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962846335209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:40.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962846335209472[0;39m ==> Parameters: 
2021-12-20 10:38:40.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962846335209472[0;39m <==    Updates: 0
2021-12-20 10:38:40.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127962846335209472[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 10:38:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127962867369644032[0;39m 生成今日电子书快照开始
2021-12-20 10:38:45.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962867369644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:45.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962867369644032[0;39m ==> Parameters: 
2021-12-20 10:38:45.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962867369644032[0;39m <==    Updates: 0
2021-12-20 10:38:45.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127962867369644032[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 10:38:50.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127962888378912768[0;39m 生成今日电子书快照开始
2021-12-20 10:38:50.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962888378912768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:50.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962888378912768[0;39m ==> Parameters: 
2021-12-20 10:38:50.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962888378912768[0;39m <==    Updates: 0
2021-12-20 10:38:50.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127962888378912768[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 10:38:55.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127962909258158080[0;39m 生成今日电子书快照开始
2021-12-20 10:38:55.420 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962909258158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:38:55.436 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962909258158080[0;39m ==> Parameters: 
2021-12-20 10:38:55.822 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962909258158080[0;39m <==    Updates: 0
2021-12-20 10:38:55.822 INFO  com.job.EbookSnapshotJob                          :35   [32m127962909258158080[0;39m 生成今日电子书快照结束，耗时：819毫秒
2021-12-20 10:39:00.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127962930288398336[0;39m 生成今日电子书快照开始
2021-12-20 10:39:00.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962930288398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:00.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962930288398336[0;39m ==> Parameters: 
2021-12-20 10:39:00.921 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962930288398336[0;39m <==    Updates: 0
2021-12-20 10:39:00.921 INFO  com.job.EbookSnapshotJob                          :35   [32m127962930288398336[0;39m 生成今日电子书快照结束，耗时：904毫秒
2021-12-20 10:39:05.018 INFO  com.job.DocJob                                    :32   [32m127962951264112640[0;39m 更新电子书下的文档数据开始
2021-12-20 10:39:05.180 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962951264112640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:39:05.180 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962951264112640[0;39m ==> Parameters: 
2021-12-20 10:39:05.840 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127962951264112640[0;39m <==    Updates: 3
2021-12-20 10:39:05.840 INFO  com.job.DocJob                                    :35   [32m127962951264112640[0;39m 更新电子书下的文档数据结束，耗时：822毫秒
2021-12-20 10:39:05.840 INFO  com.job.EbookSnapshotJob                          :32   [32m127962954711830528[0;39m 生成今日电子书快照开始
2021-12-20 10:39:06.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962954711830528[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:06.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962954711830528[0;39m ==> Parameters: 
2021-12-20 10:39:07.323 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962954711830528[0;39m <==    Updates: 0
2021-12-20 10:39:07.323 INFO  com.job.EbookSnapshotJob                          :35   [32m127962954711830528[0;39m 生成今日电子书快照结束，耗时：1483毫秒
2021-12-20 10:39:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127962972202078208[0;39m 生成今日电子书快照开始
2021-12-20 10:39:10.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962972202078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:10.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962972202078208[0;39m ==> Parameters: 
2021-12-20 10:39:11.703 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962972202078208[0;39m <==    Updates: 0
2021-12-20 10:39:11.703 INFO  com.job.EbookSnapshotJob                          :35   [32m127962972202078208[0;39m 生成今日电子书快照结束，耗时：1693毫秒
2021-12-20 10:39:15.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127962993202958336[0;39m 生成今日电子书快照开始
2021-12-20 10:39:15.193 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962993202958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:15.193 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962993202958336[0;39m ==> Parameters: 
2021-12-20 10:39:36.525 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127962993202958336[0;39m <==    Updates: 0
2021-12-20 10:39:36.525 INFO  com.job.EbookSnapshotJob                          :35   [32m127962993202958336[0;39m 生成今日电子书快照结束，耗时：21508毫秒
2021-12-20 10:39:36.525 INFO  com.job.DocJob                                    :32   [32m127963083414048768[0;39m 更新电子书下的文档数据开始
2021-12-20 10:39:41.021 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963083414048768[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:39:41.021 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963083414048768[0;39m ==> Parameters: 
2021-12-20 10:39:41.206 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963083414048768[0;39m <==    Updates: 3
2021-12-20 10:39:41.206 INFO  com.job.DocJob                                    :35   [32m127963083414048768[0;39m 更新电子书下的文档数据结束，耗时：4681毫秒
2021-12-20 10:39:41.206 INFO  com.job.EbookSnapshotJob                          :32   [32m127963103047585792[0;39m 生成今日电子书快照开始
2021-12-20 10:39:41.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963103047585792[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:41.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963103047585792[0;39m ==> Parameters: 
2021-12-20 10:39:41.373 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963103047585792[0;39m <==    Updates: 0
2021-12-20 10:39:41.388 INFO  com.job.EbookSnapshotJob                          :35   [32m127963103047585792[0;39m 生成今日电子书快照结束，耗时：182毫秒
2021-12-20 10:39:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127963119006912512[0;39m 生成今日电子书快照开始
2021-12-20 10:39:45.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963119006912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:45.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963119006912512[0;39m ==> Parameters: 
2021-12-20 10:39:45.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963119006912512[0;39m <==    Updates: 0
2021-12-20 10:39:45.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127963119006912512[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 10:39:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127963139982626816[0;39m 生成今日电子书快照开始
2021-12-20 10:39:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963139982626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:50.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963139982626816[0;39m ==> Parameters: 
2021-12-20 10:39:50.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963139982626816[0;39m <==    Updates: 0
2021-12-20 10:39:50.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127963139982626816[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 10:39:53.660 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：y5qCHXbtha，session id：0！当前连接数：0
2021-12-20 10:39:55.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127963160924786688[0;39m 生成今日电子书快照开始
2021-12-20 10:39:55.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963160924786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:39:55.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963160924786688[0;39m ==> Parameters: 
2021-12-20 10:39:55.392 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963160924786688[0;39m <==    Updates: 0
2021-12-20 10:39:55.392 INFO  com.job.EbookSnapshotJob                          :35   [32m127963160924786688[0;39m 生成今日电子书快照结束，耗时：387毫秒
2021-12-20 10:40:00.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127963181896306688[0;39m 生成今日电子书快照开始
2021-12-20 10:40:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963181896306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963181896306688[0;39m ==> Parameters: 
2021-12-20 10:40:00.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963181896306688[0;39m <==    Updates: 0
2021-12-20 10:40:00.205 INFO  com.job.EbookSnapshotJob                          :35   [32m127963181896306688[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 10:40:05.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127963202855243776[0;39m 生成今日电子书快照开始
2021-12-20 10:40:05.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963202855243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:05.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963202855243776[0;39m ==> Parameters: 
2021-12-20 10:40:05.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963202855243776[0;39m <==    Updates: 0
2021-12-20 10:40:05.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127963202855243776[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 10:40:05.217 INFO  com.job.DocJob                                    :32   [32m127963203757019136[0;39m 更新电子书下的文档数据开始
2021-12-20 10:40:05.217 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963203757019136[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:40:05.217 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963203757019136[0;39m ==> Parameters: 
2021-12-20 10:40:05.402 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963203757019136[0;39m <==    Updates: 3
2021-12-20 10:40:05.402 INFO  com.job.DocJob                                    :35   [32m127963203757019136[0;39m 更新电子书下的文档数据结束，耗时：185毫秒
2021-12-20 10:40:10.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127963223835152384[0;39m 生成今日电子书快照开始
2021-12-20 10:40:10.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963223835152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:10.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963223835152384[0;39m ==> Parameters: 
2021-12-20 10:40:10.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963223835152384[0;39m <==    Updates: 0
2021-12-20 10:40:10.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127963223835152384[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:40:15.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127963244861198336[0;39m 生成今日电子书快照开始
2021-12-20 10:40:15.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963244861198336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:15.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963244861198336[0;39m ==> Parameters: 
2021-12-20 10:40:15.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963244861198336[0;39m <==    Updates: 0
2021-12-20 10:40:15.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127963244861198336[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:40:20.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127963265799163904[0;39m 生成今日电子书快照开始
2021-12-20 10:40:20.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963265799163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:20.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963265799163904[0;39m ==> Parameters: 
2021-12-20 10:40:20.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963265799163904[0;39m <==    Updates: 0
2021-12-20 10:40:20.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127963265799163904[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 10:40:25.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127963286816821248[0;39m 生成今日电子书快照开始
2021-12-20 10:40:25.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963286816821248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:25.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963286816821248[0;39m ==> Parameters: 
2021-12-20 10:40:25.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963286816821248[0;39m <==    Updates: 0
2021-12-20 10:40:25.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127963286816821248[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 10:40:30.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127963307779952640[0;39m 生成今日电子书快照开始
2021-12-20 10:40:30.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963307779952640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:30.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963307779952640[0;39m ==> Parameters: 
2021-12-20 10:40:30.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963307779952640[0;39m <==    Updates: 0
2021-12-20 10:40:30.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127963307779952640[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 10:40:35.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127963328747278336[0;39m 生成今日电子书快照开始
2021-12-20 10:40:35.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963328747278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:35.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963328747278336[0;39m ==> Parameters: 
2021-12-20 10:40:35.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963328747278336[0;39m <==    Updates: 0
2021-12-20 10:40:35.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127963328747278336[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 10:40:35.255 INFO  com.job.DocJob                                    :32   [32m127963329745522688[0;39m 更新电子书下的文档数据开始
2021-12-20 10:40:35.255 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963329745522688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:40:35.255 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963329745522688[0;39m ==> Parameters: 
2021-12-20 10:40:35.441 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963329745522688[0;39m <==    Updates: 3
2021-12-20 10:40:35.441 INFO  com.job.DocJob                                    :35   [32m127963329745522688[0;39m 更新电子书下的文档数据结束，耗时：186毫秒
2021-12-20 10:40:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127963349710409728[0;39m 生成今日电子书快照开始
2021-12-20 10:40:40.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963349710409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:40.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963349710409728[0;39m ==> Parameters: 
2021-12-20 10:40:40.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963349710409728[0;39m <==    Updates: 0
2021-12-20 10:40:40.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127963349710409728[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:40:45.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127963370723872768[0;39m 生成今日电子书快照开始
2021-12-20 10:40:45.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963370723872768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:45.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963370723872768[0;39m ==> Parameters: 
2021-12-20 10:40:45.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963370723872768[0;39m <==    Updates: 0
2021-12-20 10:40:45.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127963370723872768[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 10:40:50.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127963391666032640[0;39m 生成今日电子书快照开始
2021-12-20 10:40:50.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963391666032640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:50.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963391666032640[0;39m ==> Parameters: 
2021-12-20 10:40:50.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963391666032640[0;39m <==    Updates: 0
2021-12-20 10:40:50.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127963391666032640[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 10:40:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127963412641746944[0;39m 生成今日电子书快照开始
2021-12-20 10:40:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963412641746944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:40:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963412641746944[0;39m ==> Parameters: 
2021-12-20 10:40:55.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963412641746944[0;39m <==    Updates: 0
2021-12-20 10:40:55.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127963412641746944[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 10:41:00.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127963433609072640[0;39m 生成今日电子书快照开始
2021-12-20 10:41:00.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963433609072640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:00.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963433609072640[0;39m ==> Parameters: 
2021-12-20 10:41:00.203 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963433609072640[0;39m <==    Updates: 0
2021-12-20 10:41:00.203 INFO  com.job.EbookSnapshotJob                          :35   [32m127963433609072640[0;39m 生成今日电子书快照结束，耗时：185毫秒
2021-12-20 10:41:05.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127963454568009728[0;39m 生成今日电子书快照开始
2021-12-20 10:41:05.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963454568009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:05.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963454568009728[0;39m ==> Parameters: 
2021-12-20 10:41:05.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963454568009728[0;39m <==    Updates: 0
2021-12-20 10:41:05.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127963454568009728[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:41:05.216 INFO  com.job.DocJob                                    :32   [32m127963455411064832[0;39m 更新电子书下的文档数据开始
2021-12-20 10:41:05.231 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963455411064832[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:41:05.231 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963455411064832[0;39m ==> Parameters: 
2021-12-20 10:41:05.379 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963455411064832[0;39m <==    Updates: 3
2021-12-20 10:41:05.379 INFO  com.job.DocJob                                    :35   [32m127963455411064832[0;39m 更新电子书下的文档数据结束，耗时：163毫秒
2021-12-20 10:41:10.030 INFO  com.job.EbookSnapshotJob                          :32   [32m127963475602444288[0;39m 生成今日电子书快照开始
2021-12-20 10:41:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963475602444288[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963475602444288[0;39m ==> Parameters: 
2021-12-20 10:41:10.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963475602444288[0;39m <==    Updates: 0
2021-12-20 10:41:10.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127963475602444288[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 10:41:15.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127963496561381376[0;39m 生成今日电子书快照开始
2021-12-20 10:41:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963496561381376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963496561381376[0;39m ==> Parameters: 
2021-12-20 10:41:15.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963496561381376[0;39m <==    Updates: 0
2021-12-20 10:41:15.228 INFO  com.job.EbookSnapshotJob                          :35   [32m127963496561381376[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:41:20.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127963517503541248[0;39m 生成今日电子书快照开始
2021-12-20 10:41:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963517503541248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963517503541248[0;39m ==> Parameters: 
2021-12-20 10:41:20.338 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963517503541248[0;39m <==    Updates: 0
2021-12-20 10:41:20.338 INFO  com.job.EbookSnapshotJob                          :35   [32m127963517503541248[0;39m 生成今日电子书快照结束，耗时：318毫秒
2021-12-20 10:41:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127963538449895424[0;39m 生成今日电子书快照开始
2021-12-20 10:41:25.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963538449895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:25.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963538449895424[0;39m ==> Parameters: 
2021-12-20 10:41:25.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963538449895424[0;39m <==    Updates: 0
2021-12-20 10:41:25.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127963538449895424[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 10:41:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127963559421415424[0;39m 生成今日电子书快照开始
2021-12-20 10:41:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963559421415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963559421415424[0;39m ==> Parameters: 
2021-12-20 10:41:30.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963559421415424[0;39m <==    Updates: 0
2021-12-20 10:41:30.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127963559421415424[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 10:41:35.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127963580342603776[0;39m 生成今日电子书快照开始
2021-12-20 10:41:35.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963580342603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:35.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963580342603776[0;39m ==> Parameters: 
2021-12-20 10:41:35.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963580342603776[0;39m <==    Updates: 0
2021-12-20 10:41:35.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127963580342603776[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 10:41:35.234 INFO  com.job.DocJob                                    :32   [32m127963581315682304[0;39m 更新电子书下的文档数据开始
2021-12-20 10:41:35.234 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963581315682304[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:41:35.234 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963581315682304[0;39m ==> Parameters: 
2021-12-20 10:41:35.419 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963581315682304[0;39m <==    Updates: 3
2021-12-20 10:41:35.419 INFO  com.job.DocJob                                    :35   [32m127963581315682304[0;39m 更新电子书下的文档数据结束，耗时：185毫秒
2021-12-20 10:41:40.114 INFO  com.job.EbookSnapshotJob                          :32   [32m127963601783885824[0;39m 生成今日电子书快照开始
2021-12-20 10:41:40.177 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963601783885824[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:40.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963601783885824[0;39m ==> Parameters: 
2021-12-20 10:41:40.342 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963601783885824[0;39m <==    Updates: 0
2021-12-20 10:41:40.342 INFO  com.job.EbookSnapshotJob                          :35   [32m127963601783885824[0;39m 生成今日电子书快照结束，耗时：228毫秒
2021-12-20 10:41:45.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127963622302420992[0;39m 生成今日电子书快照开始
2021-12-20 10:41:45.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963622302420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:45.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963622302420992[0;39m ==> Parameters: 
2021-12-20 10:41:45.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963622302420992[0;39m <==    Updates: 0
2021-12-20 10:41:45.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127963622302420992[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 10:41:50.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127963643349438464[0;39m 生成今日电子书快照开始
2021-12-20 10:41:50.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963643349438464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:50.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963643349438464[0;39m ==> Parameters: 
2021-12-20 10:41:50.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963643349438464[0;39m <==    Updates: 0
2021-12-20 10:41:50.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127963643349438464[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 10:41:55.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127963664237072384[0;39m 生成今日电子书快照开始
2021-12-20 10:41:55.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963664237072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:41:55.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963664237072384[0;39m ==> Parameters: 
2021-12-20 10:41:55.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963664237072384[0;39m <==    Updates: 0
2021-12-20 10:41:55.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127963664237072384[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-20 10:42:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127963685254729728[0;39m 生成今日电子书快照开始
2021-12-20 10:42:00.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963685254729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:00.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963685254729728[0;39m ==> Parameters: 
2021-12-20 10:42:00.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963685254729728[0;39m <==    Updates: 0
2021-12-20 10:42:00.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127963685254729728[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 10:42:05.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127963706205278208[0;39m 生成今日电子书快照开始
2021-12-20 10:42:05.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963706205278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:05.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963706205278208[0;39m ==> Parameters: 
2021-12-20 10:42:05.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963706205278208[0;39m <==    Updates: 0
2021-12-20 10:42:05.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127963706205278208[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 10:42:05.247 INFO  com.job.DocJob                                    :32   [32m127963707199328256[0;39m 更新电子书下的文档数据开始
2021-12-20 10:42:05.247 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963707199328256[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:42:05.247 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963707199328256[0;39m ==> Parameters: 
2021-12-20 10:42:05.510 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963707199328256[0;39m <==    Updates: 3
2021-12-20 10:42:05.510 INFO  com.job.DocJob                                    :35   [32m127963707199328256[0;39m 更新电子书下的文档数据结束，耗时：263毫秒
2021-12-20 10:42:10.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127963727222935552[0;39m 生成今日电子书快照开始
2021-12-20 10:42:10.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963727222935552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:10.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963727222935552[0;39m ==> Parameters: 
2021-12-20 10:42:10.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963727222935552[0;39m <==    Updates: 0
2021-12-20 10:42:10.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127963727222935552[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 10:42:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127963748181872640[0;39m 生成今日电子书快照开始
2021-12-20 10:42:15.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963748181872640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:15.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963748181872640[0;39m ==> Parameters: 
2021-12-20 10:42:15.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963748181872640[0;39m <==    Updates: 0
2021-12-20 10:42:15.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127963748181872640[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 10:42:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127963769145004032[0;39m 生成今日电子书快照开始
2021-12-20 10:42:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963769145004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963769145004032[0;39m ==> Parameters: 
2021-12-20 10:42:20.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963769145004032[0;39m <==    Updates: 0
2021-12-20 10:42:20.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127963769145004032[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 10:42:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127963790099746816[0;39m 生成今日电子书快照开始
2021-12-20 10:42:25.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963790099746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:25.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963790099746816[0;39m ==> Parameters: 
2021-12-20 10:42:25.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963790099746816[0;39m <==    Updates: 0
2021-12-20 10:42:25.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127963790099746816[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:42:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127963811092238336[0;39m 生成今日电子书快照开始
2021-12-20 10:42:30.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963811092238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:30.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963811092238336[0;39m ==> Parameters: 
2021-12-20 10:42:30.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963811092238336[0;39m <==    Updates: 0
2021-12-20 10:42:30.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127963811092238336[0;39m 生成今日电子书快照结束，耗时：208毫秒
2021-12-20 10:42:35.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127963832067952640[0;39m 生成今日电子书快照开始
2021-12-20 10:42:35.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963832067952640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:35.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963832067952640[0;39m ==> Parameters: 
2021-12-20 10:42:35.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963832067952640[0;39m <==    Updates: 0
2021-12-20 10:42:35.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127963832067952640[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 10:42:35.240 INFO  com.job.DocJob                                    :32   [32m127963832999088128[0;39m 更新电子书下的文档数据开始
2021-12-20 10:42:35.240 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963832999088128[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:42:35.240 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963832999088128[0;39m ==> Parameters: 
2021-12-20 10:42:35.419 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963832999088128[0;39m <==    Updates: 3
2021-12-20 10:42:35.419 INFO  com.job.DocJob                                    :35   [32m127963832999088128[0;39m 更新电子书下的文档数据结束，耗时：179毫秒
2021-12-20 10:42:40.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127963853043666944[0;39m 生成今日电子书快照开始
2021-12-20 10:42:40.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963853043666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:40.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963853043666944[0;39m ==> Parameters: 
2021-12-20 10:42:40.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963853043666944[0;39m <==    Updates: 0
2021-12-20 10:42:40.220 INFO  com.job.EbookSnapshotJob                          :35   [32m127963853043666944[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:42:45.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127963874019381248[0;39m 生成今日电子书快照开始
2021-12-20 10:42:45.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963874019381248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:45.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963874019381248[0;39m ==> Parameters: 
2021-12-20 10:42:45.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963874019381248[0;39m <==    Updates: 0
2021-12-20 10:42:45.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127963874019381248[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 10:42:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127963894974124032[0;39m 生成今日电子书快照开始
2021-12-20 10:42:50.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963894974124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:50.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963894974124032[0;39m ==> Parameters: 
2021-12-20 10:42:50.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963894974124032[0;39m <==    Updates: 0
2021-12-20 10:42:50.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127963894974124032[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:42:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127963915937255424[0;39m 生成今日电子书快照开始
2021-12-20 10:42:55.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963915937255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:42:55.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963915937255424[0;39m ==> Parameters: 
2021-12-20 10:42:55.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963915937255424[0;39m <==    Updates: 0
2021-12-20 10:42:55.277 INFO  com.job.EbookSnapshotJob                          :35   [32m127963915937255424[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 10:43:00.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127963936959107072[0;39m 生成今日电子书快照开始
2021-12-20 10:43:00.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963936959107072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:00.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963936959107072[0;39m ==> Parameters: 
2021-12-20 10:43:00.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963936959107072[0;39m <==    Updates: 0
2021-12-20 10:43:00.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127963936959107072[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 10:43:05.020 INFO  com.job.DocJob                                    :32   [32m127963957905461248[0;39m 更新电子书下的文档数据开始
2021-12-20 10:43:05.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963957905461248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:43:05.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963957905461248[0;39m ==> Parameters: 
2021-12-20 10:43:05.258 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127963957905461248[0;39m <==    Updates: 3
2021-12-20 10:43:05.258 INFO  com.job.DocJob                                    :35   [32m127963957905461248[0;39m 更新电子书下的文档数据结束，耗时：238毫秒
2021-12-20 10:43:05.258 INFO  com.job.EbookSnapshotJob                          :32   [32m127963958903705600[0;39m 生成今日电子书快照开始
2021-12-20 10:43:05.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963958903705600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:05.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963958903705600[0;39m ==> Parameters: 
2021-12-20 10:43:05.420 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963958903705600[0;39m <==    Updates: 0
2021-12-20 10:43:05.427 INFO  com.job.EbookSnapshotJob                          :35   [32m127963958903705600[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 10:43:10.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127963978805678080[0;39m 生成今日电子书快照开始
2021-12-20 10:43:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963978805678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:10.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963978805678080[0;39m ==> Parameters: 
2021-12-20 10:43:10.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963978805678080[0;39m <==    Updates: 0
2021-12-20 10:43:10.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127963978805678080[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 10:43:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127963999840112640[0;39m 生成今日电子书快照开始
2021-12-20 10:43:15.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963999840112640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:15.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963999840112640[0;39m ==> Parameters: 
2021-12-20 10:43:15.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127963999840112640[0;39m <==    Updates: 0
2021-12-20 10:43:15.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127963999840112640[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 10:43:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127964020799049728[0;39m 生成今日电子书快照开始
2021-12-20 10:43:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964020799049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964020799049728[0;39m ==> Parameters: 
2021-12-20 10:43:20.330 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964020799049728[0;39m <==    Updates: 0
2021-12-20 10:43:20.346 INFO  com.job.EbookSnapshotJob                          :35   [32m127964020799049728[0;39m 生成今日电子书快照结束，耗时：331毫秒
2021-12-20 10:43:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127964041749598208[0;39m 生成今日电子书快照开始
2021-12-20 10:43:25.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964041749598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:25.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964041749598208[0;39m ==> Parameters: 
2021-12-20 10:43:25.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964041749598208[0;39m <==    Updates: 0
2021-12-20 10:43:25.232 INFO  com.job.EbookSnapshotJob                          :35   [32m127964041749598208[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 10:43:28.706 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：TMy9BsiUb5，session id：1，当前连接数：1
2021-12-20 10:43:29.026 INFO  com.aspect.LogAspect                              :54   [32m127964058593923072[0;39m ------------- 开始 -------------
2021-12-20 10:43:29.026 INFO  com.aspect.LogAspect                              :55   [32m127964058593923072[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:43:29.027 INFO  com.aspect.LogAspect                              :56   [32m127964058593923072[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:43:29.027 INFO  com.aspect.LogAspect                              :57   [32m127964058593923072[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:29.027 INFO  com.aspect.LogAspect                              :80   [32m127964058593923072[0;39m 请求参数: []
2021-12-20 10:43:29.033 INFO  com.aspect.LogAspect                              :54   [32m127964058619088896[0;39m ------------- 开始 -------------
2021-12-20 10:43:29.033 INFO  com.aspect.LogAspect                              :55   [32m127964058619088896[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:43:29.033 INFO  com.aspect.LogAspect                              :56   [32m127964058619088896[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:43:29.034 INFO  com.aspect.LogAspect                              :57   [32m127964058619088896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:29.034 INFO  com.aspect.LogAspect                              :80   [32m127964058619088896[0;39m 请求参数: []
2021-12-20 10:43:29.037 INFO  com.aspect.LogAspect                              :54   [32m127964058640060416[0;39m ------------- 开始 -------------
2021-12-20 10:43:29.038 INFO  com.aspect.LogAspect                              :55   [32m127964058640060416[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:43:29.038 INFO  com.aspect.LogAspect                              :56   [32m127964058640060416[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:43:29.038 INFO  com.aspect.LogAspect                              :57   [32m127964058640060416[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:29.038 INFO  com.aspect.LogAspect                              :80   [32m127964058640060416[0;39m 请求参数: []
2021-12-20 10:43:29.110 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127964058593923072[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:43:29.110 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127964058593923072[0;39m ==> Parameters: 
2021-12-20 10:43:29.132 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127964058619088896[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:43:29.132 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127964058640060416[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:43:29.133 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127964058640060416[0;39m ==> Parameters: 
2021-12-20 10:43:29.133 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127964058619088896[0;39m ==> Parameters: 
2021-12-20 10:43:29.198 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127964058593923072[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:43:29.199 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127964058593923072[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:43:29.200 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127964058593923072[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:43:29.201 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127964058593923072[0;39m <==      Total: 2
2021-12-20 10:43:29.201 INFO  com.aspect.LogAspect                              :92   [32m127964058593923072[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:43:29.202 INFO  com.aspect.LogAspect                              :93   [32m127964058593923072[0;39m ------------- 结束 耗时：176 ms -------------
2021-12-20 10:43:29.209 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127964058619088896[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:43:29.209 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127964058619088896[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:43:29.211 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127964058619088896[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:43:29.212 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127964058619088896[0;39m <==      Total: 2
2021-12-20 10:43:29.212 INFO  com.aspect.LogAspect                              :92   [32m127964058619088896[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:43:29.212 INFO  com.aspect.LogAspect                              :93   [32m127964058619088896[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-20 10:43:29.232 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:43:29.232 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:43:29.233 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:43:29.233 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:43:29.234 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:43:29.235 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:43:29.235 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:43:29.236 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:43:29.237 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:43:29.237 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:43:29.238 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:43:29.238 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:43:29.239 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:43:29.239 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:43:29.241 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:43:29.241 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:43:29.242 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:43:29.242 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:43:29.243 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:43:29.243 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964058640060416[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:43:29.244 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127964058640060416[0;39m <==      Total: 19
2021-12-20 10:43:29.246 INFO  com.aspect.LogAspect                              :92   [32m127964058640060416[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:43:29.246 INFO  com.aspect.LogAspect                              :93   [32m127964058640060416[0;39m ------------- 结束 耗时：209 ms -------------
2021-12-20 10:43:30.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127964062712729600[0;39m 生成今日电子书快照开始
2021-12-20 10:43:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964062712729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964062712729600[0;39m ==> Parameters: 
2021-12-20 10:43:30.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964062712729600[0;39m <==    Updates: 0
2021-12-20 10:43:30.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127964062712729600[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 10:43:35.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127964083713609728[0;39m 生成今日电子书快照开始
2021-12-20 10:43:35.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964083713609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:35.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964083713609728[0;39m ==> Parameters: 
2021-12-20 10:43:35.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964083713609728[0;39m <==    Updates: 0
2021-12-20 10:43:35.271 INFO  com.job.EbookSnapshotJob                          :35   [32m127964083713609728[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 10:43:35.271 INFO  com.job.DocJob                                    :32   [32m127964084787351552[0;39m 更新电子书下的文档数据开始
2021-12-20 10:43:35.271 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127964084787351552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:43:35.271 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127964084787351552[0;39m ==> Parameters: 
2021-12-20 10:43:35.439 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127964084787351552[0;39m <==    Updates: 3
2021-12-20 10:43:35.440 INFO  com.job.DocJob                                    :35   [32m127964084787351552[0;39m 更新电子书下的文档数据结束，耗时：169毫秒
2021-12-20 10:43:36.369 INFO  com.aspect.LogAspect                              :54   [32m127964089392697344[0;39m ------------- 开始 -------------
2021-12-20 10:43:36.369 INFO  com.aspect.LogAspect                              :55   [32m127964089392697344[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 10:43:36.370 INFO  com.aspect.LogAspect                              :56   [32m127964089392697344[0;39m 类名方法: com.controller.UserController.login
2021-12-20 10:43:36.370 INFO  com.aspect.LogAspect                              :57   [32m127964089392697344[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:36.371 INFO  com.aspect.LogAspect                              :80   [32m127964089392697344[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 10:43:36.463 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127964089392697344[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 10:43:36.464 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127964089392697344[0;39m ==> Parameters: test123(String)
2021-12-20 10:43:36.535 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127964089392697344[0;39m <==    Columns: id, login_name, name, password
2021-12-20 10:43:36.537 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127964089392697344[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 10:43:36.538 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127964089392697344[0;39m <==      Total: 1
2021-12-20 10:43:36.551 INFO  com.controller.UserController                     :77   [32m127964089392697344[0;39m 生成单点登录token:127964090156060672,并放入redis中
2021-12-20 10:43:37.905 INFO  com.aspect.LogAspect                              :92   [32m127964089392697344[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127964090156060672"},"success":true}
2021-12-20 10:43:37.905 INFO  com.aspect.LogAspect                              :93   [32m127964089392697344[0;39m ------------- 结束 耗时：1536 ms -------------
2021-12-20 10:43:38.030 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：TMy9BsiUb5，session id：1！当前连接数：0
2021-12-20 10:43:38.828 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：cHignOzZM0，session id：2，当前连接数：1
2021-12-20 10:43:38.907 INFO  com.aspect.LogAspect                              :54   [32m127964100037840896[0;39m ------------- 开始 -------------
2021-12-20 10:43:38.907 INFO  com.aspect.LogAspect                              :55   [32m127964100037840896[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:43:38.908 INFO  com.aspect.LogAspect                              :56   [32m127964100037840896[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:43:38.908 INFO  com.aspect.LogAspect                              :57   [32m127964100037840896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:38.908 INFO  com.aspect.LogAspect                              :80   [32m127964100037840896[0;39m 请求参数: []
2021-12-20 10:43:38.909 INFO  com.aspect.LogAspect                              :54   [32m127964100046229504[0;39m ------------- 开始 -------------
2021-12-20 10:43:38.909 INFO  com.aspect.LogAspect                              :55   [32m127964100046229504[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:43:38.910 INFO  com.aspect.LogAspect                              :56   [32m127964100046229504[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:43:38.910 INFO  com.aspect.LogAspect                              :57   [32m127964100046229504[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:38.910 INFO  com.aspect.LogAspect                              :80   [32m127964100046229504[0;39m 请求参数: []
2021-12-20 10:43:38.912 INFO  com.aspect.LogAspect                              :54   [32m127964100058812416[0;39m ------------- 开始 -------------
2021-12-20 10:43:38.912 INFO  com.aspect.LogAspect                              :55   [32m127964100058812416[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:43:38.912 INFO  com.aspect.LogAspect                              :56   [32m127964100058812416[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:43:38.913 INFO  com.aspect.LogAspect                              :57   [32m127964100058812416[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:43:38.913 INFO  com.aspect.LogAspect                              :80   [32m127964100058812416[0;39m 请求参数: []
2021-12-20 10:43:38.984 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127964100046229504[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:43:38.986 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127964100046229504[0;39m ==> Parameters: 
2021-12-20 10:43:38.989 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127964100037840896[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:43:38.990 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127964100037840896[0;39m ==> Parameters: 
2021-12-20 10:43:38.990 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127964100058812416[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:43:38.992 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127964100058812416[0;39m ==> Parameters: 
2021-12-20 10:43:39.064 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127964100046229504[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:43:39.065 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127964100046229504[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:43:39.067 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127964100046229504[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:43:39.067 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127964100046229504[0;39m <==      Total: 2
2021-12-20 10:43:39.067 INFO  com.aspect.LogAspect                              :92   [32m127964100046229504[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:43:39.068 INFO  com.aspect.LogAspect                              :93   [32m127964100046229504[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-20 10:43:39.073 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127964100037840896[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:43:39.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:43:39.073 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127964100037840896[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:43:39.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:43:39.074 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:43:39.074 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127964100037840896[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:43:39.074 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:43:39.074 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:43:39.074 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127964100037840896[0;39m <==      Total: 2
2021-12-20 10:43:39.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:43:39.075 INFO  com.aspect.LogAspect                              :92   [32m127964100037840896[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:43:39.075 INFO  com.aspect.LogAspect                              :93   [32m127964100037840896[0;39m ------------- 结束 耗时：168 ms -------------
2021-12-20 10:43:39.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:43:39.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:43:39.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:43:39.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:43:39.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:43:39.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:43:39.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:43:39.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:43:39.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:43:39.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:43:39.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:43:39.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:43:39.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:43:39.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127964100058812416[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:43:39.081 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127964100058812416[0;39m <==      Total: 19
2021-12-20 10:43:39.083 INFO  com.aspect.LogAspect                              :92   [32m127964100058812416[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:43:39.083 INFO  com.aspect.LogAspect                              :93   [32m127964100058812416[0;39m ------------- 结束 耗时：171 ms -------------
2021-12-20 10:43:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127964104659963904[0;39m 生成今日电子书快照开始
2021-12-20 10:43:40.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964104659963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:40.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964104659963904[0;39m ==> Parameters: 
2021-12-20 10:43:40.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964104659963904[0;39m <==    Updates: 0
2021-12-20 10:43:40.277 INFO  com.job.EbookSnapshotJob                          :35   [32m127964104659963904[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-20 10:43:44.961 INFO  com.websocket.WebSocketServer                     :41   [32m127962832691138561[0;39m 连接关闭，token：cHignOzZM0，session id：2！当前连接数：0
2021-12-20 10:43:45.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127964125623095296[0;39m 生成今日电子书快照开始
2021-12-20 10:43:45.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964125623095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:43:45.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964125623095296[0;39m ==> Parameters: 
2021-12-20 10:43:45.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127964125623095296[0;39m <==    Updates: 0
2021-12-20 10:43:45.231 INFO  com.job.EbookSnapshotJob                          :35   [32m127964125623095296[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 10:47:52.717 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 10672 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 10:47:52.717 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 10:47:52.728 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 10:47:52.780 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 10:47:52.780 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 10:47:53.976 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 10:47:53.976 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 10:47:54.415 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 437 ms. Found 0 Redis repository interfaces.
2021-12-20 10:47:54.994 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 10:47:55.001 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 10:47:55.001 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 10:47:55.001 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 10:47:55.047 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 10:47:55.047 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2267 ms
2021-12-20 10:47:56.319 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 10:47:56.351 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 10:47:56.366 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 10:47:56.382 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 4.393 seconds (JVM running for 5.469)
2021-12-20 10:48:00.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127965195183198208[0;39m 生成今日电子书快照开始
2021-12-20 10:48:00.025 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127965195183198208[0;39m HikariPool-1 - Starting...
2021-12-20 10:48:00.827 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127965195183198208[0;39m HikariPool-1 - Start completed.
2021-12-20 10:48:00.842 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965195183198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:00.865 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965195183198208[0;39m ==> Parameters: 
2021-12-20 10:48:01.012 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965195183198208[0;39m <==    Updates: 0
2021-12-20 10:48:01.012 INFO  com.job.EbookSnapshotJob                          :35   [32m127965195183198208[0;39m 生成今日电子书快照结束，耗时：1002毫秒
2021-12-20 10:48:05.014 INFO  com.job.DocJob                                    :32   [32m127965216171495424[0;39m 更新电子书下的文档数据开始
2021-12-20 10:48:05.107 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127965216171495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:48:05.107 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127965216171495424[0;39m ==> Parameters: 
2021-12-20 10:48:05.283 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127965216171495424[0;39m <==    Updates: 3
2021-12-20 10:48:05.283 INFO  com.job.DocJob                                    :35   [32m127965216171495424[0;39m 更新电子书下的文档数据结束，耗时：269毫秒
2021-12-20 10:48:05.283 INFO  com.job.EbookSnapshotJob                          :32   [32m127965217299763200[0;39m 生成今日电子书快照开始
2021-12-20 10:48:05.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965217299763200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:05.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965217299763200[0;39m ==> Parameters: 
2021-12-20 10:48:05.436 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965217299763200[0;39m <==    Updates: 0
2021-12-20 10:48:05.436 INFO  com.job.EbookSnapshotJob                          :35   [32m127965217299763200[0;39m 生成今日电子书快照结束，耗时：153毫秒
2021-12-20 10:48:10.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127965237168181248[0;39m 生成今日电子书快照开始
2021-12-20 10:48:10.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965237168181248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:10.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965237168181248[0;39m ==> Parameters: 
2021-12-20 10:48:10.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965237168181248[0;39m <==    Updates: 0
2021-12-20 10:48:10.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127965237168181248[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:48:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127965258072592384[0;39m 生成今日电子书快照开始
2021-12-20 10:48:15.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965258072592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:15.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965258072592384[0;39m ==> Parameters: 
2021-12-20 10:48:15.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965258072592384[0;39m <==    Updates: 0
2021-12-20 10:48:15.349 INFO  com.job.EbookSnapshotJob                          :35   [32m127965258072592384[0;39m 生成今日电子书快照结束，耗时：345毫秒
2021-12-20 10:48:20.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127965279044112384[0;39m 生成今日电子书快照开始
2021-12-20 10:48:20.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965279044112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:20.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965279044112384[0;39m ==> Parameters: 
2021-12-20 10:48:20.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965279044112384[0;39m <==    Updates: 0
2021-12-20 10:48:20.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127965279044112384[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:48:21.809 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 10:48:21.809 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 10:48:21.810 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 10:48:21.852 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：jdnILgaOP7，session id：0，当前连接数：1
2021-12-20 10:48:22.073 INFO  com.aspect.LogAspect                              :54   [32m127965287717933057[0;39m ------------- 开始 -------------
2021-12-20 10:48:22.073 INFO  com.aspect.LogAspect                              :54   [32m127965287717933058[0;39m ------------- 开始 -------------
2021-12-20 10:48:22.073 INFO  com.aspect.LogAspect                              :54   [32m127965287717933056[0;39m ------------- 开始 -------------
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :55   [32m127965287717933056[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :55   [32m127965287717933057[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :55   [32m127965287717933058[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :56   [32m127965287717933056[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :56   [32m127965287717933058[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :56   [32m127965287717933057[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :57   [32m127965287717933058[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :57   [32m127965287717933057[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:22.075 INFO  com.aspect.LogAspect                              :57   [32m127965287717933056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:22.111 INFO  com.aspect.LogAspect                              :80   [32m127965287717933057[0;39m 请求参数: []
2021-12-20 10:48:22.111 INFO  com.aspect.LogAspect                              :80   [32m127965287717933056[0;39m 请求参数: []
2021-12-20 10:48:22.119 INFO  com.aspect.LogAspect                              :80   [32m127965287717933058[0;39m 请求参数: []
2021-12-20 10:48:22.203 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127965287717933058[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:48:22.203 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127965287717933057[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:48:22.205 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127965287717933058[0;39m ==> Parameters: 
2021-12-20 10:48:22.205 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127965287717933057[0;39m ==> Parameters: 
2021-12-20 10:48:22.231 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127965287717933056[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:48:22.232 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127965287717933056[0;39m ==> Parameters: 
2021-12-20 10:48:22.354 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:48:22.354 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127965287717933058[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:48:22.354 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127965287717933057[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:48:22.355 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:48:22.356 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127965287717933057[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:48:22.356 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127965287717933058[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:48:22.357 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:48:22.358 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:48:22.359 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127965287717933058[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:48:22.359 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:48:22.359 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127965287717933057[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:48:22.360 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:48:22.360 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127965287717933057[0;39m <==      Total: 2
2021-12-20 10:48:22.360 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127965287717933058[0;39m <==      Total: 2
2021-12-20 10:48:22.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:48:22.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:48:22.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:48:22.365 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:48:22.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:48:22.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:48:22.368 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:48:22.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:48:22.370 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:48:22.371 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:48:22.372 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:48:22.374 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:48:22.375 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:48:22.375 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965287717933056[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:48:22.376 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127965287717933056[0;39m <==      Total: 19
2021-12-20 10:48:22.390 INFO  com.aspect.LogAspect                              :92   [32m127965287717933056[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:48:22.391 INFO  com.aspect.LogAspect                              :93   [32m127965287717933056[0;39m ------------- 结束 耗时：319 ms -------------
2021-12-20 10:48:22.391 INFO  com.aspect.LogAspect                              :92   [32m127965287717933058[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:48:22.391 INFO  com.aspect.LogAspect                              :92   [32m127965287717933057[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:48:22.391 INFO  com.aspect.LogAspect                              :93   [32m127965287717933058[0;39m ------------- 结束 耗时：319 ms -------------
2021-12-20 10:48:22.391 INFO  com.aspect.LogAspect                              :93   [32m127965287717933057[0;39m ------------- 结束 耗时：319 ms -------------
2021-12-20 10:48:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127965300049186816[0;39m 生成今日电子书快照开始
2021-12-20 10:48:25.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965300049186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:25.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965300049186816[0;39m ==> Parameters: 
2021-12-20 10:48:25.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965300049186816[0;39m <==    Updates: 0
2021-12-20 10:48:25.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127965300049186816[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 10:48:26.595 INFO  com.aspect.LogAspect                              :54   [32m127965306688770048[0;39m ------------- 开始 -------------
2021-12-20 10:48:26.595 INFO  com.aspect.LogAspect                              :55   [32m127965306688770048[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 10:48:26.595 INFO  com.aspect.LogAspect                              :56   [32m127965306688770048[0;39m 类名方法: com.controller.UserController.login
2021-12-20 10:48:26.596 INFO  com.aspect.LogAspect                              :57   [32m127965306688770048[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:26.597 INFO  com.aspect.LogAspect                              :80   [32m127965306688770048[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 10:48:26.705 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127965306688770048[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 10:48:26.706 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127965306688770048[0;39m ==> Parameters: test123(String)
2021-12-20 10:48:26.783 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965306688770048[0;39m <==    Columns: id, login_name, name, password
2021-12-20 10:48:26.783 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965306688770048[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 10:48:26.784 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127965306688770048[0;39m <==      Total: 1
2021-12-20 10:48:26.790 INFO  com.controller.UserController                     :77   [32m127965306688770048[0;39m 生成单点登录token:127965307506659328,并放入redis中
2021-12-20 10:48:27.340 INFO  com.aspect.LogAspect                              :92   [32m127965306688770048[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127965307506659328"},"success":true}
2021-12-20 10:48:27.341 INFO  com.aspect.LogAspect                              :93   [32m127965306688770048[0;39m ------------- 结束 耗时：746 ms -------------
2021-12-20 10:48:27.708 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：jdnILgaOP7，session id：0！当前连接数：0
2021-12-20 10:48:28.495 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：ZuZcCQeKvX，session id：1，当前连接数：1
2021-12-20 10:48:28.576 INFO  com.aspect.LogAspect                              :54   [32m127965314997686272[0;39m ------------- 开始 -------------
2021-12-20 10:48:28.576 INFO  com.aspect.LogAspect                              :55   [32m127965314997686272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:48:28.576 INFO  com.aspect.LogAspect                              :56   [32m127965314997686272[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:48:28.576 INFO  com.aspect.LogAspect                              :57   [32m127965314997686272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:28.577 INFO  com.aspect.LogAspect                              :54   [32m127965315001880576[0;39m ------------- 开始 -------------
2021-12-20 10:48:28.577 INFO  com.aspect.LogAspect                              :80   [32m127965314997686272[0;39m 请求参数: []
2021-12-20 10:48:28.577 INFO  com.aspect.LogAspect                              :55   [32m127965315001880576[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:48:28.577 INFO  com.aspect.LogAspect                              :56   [32m127965315001880576[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:48:28.577 INFO  com.aspect.LogAspect                              :57   [32m127965315001880576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:28.578 INFO  com.aspect.LogAspect                              :80   [32m127965315001880576[0;39m 请求参数: []
2021-12-20 10:48:28.580 INFO  com.aspect.LogAspect                              :54   [32m127965315014463488[0;39m ------------- 开始 -------------
2021-12-20 10:48:28.581 INFO  com.aspect.LogAspect                              :55   [32m127965315014463488[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:48:28.581 INFO  com.aspect.LogAspect                              :56   [32m127965315014463488[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:48:28.581 INFO  com.aspect.LogAspect                              :57   [32m127965315014463488[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:28.582 INFO  com.aspect.LogAspect                              :80   [32m127965315014463488[0;39m 请求参数: []
2021-12-20 10:48:28.660 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127965314997686272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:48:28.661 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127965314997686272[0;39m ==> Parameters: 
2021-12-20 10:48:28.662 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127965315001880576[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:48:28.664 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127965315001880576[0;39m ==> Parameters: 
2021-12-20 10:48:28.666 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127965315014463488[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:48:28.667 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127965315014463488[0;39m ==> Parameters: 
2021-12-20 10:48:28.741 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127965314997686272[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:48:28.741 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127965314997686272[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:48:28.741 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127965314997686272[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:48:28.750 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127965314997686272[0;39m <==      Total: 2
2021-12-20 10:48:28.752 INFO  com.aspect.LogAspect                              :92   [32m127965314997686272[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:48:28.754 INFO  com.aspect.LogAspect                              :93   [32m127965314997686272[0;39m ------------- 结束 耗时：178 ms -------------
2021-12-20 10:48:28.757 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127965315001880576[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:48:28.757 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:48:28.758 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127965315001880576[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:48:28.758 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:48:28.760 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:48:28.760 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127965315001880576[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:48:28.760 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127965315001880576[0;39m <==      Total: 2
2021-12-20 10:48:28.760 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:48:28.765 INFO  com.aspect.LogAspect                              :92   [32m127965315001880576[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:48:28.765 INFO  com.aspect.LogAspect                              :93   [32m127965315001880576[0;39m ------------- 结束 耗时：188 ms -------------
2021-12-20 10:48:28.765 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:48:28.767 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:48:28.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:48:28.769 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:48:28.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:48:28.771 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:48:28.772 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:48:28.773 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:48:28.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127965315014463488[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:48:28.774 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127965315014463488[0;39m <==      Total: 19
2021-12-20 10:48:28.782 INFO  com.aspect.LogAspect                              :92   [32m127965315014463488[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:48:28.782 INFO  com.aspect.LogAspect                              :93   [32m127965315014463488[0;39m ------------- 结束 耗时：202 ms -------------
2021-12-20 10:48:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127965321016512512[0;39m 生成今日电子书快照开始
2021-12-20 10:48:30.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965321016512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:30.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965321016512512[0;39m ==> Parameters: 
2021-12-20 10:48:30.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965321016512512[0;39m <==    Updates: 0
2021-12-20 10:48:30.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127965321016512512[0;39m 生成今日电子书快照结束，耗时：249毫秒
2021-12-20 10:48:31.949 INFO  com.interceptor.LoginInterceptor                  :29   [32m127965287717933056[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 10:48:31.949 INFO  com.interceptor.LoginInterceptor                  :65   [32m127965287717933056[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-20 10:48:31.956 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 10:48:31.956 INFO  com.interceptor.LoginInterceptor                  :40   [32m                  [0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-20 10:48:31.957 INFO  com.interceptor.LoginInterceptor                  :44   [32m                  [0;39m 登录校验开始，token：127965307506659328
2021-12-20 10:48:32.039 INFO  com.interceptor.LoginInterceptor                  :56   [32m                  [0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127965307506659328"}
2021-12-20 10:48:32.072 INFO  com.aspect.LogAspect                              :54   [32m127965329660973056[0;39m ------------- 开始 -------------
2021-12-20 10:48:32.073 INFO  com.aspect.LogAspect                              :55   [32m127965329660973056[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 10:48:32.073 INFO  com.aspect.LogAspect                              :56   [32m127965329660973056[0;39m 类名方法: com.controller.UserController.list
2021-12-20 10:48:32.073 INFO  com.aspect.LogAspect                              :57   [32m127965329660973056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:48:32.074 INFO  com.aspect.LogAspect                              :80   [32m127965329660973056[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 10:48:32.238 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127965329660973056[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 10:48:32.239 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127965329660973056[0;39m ==> Parameters: 
2021-12-20 10:48:32.308 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127965329660973056[0;39m <==    Columns: count(0)
2021-12-20 10:48:32.308 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127965329660973056[0;39m <==        Row: 7
2021-12-20 10:48:32.309 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127965329660973056[0;39m <==      Total: 1
2021-12-20 10:48:32.313 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127965329660973056[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 10:48:32.315 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127965329660973056[0;39m ==> Parameters: 10(Integer)
2021-12-20 10:48:32.401 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==    Columns: id, login_name, name, password
2021-12-20 10:48:32.402 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 10:48:32.403 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 10:48:32.403 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 10:48:32.403 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 10:48:32.404 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 10:48:32.404 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 10:48:32.405 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127965329660973056[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 10:48:32.405 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127965329660973056[0;39m <==      Total: 7
2021-12-20 10:48:32.407 INFO  com.servicess.UserService                         :52   [32m127965329660973056[0;39m 总行数：7
2021-12-20 10:48:32.408 INFO  com.servicess.UserService                         :53   [32m127965329660973056[0;39m 总页数：1
2021-12-20 10:48:32.419 INFO  com.aspect.LogAspect                              :92   [32m127965329660973056[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-20 10:48:32.420 INFO  com.aspect.LogAspect                              :93   [32m127965329660973056[0;39m ------------- 结束 耗时：348 ms -------------
2021-12-20 10:48:32.424 INFO  com.interceptor.LoginInterceptor                  :65   [32m127965329660973056[0;39m ------------- LoginInterceptor 结束 耗时：468 ms -------------
2021-12-20 10:48:35.016 INFO  com.job.DocJob                                    :32   [32m127965342009004032[0;39m 更新电子书下的文档数据开始
2021-12-20 10:48:35.115 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127965342009004032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:48:35.116 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127965342009004032[0;39m ==> Parameters: 
2021-12-20 10:48:35.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127965342009004032[0;39m <==    Updates: 3
2021-12-20 10:48:35.270 INFO  com.job.DocJob                                    :35   [32m127965342009004032[0;39m 更新电子书下的文档数据结束，耗时：253毫秒
2021-12-20 10:48:35.271 INFO  com.job.EbookSnapshotJob                          :32   [32m127965343078551552[0;39m 生成今日电子书快照开始
2021-12-20 10:48:35.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965343078551552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:35.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965343078551552[0;39m ==> Parameters: 
2021-12-20 10:48:35.454 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965343078551552[0;39m <==    Updates: 0
2021-12-20 10:48:35.455 INFO  com.job.EbookSnapshotJob                          :35   [32m127965343078551552[0;39m 生成今日电子书快照结束，耗时：183毫秒
2021-12-20 10:48:40.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127965362917609472[0;39m 生成今日电子书快照开始
2021-12-20 10:48:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965362917609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965362917609472[0;39m ==> Parameters: 
2021-12-20 10:48:40.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965362917609472[0;39m <==    Updates: 0
2021-12-20 10:48:40.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127965362917609472[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 10:48:45.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127965383910100992[0;39m 生成今日电子书快照开始
2021-12-20 10:48:45.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965383910100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:45.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965383910100992[0;39m ==> Parameters: 
2021-12-20 10:48:45.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965383910100992[0;39m <==    Updates: 0
2021-12-20 10:48:45.228 INFO  com.job.EbookSnapshotJob                          :35   [32m127965383910100992[0;39m 生成今日电子书快照结束，耗时：221毫秒
2021-12-20 10:48:47.166 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：ZuZcCQeKvX，session id：1！当前连接数：0
2021-12-20 10:48:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127965404906786816[0;39m 生成今日电子书快照开始
2021-12-20 10:48:50.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965404906786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:48:50.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965404906786816[0;39m ==> Parameters: 
2021-12-20 10:48:50.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127965404906786816[0;39m <==    Updates: 0
2021-12-20 10:48:50.213 INFO  com.job.EbookSnapshotJob                          :35   [32m127965404906786816[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 10:54:48.858 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 10:54:48.858 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 3224 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 10:54:48.864 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 10:54:48.917 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 10:54:48.925 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 10:54:50.752 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 10:54:50.752 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 10:54:51.572 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 796 ms. Found 0 Redis repository interfaces.
2021-12-20 10:54:52.320 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 10:54:52.336 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 10:54:52.336 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 10:54:52.336 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 10:54:52.405 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 10:54:52.405 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3480 ms
2021-12-20 10:54:53.993 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 10:54:54.040 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 10:54:54.062 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 10:54:54.077 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.998 seconds (JVM running for 7.002)
2021-12-20 10:54:55.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127966935819358208[0;39m 生成今日电子书快照开始
2021-12-20 10:54:55.026 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127966935819358208[0;39m HikariPool-1 - Starting...
2021-12-20 10:54:55.996 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127966935819358208[0;39m HikariPool-1 - Start completed.
2021-12-20 10:54:55.996 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966935819358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:54:56.028 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966935819358208[0;39m ==> Parameters: 
2021-12-20 10:54:56.197 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966935819358208[0;39m <==    Updates: 0
2021-12-20 10:54:56.197 INFO  com.job.EbookSnapshotJob                          :35   [32m127966935819358208[0;39m 生成今日电子书快照结束，耗时：1187毫秒
2021-12-20 10:55:00.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127966956778295296[0;39m 生成今日电子书快照开始
2021-12-20 10:55:00.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966956778295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:00.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966956778295296[0;39m ==> Parameters: 
2021-12-20 10:55:00.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966956778295296[0;39m <==    Updates: 0
2021-12-20 10:55:00.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127966956778295296[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 10:55:05.015 INFO  com.job.DocJob                                    :32   [32m127966977783369728[0;39m 更新电子书下的文档数据开始
2021-12-20 10:55:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127966977783369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:55:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127966977783369728[0;39m ==> Parameters: 
2021-12-20 10:55:05.246 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127966977783369728[0;39m <==    Updates: 3
2021-12-20 10:55:05.246 INFO  com.job.DocJob                                    :35   [32m127966977783369728[0;39m 更新电子书下的文档数据结束，耗时：231毫秒
2021-12-20 10:55:05.246 INFO  com.job.EbookSnapshotJob                          :32   [32m127966978752253952[0;39m 生成今日电子书快照开始
2021-12-20 10:55:05.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966978752253952[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:05.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966978752253952[0;39m ==> Parameters: 
2021-12-20 10:55:05.415 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966978752253952[0;39m <==    Updates: 0
2021-12-20 10:55:05.415 INFO  com.job.EbookSnapshotJob                          :35   [32m127966978752253952[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 10:55:10.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127966998796832768[0;39m 生成今日电子书快照开始
2021-12-20 10:55:10.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966998796832768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:10.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966998796832768[0;39m ==> Parameters: 
2021-12-20 10:55:10.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127966998796832768[0;39m <==    Updates: 0
2021-12-20 10:55:10.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127966998796832768[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:55:15.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127967019730604032[0;39m 生成今日电子书快照开始
2021-12-20 10:55:15.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967019730604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:15.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967019730604032[0;39m ==> Parameters: 
2021-12-20 10:55:15.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967019730604032[0;39m <==    Updates: 0
2021-12-20 10:55:15.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127967019730604032[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 10:55:16.311 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 10:55:16.311 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 10:55:16.312 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 10:55:16.350 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：B6eUViNVhi，session id：0，当前连接数：1
2021-12-20 10:55:16.556 INFO  com.aspect.LogAspect                              :54   [32m127967026185637889[0;39m ------------- 开始 -------------
2021-12-20 10:55:16.556 INFO  com.aspect.LogAspect                              :54   [32m127967026185637890[0;39m ------------- 开始 -------------
2021-12-20 10:55:16.556 INFO  com.aspect.LogAspect                              :54   [32m127967026185637888[0;39m ------------- 开始 -------------
2021-12-20 10:55:16.558 INFO  com.aspect.LogAspect                              :55   [32m127967026185637889[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:55:16.558 INFO  com.aspect.LogAspect                              :55   [32m127967026185637890[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:55:16.559 INFO  com.aspect.LogAspect                              :56   [32m127967026185637889[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:55:16.558 INFO  com.aspect.LogAspect                              :55   [32m127967026185637888[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:55:16.559 INFO  com.aspect.LogAspect                              :57   [32m127967026185637889[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:55:16.559 INFO  com.aspect.LogAspect                              :56   [32m127967026185637890[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:55:16.560 INFO  com.aspect.LogAspect                              :57   [32m127967026185637890[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:55:16.559 INFO  com.aspect.LogAspect                              :56   [32m127967026185637888[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:55:16.562 INFO  com.aspect.LogAspect                              :57   [32m127967026185637888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:55:16.600 INFO  com.aspect.LogAspect                              :80   [32m127967026185637890[0;39m 请求参数: []
2021-12-20 10:55:16.600 INFO  com.aspect.LogAspect                              :80   [32m127967026185637888[0;39m 请求参数: []
2021-12-20 10:55:16.607 INFO  com.aspect.LogAspect                              :80   [32m127967026185637889[0;39m 请求参数: []
2021-12-20 10:55:16.671 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127967026185637890[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:55:16.673 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127967026185637890[0;39m ==> Parameters: 
2021-12-20 10:55:16.691 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127967026185637889[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:55:16.693 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127967026185637889[0;39m ==> Parameters: 
2021-12-20 10:55:16.696 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127967026185637888[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:55:16.697 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127967026185637888[0;39m ==> Parameters: 
2021-12-20 10:55:16.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:55:16.804 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127967026185637889[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:55:16.804 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127967026185637890[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:55:16.805 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:55:16.807 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127967026185637889[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:55:16.807 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127967026185637890[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:55:16.811 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:55:16.813 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:55:16.814 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:55:16.815 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127967026185637889[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:55:16.815 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127967026185637890[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:55:16.816 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:55:16.816 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127967026185637889[0;39m <==      Total: 2
2021-12-20 10:55:16.817 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127967026185637890[0;39m <==      Total: 2
2021-12-20 10:55:16.817 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:55:16.818 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:55:16.820 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:55:16.821 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:55:16.823 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:55:16.824 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:55:16.825 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:55:16.826 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:55:16.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:55:16.828 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:55:16.829 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:55:16.832 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:55:16.832 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:55:16.833 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967026185637888[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:55:16.833 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127967026185637888[0;39m <==      Total: 19
2021-12-20 10:55:16.850 INFO  com.aspect.LogAspect                              :92   [32m127967026185637888[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:55:16.851 INFO  com.aspect.LogAspect                              :92   [32m127967026185637889[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:55:16.851 INFO  com.aspect.LogAspect                              :92   [32m127967026185637890[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:55:16.851 INFO  com.aspect.LogAspect                              :93   [32m127967026185637888[0;39m ------------- 结束 耗时：296 ms -------------
2021-12-20 10:55:16.851 INFO  com.aspect.LogAspect                              :93   [32m127967026185637889[0;39m ------------- 结束 耗时：296 ms -------------
2021-12-20 10:55:16.851 INFO  com.aspect.LogAspect                              :93   [32m127967026185637890[0;39m ------------- 结束 耗时：296 ms -------------
2021-12-20 10:55:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127967040697929728[0;39m 生成今日电子书快照开始
2021-12-20 10:55:20.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967040697929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:20.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967040697929728[0;39m ==> Parameters: 
2021-12-20 10:55:20.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967040697929728[0;39m <==    Updates: 0
2021-12-20 10:55:20.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127967040697929728[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 10:55:25.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127967061644283904[0;39m 生成今日电子书快照开始
2021-12-20 10:55:25.345 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967061644283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:25.345 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967061644283904[0;39m ==> Parameters: 
2021-12-20 10:55:25.504 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967061644283904[0;39m <==    Updates: 0
2021-12-20 10:55:25.505 INFO  com.job.EbookSnapshotJob                          :35   [32m127967061644283904[0;39m 生成今日电子书快照结束，耗时：496毫秒
2021-12-20 10:55:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127967082619998208[0;39m 生成今日电子书快照开始
2021-12-20 10:55:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967082619998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967082619998208[0;39m ==> Parameters: 
2021-12-20 10:55:30.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967082619998208[0;39m <==    Updates: 0
2021-12-20 10:55:30.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127967082619998208[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 10:55:35.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127967103646044160[0;39m 生成今日电子书快照开始
2021-12-20 10:55:35.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967103646044160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:35.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967103646044160[0;39m ==> Parameters: 
2021-12-20 10:55:35.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967103646044160[0;39m <==    Updates: 0
2021-12-20 10:55:35.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127967103646044160[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 10:55:35.254 INFO  com.job.DocJob                                    :32   [32m127967104614928384[0;39m 更新电子书下的文档数据开始
2021-12-20 10:55:35.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967104614928384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:55:35.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967104614928384[0;39m ==> Parameters: 
2021-12-20 10:55:35.424 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967104614928384[0;39m <==    Updates: 3
2021-12-20 10:55:35.424 INFO  com.job.DocJob                                    :35   [32m127967104614928384[0;39m 更新电子书下的文档数据结束，耗时：170毫秒
2021-12-20 10:55:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127967124575621120[0;39m 生成今日电子书快照开始
2021-12-20 10:55:40.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967124575621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:40.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967124575621120[0;39m ==> Parameters: 
2021-12-20 10:55:40.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967124575621120[0;39m <==    Updates: 0
2021-12-20 10:55:40.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127967124575621120[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 10:55:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127967145542946816[0;39m 生成今日电子书快照开始
2021-12-20 10:55:45.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967145542946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:45.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967145542946816[0;39m ==> Parameters: 
2021-12-20 10:55:45.335 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967145542946816[0;39m <==    Updates: 0
2021-12-20 10:55:45.335 INFO  com.job.EbookSnapshotJob                          :35   [32m127967145542946816[0;39m 生成今日电子书快照结束，耗时：323毫秒
2021-12-20 10:55:49.232 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 10:55:49.234 INFO  com.interceptor.LoginInterceptor                  :65   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-12-20 10:55:49.240 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 10:55:49.240 INFO  com.interceptor.LoginInterceptor                  :40   [32m                  [0;39m 接口登录拦截：，path：http://localhost:8081/user/save
2021-12-20 10:55:49.240 INFO  com.interceptor.LoginInterceptor                  :44   [32m                  [0;39m 登录校验开始，token：null
2021-12-20 10:55:49.240 INFO  com.interceptor.LoginInterceptor                  :46   [32m                  [0;39m token为空，请求被拦截
2021-12-20 10:55:50.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127967166522855424[0;39m 生成今日电子书快照开始
2021-12-20 10:55:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967166522855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:50.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967166522855424[0;39m ==> Parameters: 
2021-12-20 10:55:50.342 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967166522855424[0;39m <==    Updates: 0
2021-12-20 10:55:50.343 INFO  com.job.EbookSnapshotJob                          :35   [32m127967166522855424[0;39m 生成今日电子书快照结束，耗时：328毫秒
2021-12-20 10:55:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127967187460820992[0;39m 生成今日电子书快照开始
2021-12-20 10:55:55.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967187460820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:55:55.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967187460820992[0;39m ==> Parameters: 
2021-12-20 10:55:55.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967187460820992[0;39m <==    Updates: 0
2021-12-20 10:55:55.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127967187460820992[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 10:56:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127967208474284032[0;39m 生成今日电子书快照开始
2021-12-20 10:56:00.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967208474284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:00.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967208474284032[0;39m ==> Parameters: 
2021-12-20 10:56:00.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967208474284032[0;39m <==    Updates: 0
2021-12-20 10:56:00.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127967208474284032[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 10:56:05.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127967229395472384[0;39m 生成今日电子书快照开始
2021-12-20 10:56:05.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967229395472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:05.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967229395472384[0;39m ==> Parameters: 
2021-12-20 10:56:05.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967229395472384[0;39m <==    Updates: 0
2021-12-20 10:56:05.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127967229395472384[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:56:05.251 INFO  com.job.DocJob                                    :32   [32m127967230431465472[0;39m 更新电子书下的文档数据开始
2021-12-20 10:56:05.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967230431465472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:56:05.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967230431465472[0;39m ==> Parameters: 
2021-12-20 10:56:05.406 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967230431465472[0;39m <==    Updates: 3
2021-12-20 10:56:05.406 INFO  com.job.DocJob                                    :35   [32m127967230431465472[0;39m 更新电子书下的文档数据结束，耗时：155毫秒
2021-12-20 10:56:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127967250417324032[0;39m 生成今日电子书快照开始
2021-12-20 10:56:10.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967250417324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:10.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967250417324032[0;39m ==> Parameters: 
2021-12-20 10:56:10.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967250417324032[0;39m <==    Updates: 0
2021-12-20 10:56:10.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127967250417324032[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 10:56:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127967271363678208[0;39m 生成今日电子书快照开始
2021-12-20 10:56:15.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967271363678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:15.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967271363678208[0;39m ==> Parameters: 
2021-12-20 10:56:15.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967271363678208[0;39m <==    Updates: 0
2021-12-20 10:56:15.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127967271363678208[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 10:56:20.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127967292372946944[0;39m 生成今日电子书快照开始
2021-12-20 10:56:20.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967292372946944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:20.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967292372946944[0;39m ==> Parameters: 
2021-12-20 10:56:20.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967292372946944[0;39m <==    Updates: 0
2021-12-20 10:56:20.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127967292372946944[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 10:56:24.956 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：YBjnEYmA7J，session id：1，当前连接数：2
2021-12-20 10:56:25.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127967313369632768[0;39m 生成今日电子书快照开始
2021-12-20 10:56:25.093 INFO  com.aspect.LogAspect                              :54   [32m127967313654845440[0;39m ------------- 开始 -------------
2021-12-20 10:56:25.094 INFO  com.aspect.LogAspect                              :55   [32m127967313654845440[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 10:56:25.094 INFO  com.aspect.LogAspect                              :56   [32m127967313654845440[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 10:56:25.095 INFO  com.aspect.LogAspect                              :57   [32m127967313654845440[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:56:25.095 INFO  com.aspect.LogAspect                              :80   [32m127967313654845440[0;39m 请求参数: []
2021-12-20 10:56:25.099 INFO  com.aspect.LogAspect                              :54   [32m127967313680011265[0;39m ------------- 开始 -------------
2021-12-20 10:56:25.099 INFO  com.aspect.LogAspect                              :54   [32m127967313680011264[0;39m ------------- 开始 -------------
2021-12-20 10:56:25.099 INFO  com.aspect.LogAspect                              :55   [32m127967313680011265[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :55   [32m127967313680011264[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :56   [32m127967313680011265[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :56   [32m127967313680011264[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :57   [32m127967313680011265[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :57   [32m127967313680011264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :80   [32m127967313680011265[0;39m 请求参数: []
2021-12-20 10:56:25.100 INFO  com.aspect.LogAspect                              :80   [32m127967313680011264[0;39m 请求参数: []
2021-12-20 10:56:25.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967313369632768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:25.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967313369632768[0;39m ==> Parameters: 
2021-12-20 10:56:25.182 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127967313680011264[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:56:25.184 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127967313680011264[0;39m ==> Parameters: 
2021-12-20 10:56:25.186 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127967313654845440[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 10:56:25.187 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127967313654845440[0;39m ==> Parameters: 
2021-12-20 10:56:25.193 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127967313680011265[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 10:56:25.194 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127967313680011265[0;39m ==> Parameters: 
2021-12-20 10:56:25.284 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127967313680011264[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 10:56:25.284 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127967313654845440[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 10:56:25.284 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967313369632768[0;39m <==    Updates: 0
2021-12-20 10:56:25.285 INFO  com.job.EbookSnapshotJob                          :35   [32m127967313369632768[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 10:56:25.285 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127967313680011264[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 10:56:25.285 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127967313654845440[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 10:56:25.285 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==    Columns: id, parent, name, sort
2021-12-20 10:56:25.285 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 10:56:25.286 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127967313680011264[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 10:56:25.286 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127967313654845440[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 10:56:25.286 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 10:56:25.287 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 10:56:25.287 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127967313654845440[0;39m <==      Total: 2
2021-12-20 10:56:25.287 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127967313680011264[0;39m <==      Total: 2
2021-12-20 10:56:25.287 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 10:56:25.287 INFO  com.aspect.LogAspect                              :92   [32m127967313654845440[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 10:56:25.287 INFO  com.aspect.LogAspect                              :92   [32m127967313680011264[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 10:56:25.287 INFO  com.aspect.LogAspect                              :93   [32m127967313680011264[0;39m ------------- 结束 耗时：188 ms -------------
2021-12-20 10:56:25.287 INFO  com.aspect.LogAspect                              :93   [32m127967313654845440[0;39m ------------- 结束 耗时：194 ms -------------
2021-12-20 10:56:25.288 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 10:56:25.288 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 10:56:25.289 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 10:56:25.289 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 10:56:25.290 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 10:56:25.291 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 10:56:25.292 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 10:56:25.292 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 10:56:25.293 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 10:56:25.293 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 10:56:25.294 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 10:56:25.294 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 10:56:25.295 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 10:56:25.295 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 10:56:25.295 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127967313680011265[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 10:56:25.296 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127967313680011265[0;39m <==      Total: 19
2021-12-20 10:56:25.297 INFO  com.aspect.LogAspect                              :92   [32m127967313680011265[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 10:56:25.297 INFO  com.aspect.LogAspect                              :93   [32m127967313680011265[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-20 10:56:26.200 INFO  com.websocket.WebSocketServer                     :41   [32m127967026185637889[0;39m 连接关闭，token：B6eUViNVhi，session id：0！当前连接数：1
2021-12-20 10:56:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127967334282432512[0;39m 生成今日电子书快照开始
2021-12-20 10:56:30.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967334282432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:30.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967334282432512[0;39m ==> Parameters: 
2021-12-20 10:56:30.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967334282432512[0;39m <==    Updates: 0
2021-12-20 10:56:30.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127967334282432512[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 10:56:35.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127967355274924032[0;39m 生成今日电子书快照开始
2021-12-20 10:56:35.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967355274924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:35.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967355274924032[0;39m ==> Parameters: 
2021-12-20 10:56:35.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967355274924032[0;39m <==    Updates: 0
2021-12-20 10:56:35.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127967355274924032[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 10:56:35.254 INFO  com.job.DocJob                                    :32   [32m127967356273168384[0;39m 更新电子书下的文档数据开始
2021-12-20 10:56:35.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967356273168384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:56:35.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967356273168384[0;39m ==> Parameters: 
2021-12-20 10:56:35.470 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967356273168384[0;39m <==    Updates: 3
2021-12-20 10:56:35.470 INFO  com.job.DocJob                                    :35   [32m127967356273168384[0;39m 更新电子书下的文档数据结束，耗时：216毫秒
2021-12-20 10:56:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127967376242249728[0;39m 生成今日电子书快照开始
2021-12-20 10:56:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967376242249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967376242249728[0;39m ==> Parameters: 
2021-12-20 10:56:40.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967376242249728[0;39m <==    Updates: 0
2021-12-20 10:56:40.246 INFO  com.job.EbookSnapshotJob                          :35   [32m127967376242249728[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 10:56:45.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127967397264101376[0;39m 生成今日电子书快照开始
2021-12-20 10:56:45.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967397264101376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:45.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967397264101376[0;39m ==> Parameters: 
2021-12-20 10:56:45.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967397264101376[0;39m <==    Updates: 0
2021-12-20 10:56:45.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127967397264101376[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 10:56:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127967418168512512[0;39m 生成今日电子书快照开始
2021-12-20 10:56:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967418168512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967418168512512[0;39m ==> Parameters: 
2021-12-20 10:56:50.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967418168512512[0;39m <==    Updates: 0
2021-12-20 10:56:50.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127967418168512512[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 10:56:55.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127967439198752768[0;39m 生成今日电子书快照开始
2021-12-20 10:56:55.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967439198752768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:56:55.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967439198752768[0;39m ==> Parameters: 
2021-12-20 10:56:55.295 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967439198752768[0;39m <==    Updates: 0
2021-12-20 10:56:55.310 INFO  com.job.EbookSnapshotJob                          :35   [32m127967439198752768[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 10:57:00.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127967460107358208[0;39m 生成今日电子书快照开始
2021-12-20 10:57:00.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967460107358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:00.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967460107358208[0;39m ==> Parameters: 
2021-12-20 10:57:00.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967460107358208[0;39m <==    Updates: 0
2021-12-20 10:57:00.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127967460107358208[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 10:57:05.008 INFO  com.job.DocJob                                    :32   [32m127967481070489600[0;39m 更新电子书下的文档数据开始
2021-12-20 10:57:05.093 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967481070489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:57:05.093 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967481070489600[0;39m ==> Parameters: 
2021-12-20 10:57:05.256 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967481070489600[0;39m <==    Updates: 3
2021-12-20 10:57:05.256 INFO  com.job.DocJob                                    :35   [32m127967481070489600[0;39m 更新电子书下的文档数据结束，耗时：248毫秒
2021-12-20 10:57:05.256 INFO  com.job.EbookSnapshotJob                          :32   [32m127967482110676992[0;39m 生成今日电子书快照开始
2021-12-20 10:57:05.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967482110676992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:05.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967482110676992[0;39m ==> Parameters: 
2021-12-20 10:57:05.433 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967482110676992[0;39m <==    Updates: 0
2021-12-20 10:57:05.433 INFO  com.job.EbookSnapshotJob                          :35   [32m127967482110676992[0;39m 生成今日电子书快照结束，耗时：177毫秒
2021-12-20 10:57:10.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127967502104924160[0;39m 生成今日电子书快照开始
2021-12-20 10:57:10.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967502104924160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:10.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967502104924160[0;39m ==> Parameters: 
2021-12-20 10:57:10.308 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967502104924160[0;39m <==    Updates: 0
2021-12-20 10:57:10.308 INFO  com.job.EbookSnapshotJob                          :35   [32m127967502104924160[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 10:57:15.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127967523005140992[0;39m 生成今日电子书快照开始
2021-12-20 10:57:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967523005140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967523005140992[0;39m ==> Parameters: 
2021-12-20 10:57:15.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967523005140992[0;39m <==    Updates: 0
2021-12-20 10:57:15.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127967523005140992[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 10:57:20.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127967543972466688[0;39m 生成今日电子书快照开始
2021-12-20 10:57:20.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967543972466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:20.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967543972466688[0;39m ==> Parameters: 
2021-12-20 10:57:20.279 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967543972466688[0;39m <==    Updates: 0
2021-12-20 10:57:20.279 INFO  com.job.EbookSnapshotJob                          :35   [32m127967543972466688[0;39m 生成今日电子书快照结束，耗时：274毫秒
2021-12-20 10:57:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127967564964958208[0;39m 生成今日电子书快照开始
2021-12-20 10:57:25.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967564964958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:25.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967564964958208[0;39m ==> Parameters: 
2021-12-20 10:57:25.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967564964958208[0;39m <==    Updates: 0
2021-12-20 10:57:25.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127967564964958208[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 10:57:30.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127967585986809856[0;39m 生成今日电子书快照开始
2021-12-20 10:57:30.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967585986809856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:30.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967585986809856[0;39m ==> Parameters: 
2021-12-20 10:57:30.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967585986809856[0;39m <==    Updates: 0
2021-12-20 10:57:30.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127967585986809856[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 10:57:35.020 INFO  com.job.DocJob                                    :32   [32m127967606949941248[0;39m 更新电子书下的文档数据开始
2021-12-20 10:57:35.089 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967606949941248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:57:35.089 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967606949941248[0;39m ==> Parameters: 
2021-12-20 10:57:35.252 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967606949941248[0;39m <==    Updates: 3
2021-12-20 10:57:35.252 INFO  com.job.DocJob                                    :35   [32m127967606949941248[0;39m 更新电子书下的文档数据结束，耗时：232毫秒
2021-12-20 10:57:35.252 INFO  com.job.EbookSnapshotJob                          :32   [32m127967607923019776[0;39m 生成今日电子书快照开始
2021-12-20 10:57:35.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967607923019776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967607923019776[0;39m ==> Parameters: 
2021-12-20 10:57:35.421 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967607923019776[0;39m <==    Updates: 0
2021-12-20 10:57:35.437 INFO  com.job.EbookSnapshotJob                          :35   [32m127967607923019776[0;39m 生成今日电子书快照结束，耗时：185毫秒
2021-12-20 10:57:40.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127967627850158080[0;39m 生成今日电子书快照开始
2021-12-20 10:57:40.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967627850158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:40.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967627850158080[0;39m ==> Parameters: 
2021-12-20 10:57:40.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967627850158080[0;39m <==    Updates: 0
2021-12-20 10:57:40.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127967627850158080[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 10:57:45.032 INFO  com.job.EbookSnapshotJob                          :32   [32m127967648943312896[0;39m 生成今日电子书快照开始
2021-12-20 10:57:45.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967648943312896[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:45.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967648943312896[0;39m ==> Parameters: 
2021-12-20 10:57:45.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967648943312896[0;39m <==    Updates: 0
2021-12-20 10:57:45.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127967648943312896[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 10:57:50.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127967669784809472[0;39m 生成今日电子书快照开始
2021-12-20 10:57:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967669784809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:50.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967669784809472[0;39m ==> Parameters: 
2021-12-20 10:57:50.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967669784809472[0;39m <==    Updates: 0
2021-12-20 10:57:50.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127967669784809472[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 10:57:55.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127967690823438336[0;39m 生成今日电子书快照开始
2021-12-20 10:57:55.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967690823438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:57:55.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967690823438336[0;39m ==> Parameters: 
2021-12-20 10:57:55.280 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967690823438336[0;39m <==    Updates: 0
2021-12-20 10:57:55.280 INFO  com.job.EbookSnapshotJob                          :35   [32m127967690823438336[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 10:58:00.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127967711765598208[0;39m 生成今日电子书快照开始
2021-12-20 10:58:00.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967711765598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:00.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967711765598208[0;39m ==> Parameters: 
2021-12-20 10:58:00.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967711765598208[0;39m <==    Updates: 0
2021-12-20 10:58:00.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127967711765598208[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 10:58:05.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127967732774866944[0;39m 生成今日电子书快照开始
2021-12-20 10:58:05.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967732774866944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:05.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967732774866944[0;39m ==> Parameters: 
2021-12-20 10:58:05.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967732774866944[0;39m <==    Updates: 0
2021-12-20 10:58:05.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127967732774866944[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 10:58:05.236 INFO  com.job.DocJob                                    :32   [32m127967733685030912[0;39m 更新电子书下的文档数据开始
2021-12-20 10:58:05.236 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967733685030912[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:58:05.236 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967733685030912[0;39m ==> Parameters: 
2021-12-20 10:58:05.421 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967733685030912[0;39m <==    Updates: 3
2021-12-20 10:58:05.421 INFO  com.job.DocJob                                    :35   [32m127967733685030912[0;39m 更新电子书下的文档数据结束，耗时：185毫秒
2021-12-20 10:58:10.034 INFO  com.job.EbookSnapshotJob                          :32   [32m127967753809301504[0;39m 生成今日电子书快照开始
2021-12-20 10:58:10.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967753809301504[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:10.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967753809301504[0;39m ==> Parameters: 
2021-12-20 10:58:10.279 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967753809301504[0;39m <==    Updates: 0
2021-12-20 10:58:10.279 INFO  com.job.EbookSnapshotJob                          :35   [32m127967753809301504[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 10:58:15.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127967774734684160[0;39m 生成今日电子书快照开始
2021-12-20 10:58:15.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967774734684160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967774734684160[0;39m ==> Parameters: 
2021-12-20 10:58:15.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967774734684160[0;39m <==    Updates: 0
2021-12-20 10:58:15.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127967774734684160[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 10:58:20.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127967795634900992[0;39m 生成今日电子书快照开始
2021-12-20 10:58:20.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967795634900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:20.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967795634900992[0;39m ==> Parameters: 
2021-12-20 10:58:20.285 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967795634900992[0;39m <==    Updates: 0
2021-12-20 10:58:20.285 INFO  com.job.EbookSnapshotJob                          :35   [32m127967795634900992[0;39m 生成今日电子书快照结束，耗时：279毫秒
2021-12-20 10:58:25.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127967816669335552[0;39m 生成今日电子书快照开始
2021-12-20 10:58:25.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967816669335552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:25.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967816669335552[0;39m ==> Parameters: 
2021-12-20 10:58:25.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967816669335552[0;39m <==    Updates: 0
2021-12-20 10:58:25.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127967816669335552[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 10:58:30.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127967837636661248[0;39m 生成今日电子书快照开始
2021-12-20 10:58:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967837636661248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967837636661248[0;39m ==> Parameters: 
2021-12-20 10:58:30.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967837636661248[0;39m <==    Updates: 0
2021-12-20 10:58:30.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127967837636661248[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 10:58:35.017 INFO  com.job.DocJob                                    :32   [32m127967858595598336[0;39m 更新电子书下的文档数据开始
2021-12-20 10:58:35.089 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967858595598336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:58:35.089 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967858595598336[0;39m ==> Parameters: 
2021-12-20 10:58:35.250 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967858595598336[0;39m <==    Updates: 3
2021-12-20 10:58:35.250 INFO  com.job.DocJob                                    :35   [32m127967858595598336[0;39m 更新电子书下的文档数据结束，耗时：233毫秒
2021-12-20 10:58:35.250 INFO  com.job.EbookSnapshotJob                          :32   [32m127967859572871168[0;39m 生成今日电子书快照开始
2021-12-20 10:58:35.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967859572871168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:35.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967859572871168[0;39m ==> Parameters: 
2021-12-20 10:58:35.418 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967859572871168[0;39m <==    Updates: 0
2021-12-20 10:58:35.433 INFO  com.job.EbookSnapshotJob                          :35   [32m127967859572871168[0;39m 生成今日电子书快照结束，耗时：183毫秒
2021-12-20 10:58:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127967879558729728[0;39m 生成今日电子书快照开始
2021-12-20 10:58:40.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967879558729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:40.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967879558729728[0;39m ==> Parameters: 
2021-12-20 10:58:40.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967879558729728[0;39m <==    Updates: 0
2021-12-20 10:58:40.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127967879558729728[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 10:58:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127967900521861120[0;39m 生成今日电子书快照开始
2021-12-20 10:58:45.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967900521861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:45.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967900521861120[0;39m ==> Parameters: 
2021-12-20 10:58:45.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967900521861120[0;39m <==    Updates: 0
2021-12-20 10:58:45.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127967900521861120[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 10:58:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127967921510158336[0;39m 生成今日电子书快照开始
2021-12-20 10:58:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967921510158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967921510158336[0;39m ==> Parameters: 
2021-12-20 10:58:50.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967921510158336[0;39m <==    Updates: 0
2021-12-20 10:58:50.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127967921510158336[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 10:58:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127967942473289728[0;39m 生成今日电子书快照开始
2021-12-20 10:58:55.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967942473289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:58:55.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967942473289728[0;39m ==> Parameters: 
2021-12-20 10:58:55.301 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967942473289728[0;39m <==    Updates: 0
2021-12-20 10:58:55.301 INFO  com.job.EbookSnapshotJob                          :35   [32m127967942473289728[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 10:59:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127967963440615424[0;39m 生成今日电子书快照开始
2021-12-20 10:59:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967963440615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:00.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967963440615424[0;39m ==> Parameters: 
2021-12-20 10:59:00.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967963440615424[0;39m <==    Updates: 0
2021-12-20 10:59:00.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127967963440615424[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 10:59:05.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127967984399552512[0;39m 生成今日电子书快照开始
2021-12-20 10:59:05.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967984399552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:05.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967984399552512[0;39m ==> Parameters: 
2021-12-20 10:59:05.345 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127967984399552512[0;39m <==    Updates: 0
2021-12-20 10:59:05.346 INFO  com.job.EbookSnapshotJob                          :35   [32m127967984399552512[0;39m 生成今日电子书快照结束，耗时：335毫秒
2021-12-20 10:59:05.347 INFO  com.job.DocJob                                    :32   [32m127967985808838656[0;39m 更新电子书下的文档数据开始
2021-12-20 10:59:05.347 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967985808838656[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:59:05.347 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967985808838656[0;39m ==> Parameters: 
2021-12-20 10:59:05.496 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127967985808838656[0;39m <==    Updates: 3
2021-12-20 10:59:05.496 INFO  com.job.DocJob                                    :35   [32m127967985808838656[0;39m 更新电子书下的文档数据结束，耗时：149毫秒
2021-12-20 10:59:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127968005350100992[0;39m 生成今日电子书快照开始
2021-12-20 10:59:10.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968005350100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:10.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968005350100992[0;39m ==> Parameters: 
2021-12-20 10:59:10.306 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968005350100992[0;39m <==    Updates: 0
2021-12-20 10:59:10.306 INFO  com.job.EbookSnapshotJob                          :35   [32m127968005350100992[0;39m 生成今日电子书快照结束，耗时：300毫秒
2021-12-20 10:59:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127968026313232384[0;39m 生成今日电子书快照开始
2021-12-20 10:59:15.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968026313232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:15.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968026313232384[0;39m ==> Parameters: 
2021-12-20 10:59:15.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968026313232384[0;39m <==    Updates: 0
2021-12-20 10:59:15.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127968026313232384[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-20 10:59:20.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127968047343472640[0;39m 生成今日电子书快照开始
2021-12-20 10:59:20.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968047343472640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:20.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968047343472640[0;39m ==> Parameters: 
2021-12-20 10:59:20.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968047343472640[0;39m <==    Updates: 0
2021-12-20 10:59:20.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127968047343472640[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 10:59:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127968068302409728[0;39m 生成今日电子书快照开始
2021-12-20 10:59:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968068302409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968068302409728[0;39m ==> Parameters: 
2021-12-20 10:59:25.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968068302409728[0;39m <==    Updates: 0
2021-12-20 10:59:25.271 INFO  com.job.EbookSnapshotJob                          :35   [32m127968068302409728[0;39m 生成今日电子书快照结束，耗时：256毫秒
2021-12-20 10:59:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127968089269735424[0;39m 生成今日电子书快照开始
2021-12-20 10:59:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968089269735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968089269735424[0;39m ==> Parameters: 
2021-12-20 10:59:30.285 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968089269735424[0;39m <==    Updates: 0
2021-12-20 10:59:30.285 INFO  com.job.EbookSnapshotJob                          :35   [32m127968089269735424[0;39m 生成今日电子书快照结束，耗时：271毫秒
2021-12-20 10:59:35.011 INFO  com.job.DocJob                                    :32   [32m127968110228672512[0;39m 更新电子书下的文档数据开始
2021-12-20 10:59:35.112 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968110228672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 10:59:35.112 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968110228672512[0;39m ==> Parameters: 
2021-12-20 10:59:35.264 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968110228672512[0;39m <==    Updates: 3
2021-12-20 10:59:35.264 INFO  com.job.DocJob                                    :35   [32m127968110228672512[0;39m 更新电子书下的文档数据结束，耗时：253毫秒
2021-12-20 10:59:35.264 INFO  com.job.EbookSnapshotJob                          :32   [32m127968111289831424[0;39m 生成今日电子书快照开始
2021-12-20 10:59:35.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968111289831424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:35.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968111289831424[0;39m ==> Parameters: 
2021-12-20 10:59:35.422 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968111289831424[0;39m <==    Updates: 0
2021-12-20 10:59:35.422 INFO  com.job.EbookSnapshotJob                          :35   [32m127968111289831424[0;39m 生成今日电子书快照结束，耗时：158毫秒
2021-12-20 10:59:35.694 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：YBjnEYmA7J，session id：1！当前连接数：0
2021-12-20 10:59:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127968131195998208[0;39m 生成今日电子书快照开始
2021-12-20 10:59:40.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968131195998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:40.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968131195998208[0;39m ==> Parameters: 
2021-12-20 10:59:40.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968131195998208[0;39m <==    Updates: 0
2021-12-20 10:59:40.293 INFO  com.job.EbookSnapshotJob                          :35   [32m127968131195998208[0;39m 生成今日电子书快照结束，耗时：282毫秒
2021-12-20 10:59:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127968152180101120[0;39m 生成今日电子书快照开始
2021-12-20 10:59:45.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968152180101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:45.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968152180101120[0;39m ==> Parameters: 
2021-12-20 10:59:45.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968152180101120[0;39m <==    Updates: 0
2021-12-20 10:59:45.268 INFO  com.job.EbookSnapshotJob                          :35   [32m127968152180101120[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 10:59:50.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127968173113872384[0;39m 生成今日电子书快照开始
2021-12-20 10:59:50.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968173113872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:50.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968173113872384[0;39m ==> Parameters: 
2021-12-20 10:59:50.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968173113872384[0;39m <==    Updates: 0
2021-12-20 10:59:50.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127968173113872384[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 10:59:55.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127968194077003776[0;39m 生成今日电子书快照开始
2021-12-20 10:59:55.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968194077003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 10:59:55.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968194077003776[0;39m ==> Parameters: 
2021-12-20 10:59:55.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968194077003776[0;39m <==    Updates: 0
2021-12-20 10:59:55.277 INFO  com.job.EbookSnapshotJob                          :35   [32m127968194077003776[0;39m 生成今日电子书快照结束，耗时：275毫秒
2021-12-20 11:00:00.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127968215065300992[0;39m 生成今日电子书快照开始
2021-12-20 11:00:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968215065300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:00.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968215065300992[0;39m ==> Parameters: 
2021-12-20 11:00:00.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968215065300992[0;39m <==    Updates: 0
2021-12-20 11:00:00.279 INFO  com.job.EbookSnapshotJob                          :35   [32m127968215065300992[0;39m 生成今日电子书快照结束，耗时：272毫秒
2021-12-20 11:00:05.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127968236032626688[0;39m 生成今日电子书快照开始
2021-12-20 11:00:05.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968236032626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:05.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968236032626688[0;39m ==> Parameters: 
2021-12-20 11:00:05.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968236032626688[0;39m <==    Updates: 0
2021-12-20 11:00:05.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127968236032626688[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:00:05.254 INFO  com.job.DocJob                                    :32   [32m127968237077008384[0;39m 更新电子书下的文档数据开始
2021-12-20 11:00:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968237077008384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:00:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968237077008384[0;39m ==> Parameters: 
2021-12-20 11:00:05.410 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968237077008384[0;39m <==    Updates: 3
2021-12-20 11:00:05.411 INFO  com.job.DocJob                                    :35   [32m127968237077008384[0;39m 更新电子书下的文档数据结束，耗时：157毫秒
2021-12-20 11:00:10.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127968257016729600[0;39m 生成今日电子书快照开始
2021-12-20 11:00:10.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968257016729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968257016729600[0;39m ==> Parameters: 
2021-12-20 11:00:10.294 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968257016729600[0;39m <==    Updates: 0
2021-12-20 11:00:10.295 INFO  com.job.EbookSnapshotJob                          :35   [32m127968257016729600[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 11:00:15.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127968277979860992[0;39m 生成今日电子书快照开始
2021-12-20 11:00:15.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968277979860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968277979860992[0;39m ==> Parameters: 
2021-12-20 11:00:15.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968277979860992[0;39m <==    Updates: 0
2021-12-20 11:00:15.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127968277979860992[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:00:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127968298984935424[0;39m 生成今日电子书快照开始
2021-12-20 11:00:20.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968298984935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:20.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968298984935424[0;39m ==> Parameters: 
2021-12-20 11:00:20.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968298984935424[0;39m <==    Updates: 0
2021-12-20 11:00:20.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127968298984935424[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-20 11:00:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127968319931289600[0;39m 生成今日电子书快照开始
2021-12-20 11:00:25.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968319931289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968319931289600[0;39m ==> Parameters: 
2021-12-20 11:00:25.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968319931289600[0;39m <==    Updates: 0
2021-12-20 11:00:25.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127968319931289600[0;39m 生成今日电子书快照结束，耗时：258毫秒
2021-12-20 11:00:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127968340927975424[0;39m 生成今日电子书快照开始
2021-12-20 11:00:30.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968340927975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:30.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968340927975424[0;39m ==> Parameters: 
2021-12-20 11:00:30.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968340927975424[0;39m <==    Updates: 0
2021-12-20 11:00:30.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127968340927975424[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:00:35.006 INFO  com.job.DocJob                                    :32   [32m127968361865940992[0;39m 更新电子书下的文档数据开始
2021-12-20 11:00:35.090 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968361865940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:00:35.091 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968361865940992[0;39m ==> Parameters: 
2021-12-20 11:00:35.253 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968361865940992[0;39m <==    Updates: 3
2021-12-20 11:00:35.253 INFO  com.job.DocJob                                    :35   [32m127968361865940992[0;39m 更新电子书下的文档数据结束，耗时：247毫秒
2021-12-20 11:00:35.253 INFO  com.job.EbookSnapshotJob                          :32   [32m127968362901934080[0;39m 生成今日电子书快照开始
2021-12-20 11:00:35.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968362901934080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:35.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968362901934080[0;39m ==> Parameters: 
2021-12-20 11:00:35.436 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968362901934080[0;39m <==    Updates: 0
2021-12-20 11:00:35.437 INFO  com.job.EbookSnapshotJob                          :35   [32m127968362901934080[0;39m 生成今日电子书快照结束，耗时：183毫秒
2021-12-20 11:00:40.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127968382816489472[0;39m 生成今日电子书快照开始
2021-12-20 11:00:40.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968382816489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:40.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968382816489472[0;39m ==> Parameters: 
2021-12-20 11:00:40.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968382816489472[0;39m <==    Updates: 0
2021-12-20 11:00:40.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127968382816489472[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 11:00:45.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127968403817369600[0;39m 生成今日电子书快照开始
2021-12-20 11:00:45.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968403817369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:45.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968403817369600[0;39m ==> Parameters: 
2021-12-20 11:00:45.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968403817369600[0;39m <==    Updates: 0
2021-12-20 11:00:45.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127968403817369600[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 11:00:50.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127968424776306688[0;39m 生成今日电子书快照开始
2021-12-20 11:00:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968424776306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:50.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968424776306688[0;39m ==> Parameters: 
2021-12-20 11:00:50.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968424776306688[0;39m <==    Updates: 0
2021-12-20 11:00:50.268 INFO  com.job.EbookSnapshotJob                          :35   [32m127968424776306688[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 11:00:55.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127968445756215296[0;39m 生成今日电子书快照开始
2021-12-20 11:00:55.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968445756215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:00:55.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968445756215296[0;39m ==> Parameters: 
2021-12-20 11:00:55.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968445756215296[0;39m <==    Updates: 0
2021-12-20 11:00:55.283 INFO  com.job.EbookSnapshotJob                          :35   [32m127968445756215296[0;39m 生成今日电子书快照结束，耗时：275毫秒
2021-12-20 11:01:00.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127968466706763776[0;39m 生成今日电子书快照开始
2021-12-20 11:01:00.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968466706763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:00.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968466706763776[0;39m ==> Parameters: 
2021-12-20 11:01:00.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968466706763776[0;39m <==    Updates: 0
2021-12-20 11:01:00.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127968466706763776[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 11:01:05.008 INFO  com.job.DocJob                                    :32   [32m127968487703449600[0;39m 更新电子书下的文档数据开始
2021-12-20 11:01:05.101 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968487703449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:01:05.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968487703449600[0;39m ==> Parameters: 
2021-12-20 11:01:05.263 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968487703449600[0;39m <==    Updates: 3
2021-12-20 11:01:05.263 INFO  com.job.DocJob                                    :35   [32m127968487703449600[0;39m 更新电子书下的文档数据结束，耗时：255毫秒
2021-12-20 11:01:05.263 INFO  com.job.EbookSnapshotJob                          :32   [32m127968488772997120[0;39m 生成今日电子书快照开始
2021-12-20 11:01:05.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968488772997120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:05.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968488772997120[0;39m ==> Parameters: 
2021-12-20 11:01:05.420 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968488772997120[0;39m <==    Updates: 0
2021-12-20 11:01:05.420 INFO  com.job.EbookSnapshotJob                          :35   [32m127968488772997120[0;39m 生成今日电子书快照结束，耗时：157毫秒
2021-12-20 11:01:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127968508683358208[0;39m 生成今日电子书快照开始
2021-12-20 11:01:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968508683358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:10.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968508683358208[0;39m ==> Parameters: 
2021-12-20 11:01:10.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968508683358208[0;39m <==    Updates: 0
2021-12-20 11:01:10.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127968508683358208[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:01:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127968529621323776[0;39m 生成今日电子书快照开始
2021-12-20 11:01:15.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968529621323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:15.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968529621323776[0;39m ==> Parameters: 
2021-12-20 11:01:15.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968529621323776[0;39m <==    Updates: 0
2021-12-20 11:01:15.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127968529621323776[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:01:20.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127968550630592512[0;39m 生成今日电子书快照开始
2021-12-20 11:01:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968550630592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968550630592512[0;39m ==> Parameters: 
2021-12-20 11:01:20.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968550630592512[0;39m <==    Updates: 0
2021-12-20 11:01:20.231 INFO  com.job.EbookSnapshotJob                          :35   [32m127968550630592512[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:01:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127968571602112512[0;39m 生成今日电子书快照开始
2021-12-20 11:01:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968571602112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968571602112512[0;39m ==> Parameters: 
2021-12-20 11:01:25.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968571602112512[0;39m <==    Updates: 0
2021-12-20 11:01:25.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127968571602112512[0;39m 生成今日电子书快照结束，耗时：246毫秒
2021-12-20 11:01:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127968592552660992[0;39m 生成今日电子书快照开始
2021-12-20 11:01:30.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968592552660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:30.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968592552660992[0;39m ==> Parameters: 
2021-12-20 11:01:30.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968592552660992[0;39m <==    Updates: 0
2021-12-20 11:01:30.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127968592552660992[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:01:35.004 INFO  com.job.DocJob                                    :32   [32m127968613515792384[0;39m 更新电子书下的文档数据开始
2021-12-20 11:01:35.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968613515792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:01:35.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968613515792384[0;39m ==> Parameters: 
2021-12-20 11:01:35.250 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968613515792384[0;39m <==    Updates: 3
2021-12-20 11:01:35.251 INFO  com.job.DocJob                                    :35   [32m127968613515792384[0;39m 更新电子书下的文档数据结束，耗时：246毫秒
2021-12-20 11:01:35.252 INFO  com.job.EbookSnapshotJob                          :32   [32m127968614555979776[0;39m 生成今日电子书快照开始
2021-12-20 11:01:35.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968614555979776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:35.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968614555979776[0;39m ==> Parameters: 
2021-12-20 11:01:35.414 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968614555979776[0;39m <==    Updates: 0
2021-12-20 11:01:35.414 INFO  com.job.EbookSnapshotJob                          :35   [32m127968614555979776[0;39m 生成今日电子书快照结束，耗时：162毫秒
2021-12-20 11:01:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127968634508283904[0;39m 生成今日电子书快照开始
2021-12-20 11:01:40.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968634508283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:40.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968634508283904[0;39m ==> Parameters: 
2021-12-20 11:01:40.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968634508283904[0;39m <==    Updates: 0
2021-12-20 11:01:40.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127968634508283904[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 11:01:43.518 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：pvhpfEXZSM，session id：2，当前连接数：1
2021-12-20 11:01:43.660 INFO  com.aspect.LogAspect                              :54   [32m127968649821687808[0;39m ------------- 开始 -------------
2021-12-20 11:01:43.661 INFO  com.aspect.LogAspect                              :55   [32m127968649821687808[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:01:43.661 INFO  com.aspect.LogAspect                              :56   [32m127968649821687808[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:01:43.661 INFO  com.aspect.LogAspect                              :57   [32m127968649821687808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:01:43.661 INFO  com.aspect.LogAspect                              :80   [32m127968649821687808[0;39m 请求参数: []
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :54   [32m127968649838465025[0;39m ------------- 开始 -------------
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :54   [32m127968649838465024[0;39m ------------- 开始 -------------
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :55   [32m127968649838465024[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :56   [32m127968649838465024[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :55   [32m127968649838465025[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :57   [32m127968649838465024[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:01:43.664 INFO  com.aspect.LogAspect                              :56   [32m127968649838465025[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:01:43.665 INFO  com.aspect.LogAspect                              :57   [32m127968649838465025[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:01:43.665 INFO  com.aspect.LogAspect                              :80   [32m127968649838465024[0;39m 请求参数: []
2021-12-20 11:01:43.665 INFO  com.aspect.LogAspect                              :80   [32m127968649838465025[0;39m 请求参数: []
2021-12-20 11:01:43.747 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127968649821687808[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:01:43.748 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127968649821687808[0;39m ==> Parameters: 
2021-12-20 11:01:43.751 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127968649838465024[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:01:43.752 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127968649838465024[0;39m ==> Parameters: 
2021-12-20 11:01:43.753 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127968649838465025[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:01:43.753 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127968649838465025[0;39m ==> Parameters: 
2021-12-20 11:01:43.829 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127968649821687808[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:01:43.830 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127968649821687808[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:01:43.832 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127968649821687808[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:01:43.834 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127968649821687808[0;39m <==      Total: 2
2021-12-20 11:01:43.834 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:01:43.835 INFO  com.aspect.LogAspect                              :92   [32m127968649821687808[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:01:43.835 INFO  com.aspect.LogAspect                              :93   [32m127968649821687808[0;39m ------------- 结束 耗时：175 ms -------------
2021-12-20 11:01:43.835 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:01:43.837 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:01:43.839 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:01:43.840 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:01:43.841 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:01:43.842 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:01:43.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:01:43.845 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127968649838465025[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:01:43.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:01:43.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:01:43.846 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127968649838465025[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:01:43.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:01:43.848 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127968649838465025[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:01:43.849 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:01:43.849 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127968649838465025[0;39m <==      Total: 2
2021-12-20 11:01:43.850 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:01:43.851 INFO  com.aspect.LogAspect                              :92   [32m127968649838465025[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:01:43.851 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:01:43.851 INFO  com.aspect.LogAspect                              :93   [32m127968649838465025[0;39m ------------- 结束 耗时：187 ms -------------
2021-12-20 11:01:43.852 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:01:43.853 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:01:43.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:01:43.855 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:01:43.856 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:01:43.857 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127968649838465024[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:01:43.858 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127968649838465024[0;39m <==      Total: 19
2021-12-20 11:01:43.860 INFO  com.aspect.LogAspect                              :92   [32m127968649838465024[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:01:43.860 INFO  com.aspect.LogAspect                              :93   [32m127968649838465024[0;39m ------------- 结束 耗时：196 ms -------------
2021-12-20 11:01:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127968655488192512[0;39m 生成今日电子书快照开始
2021-12-20 11:01:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968655488192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968655488192512[0;39m ==> Parameters: 
2021-12-20 11:01:45.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968655488192512[0;39m <==    Updates: 0
2021-12-20 11:01:45.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127968655488192512[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 11:01:50.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127968676413575168[0;39m 生成今日电子书快照开始
2021-12-20 11:01:50.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968676413575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:50.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968676413575168[0;39m ==> Parameters: 
2021-12-20 11:01:50.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968676413575168[0;39m <==    Updates: 0
2021-12-20 11:01:50.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127968676413575168[0;39m 生成今日电子书快照结束，耗时：228毫秒
2021-12-20 11:01:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127968697431232512[0;39m 生成今日电子书快照开始
2021-12-20 11:01:55.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968697431232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:01:55.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968697431232512[0;39m ==> Parameters: 
2021-12-20 11:01:55.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968697431232512[0;39m <==    Updates: 0
2021-12-20 11:01:55.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127968697431232512[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:02:00.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127968718373392384[0;39m 生成今日电子书快照开始
2021-12-20 11:02:00.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968718373392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:00.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968718373392384[0;39m ==> Parameters: 
2021-12-20 11:02:00.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968718373392384[0;39m <==    Updates: 0
2021-12-20 11:02:00.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127968718373392384[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:02:05.007 INFO  com.job.DocJob                                    :32   [32m127968739357495296[0;39m 更新电子书下的文档数据开始
2021-12-20 11:02:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968739357495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:02:05.091 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968739357495296[0;39m ==> Parameters: 
2021-12-20 11:02:05.248 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968739357495296[0;39m <==    Updates: 3
2021-12-20 11:02:05.248 INFO  com.job.DocJob                                    :35   [32m127968739357495296[0;39m 更新电子书下的文档数据结束，耗时：241毫秒
2021-12-20 11:02:05.248 INFO  com.job.EbookSnapshotJob                          :32   [32m127968740368322560[0;39m 生成今日电子书快照开始
2021-12-20 11:02:05.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968740368322560[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:05.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968740368322560[0;39m ==> Parameters: 
2021-12-20 11:02:05.402 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968740368322560[0;39m <==    Updates: 0
2021-12-20 11:02:05.402 INFO  com.job.EbookSnapshotJob                          :35   [32m127968740368322560[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-20 11:02:06.738 INFO  com.interceptor.LoginInterceptor                  :29   [32m127967313680011265[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 11:02:06.738 INFO  com.interceptor.LoginInterceptor                  :40   [32m127967313680011265[0;39m 接口登录拦截：，path：http://localhost:8081/user/save
2021-12-20 11:02:06.738 INFO  com.interceptor.LoginInterceptor                  :44   [32m127967313680011265[0;39m 登录校验开始，token：null
2021-12-20 11:02:06.738 INFO  com.interceptor.LoginInterceptor                  :46   [32m127967313680011265[0;39m token为空，请求被拦截
2021-12-20 11:02:10.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127968760370958336[0;39m 生成今日电子书快照开始
2021-12-20 11:02:10.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968760370958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968760370958336[0;39m ==> Parameters: 
2021-12-20 11:02:10.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968760370958336[0;39m <==    Updates: 0
2021-12-20 11:02:10.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127968760370958336[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:02:15.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127968781300535296[0;39m 生成今日电子书快照开始
2021-12-20 11:02:15.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968781300535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968781300535296[0;39m ==> Parameters: 
2021-12-20 11:02:15.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968781300535296[0;39m <==    Updates: 0
2021-12-20 11:02:15.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127968781300535296[0;39m 生成今日电子书快照结束，耗时：249毫秒
2021-12-20 11:02:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127968802309804032[0;39m 生成今日电子书快照开始
2021-12-20 11:02:20.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968802309804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:20.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968802309804032[0;39m ==> Parameters: 
2021-12-20 11:02:20.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968802309804032[0;39m <==    Updates: 0
2021-12-20 11:02:20.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127968802309804032[0;39m 生成今日电子书快照结束，耗时：252毫秒
2021-12-20 11:02:21.182 INFO  com.websocket.WebSocketServer                     :41   [32m127967026185637889[0;39m 连接关闭，token：pvhpfEXZSM，session id：2！当前连接数：0
2021-12-20 11:02:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127968823226798080[0;39m 生成今日电子书快照开始
2021-12-20 11:02:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968823226798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968823226798080[0;39m ==> Parameters: 
2021-12-20 11:02:25.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968823226798080[0;39m <==    Updates: 0
2021-12-20 11:02:25.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127968823226798080[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:02:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127968844257038336[0;39m 生成今日电子书快照开始
2021-12-20 11:02:30.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968844257038336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:30.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968844257038336[0;39m ==> Parameters: 
2021-12-20 11:02:30.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968844257038336[0;39m <==    Updates: 0
2021-12-20 11:02:30.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127968844257038336[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:02:35.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127968865211781120[0;39m 生成今日电子书快照开始
2021-12-20 11:02:35.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968865211781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:35.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968865211781120[0;39m ==> Parameters: 
2021-12-20 11:02:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968865211781120[0;39m <==    Updates: 0
2021-12-20 11:02:35.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127968865211781120[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:02:35.267 INFO  com.job.DocJob                                    :32   [32m127968866277134336[0;39m 更新电子书下的文档数据开始
2021-12-20 11:02:35.267 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968866277134336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:02:35.267 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968866277134336[0;39m ==> Parameters: 
2021-12-20 11:02:35.452 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968866277134336[0;39m <==    Updates: 3
2021-12-20 11:02:35.452 INFO  com.job.DocJob                                    :35   [32m127968866277134336[0;39m 更新电子书下的文档数据结束，耗时：185毫秒
2021-12-20 11:02:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127968886174912512[0;39m 生成今日电子书快照开始
2021-12-20 11:02:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968886174912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968886174912512[0;39m ==> Parameters: 
2021-12-20 11:02:40.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968886174912512[0;39m <==    Updates: 0
2021-12-20 11:02:40.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127968886174912512[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:02:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127968907167404032[0;39m 生成今日电子书快照开始
2021-12-20 11:02:45.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968907167404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:45.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968907167404032[0;39m ==> Parameters: 
2021-12-20 11:02:45.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968907167404032[0;39m <==    Updates: 0
2021-12-20 11:02:45.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127968907167404032[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:02:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127968928122146816[0;39m 生成今日电子书快照开始
2021-12-20 11:02:50.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968928122146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:50.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968928122146816[0;39m ==> Parameters: 
2021-12-20 11:02:50.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968928122146816[0;39m <==    Updates: 0
2021-12-20 11:02:50.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127968928122146816[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:02:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127968949093666816[0;39m 生成今日电子书快照开始
2021-12-20 11:02:55.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968949093666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:02:55.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968949093666816[0;39m ==> Parameters: 
2021-12-20 11:02:55.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968949093666816[0;39m <==    Updates: 0
2021-12-20 11:02:55.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127968949093666816[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:03:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127968970052603904[0;39m 生成今日电子书快照开始
2021-12-20 11:03:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968970052603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968970052603904[0;39m ==> Parameters: 
2021-12-20 11:03:00.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968970052603904[0;39m <==    Updates: 0
2021-12-20 11:03:00.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127968970052603904[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:03:05.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127968991011540992[0;39m 生成今日电子书快照开始
2021-12-20 11:03:05.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968991011540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:05.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968991011540992[0;39m ==> Parameters: 
2021-12-20 11:03:05.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127968991011540992[0;39m <==    Updates: 0
2021-12-20 11:03:05.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127968991011540992[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:03:05.254 INFO  com.job.DocJob                                    :32   [32m127968992051728384[0;39m 更新电子书下的文档数据开始
2021-12-20 11:03:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968992051728384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:03:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968992051728384[0;39m ==> Parameters: 
2021-12-20 11:03:05.470 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127968992051728384[0;39m <==    Updates: 3
2021-12-20 11:03:05.470 INFO  com.job.DocJob                                    :35   [32m127968992051728384[0;39m 更新电子书下的文档数据结束，耗时：216毫秒
2021-12-20 11:03:10.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127969012041781248[0;39m 生成今日电子书快照开始
2021-12-20 11:03:10.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969012041781248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:10.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969012041781248[0;39m ==> Parameters: 
2021-12-20 11:03:10.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969012041781248[0;39m <==    Updates: 0
2021-12-20 11:03:10.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127969012041781248[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:03:15.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127969032979746816[0;39m 生成今日电子书快照开始
2021-12-20 11:03:15.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969032979746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:15.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969032979746816[0;39m ==> Parameters: 
2021-12-20 11:03:15.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969032979746816[0;39m <==    Updates: 0
2021-12-20 11:03:15.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127969032979746816[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:03:20.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127969054018375680[0;39m 生成今日电子书快照开始
2021-12-20 11:03:20.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969054018375680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:20.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969054018375680[0;39m ==> Parameters: 
2021-12-20 11:03:20.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969054018375680[0;39m <==    Updates: 0
2021-12-20 11:03:20.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127969054018375680[0;39m 生成今日电子书快照结束，耗时：221毫秒
2021-12-20 11:03:25.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127969074968924160[0;39m 生成今日电子书快照开始
2021-12-20 11:03:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969074968924160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969074968924160[0;39m ==> Parameters: 
2021-12-20 11:03:25.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969074968924160[0;39m <==    Updates: 0
2021-12-20 11:03:25.278 INFO  com.job.EbookSnapshotJob                          :35   [32m127969074968924160[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 11:03:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127969095873335296[0;39m 生成今日电子书快照开始
2021-12-20 11:03:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969095873335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969095873335296[0;39m ==> Parameters: 
2021-12-20 11:03:30.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969095873335296[0;39m <==    Updates: 0
2021-12-20 11:03:30.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127969095873335296[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:03:35.016 INFO  com.job.DocJob                                    :32   [32m127969116882604032[0;39m 更新电子书下的文档数据开始
2021-12-20 11:03:35.079 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969116882604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:03:35.079 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969116882604032[0;39m ==> Parameters: 
2021-12-20 11:03:35.233 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969116882604032[0;39m <==    Updates: 3
2021-12-20 11:03:35.233 INFO  com.job.DocJob                                    :35   [32m127969116882604032[0;39m 更新电子书下的文档数据结束，耗时：217毫秒
2021-12-20 11:03:35.233 INFO  com.job.EbookSnapshotJob                          :32   [32m127969117792768000[0;39m 生成今日电子书快照开始
2021-12-20 11:03:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969117792768000[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969117792768000[0;39m ==> Parameters: 
2021-12-20 11:03:35.418 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969117792768000[0;39m <==    Updates: 0
2021-12-20 11:03:35.418 INFO  com.job.EbookSnapshotJob                          :35   [32m127969117792768000[0;39m 生成今日电子书快照结束，耗时：185毫秒
2021-12-20 11:03:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127969137837346816[0;39m 生成今日电子书快照开始
2021-12-20 11:03:40.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969137837346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:40.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969137837346816[0;39m ==> Parameters: 
2021-12-20 11:03:40.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969137837346816[0;39m <==    Updates: 0
2021-12-20 11:03:40.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127969137837346816[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:03:45.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127969158863392768[0;39m 生成今日电子书快照开始
2021-12-20 11:03:45.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969158863392768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:45.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969158863392768[0;39m ==> Parameters: 
2021-12-20 11:03:45.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969158863392768[0;39m <==    Updates: 0
2021-12-20 11:03:45.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127969158863392768[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:03:50.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127969179751026688[0;39m 生成今日电子书快照开始
2021-12-20 11:03:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969179751026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969179751026688[0;39m ==> Parameters: 
2021-12-20 11:03:50.290 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969179751026688[0;39m <==    Updates: 0
2021-12-20 11:03:50.290 INFO  com.job.EbookSnapshotJob                          :35   [32m127969179751026688[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 11:03:55.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127969200768684032[0;39m 生成今日电子书快照开始
2021-12-20 11:03:55.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969200768684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:03:55.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969200768684032[0;39m ==> Parameters: 
2021-12-20 11:03:55.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969200768684032[0;39m <==    Updates: 0
2021-12-20 11:03:55.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127969200768684032[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:04:00.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127969221794729984[0;39m 生成今日电子书快照开始
2021-12-20 11:04:00.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969221794729984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:00.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969221794729984[0;39m ==> Parameters: 
2021-12-20 11:04:00.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969221794729984[0;39m <==    Updates: 0
2021-12-20 11:04:00.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127969221794729984[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:04:05.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127969242673975296[0;39m 生成今日电子书快照开始
2021-12-20 11:04:05.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969242673975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:05.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969242673975296[0;39m ==> Parameters: 
2021-12-20 11:04:05.335 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969242673975296[0;39m <==    Updates: 0
2021-12-20 11:04:05.335 INFO  com.job.EbookSnapshotJob                          :35   [32m127969242673975296[0;39m 生成今日电子书快照结束，耗时：328毫秒
2021-12-20 11:04:05.335 INFO  com.job.DocJob                                    :32   [32m127969244049707008[0;39m 更新电子书下的文档数据开始
2021-12-20 11:04:05.335 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969244049707008[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:04:05.335 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969244049707008[0;39m ==> Parameters: 
2021-12-20 11:04:05.486 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969244049707008[0;39m <==    Updates: 3
2021-12-20 11:04:05.486 INFO  com.job.DocJob                                    :35   [32m127969244049707008[0;39m 更新电子书下的文档数据结束，耗时：151毫秒
2021-12-20 11:04:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127969263670661120[0;39m 生成今日电子书快照开始
2021-12-20 11:04:10.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969263670661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:10.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969263670661120[0;39m ==> Parameters: 
2021-12-20 11:04:10.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969263670661120[0;39m <==    Updates: 0
2021-12-20 11:04:10.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127969263670661120[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-20 11:04:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127969284642181120[0;39m 生成今日电子书快照开始
2021-12-20 11:04:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969284642181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969284642181120[0;39m ==> Parameters: 
2021-12-20 11:04:15.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969284642181120[0;39m <==    Updates: 0
2021-12-20 11:04:15.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127969284642181120[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:04:20.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127969305605312512[0;39m 生成今日电子书快照开始
2021-12-20 11:04:20.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969305605312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:20.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969305605312512[0;39m ==> Parameters: 
2021-12-20 11:04:20.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969305605312512[0;39m <==    Updates: 0
2021-12-20 11:04:20.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127969305605312512[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:04:25.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127969326597804032[0;39m 生成今日电子书快照开始
2021-12-20 11:04:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969326597804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969326597804032[0;39m ==> Parameters: 
2021-12-20 11:04:25.280 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969326597804032[0;39m <==    Updates: 0
2021-12-20 11:04:25.280 INFO  com.job.EbookSnapshotJob                          :35   [32m127969326597804032[0;39m 生成今日电子书快照结束，耗时：264毫秒
2021-12-20 11:04:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127969347560935424[0;39m 生成今日电子书快照开始
2021-12-20 11:04:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969347560935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969347560935424[0;39m ==> Parameters: 
2021-12-20 11:04:30.380 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969347560935424[0;39m <==    Updates: 0
2021-12-20 11:04:30.380 INFO  com.job.EbookSnapshotJob                          :35   [32m127969347560935424[0;39m 生成今日电子书快照结束，耗时：366毫秒
2021-12-20 11:04:33.115 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2021-12-20 11:04:33.166 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2021-12-20 11:04:33.366 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 3224 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:04:33.366 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:04:34.665 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:04:34.665 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:04:35.496 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 822 ms. Found 0 Redis repository interfaces.
2021-12-20 11:04:35.738 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:04:35.738 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:04:35.738 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:04:35.738 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:04:35.778 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:04:35.778 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2396 ms
2021-12-20 11:04:36.628 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:04:36.643 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:04:36.643 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:04:36.643 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 3.34 seconds (JVM running for 589.575)
2021-12-20 11:04:36.643 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2021-12-20 11:04:39.247 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 3224 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:04:39.247 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:04:40.384 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:04:40.384 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:04:40.785 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 397 ms. Found 0 Redis repository interfaces.
2021-12-20 11:04:40.901 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:04:40.917 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:04:40.917 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:04:40.917 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:04:40.917 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:04:40.917 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 1670 ms
2021-12-20 11:04:41.533 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:04:41.533 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:04:41.533 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:04:41.549 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 2.344 seconds (JVM running for 594.47)
2021-12-20 11:04:41.549 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2021-12-20 11:04:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127969410475495424[0;39m 生成今日电子书快照开始
2021-12-20 11:04:45.014 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127969410475495424[0;39m HikariPool-2 - Starting...
2021-12-20 11:04:45.815 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127969410475495424[0;39m HikariPool-2 - Start completed.
2021-12-20 11:04:45.831 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969410475495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:45.831 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969410475495424[0;39m ==> Parameters: 
2021-12-20 11:04:45.982 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969410475495424[0;39m <==    Updates: 0
2021-12-20 11:04:45.982 INFO  com.job.EbookSnapshotJob                          :35   [32m127969410475495424[0;39m 生成今日电子书快照结束，耗时：968毫秒
2021-12-20 11:04:50.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127969431501541376[0;39m 生成今日电子书快照开始
2021-12-20 11:04:50.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969431501541376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:50.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969431501541376[0;39m ==> Parameters: 
2021-12-20 11:04:50.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969431501541376[0;39m <==    Updates: 0
2021-12-20 11:04:50.228 INFO  com.job.EbookSnapshotJob                          :35   [32m127969431501541376[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:04:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127969452439506944[0;39m 生成今日电子书快照开始
2021-12-20 11:04:55.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969452439506944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:04:55.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969452439506944[0;39m ==> Parameters: 
2021-12-20 11:04:55.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969452439506944[0;39m <==    Updates: 0
2021-12-20 11:04:55.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127969452439506944[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:05:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127969473398444032[0;39m 生成今日电子书快照开始
2021-12-20 11:05:00.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969473398444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:00.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969473398444032[0;39m ==> Parameters: 
2021-12-20 11:05:00.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969473398444032[0;39m <==    Updates: 0
2021-12-20 11:05:00.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127969473398444032[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:05:05.016 INFO  com.job.DocJob                                    :32   [32m127969494369964032[0;39m 更新电子书下的文档数据开始
2021-12-20 11:05:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969494369964032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:05:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969494369964032[0;39m ==> Parameters: 
2021-12-20 11:05:05.217 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969494369964032[0;39m <==    Updates: 3
2021-12-20 11:05:05.217 INFO  com.job.DocJob                                    :35   [32m127969494369964032[0;39m 更新电子书下的文档数据结束，耗时：201毫秒
2021-12-20 11:05:05.217 INFO  com.job.EbookSnapshotJob                          :32   [32m127969495213019136[0;39m 生成今日电子书快照开始
2021-12-20 11:05:05.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969495213019136[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:05.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969495213019136[0;39m ==> Parameters: 
2021-12-20 11:05:05.401 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969495213019136[0;39m <==    Updates: 0
2021-12-20 11:05:05.417 INFO  com.job.EbookSnapshotJob                          :35   [32m127969495213019136[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:05:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127969515295346688[0;39m 生成今日电子书快照开始
2021-12-20 11:05:10.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969515295346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:10.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969515295346688[0;39m ==> Parameters: 
2021-12-20 11:05:10.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969515295346688[0;39m <==    Updates: 0
2021-12-20 11:05:10.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127969515295346688[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:05:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127969536292032512[0;39m 生成今日电子书快照开始
2021-12-20 11:05:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969536292032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969536292032512[0;39m ==> Parameters: 
2021-12-20 11:05:15.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969536292032512[0;39m <==    Updates: 0
2021-12-20 11:05:15.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127969536292032512[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 11:05:20.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127969557318078464[0;39m 生成今日电子书快照开始
2021-12-20 11:05:20.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969557318078464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:20.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969557318078464[0;39m ==> Parameters: 
2021-12-20 11:05:20.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969557318078464[0;39m <==    Updates: 0
2021-12-20 11:05:20.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127969557318078464[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:05:25.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127969578281209856[0;39m 生成今日电子书快照开始
2021-12-20 11:05:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969578281209856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:25.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969578281209856[0;39m ==> Parameters: 
2021-12-20 11:05:25.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969578281209856[0;39m <==    Updates: 0
2021-12-20 11:05:25.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127969578281209856[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:05:30.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127969599273701376[0;39m 生成今日电子书快照开始
2021-12-20 11:05:30.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969599273701376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:30.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969599273701376[0;39m ==> Parameters: 
2021-12-20 11:05:30.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969599273701376[0;39m <==    Updates: 0
2021-12-20 11:05:30.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127969599273701376[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:05:35.017 INFO  com.job.DocJob                                    :32   [32m127969620203278336[0;39m 更新电子书下的文档数据开始
2021-12-20 11:05:35.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969620203278336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:05:35.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969620203278336[0;39m ==> Parameters: 
2021-12-20 11:05:35.267 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969620203278336[0;39m <==    Updates: 3
2021-12-20 11:05:35.267 INFO  com.job.DocJob                                    :35   [32m127969620203278336[0;39m 更新电子书下的文档数据结束，耗时：250毫秒
2021-12-20 11:05:35.267 INFO  com.job.EbookSnapshotJob                          :32   [32m127969621251854336[0;39m 生成今日电子书快照开始
2021-12-20 11:05:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969621251854336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969621251854336[0;39m ==> Parameters: 
2021-12-20 11:05:35.434 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969621251854336[0;39m <==    Updates: 0
2021-12-20 11:05:35.434 INFO  com.job.EbookSnapshotJob                          :35   [32m127969621251854336[0;39m 生成今日电子书快照结束，耗时：167毫秒
2021-12-20 11:05:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127969641158021120[0;39m 生成今日电子书快照开始
2021-12-20 11:05:40.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969641158021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:40.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969641158021120[0;39m ==> Parameters: 
2021-12-20 11:05:40.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969641158021120[0;39m <==    Updates: 0
2021-12-20 11:05:40.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127969641158021120[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:05:41.836 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 11:05:41.836 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 11:05:41.837 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 11:05:41.839 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：kjVcEVWzkv，session id：3，当前连接数：1
2021-12-20 11:05:41.989 INFO  com.aspect.LogAspect                              :54   [32m127969649441771520[0;39m ------------- 开始 -------------
2021-12-20 11:05:41.989 INFO  com.aspect.LogAspect                              :55   [32m127969649441771520[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:05:41.989 INFO  com.aspect.LogAspect                              :56   [32m127969649441771520[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:05:41.989 INFO  com.aspect.LogAspect                              :57   [32m127969649441771520[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:05:41.991 INFO  com.aspect.LogAspect                              :80   [32m127969649441771520[0;39m 请求参数: []
2021-12-20 11:05:41.995 INFO  com.aspect.LogAspect                              :54   [32m127969649471131648[0;39m ------------- 开始 -------------
2021-12-20 11:05:41.996 INFO  com.aspect.LogAspect                              :55   [32m127969649471131648[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:05:41.997 INFO  com.aspect.LogAspect                              :56   [32m127969649471131648[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:05:41.997 INFO  com.aspect.LogAspect                              :57   [32m127969649471131648[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:05:41.998 INFO  com.aspect.LogAspect                              :80   [32m127969649471131648[0;39m 请求参数: []
2021-12-20 11:05:41.999 INFO  com.aspect.LogAspect                              :54   [32m127969649487908864[0;39m ------------- 开始 -------------
2021-12-20 11:05:42.000 INFO  com.aspect.LogAspect                              :55   [32m127969649487908864[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:05:42.000 INFO  com.aspect.LogAspect                              :56   [32m127969649487908864[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:05:42.000 INFO  com.aspect.LogAspect                              :57   [32m127969649487908864[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:05:42.000 INFO  com.aspect.LogAspect                              :80   [32m127969649487908864[0;39m 请求参数: []
2021-12-20 11:05:42.075 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969649471131648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:05:42.075 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969649441771520[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:05:42.075 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969649441771520[0;39m ==> Parameters: 
2021-12-20 11:05:42.075 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969649471131648[0;39m ==> Parameters: 
2021-12-20 11:05:42.077 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969649487908864[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:05:42.078 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969649487908864[0;39m ==> Parameters: 
2021-12-20 11:05:42.236 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:05:42.237 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:05:42.238 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:05:42.238 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969649441771520[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:05:42.238 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969649471131648[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:05:42.239 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:05:42.239 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969649471131648[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:05:42.239 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969649441771520[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:05:42.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:05:42.240 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:05:42.241 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:05:42.242 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969649471131648[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:05:42.242 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969649441771520[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:05:42.242 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:05:42.243 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969649471131648[0;39m <==      Total: 2
2021-12-20 11:05:42.243 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:05:42.244 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969649441771520[0;39m <==      Total: 2
2021-12-20 11:05:42.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:05:42.245 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:05:42.248 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:05:42.250 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:05:42.251 INFO  com.aspect.LogAspect                              :92   [32m127969649471131648[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:05:42.251 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:05:42.252 INFO  com.aspect.LogAspect                              :93   [32m127969649471131648[0;39m ------------- 结束 耗时：257 ms -------------
2021-12-20 11:05:42.252 INFO  com.aspect.LogAspect                              :92   [32m127969649441771520[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:05:42.253 INFO  com.aspect.LogAspect                              :93   [32m127969649441771520[0;39m ------------- 结束 耗时：265 ms -------------
2021-12-20 11:05:42.253 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:05:42.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:05:42.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:05:42.260 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:05:42.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:05:42.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969649487908864[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:05:42.263 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969649487908864[0;39m <==      Total: 19
2021-12-20 11:05:42.281 INFO  com.aspect.LogAspect                              :92   [32m127969649487908864[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:05:42.281 INFO  com.aspect.LogAspect                              :93   [32m127969649487908864[0;39m ------------- 结束 耗时：282 ms -------------
2021-12-20 11:05:45.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127969662175678464[0;39m 生成今日电子书快照开始
2021-12-20 11:05:45.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969662175678464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:45.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969662175678464[0;39m ==> Parameters: 
2021-12-20 11:05:45.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969662175678464[0;39m <==    Updates: 0
2021-12-20 11:05:45.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127969662175678464[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:05:50.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127969683143004160[0;39m 生成今日电子书快照开始
2021-12-20 11:05:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969683143004160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969683143004160[0;39m ==> Parameters: 
2021-12-20 11:05:50.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969683143004160[0;39m <==    Updates: 0
2021-12-20 11:05:50.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127969683143004160[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:05:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127969704076775424[0;39m 生成今日电子书快照开始
2021-12-20 11:05:55.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969704076775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:05:55.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969704076775424[0;39m ==> Parameters: 
2021-12-20 11:05:55.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969704076775424[0;39m <==    Updates: 0
2021-12-20 11:05:55.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127969704076775424[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 11:05:56.327 INFO  com.aspect.LogAspect                              :54   [32m127969709583896576[0;39m ------------- 开始 -------------
2021-12-20 11:05:56.327 INFO  com.aspect.LogAspect                              :55   [32m127969709583896576[0;39m 请求地址: http://localhost:8081/user/save POST
2021-12-20 11:05:56.328 INFO  com.aspect.LogAspect                              :56   [32m127969709583896576[0;39m 类名方法: com.controller.UserController.save
2021-12-20 11:05:56.328 INFO  com.aspect.LogAspect                              :57   [32m127969709583896576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:05:56.328 INFO  com.aspect.LogAspect                              :80   [32m127969709583896576[0;39m 请求参数: [{"loginName":"test12345","name":"12345"}]
2021-12-20 11:05:56.424 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969709583896576[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:05:56.424 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969709583896576[0;39m ==> Parameters: test12345(String)
2021-12-20 11:05:56.505 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969709583896576[0;39m <==      Total: 0
2021-12-20 11:05:56.506 DEBUG com.mapper.UserMapper.insert                      :137  [32m127969709583896576[0;39m ==>  Preparing: insert into user (id, login_name, `name`, `password`) values (?, ?, ?, ?)
2021-12-20 11:05:56.507 DEBUG com.mapper.UserMapper.insert                      :137  [32m127969709583896576[0;39m ==> Parameters: 127969710334676992(Long), test12345(String), 12345(String), cc03e747a6afbbcbf8be7668acfebee5(String)
2021-12-20 11:05:56.665 DEBUG com.mapper.UserMapper.insert                      :137  [32m127969709583896576[0;39m <==    Updates: 1
2021-12-20 11:05:56.666 INFO  com.aspect.LogAspect                              :92   [32m127969709583896576[0;39m 返回结果: {"success":true}
2021-12-20 11:05:56.667 INFO  com.aspect.LogAspect                              :93   [32m127969709583896576[0;39m ------------- 结束 耗时：340 ms -------------
2021-12-20 11:06:00.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127969725006352384[0;39m 生成今日电子书快照开始
2021-12-20 11:06:00.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969725006352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969725006352384[0;39m ==> Parameters: 
2021-12-20 11:06:00.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969725006352384[0;39m <==    Updates: 0
2021-12-20 11:06:00.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127969725006352384[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-20 11:06:05.017 INFO  com.job.DocJob                                    :32   [32m127969746032398336[0;39m 更新电子书下的文档数据开始
2021-12-20 11:06:05.077 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969746032398336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:06:05.077 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969746032398336[0;39m ==> Parameters: 
2021-12-20 11:06:05.250 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969746032398336[0;39m <==    Updates: 3
2021-12-20 11:06:05.251 INFO  com.job.DocJob                                    :35   [32m127969746032398336[0;39m 更新电子书下的文档数据结束，耗时：234毫秒
2021-12-20 11:06:05.252 INFO  com.job.EbookSnapshotJob                          :32   [32m127969747018059776[0;39m 生成今日电子书快照开始
2021-12-20 11:06:05.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969747018059776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:05.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969747018059776[0;39m ==> Parameters: 
2021-12-20 11:06:05.407 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969747018059776[0;39m <==    Updates: 0
2021-12-20 11:06:05.407 INFO  com.job.EbookSnapshotJob                          :35   [32m127969747018059776[0;39m 生成今日电子书快照结束，耗时：155毫秒
2021-12-20 11:06:06.879 INFO  com.aspect.LogAspect                              :54   [32m127969753842192384[0;39m ------------- 开始 -------------
2021-12-20 11:06:06.879 INFO  com.aspect.LogAspect                              :55   [32m127969753842192384[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:06:06.880 INFO  com.aspect.LogAspect                              :56   [32m127969753842192384[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:06:06.881 INFO  com.aspect.LogAspect                              :57   [32m127969753842192384[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:06.881 INFO  com.aspect.LogAspect                              :80   [32m127969753842192384[0;39m 请求参数: [{"loginName":"test12345"}]
2021-12-20 11:06:06.957 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969753842192384[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:06:06.959 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969753842192384[0;39m ==> Parameters: test12345(String)
2021-12-20 11:06:07.039 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969753842192384[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:06:07.040 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969753842192384[0;39m <==        Row: 127969710334676992, test12345, 12345, cc03e747a6afbbcbf8be7668acfebee5
2021-12-20 11:06:07.041 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969753842192384[0;39m <==      Total: 1
2021-12-20 11:06:07.043 INFO  com.servicess.UserService                         :144  [32m127969753842192384[0;39m 密码不对，输入密码：7354a1d413535a6c0dc5c209e198d799，数据库密码：cc03e747a6afbbcbf8be7668acfebee5
2021-12-20 11:06:07.051 WARN  com.controller.ControllerExceptionHandler         :44   [32m127969753842192384[0;39m 业务异常：用户名不存在或密码错误
2021-12-20 11:06:07.055 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m127969753842192384[0;39m Resolved [com.exception.BusinessException: 用户名不存在或密码错误]
2021-12-20 11:06:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127969766953586688[0;39m 生成今日电子书快照开始
2021-12-20 11:06:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969766953586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969766953586688[0;39m ==> Parameters: 
2021-12-20 11:06:10.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969766953586688[0;39m <==    Updates: 0
2021-12-20 11:06:10.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127969766953586688[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:06:14.965 INFO  com.aspect.LogAspect                              :54   [32m127969787757334528[0;39m ------------- 开始 -------------
2021-12-20 11:06:14.966 INFO  com.aspect.LogAspect                              :55   [32m127969787757334528[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:06:14.968 INFO  com.aspect.LogAspect                              :56   [32m127969787757334528[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:06:14.968 INFO  com.aspect.LogAspect                              :57   [32m127969787757334528[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:14.968 INFO  com.aspect.LogAspect                              :80   [32m127969787757334528[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 11:06:15.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127969787971244032[0;39m 生成今日电子书快照开始
2021-12-20 11:06:15.049 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969787757334528[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:06:15.049 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969787757334528[0;39m ==> Parameters: test123(String)
2021-12-20 11:06:15.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969787971244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:15.113 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969787971244032[0;39m ==> Parameters: 
2021-12-20 11:06:15.128 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969787757334528[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:06:15.129 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969787757334528[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:06:15.129 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969787757334528[0;39m <==      Total: 1
2021-12-20 11:06:15.130 INFO  com.servicess.UserService                         :144  [32m127969787757334528[0;39m 密码不对，输入密码：3238368c42416797d05be704a84cf6c0，数据库密码：7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:06:15.130 WARN  com.controller.ControllerExceptionHandler         :44   [32m127969787757334528[0;39m 业务异常：用户名不存在或密码错误
2021-12-20 11:06:15.132 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m127969787757334528[0;39m Resolved [com.exception.BusinessException: 用户名不存在或密码错误]
2021-12-20 11:06:15.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969787971244032[0;39m <==    Updates: 0
2021-12-20 11:06:15.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127969787971244032[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:06:20.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127969808888238080[0;39m 生成今日电子书快照开始
2021-12-20 11:06:20.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969808888238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:20.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969808888238080[0;39m ==> Parameters: 
2021-12-20 11:06:20.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969808888238080[0;39m <==    Updates: 0
2021-12-20 11:06:20.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127969808888238080[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 11:06:20.683 INFO  com.aspect.LogAspect                              :54   [32m127969811740364800[0;39m ------------- 开始 -------------
2021-12-20 11:06:20.684 INFO  com.aspect.LogAspect                              :55   [32m127969811740364800[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:06:20.685 INFO  com.aspect.LogAspect                              :56   [32m127969811740364800[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:06:20.685 INFO  com.aspect.LogAspect                              :57   [32m127969811740364800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:20.685 INFO  com.aspect.LogAspect                              :80   [32m127969811740364800[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 11:06:20.781 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969811740364800[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:06:20.782 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969811740364800[0;39m ==> Parameters: test123(String)
2021-12-20 11:06:20.876 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969811740364800[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:06:20.877 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969811740364800[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:06:20.878 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969811740364800[0;39m <==      Total: 1
2021-12-20 11:06:20.893 INFO  com.controller.UserController                     :77   [32m127969811740364800[0;39m 生成单点登录token:127969812621168640,并放入redis中
2021-12-20 11:06:21.497 INFO  com.aspect.LogAspect                              :92   [32m127969811740364800[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127969812621168640"},"success":true}
2021-12-20 11:06:21.497 INFO  com.aspect.LogAspect                              :93   [32m127969811740364800[0;39m ------------- 结束 耗时：814 ms -------------
2021-12-20 11:06:21.596 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：kjVcEVWzkv，session id：3！当前连接数：0
2021-12-20 11:06:22.714 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：cq9ALBf35r，session id：4，当前连接数：1
2021-12-20 11:06:22.800 INFO  com.aspect.LogAspect                              :54   [32m127969820619706368[0;39m ------------- 开始 -------------
2021-12-20 11:06:22.800 INFO  com.aspect.LogAspect                              :55   [32m127969820619706368[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :56   [32m127969820619706368[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :54   [32m127969820623900672[0;39m ------------- 开始 -------------
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :55   [32m127969820623900672[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :57   [32m127969820619706368[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :56   [32m127969820623900672[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :80   [32m127969820619706368[0;39m 请求参数: []
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :57   [32m127969820623900672[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:22.801 INFO  com.aspect.LogAspect                              :80   [32m127969820623900672[0;39m 请求参数: []
2021-12-20 11:06:22.804 INFO  com.aspect.LogAspect                              :54   [32m127969820636483584[0;39m ------------- 开始 -------------
2021-12-20 11:06:22.804 INFO  com.aspect.LogAspect                              :55   [32m127969820636483584[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:06:22.805 INFO  com.aspect.LogAspect                              :56   [32m127969820636483584[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:06:22.805 INFO  com.aspect.LogAspect                              :57   [32m127969820636483584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:22.805 INFO  com.aspect.LogAspect                              :80   [32m127969820636483584[0;39m 请求参数: []
2021-12-20 11:06:22.885 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969820623900672[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:06:22.885 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969820623900672[0;39m ==> Parameters: 
2021-12-20 11:06:22.886 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969820619706368[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:06:22.886 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969820619706368[0;39m ==> Parameters: 
2021-12-20 11:06:22.890 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969820636483584[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:06:22.890 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969820636483584[0;39m ==> Parameters: 
2021-12-20 11:06:22.968 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:06:22.968 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:06:22.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:06:22.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:06:22.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:06:22.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:06:22.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:06:22.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:06:22.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:06:22.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:06:22.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:06:22.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:06:22.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:06:22.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:06:22.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:06:22.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:06:22.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:06:22.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:06:22.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:06:22.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969820636483584[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:06:22.973 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969820636483584[0;39m <==      Total: 19
2021-12-20 11:06:22.973 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969820623900672[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:06:22.973 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969820619706368[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:06:22.974 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969820623900672[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:06:22.974 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969820619706368[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:06:22.975 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969820619706368[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:06:22.975 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969820623900672[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:06:22.975 INFO  com.aspect.LogAspect                              :92   [32m127969820636483584[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:06:22.975 INFO  com.aspect.LogAspect                              :93   [32m127969820636483584[0;39m ------------- 结束 耗时：171 ms -------------
2021-12-20 11:06:22.975 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969820619706368[0;39m <==      Total: 2
2021-12-20 11:06:22.975 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969820623900672[0;39m <==      Total: 2
2021-12-20 11:06:22.975 INFO  com.aspect.LogAspect                              :92   [32m127969820623900672[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:06:22.975 INFO  com.aspect.LogAspect                              :92   [32m127969820619706368[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:06:22.976 INFO  com.aspect.LogAspect                              :93   [32m127969820619706368[0;39m ------------- 结束 耗时：176 ms -------------
2021-12-20 11:06:22.976 INFO  com.aspect.LogAspect                              :93   [32m127969820623900672[0;39m ------------- 结束 耗时：175 ms -------------
2021-12-20 11:06:25.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127969829855563776[0;39m 生成今日电子书快照开始
2021-12-20 11:06:25.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969829855563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:25.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969829855563776[0;39m ==> Parameters: 
2021-12-20 11:06:25.108 INFO  com.aspect.LogAspect                              :54   [32m127969830300160000[0;39m ------------- 开始 -------------
2021-12-20 11:06:25.108 INFO  com.aspect.LogAspect                              :55   [32m127969830300160000[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 11:06:25.108 INFO  com.aspect.LogAspect                              :56   [32m127969830300160000[0;39m 类名方法: com.controller.UserController.list
2021-12-20 11:06:25.109 INFO  com.aspect.LogAspect                              :57   [32m127969830300160000[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:25.110 INFO  com.aspect.LogAspect                              :80   [32m127969830300160000[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:06:25.214 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127969830300160000[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 11:06:25.215 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127969830300160000[0;39m ==> Parameters: 
2021-12-20 11:06:25.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969829855563776[0;39m <==    Updates: 0
2021-12-20 11:06:25.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127969829855563776[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 11:06:25.279 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127969830300160000[0;39m <==    Columns: count(0)
2021-12-20 11:06:25.280 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127969830300160000[0;39m <==        Row: 8
2021-12-20 11:06:25.282 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127969830300160000[0;39m <==      Total: 1
2021-12-20 11:06:25.287 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969830300160000[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 11:06:25.288 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969830300160000[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:06:25.367 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:06:25.368 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:06:25.368 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:06:25.369 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:06:25.370 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:06:25.370 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 11:06:25.371 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:06:25.372 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:06:25.372 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969830300160000[0;39m <==        Row: 127969710334676992, test12345, 12345, cc03e747a6afbbcbf8be7668acfebee5
2021-12-20 11:06:25.373 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969830300160000[0;39m <==      Total: 8
2021-12-20 11:06:25.379 INFO  com.servicess.UserService                         :52   [32m127969830300160000[0;39m 总行数：8
2021-12-20 11:06:25.380 INFO  com.servicess.UserService                         :53   [32m127969830300160000[0;39m 总页数：1
2021-12-20 11:06:25.400 INFO  com.aspect.LogAspect                              :92   [32m127969830300160000[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 11:06:25.401 INFO  com.aspect.LogAspect                              :93   [32m127969830300160000[0;39m ------------- 结束 耗时：293 ms -------------
2021-12-20 11:06:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127969850869026816[0;39m 生成今日电子书快照开始
2021-12-20 11:06:30.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969850869026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969850869026816[0;39m ==> Parameters: 
2021-12-20 11:06:30.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969850869026816[0;39m <==    Updates: 0
2021-12-20 11:06:30.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127969850869026816[0;39m 生成今日电子书快照结束，耗时：258毫秒
2021-12-20 11:06:34.630 INFO  com.aspect.LogAspect                              :54   [32m127969870238322688[0;39m ------------- 开始 -------------
2021-12-20 11:06:34.630 INFO  com.aspect.LogAspect                              :55   [32m127969870238322688[0;39m 请求地址: http://localhost:8081/user/logout/127969812621168640 GET
2021-12-20 11:06:34.630 INFO  com.aspect.LogAspect                              :56   [32m127969870238322688[0;39m 类名方法: com.controller.UserController.logout
2021-12-20 11:06:34.630 INFO  com.aspect.LogAspect                              :57   [32m127969870238322688[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:34.631 INFO  com.aspect.LogAspect                              :80   [32m127969870238322688[0;39m 请求参数: ["127969812621168640"]
2021-12-20 11:06:34.695 INFO  com.controller.UserController                     :89   [32m127969870238322688[0;39m 从redis中删除token：127969812621168640
2021-12-20 11:06:34.695 INFO  com.aspect.LogAspect                              :92   [32m127969870238322688[0;39m 返回结果: {"success":true}
2021-12-20 11:06:34.696 INFO  com.aspect.LogAspect                              :93   [32m127969870238322688[0;39m ------------- 结束 耗时：66 ms -------------
2021-12-20 11:06:35.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127969871790215168[0;39m 生成今日电子书快照开始
2021-12-20 11:06:35.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969871790215168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:35.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969871790215168[0;39m ==> Parameters: 
2021-12-20 11:06:35.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969871790215168[0;39m <==    Updates: 0
2021-12-20 11:06:35.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127969871790215168[0;39m 生成今日电子书快照结束，耗时：258毫秒
2021-12-20 11:06:35.259 INFO  com.job.DocJob                                    :32   [32m127969872876539904[0;39m 更新电子书下的文档数据开始
2021-12-20 11:06:35.260 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969872876539904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:06:35.261 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969872876539904[0;39m ==> Parameters: 
2021-12-20 11:06:35.402 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969872876539904[0;39m <==    Updates: 3
2021-12-20 11:06:35.403 INFO  com.job.DocJob                                    :35   [32m127969872876539904[0;39m 更新电子书下的文档数据结束，耗时：144毫秒
2021-12-20 11:06:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127969892824649728[0;39m 生成今日电子书快照开始
2021-12-20 11:06:40.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969892824649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:40.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969892824649728[0;39m ==> Parameters: 
2021-12-20 11:06:40.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969892824649728[0;39m <==    Updates: 0
2021-12-20 11:06:40.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127969892824649728[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:06:43.873 INFO  com.aspect.LogAspect                              :54   [32m127969909006274560[0;39m ------------- 开始 -------------
2021-12-20 11:06:43.873 INFO  com.aspect.LogAspect                              :55   [32m127969909006274560[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:06:43.873 INFO  com.aspect.LogAspect                              :56   [32m127969909006274560[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:06:43.874 INFO  com.aspect.LogAspect                              :57   [32m127969909006274560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:43.874 INFO  com.aspect.LogAspect                              :80   [32m127969909006274560[0;39m 请求参数: [{"loginName":"test12345"}]
2021-12-20 11:06:43.947 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969909006274560[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:06:43.949 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969909006274560[0;39m ==> Parameters: test12345(String)
2021-12-20 11:06:44.028 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969909006274560[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:06:44.029 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969909006274560[0;39m <==        Row: 127969710334676992, test12345, 12345, cc03e747a6afbbcbf8be7668acfebee5
2021-12-20 11:06:44.031 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969909006274560[0;39m <==      Total: 1
2021-12-20 11:06:44.032 INFO  com.servicess.UserService                         :144  [32m127969909006274560[0;39m 密码不对，输入密码：7354a1d413535a6c0dc5c209e198d799，数据库密码：cc03e747a6afbbcbf8be7668acfebee5
2021-12-20 11:06:44.034 WARN  com.controller.ControllerExceptionHandler         :44   [32m127969909006274560[0;39m 业务异常：用户名不存在或密码错误
2021-12-20 11:06:44.037 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m127969909006274560[0;39m Resolved [com.exception.BusinessException: 用户名不存在或密码错误]
2021-12-20 11:06:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127969913787781120[0;39m 生成今日电子书快照开始
2021-12-20 11:06:45.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969913787781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:45.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969913787781120[0;39m ==> Parameters: 
2021-12-20 11:06:45.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969913787781120[0;39m <==    Updates: 0
2021-12-20 11:06:45.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127969913787781120[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 11:06:50.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127969934725746688[0;39m 生成今日电子书快照开始
2021-12-20 11:06:50.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969934725746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:50.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969934725746688[0;39m ==> Parameters: 
2021-12-20 11:06:50.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969934725746688[0;39m <==    Updates: 0
2021-12-20 11:06:50.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127969934725746688[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 11:06:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127969955739209728[0;39m 生成今日电子书快照开始
2021-12-20 11:06:55.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969955739209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:06:55.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969955739209728[0;39m ==> Parameters: 
2021-12-20 11:06:55.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969955739209728[0;39m <==    Updates: 0
2021-12-20 11:06:55.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127969955739209728[0;39m 生成今日电子书快照结束，耗时：236毫秒
2021-12-20 11:06:56.077 INFO  com.websocket.WebSocketServer                     :41   [32m127969811740364800[0;39m 连接关闭，token：cq9ALBf35r，session id：4！当前连接数：0
2021-12-20 11:06:56.755 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：LfA2IwF2gk，session id：5，当前连接数：1
2021-12-20 11:06:56.825 INFO  com.aspect.LogAspect                              :54   [32m127969963330899968[0;39m ------------- 开始 -------------
2021-12-20 11:06:56.825 INFO  com.aspect.LogAspect                              :55   [32m127969963330899968[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:06:56.825 INFO  com.aspect.LogAspect                              :56   [32m127969963330899968[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:06:56.825 INFO  com.aspect.LogAspect                              :57   [32m127969963330899968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:56.826 INFO  com.aspect.LogAspect                              :80   [32m127969963330899968[0;39m 请求参数: []
2021-12-20 11:06:56.826 INFO  com.aspect.LogAspect                              :54   [32m127969963335094272[0;39m ------------- 开始 -------------
2021-12-20 11:06:56.826 INFO  com.aspect.LogAspect                              :55   [32m127969963335094272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:06:56.826 INFO  com.aspect.LogAspect                              :56   [32m127969963335094272[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:06:56.827 INFO  com.aspect.LogAspect                              :57   [32m127969963335094272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:56.827 INFO  com.aspect.LogAspect                              :80   [32m127969963335094272[0;39m 请求参数: []
2021-12-20 11:06:56.829 INFO  com.aspect.LogAspect                              :54   [32m127969963347677184[0;39m ------------- 开始 -------------
2021-12-20 11:06:56.829 INFO  com.aspect.LogAspect                              :55   [32m127969963347677184[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:06:56.829 INFO  com.aspect.LogAspect                              :56   [32m127969963347677184[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:06:56.830 INFO  com.aspect.LogAspect                              :57   [32m127969963347677184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:06:56.830 INFO  com.aspect.LogAspect                              :80   [32m127969963347677184[0;39m 请求参数: []
2021-12-20 11:06:56.995 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969963330899968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:06:56.995 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969963330899968[0;39m ==> Parameters: 
2021-12-20 11:06:57.014 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969963335094272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:06:57.015 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969963347677184[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:06:57.016 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969963335094272[0;39m ==> Parameters: 
2021-12-20 11:06:57.016 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969963347677184[0;39m ==> Parameters: 
2021-12-20 11:06:57.089 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969963330899968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:06:57.091 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969963330899968[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:06:57.093 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969963330899968[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:06:57.094 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969963330899968[0;39m <==      Total: 2
2021-12-20 11:06:57.095 INFO  com.aspect.LogAspect                              :92   [32m127969963330899968[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:06:57.096 INFO  com.aspect.LogAspect                              :93   [32m127969963330899968[0;39m ------------- 结束 耗时：271 ms -------------
2021-12-20 11:06:57.100 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969963335094272[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:06:57.100 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:06:57.101 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:06:57.102 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969963335094272[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:06:57.102 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:06:57.104 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:06:57.104 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969963335094272[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:06:57.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:06:57.105 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969963335094272[0;39m <==      Total: 2
2021-12-20 11:06:57.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:06:57.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:06:57.107 INFO  com.aspect.LogAspect                              :92   [32m127969963335094272[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:06:57.108 INFO  com.aspect.LogAspect                              :93   [32m127969963335094272[0;39m ------------- 结束 耗时：282 ms -------------
2021-12-20 11:06:57.108 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:06:57.109 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:06:57.111 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:06:57.112 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:06:57.113 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:06:57.115 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:06:57.118 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:06:57.119 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:06:57.121 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:06:57.122 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:06:57.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:06:57.125 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:06:57.126 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969963347677184[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:06:57.128 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969963347677184[0;39m <==      Total: 19
2021-12-20 11:06:57.131 INFO  com.aspect.LogAspect                              :92   [32m127969963347677184[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:06:57.132 INFO  com.aspect.LogAspect                              :93   [32m127969963347677184[0;39m ------------- 结束 耗时：303 ms -------------
2021-12-20 11:07:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127969976706535424[0;39m 生成今日电子书快照开始
2021-12-20 11:07:00.141 INFO  com.aspect.LogAspect                              :54   [32m127969977239212032[0;39m ------------- 开始 -------------
2021-12-20 11:07:00.141 INFO  com.aspect.LogAspect                              :55   [32m127969977239212032[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:07:00.141 INFO  com.aspect.LogAspect                              :56   [32m127969977239212032[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:07:00.142 INFO  com.aspect.LogAspect                              :57   [32m127969977239212032[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:00.142 INFO  com.aspect.LogAspect                              :80   [32m127969977239212032[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 11:07:00.207 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969976706535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:00.207 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969976706535424[0;39m ==> Parameters: 
2021-12-20 11:07:00.218 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969977239212032[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:07:00.218 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969977239212032[0;39m ==> Parameters: test123(String)
2021-12-20 11:07:00.302 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969977239212032[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:07:00.302 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969977239212032[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:00.303 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969977239212032[0;39m <==      Total: 1
2021-12-20 11:07:00.303 INFO  com.controller.UserController                     :77   [32m127969977239212032[0;39m 生成单点登录token:127969977918689280,并放入redis中
2021-12-20 11:07:00.344 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969976706535424[0;39m <==    Updates: 0
2021-12-20 11:07:00.345 INFO  com.job.EbookSnapshotJob                          :35   [32m127969976706535424[0;39m 生成今日电子书快照结束，耗时：330毫秒
2021-12-20 11:07:00.345 INFO  com.aspect.LogAspect                              :92   [32m127969977239212032[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127969977918689280"},"success":true}
2021-12-20 11:07:00.346 INFO  com.aspect.LogAspect                              :93   [32m127969977239212032[0;39m ------------- 结束 耗时：205 ms -------------
2021-12-20 11:07:00.473 INFO  com.websocket.WebSocketServer                     :41   [32m127969830300160000[0;39m 连接关闭，token：LfA2IwF2gk，session id：5！当前连接数：0
2021-12-20 11:07:01.113 INFO  com.websocket.WebSocketServer                     :32   [32m127969709583896576[0;39m 有新连接：token：bHnimva0PY，session id：6，当前连接数：1
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :54   [32m127969981676785664[0;39m ------------- 开始 -------------
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :54   [32m127969981676785665[0;39m ------------- 开始 -------------
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :55   [32m127969981676785665[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :55   [32m127969981676785664[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :56   [32m127969981676785664[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :56   [32m127969981676785665[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :57   [32m127969981676785664[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:01.199 INFO  com.aspect.LogAspect                              :57   [32m127969981676785665[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:01.200 INFO  com.aspect.LogAspect                              :80   [32m127969981676785665[0;39m 请求参数: []
2021-12-20 11:07:01.200 INFO  com.aspect.LogAspect                              :80   [32m127969981676785664[0;39m 请求参数: []
2021-12-20 11:07:01.202 INFO  com.aspect.LogAspect                              :54   [32m127969981689368576[0;39m ------------- 开始 -------------
2021-12-20 11:07:01.202 INFO  com.aspect.LogAspect                              :55   [32m127969981689368576[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:01.202 INFO  com.aspect.LogAspect                              :56   [32m127969981689368576[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:01.202 INFO  com.aspect.LogAspect                              :57   [32m127969981689368576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:01.203 INFO  com.aspect.LogAspect                              :80   [32m127969981689368576[0;39m 请求参数: []
2021-12-20 11:07:01.269 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969981676785665[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:01.269 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969981676785664[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:01.269 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969981676785665[0;39m ==> Parameters: 
2021-12-20 11:07:01.269 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969981676785664[0;39m ==> Parameters: 
2021-12-20 11:07:01.275 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969981689368576[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:01.275 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969981689368576[0;39m ==> Parameters: 
2021-12-20 11:07:01.356 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969981676785665[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:01.356 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969981676785664[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:01.356 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969981676785665[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:07:01.356 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969981676785664[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:01.356 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127969981676785664[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:07:01.356 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127969981676785665[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:01.356 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127969981676785664[0;39m <==      Total: 2
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:01.356 INFO  com.aspect.LogAspect                              :92   [32m127969981676785664[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:07:01.356 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127969981676785665[0;39m <==      Total: 2
2021-12-20 11:07:01.356 INFO  com.aspect.LogAspect                              :93   [32m127969981676785664[0;39m ------------- 结束 耗时：157 ms -------------
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:01.356 INFO  com.aspect.LogAspect                              :92   [32m127969981676785665[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:01.356 INFO  com.aspect.LogAspect                              :93   [32m127969981676785665[0;39m ------------- 结束 耗时：157 ms -------------
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:01.356 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:01.361 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:01.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:01.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:01.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127969981689368576[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:01.364 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127969981689368576[0;39m <==      Total: 19
2021-12-20 11:07:01.365 INFO  com.aspect.LogAspect                              :92   [32m127969981689368576[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:01.365 INFO  com.aspect.LogAspect                              :93   [32m127969981689368576[0;39m ------------- 结束 耗时：163 ms -------------
2021-12-20 11:07:01.709 INFO  com.aspect.LogAspect                              :54   [32m127969983815880704[0;39m ------------- 开始 -------------
2021-12-20 11:07:01.710 INFO  com.aspect.LogAspect                              :55   [32m127969983815880704[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 11:07:01.710 INFO  com.aspect.LogAspect                              :56   [32m127969983815880704[0;39m 类名方法: com.controller.UserController.list
2021-12-20 11:07:01.710 INFO  com.aspect.LogAspect                              :57   [32m127969983815880704[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:01.710 INFO  com.aspect.LogAspect                              :80   [32m127969983815880704[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:07:01.712 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127969983815880704[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 11:07:01.713 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127969983815880704[0;39m ==> Parameters: 
2021-12-20 11:07:01.816 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127969983815880704[0;39m <==    Columns: count(0)
2021-12-20 11:07:01.816 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127969983815880704[0;39m <==        Row: 8
2021-12-20 11:07:01.816 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127969983815880704[0;39m <==      Total: 1
2021-12-20 11:07:01.817 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969983815880704[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 11:07:01.817 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969983815880704[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:07:01.894 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:07:01.895 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:01.895 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:01.896 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:01.898 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:01.899 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 11:07:01.900 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:01.900 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:01.901 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127969983815880704[0;39m <==        Row: 127969710334676992, test12345, 12345, cc03e747a6afbbcbf8be7668acfebee5
2021-12-20 11:07:01.901 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127969983815880704[0;39m <==      Total: 8
2021-12-20 11:07:01.901 INFO  com.servicess.UserService                         :52   [32m127969983815880704[0;39m 总行数：8
2021-12-20 11:07:01.902 INFO  com.servicess.UserService                         :53   [32m127969983815880704[0;39m 总页数：1
2021-12-20 11:07:01.904 INFO  com.aspect.LogAspect                              :92   [32m127969983815880704[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 11:07:01.904 INFO  com.aspect.LogAspect                              :93   [32m127969983815880704[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-20 11:07:05.001 INFO  com.job.DocJob                                    :32   [32m127969997623529472[0;39m 更新电子书下的文档数据开始
2021-12-20 11:07:05.065 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969997623529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:07:05.065 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969997623529472[0;39m ==> Parameters: 
2021-12-20 11:07:05.208 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127969997623529472[0;39m <==    Updates: 3
2021-12-20 11:07:05.209 INFO  com.job.DocJob                                    :35   [32m127969997623529472[0;39m 更新电子书下的文档数据结束，耗时：208毫秒
2021-12-20 11:07:05.210 INFO  com.job.EbookSnapshotJob                          :32   [32m127969998500139008[0;39m 生成今日电子书快照开始
2021-12-20 11:07:05.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969998500139008[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:05.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969998500139008[0;39m ==> Parameters: 
2021-12-20 11:07:05.377 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127969998500139008[0;39m <==    Updates: 0
2021-12-20 11:07:05.378 INFO  com.job.EbookSnapshotJob                          :35   [32m127969998500139008[0;39m 生成今日电子书快照结束，耗时：168毫秒
2021-12-20 11:07:09.564 INFO  com.aspect.LogAspect                              :54   [32m127970016762138624[0;39m ------------- 开始 -------------
2021-12-20 11:07:09.565 INFO  com.aspect.LogAspect                              :55   [32m127970016762138624[0;39m 请求地址: http://localhost:8081/user/reset-password POST
2021-12-20 11:07:09.565 INFO  com.aspect.LogAspect                              :56   [32m127970016762138624[0;39m 类名方法: com.controller.UserController.resetPassword
2021-12-20 11:07:09.565 INFO  com.aspect.LogAspect                              :57   [32m127970016762138624[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:09.566 INFO  com.aspect.LogAspect                              :80   [32m127970016762138624[0;39m 请求参数: [{"id":127969710334676992}]
2021-12-20 11:07:09.647 DEBUG com.mapper.UserMapper.updateByPrimaryKeySelective :137  [32m127970016762138624[0;39m ==>  Preparing: update user SET `password` = ? where id = ?
2021-12-20 11:07:09.647 DEBUG com.mapper.UserMapper.updateByPrimaryKeySelective :137  [32m127970016762138624[0;39m ==> Parameters: 7354a1d413535a6c0dc5c209e198d799(String), 127969710334676992(Long)
2021-12-20 11:07:09.780 DEBUG com.mapper.UserMapper.updateByPrimaryKeySelective :137  [32m127970016762138624[0;39m <==    Updates: 1
2021-12-20 11:07:09.781 INFO  com.aspect.LogAspect                              :92   [32m127970016762138624[0;39m 返回结果: {"success":true}
2021-12-20 11:07:09.781 INFO  com.aspect.LogAspect                              :93   [32m127970016762138624[0;39m ------------- 结束 耗时：217 ms -------------
2021-12-20 11:07:09.813 INFO  com.aspect.LogAspect                              :54   [32m127970017806520320[0;39m ------------- 开始 -------------
2021-12-20 11:07:09.813 INFO  com.aspect.LogAspect                              :55   [32m127970017806520320[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 11:07:09.814 INFO  com.aspect.LogAspect                              :56   [32m127970017806520320[0;39m 类名方法: com.controller.UserController.list
2021-12-20 11:07:09.814 INFO  com.aspect.LogAspect                              :57   [32m127970017806520320[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:09.814 INFO  com.aspect.LogAspect                              :80   [32m127970017806520320[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:07:09.893 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127970017806520320[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 11:07:09.893 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127970017806520320[0;39m ==> Parameters: 
2021-12-20 11:07:09.972 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127970017806520320[0;39m <==    Columns: count(0)
2021-12-20 11:07:09.973 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127970017806520320[0;39m <==        Row: 8
2021-12-20 11:07:09.974 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127970017806520320[0;39m <==      Total: 1
2021-12-20 11:07:09.975 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970017806520320[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 11:07:09.976 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970017806520320[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:07:10.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127970018607632384[0;39m 生成今日电子书快照开始
2021-12-20 11:07:10.059 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:07:10.060 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:10.060 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:10.061 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:10.061 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:10.061 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 11:07:10.061 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:10.062 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:10.062 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970017806520320[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:10.063 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970017806520320[0;39m <==      Total: 8
2021-12-20 11:07:10.063 INFO  com.servicess.UserService                         :52   [32m127970017806520320[0;39m 总行数：8
2021-12-20 11:07:10.063 INFO  com.servicess.UserService                         :53   [32m127970017806520320[0;39m 总页数：1
2021-12-20 11:07:10.064 INFO  com.aspect.LogAspect                              :92   [32m127970017806520320[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 11:07:10.065 INFO  com.aspect.LogAspect                              :93   [32m127970017806520320[0;39m ------------- 结束 耗时：252 ms -------------
2021-12-20 11:07:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970018607632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:10.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970018607632384[0;39m ==> Parameters: 
2021-12-20 11:07:10.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970018607632384[0;39m <==    Updates: 0
2021-12-20 11:07:10.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127970018607632384[0;39m 生成今日电子书快照结束，耗时：211毫秒
2021-12-20 11:07:13.328 INFO  com.aspect.LogAspect                              :54   [32m127970032549498880[0;39m ------------- 开始 -------------
2021-12-20 11:07:13.329 INFO  com.aspect.LogAspect                              :55   [32m127970032549498880[0;39m 请求地址: http://localhost:8081/user/logout/127969977918689280 GET
2021-12-20 11:07:13.329 INFO  com.aspect.LogAspect                              :56   [32m127970032549498880[0;39m 类名方法: com.controller.UserController.logout
2021-12-20 11:07:13.329 INFO  com.aspect.LogAspect                              :57   [32m127970032549498880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:13.330 INFO  com.aspect.LogAspect                              :80   [32m127970032549498880[0;39m 请求参数: ["127969977918689280"]
2021-12-20 11:07:13.373 INFO  com.controller.UserController                     :89   [32m127970032549498880[0;39m 从redis中删除token：127969977918689280
2021-12-20 11:07:13.373 INFO  com.aspect.LogAspect                              :92   [32m127970032549498880[0;39m 返回结果: {"success":true}
2021-12-20 11:07:13.374 INFO  com.aspect.LogAspect                              :93   [32m127970032549498880[0;39m ------------- 结束 耗时：46 ms -------------
2021-12-20 11:07:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127970039621095424[0;39m 生成今日电子书快照开始
2021-12-20 11:07:15.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970039621095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:15.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970039621095424[0;39m ==> Parameters: 
2021-12-20 11:07:15.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970039621095424[0;39m <==    Updates: 0
2021-12-20 11:07:15.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127970039621095424[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 11:07:15.323 INFO  com.aspect.LogAspect                              :54   [32m127970040917135360[0;39m ------------- 开始 -------------
2021-12-20 11:07:15.324 INFO  com.aspect.LogAspect                              :55   [32m127970040917135360[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:07:15.324 INFO  com.aspect.LogAspect                              :56   [32m127970040917135360[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:07:15.324 INFO  com.aspect.LogAspect                              :57   [32m127970040917135360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:15.324 INFO  com.aspect.LogAspect                              :80   [32m127970040917135360[0;39m 请求参数: []
2021-12-20 11:07:15.324 INFO  com.aspect.LogAspect                              :54   [32m127970040921329664[0;39m ------------- 开始 -------------
2021-12-20 11:07:15.325 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970040917135360[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:15.325 INFO  com.aspect.LogAspect                              :55   [32m127970040921329664[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:07:15.325 INFO  com.aspect.LogAspect                              :56   [32m127970040921329664[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:07:15.325 INFO  com.aspect.LogAspect                              :57   [32m127970040921329664[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:15.325 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970040917135360[0;39m ==> Parameters: 
2021-12-20 11:07:15.325 INFO  com.aspect.LogAspect                              :80   [32m127970040921329664[0;39m 请求参数: []
2021-12-20 11:07:15.328 INFO  com.aspect.LogAspect                              :54   [32m127970040938106880[0;39m ------------- 开始 -------------
2021-12-20 11:07:15.328 INFO  com.aspect.LogAspect                              :55   [32m127970040938106880[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:15.328 INFO  com.aspect.LogAspect                              :56   [32m127970040938106880[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:15.328 INFO  com.aspect.LogAspect                              :57   [32m127970040938106880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:15.329 INFO  com.aspect.LogAspect                              :80   [32m127970040938106880[0;39m 请求参数: []
2021-12-20 11:07:15.398 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970040938106880[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:15.398 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970040938106880[0;39m ==> Parameters: 
2021-12-20 11:07:15.398 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970040921329664[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:15.398 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970040917135360[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:07:15.398 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970040921329664[0;39m ==> Parameters: 
2021-12-20 11:07:15.398 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970040917135360[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:07:15.398 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970040917135360[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:07:15.398 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970040917135360[0;39m <==      Total: 2
2021-12-20 11:07:15.398 INFO  com.aspect.LogAspect                              :92   [32m127970040917135360[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:07:15.398 INFO  com.aspect.LogAspect                              :93   [32m127970040917135360[0;39m ------------- 结束 耗时：75 ms -------------
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:15.481 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970040921329664[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:15.481 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970040921329664[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:15.481 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970040921329664[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:15.481 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970040921329664[0;39m <==      Total: 2
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:15.481 INFO  com.aspect.LogAspect                              :92   [32m127970040921329664[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:07:15.481 INFO  com.aspect.LogAspect                              :93   [32m127970040921329664[0;39m ------------- 结束 耗时：157 ms -------------
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:15.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:15.497 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:15.497 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:15.499 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:15.500 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:15.501 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970040938106880[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:15.502 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970040938106880[0;39m <==      Total: 19
2021-12-20 11:07:15.510 INFO  com.aspect.LogAspect                              :92   [32m127970040938106880[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:15.511 INFO  com.aspect.LogAspect                              :93   [32m127970040938106880[0;39m ------------- 结束 耗时：183 ms -------------
2021-12-20 11:07:20.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127970060546478080[0;39m 生成今日电子书快照开始
2021-12-20 11:07:20.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970060546478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:20.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970060546478080[0;39m ==> Parameters: 
2021-12-20 11:07:20.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970060546478080[0;39m <==    Updates: 0
2021-12-20 11:07:20.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127970060546478080[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:07:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127970081564135424[0;39m 生成今日电子书快照开始
2021-12-20 11:07:25.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970081564135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:25.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970081564135424[0;39m ==> Parameters: 
2021-12-20 11:07:25.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970081564135424[0;39m <==    Updates: 0
2021-12-20 11:07:25.246 INFO  com.job.EbookSnapshotJob                          :35   [32m127970081564135424[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:07:26.760 INFO  com.websocket.WebSocketServer                     :41   [32m127969981689368576[0;39m 连接关闭，token：bHnimva0PY，session id：6！当前连接数：0
2021-12-20 11:07:27.470 INFO  com.websocket.WebSocketServer                     :32   [32m127969983815880704[0;39m 有新连接：token：mScnAwDRwI，session id：7，当前连接数：1
2021-12-20 11:07:27.536 INFO  com.aspect.LogAspect                              :54   [32m127970092142170112[0;39m ------------- 开始 -------------
2021-12-20 11:07:27.537 INFO  com.aspect.LogAspect                              :55   [32m127970092142170112[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:07:27.537 INFO  com.aspect.LogAspect                              :56   [32m127970092142170112[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:07:27.537 INFO  com.aspect.LogAspect                              :57   [32m127970092142170112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:27.537 INFO  com.aspect.LogAspect                              :80   [32m127970092142170112[0;39m 请求参数: []
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :54   [32m127970092158947329[0;39m ------------- 开始 -------------
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :54   [32m127970092158947328[0;39m ------------- 开始 -------------
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :55   [32m127970092158947329[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :55   [32m127970092158947328[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :56   [32m127970092158947329[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :56   [32m127970092158947328[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :57   [32m127970092158947329[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:27.540 INFO  com.aspect.LogAspect                              :57   [32m127970092158947328[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:27.541 INFO  com.aspect.LogAspect                              :80   [32m127970092158947329[0;39m 请求参数: []
2021-12-20 11:07:27.541 INFO  com.aspect.LogAspect                              :80   [32m127970092158947328[0;39m 请求参数: []
2021-12-20 11:07:27.610 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970092158947328[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:27.610 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970092158947328[0;39m ==> Parameters: 
2021-12-20 11:07:27.613 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970092158947329[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:27.613 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970092142170112[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:27.614 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970092142170112[0;39m ==> Parameters: 
2021-12-20 11:07:27.614 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970092158947329[0;39m ==> Parameters: 
2021-12-20 11:07:27.689 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970092158947328[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:07:27.690 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970092158947328[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:07:27.691 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970092158947328[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:07:27.691 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970092158947328[0;39m <==      Total: 2
2021-12-20 11:07:27.692 INFO  com.aspect.LogAspect                              :92   [32m127970092158947328[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:07:27.692 INFO  com.aspect.LogAspect                              :93   [32m127970092158947328[0;39m ------------- 结束 耗时：152 ms -------------
2021-12-20 11:07:27.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:27.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:27.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:27.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:27.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:27.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:27.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:27.697 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:27.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:27.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:27.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:27.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:27.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:27.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:27.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:27.701 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:27.701 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:27.702 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:27.702 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:27.703 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970092158947329[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:27.703 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970092158947329[0;39m <==      Total: 19
2021-12-20 11:07:27.705 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970092142170112[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:07:27.705 INFO  com.aspect.LogAspect                              :92   [32m127970092158947329[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:27.705 INFO  com.aspect.LogAspect                              :93   [32m127970092158947329[0;39m ------------- 结束 耗时：165 ms -------------
2021-12-20 11:07:27.705 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970092142170112[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:07:27.706 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970092142170112[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:07:27.707 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970092142170112[0;39m <==      Total: 2
2021-12-20 11:07:27.708 INFO  com.aspect.LogAspect                              :92   [32m127970092142170112[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:07:27.708 INFO  com.aspect.LogAspect                              :93   [32m127970092142170112[0;39m ------------- 结束 耗时：172 ms -------------
2021-12-20 11:07:30.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127970102556626944[0;39m 生成今日电子书快照开始
2021-12-20 11:07:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970102556626944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:30.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970102556626944[0;39m ==> Parameters: 
2021-12-20 11:07:30.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970102556626944[0;39m <==    Updates: 0
2021-12-20 11:07:30.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127970102556626944[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 11:07:33.865 INFO  com.aspect.LogAspect                              :54   [32m127970118687920128[0;39m ------------- 开始 -------------
2021-12-20 11:07:33.865 INFO  com.aspect.LogAspect                              :55   [32m127970118687920128[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:07:33.865 INFO  com.aspect.LogAspect                              :56   [32m127970118687920128[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:07:33.865 INFO  com.aspect.LogAspect                              :57   [32m127970118687920128[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:33.866 INFO  com.aspect.LogAspect                              :80   [32m127970118687920128[0;39m 请求参数: [{"loginName":"test12345"}]
2021-12-20 11:07:33.964 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970118687920128[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:07:33.965 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970118687920128[0;39m ==> Parameters: test12345(String)
2021-12-20 11:07:34.054 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970118687920128[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:07:34.054 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970118687920128[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:34.055 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970118687920128[0;39m <==      Total: 1
2021-12-20 11:07:34.056 INFO  com.controller.UserController                     :77   [32m127970118687920128[0;39m 生成单点登录token:127970119489032192,并放入redis中
2021-12-20 11:07:34.107 INFO  com.aspect.LogAspect                              :92   [32m127970118687920128[0;39m 返回结果: {"content":{"id":127969710334676992,"loginName":"test12345","name":"12345","token":"127970119489032192"},"success":true}
2021-12-20 11:07:34.108 INFO  com.aspect.LogAspect                              :93   [32m127970118687920128[0;39m ------------- 结束 耗时：243 ms -------------
2021-12-20 11:07:34.234 INFO  com.websocket.WebSocketServer                     :41   [32m127970032549498880[0;39m 连接关闭，token：mScnAwDRwI，session id：7！当前连接数：0
2021-12-20 11:07:34.868 INFO  com.websocket.WebSocketServer                     :32   [32m127970040917135360[0;39m 有新连接：token：qq7guPEJcB，session id：8，当前连接数：1
2021-12-20 11:07:34.946 INFO  com.aspect.LogAspect                              :54   [32m127970123221962752[0;39m ------------- 开始 -------------
2021-12-20 11:07:34.947 INFO  com.aspect.LogAspect                              :55   [32m127970123221962752[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:07:34.947 INFO  com.aspect.LogAspect                              :56   [32m127970123221962752[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:07:34.947 INFO  com.aspect.LogAspect                              :57   [32m127970123221962752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:34.947 INFO  com.aspect.LogAspect                              :80   [32m127970123221962752[0;39m 请求参数: []
2021-12-20 11:07:34.949 INFO  com.aspect.LogAspect                              :54   [32m127970123234545664[0;39m ------------- 开始 -------------
2021-12-20 11:07:34.949 INFO  com.aspect.LogAspect                              :55   [32m127970123234545664[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:07:34.949 INFO  com.aspect.LogAspect                              :56   [32m127970123234545664[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:07:34.949 INFO  com.aspect.LogAspect                              :54   [32m127970123234545665[0;39m ------------- 开始 -------------
2021-12-20 11:07:34.950 INFO  com.aspect.LogAspect                              :57   [32m127970123234545664[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:34.950 INFO  com.aspect.LogAspect                              :80   [32m127970123234545664[0;39m 请求参数: []
2021-12-20 11:07:34.950 INFO  com.aspect.LogAspect                              :55   [32m127970123234545665[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:34.950 INFO  com.aspect.LogAspect                              :56   [32m127970123234545665[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:34.951 INFO  com.aspect.LogAspect                              :57   [32m127970123234545665[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:34.951 INFO  com.aspect.LogAspect                              :80   [32m127970123234545665[0;39m 请求参数: []
2021-12-20 11:07:35.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127970123502981120[0;39m 生成今日电子书快照开始
2021-12-20 11:07:35.018 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970123221962752[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:35.018 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970123221962752[0;39m ==> Parameters: 
2021-12-20 11:07:35.033 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970123234545664[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:35.033 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970123234545664[0;39m ==> Parameters: 
2021-12-20 11:07:35.044 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970123234545665[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:35.044 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970123234545665[0;39m ==> Parameters: 
2021-12-20 11:07:35.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970123502981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:35.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970123502981120[0;39m ==> Parameters: 
2021-12-20 11:07:35.109 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970123221962752[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:07:35.110 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970123221962752[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:07:35.111 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970123221962752[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:07:35.112 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970123221962752[0;39m <==      Total: 2
2021-12-20 11:07:35.112 INFO  com.aspect.LogAspect                              :92   [32m127970123221962752[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:07:35.113 INFO  com.aspect.LogAspect                              :93   [32m127970123221962752[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-20 11:07:35.134 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970123234545664[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:07:35.135 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970123234545664[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:07:35.137 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970123234545664[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:07:35.138 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970123234545664[0;39m <==      Total: 2
2021-12-20 11:07:35.140 INFO  com.aspect.LogAspect                              :92   [32m127970123234545664[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:07:35.140 INFO  com.aspect.LogAspect                              :93   [32m127970123234545664[0;39m ------------- 结束 耗时：191 ms -------------
2021-12-20 11:07:35.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:35.144 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:35.146 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:35.146 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:35.147 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:35.147 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:35.148 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:35.149 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:35.149 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:35.150 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:35.150 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:35.150 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:35.150 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:35.151 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:35.151 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:35.151 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:35.152 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:35.152 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:35.153 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:35.153 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970123234545665[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:35.154 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970123234545665[0;39m <==      Total: 19
2021-12-20 11:07:35.156 INFO  com.aspect.LogAspect                              :92   [32m127970123234545665[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:35.156 INFO  com.aspect.LogAspect                              :93   [32m127970123234545665[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 11:07:35.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970123502981120[0;39m <==    Updates: 0
2021-12-20 11:07:35.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127970123502981120[0;39m 生成今日电子书快照结束，耗时：208毫秒
2021-12-20 11:07:35.221 INFO  com.job.DocJob                                    :32   [32m127970124375396352[0;39m 更新电子书下的文档数据开始
2021-12-20 11:07:35.221 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970124375396352[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:07:35.222 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970124375396352[0;39m ==> Parameters: 
2021-12-20 11:07:35.363 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970124375396352[0;39m <==    Updates: 3
2021-12-20 11:07:35.364 INFO  com.job.DocJob                                    :35   [32m127970124375396352[0;39m 更新电子书下的文档数据结束，耗时：143毫秒
2021-12-20 11:07:36.343 INFO  com.aspect.LogAspect                              :54   [32m127970129081405440[0;39m ------------- 开始 -------------
2021-12-20 11:07:36.343 INFO  com.aspect.LogAspect                              :55   [32m127970129081405440[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 11:07:36.344 INFO  com.aspect.LogAspect                              :56   [32m127970129081405440[0;39m 类名方法: com.controller.UserController.list
2021-12-20 11:07:36.344 INFO  com.aspect.LogAspect                              :57   [32m127970129081405440[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:36.344 INFO  com.aspect.LogAspect                              :80   [32m127970129081405440[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:07:36.415 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127970129081405440[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 11:07:36.416 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127970129081405440[0;39m ==> Parameters: 
2021-12-20 11:07:36.474 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127970129081405440[0;39m <==    Columns: count(0)
2021-12-20 11:07:36.474 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127970129081405440[0;39m <==        Row: 8
2021-12-20 11:07:36.474 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127970129081405440[0;39m <==      Total: 1
2021-12-20 11:07:36.475 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970129081405440[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 11:07:36.475 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970129081405440[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:07:36.536 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:07:36.536 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:36.537 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:36.537 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:36.537 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:07:36.538 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 11:07:36.538 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:36.538 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:36.539 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127970129081405440[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:07:36.539 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127970129081405440[0;39m <==      Total: 8
2021-12-20 11:07:36.539 INFO  com.servicess.UserService                         :52   [32m127970129081405440[0;39m 总行数：8
2021-12-20 11:07:36.539 INFO  com.servicess.UserService                         :53   [32m127970129081405440[0;39m 总页数：1
2021-12-20 11:07:36.540 INFO  com.aspect.LogAspect                              :92   [32m127970129081405440[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 11:07:36.541 INFO  com.aspect.LogAspect                              :93   [32m127970129081405440[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-20 11:07:38.106 INFO  com.aspect.LogAspect                              :54   [32m127970136475963392[0;39m ------------- 开始 -------------
2021-12-20 11:07:38.106 INFO  com.aspect.LogAspect                              :55   [32m127970136475963392[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:38.107 INFO  com.aspect.LogAspect                              :56   [32m127970136475963392[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:38.107 INFO  com.aspect.LogAspect                              :57   [32m127970136475963392[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:38.107 INFO  com.aspect.LogAspect                              :80   [32m127970136475963392[0;39m 请求参数: []
2021-12-20 11:07:38.173 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970136475963392[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:38.173 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970136475963392[0;39m ==> Parameters: 
2021-12-20 11:07:38.249 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:38.252 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:38.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:38.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:38.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:38.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:38.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:38.257 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:38.257 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:38.258 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:38.258 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:38.259 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:38.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:38.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:38.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:38.266 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:38.268 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:38.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:38.272 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:38.273 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970136475963392[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:38.274 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970136475963392[0;39m <==      Total: 19
2021-12-20 11:07:38.286 INFO  com.aspect.LogAspect                              :92   [32m127970136475963392[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:38.287 INFO  com.aspect.LogAspect                              :93   [32m127970136475963392[0;39m ------------- 结束 耗时：181 ms -------------
2021-12-20 11:07:39.059 INFO  com.aspect.LogAspect                              :54   [32m127970140473135104[0;39m ------------- 开始 -------------
2021-12-20 11:07:39.059 INFO  com.aspect.LogAspect                              :55   [32m127970140473135104[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:07:39.059 INFO  com.aspect.LogAspect                              :56   [32m127970140473135104[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:07:39.059 INFO  com.aspect.LogAspect                              :54   [32m127970140473135105[0;39m ------------- 开始 -------------
2021-12-20 11:07:39.059 INFO  com.aspect.LogAspect                              :57   [32m127970140473135104[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:39.060 INFO  com.aspect.LogAspect                              :55   [32m127970140473135105[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:07:39.060 INFO  com.aspect.LogAspect                              :80   [32m127970140473135104[0;39m 请求参数: []
2021-12-20 11:07:39.060 INFO  com.aspect.LogAspect                              :56   [32m127970140473135105[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:07:39.060 INFO  com.aspect.LogAspect                              :57   [32m127970140473135105[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:39.060 INFO  com.aspect.LogAspect                              :80   [32m127970140473135105[0;39m 请求参数: []
2021-12-20 11:07:39.063 INFO  com.aspect.LogAspect                              :54   [32m127970140489912320[0;39m ------------- 开始 -------------
2021-12-20 11:07:39.063 INFO  com.aspect.LogAspect                              :55   [32m127970140489912320[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:39.063 INFO  com.aspect.LogAspect                              :56   [32m127970140489912320[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:39.063 INFO  com.aspect.LogAspect                              :57   [32m127970140489912320[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:39.064 INFO  com.aspect.LogAspect                              :80   [32m127970140489912320[0;39m 请求参数: []
2021-12-20 11:07:39.130 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970140473135104[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:39.130 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970140473135104[0;39m ==> Parameters: 
2021-12-20 11:07:39.142 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970140489912320[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:39.142 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970140489912320[0;39m ==> Parameters: 
2021-12-20 11:07:39.150 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970140473135105[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:39.150 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970140473135105[0;39m ==> Parameters: 
2021-12-20 11:07:39.215 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:39.216 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:39.217 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:39.217 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:39.218 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:39.219 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:39.219 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970140473135104[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:07:39.220 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:39.220 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970140473135104[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:07:39.220 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:39.221 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:39.222 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970140473135104[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:07:39.222 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:39.224 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:39.225 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970140473135104[0;39m <==      Total: 2
2021-12-20 11:07:39.225 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:39.226 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:39.227 INFO  com.aspect.LogAspect                              :92   [32m127970140473135104[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:07:39.227 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:39.228 INFO  com.aspect.LogAspect                              :93   [32m127970140473135104[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:07:39.229 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:39.232 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:39.233 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:39.234 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:39.234 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970140473135105[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:07:39.236 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:39.237 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970140473135105[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:07:39.237 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970140489912320[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:39.238 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970140489912320[0;39m <==      Total: 19
2021-12-20 11:07:39.239 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970140473135105[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:07:39.239 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970140473135105[0;39m <==      Total: 2
2021-12-20 11:07:39.239 INFO  com.aspect.LogAspect                              :92   [32m127970140473135105[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:07:39.245 INFO  com.aspect.LogAspect                              :93   [32m127970140473135105[0;39m ------------- 结束 耗时：186 ms -------------
2021-12-20 11:07:39.247 INFO  com.aspect.LogAspect                              :92   [32m127970140489912320[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:39.249 INFO  com.aspect.LogAspect                              :93   [32m127970140489912320[0;39m ------------- 结束 耗时：186 ms -------------
2021-12-20 11:07:40.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127970144449335296[0;39m 生成今日电子书快照开始
2021-12-20 11:07:40.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970144449335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:40.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970144449335296[0;39m ==> Parameters: 
2021-12-20 11:07:40.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970144449335296[0;39m <==    Updates: 0
2021-12-20 11:07:40.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127970144449335296[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 11:07:45.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127970165408272384[0;39m 生成今日电子书快照开始
2021-12-20 11:07:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970165408272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:45.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970165408272384[0;39m ==> Parameters: 
2021-12-20 11:07:45.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970165408272384[0;39m <==    Updates: 0
2021-12-20 11:07:45.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127970165408272384[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 11:07:47.364 INFO  com.aspect.LogAspect                              :54   [32m127970175306829824[0;39m ------------- 开始 -------------
2021-12-20 11:07:47.364 INFO  com.aspect.LogAspect                              :55   [32m127970175306829824[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:07:47.364 INFO  com.aspect.LogAspect                              :56   [32m127970175306829824[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:07:47.365 INFO  com.aspect.LogAspect                              :57   [32m127970175306829824[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:47.365 INFO  com.aspect.LogAspect                              :80   [32m127970175306829824[0;39m 请求参数: [{"categoryId2":301,"page":1,"size":1000}]
2021-12-20 11:07:47.483 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127970175306829824[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:07:47.484 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127970175306829824[0;39m ==> Parameters: 301(Long)
2021-12-20 11:07:47.578 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127970175306829824[0;39m <==    Columns: count(0)
2021-12-20 11:07:47.578 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127970175306829824[0;39m <==        Row: 1
2021-12-20 11:07:47.579 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127970175306829824[0;39m <==      Total: 1
2021-12-20 11:07:47.580 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127970175306829824[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:07:47.580 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127970175306829824[0;39m ==> Parameters: 301(Long), 1000(Integer)
2021-12-20 11:07:47.667 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127970175306829824[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:07:47.668 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127970175306829824[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 11:07:47.670 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127970175306829824[0;39m <==      Total: 1
2021-12-20 11:07:47.673 INFO  com.servicess.EbookService                        :48   [32m127970175306829824[0;39m 总行数：1
2021-12-20 11:07:47.674 INFO  com.servicess.EbookService                        :49   [32m127970175306829824[0;39m 总页数：1
2021-12-20 11:07:47.701 INFO  com.aspect.LogAspect                              :92   [32m127970175306829824[0;39m 返回结果: {"content":{"list":[{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1}],"total":1},"success":true}
2021-12-20 11:07:47.701 INFO  com.aspect.LogAspect                              :93   [32m127970175306829824[0;39m ------------- 结束 耗时：337 ms -------------
2021-12-20 11:07:48.644 INFO  com.aspect.LogAspect                              :54   [32m127970180675538944[0;39m ------------- 开始 -------------
2021-12-20 11:07:48.645 INFO  com.aspect.LogAspect                              :55   [32m127970180675538944[0;39m 请求地址: http://localhost:8081/doc/all/3 GET
2021-12-20 11:07:48.645 INFO  com.aspect.LogAspect                              :56   [32m127970180675538944[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:07:48.645 INFO  com.aspect.LogAspect                              :57   [32m127970180675538944[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:48.645 INFO  com.aspect.LogAspect                              :80   [32m127970180675538944[0;39m 请求参数: [3]
2021-12-20 11:07:48.733 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127970180675538944[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:07:48.733 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127970180675538944[0;39m ==> Parameters: 3(Long)
2021-12-20 11:07:48.795 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127970180675538944[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:07:48.795 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127970180675538944[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 1, 1
2021-12-20 11:07:48.795 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127970180675538944[0;39m <==      Total: 1
2021-12-20 11:07:48.810 INFO  com.aspect.LogAspect                              :92   [32m127970180675538944[0;39m 返回结果: {"content":[{"ebookId":3,"id":125274442472493056,"name":"test","parent":0,"sort":1,"viewCount":1,"voteCount":1}],"success":true}
2021-12-20 11:07:48.826 INFO  com.aspect.LogAspect                              :93   [32m127970180675538944[0;39m ------------- 结束 耗时：182 ms -------------
2021-12-20 11:07:48.849 INFO  com.aspect.LogAspect                              :54   [32m127970181535371264[0;39m ------------- 开始 -------------
2021-12-20 11:07:48.849 INFO  com.aspect.LogAspect                              :55   [32m127970181535371264[0;39m 请求地址: http://localhost:8081/doc/find-content/125274442472493056 GET
2021-12-20 11:07:48.849 INFO  com.aspect.LogAspect                              :56   [32m127970181535371264[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:07:48.849 INFO  com.aspect.LogAspect                              :57   [32m127970181535371264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:48.850 INFO  com.aspect.LogAspect                              :80   [32m127970181535371264[0;39m 请求参数: [125274442472493056]
2021-12-20 11:07:48.926 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127970181535371264[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:07:48.926 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127970181535371264[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:07:49.004 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127970181535371264[0;39m <==    Columns: id, content
2021-12-20 11:07:49.005 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127970181535371264[0;39m <==        Row: 125274442472493056, <<BLOB>>
2021-12-20 11:07:49.007 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127970181535371264[0;39m <==      Total: 1
2021-12-20 11:07:49.011 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127970181535371264[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:07:49.012 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127970181535371264[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:07:49.139 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127970181535371264[0;39m <==    Updates: 1
2021-12-20 11:07:49.139 INFO  com.aspect.LogAspect                              :92   [32m127970181535371264[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:07:49.139 INFO  com.aspect.LogAspect                              :93   [32m127970181535371264[0;39m ------------- 结束 耗时：291 ms -------------
2021-12-20 11:07:50.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127970186425929728[0;39m 生成今日电子书快照开始
2021-12-20 11:07:50.266 INFO  com.aspect.LogAspect                              :54   [32m127970187478700032[0;39m ------------- 开始 -------------
2021-12-20 11:07:50.266 INFO  com.aspect.LogAspect                              :55   [32m127970187478700032[0;39m 请求地址: http://localhost:8081/doc/vote/125274442472493056 GET
2021-12-20 11:07:50.266 INFO  com.aspect.LogAspect                              :56   [32m127970187478700032[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:07:50.266 INFO  com.aspect.LogAspect                              :57   [32m127970187478700032[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:50.266 INFO  com.aspect.LogAspect                              :80   [32m127970187478700032[0;39m 请求参数: [125274442472493056]
2021-12-20 11:07:50.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970186425929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:50.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970186425929728[0;39m ==> Parameters: 
2021-12-20 11:07:50.337 INFO  com.Util.RedisUtil                                :31   [32m127970187478700032[0;39m key不存在，放入：DOC_VOTE_125274442472493056_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:07:50.447 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970186425929728[0;39m <==    Updates: 0
2021-12-20 11:07:50.448 INFO  com.job.EbookSnapshotJob                          :35   [32m127970186425929728[0;39m 生成今日电子书快照结束，耗时：433毫秒
2021-12-20 11:07:50.460 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127970187478700032[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:07:50.461 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127970187478700032[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:07:50.620 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127970187478700032[0;39m <==    Updates: 1
2021-12-20 11:07:50.623 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127970187478700032[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:07:50.624 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127970187478700032[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:07:50.704 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127970187478700032[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:07:50.704 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127970187478700032[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 2, 2
2021-12-20 11:07:50.705 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127970187478700032[0;39m <==      Total: 1
2021-12-20 11:07:50.707 INFO  com.aspect.LogAspect                              :92   [32m127970187478700032[0;39m 返回结果: {"success":true}
2021-12-20 11:07:50.708 INFO  com.aspect.LogAspect                              :93   [32m127970187478700032[0;39m ------------- 结束 耗时：442 ms -------------
2021-12-20 11:07:50.741 INFO  com.websocket.WebSocketServer                     :71   [32m127970187478700032[0;39m 推送消息：qq7guPEJcB，内容：【test】被点赞！
2021-12-20 11:07:52.003 INFO  com.aspect.LogAspect                              :54   [32m127970194764206080[0;39m ------------- 开始 -------------
2021-12-20 11:07:52.003 INFO  com.aspect.LogAspect                              :54   [32m127970194764206081[0;39m ------------- 开始 -------------
2021-12-20 11:07:52.003 INFO  com.aspect.LogAspect                              :55   [32m127970194764206080[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:07:52.003 INFO  com.aspect.LogAspect                              :55   [32m127970194764206081[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:07:52.003 INFO  com.aspect.LogAspect                              :56   [32m127970194764206080[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :57   [32m127970194764206080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :56   [32m127970194764206081[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :54   [32m127970194768400384[0;39m ------------- 开始 -------------
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :57   [32m127970194764206081[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :55   [32m127970194768400384[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :80   [32m127970194764206080[0;39m 请求参数: []
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :80   [32m127970194764206081[0;39m 请求参数: []
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :56   [32m127970194768400384[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :57   [32m127970194768400384[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:52.004 INFO  com.aspect.LogAspect                              :80   [32m127970194768400384[0;39m 请求参数: []
2021-12-20 11:07:52.074 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970194764206081[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:52.075 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970194764206081[0;39m ==> Parameters: 
2021-12-20 11:07:52.078 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970194764206080[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:07:52.078 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970194764206080[0;39m ==> Parameters: 
2021-12-20 11:07:52.083 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970194768400384[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:07:52.083 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970194768400384[0;39m ==> Parameters: 
2021-12-20 11:07:52.146 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970194764206081[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:07:52.146 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970194764206081[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:07:52.146 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127970194764206081[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:07:52.146 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127970194764206081[0;39m <==      Total: 2
2021-12-20 11:07:52.146 INFO  com.aspect.LogAspect                              :92   [32m127970194764206081[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:07:52.146 INFO  com.aspect.LogAspect                              :93   [32m127970194764206081[0;39m ------------- 结束 耗时：143 ms -------------
2021-12-20 11:07:52.146 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970194764206080[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:07:52.146 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970194764206080[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:07:52.146 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127970194764206080[0;39m <==        Row: 2021-12-20, 502, 173, 0, 0
2021-12-20 11:07:52.159 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127970194764206080[0;39m <==      Total: 2
2021-12-20 11:07:52.159 INFO  com.aspect.LogAspect                              :92   [32m127970194764206080[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0}],"success":true}
2021-12-20 11:07:52.159 INFO  com.aspect.LogAspect                              :93   [32m127970194764206080[0;39m ------------- 结束 耗时：156 ms -------------
2021-12-20 11:07:52.169 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:07:52.170 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:07:52.171 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:07:52.172 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:07:52.172 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:07:52.173 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:07:52.174 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:07:52.175 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:07:52.176 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:07:52.178 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:07:52.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:07:52.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:07:52.181 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:07:52.182 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:07:52.184 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:07:52.185 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:07:52.186 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:07:52.187 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:07:52.188 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:07:52.189 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127970194768400384[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:07:52.190 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127970194768400384[0;39m <==      Total: 19
2021-12-20 11:07:52.193 INFO  com.aspect.LogAspect                              :92   [32m127970194768400384[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:07:52.211 INFO  com.aspect.LogAspect                              :93   [32m127970194768400384[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 11:07:55.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127970207351312384[0;39m 生成今日电子书快照开始
2021-12-20 11:07:55.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970207351312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:07:55.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970207351312384[0;39m ==> Parameters: 
2021-12-20 11:07:55.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970207351312384[0;39m <==    Updates: 0
2021-12-20 11:07:55.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127970207351312384[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 11:07:57.167 INFO  com.aspect.LogAspect                              :54   [32m127970216423591936[0;39m ------------- 开始 -------------
2021-12-20 11:07:57.168 INFO  com.aspect.LogAspect                              :55   [32m127970216423591936[0;39m 请求地址: http://localhost:8081/user/logout/127970119489032192 GET
2021-12-20 11:07:57.168 INFO  com.aspect.LogAspect                              :56   [32m127970216423591936[0;39m 类名方法: com.controller.UserController.logout
2021-12-20 11:07:57.169 INFO  com.aspect.LogAspect                              :57   [32m127970216423591936[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:07:57.169 INFO  com.aspect.LogAspect                              :80   [32m127970216423591936[0;39m 请求参数: ["127970119489032192"]
2021-12-20 11:07:57.213 INFO  com.controller.UserController                     :89   [32m127970216423591936[0;39m 从redis中删除token：127970119489032192
2021-12-20 11:07:57.213 INFO  com.aspect.LogAspect                              :92   [32m127970216423591936[0;39m 返回结果: {"success":true}
2021-12-20 11:07:57.213 INFO  com.aspect.LogAspect                              :93   [32m127970216423591936[0;39m ------------- 结束 耗时：46 ms -------------
2021-12-20 11:08:00.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127970228327026688[0;39m 生成今日电子书快照开始
2021-12-20 11:08:00.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970228327026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:00.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970228327026688[0;39m ==> Parameters: 
2021-12-20 11:08:00.195 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970228327026688[0;39m <==    Updates: 0
2021-12-20 11:08:00.195 INFO  com.job.EbookSnapshotJob                          :35   [32m127970228327026688[0;39m 生成今日电子书快照结束，耗时：189毫秒
2021-12-20 11:08:05.008 INFO  com.job.DocJob                                    :32   [32m127970249311129600[0;39m 更新电子书下的文档数据开始
2021-12-20 11:08:05.070 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970249311129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:08:05.070 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970249311129600[0;39m ==> Parameters: 
2021-12-20 11:08:05.208 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970249311129600[0;39m <==    Updates: 3
2021-12-20 11:08:05.223 INFO  com.job.DocJob                                    :35   [32m127970249311129600[0;39m 更新电子书下的文档数据结束，耗时：215毫秒
2021-12-20 11:08:05.223 INFO  com.job.EbookSnapshotJob                          :32   [32m127970250212904960[0;39m 生成今日电子书快照开始
2021-12-20 11:08:05.223 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970250212904960[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:05.223 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970250212904960[0;39m ==> Parameters: 
2021-12-20 11:08:05.528 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970250212904960[0;39m <==    Updates: 0
2021-12-20 11:08:05.528 INFO  com.job.EbookSnapshotJob                          :35   [32m127970250212904960[0;39m 生成今日电子书快照结束，耗时：305毫秒
2021-12-20 11:08:10.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127970270337175552[0;39m 生成今日电子书快照开始
2021-12-20 11:08:10.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970270337175552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:10.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970270337175552[0;39m ==> Parameters: 
2021-12-20 11:08:10.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970270337175552[0;39m <==    Updates: 0
2021-12-20 11:08:10.268 INFO  com.job.EbookSnapshotJob                          :35   [32m127970270337175552[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:08:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127970291283529728[0;39m 生成今日电子书快照开始
2021-12-20 11:08:15.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970291283529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:15.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970291283529728[0;39m ==> Parameters: 
2021-12-20 11:08:15.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970291283529728[0;39m <==    Updates: 0
2021-12-20 11:08:15.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127970291283529728[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:08:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127970312259244032[0;39m 生成今日电子书快照开始
2021-12-20 11:08:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970312259244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970312259244032[0;39m ==> Parameters: 
2021-12-20 11:08:20.208 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970312259244032[0;39m <==    Updates: 0
2021-12-20 11:08:20.208 INFO  com.job.EbookSnapshotJob                          :35   [32m127970312259244032[0;39m 生成今日电子书快照结束，耗时：192毫秒
2021-12-20 11:08:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127970333226569728[0;39m 生成今日电子书快照开始
2021-12-20 11:08:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970333226569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970333226569728[0;39m ==> Parameters: 
2021-12-20 11:08:25.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970333226569728[0;39m <==    Updates: 0
2021-12-20 11:08:25.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127970333226569728[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:08:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127970354193895424[0;39m 生成今日电子书快照开始
2021-12-20 11:08:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970354193895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970354193895424[0;39m ==> Parameters: 
2021-12-20 11:08:30.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970354193895424[0;39m <==    Updates: 0
2021-12-20 11:08:30.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127970354193895424[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:08:35.012 INFO  com.job.DocJob                                    :32   [32m127970375157026816[0;39m 更新电子书下的文档数据开始
2021-12-20 11:08:35.081 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970375157026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:08:35.081 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970375157026816[0;39m ==> Parameters: 
2021-12-20 11:08:35.228 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970375157026816[0;39m <==    Updates: 3
2021-12-20 11:08:35.228 INFO  com.job.DocJob                                    :35   [32m127970375157026816[0;39m 更新电子书下的文档数据结束，耗时：216毫秒
2021-12-20 11:08:35.228 INFO  com.job.EbookSnapshotJob                          :32   [32m127970376062996480[0;39m 生成今日电子书快照开始
2021-12-20 11:08:35.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970376062996480[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:35.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970376062996480[0;39m ==> Parameters: 
2021-12-20 11:08:35.359 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970376062996480[0;39m <==    Updates: 0
2021-12-20 11:08:35.359 INFO  com.job.EbookSnapshotJob                          :35   [32m127970376062996480[0;39m 生成今日电子书快照结束，耗时：116毫秒
2021-12-20 11:08:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127970396128546816[0;39m 生成今日电子书快照开始
2021-12-20 11:08:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970396128546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970396128546816[0;39m ==> Parameters: 
2021-12-20 11:08:40.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970396128546816[0;39m <==    Updates: 0
2021-12-20 11:08:40.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127970396128546816[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:08:45.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127970417162981376[0;39m 生成今日电子书快照开始
2021-12-20 11:08:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970417162981376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970417162981376[0;39m ==> Parameters: 
2021-12-20 11:08:45.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970417162981376[0;39m <==    Updates: 0
2021-12-20 11:08:45.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127970417162981376[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:08:50.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127970438029643776[0;39m 生成今日电子书快照开始
2021-12-20 11:08:50.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970438029643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:50.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970438029643776[0;39m ==> Parameters: 
2021-12-20 11:08:50.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970438029643776[0;39m <==    Updates: 0
2021-12-20 11:08:50.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127970438029643776[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:08:55.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127970459097632768[0;39m 生成今日电子书快照开始
2021-12-20 11:08:55.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970459097632768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:08:55.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970459097632768[0;39m ==> Parameters: 
2021-12-20 11:08:55.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970459097632768[0;39m <==    Updates: 0
2021-12-20 11:08:55.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127970459097632768[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 11:09:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127970480023015424[0;39m 生成今日电子书快照开始
2021-12-20 11:09:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970480023015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970480023015424[0;39m ==> Parameters: 
2021-12-20 11:09:00.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970480023015424[0;39m <==    Updates: 0
2021-12-20 11:09:00.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127970480023015424[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:09:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127970500986146816[0;39m 生成今日电子书快照开始
2021-12-20 11:09:05.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970500986146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:05.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970500986146816[0;39m ==> Parameters: 
2021-12-20 11:09:05.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970500986146816[0;39m <==    Updates: 0
2021-12-20 11:09:05.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127970500986146816[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 11:09:05.254 INFO  com.job.DocJob                                    :32   [32m127970502001168384[0;39m 更新电子书下的文档数据开始
2021-12-20 11:09:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970502001168384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:09:05.254 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970502001168384[0;39m ==> Parameters: 
2021-12-20 11:09:05.398 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970502001168384[0;39m <==    Updates: 3
2021-12-20 11:09:05.398 INFO  com.job.DocJob                                    :35   [32m127970502001168384[0;39m 更新电子书下的文档数据结束，耗时：144毫秒
2021-12-20 11:09:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127970521961861120[0;39m 生成今日电子书快照开始
2021-12-20 11:09:10.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970521961861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:10.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970521961861120[0;39m ==> Parameters: 
2021-12-20 11:09:10.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970521961861120[0;39m <==    Updates: 0
2021-12-20 11:09:10.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127970521961861120[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:09:15.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127970542996295680[0;39m 生成今日电子书快照开始
2021-12-20 11:09:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970542996295680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970542996295680[0;39m ==> Parameters: 
2021-12-20 11:09:15.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970542996295680[0;39m <==    Updates: 0
2021-12-20 11:09:15.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127970542996295680[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:09:20.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127970563930066944[0;39m 生成今日电子书快照开始
2021-12-20 11:09:20.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970563930066944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:20.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970563930066944[0;39m ==> Parameters: 
2021-12-20 11:09:20.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970563930066944[0;39m <==    Updates: 0
2021-12-20 11:09:20.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127970563930066944[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:09:25.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127970584893198336[0;39m 生成今日电子书快照开始
2021-12-20 11:09:25.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970584893198336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:25.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970584893198336[0;39m ==> Parameters: 
2021-12-20 11:09:25.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970584893198336[0;39m <==    Updates: 0
2021-12-20 11:09:25.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127970584893198336[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:09:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127970605864718336[0;39m 生成今日电子书快照开始
2021-12-20 11:09:30.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970605864718336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:30.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970605864718336[0;39m ==> Parameters: 
2021-12-20 11:09:30.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970605864718336[0;39m <==    Updates: 0
2021-12-20 11:09:30.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127970605864718336[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:09:35.017 INFO  com.job.DocJob                                    :32   [32m127970626836238336[0;39m 更新电子书下的文档数据开始
2021-12-20 11:09:35.069 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970626836238336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:09:35.069 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970626836238336[0;39m ==> Parameters: 
2021-12-20 11:09:35.233 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970626836238336[0;39m <==    Updates: 3
2021-12-20 11:09:35.233 INFO  com.job.DocJob                                    :35   [32m127970626836238336[0;39m 更新电子书下的文档数据结束，耗时：216毫秒
2021-12-20 11:09:35.233 INFO  com.job.EbookSnapshotJob                          :32   [32m127970627742208000[0;39m 生成今日电子书快照开始
2021-12-20 11:09:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970627742208000[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970627742208000[0;39m ==> Parameters: 
2021-12-20 11:09:35.386 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970627742208000[0;39m <==    Updates: 0
2021-12-20 11:09:35.402 INFO  com.job.EbookSnapshotJob                          :35   [32m127970627742208000[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 11:09:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127970647799369728[0;39m 生成今日电子书快照开始
2021-12-20 11:09:40.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970647799369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:40.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970647799369728[0;39m ==> Parameters: 
2021-12-20 11:09:40.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970647799369728[0;39m <==    Updates: 0
2021-12-20 11:09:40.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127970647799369728[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:09:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127970668762501120[0;39m 生成今日电子书快照开始
2021-12-20 11:09:45.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970668762501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:45.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970668762501120[0;39m ==> Parameters: 
2021-12-20 11:09:45.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970668762501120[0;39m <==    Updates: 0
2021-12-20 11:09:45.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127970668762501120[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:09:50.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127970689788547072[0;39m 生成今日电子书快照开始
2021-12-20 11:09:50.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970689788547072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:50.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970689788547072[0;39m ==> Parameters: 
2021-12-20 11:09:50.231 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970689788547072[0;39m <==    Updates: 0
2021-12-20 11:09:50.231 INFO  com.job.EbookSnapshotJob                          :35   [32m127970689788547072[0;39m 生成今日电子书快照结束，耗时：205毫秒
2021-12-20 11:09:55.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127970710663598080[0;39m 生成今日电子书快照开始
2021-12-20 11:09:55.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970710663598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:09:55.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970710663598080[0;39m ==> Parameters: 
2021-12-20 11:09:55.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970710663598080[0;39m <==    Updates: 0
2021-12-20 11:09:55.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127970710663598080[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:10:00.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127970731693838336[0;39m 生成今日电子书快照开始
2021-12-20 11:10:00.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970731693838336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:00.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970731693838336[0;39m ==> Parameters: 
2021-12-20 11:10:00.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970731693838336[0;39m <==    Updates: 0
2021-12-20 11:10:00.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127970731693838336[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:10:05.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127970752661164032[0;39m 生成今日电子书快照开始
2021-12-20 11:10:05.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970752661164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:05.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970752661164032[0;39m ==> Parameters: 
2021-12-20 11:10:05.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970752661164032[0;39m <==    Updates: 0
2021-12-20 11:10:05.201 INFO  com.job.EbookSnapshotJob                          :35   [32m127970752661164032[0;39m 生成今日电子书快照结束，耗时：185毫秒
2021-12-20 11:10:05.201 INFO  com.job.DocJob                                    :32   [32m127970753437110272[0;39m 更新电子书下的文档数据开始
2021-12-20 11:10:05.201 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970753437110272[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:10:05.201 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970753437110272[0;39m ==> Parameters: 
2021-12-20 11:10:05.347 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970753437110272[0;39m <==    Updates: 3
2021-12-20 11:10:05.347 INFO  com.job.DocJob                                    :35   [32m127970753437110272[0;39m 更新电子书下的文档数据结束，耗时：146毫秒
2021-12-20 11:10:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127970773628489728[0;39m 生成今日电子书快照开始
2021-12-20 11:10:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970773628489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970773628489728[0;39m ==> Parameters: 
2021-12-20 11:10:10.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970773628489728[0;39m <==    Updates: 0
2021-12-20 11:10:10.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127970773628489728[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:10:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127970794600009728[0;39m 生成今日电子书快照开始
2021-12-20 11:10:15.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970794600009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:15.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970794600009728[0;39m ==> Parameters: 
2021-12-20 11:10:15.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970794600009728[0;39m <==    Updates: 0
2021-12-20 11:10:15.246 INFO  com.job.EbookSnapshotJob                          :35   [32m127970794600009728[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:10:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127970815563141120[0;39m 生成今日电子书快照开始
2021-12-20 11:10:20.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970815563141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:20.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970815563141120[0;39m ==> Parameters: 
2021-12-20 11:10:20.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970815563141120[0;39m <==    Updates: 0
2021-12-20 11:10:20.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127970815563141120[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:10:25.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127970836589187072[0;39m 生成今日电子书快照开始
2021-12-20 11:10:25.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970836589187072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:25.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970836589187072[0;39m ==> Parameters: 
2021-12-20 11:10:25.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970836589187072[0;39m <==    Updates: 0
2021-12-20 11:10:25.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127970836589187072[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:10:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127970857522958336[0;39m 生成今日电子书快照开始
2021-12-20 11:10:30.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970857522958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:30.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970857522958336[0;39m ==> Parameters: 
2021-12-20 11:10:30.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970857522958336[0;39m <==    Updates: 0
2021-12-20 11:10:30.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127970857522958336[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:10:35.014 INFO  com.job.DocJob                                    :32   [32m127970878481895424[0;39m 更新电子书下的文档数据开始
2021-12-20 11:10:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970878481895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:10:35.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970878481895424[0;39m ==> Parameters: 
2021-12-20 11:10:35.221 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127970878481895424[0;39m <==    Updates: 3
2021-12-20 11:10:35.221 INFO  com.job.DocJob                                    :35   [32m127970878481895424[0;39m 更新电子书下的文档数据结束，耗时：207毫秒
2021-12-20 11:10:35.221 INFO  com.job.EbookSnapshotJob                          :32   [32m127970879350116352[0;39m 生成今日电子书快照开始
2021-12-20 11:10:35.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970879350116352[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:35.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970879350116352[0;39m ==> Parameters: 
2021-12-20 11:10:35.337 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970879350116352[0;39m <==    Updates: 0
2021-12-20 11:10:35.352 INFO  com.job.EbookSnapshotJob                          :35   [32m127970879350116352[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-20 11:10:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127970899436638208[0;39m 生成今日电子书快照开始
2021-12-20 11:10:40.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970899436638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:40.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970899436638208[0;39m ==> Parameters: 
2021-12-20 11:10:40.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970899436638208[0;39m <==    Updates: 0
2021-12-20 11:10:40.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127970899436638208[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:10:45.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127970920403963904[0;39m 生成今日电子书快照开始
2021-12-20 11:10:45.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970920403963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:45.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970920403963904[0;39m ==> Parameters: 
2021-12-20 11:10:45.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970920403963904[0;39m <==    Updates: 0
2021-12-20 11:10:45.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127970920403963904[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:10:50.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127970941442592768[0;39m 生成今日电子书快照开始
2021-12-20 11:10:50.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970941442592768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:50.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970941442592768[0;39m ==> Parameters: 
2021-12-20 11:10:50.309 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970941442592768[0;39m <==    Updates: 0
2021-12-20 11:10:50.309 INFO  com.job.EbookSnapshotJob                          :35   [32m127970941442592768[0;39m 生成今日电子书快照结束，耗时：284毫秒
2021-12-20 11:10:55.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127970962401529856[0;39m 生成今日电子书快照开始
2021-12-20 11:10:55.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970962401529856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:10:55.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970962401529856[0;39m ==> Parameters: 
2021-12-20 11:10:55.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970962401529856[0;39m <==    Updates: 0
2021-12-20 11:10:55.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127970962401529856[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 11:11:00.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127970983364661248[0;39m 生成今日电子书快照开始
2021-12-20 11:11:00.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970983364661248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:00.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970983364661248[0;39m ==> Parameters: 
2021-12-20 11:11:00.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127970983364661248[0;39m <==    Updates: 0
2021-12-20 11:11:00.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127970983364661248[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:11:05.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127971004336181248[0;39m 生成今日电子书快照开始
2021-12-20 11:11:05.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971004336181248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:05.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971004336181248[0;39m ==> Parameters: 
2021-12-20 11:11:05.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971004336181248[0;39m <==    Updates: 0
2021-12-20 11:11:05.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127971004336181248[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:11:05.236 INFO  com.job.DocJob                                    :32   [32m127971005242150912[0;39m 更新电子书下的文档数据开始
2021-12-20 11:11:05.236 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971005242150912[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:11:05.236 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971005242150912[0;39m ==> Parameters: 
2021-12-20 11:11:05.405 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971005242150912[0;39m <==    Updates: 3
2021-12-20 11:11:05.405 INFO  com.job.DocJob                                    :35   [32m127971005242150912[0;39m 更新电子书下的文档数据结束，耗时：169毫秒
2021-12-20 11:11:10.034 INFO  com.job.EbookSnapshotJob                          :32   [32m127971025366421504[0;39m 生成今日电子书快照开始
2021-12-20 11:11:10.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971025366421504[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:10.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971025366421504[0;39m ==> Parameters: 
2021-12-20 11:11:10.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971025366421504[0;39m <==    Updates: 0
2021-12-20 11:11:10.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127971025366421504[0;39m 生成今日电子书快照结束，耗时：199毫秒
2021-12-20 11:11:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127971046241472512[0;39m 生成今日电子书快照开始
2021-12-20 11:11:15.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971046241472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:15.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971046241472512[0;39m ==> Parameters: 
2021-12-20 11:11:15.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971046241472512[0;39m <==    Updates: 0
2021-12-20 11:11:15.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127971046241472512[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 11:11:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127971067208798208[0;39m 生成今日电子书快照开始
2021-12-20 11:11:20.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971067208798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:20.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971067208798208[0;39m ==> Parameters: 
2021-12-20 11:11:20.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971067208798208[0;39m <==    Updates: 0
2021-12-20 11:11:20.210 INFO  com.job.EbookSnapshotJob                          :35   [32m127971067208798208[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:11:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127971088171929600[0;39m 生成今日电子书快照开始
2021-12-20 11:11:25.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971088171929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:25.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971088171929600[0;39m ==> Parameters: 
2021-12-20 11:11:25.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971088171929600[0;39m <==    Updates: 0
2021-12-20 11:11:25.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127971088171929600[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:11:30.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127971109206364160[0;39m 生成今日电子书快照开始
2021-12-20 11:11:30.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971109206364160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:30.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971109206364160[0;39m ==> Parameters: 
2021-12-20 11:11:30.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971109206364160[0;39m <==    Updates: 0
2021-12-20 11:11:30.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127971109206364160[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:11:35.005 INFO  com.job.DocJob                                    :32   [32m127971130102386688[0;39m 更新电子书下的文档数据开始
2021-12-20 11:11:35.068 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971130102386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:11:35.068 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971130102386688[0;39m ==> Parameters: 
2021-12-20 11:11:35.221 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971130102386688[0;39m <==    Updates: 3
2021-12-20 11:11:35.221 INFO  com.job.DocJob                                    :35   [32m127971130102386688[0;39m 更新电子书下的文档数据结束，耗时：216毫秒
2021-12-20 11:11:35.221 INFO  com.job.EbookSnapshotJob                          :32   [32m127971131008356352[0;39m 生成今日电子书快照开始
2021-12-20 11:11:35.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971131008356352[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:35.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971131008356352[0;39m ==> Parameters: 
2021-12-20 11:11:35.390 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971131008356352[0;39m <==    Updates: 0
2021-12-20 11:11:35.390 INFO  com.job.EbookSnapshotJob                          :35   [32m127971131008356352[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 11:11:40.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127971151141015552[0;39m 生成今日电子书快照开始
2021-12-20 11:11:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971151141015552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971151141015552[0;39m ==> Parameters: 
2021-12-20 11:11:40.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971151141015552[0;39m <==    Updates: 0
2021-12-20 11:11:40.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127971151141015552[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:11:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127971172083175424[0;39m 生成今日电子书快照开始
2021-12-20 11:11:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971172083175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971172083175424[0;39m ==> Parameters: 
2021-12-20 11:11:45.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971172083175424[0;39m <==    Updates: 0
2021-12-20 11:11:45.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127971172083175424[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:11:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127971193042112512[0;39m 生成今日电子书快照开始
2021-12-20 11:11:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971193042112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971193042112512[0;39m ==> Parameters: 
2021-12-20 11:11:50.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971193042112512[0;39m <==    Updates: 0
2021-12-20 11:11:50.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127971193042112512[0;39m 生成今日电子书快照结束，耗时：204毫秒
2021-12-20 11:11:55.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127971214072352768[0;39m 生成今日电子书快照开始
2021-12-20 11:11:55.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971214072352768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:11:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971214072352768[0;39m ==> Parameters: 
2021-12-20 11:11:55.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971214072352768[0;39m <==    Updates: 0
2021-12-20 11:11:55.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127971214072352768[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:12:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127971234976763904[0;39m 生成今日电子书快照开始
2021-12-20 11:12:00.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971234976763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:00.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971234976763904[0;39m ==> Parameters: 
2021-12-20 11:12:00.326 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971234976763904[0;39m <==    Updates: 0
2021-12-20 11:12:00.342 INFO  com.job.EbookSnapshotJob                          :35   [32m127971234976763904[0;39m 生成今日电子书快照结束，耗时：333毫秒
2021-12-20 11:12:05.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127971255948283904[0;39m 生成今日电子书快照开始
2021-12-20 11:12:05.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971255948283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:05.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971255948283904[0;39m ==> Parameters: 
2021-12-20 11:12:05.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971255948283904[0;39m <==    Updates: 0
2021-12-20 11:12:05.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127971255948283904[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:12:05.241 INFO  com.job.DocJob                                    :32   [32m127971256921362432[0;39m 更新电子书下的文档数据开始
2021-12-20 11:12:05.241 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971256921362432[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:12:05.241 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971256921362432[0;39m ==> Parameters: 
2021-12-20 11:12:05.411 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971256921362432[0;39m <==    Updates: 3
2021-12-20 11:12:05.411 INFO  com.job.DocJob                                    :35   [32m127971256921362432[0;39m 更新电子书下的文档数据结束，耗时：170毫秒
2021-12-20 11:12:10.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127971276915609600[0;39m 生成今日电子书快照开始
2021-12-20 11:12:10.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971276915609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:10.055 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971276915609600[0;39m ==> Parameters: 
2021-12-20 11:12:10.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971276915609600[0;39m <==    Updates: 0
2021-12-20 11:12:10.192 INFO  com.job.EbookSnapshotJob                          :35   [32m127971276915609600[0;39m 生成今日电子书快照结束，耗时：184毫秒
2021-12-20 11:12:15.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127971297937461248[0;39m 生成今日电子书快照开始
2021-12-20 11:12:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971297937461248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971297937461248[0;39m ==> Parameters: 
2021-12-20 11:12:15.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971297937461248[0;39m <==    Updates: 0
2021-12-20 11:12:15.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127971297937461248[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:12:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127971318883815424[0;39m 生成今日电子书快照开始
2021-12-20 11:12:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971318883815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971318883815424[0;39m ==> Parameters: 
2021-12-20 11:12:20.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971318883815424[0;39m <==    Updates: 0
2021-12-20 11:12:20.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127971318883815424[0;39m 生成今日电子书快照结束，耗时：205毫秒
2021-12-20 11:12:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127971339859529728[0;39m 生成今日电子书快照开始
2021-12-20 11:12:25.328 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971339859529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:25.334 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971339859529728[0;39m ==> Parameters: 
2021-12-20 11:12:25.535 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971339859529728[0;39m <==    Updates: 0
2021-12-20 11:12:25.535 INFO  com.job.EbookSnapshotJob                          :35   [32m127971339859529728[0;39m 生成今日电子书快照结束，耗时：520毫秒
2021-12-20 11:12:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127971360831049728[0;39m 生成今日电子书快照开始
2021-12-20 11:12:30.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971360831049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:30.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971360831049728[0;39m ==> Parameters: 
2021-12-20 11:12:30.816 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971360831049728[0;39m <==    Updates: 0
2021-12-20 11:12:30.816 INFO  com.job.EbookSnapshotJob                          :35   [32m127971360831049728[0;39m 生成今日电子书快照结束，耗时：801毫秒
2021-12-20 11:12:35.012 INFO  com.job.DocJob                                    :32   [32m127971381789986816[0;39m 更新电子书下的文档数据开始
2021-12-20 11:12:35.082 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971381789986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:12:35.082 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971381789986816[0;39m ==> Parameters: 
2021-12-20 11:12:35.229 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971381789986816[0;39m <==    Updates: 3
2021-12-20 11:12:35.229 INFO  com.job.DocJob                                    :35   [32m127971381789986816[0;39m 更新电子书下的文档数据结束，耗时：217毫秒
2021-12-20 11:12:35.229 INFO  com.job.EbookSnapshotJob                          :32   [32m127971382700150784[0;39m 生成今日电子书快照开始
2021-12-20 11:12:35.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971382700150784[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:35.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971382700150784[0;39m ==> Parameters: 
2021-12-20 11:12:35.398 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971382700150784[0;39m <==    Updates: 0
2021-12-20 11:12:35.398 INFO  com.job.EbookSnapshotJob                          :35   [32m127971382700150784[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 11:12:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127971402757312512[0;39m 生成今日电子书快照开始
2021-12-20 11:12:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971402757312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971402757312512[0;39m ==> Parameters: 
2021-12-20 11:12:40.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971402757312512[0;39m <==    Updates: 0
2021-12-20 11:12:40.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127971402757312512[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:12:45.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127971423716249600[0;39m 生成今日电子书快照开始
2021-12-20 11:12:45.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971423716249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:45.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971423716249600[0;39m ==> Parameters: 
2021-12-20 11:12:45.209 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971423716249600[0;39m <==    Updates: 0
2021-12-20 11:12:45.209 INFO  com.job.EbookSnapshotJob                          :35   [32m127971423716249600[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:12:50.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127971444750684160[0;39m 生成今日电子书快照开始
2021-12-20 11:12:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971444750684160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971444750684160[0;39m ==> Parameters: 
2021-12-20 11:12:50.223 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971444750684160[0;39m <==    Updates: 0
2021-12-20 11:12:50.223 INFO  com.job.EbookSnapshotJob                          :35   [32m127971444750684160[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:12:55.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127971465692844032[0;39m 生成今日电子书快照开始
2021-12-20 11:12:55.368 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971465692844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:12:55.368 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971465692844032[0;39m ==> Parameters: 
2021-12-20 11:12:55.554 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971465692844032[0;39m <==    Updates: 0
2021-12-20 11:12:55.569 INFO  com.job.EbookSnapshotJob                          :35   [32m127971465692844032[0;39m 生成今日电子书快照结束，耗时：553毫秒
2021-12-20 11:13:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127971486655975424[0;39m 生成今日电子书快照开始
2021-12-20 11:13:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971486655975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971486655975424[0;39m ==> Parameters: 
2021-12-20 11:13:00.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971486655975424[0;39m <==    Updates: 0
2021-12-20 11:13:00.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127971486655975424[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:13:05.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127971507619106816[0;39m 生成今日电子书快照开始
2021-12-20 11:13:05.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971507619106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:05.066 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971507619106816[0;39m ==> Parameters: 
2021-12-20 11:13:05.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971507619106816[0;39m <==    Updates: 0
2021-12-20 11:13:05.213 INFO  com.job.EbookSnapshotJob                          :35   [32m127971507619106816[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:13:05.213 INFO  com.job.DocJob                                    :32   [32m127971508462161920[0;39m 更新电子书下的文档数据开始
2021-12-20 11:13:05.213 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971508462161920[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:13:05.213 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971508462161920[0;39m ==> Parameters: 
2021-12-20 11:13:05.367 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971508462161920[0;39m <==    Updates: 3
2021-12-20 11:13:05.367 INFO  com.job.DocJob                                    :35   [32m127971508462161920[0;39m 更新电子书下的文档数据结束，耗时：154毫秒
2021-12-20 11:13:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127971528582238208[0;39m 生成今日电子书快照开始
2021-12-20 11:13:10.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971528582238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:10.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971528582238208[0;39m ==> Parameters: 
2021-12-20 11:13:10.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971528582238208[0;39m <==    Updates: 0
2021-12-20 11:13:10.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127971528582238208[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:13:15.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127971549545369600[0;39m 生成今日电子书快照开始
2021-12-20 11:13:15.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971549545369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:15.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971549545369600[0;39m ==> Parameters: 
2021-12-20 11:13:15.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971549545369600[0;39m <==    Updates: 0
2021-12-20 11:13:15.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127971549545369600[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:13:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127971570512695296[0;39m 生成今日电子书快照开始
2021-12-20 11:13:20.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971570512695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:20.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971570512695296[0;39m ==> Parameters: 
2021-12-20 11:13:20.208 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971570512695296[0;39m <==    Updates: 0
2021-12-20 11:13:20.208 INFO  com.job.EbookSnapshotJob                          :35   [32m127971570512695296[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:13:25.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127971591534546944[0;39m 生成今日电子书快照开始
2021-12-20 11:13:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971591534546944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971591534546944[0;39m ==> Parameters: 
2021-12-20 11:13:25.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971591534546944[0;39m <==    Updates: 0
2021-12-20 11:13:25.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127971591534546944[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:13:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127971612472512512[0;39m 生成今日电子书快照开始
2021-12-20 11:13:30.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971612472512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:30.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971612472512512[0;39m ==> Parameters: 
2021-12-20 11:13:30.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971612472512512[0;39m <==    Updates: 0
2021-12-20 11:13:30.218 INFO  com.job.EbookSnapshotJob                          :35   [32m127971612472512512[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 11:13:35.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127971633431449600[0;39m 生成今日电子书快照开始
2021-12-20 11:13:35.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971633431449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:35.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971633431449600[0;39m ==> Parameters: 
2021-12-20 11:13:35.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971633431449600[0;39m <==    Updates: 0
2021-12-20 11:13:35.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127971633431449600[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:13:35.214 INFO  com.job.DocJob                                    :32   [32m127971634295476224[0;39m 更新电子书下的文档数据开始
2021-12-20 11:13:35.214 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971634295476224[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:13:35.214 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971634295476224[0;39m ==> Parameters: 
2021-12-20 11:13:35.363 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971634295476224[0;39m <==    Updates: 3
2021-12-20 11:13:35.363 INFO  com.job.DocJob                                    :35   [32m127971634295476224[0;39m 更新电子书下的文档数据结束，耗时：149毫秒
2021-12-20 11:13:40.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127971654398775296[0;39m 生成今日电子书快照开始
2021-12-20 11:13:40.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971654398775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:40.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971654398775296[0;39m ==> Parameters: 
2021-12-20 11:13:40.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971654398775296[0;39m <==    Updates: 0
2021-12-20 11:13:40.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127971654398775296[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:13:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127971675429015552[0;39m 生成今日电子书快照开始
2021-12-20 11:13:45.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971675429015552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971675429015552[0;39m ==> Parameters: 
2021-12-20 11:13:45.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971675429015552[0;39m <==    Updates: 0
2021-12-20 11:13:45.275 INFO  com.job.EbookSnapshotJob                          :35   [32m127971675429015552[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:13:50.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127971696392146944[0;39m 生成今日电子书快照开始
2021-12-20 11:13:50.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971696392146944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:50.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971696392146944[0;39m ==> Parameters: 
2021-12-20 11:13:50.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971696392146944[0;39m <==    Updates: 0
2021-12-20 11:13:50.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127971696392146944[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:13:55.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127971717359472640[0;39m 生成今日电子书快照开始
2021-12-20 11:13:55.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971717359472640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:13:55.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971717359472640[0;39m ==> Parameters: 
2021-12-20 11:13:55.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971717359472640[0;39m <==    Updates: 0
2021-12-20 11:13:55.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127971717359472640[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:14:00.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127971738326798336[0;39m 生成今日电子书快照开始
2021-12-20 11:14:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971738326798336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:00.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971738326798336[0;39m ==> Parameters: 
2021-12-20 11:14:00.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971738326798336[0;39m <==    Updates: 0
2021-12-20 11:14:00.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127971738326798336[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:14:05.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127971759260569600[0;39m 生成今日电子书快照开始
2021-12-20 11:14:05.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971759260569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:05.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971759260569600[0;39m ==> Parameters: 
2021-12-20 11:14:05.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971759260569600[0;39m <==    Updates: 0
2021-12-20 11:14:05.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127971759260569600[0;39m 生成今日电子书快照结束，耗时：204毫秒
2021-12-20 11:14:05.212 INFO  com.job.DocJob                                    :32   [32m127971760116207616[0;39m 更新电子书下的文档数据开始
2021-12-20 11:14:05.212 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971760116207616[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:14:05.212 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971760116207616[0;39m ==> Parameters: 
2021-12-20 11:14:05.350 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971760116207616[0;39m <==    Updates: 3
2021-12-20 11:14:05.350 INFO  com.job.DocJob                                    :35   [32m127971760116207616[0;39m 更新电子书下的文档数据结束，耗时：138毫秒
2021-12-20 11:14:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127971780244672512[0;39m 生成今日电子书快照开始
2021-12-20 11:14:10.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971780244672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:10.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971780244672512[0;39m ==> Parameters: 
2021-12-20 11:14:10.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971780244672512[0;39m <==    Updates: 0
2021-12-20 11:14:10.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127971780244672512[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-20 11:14:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127971801216192512[0;39m 生成今日电子书快照开始
2021-12-20 11:14:15.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971801216192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:15.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971801216192512[0;39m ==> Parameters: 
2021-12-20 11:14:15.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971801216192512[0;39m <==    Updates: 0
2021-12-20 11:14:15.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127971801216192512[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:14:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127971822183518208[0;39m 生成今日电子书快照开始
2021-12-20 11:14:20.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971822183518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:20.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971822183518208[0;39m ==> Parameters: 
2021-12-20 11:14:20.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971822183518208[0;39m <==    Updates: 0
2021-12-20 11:14:20.210 INFO  com.job.EbookSnapshotJob                          :35   [32m127971822183518208[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:14:25.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127971843150843904[0;39m 生成今日电子书快照开始
2021-12-20 11:14:25.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971843150843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:25.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971843150843904[0;39m ==> Parameters: 
2021-12-20 11:14:25.324 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971843150843904[0;39m <==    Updates: 0
2021-12-20 11:14:25.324 INFO  com.job.EbookSnapshotJob                          :35   [32m127971843150843904[0;39m 生成今日电子书快照结束，耗时：315毫秒
2021-12-20 11:14:30.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127971864176889856[0;39m 生成今日电子书快照开始
2021-12-20 11:14:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971864176889856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971864176889856[0;39m ==> Parameters: 
2021-12-20 11:14:30.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971864176889856[0;39m <==    Updates: 0
2021-12-20 11:14:30.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127971864176889856[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:14:35.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127971885135826944[0;39m 生成今日电子书快照开始
2021-12-20 11:14:35.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971885135826944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:35.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971885135826944[0;39m ==> Parameters: 
2021-12-20 11:14:35.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971885135826944[0;39m <==    Updates: 0
2021-12-20 11:14:35.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127971885135826944[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:14:35.235 INFO  com.job.DocJob                                    :32   [32m127971886041796608[0;39m 更新电子书下的文档数据开始
2021-12-20 11:14:35.235 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971886041796608[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:14:35.235 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971886041796608[0;39m ==> Parameters: 
2021-12-20 11:14:35.498 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127971886041796608[0;39m <==    Updates: 3
2021-12-20 11:14:35.498 INFO  com.job.DocJob                                    :35   [32m127971886041796608[0;39m 更新电子书下的文档数据结束，耗时：263毫秒
2021-12-20 11:14:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127971906086375424[0;39m 生成今日电子书快照开始
2021-12-20 11:14:40.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971906086375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:40.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971906086375424[0;39m ==> Parameters: 
2021-12-20 11:14:40.198 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971906086375424[0;39m <==    Updates: 0
2021-12-20 11:14:40.198 INFO  com.job.EbookSnapshotJob                          :35   [32m127971906086375424[0;39m 生成今日电子书快照结束，耗时：184毫秒
2021-12-20 11:14:45.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127971927104032768[0;39m 生成今日电子书快照开始
2021-12-20 11:14:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971927104032768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971927104032768[0;39m ==> Parameters: 
2021-12-20 11:14:45.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971927104032768[0;39m <==    Updates: 0
2021-12-20 11:14:45.232 INFO  com.job.EbookSnapshotJob                          :35   [32m127971927104032768[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 11:14:50.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127971948046192640[0;39m 生成今日电子书快照开始
2021-12-20 11:14:50.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971948046192640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:50.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971948046192640[0;39m ==> Parameters: 
2021-12-20 11:14:50.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971948046192640[0;39m <==    Updates: 0
2021-12-20 11:14:50.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127971948046192640[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:14:55.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127971968958992384[0;39m 生成今日电子书快照开始
2021-12-20 11:14:55.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971968958992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:14:55.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971968958992384[0;39m ==> Parameters: 
2021-12-20 11:14:55.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971968958992384[0;39m <==    Updates: 0
2021-12-20 11:14:55.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127971968958992384[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:14:59.597 INFO  com.aspect.LogAspect                              :54   [32m127971988223430656[0;39m ------------- 开始 -------------
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :55   [32m127971988223430656[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :54   [32m127971988227624960[0;39m ------------- 开始 -------------
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :54   [32m127971988227624961[0;39m ------------- 开始 -------------
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :56   [32m127971988223430656[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :55   [32m127971988227624960[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :55   [32m127971988227624961[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :57   [32m127971988223430656[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :56   [32m127971988227624960[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :56   [32m127971988227624961[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :80   [32m127971988223430656[0;39m 请求参数: []
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :57   [32m127971988227624960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:14:59.598 INFO  com.aspect.LogAspect                              :57   [32m127971988227624961[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:14:59.599 INFO  com.aspect.LogAspect                              :80   [32m127971988227624961[0;39m 请求参数: []
2021-12-20 11:14:59.599 INFO  com.aspect.LogAspect                              :80   [32m127971988227624960[0;39m 请求参数: []
2021-12-20 11:14:59.692 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127971988223430656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:14:59.692 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127971988227624960[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:14:59.692 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127971988227624961[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:14:59.692 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127971988223430656[0;39m ==> Parameters: 
2021-12-20 11:14:59.692 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127971988227624961[0;39m ==> Parameters: 
2021-12-20 11:14:59.692 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127971988227624960[0;39m ==> Parameters: 
2021-12-20 11:14:59.763 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127971988223430656[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:14:59.766 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127971988223430656[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:14:59.767 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127971988223430656[0;39m <==        Row: 2021-12-20, 503, 174, 1, 1
2021-12-20 11:14:59.768 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127971988223430656[0;39m <==      Total: 2
2021-12-20 11:14:59.769 INFO  com.aspect.LogAspect                              :92   [32m127971988223430656[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":503,"viewIncrease":1,"voteCount":174,"voteIncrease":1}],"success":true}
2021-12-20 11:14:59.769 INFO  com.aspect.LogAspect                              :93   [32m127971988223430656[0;39m ------------- 结束 耗时：172 ms -------------
2021-12-20 11:14:59.774 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127971988227624961[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:14:59.774 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127971988227624961[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:14:59.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:14:59.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:14:59.777 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127971988227624961[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:14:59.777 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:14:59.778 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127971988227624961[0;39m <==      Total: 2
2021-12-20 11:14:59.778 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:14:59.779 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:14:59.779 INFO  com.aspect.LogAspect                              :92   [32m127971988227624961[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:14:59.780 INFO  com.aspect.LogAspect                              :93   [32m127971988227624961[0;39m ------------- 结束 耗时：182 ms -------------
2021-12-20 11:14:59.780 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:14:59.780 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:14:59.781 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:14:59.781 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:14:59.782 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:14:59.783 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:14:59.783 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:14:59.783 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:14:59.784 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:14:59.784 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:14:59.785 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:14:59.785 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:14:59.785 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:14:59.786 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:14:59.786 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127971988227624960[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:14:59.787 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127971988227624960[0;39m <==      Total: 19
2021-12-20 11:14:59.789 INFO  com.aspect.LogAspect                              :92   [32m127971988227624960[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:14:59.789 INFO  com.aspect.LogAspect                              :93   [32m127971988227624960[0;39m ------------- 结束 耗时：191 ms -------------
2021-12-20 11:15:00.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127971989926318080[0;39m 生成今日电子书快照开始
2021-12-20 11:15:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971989926318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:00.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971989926318080[0;39m ==> Parameters: 
2021-12-20 11:15:00.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127971989926318080[0;39m <==    Updates: 0
2021-12-20 11:15:00.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127971989926318080[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:15:05.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127972010931392512[0;39m 生成今日电子书快照开始
2021-12-20 11:15:05.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972010931392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:05.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972010931392512[0;39m ==> Parameters: 
2021-12-20 11:15:05.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972010931392512[0;39m <==    Updates: 0
2021-12-20 11:15:05.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127972010931392512[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:15:05.251 INFO  com.job.DocJob                                    :32   [32m127972011938025472[0;39m 更新电子书下的文档数据开始
2021-12-20 11:15:05.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127972011938025472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:15:05.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127972011938025472[0;39m ==> Parameters: 
2021-12-20 11:15:05.401 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127972011938025472[0;39m <==    Updates: 3
2021-12-20 11:15:05.401 INFO  com.job.DocJob                                    :35   [32m127972011938025472[0;39m 更新电子书下的文档数据结束，耗时：150毫秒
2021-12-20 11:15:10.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127972031949049856[0;39m 生成今日电子书快照开始
2021-12-20 11:15:10.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972031949049856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:10.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972031949049856[0;39m ==> Parameters: 
2021-12-20 11:15:10.526 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972031949049856[0;39m <==    Updates: 0
2021-12-20 11:15:10.526 INFO  com.job.EbookSnapshotJob                          :35   [32m127972031949049856[0;39m 生成今日电子书快照结束，耗时：503毫秒
2021-12-20 11:15:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127972052845072384[0;39m 生成今日电子书快照开始
2021-12-20 11:15:15.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972052845072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:15.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972052845072384[0;39m ==> Parameters: 
2021-12-20 11:15:15.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972052845072384[0;39m <==    Updates: 0
2021-12-20 11:15:15.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127972052845072384[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:15:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127972073829175296[0;39m 生成今日电子书快照开始
2021-12-20 11:15:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972073829175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:20.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972073829175296[0;39m ==> Parameters: 
2021-12-20 11:15:20.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972073829175296[0;39m <==    Updates: 0
2021-12-20 11:15:20.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127972073829175296[0;39m 生成今日电子书快照结束，耗时：214毫秒
2021-12-20 11:15:25.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127972094809083904[0;39m 生成今日电子书快照开始
2021-12-20 11:15:25.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972094809083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:25.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972094809083904[0;39m ==> Parameters: 
2021-12-20 11:15:25.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972094809083904[0;39m <==    Updates: 0
2021-12-20 11:15:25.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127972094809083904[0;39m 生成今日电子书快照结束，耗时：210毫秒
2021-12-20 11:15:28.649 INFO  com.websocket.WebSocketServer                     :41   [32m127970194764206080[0;39m 连接关闭，token：qq7guPEJcB，session id：8！当前连接数：0
2021-12-20 11:15:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127972115788992512[0;39m 生成今日电子书快照开始
2021-12-20 11:15:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972115788992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972115788992512[0;39m ==> Parameters: 
2021-12-20 11:15:30.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972115788992512[0;39m <==    Updates: 0
2021-12-20 11:15:30.218 INFO  com.job.EbookSnapshotJob                          :35   [32m127972115788992512[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:15:35.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127972136731152384[0;39m 生成今日电子书快照开始
2021-12-20 11:15:35.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972136731152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:15:35.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972136731152384[0;39m ==> Parameters: 
2021-12-20 11:15:35.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127972136731152384[0;39m <==    Updates: 0
2021-12-20 11:15:35.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127972136731152384[0;39m 生成今日电子书快照结束，耗时：246毫秒
2021-12-20 11:15:35.251 INFO  com.job.DocJob                                    :32   [32m127972137767145472[0;39m 更新电子书下的文档数据开始
2021-12-20 11:15:35.252 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127972137767145472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:15:35.253 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127972137767145472[0;39m ==> Parameters: 
2021-12-20 11:15:35.396 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127972137767145472[0;39m <==    Updates: 3
2021-12-20 11:15:35.397 INFO  com.job.DocJob                                    :35   [32m127972137767145472[0;39m 更新电子书下的文档数据结束，耗时：146毫秒
2021-12-20 11:20:10.059 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 5128 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:20:10.061 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:20:10.057 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 11:20:10.128 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 11:20:10.130 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 11:20:11.898 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:20:11.898 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:20:12.515 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 603 ms. Found 0 Redis repository interfaces.
2021-12-20 11:20:13.100 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:20:13.116 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:20:13.116 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:20:13.116 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:20:13.163 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:20:13.163 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3033 ms
2021-12-20 11:20:14.419 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:20:14.450 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:20:14.466 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:20:14.481 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.233 seconds (JVM running for 6.174)
2021-12-20 11:20:15.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127973311140466688[0;39m 生成今日电子书快照开始
2021-12-20 11:20:15.121 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127973311140466688[0;39m HikariPool-1 - Starting...
2021-12-20 11:20:16.105 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127973311140466688[0;39m HikariPool-1 - Start completed.
2021-12-20 11:20:16.121 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973311140466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:16.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973311140466688[0;39m ==> Parameters: 
2021-12-20 11:20:16.322 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973311140466688[0;39m <==    Updates: 0
2021-12-20 11:20:16.322 INFO  com.job.EbookSnapshotJob                          :35   [32m127973311140466688[0;39m 生成今日电子书快照结束，耗时：1317毫秒
2021-12-20 11:20:20.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127973332200067072[0;39m 生成今日电子书快照开始
2021-12-20 11:20:20.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973332200067072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:20.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973332200067072[0;39m ==> Parameters: 
2021-12-20 11:20:20.458 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973332200067072[0;39m <==    Updates: 0
2021-12-20 11:20:20.458 INFO  com.job.EbookSnapshotJob                          :35   [32m127973332200067072[0;39m 生成今日电子书快照结束，耗时：432毫秒
2021-12-20 11:20:25.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127973353075118080[0;39m 生成今日电子书快照开始
2021-12-20 11:20:25.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973353075118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973353075118080[0;39m ==> Parameters: 
2021-12-20 11:20:25.299 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973353075118080[0;39m <==    Updates: 0
2021-12-20 11:20:25.300 INFO  com.job.EbookSnapshotJob                          :35   [32m127973353075118080[0;39m 生成今日电子书快照结束，耗时：297毫秒
2021-12-20 11:20:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127973374055026688[0;39m 生成今日电子书快照开始
2021-12-20 11:20:30.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973374055026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:30.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973374055026688[0;39m ==> Parameters: 
2021-12-20 11:20:30.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973374055026688[0;39m <==    Updates: 0
2021-12-20 11:20:30.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127973374055026688[0;39m 生成今日电子书快照结束，耗时：261毫秒
2021-12-20 11:20:35.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127973395047518208[0;39m 生成今日电子书快照开始
2021-12-20 11:20:35.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973395047518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:35.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973395047518208[0;39m ==> Parameters: 
2021-12-20 11:20:35.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973395047518208[0;39m <==    Updates: 0
2021-12-20 11:20:35.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127973395047518208[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 11:20:35.240 INFO  com.job.DocJob                                    :32   [32m127973396012208128[0;39m 更新电子书下的文档数据开始
2021-12-20 11:20:35.247 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973396012208128[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:20:35.247 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973396012208128[0;39m ==> Parameters: 
2021-12-20 11:20:35.383 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973396012208128[0;39m <==    Updates: 3
2021-12-20 11:20:35.383 INFO  com.job.DocJob                                    :35   [32m127973396012208128[0;39m 更新电子书下的文档数据结束，耗时：143毫秒
2021-12-20 11:20:40.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127973415998066688[0;39m 生成今日电子书快照开始
2021-12-20 11:20:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973415998066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:40.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973415998066688[0;39m ==> Parameters: 
2021-12-20 11:20:40.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973415998066688[0;39m <==    Updates: 0
2021-12-20 11:20:40.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127973415998066688[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:20:45.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127973436969586688[0;39m 生成今日电子书快照开始
2021-12-20 11:20:45.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973436969586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:45.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973436969586688[0;39m ==> Parameters: 
2021-12-20 11:20:45.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973436969586688[0;39m <==    Updates: 0
2021-12-20 11:20:45.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127973436969586688[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:20:50.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127973457936912384[0;39m 生成今日电子书快照开始
2021-12-20 11:20:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973457936912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973457936912384[0;39m ==> Parameters: 
2021-12-20 11:20:50.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973457936912384[0;39m <==    Updates: 0
2021-12-20 11:20:50.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127973457936912384[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-20 11:20:55.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127973478967152640[0;39m 生成今日电子书快照开始
2021-12-20 11:20:55.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973478967152640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:20:55.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973478967152640[0;39m ==> Parameters: 
2021-12-20 11:20:55.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973478967152640[0;39m <==    Updates: 0
2021-12-20 11:20:55.303 INFO  com.job.EbookSnapshotJob                          :35   [32m127973478967152640[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 11:20:58.452 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 11:20:58.452 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 11:20:58.453 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 11:20:58.495 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：rLGTtkNmEX，session id：0，当前连接数：1
2021-12-20 11:20:58.681 INFO  com.aspect.LogAspect                              :54   [32m127973494326693890[0;39m ------------- 开始 -------------
2021-12-20 11:20:58.681 INFO  com.aspect.LogAspect                              :54   [32m127973494326693889[0;39m ------------- 开始 -------------
2021-12-20 11:20:58.681 INFO  com.aspect.LogAspect                              :54   [32m127973494326693888[0;39m ------------- 开始 -------------
2021-12-20 11:20:58.682 INFO  com.aspect.LogAspect                              :55   [32m127973494326693889[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:20:58.682 INFO  com.aspect.LogAspect                              :55   [32m127973494326693890[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:20:58.682 INFO  com.aspect.LogAspect                              :55   [32m127973494326693888[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:20:58.683 INFO  com.aspect.LogAspect                              :56   [32m127973494326693888[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:20:58.683 INFO  com.aspect.LogAspect                              :56   [32m127973494326693890[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:20:58.683 INFO  com.aspect.LogAspect                              :56   [32m127973494326693889[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:20:58.683 INFO  com.aspect.LogAspect                              :57   [32m127973494326693888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:20:58.683 INFO  com.aspect.LogAspect                              :57   [32m127973494326693889[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:20:58.683 INFO  com.aspect.LogAspect                              :57   [32m127973494326693890[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:20:58.718 INFO  com.aspect.LogAspect                              :80   [32m127973494326693890[0;39m 请求参数: []
2021-12-20 11:20:58.718 INFO  com.aspect.LogAspect                              :80   [32m127973494326693889[0;39m 请求参数: []
2021-12-20 11:20:58.725 INFO  com.aspect.LogAspect                              :80   [32m127973494326693888[0;39m 请求参数: []
2021-12-20 11:20:58.801 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973494326693890[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:20:58.803 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973494326693890[0;39m ==> Parameters: 
2021-12-20 11:20:58.807 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973494326693889[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:20:58.808 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973494326693889[0;39m ==> Parameters: 
2021-12-20 11:20:58.835 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973494326693888[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:20:58.837 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973494326693888[0;39m ==> Parameters: 
2021-12-20 11:20:58.931 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:20:58.931 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973494326693889[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:20:58.931 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973494326693890[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:20:58.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:20:58.933 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973494326693890[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:20:58.933 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973494326693889[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:20:58.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:20:58.935 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:20:58.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:20:58.937 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973494326693890[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:20:58.937 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973494326693889[0;39m <==        Row: 2021-12-20, 503, 174, 1, 1
2021-12-20 11:20:58.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:20:58.937 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973494326693890[0;39m <==      Total: 2
2021-12-20 11:20:58.938 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:20:58.938 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973494326693889[0;39m <==      Total: 2
2021-12-20 11:20:58.939 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:20:58.940 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:20:58.941 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:20:58.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:20:58.943 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:20:58.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:20:58.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:20:58.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:20:58.946 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:20:58.946 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:20:58.948 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:20:58.949 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:20:58.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973494326693888[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:20:58.950 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973494326693888[0;39m <==      Total: 19
2021-12-20 11:20:58.966 INFO  com.aspect.LogAspect                              :92   [32m127973494326693888[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:20:58.966 INFO  com.aspect.LogAspect                              :93   [32m127973494326693888[0;39m ------------- 结束 耗时：286 ms -------------
2021-12-20 11:20:58.967 INFO  com.aspect.LogAspect                              :92   [32m127973494326693890[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:20:58.967 INFO  com.aspect.LogAspect                              :92   [32m127973494326693889[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":503,"viewIncrease":1,"voteCount":174,"voteIncrease":1}],"success":true}
2021-12-20 11:20:58.968 INFO  com.aspect.LogAspect                              :93   [32m127973494326693890[0;39m ------------- 结束 耗时：288 ms -------------
2021-12-20 11:20:58.968 INFO  com.aspect.LogAspect                              :93   [32m127973494326693889[0;39m ------------- 结束 耗时：288 ms -------------
2021-12-20 11:21:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127973499900923904[0;39m 生成今日电子书快照开始
2021-12-20 11:21:00.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973499900923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:00.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973499900923904[0;39m ==> Parameters: 
2021-12-20 11:21:00.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973499900923904[0;39m <==    Updates: 0
2021-12-20 11:21:00.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127973499900923904[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:21:05.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127973520843083776[0;39m 生成今日电子书快照开始
2021-12-20 11:21:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973520843083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973520843083776[0;39m ==> Parameters: 
2021-12-20 11:21:05.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973520843083776[0;39m <==    Updates: 0
2021-12-20 11:21:05.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127973520843083776[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:21:05.234 INFO  com.job.DocJob                                    :32   [32m127973521816162304[0;39m 更新电子书下的文档数据开始
2021-12-20 11:21:05.234 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973521816162304[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:21:05.234 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973521816162304[0;39m ==> Parameters: 
2021-12-20 11:21:05.398 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973521816162304[0;39m <==    Updates: 3
2021-12-20 11:21:05.402 INFO  com.job.DocJob                                    :35   [32m127973521816162304[0;39m 更新电子书下的文档数据结束，耗时：168毫秒
2021-12-20 11:21:07.822 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：rLGTtkNmEX，session id：0！当前连接数：0
2021-12-20 11:21:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127973541869129728[0;39m 生成今日电子书快照开始
2021-12-20 11:21:10.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973541869129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:10.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973541869129728[0;39m ==> Parameters: 
2021-12-20 11:21:10.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973541869129728[0;39m <==    Updates: 0
2021-12-20 11:21:10.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127973541869129728[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:21:15.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127973562798706688[0;39m 生成今日电子书快照开始
2021-12-20 11:21:15.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973562798706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:15.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973562798706688[0;39m ==> Parameters: 
2021-12-20 11:21:15.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973562798706688[0;39m <==    Updates: 0
2021-12-20 11:21:15.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127973562798706688[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 11:21:20.041 INFO  com.job.EbookSnapshotJob                          :32   [32m127973583921221632[0;39m 生成今日电子书快照开始
2021-12-20 11:21:20.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973583921221632[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:20.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973583921221632[0;39m ==> Parameters: 
2021-12-20 11:21:20.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973583921221632[0;39m <==    Updates: 0
2021-12-20 11:21:20.303 INFO  com.job.EbookSnapshotJob                          :35   [32m127973583921221632[0;39m 生成今日电子书快照结束，耗时：262毫秒
2021-12-20 11:21:25.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127973604750135296[0;39m 生成今日电子书快照开始
2021-12-20 11:21:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973604750135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973604750135296[0;39m ==> Parameters: 
2021-12-20 11:21:25.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973604750135296[0;39m <==    Updates: 0
2021-12-20 11:21:25.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127973604750135296[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:21:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127973625717460992[0;39m 生成今日电子书快照开始
2021-12-20 11:21:30.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973625717460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:30.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973625717460992[0;39m ==> Parameters: 
2021-12-20 11:21:30.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973625717460992[0;39m <==    Updates: 0
2021-12-20 11:21:30.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127973625717460992[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:21:35.022 INFO  com.job.DocJob                                    :32   [32m127973646756089856[0;39m 更新电子书下的文档数据开始
2021-12-20 11:21:35.106 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973646756089856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:21:35.106 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973646756089856[0;39m ==> Parameters: 
2021-12-20 11:21:35.253 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973646756089856[0;39m <==    Updates: 3
2021-12-20 11:21:35.253 INFO  com.job.DocJob                                    :35   [32m127973646756089856[0;39m 更新电子书下的文档数据结束，耗时：231毫秒
2021-12-20 11:21:35.253 INFO  com.job.EbookSnapshotJob                          :32   [32m127973647724974080[0;39m 生成今日电子书快照开始
2021-12-20 11:21:35.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973647724974080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:35.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973647724974080[0;39m ==> Parameters: 
2021-12-20 11:21:35.390 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973647724974080[0;39m <==    Updates: 0
2021-12-20 11:21:35.390 INFO  com.job.EbookSnapshotJob                          :35   [32m127973647724974080[0;39m 生成今日电子书快照结束，耗时：137毫秒
2021-12-20 11:21:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127973667689861120[0;39m 生成今日电子书快照开始
2021-12-20 11:21:40.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973667689861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:40.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973667689861120[0;39m ==> Parameters: 
2021-12-20 11:21:40.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973667689861120[0;39m <==    Updates: 0
2021-12-20 11:21:40.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127973667689861120[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:21:42.965 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：pzlUKWc8Hk，session id：1，当前连接数：1
2021-12-20 11:21:43.270 INFO  com.aspect.LogAspect                              :54   [32m127973681350709248[0;39m ------------- 开始 -------------
2021-12-20 11:21:43.271 INFO  com.aspect.LogAspect                              :55   [32m127973681350709248[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:21:43.271 INFO  com.aspect.LogAspect                              :56   [32m127973681350709248[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:21:43.272 INFO  com.aspect.LogAspect                              :57   [32m127973681350709248[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:21:43.273 INFO  com.aspect.LogAspect                              :80   [32m127973681350709248[0;39m 请求参数: []
2021-12-20 11:21:43.281 INFO  com.aspect.LogAspect                              :54   [32m127973681396846592[0;39m ------------- 开始 -------------
2021-12-20 11:21:43.282 INFO  com.aspect.LogAspect                              :55   [32m127973681396846592[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:21:43.282 INFO  com.aspect.LogAspect                              :56   [32m127973681396846592[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:21:43.282 INFO  com.aspect.LogAspect                              :57   [32m127973681396846592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:21:43.282 INFO  com.aspect.LogAspect                              :54   [32m127973681401040896[0;39m ------------- 开始 -------------
2021-12-20 11:21:43.283 INFO  com.aspect.LogAspect                              :55   [32m127973681401040896[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:21:43.283 INFO  com.aspect.LogAspect                              :56   [32m127973681401040896[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:21:43.283 INFO  com.aspect.LogAspect                              :57   [32m127973681401040896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:21:43.283 INFO  com.aspect.LogAspect                              :80   [32m127973681401040896[0;39m 请求参数: []
2021-12-20 11:21:43.284 INFO  com.aspect.LogAspect                              :80   [32m127973681396846592[0;39m 请求参数: []
2021-12-20 11:21:43.352 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973681401040896[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:21:43.352 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973681350709248[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:21:43.353 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973681401040896[0;39m ==> Parameters: 
2021-12-20 11:21:43.353 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973681350709248[0;39m ==> Parameters: 
2021-12-20 11:21:43.360 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973681396846592[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:21:43.360 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973681396846592[0;39m ==> Parameters: 
2021-12-20 11:21:43.423 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973681350709248[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:21:43.424 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973681350709248[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:21:43.425 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973681350709248[0;39m <==        Row: 2021-12-20, 503, 174, 1, 1
2021-12-20 11:21:43.426 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973681350709248[0;39m <==      Total: 2
2021-12-20 11:21:43.428 INFO  com.aspect.LogAspect                              :92   [32m127973681350709248[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":503,"viewIncrease":1,"voteCount":174,"voteIncrease":1}],"success":true}
2021-12-20 11:21:43.429 INFO  com.aspect.LogAspect                              :93   [32m127973681350709248[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-20 11:21:43.437 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:21:43.437 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:21:43.438 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:21:43.438 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:21:43.439 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:21:43.439 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:21:43.440 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:21:43.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:21:43.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:21:43.442 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:21:43.443 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:21:43.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:21:43.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:21:43.445 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:21:43.445 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:21:43.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:21:43.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:21:43.447 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973681396846592[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:21:43.447 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:21:43.448 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973681396846592[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:21:43.447 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:21:43.448 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973681401040896[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:21:43.448 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973681396846592[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:21:43.448 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973681401040896[0;39m <==      Total: 19
2021-12-20 11:21:43.449 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973681396846592[0;39m <==      Total: 2
2021-12-20 11:21:43.449 INFO  com.aspect.LogAspect                              :92   [32m127973681396846592[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:21:43.450 INFO  com.aspect.LogAspect                              :93   [32m127973681396846592[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:21:43.451 INFO  com.aspect.LogAspect                              :92   [32m127973681401040896[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:21:43.452 INFO  com.aspect.LogAspect                              :93   [32m127973681401040896[0;39m ------------- 结束 耗时：170 ms -------------
2021-12-20 11:21:45.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127973688699129856[0;39m 生成今日电子书快照开始
2021-12-20 11:21:45.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973688699129856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:45.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973688699129856[0;39m ==> Parameters: 
2021-12-20 11:21:45.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973688699129856[0;39m <==    Updates: 0
2021-12-20 11:21:45.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127973688699129856[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:21:50.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127973709607735296[0;39m 生成今日电子书快照开始
2021-12-20 11:21:50.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973709607735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:50.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973709607735296[0;39m ==> Parameters: 
2021-12-20 11:21:50.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973709607735296[0;39m <==    Updates: 0
2021-12-20 11:21:50.218 INFO  com.job.EbookSnapshotJob                          :35   [32m127973709607735296[0;39m 生成今日电子书快照结束，耗时：211毫秒
2021-12-20 11:21:55.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127973730617004032[0;39m 生成今日电子书快照开始
2021-12-20 11:21:55.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973730617004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:21:55.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973730617004032[0;39m ==> Parameters: 
2021-12-20 11:21:55.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973730617004032[0;39m <==    Updates: 0
2021-12-20 11:21:55.281 INFO  com.job.EbookSnapshotJob                          :35   [32m127973730617004032[0;39m 生成今日电子书快照结束，耗时：265毫秒
2021-12-20 11:22:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127973751584329728[0;39m 生成今日电子书快照开始
2021-12-20 11:22:00.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973751584329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:00.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973751584329728[0;39m ==> Parameters: 
2021-12-20 11:22:00.316 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973751584329728[0;39m <==    Updates: 0
2021-12-20 11:22:00.316 INFO  com.job.EbookSnapshotJob                          :35   [32m127973751584329728[0;39m 生成今日电子书快照结束，耗时：301毫秒
2021-12-20 11:22:05.014 INFO  com.job.DocJob                                    :32   [32m127973772551655424[0;39m 更新电子书下的文档数据开始
2021-12-20 11:22:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973772551655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:22:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973772551655424[0;39m ==> Parameters: 
2021-12-20 11:22:05.246 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973772551655424[0;39m <==    Updates: 3
2021-12-20 11:22:05.246 INFO  com.job.DocJob                                    :35   [32m127973772551655424[0;39m 更新电子书下的文档数据结束，耗时：232毫秒
2021-12-20 11:22:05.246 INFO  com.job.EbookSnapshotJob                          :32   [32m127973773524733952[0;39m 生成今日电子书快照开始
2021-12-20 11:22:05.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973773524733952[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:05.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973773524733952[0;39m ==> Parameters: 
2021-12-20 11:22:05.398 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973773524733952[0;39m <==    Updates: 0
2021-12-20 11:22:05.398 INFO  com.job.EbookSnapshotJob                          :35   [32m127973773524733952[0;39m 生成今日电子书快照结束，耗时：152毫秒
2021-12-20 11:22:07.925 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：pzlUKWc8Hk，session id：1！当前连接数：0
2021-12-20 11:22:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127973793485426688[0;39m 生成今日电子书快照开始
2021-12-20 11:22:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973793485426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973793485426688[0;39m ==> Parameters: 
2021-12-20 11:22:10.444 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973793485426688[0;39m <==    Updates: 0
2021-12-20 11:22:10.444 INFO  com.job.EbookSnapshotJob                          :35   [32m127973793485426688[0;39m 生成今日电子书快照结束，耗时：439毫秒
2021-12-20 11:22:15.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127973814524055552[0;39m 生成今日电子书快照开始
2021-12-20 11:22:15.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973814524055552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:15.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973814524055552[0;39m ==> Parameters: 
2021-12-20 11:22:15.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973814524055552[0;39m <==    Updates: 0
2021-12-20 11:22:15.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127973814524055552[0;39m 生成今日电子书快照结束，耗时：205毫秒
2021-12-20 11:22:20.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127973835508158464[0;39m 生成今日电子书快照开始
2021-12-20 11:22:20.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973835508158464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:20.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973835508158464[0;39m ==> Parameters: 
2021-12-20 11:22:20.411 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973835508158464[0;39m <==    Updates: 0
2021-12-20 11:22:20.411 INFO  com.job.EbookSnapshotJob                          :35   [32m127973835508158464[0;39m 生成今日电子书快照结束，耗时：387毫秒
2021-12-20 11:22:25.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127973856458706944[0;39m 生成今日电子书快照开始
2021-12-20 11:22:25.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973856458706944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:25.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973856458706944[0;39m ==> Parameters: 
2021-12-20 11:22:25.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973856458706944[0;39m <==    Updates: 0
2021-12-20 11:22:25.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127973856458706944[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:22:30.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127973877472169984[0;39m 生成今日电子书快照开始
2021-12-20 11:22:30.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973877472169984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:30.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973877472169984[0;39m ==> Parameters: 
2021-12-20 11:22:30.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973877472169984[0;39m <==    Updates: 0
2021-12-20 11:22:30.303 INFO  com.job.EbookSnapshotJob                          :35   [32m127973877472169984[0;39m 生成今日电子书快照结束，耗时：274毫秒
2021-12-20 11:22:35.006 INFO  com.job.DocJob                                    :32   [32m127973898347220992[0;39m 更新电子书下的文档数据开始
2021-12-20 11:22:35.075 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973898347220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:22:35.075 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973898347220992[0;39m ==> Parameters: 
2021-12-20 11:22:35.229 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127973898347220992[0;39m <==    Updates: 3
2021-12-20 11:22:35.229 INFO  com.job.DocJob                                    :35   [32m127973898347220992[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 11:22:35.229 INFO  com.job.EbookSnapshotJob                          :32   [32m127973899282550784[0;39m 生成今日电子书快照开始
2021-12-20 11:22:35.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973899282550784[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:35.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973899282550784[0;39m ==> Parameters: 
2021-12-20 11:22:35.391 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973899282550784[0;39m <==    Updates: 0
2021-12-20 11:22:35.391 INFO  com.job.EbookSnapshotJob                          :35   [32m127973899282550784[0;39m 生成今日电子书快照结束，耗时：162毫秒
2021-12-20 11:22:40.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127973919394238464[0;39m 生成今日电子书快照开始
2021-12-20 11:22:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973919394238464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973919394238464[0;39m ==> Parameters: 
2021-12-20 11:22:40.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973919394238464[0;39m <==    Updates: 0
2021-12-20 11:22:40.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127973919394238464[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:22:42.054 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：dEUkdRF3Hh，session id：2，当前连接数：1
2021-12-20 11:22:42.173 INFO  com.aspect.LogAspect                              :54   [32m127973928407797760[0;39m ------------- 开始 -------------
2021-12-20 11:22:42.174 INFO  com.aspect.LogAspect                              :55   [32m127973928407797760[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:22:42.174 INFO  com.aspect.LogAspect                              :56   [32m127973928407797760[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:22:42.174 INFO  com.aspect.LogAspect                              :57   [32m127973928407797760[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:22:42.174 INFO  com.aspect.LogAspect                              :80   [32m127973928407797760[0;39m 请求参数: []
2021-12-20 11:22:42.177 INFO  com.aspect.LogAspect                              :54   [32m127973928424574976[0;39m ------------- 开始 -------------
2021-12-20 11:22:42.177 INFO  com.aspect.LogAspect                              :55   [32m127973928424574976[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:22:42.178 INFO  com.aspect.LogAspect                              :56   [32m127973928424574976[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:22:42.178 INFO  com.aspect.LogAspect                              :57   [32m127973928424574976[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:22:42.178 INFO  com.aspect.LogAspect                              :80   [32m127973928424574976[0;39m 请求参数: []
2021-12-20 11:22:42.180 INFO  com.aspect.LogAspect                              :54   [32m127973928437157888[0;39m ------------- 开始 -------------
2021-12-20 11:22:42.180 INFO  com.aspect.LogAspect                              :55   [32m127973928437157888[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:22:42.181 INFO  com.aspect.LogAspect                              :56   [32m127973928437157888[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:22:42.181 INFO  com.aspect.LogAspect                              :57   [32m127973928437157888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:22:42.181 INFO  com.aspect.LogAspect                              :80   [32m127973928437157888[0;39m 请求参数: []
2021-12-20 11:22:42.254 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973928407797760[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:22:42.254 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973928407797760[0;39m ==> Parameters: 
2021-12-20 11:22:42.262 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973928424574976[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:22:42.263 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973928424574976[0;39m ==> Parameters: 
2021-12-20 11:22:42.312 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973928437157888[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:22:42.313 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973928437157888[0;39m ==> Parameters: 
2021-12-20 11:22:42.333 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973928407797760[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:22:42.334 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973928407797760[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:22:42.335 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127973928407797760[0;39m <==        Row: 2021-12-20, 503, 174, 1, 1
2021-12-20 11:22:42.337 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127973928407797760[0;39m <==      Total: 2
2021-12-20 11:22:42.338 INFO  com.aspect.LogAspect                              :92   [32m127973928407797760[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":503,"viewIncrease":1,"voteCount":174,"voteIncrease":1}],"success":true}
2021-12-20 11:22:42.338 INFO  com.aspect.LogAspect                              :93   [32m127973928407797760[0;39m ------------- 结束 耗时：165 ms -------------
2021-12-20 11:22:42.344 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973928424574976[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:22:42.345 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973928424574976[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:22:42.347 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127973928424574976[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:22:42.348 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127973928424574976[0;39m <==      Total: 2
2021-12-20 11:22:42.349 INFO  com.aspect.LogAspect                              :92   [32m127973928424574976[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:22:42.350 INFO  com.aspect.LogAspect                              :93   [32m127973928424574976[0;39m ------------- 结束 耗时：173 ms -------------
2021-12-20 11:22:42.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:22:42.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:22:42.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:22:42.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:22:42.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:22:42.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:22:42.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:22:42.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:22:42.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:22:42.408 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:22:42.409 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:22:42.409 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:22:42.409 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:22:42.410 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:22:42.410 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:22:42.411 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:22:42.411 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:22:42.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:22:42.412 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:22:42.413 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127973928437157888[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:22:42.413 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127973928437157888[0;39m <==      Total: 19
2021-12-20 11:22:42.416 INFO  com.aspect.LogAspect                              :92   [32m127973928437157888[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:22:42.416 INFO  com.aspect.LogAspect                              :93   [32m127973928437157888[0;39m ------------- 结束 耗时：236 ms -------------
2021-12-20 11:22:45.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127973940374147072[0;39m 生成今日电子书快照开始
2021-12-20 11:22:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973940374147072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973940374147072[0;39m ==> Parameters: 
2021-12-20 11:22:45.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973940374147072[0;39m <==    Updates: 0
2021-12-20 11:22:45.273 INFO  com.job.EbookSnapshotJob                          :35   [32m127973940374147072[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:22:50.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127973961278558208[0;39m 生成今日电子书快照开始
2021-12-20 11:22:50.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973961278558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:50.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973961278558208[0;39m ==> Parameters: 
2021-12-20 11:22:50.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973961278558208[0;39m <==    Updates: 0
2021-12-20 11:22:50.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127973961278558208[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:22:55.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127973982304604160[0;39m 生成今日电子书快照开始
2021-12-20 11:22:55.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973982304604160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:22:55.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973982304604160[0;39m ==> Parameters: 
2021-12-20 11:22:55.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127973982304604160[0;39m <==    Updates: 0
2021-12-20 11:22:55.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127973982304604160[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:23:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127974003217403904[0;39m 生成今日电子书快照开始
2021-12-20 11:23:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974003217403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974003217403904[0;39m ==> Parameters: 
2021-12-20 11:23:00.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974003217403904[0;39m <==    Updates: 0
2021-12-20 11:23:00.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127974003217403904[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:23:00.425 INFO  com.aspect.LogAspect                              :54   [32m127974004962234368[0;39m ------------- 开始 -------------
2021-12-20 11:23:00.425 INFO  com.aspect.LogAspect                              :55   [32m127974004962234368[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:23:00.425 INFO  com.aspect.LogAspect                              :56   [32m127974004962234368[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:23:00.425 INFO  com.aspect.LogAspect                              :57   [32m127974004962234368[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:00.428 INFO  com.aspect.LogAspect                              :80   [32m127974004962234368[0;39m 请求参数: [{"categoryId2":301,"page":1,"size":1000}]
2021-12-20 11:23:00.467 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127974004962234368[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:23:00.468 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127974004962234368[0;39m ==> Parameters: 301(Long)
2021-12-20 11:23:00.548 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127974004962234368[0;39m <==    Columns: count(0)
2021-12-20 11:23:00.548 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127974004962234368[0;39m <==        Row: 1
2021-12-20 11:23:00.549 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127974004962234368[0;39m <==      Total: 1
2021-12-20 11:23:00.551 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127974004962234368[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:23:00.551 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127974004962234368[0;39m ==> Parameters: 301(Long), 1000(Integer)
2021-12-20 11:23:00.627 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127974004962234368[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:23:00.628 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127974004962234368[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 2, 2
2021-12-20 11:23:00.629 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127974004962234368[0;39m <==      Total: 1
2021-12-20 11:23:00.631 INFO  com.servicess.EbookService                        :48   [32m127974004962234368[0;39m 总行数：1
2021-12-20 11:23:00.632 INFO  com.servicess.EbookService                        :49   [32m127974004962234368[0;39m 总页数：1
2021-12-20 11:23:00.647 INFO  com.aspect.LogAspect                              :92   [32m127974004962234368[0;39m 返回结果: {"content":{"list":[{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":2,"voteCount":2}],"total":1},"success":true}
2021-12-20 11:23:00.647 INFO  com.aspect.LogAspect                              :93   [32m127974004962234368[0;39m ------------- 结束 耗时：222 ms -------------
2021-12-20 11:23:01.870 INFO  com.aspect.LogAspect                              :54   [32m127974011023003648[0;39m ------------- 开始 -------------
2021-12-20 11:23:01.870 INFO  com.aspect.LogAspect                              :55   [32m127974011023003648[0;39m 请求地址: http://localhost:8081/doc/all/3 GET
2021-12-20 11:23:01.870 INFO  com.aspect.LogAspect                              :56   [32m127974011023003648[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:23:01.870 INFO  com.aspect.LogAspect                              :57   [32m127974011023003648[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:01.870 INFO  com.aspect.LogAspect                              :80   [32m127974011023003648[0;39m 请求参数: [3]
2021-12-20 11:23:01.941 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127974011023003648[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:23:01.941 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127974011023003648[0;39m ==> Parameters: 3(Long)
2021-12-20 11:23:02.026 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127974011023003648[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:23:02.026 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127974011023003648[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 2, 2
2021-12-20 11:23:02.026 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127974011023003648[0;39m <==      Total: 1
2021-12-20 11:23:02.067 INFO  com.aspect.LogAspect                              :92   [32m127974011023003648[0;39m 返回结果: {"content":[{"ebookId":3,"id":125274442472493056,"name":"test","parent":0,"sort":1,"viewCount":2,"voteCount":2}],"success":true}
2021-12-20 11:23:02.068 INFO  com.aspect.LogAspect                              :93   [32m127974011023003648[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-20 11:23:02.096 INFO  com.aspect.LogAspect                              :54   [32m127974011970916352[0;39m ------------- 开始 -------------
2021-12-20 11:23:02.096 INFO  com.aspect.LogAspect                              :55   [32m127974011970916352[0;39m 请求地址: http://localhost:8081/doc/find-content/125274442472493056 GET
2021-12-20 11:23:02.096 INFO  com.aspect.LogAspect                              :56   [32m127974011970916352[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:23:02.096 INFO  com.aspect.LogAspect                              :57   [32m127974011970916352[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:02.097 INFO  com.aspect.LogAspect                              :80   [32m127974011970916352[0;39m 请求参数: [125274442472493056]
2021-12-20 11:23:02.097 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127974011970916352[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:23:02.098 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127974011970916352[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:23:02.179 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127974011970916352[0;39m <==    Columns: id, content
2021-12-20 11:23:02.179 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127974011970916352[0;39m <==        Row: 125274442472493056, <<BLOB>>
2021-12-20 11:23:02.180 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127974011970916352[0;39m <==      Total: 1
2021-12-20 11:23:02.185 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127974011970916352[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:23:02.186 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127974011970916352[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:23:02.361 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127974011970916352[0;39m <==    Updates: 1
2021-12-20 11:23:02.361 INFO  com.aspect.LogAspect                              :92   [32m127974011970916352[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:23:02.361 INFO  com.aspect.LogAspect                              :93   [32m127974011970916352[0;39m ------------- 结束 耗时：265 ms -------------
2021-12-20 11:23:03.322 INFO  com.aspect.LogAspect                              :54   [32m127974017113133056[0;39m ------------- 开始 -------------
2021-12-20 11:23:03.322 INFO  com.aspect.LogAspect                              :55   [32m127974017113133056[0;39m 请求地址: http://localhost:8081/doc/vote/125274442472493056 GET
2021-12-20 11:23:03.323 INFO  com.aspect.LogAspect                              :56   [32m127974017113133056[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:23:03.323 INFO  com.aspect.LogAspect                              :57   [32m127974017113133056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:03.323 INFO  com.aspect.LogAspect                              :80   [32m127974017113133056[0;39m 请求参数: [125274442472493056]
2021-12-20 11:23:03.908 INFO  com.Util.RedisUtil                                :31   [32m127974017113133056[0;39m key不存在，放入：DOC_VOTE_125274442472493056_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:23:04.039 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127974017113133056[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:23:04.040 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127974017113133056[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:23:04.200 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127974017113133056[0;39m <==    Updates: 1
2021-12-20 11:23:04.202 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127974017113133056[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:23:04.203 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127974017113133056[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:23:04.278 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127974017113133056[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:23:04.279 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127974017113133056[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 3, 3
2021-12-20 11:23:04.280 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127974017113133056[0;39m <==      Total: 1
2021-12-20 11:23:04.286 INFO  com.aspect.LogAspect                              :92   [32m127974017113133056[0;39m 返回结果: {"success":true}
2021-12-20 11:23:04.287 INFO  com.aspect.LogAspect                              :93   [32m127974017113133056[0;39m ------------- 结束 耗时：965 ms -------------
2021-12-20 11:23:04.301 INFO  com.websocket.WebSocketServer                     :71   [32m127974017113133056[0;39m 推送消息：dEUkdRF3Hh，内容：【test】被点赞！
2021-12-20 11:23:05.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127974024180535296[0;39m 生成今日电子书快照开始
2021-12-20 11:23:05.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974024180535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:05.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974024180535296[0;39m ==> Parameters: 
2021-12-20 11:23:05.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974024180535296[0;39m <==    Updates: 0
2021-12-20 11:23:05.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127974024180535296[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 11:23:05.252 INFO  com.job.DocJob                                    :32   [32m127974025208139776[0;39m 更新电子书下的文档数据开始
2021-12-20 11:23:05.253 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974025208139776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:23:05.253 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974025208139776[0;39m ==> Parameters: 
2021-12-20 11:23:05.399 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974025208139776[0;39m <==    Updates: 3
2021-12-20 11:23:05.400 INFO  com.job.DocJob                                    :35   [32m127974025208139776[0;39m 更新电子书下的文档数据结束，耗时：148毫秒
2021-12-20 11:23:05.554 INFO  com.aspect.LogAspect                              :54   [32m127974026474819584[0;39m ------------- 开始 -------------
2021-12-20 11:23:05.554 INFO  com.aspect.LogAspect                              :55   [32m127974026474819584[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:23:05.554 INFO  com.aspect.LogAspect                              :54   [32m127974026474819585[0;39m ------------- 开始 -------------
2021-12-20 11:23:05.554 INFO  com.aspect.LogAspect                              :56   [32m127974026474819584[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:23:05.554 INFO  com.aspect.LogAspect                              :55   [32m127974026474819585[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:23:05.555 INFO  com.aspect.LogAspect                              :56   [32m127974026474819585[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:23:05.554 INFO  com.aspect.LogAspect                              :57   [32m127974026474819584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:05.555 INFO  com.aspect.LogAspect                              :57   [32m127974026474819585[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:05.555 INFO  com.aspect.LogAspect                              :80   [32m127974026474819584[0;39m 请求参数: []
2021-12-20 11:23:05.555 INFO  com.aspect.LogAspect                              :80   [32m127974026474819585[0;39m 请求参数: []
2021-12-20 11:23:05.556 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127974026474819585[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:23:05.556 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127974026474819585[0;39m ==> Parameters: 
2021-12-20 11:23:05.557 INFO  com.aspect.LogAspect                              :54   [32m127974026487402496[0;39m ------------- 开始 -------------
2021-12-20 11:23:05.558 INFO  com.aspect.LogAspect                              :55   [32m127974026487402496[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:23:05.558 INFO  com.aspect.LogAspect                              :56   [32m127974026487402496[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:23:05.558 INFO  com.aspect.LogAspect                              :57   [32m127974026487402496[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:23:05.558 INFO  com.aspect.LogAspect                              :80   [32m127974026487402496[0;39m 请求参数: []
2021-12-20 11:23:05.663 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127974026487402496[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:23:05.664 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127974026474819585[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:23:05.665 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127974026487402496[0;39m ==> Parameters: 
2021-12-20 11:23:05.666 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127974026474819585[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:23:05.666 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127974026474819584[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:23:05.667 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127974026474819584[0;39m ==> Parameters: 
2021-12-20 11:23:05.668 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127974026474819585[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:23:05.670 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127974026474819585[0;39m <==      Total: 2
2021-12-20 11:23:05.672 INFO  com.aspect.LogAspect                              :92   [32m127974026474819585[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:23:05.672 INFO  com.aspect.LogAspect                              :93   [32m127974026474819585[0;39m ------------- 结束 耗时：118 ms -------------
2021-12-20 11:23:05.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:23:05.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:23:05.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:23:05.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:23:05.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:23:05.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:23:05.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:23:05.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:23:05.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:23:05.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:23:05.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:23:05.755 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:23:05.756 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:23:05.757 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:23:05.758 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:23:05.758 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:23:05.759 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:23:05.759 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:23:05.759 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:23:05.759 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127974026487402496[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:23:05.760 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127974026487402496[0;39m <==      Total: 19
2021-12-20 11:23:05.760 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127974026474819584[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:23:05.761 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127974026474819584[0;39m <==        Row: 2021-12-19, 502, 173, 0, 0
2021-12-20 11:23:05.762 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127974026474819584[0;39m <==        Row: 2021-12-20, 503, 174, 1, 1
2021-12-20 11:23:05.762 INFO  com.aspect.LogAspect                              :92   [32m127974026487402496[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:23:05.762 INFO  com.aspect.LogAspect                              :93   [32m127974026487402496[0;39m ------------- 结束 耗时：205 ms -------------
2021-12-20 11:23:05.763 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127974026474819584[0;39m <==      Total: 2
2021-12-20 11:23:05.764 INFO  com.aspect.LogAspect                              :92   [32m127974026474819584[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":502,"viewIncrease":0,"voteCount":173,"voteIncrease":0},{"date":1639929600000,"viewCount":503,"viewIncrease":1,"voteCount":174,"voteIncrease":1}],"success":true}
2021-12-20 11:23:05.767 INFO  com.aspect.LogAspect                              :93   [32m127974026474819584[0;39m ------------- 结束 耗时：213 ms -------------
2021-12-20 11:23:10.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127974045152055296[0;39m 生成今日电子书快照开始
2021-12-20 11:23:10.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974045152055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:10.113 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974045152055296[0;39m ==> Parameters: 
2021-12-20 11:23:10.309 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974045152055296[0;39m <==    Updates: 0
2021-12-20 11:23:10.309 INFO  com.job.EbookSnapshotJob                          :35   [32m127974045152055296[0;39m 生成今日电子书快照结束，耗时：301毫秒
2021-12-20 11:23:15.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127974066115186688[0;39m 生成今日电子书快照开始
2021-12-20 11:23:15.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974066115186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:15.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974066115186688[0;39m ==> Parameters: 
2021-12-20 11:23:15.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974066115186688[0;39m <==    Updates: 0
2021-12-20 11:23:15.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127974066115186688[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:23:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127974087107678208[0;39m 生成今日电子书快照开始
2021-12-20 11:23:20.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974087107678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:20.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974087107678208[0;39m ==> Parameters: 
2021-12-20 11:23:20.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974087107678208[0;39m <==    Updates: 0
2021-12-20 11:23:20.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127974087107678208[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:23:25.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127974108129529856[0;39m 生成今日电子书快照开始
2021-12-20 11:23:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974108129529856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:25.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974108129529856[0;39m ==> Parameters: 
2021-12-20 11:23:25.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974108129529856[0;39m <==    Updates: 0
2021-12-20 11:23:25.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127974108129529856[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:23:30.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127974129088466944[0;39m 生成今日电子书快照开始
2021-12-20 11:23:30.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974129088466944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:30.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974129088466944[0;39m ==> Parameters: 
2021-12-20 11:23:30.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974129088466944[0;39m <==    Updates: 0
2021-12-20 11:23:30.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127974129088466944[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:23:35.002 INFO  com.job.DocJob                                    :32   [32m127974149988683776[0;39m 更新电子书下的文档数据开始
2021-12-20 11:23:35.064 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974149988683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:23:35.064 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974149988683776[0;39m ==> Parameters: 
2021-12-20 11:23:35.233 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974149988683776[0;39m <==    Updates: 3
2021-12-20 11:23:35.233 INFO  com.job.DocJob                                    :35   [32m127974149988683776[0;39m 更新电子书下的文档数据结束，耗时：231毫秒
2021-12-20 11:23:35.233 INFO  com.job.EbookSnapshotJob                          :32   [32m127974150957568000[0;39m 生成今日电子书快照开始
2021-12-20 11:23:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974150957568000[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974150957568000[0;39m ==> Parameters: 
2021-12-20 11:23:35.386 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974150957568000[0;39m <==    Updates: 0
2021-12-20 11:23:35.386 INFO  com.job.EbookSnapshotJob                          :35   [32m127974150957568000[0;39m 生成今日电子书快照结束，耗时：153毫秒
2021-12-20 11:23:40.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127974171027312640[0;39m 生成今日电子书快照开始
2021-12-20 11:23:40.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974171027312640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974171027312640[0;39m ==> Parameters: 
2021-12-20 11:23:40.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974171027312640[0;39m <==    Updates: 0
2021-12-20 11:23:40.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127974171027312640[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:23:45.033 INFO  com.job.EbookSnapshotJob                          :32   [32m127974192061747200[0;39m 生成今日电子书快照开始
2021-12-20 11:23:45.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974192061747200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:45.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974192061747200[0;39m ==> Parameters: 
2021-12-20 11:23:45.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974192061747200[0;39m <==    Updates: 0
2021-12-20 11:23:45.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127974192061747200[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:23:50.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127974212991324160[0;39m 生成今日电子书快照开始
2021-12-20 11:23:50.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974212991324160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:50.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974212991324160[0;39m ==> Parameters: 
2021-12-20 11:23:50.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974212991324160[0;39m <==    Updates: 0
2021-12-20 11:23:50.276 INFO  com.job.EbookSnapshotJob                          :35   [32m127974212991324160[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:23:55.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127974233950261248[0;39m 生成今日电子书快照开始
2021-12-20 11:23:55.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974233950261248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:23:55.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974233950261248[0;39m ==> Parameters: 
2021-12-20 11:23:55.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974233950261248[0;39m <==    Updates: 0
2021-12-20 11:23:55.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127974233950261248[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:24:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127974254917586944[0;39m 生成今日电子书快照开始
2021-12-20 11:24:00.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974254917586944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:00.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974254917586944[0;39m ==> Parameters: 
2021-12-20 11:24:00.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974254917586944[0;39m <==    Updates: 0
2021-12-20 11:24:00.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127974254917586944[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:24:05.003 INFO  com.job.DocJob                                    :32   [32m127974275821998080[0;39m 更新电子书下的文档数据开始
2021-12-20 11:24:05.065 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974275821998080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:24:05.065 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974275821998080[0;39m ==> Parameters: 
2021-12-20 11:24:05.234 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974275821998080[0;39m <==    Updates: 3
2021-12-20 11:24:05.234 INFO  com.job.DocJob                                    :35   [32m127974275821998080[0;39m 更新电子书下的文档数据结束，耗时：231毫秒
2021-12-20 11:24:05.234 INFO  com.job.EbookSnapshotJob                          :32   [32m127974276790882304[0;39m 生成今日电子书快照开始
2021-12-20 11:24:05.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974276790882304[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:05.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974276790882304[0;39m ==> Parameters: 
2021-12-20 11:24:05.466 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974276790882304[0;39m <==    Updates: 0
2021-12-20 11:24:05.466 INFO  com.job.EbookSnapshotJob                          :35   [32m127974276790882304[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:24:10.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127974296852238336[0;39m 生成今日电子书快照开始
2021-12-20 11:24:10.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974296852238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:10.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974296852238336[0;39m ==> Parameters: 
2021-12-20 11:24:10.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974296852238336[0;39m <==    Updates: 0
2021-12-20 11:24:10.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127974296852238336[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:24:15.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127974317790203904[0;39m 生成今日电子书快照开始
2021-12-20 11:24:15.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974317790203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:15.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974317790203904[0;39m ==> Parameters: 
2021-12-20 11:24:15.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974317790203904[0;39m <==    Updates: 0
2021-12-20 11:24:15.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127974317790203904[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:24:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127974338786889728[0;39m 生成今日电子书快照开始
2021-12-20 11:24:20.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974338786889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:20.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974338786889728[0;39m ==> Parameters: 
2021-12-20 11:24:20.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974338786889728[0;39m <==    Updates: 0
2021-12-20 11:24:20.292 INFO  com.job.EbookSnapshotJob                          :35   [32m127974338786889728[0;39m 生成今日电子书快照结束，耗时：277毫秒
2021-12-20 11:24:25.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127974359791964160[0;39m 生成今日电子书快照开始
2021-12-20 11:24:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974359791964160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974359791964160[0;39m ==> Parameters: 
2021-12-20 11:24:25.345 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974359791964160[0;39m <==    Updates: 0
2021-12-20 11:24:25.345 INFO  com.job.EbookSnapshotJob                          :35   [32m127974359791964160[0;39m 生成今日电子书快照结束，耗时：322毫秒
2021-12-20 11:24:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127974380692180992[0;39m 生成今日电子书快照开始
2021-12-20 11:24:30.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974380692180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:30.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974380692180992[0;39m ==> Parameters: 
2021-12-20 11:24:30.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974380692180992[0;39m <==    Updates: 0
2021-12-20 11:24:30.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127974380692180992[0;39m 生成今日电子书快照结束，耗时：249毫秒
2021-12-20 11:24:35.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127974401705644032[0;39m 生成今日电子书快照开始
2021-12-20 11:24:35.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974401705644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:35.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974401705644032[0;39m ==> Parameters: 
2021-12-20 11:24:35.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974401705644032[0;39m <==    Updates: 0
2021-12-20 11:24:35.232 INFO  com.job.EbookSnapshotJob                          :35   [32m127974401705644032[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:24:35.232 INFO  com.job.DocJob                                    :32   [32m127974402611613696[0;39m 更新电子书下的文档数据开始
2021-12-20 11:24:35.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974402611613696[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:24:35.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974402611613696[0;39m ==> Parameters: 
2021-12-20 11:24:35.390 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974402611613696[0;39m <==    Updates: 3
2021-12-20 11:24:35.390 INFO  com.job.DocJob                                    :35   [32m127974402611613696[0;39m 更新电子书下的文档数据结束，耗时：158毫秒
2021-12-20 11:24:40.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127974422731689984[0;39m 生成今日电子书快照开始
2021-12-20 11:24:40.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974422731689984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:40.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974422731689984[0;39m ==> Parameters: 
2021-12-20 11:24:40.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974422731689984[0;39m <==    Updates: 0
2021-12-20 11:24:40.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127974422731689984[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:24:45.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127974443686432768[0;39m 生成今日电子书快照开始
2021-12-20 11:24:45.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974443686432768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:45.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974443686432768[0;39m ==> Parameters: 
2021-12-20 11:24:45.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974443686432768[0;39m <==    Updates: 0
2021-12-20 11:24:45.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127974443686432768[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:24:50.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127974464641175552[0;39m 生成今日电子书快照开始
2021-12-20 11:24:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974464641175552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974464641175552[0;39m ==> Parameters: 
2021-12-20 11:24:50.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974464641175552[0;39m <==    Updates: 0
2021-12-20 11:24:50.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127974464641175552[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:24:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127974485583335424[0;39m 生成今日电子书快照开始
2021-12-20 11:24:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974485583335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:24:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974485583335424[0;39m ==> Parameters: 
2021-12-20 11:24:55.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974485583335424[0;39m <==    Updates: 0
2021-12-20 11:24:55.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127974485583335424[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:25:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127974506546466816[0;39m 生成今日电子书快照开始
2021-12-20 11:25:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974506546466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974506546466816[0;39m ==> Parameters: 
2021-12-20 11:25:00.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974506546466816[0;39m <==    Updates: 0
2021-12-20 11:25:00.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127974506546466816[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:25:05.015 INFO  com.job.DocJob                                    :32   [32m127974527530569728[0;39m 更新电子书下的文档数据开始
2021-12-20 11:25:05.094 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974527530569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:25:05.094 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974527530569728[0;39m ==> Parameters: 
2021-12-20 11:25:05.248 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974527530569728[0;39m <==    Updates: 3
2021-12-20 11:25:05.248 INFO  com.job.DocJob                                    :35   [32m127974527530569728[0;39m 更新电子书下的文档数据结束，耗时：233毫秒
2021-12-20 11:25:05.248 INFO  com.job.EbookSnapshotJob                          :32   [32m127974528507842560[0;39m 生成今日电子书快照开始
2021-12-20 11:25:05.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974528507842560[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:05.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974528507842560[0;39m ==> Parameters: 
2021-12-20 11:25:05.427 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974528507842560[0;39m <==    Updates: 0
2021-12-20 11:25:05.427 INFO  com.job.EbookSnapshotJob                          :35   [32m127974528507842560[0;39m 生成今日电子书快照结束，耗时：163毫秒
2021-12-20 11:25:10.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127974548472729600[0;39m 生成今日电子书快照开始
2021-12-20 11:25:10.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974548472729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:10.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974548472729600[0;39m ==> Parameters: 
2021-12-20 11:25:10.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974548472729600[0;39m <==    Updates: 0
2021-12-20 11:25:10.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127974548472729600[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:25:15.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127974569502969856[0;39m 生成今日电子书快照开始
2021-12-20 11:25:15.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974569502969856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:15.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974569502969856[0;39m ==> Parameters: 
2021-12-20 11:25:15.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974569502969856[0;39m <==    Updates: 0
2021-12-20 11:25:15.276 INFO  com.job.EbookSnapshotJob                          :35   [32m127974569502969856[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:25:20.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127974590461906944[0;39m 生成今日电子书快照开始
2021-12-20 11:25:20.134 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974590461906944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:20.134 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974590461906944[0;39m ==> Parameters: 
2021-12-20 11:25:20.287 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974590461906944[0;39m <==    Updates: 0
2021-12-20 11:25:20.287 INFO  com.job.EbookSnapshotJob                          :35   [32m127974590461906944[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-20 11:25:25.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127974611420844032[0;39m 生成今日电子书快照开始
2021-12-20 11:25:25.119 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974611420844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:25.119 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974611420844032[0;39m ==> Parameters: 
2021-12-20 11:25:25.280 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974611420844032[0;39m <==    Updates: 0
2021-12-20 11:25:25.280 INFO  com.job.EbookSnapshotJob                          :35   [32m127974611420844032[0;39m 生成今日电子书快照结束，耗时：264毫秒
2021-12-20 11:25:30.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127974632350420992[0;39m 生成今日电子书快照开始
2021-12-20 11:25:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974632350420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:30.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974632350420992[0;39m ==> Parameters: 
2021-12-20 11:25:30.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974632350420992[0;39m <==    Updates: 0
2021-12-20 11:25:30.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127974632350420992[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:25:35.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127974653389049856[0;39m 生成今日电子书快照开始
2021-12-20 11:25:35.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974653389049856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:35.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974653389049856[0;39m ==> Parameters: 
2021-12-20 11:25:35.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974653389049856[0;39m <==    Updates: 0
2021-12-20 11:25:35.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127974653389049856[0;39m 生成今日电子书快照结束，耗时：204毫秒
2021-12-20 11:25:35.226 INFO  com.job.DocJob                                    :32   [32m127974654244687872[0;39m 更新电子书下的文档数据开始
2021-12-20 11:25:35.226 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974654244687872[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:25:35.226 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974654244687872[0;39m ==> Parameters: 
2021-12-20 11:25:35.391 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974654244687872[0;39m <==    Updates: 3
2021-12-20 11:25:35.391 INFO  com.job.DocJob                                    :35   [32m127974654244687872[0;39m 更新电子书下的文档数据结束，耗时：165毫秒
2021-12-20 11:25:40.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127974674356375552[0;39m 生成今日电子书快照开始
2021-12-20 11:25:40.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974674356375552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:40.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974674356375552[0;39m ==> Parameters: 
2021-12-20 11:25:40.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974674356375552[0;39m <==    Updates: 0
2021-12-20 11:25:40.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127974674356375552[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:25:45.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127974695239815168[0;39m 生成今日电子书快照开始
2021-12-20 11:25:45.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974695239815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:45.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974695239815168[0;39m ==> Parameters: 
2021-12-20 11:25:45.337 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974695239815168[0;39m <==    Updates: 0
2021-12-20 11:25:45.337 INFO  com.job.EbookSnapshotJob                          :35   [32m127974695239815168[0;39m 生成今日电子书快照结束，耗时：337毫秒
2021-12-20 11:25:50.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127974716324581376[0;39m 生成今日电子书快照开始
2021-12-20 11:25:50.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974716324581376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:50.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974716324581376[0;39m ==> Parameters: 
2021-12-20 11:25:50.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974716324581376[0;39m <==    Updates: 0
2021-12-20 11:25:50.281 INFO  com.job.EbookSnapshotJob                          :35   [32m127974716324581376[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:25:55.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127974737224798208[0;39m 生成今日电子书快照开始
2021-12-20 11:25:55.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974737224798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:25:55.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974737224798208[0;39m ==> Parameters: 
2021-12-20 11:25:55.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974737224798208[0;39m <==    Updates: 0
2021-12-20 11:25:55.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127974737224798208[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:26:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127974758192123904[0;39m 生成今日电子书快照开始
2021-12-20 11:26:00.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974758192123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:00.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974758192123904[0;39m ==> Parameters: 
2021-12-20 11:26:00.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974758192123904[0;39m <==    Updates: 0
2021-12-20 11:26:00.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127974758192123904[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:26:05.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127974779142672384[0;39m 生成今日电子书快照开始
2021-12-20 11:26:05.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974779142672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:05.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974779142672384[0;39m ==> Parameters: 
2021-12-20 11:26:05.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974779142672384[0;39m <==    Updates: 0
2021-12-20 11:26:05.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127974779142672384[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:26:05.242 INFO  com.job.DocJob                                    :32   [32m127974780140916736[0;39m 更新电子书下的文档数据开始
2021-12-20 11:26:05.242 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974780140916736[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:26:05.242 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974780140916736[0;39m ==> Parameters: 
2021-12-20 11:26:05.411 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974780140916736[0;39m <==    Updates: 3
2021-12-20 11:26:05.411 INFO  com.job.DocJob                                    :35   [32m127974780140916736[0;39m 更新电子书下的文档数据结束，耗时：169毫秒
2021-12-20 11:26:10.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127974800114192384[0;39m 生成今日电子书快照开始
2021-12-20 11:26:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974800114192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974800114192384[0;39m ==> Parameters: 
2021-12-20 11:26:10.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974800114192384[0;39m <==    Updates: 0
2021-12-20 11:26:10.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127974800114192384[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:26:15.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127974821094100992[0;39m 生成今日电子书快照开始
2021-12-20 11:26:15.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974821094100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:15.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974821094100992[0;39m ==> Parameters: 
2021-12-20 11:26:15.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974821094100992[0;39m <==    Updates: 0
2021-12-20 11:26:15.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127974821094100992[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:26:20.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127974842157895680[0;39m 生成今日电子书快照开始
2021-12-20 11:26:20.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974842157895680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:20.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974842157895680[0;39m ==> Parameters: 
2021-12-20 11:26:20.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974842157895680[0;39m <==    Updates: 0
2021-12-20 11:26:20.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127974842157895680[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:26:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127974863053918208[0;39m 生成今日电子书快照开始
2021-12-20 11:26:25.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974863053918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:25.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974863053918208[0;39m ==> Parameters: 
2021-12-20 11:26:25.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974863053918208[0;39m <==    Updates: 0
2021-12-20 11:26:25.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127974863053918208[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:26:30.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127974884021243904[0;39m 生成今日电子书快照开始
2021-12-20 11:26:30.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974884021243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:30.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974884021243904[0;39m ==> Parameters: 
2021-12-20 11:26:30.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974884021243904[0;39m <==    Updates: 0
2021-12-20 11:26:30.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127974884021243904[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:26:35.007 INFO  com.job.DocJob                                    :32   [32m127974904984375296[0;39m 更新电子书下的文档数据开始
2021-12-20 11:26:35.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974904984375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:26:35.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974904984375296[0;39m ==> Parameters: 
2021-12-20 11:26:35.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127974904984375296[0;39m <==    Updates: 3
2021-12-20 11:26:35.243 INFO  com.job.DocJob                                    :35   [32m127974904984375296[0;39m 更新电子书下的文档数据结束，耗时：236毫秒
2021-12-20 11:26:35.243 INFO  com.job.EbookSnapshotJob                          :32   [32m127974905974231040[0;39m 生成今日电子书快照开始
2021-12-20 11:26:35.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974905974231040[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:35.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974905974231040[0;39m ==> Parameters: 
2021-12-20 11:26:35.440 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974905974231040[0;39m <==    Updates: 0
2021-12-20 11:26:35.440 INFO  com.job.EbookSnapshotJob                          :35   [32m127974905974231040[0;39m 生成今日电子书快照结束，耗时：197毫秒
2021-12-20 11:26:40.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127974926023004160[0;39m 生成今日电子书快照开始
2021-12-20 11:26:40.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974926023004160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:40.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974926023004160[0;39m ==> Parameters: 
2021-12-20 11:26:40.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974926023004160[0;39m <==    Updates: 0
2021-12-20 11:26:40.271 INFO  com.job.EbookSnapshotJob                          :35   [32m127974926023004160[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:26:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127974946956775424[0;39m 生成今日电子书快照开始
2021-12-20 11:26:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974946956775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974946956775424[0;39m ==> Parameters: 
2021-12-20 11:26:45.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974946956775424[0;39m <==    Updates: 0
2021-12-20 11:26:45.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127974946956775424[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:26:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127974967907323904[0;39m 生成今日电子书快照开始
2021-12-20 11:26:50.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974967907323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:50.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974967907323904[0;39m ==> Parameters: 
2021-12-20 11:26:50.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974967907323904[0;39m <==    Updates: 0
2021-12-20 11:26:50.232 INFO  com.job.EbookSnapshotJob                          :35   [32m127974967907323904[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:26:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127974988878843904[0;39m 生成今日电子书快照开始
2021-12-20 11:26:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974988878843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:26:55.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974988878843904[0;39m ==> Parameters: 
2021-12-20 11:26:57.331 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127974988878843904[0;39m <==    Updates: 0
2021-12-20 11:26:57.331 INFO  com.job.EbookSnapshotJob                          :35   [32m127974988878843904[0;39m 生成今日电子书快照结束，耗时：2322毫秒
2021-12-20 11:27:00.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127975009909084160[0;39m 生成今日电子书快照开始
2021-12-20 11:27:00.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975009909084160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:00.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975009909084160[0;39m ==> Parameters: 
2021-12-20 11:27:00.362 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975009909084160[0;39m <==    Updates: 0
2021-12-20 11:27:00.362 INFO  com.job.EbookSnapshotJob                          :35   [32m127975009909084160[0;39m 生成今日电子书快照结束，耗时：339毫秒
2021-12-20 11:27:05.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127975030813495296[0;39m 生成今日电子书快照开始
2021-12-20 11:27:05.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975030813495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:05.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975030813495296[0;39m ==> Parameters: 
2021-12-20 11:27:05.207 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975030813495296[0;39m <==    Updates: 0
2021-12-20 11:27:05.207 INFO  com.job.EbookSnapshotJob                          :35   [32m127975030813495296[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:27:05.207 INFO  com.job.DocJob                                    :32   [32m127975031652356096[0;39m 更新电子书下的文档数据开始
2021-12-20 11:27:05.207 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975031652356096[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:27:05.207 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975031652356096[0;39m ==> Parameters: 
2021-12-20 11:27:05.370 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975031652356096[0;39m <==    Updates: 3
2021-12-20 11:27:05.370 INFO  com.job.DocJob                                    :35   [32m127975031652356096[0;39m 更新电子书下的文档数据结束，耗时：163毫秒
2021-12-20 11:27:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127975051772432384[0;39m 生成今日电子书快照开始
2021-12-20 11:27:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975051772432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975051772432384[0;39m ==> Parameters: 
2021-12-20 11:27:10.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975051772432384[0;39m <==    Updates: 0
2021-12-20 11:27:10.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127975051772432384[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:27:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127975072769118208[0;39m 生成今日电子书快照开始
2021-12-20 11:27:15.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975072769118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:15.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975072769118208[0;39m ==> Parameters: 
2021-12-20 11:27:15.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975072769118208[0;39m <==    Updates: 0
2021-12-20 11:27:15.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127975072769118208[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 11:27:20.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127975093774192640[0;39m 生成今日电子书快照开始
2021-12-20 11:27:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975093774192640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975093774192640[0;39m ==> Parameters: 
2021-12-20 11:27:20.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975093774192640[0;39m <==    Updates: 0
2021-12-20 11:27:20.254 INFO  com.job.EbookSnapshotJob                          :35   [32m127975093774192640[0;39m 生成今日电子书快照结束，耗时：236毫秒
2021-12-20 11:27:25.000 INFO  com.job.EbookSnapshotJob                          :32   [32m127975114670215168[0;39m 生成今日电子书快照开始
2021-12-20 11:27:25.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975114670215168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:25.201 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975114670215168[0;39m ==> Parameters: 
2021-12-20 11:27:25.487 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975114670215168[0;39m <==    Updates: 0
2021-12-20 11:27:25.487 INFO  com.job.EbookSnapshotJob                          :35   [32m127975114670215168[0;39m 生成今日电子书快照结束，耗时：487毫秒
2021-12-20 11:27:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127975135700455424[0;39m 生成今日电子书快照开始
2021-12-20 11:27:30.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975135700455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:27:30.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975135700455424[0;39m ==> Parameters: 
2021-12-20 11:27:30.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975135700455424[0;39m <==    Updates: 0
2021-12-20 11:27:30.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127975135700455424[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:27:52.573 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 2364 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:27:52.573 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:27:52.573 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 11:27:52.640 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 11:27:52.640 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 11:27:53.885 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:27:53.885 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:27:54.370 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 457 ms. Found 0 Redis repository interfaces.
2021-12-20 11:27:54.956 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:27:54.956 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:27:54.956 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:27:54.956 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:27:55.018 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:27:55.018 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2378 ms
2021-12-20 11:27:56.575 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:27:56.606 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:27:56.622 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:27:56.638 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 4.843 seconds (JVM running for 6.046)
2021-12-20 11:28:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127975261533769728[0;39m 生成今日电子书快照开始
2021-12-20 11:28:00.035 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127975261533769728[0;39m HikariPool-1 - Starting...
2021-12-20 11:28:01.017 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127975261533769728[0;39m HikariPool-1 - Start completed.
2021-12-20 11:28:01.048 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975261533769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:01.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975261533769728[0;39m ==> Parameters: 
2021-12-20 11:28:01.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975261533769728[0;39m <==    Updates: 6
2021-12-20 11:28:01.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127975261533769728[0;39m 生成今日电子书快照结束，耗时：1233毫秒
2021-12-20 11:28:05.011 INFO  com.job.DocJob                                    :32   [32m127975282488512512[0;39m 更新电子书下的文档数据开始
2021-12-20 11:28:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975282488512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:28:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975282488512512[0;39m ==> Parameters: 
2021-12-20 11:28:05.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975282488512512[0;39m <==    Updates: 3
2021-12-20 11:28:05.243 INFO  com.job.DocJob                                    :35   [32m127975282488512512[0;39m 更新电子书下的文档数据结束，耗时：232毫秒
2021-12-20 11:28:05.243 INFO  com.job.EbookSnapshotJob                          :32   [32m127975283461591040[0;39m 生成今日电子书快照开始
2021-12-20 11:28:05.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975283461591040[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:05.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975283461591040[0;39m ==> Parameters: 
2021-12-20 11:28:05.412 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975283461591040[0;39m <==    Updates: 0
2021-12-20 11:28:05.412 INFO  com.job.EbookSnapshotJob                          :35   [32m127975283461591040[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 11:28:10.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127975303522947072[0;39m 生成今日电子书快照开始
2021-12-20 11:28:10.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975303522947072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:10.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975303522947072[0;39m ==> Parameters: 
2021-12-20 11:28:10.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975303522947072[0;39m <==    Updates: 0
2021-12-20 11:28:10.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127975303522947072[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:28:15.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127975324418969600[0;39m 生成今日电子书快照开始
2021-12-20 11:28:15.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975324418969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:15.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975324418969600[0;39m ==> Parameters: 
2021-12-20 11:28:15.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975324418969600[0;39m <==    Updates: 0
2021-12-20 11:28:15.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127975324418969600[0;39m 生成今日电子书快照结束，耗时：274毫秒
2021-12-20 11:28:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127975345386295296[0;39m 生成今日电子书快照开始
2021-12-20 11:28:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975345386295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975345386295296[0;39m ==> Parameters: 
2021-12-20 11:28:20.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975345386295296[0;39m <==    Updates: 0
2021-12-20 11:28:20.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127975345386295296[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 11:28:25.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127975366399758336[0;39m 生成今日电子书快照开始
2021-12-20 11:28:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975366399758336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975366399758336[0;39m ==> Parameters: 
2021-12-20 11:28:25.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975366399758336[0;39m <==    Updates: 0
2021-12-20 11:28:25.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127975366399758336[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:28:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127975387350306816[0;39m 生成今日电子书快照开始
2021-12-20 11:28:30.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975387350306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:30.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975387350306816[0;39m ==> Parameters: 
2021-12-20 11:28:30.298 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975387350306816[0;39m <==    Updates: 0
2021-12-20 11:28:30.298 INFO  com.job.EbookSnapshotJob                          :35   [32m127975387350306816[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 11:28:35.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127975408346992640[0;39m 生成今日电子书快照开始
2021-12-20 11:28:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975408346992640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975408346992640[0;39m ==> Parameters: 
2021-12-20 11:28:35.482 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975408346992640[0;39m <==    Updates: 0
2021-12-20 11:28:35.482 INFO  com.job.EbookSnapshotJob                          :35   [32m127975408346992640[0;39m 生成今日电子书快照结束，耗时：464毫秒
2021-12-20 11:28:35.482 INFO  com.job.DocJob                                    :32   [32m127975410293149696[0;39m 更新电子书下的文档数据开始
2021-12-20 11:28:35.482 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975410293149696[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:28:35.482 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975410293149696[0;39m ==> Parameters: 
2021-12-20 11:28:35.651 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975410293149696[0;39m <==    Updates: 3
2021-12-20 11:28:35.651 INFO  com.job.DocJob                                    :35   [32m127975410293149696[0;39m 更新电子书下的文档数据结束，耗时：169毫秒
2021-12-20 11:28:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127975429297541120[0;39m 生成今日电子书快照开始
2021-12-20 11:28:40.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975429297541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:40.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975429297541120[0;39m ==> Parameters: 
2021-12-20 11:28:40.298 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975429297541120[0;39m <==    Updates: 0
2021-12-20 11:28:40.298 INFO  com.job.EbookSnapshotJob                          :35   [32m127975429297541120[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 11:28:45.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127975450269061120[0;39m 生成今日电子书快照开始
2021-12-20 11:28:45.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975450269061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:45.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975450269061120[0;39m ==> Parameters: 
2021-12-20 11:28:45.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975450269061120[0;39m <==    Updates: 0
2021-12-20 11:28:45.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127975450269061120[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:28:50.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127975471227998208[0;39m 生成今日电子书快照开始
2021-12-20 11:28:50.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975471227998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:50.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975471227998208[0;39m ==> Parameters: 
2021-12-20 11:28:50.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975471227998208[0;39m <==    Updates: 0
2021-12-20 11:28:50.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127975471227998208[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:28:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127975492195323904[0;39m 生成今日电子书快照开始
2021-12-20 11:28:55.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975492195323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:28:55.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975492195323904[0;39m ==> Parameters: 
2021-12-20 11:28:55.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975492195323904[0;39m <==    Updates: 0
2021-12-20 11:28:55.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127975492195323904[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:29:00.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127975513225564160[0;39m 生成今日电子书快照开始
2021-12-20 11:29:00.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975513225564160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:00.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975513225564160[0;39m ==> Parameters: 
2021-12-20 11:29:00.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975513225564160[0;39m <==    Updates: 0
2021-12-20 11:29:00.277 INFO  com.job.EbookSnapshotJob                          :35   [32m127975513225564160[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:29:05.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127975534129975296[0;39m 生成今日电子书快照开始
2021-12-20 11:29:05.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975534129975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:05.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975534129975296[0;39m ==> Parameters: 
2021-12-20 11:29:05.323 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975534129975296[0;39m <==    Updates: 0
2021-12-20 11:29:05.323 INFO  com.job.EbookSnapshotJob                          :35   [32m127975534129975296[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-20 11:29:05.323 INFO  com.job.DocJob                                    :32   [32m127975535455375360[0;39m 更新电子书下的文档数据开始
2021-12-20 11:29:05.323 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975535455375360[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:29:05.323 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975535455375360[0;39m ==> Parameters: 
2021-12-20 11:29:05.554 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975535455375360[0;39m <==    Updates: 3
2021-12-20 11:29:05.554 INFO  com.job.DocJob                                    :35   [32m127975535455375360[0;39m 更新电子书下的文档数据结束，耗时：231毫秒
2021-12-20 11:29:10.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127975555156021248[0;39m 生成今日电子书快照开始
2021-12-20 11:29:10.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975555156021248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:10.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975555156021248[0;39m ==> Parameters: 
2021-12-20 11:29:10.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975555156021248[0;39m <==    Updates: 0
2021-12-20 11:29:10.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127975555156021248[0;39m 生成今日电子书快照结束，耗时：262毫秒
2021-12-20 11:29:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127975576098181120[0;39m 生成今日电子书快照开始
2021-12-20 11:29:15.134 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975576098181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:15.134 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975576098181120[0;39m ==> Parameters: 
2021-12-20 11:29:15.419 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975576098181120[0;39m <==    Updates: 0
2021-12-20 11:29:15.419 INFO  com.job.EbookSnapshotJob                          :35   [32m127975576098181120[0;39m 生成今日电子书快照结束，耗时：406毫秒
2021-12-20 11:29:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127975597065506816[0;39m 生成今日电子书快照开始
2021-12-20 11:29:20.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975597065506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:20.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975597065506816[0;39m ==> Parameters: 
2021-12-20 11:29:20.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975597065506816[0;39m <==    Updates: 0
2021-12-20 11:29:20.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127975597065506816[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:29:25.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127975618108329984[0;39m 生成今日电子书快照开始
2021-12-20 11:29:25.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975618108329984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:25.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975618108329984[0;39m ==> Parameters: 
2021-12-20 11:29:25.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975618108329984[0;39m <==    Updates: 0
2021-12-20 11:29:25.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127975618108329984[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:29:27.602 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 11:29:27.602 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 11:29:27.604 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 11:29:27.645 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：YSoZaAsd9R，session id：0，当前连接数：1
2021-12-20 11:29:27.729 INFO  com.aspect.LogAspect                              :54   [32m127975629428756482[0;39m ------------- 开始 -------------
2021-12-20 11:29:27.729 INFO  com.aspect.LogAspect                              :54   [32m127975629428756480[0;39m ------------- 开始 -------------
2021-12-20 11:29:27.729 INFO  com.aspect.LogAspect                              :54   [32m127975629428756481[0;39m ------------- 开始 -------------
2021-12-20 11:29:27.730 INFO  com.aspect.LogAspect                              :55   [32m127975629428756482[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:29:27.730 INFO  com.aspect.LogAspect                              :55   [32m127975629428756480[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:29:27.730 INFO  com.aspect.LogAspect                              :55   [32m127975629428756481[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:29:27.730 INFO  com.aspect.LogAspect                              :56   [32m127975629428756481[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:29:27.730 INFO  com.aspect.LogAspect                              :56   [32m127975629428756482[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:29:27.730 INFO  com.aspect.LogAspect                              :56   [32m127975629428756480[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:29:27.731 INFO  com.aspect.LogAspect                              :57   [32m127975629428756480[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:29:27.731 INFO  com.aspect.LogAspect                              :57   [32m127975629428756482[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:29:27.731 INFO  com.aspect.LogAspect                              :57   [32m127975629428756481[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:29:27.774 INFO  com.aspect.LogAspect                              :80   [32m127975629428756481[0;39m 请求参数: []
2021-12-20 11:29:27.774 INFO  com.aspect.LogAspect                              :80   [32m127975629428756480[0;39m 请求参数: []
2021-12-20 11:29:27.784 INFO  com.aspect.LogAspect                              :80   [32m127975629428756482[0;39m 请求参数: []
2021-12-20 11:29:27.878 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127975629428756480[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:29:27.879 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127975629428756480[0;39m ==> Parameters: 
2021-12-20 11:29:27.891 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127975629428756481[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:29:27.892 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127975629428756481[0;39m ==> Parameters: 
2021-12-20 11:29:27.892 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127975629428756482[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:29:27.894 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127975629428756482[0;39m ==> Parameters: 
2021-12-20 11:29:28.058 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:29:28.059 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:29:28.061 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:29:28.061 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:29:28.063 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:29:28.064 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:29:28.064 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:29:28.065 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:29:28.065 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:29:28.066 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:29:28.067 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:29:28.067 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:29:28.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:29:28.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:29:28.069 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:29:28.070 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:29:28.071 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127975629428756480[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:29:28.071 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127975629428756482[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:29:28.074 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127975629428756480[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:29:28.074 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127975629428756482[0;39m <==        Row: 2021-12-19, 695, 229, 0, 0
2021-12-20 11:29:28.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:29:28.077 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127975629428756480[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:29:28.078 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127975629428756482[0;39m <==        Row: 2021-12-20, 504, 175, -191, -54
2021-12-20 11:29:28.078 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127975629428756482[0;39m <==      Total: 2
2021-12-20 11:29:28.078 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127975629428756480[0;39m <==      Total: 2
2021-12-20 11:29:28.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:29:28.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:29:28.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975629428756481[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:29:28.080 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127975629428756481[0;39m <==      Total: 19
2021-12-20 11:29:28.104 INFO  com.aspect.LogAspect                              :92   [32m127975629428756482[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":695,"viewIncrease":0,"voteCount":229,"voteIncrease":0},{"date":1639929600000,"viewCount":504,"viewIncrease":-191,"voteCount":175,"voteIncrease":-54}],"success":true}
2021-12-20 11:29:28.104 INFO  com.aspect.LogAspect                              :92   [32m127975629428756480[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:29:28.104 INFO  com.aspect.LogAspect                              :93   [32m127975629428756482[0;39m ------------- 结束 耗时：376 ms -------------
2021-12-20 11:29:28.104 INFO  com.aspect.LogAspect                              :93   [32m127975629428756480[0;39m ------------- 结束 耗时：376 ms -------------
2021-12-20 11:29:28.104 INFO  com.aspect.LogAspect                              :92   [32m127975629428756481[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:29:28.105 INFO  com.aspect.LogAspect                              :93   [32m127975629428756481[0;39m ------------- 结束 耗时：377 ms -------------
2021-12-20 11:29:30.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127975639012741120[0;39m 生成今日电子书快照开始
2021-12-20 11:29:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975639012741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:30.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975639012741120[0;39m ==> Parameters: 
2021-12-20 11:29:30.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975639012741120[0;39m <==    Updates: 0
2021-12-20 11:29:30.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127975639012741120[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 11:29:35.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127975659946512384[0;39m 生成今日电子书快照开始
2021-12-20 11:29:35.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975659946512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:35.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975659946512384[0;39m ==> Parameters: 
2021-12-20 11:29:35.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975659946512384[0;39m <==    Updates: 0
2021-12-20 11:29:35.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127975659946512384[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:29:35.258 INFO  com.job.DocJob                                    :32   [32m127975661011865600[0;39m 更新电子书下的文档数据开始
2021-12-20 11:29:35.259 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975661011865600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:29:35.260 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975661011865600[0;39m ==> Parameters: 
2021-12-20 11:29:35.434 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975661011865600[0;39m <==    Updates: 3
2021-12-20 11:29:35.435 INFO  com.job.DocJob                                    :35   [32m127975661011865600[0;39m 更新电子书下的文档数据结束，耗时：177毫秒
2021-12-20 11:29:40.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127975680918032384[0;39m 生成今日电子书快照开始
2021-12-20 11:29:40.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975680918032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:40.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975680918032384[0;39m ==> Parameters: 
2021-12-20 11:29:40.291 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975680918032384[0;39m <==    Updates: 0
2021-12-20 11:29:40.292 INFO  com.job.EbookSnapshotJob                          :35   [32m127975680918032384[0;39m 生成今日电子书快照结束，耗时：288毫秒
2021-12-20 11:29:43.237 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：YSoZaAsd9R，session id：0！当前连接数：0
2021-12-20 11:29:43.795 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：MjCpskHE2O，session id：1，当前连接数：1
2021-12-20 11:29:43.869 INFO  com.aspect.LogAspect                              :54   [32m127975697129017344[0;39m ------------- 开始 -------------
2021-12-20 11:29:43.869 INFO  com.aspect.LogAspect                              :55   [32m127975697129017344[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:29:43.870 INFO  com.aspect.LogAspect                              :56   [32m127975697129017344[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:29:43.870 INFO  com.aspect.LogAspect                              :57   [32m127975697129017344[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:29:43.870 INFO  com.aspect.LogAspect                              :80   [32m127975697129017344[0;39m 请求参数: []
2021-12-20 11:29:43.871 INFO  com.aspect.LogAspect                              :54   [32m127975697137405952[0;39m ------------- 开始 -------------
2021-12-20 11:29:43.872 INFO  com.aspect.LogAspect                              :55   [32m127975697137405952[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:29:43.872 INFO  com.aspect.LogAspect                              :56   [32m127975697137405952[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:29:43.873 INFO  com.aspect.LogAspect                              :57   [32m127975697137405952[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:29:43.873 INFO  com.aspect.LogAspect                              :80   [32m127975697137405952[0;39m 请求参数: []
2021-12-20 11:29:43.878 INFO  com.aspect.LogAspect                              :54   [32m127975697166766080[0;39m ------------- 开始 -------------
2021-12-20 11:29:43.879 INFO  com.aspect.LogAspect                              :55   [32m127975697166766080[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:29:43.879 INFO  com.aspect.LogAspect                              :56   [32m127975697166766080[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:29:43.879 INFO  com.aspect.LogAspect                              :57   [32m127975697166766080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:29:43.879 INFO  com.aspect.LogAspect                              :80   [32m127975697166766080[0;39m 请求参数: []
2021-12-20 11:29:43.963 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127975697129017344[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:29:43.963 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127975697129017344[0;39m ==> Parameters: 
2021-12-20 11:29:43.964 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127975697166766080[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:29:43.964 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127975697137405952[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:29:43.964 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127975697166766080[0;39m ==> Parameters: 
2021-12-20 11:29:43.964 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127975697137405952[0;39m ==> Parameters: 
2021-12-20 11:29:44.044 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:29:44.045 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:29:44.047 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:29:44.048 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:29:44.049 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:29:44.050 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:29:44.051 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:29:44.052 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:29:44.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:29:44.054 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127975697129017344[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:29:44.055 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127975697137405952[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:29:44.055 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:29:44.055 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127975697129017344[0;39m <==        Row: 2021-12-18, 502, 173
2021-12-20 11:29:44.057 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:29:44.058 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127975697129017344[0;39m <==        Row: 2021-12-19, 0, 0
2021-12-20 11:29:44.057 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127975697137405952[0;39m <==        Row: 2021-12-19, 695, 229, 0, 0
2021-12-20 11:29:44.058 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:29:44.062 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127975697129017344[0;39m <==      Total: 2
2021-12-20 11:29:44.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:29:44.063 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127975697137405952[0;39m <==        Row: 2021-12-20, 504, 175, -191, -54
2021-12-20 11:29:44.063 INFO  com.aspect.LogAspect                              :92   [32m127975697129017344[0;39m 返回结果: {"content":[{"date":1639756800000,"viewCount":0,"viewIncrease":502,"voteCount":0,"voteIncrease":173},{"date":1639843200000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-12-20 11:29:44.063 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:29:44.064 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127975697137405952[0;39m <==      Total: 2
2021-12-20 11:29:44.064 INFO  com.aspect.LogAspect                              :93   [32m127975697129017344[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-20 11:29:44.064 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:29:44.064 INFO  com.aspect.LogAspect                              :92   [32m127975697137405952[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":695,"viewIncrease":0,"voteCount":229,"voteIncrease":0},{"date":1639929600000,"viewCount":504,"viewIncrease":-191,"voteCount":175,"voteIncrease":-54}],"success":true}
2021-12-20 11:29:44.065 INFO  com.aspect.LogAspect                              :93   [32m127975697137405952[0;39m ------------- 结束 耗时：194 ms -------------
2021-12-20 11:29:44.065 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:29:44.066 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:29:44.066 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:29:44.067 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:29:44.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127975697166766080[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:29:44.069 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127975697166766080[0;39m <==      Total: 19
2021-12-20 11:29:44.073 INFO  com.aspect.LogAspect                              :92   [32m127975697166766080[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:29:44.073 INFO  com.aspect.LogAspect                              :93   [32m127975697166766080[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-20 11:29:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127975701931495424[0;39m 生成今日电子书快照开始
2021-12-20 11:29:45.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975701931495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:45.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975701931495424[0;39m ==> Parameters: 
2021-12-20 11:29:45.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975701931495424[0;39m <==    Updates: 0
2021-12-20 11:29:45.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127975701931495424[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:29:50.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127975722886238208[0;39m 生成今日电子书快照开始
2021-12-20 11:29:50.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975722886238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:50.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975722886238208[0;39m ==> Parameters: 
2021-12-20 11:29:50.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975722886238208[0;39m <==    Updates: 0
2021-12-20 11:29:50.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127975722886238208[0;39m 生成今日电子书快照结束，耗时：225毫秒
2021-12-20 11:29:55.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127975743912284160[0;39m 生成今日电子书快照开始
2021-12-20 11:29:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975743912284160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:29:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975743912284160[0;39m ==> Parameters: 
2021-12-20 11:29:55.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975743912284160[0;39m <==    Updates: 0
2021-12-20 11:29:55.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127975743912284160[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 11:30:00.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127975764871221248[0;39m 生成今日电子书快照开始
2021-12-20 11:30:00.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975764871221248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:30:00.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975764871221248[0;39m ==> Parameters: 
2021-12-20 11:30:00.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975764871221248[0;39m <==    Updates: 0
2021-12-20 11:30:00.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127975764871221248[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:30:05.002 INFO  com.job.DocJob                                    :32   [32m127975785767243776[0;39m 更新电子书下的文档数据开始
2021-12-20 11:30:05.086 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975785767243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:30:05.086 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975785767243776[0;39m ==> Parameters: 
2021-12-20 11:30:05.234 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127975785767243776[0;39m <==    Updates: 3
2021-12-20 11:30:05.234 INFO  com.job.DocJob                                    :35   [32m127975785767243776[0;39m 更新电子书下的文档数据结束，耗时：232毫秒
2021-12-20 11:30:05.234 INFO  com.job.EbookSnapshotJob                          :32   [32m127975786740322304[0;39m 生成今日电子书快照开始
2021-12-20 11:30:05.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975786740322304[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:30:05.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975786740322304[0;39m ==> Parameters: 
2021-12-20 11:30:05.418 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975786740322304[0;39m <==    Updates: 0
2021-12-20 11:30:05.418 INFO  com.job.EbookSnapshotJob                          :35   [32m127975786740322304[0;39m 生成今日电子书快照结束，耗时：184毫秒
2021-12-20 11:30:36.082 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 11076 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:30:36.082 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:30:36.090 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 11:30:36.152 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 11:30:36.152 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 11:30:37.421 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:30:37.421 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:30:38.006 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 582 ms. Found 0 Redis repository interfaces.
2021-12-20 11:30:38.824 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:30:38.824 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:30:38.840 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:30:38.840 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:30:38.909 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:30:38.909 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2757 ms
2021-12-20 11:30:40.566 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:30:40.613 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:30:40.628 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:30:40.651 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.308 seconds (JVM running for 6.401)
2021-12-20 11:30:45.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127975953560375296[0;39m 生成今日电子书快照开始
2021-12-20 11:30:45.022 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127975953560375296[0;39m HikariPool-1 - Starting...
2021-12-20 11:30:45.959 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127975953560375296[0;39m HikariPool-1 - Start completed.
2021-12-20 11:30:45.974 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975953560375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:30:45.992 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975953560375296[0;39m ==> Parameters: 
2021-12-20 11:30:46.186 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975953560375296[0;39m <==    Updates: 6
2021-12-20 11:30:46.186 INFO  com.job.EbookSnapshotJob                          :35   [32m127975953560375296[0;39m 生成今日电子书快照结束，耗时：1179毫秒
2021-12-20 11:30:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127975974548672512[0;39m 生成今日电子书快照开始
2021-12-20 11:30:50.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975974548672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:30:50.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975974548672512[0;39m ==> Parameters: 
2021-12-20 11:30:50.297 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975974548672512[0;39m <==    Updates: 0
2021-12-20 11:30:50.297 INFO  com.job.EbookSnapshotJob                          :35   [32m127975974548672512[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 11:30:55.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127975995495026688[0;39m 生成今日电子书快照开始
2021-12-20 11:30:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975995495026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:30:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975995495026688[0;39m ==> Parameters: 
2021-12-20 11:30:55.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127975995495026688[0;39m <==    Updates: 0
2021-12-20 11:30:55.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127975995495026688[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:31:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127976016504295424[0;39m 生成今日电子书快照开始
2021-12-20 11:31:00.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976016504295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:00.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976016504295424[0;39m ==> Parameters: 
2021-12-20 11:31:00.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976016504295424[0;39m <==    Updates: 0
2021-12-20 11:31:00.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127976016504295424[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-20 11:31:01.065 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 11:31:01.065 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 11:31:01.066 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 11:31:01.109 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：WkXzxJTMDX，session id：0，当前连接数：1
2021-12-20 11:31:01.278 INFO  com.aspect.LogAspect                              :54   [32m127976021801701377[0;39m ------------- 开始 -------------
2021-12-20 11:31:01.278 INFO  com.aspect.LogAspect                              :54   [32m127976021801701376[0;39m ------------- 开始 -------------
2021-12-20 11:31:01.278 INFO  com.aspect.LogAspect                              :54   [32m127976021801701378[0;39m ------------- 开始 -------------
2021-12-20 11:31:01.279 INFO  com.aspect.LogAspect                              :55   [32m127976021801701376[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:31:01.279 INFO  com.aspect.LogAspect                              :55   [32m127976021801701378[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:31:01.279 INFO  com.aspect.LogAspect                              :55   [32m127976021801701377[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:31:01.280 INFO  com.aspect.LogAspect                              :56   [32m127976021801701377[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:31:01.280 INFO  com.aspect.LogAspect                              :56   [32m127976021801701378[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:31:01.280 INFO  com.aspect.LogAspect                              :56   [32m127976021801701376[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:31:01.280 INFO  com.aspect.LogAspect                              :57   [32m127976021801701376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:01.280 INFO  com.aspect.LogAspect                              :57   [32m127976021801701377[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:01.280 INFO  com.aspect.LogAspect                              :57   [32m127976021801701378[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:01.324 INFO  com.aspect.LogAspect                              :80   [32m127976021801701377[0;39m 请求参数: []
2021-12-20 11:31:01.324 INFO  com.aspect.LogAspect                              :80   [32m127976021801701376[0;39m 请求参数: []
2021-12-20 11:31:01.324 INFO  com.aspect.LogAspect                              :80   [32m127976021801701378[0;39m 请求参数: []
2021-12-20 11:31:01.419 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976021801701378[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:31:01.419 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976021801701376[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:31:01.421 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976021801701376[0;39m ==> Parameters: 
2021-12-20 11:31:01.421 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976021801701378[0;39m ==> Parameters: 
2021-12-20 11:31:01.443 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976021801701377[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:31:01.445 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976021801701377[0;39m ==> Parameters: 
2021-12-20 11:31:01.541 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976021801701378[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:31:01.541 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976021801701376[0;39m <==      Total: 0
2021-12-20 11:31:01.541 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:31:01.543 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:31:01.544 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976021801701378[0;39m <==        Row: 2021-12-20, 504, 175, 504, 175
2021-12-20 11:31:01.546 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:31:01.547 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:31:01.548 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976021801701378[0;39m <==      Total: 1
2021-12-20 11:31:01.549 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:31:01.550 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:31:01.551 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:31:01.552 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:31:01.553 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:31:01.555 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:31:01.557 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:31:01.559 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:31:01.560 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:31:01.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:31:01.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:31:01.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:31:01.565 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:31:01.567 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:31:01.568 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:31:01.569 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976021801701377[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:31:01.569 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976021801701377[0;39m <==      Total: 19
2021-12-20 11:31:01.578 INFO  com.aspect.LogAspect                              :92   [32m127976021801701376[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:31:01.579 INFO  com.aspect.LogAspect                              :93   [32m127976021801701376[0;39m ------------- 结束 耗时：303 ms -------------
2021-12-20 11:31:01.583 INFO  com.aspect.LogAspect                              :92   [32m127976021801701378[0;39m 返回结果: {"content":[{"date":1639929600000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175}],"success":true}
2021-12-20 11:31:01.583 INFO  com.aspect.LogAspect                              :93   [32m127976021801701378[0;39m ------------- 结束 耗时：307 ms -------------
2021-12-20 11:31:01.585 INFO  com.aspect.LogAspect                              :92   [32m127976021801701377[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:31:01.585 INFO  com.aspect.LogAspect                              :93   [32m127976021801701377[0;39m ------------- 结束 耗时：309 ms -------------
2021-12-20 11:31:05.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127976037471621120[0;39m 生成今日电子书快照开始
2021-12-20 11:31:05.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976037471621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:05.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976037471621120[0;39m ==> Parameters: 
2021-12-20 11:31:05.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976037471621120[0;39m <==    Updates: 0
2021-12-20 11:31:05.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127976037471621120[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 11:31:05.240 INFO  com.job.DocJob                                    :32   [32m127976038423728128[0;39m 更新电子书下的文档数据开始
2021-12-20 11:31:05.248 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976038423728128[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:31:05.249 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976038423728128[0;39m ==> Parameters: 
2021-12-20 11:31:05.387 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976038423728128[0;39m <==    Updates: 3
2021-12-20 11:31:05.387 INFO  com.job.DocJob                                    :35   [32m127976038423728128[0;39m 更新电子书下的文档数据结束，耗时：146毫秒
2021-12-20 11:31:07.441 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：WkXzxJTMDX，session id：0！当前连接数：0
2021-12-20 11:31:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127976058451529728[0;39m 生成今日电子书快照开始
2021-12-20 11:31:10.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976058451529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:10.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976058451529728[0;39m ==> Parameters: 
2021-12-20 11:31:10.301 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976058451529728[0;39m <==    Updates: 0
2021-12-20 11:31:10.301 INFO  com.job.EbookSnapshotJob                          :35   [32m127976058451529728[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 11:31:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127976079414661120[0;39m 生成今日电子书快照开始
2021-12-20 11:31:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976079414661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976079414661120[0;39m ==> Parameters: 
2021-12-20 11:31:15.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976079414661120[0;39m <==    Updates: 0
2021-12-20 11:31:15.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127976079414661120[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:31:16.967 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：ZuXPGZgj3A，session id：1，当前连接数：1
2021-12-20 11:31:17.099 INFO  com.aspect.LogAspect                              :54   [32m127976088163979264[0;39m ------------- 开始 -------------
2021-12-20 11:31:17.099 INFO  com.aspect.LogAspect                              :55   [32m127976088163979264[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:31:17.100 INFO  com.aspect.LogAspect                              :56   [32m127976088163979264[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:31:17.100 INFO  com.aspect.LogAspect                              :57   [32m127976088163979264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:17.101 INFO  com.aspect.LogAspect                              :80   [32m127976088163979264[0;39m 请求参数: []
2021-12-20 11:31:17.102 INFO  com.aspect.LogAspect                              :54   [32m127976088176562176[0;39m ------------- 开始 -------------
2021-12-20 11:31:17.102 INFO  com.aspect.LogAspect                              :55   [32m127976088176562176[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:31:17.103 INFO  com.aspect.LogAspect                              :56   [32m127976088176562176[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:31:17.103 INFO  com.aspect.LogAspect                              :57   [32m127976088176562176[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:17.104 INFO  com.aspect.LogAspect                              :80   [32m127976088176562176[0;39m 请求参数: []
2021-12-20 11:31:17.104 INFO  com.aspect.LogAspect                              :54   [32m127976088184950784[0;39m ------------- 开始 -------------
2021-12-20 11:31:17.104 INFO  com.aspect.LogAspect                              :55   [32m127976088184950784[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:31:17.104 INFO  com.aspect.LogAspect                              :56   [32m127976088184950784[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:31:17.104 INFO  com.aspect.LogAspect                              :57   [32m127976088184950784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:17.105 INFO  com.aspect.LogAspect                              :80   [32m127976088184950784[0;39m 请求参数: []
2021-12-20 11:31:17.176 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976088176562176[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:31:17.177 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976088176562176[0;39m ==> Parameters: 
2021-12-20 11:31:17.178 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976088163979264[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:31:17.179 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976088163979264[0;39m ==> Parameters: 
2021-12-20 11:31:17.185 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976088184950784[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:31:17.185 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976088184950784[0;39m ==> Parameters: 
2021-12-20 11:31:17.249 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976088163979264[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:31:17.249 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976088176562176[0;39m <==      Total: 0
2021-12-20 11:31:17.250 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976088163979264[0;39m <==        Row: 2021-12-20, 504, 175, 504, 175
2021-12-20 11:31:17.250 INFO  com.aspect.LogAspect                              :92   [32m127976088176562176[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:31:17.250 INFO  com.aspect.LogAspect                              :93   [32m127976088176562176[0;39m ------------- 结束 耗时：148 ms -------------
2021-12-20 11:31:17.250 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976088163979264[0;39m <==      Total: 1
2021-12-20 11:31:17.251 INFO  com.aspect.LogAspect                              :92   [32m127976088163979264[0;39m 返回结果: {"content":[{"date":1639929600000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175}],"success":true}
2021-12-20 11:31:17.251 INFO  com.aspect.LogAspect                              :93   [32m127976088163979264[0;39m ------------- 结束 耗时：152 ms -------------
2021-12-20 11:31:17.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:31:17.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:31:17.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:31:17.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:31:17.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:31:17.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:31:17.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:31:17.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:31:17.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:31:17.265 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:31:17.266 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:31:17.266 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:31:17.267 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:31:17.267 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:31:17.268 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:31:17.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:31:17.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:31:17.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:31:17.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:31:17.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976088184950784[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:31:17.271 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976088184950784[0;39m <==      Total: 19
2021-12-20 11:31:17.273 INFO  com.aspect.LogAspect                              :92   [32m127976088184950784[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:31:17.273 INFO  com.aspect.LogAspect                              :93   [32m127976088184950784[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:31:20.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127976100453289984[0;39m 生成今日电子书快照开始
2021-12-20 11:31:20.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976100453289984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:20.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976100453289984[0;39m ==> Parameters: 
2021-12-20 11:31:20.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976100453289984[0;39m <==    Updates: 0
2021-12-20 11:31:20.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127976100453289984[0;39m 生成今日电子书快照结束，耗时：213毫秒
2021-12-20 11:31:22.648 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：ZuXPGZgj3A，session id：1！当前连接数：0
2021-12-20 11:31:25.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127976121370284032[0;39m 生成今日电子书快照开始
2021-12-20 11:31:25.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976121370284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:25.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976121370284032[0;39m ==> Parameters: 
2021-12-20 11:31:25.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976121370284032[0;39m <==    Updates: 0
2021-12-20 11:31:25.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127976121370284032[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:31:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127976142316638208[0;39m 生成今日电子书快照开始
2021-12-20 11:31:30.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976142316638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:30.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976142316638208[0;39m ==> Parameters: 
2021-12-20 11:31:30.210 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976142316638208[0;39m <==    Updates: 0
2021-12-20 11:31:30.210 INFO  com.job.EbookSnapshotJob                          :35   [32m127976142316638208[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:31:35.006 INFO  com.job.DocJob                                    :32   [32m127976163271380992[0;39m 更新电子书下的文档数据开始
2021-12-20 11:31:35.090 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976163271380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:31:35.090 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976163271380992[0;39m ==> Parameters: 
2021-12-20 11:31:35.228 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976163271380992[0;39m <==    Updates: 3
2021-12-20 11:31:35.228 INFO  com.job.DocJob                                    :35   [32m127976163271380992[0;39m 更新电子书下的文档数据结束，耗时：222毫秒
2021-12-20 11:31:35.228 INFO  com.job.EbookSnapshotJob                          :32   [32m127976164202516480[0;39m 生成今日电子书快照开始
2021-12-20 11:31:35.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976164202516480[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:35.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976164202516480[0;39m ==> Parameters: 
2021-12-20 11:31:35.391 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976164202516480[0;39m <==    Updates: 0
2021-12-20 11:31:35.391 INFO  com.job.EbookSnapshotJob                          :35   [32m127976164202516480[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-20 11:31:40.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127976184242900992[0;39m 生成今日电子书快照开始
2021-12-20 11:31:40.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976184242900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:40.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976184242900992[0;39m ==> Parameters: 
2021-12-20 11:31:40.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976184242900992[0;39m <==    Updates: 6
2021-12-20 11:31:40.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127976184242900992[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:31:43.617 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：Emg8lJBpMb，session id：2，当前连接数：1
2021-12-20 11:31:43.735 INFO  com.aspect.LogAspect                              :54   [32m127976199883460608[0;39m ------------- 开始 -------------
2021-12-20 11:31:43.736 INFO  com.aspect.LogAspect                              :55   [32m127976199883460608[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:31:43.736 INFO  com.aspect.LogAspect                              :56   [32m127976199883460608[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:31:43.736 INFO  com.aspect.LogAspect                              :57   [32m127976199883460608[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:43.737 INFO  com.aspect.LogAspect                              :80   [32m127976199883460608[0;39m 请求参数: []
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :54   [32m127976199904432128[0;39m ------------- 开始 -------------
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :54   [32m127976199904432129[0;39m ------------- 开始 -------------
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :55   [32m127976199904432128[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :55   [32m127976199904432129[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :56   [32m127976199904432128[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :56   [32m127976199904432129[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:31:43.740 INFO  com.aspect.LogAspect                              :57   [32m127976199904432128[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:43.741 INFO  com.aspect.LogAspect                              :57   [32m127976199904432129[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:43.741 INFO  com.aspect.LogAspect                              :80   [32m127976199904432129[0;39m 请求参数: []
2021-12-20 11:31:43.741 INFO  com.aspect.LogAspect                              :80   [32m127976199904432128[0;39m 请求参数: []
2021-12-20 11:31:43.809 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976199883460608[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:31:43.810 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976199883460608[0;39m ==> Parameters: 
2021-12-20 11:31:43.822 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976199904432128[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:31:43.822 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976199904432128[0;39m ==> Parameters: 
2021-12-20 11:31:43.823 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976199904432129[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:31:43.823 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976199904432129[0;39m ==> Parameters: 
2021-12-20 11:31:43.886 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976199883460608[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:31:43.886 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976199883460608[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:31:43.886 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976199883460608[0;39m <==        Row: 2021-12-20, 504, 175, 0, 0
2021-12-20 11:31:43.886 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976199883460608[0;39m <==      Total: 2
2021-12-20 11:31:43.886 INFO  com.aspect.LogAspect                              :92   [32m127976199883460608[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":504,"viewIncrease":0,"voteCount":175,"voteIncrease":0}],"success":true}
2021-12-20 11:31:43.886 INFO  com.aspect.LogAspect                              :93   [32m127976199883460608[0;39m ------------- 结束 耗时：151 ms -------------
2021-12-20 11:31:43.902 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:31:43.902 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976199904432128[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:31:43.903 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:31:43.905 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976199904432128[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:31:43.905 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:31:43.906 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:31:43.907 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976199904432128[0;39m <==      Total: 1
2021-12-20 11:31:43.908 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:31:43.908 INFO  com.aspect.LogAspect                              :92   [32m127976199904432128[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:31:43.909 INFO  com.aspect.LogAspect                              :93   [32m127976199904432128[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:31:43.910 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:31:43.912 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:31:43.914 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:31:43.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:31:43.917 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:31:43.919 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:31:43.922 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:31:43.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:31:43.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:31:43.926 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:31:43.926 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:31:43.927 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:31:43.928 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:31:43.928 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:31:43.929 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976199904432129[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:31:43.929 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976199904432129[0;39m <==      Total: 19
2021-12-20 11:31:43.933 INFO  com.aspect.LogAspect                              :92   [32m127976199904432129[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:31:43.933 INFO  com.aspect.LogAspect                              :93   [32m127976199904432129[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-20 11:31:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127976205256364032[0;39m 生成今日电子书快照开始
2021-12-20 11:31:45.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976205256364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:45.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976205256364032[0;39m ==> Parameters: 
2021-12-20 11:31:45.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976205256364032[0;39m <==    Updates: 0
2021-12-20 11:31:45.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127976205256364032[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-20 11:31:49.221 INFO  com.aspect.LogAspect                              :54   [32m127976222893412352[0;39m ------------- 开始 -------------
2021-12-20 11:31:49.221 INFO  com.aspect.LogAspect                              :55   [32m127976222893412352[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:31:49.221 INFO  com.aspect.LogAspect                              :56   [32m127976222893412352[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:31:49.221 INFO  com.aspect.LogAspect                              :57   [32m127976222893412352[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:49.223 INFO  com.aspect.LogAspect                              :80   [32m127976222893412352[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-20 11:31:49.329 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976222893412352[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:31:49.329 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976222893412352[0;39m ==> Parameters: 101(Long)
2021-12-20 11:31:49.389 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976222893412352[0;39m <==    Columns: count(0)
2021-12-20 11:31:49.390 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976222893412352[0;39m <==        Row: 1
2021-12-20 11:31:49.392 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976222893412352[0;39m <==      Total: 1
2021-12-20 11:31:49.398 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976222893412352[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:31:49.400 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976222893412352[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-20 11:31:49.478 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976222893412352[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:31:49.478 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976222893412352[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 77, 29
2021-12-20 11:31:49.478 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976222893412352[0;39m <==      Total: 1
2021-12-20 11:31:49.478 INFO  com.servicess.EbookService                        :48   [32m127976222893412352[0;39m 总行数：1
2021-12-20 11:31:49.478 INFO  com.servicess.EbookService                        :49   [32m127976222893412352[0;39m 总页数：1
2021-12-20 11:31:49.493 INFO  com.aspect.LogAspect                              :92   [32m127976222893412352[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":77,"voteCount":29}],"total":1},"success":true}
2021-12-20 11:31:49.493 INFO  com.aspect.LogAspect                              :93   [32m127976222893412352[0;39m ------------- 结束 耗时：273 ms -------------
2021-12-20 11:31:50.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127976226181746688[0;39m 生成今日电子书快照开始
2021-12-20 11:31:50.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976226181746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:50.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976226181746688[0;39m ==> Parameters: 
2021-12-20 11:31:50.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976226181746688[0;39m <==    Updates: 0
2021-12-20 11:31:50.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127976226181746688[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-20 11:31:50.459 INFO  com.aspect.LogAspect                              :54   [32m127976228085960704[0;39m ------------- 开始 -------------
2021-12-20 11:31:50.460 INFO  com.aspect.LogAspect                              :55   [32m127976228085960704[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-20 11:31:50.460 INFO  com.aspect.LogAspect                              :56   [32m127976228085960704[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:31:50.461 INFO  com.aspect.LogAspect                              :57   [32m127976228085960704[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:50.461 INFO  com.aspect.LogAspect                              :80   [32m127976228085960704[0;39m 请求参数: [2]
2021-12-20 11:31:50.469 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976228085960704[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:31:50.469 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976228085960704[0;39m ==> Parameters: 2(Long)
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 9, 2, 0, 文档1, 1, 33, 6
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 10, 4
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 7, 5
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 7, 4
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 4, 4
2021-12-20 11:31:50.550 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976228085960704[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 2, 2
2021-12-20 11:31:50.550 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976228085960704[0;39m <==      Total: 8
2021-12-20 11:31:50.566 INFO  com.aspect.LogAspect                              :92   [32m127976228085960704[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":33,"voteCount":6},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":10,"voteCount":4},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":7,"voteCount":5},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":7,"voteCount":4},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":4,"voteCount":4},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":2,"voteCount":2}],"success":true}
2021-12-20 11:31:50.566 INFO  com.aspect.LogAspect                              :93   [32m127976228085960704[0;39m ------------- 结束 耗时：107 ms -------------
2021-12-20 11:31:50.606 INFO  com.aspect.LogAspect                              :54   [32m127976228702523392[0;39m ------------- 开始 -------------
2021-12-20 11:31:50.606 INFO  com.aspect.LogAspect                              :55   [32m127976228702523392[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-20 11:31:50.606 INFO  com.aspect.LogAspect                              :56   [32m127976228702523392[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:31:50.606 INFO  com.aspect.LogAspect                              :57   [32m127976228702523392[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:50.606 INFO  com.aspect.LogAspect                              :80   [32m127976228702523392[0;39m 请求参数: [9]
2021-12-20 11:31:50.676 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976228702523392[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:31:50.677 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976228702523392[0;39m ==> Parameters: 9(Long)
2021-12-20 11:31:50.753 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976228702523392[0;39m <==      Total: 0
2021-12-20 11:31:50.757 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976228702523392[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:31:50.758 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976228702523392[0;39m ==> Parameters: 9(Long)
2021-12-20 11:31:50.897 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976228702523392[0;39m <==    Updates: 1
2021-12-20 11:31:50.899 INFO  com.aspect.LogAspect                              :92   [32m127976228702523392[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:31:50.900 INFO  com.aspect.LogAspect                              :93   [32m127976228702523392[0;39m ------------- 结束 耗时：294 ms -------------
2021-12-20 11:31:51.891 INFO  com.aspect.LogAspect                              :54   [32m127976234092204032[0;39m ------------- 开始 -------------
2021-12-20 11:31:51.892 INFO  com.aspect.LogAspect                              :55   [32m127976234092204032[0;39m 请求地址: http://localhost:8081/doc/find-content/123355131981991936 GET
2021-12-20 11:31:51.892 INFO  com.aspect.LogAspect                              :56   [32m127976234092204032[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:31:51.892 INFO  com.aspect.LogAspect                              :57   [32m127976234092204032[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:51.893 INFO  com.aspect.LogAspect                              :80   [32m127976234092204032[0;39m 请求参数: [123355131981991936]
2021-12-20 11:31:51.968 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976234092204032[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:31:51.969 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976234092204032[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-20 11:31:52.040 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976234092204032[0;39m <==    Columns: id, content
2021-12-20 11:31:52.041 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976234092204032[0;39m <==        Row: 123355131981991936, <<BLOB>>
2021-12-20 11:31:52.042 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976234092204032[0;39m <==      Total: 1
2021-12-20 11:31:52.044 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976234092204032[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:31:52.045 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976234092204032[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-20 11:31:52.200 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976234092204032[0;39m <==    Updates: 1
2021-12-20 11:31:52.201 INFO  com.aspect.LogAspect                              :92   [32m127976234092204032[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:31:52.201 INFO  com.aspect.LogAspect                              :93   [32m127976234092204032[0;39m ------------- 结束 耗时：310 ms -------------
2021-12-20 11:31:53.334 INFO  com.aspect.LogAspect                              :54   [32m127976240144584704[0;39m ------------- 开始 -------------
2021-12-20 11:31:53.334 INFO  com.aspect.LogAspect                              :55   [32m127976240144584704[0;39m 请求地址: http://localhost:8081/doc/vote/123355131981991936 GET
2021-12-20 11:31:53.334 INFO  com.aspect.LogAspect                              :56   [32m127976240144584704[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:31:53.335 INFO  com.aspect.LogAspect                              :57   [32m127976240144584704[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:53.335 INFO  com.aspect.LogAspect                              :80   [32m127976240144584704[0;39m 请求参数: [123355131981991936]
2021-12-20 11:31:54.133 INFO  com.Util.RedisUtil                                :31   [32m127976240144584704[0;39m key不存在，放入：DOC_VOTE_123355131981991936_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:31:54.274 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976240144584704[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:31:54.275 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976240144584704[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-20 11:31:54.408 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976240144584704[0;39m <==    Updates: 1
2021-12-20 11:31:54.411 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976240144584704[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:31:54.414 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976240144584704[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-20 11:31:54.514 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976240144584704[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:31:54.515 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976240144584704[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 11, 5
2021-12-20 11:31:54.517 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976240144584704[0;39m <==      Total: 1
2021-12-20 11:31:54.523 INFO  com.aspect.LogAspect                              :92   [32m127976240144584704[0;39m 返回结果: {"success":true}
2021-12-20 11:31:54.524 INFO  com.aspect.LogAspect                              :93   [32m127976240144584704[0;39m ------------- 结束 耗时：1190 ms -------------
2021-12-20 11:31:54.533 INFO  com.websocket.WebSocketServer                     :71   [32m127976240144584704[0;39m 推送消息：Emg8lJBpMb，内容：【文档1.1】被点赞！
2021-12-20 11:31:55.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127976247153266688[0;39m 生成今日电子书快照开始
2021-12-20 11:31:55.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976247153266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:31:55.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976247153266688[0;39m ==> Parameters: 
2021-12-20 11:31:55.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976247153266688[0;39m <==    Updates: 0
2021-12-20 11:31:55.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127976247153266688[0;39m 生成今日电子书快照结束，耗时：246毫秒
2021-12-20 11:31:55.444 INFO  com.aspect.LogAspect                              :54   [32m127976248994566144[0;39m ------------- 开始 -------------
2021-12-20 11:31:55.444 INFO  com.aspect.LogAspect                              :55   [32m127976248994566144[0;39m 请求地址: http://localhost:8081/doc/find-content/123355187095146496 GET
2021-12-20 11:31:55.445 INFO  com.aspect.LogAspect                              :56   [32m127976248994566144[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:31:55.445 INFO  com.aspect.LogAspect                              :57   [32m127976248994566144[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:55.445 INFO  com.aspect.LogAspect                              :80   [32m127976248994566144[0;39m 请求参数: [123355187095146496]
2021-12-20 11:31:55.446 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976248994566144[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:31:55.446 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976248994566144[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:31:55.552 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976248994566144[0;39m <==    Columns: id, content
2021-12-20 11:31:55.553 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976248994566144[0;39m <==        Row: 123355187095146496, <<BLOB>>
2021-12-20 11:31:55.554 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976248994566144[0;39m <==      Total: 1
2021-12-20 11:31:55.557 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976248994566144[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:31:55.558 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976248994566144[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:31:55.707 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976248994566144[0;39m <==    Updates: 1
2021-12-20 11:31:55.707 INFO  com.aspect.LogAspect                              :92   [32m127976248994566144[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:31:55.707 INFO  com.aspect.LogAspect                              :93   [32m127976248994566144[0;39m ------------- 结束 耗时：263 ms -------------
2021-12-20 11:31:56.677 INFO  com.aspect.LogAspect                              :54   [32m127976254166142976[0;39m ------------- 开始 -------------
2021-12-20 11:31:56.677 INFO  com.aspect.LogAspect                              :55   [32m127976254166142976[0;39m 请求地址: http://localhost:8081/doc/vote/123355187095146496 GET
2021-12-20 11:31:56.677 INFO  com.aspect.LogAspect                              :56   [32m127976254166142976[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:31:56.677 INFO  com.aspect.LogAspect                              :57   [32m127976254166142976[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:56.677 INFO  com.aspect.LogAspect                              :80   [32m127976254166142976[0;39m 请求参数: [123355187095146496]
2021-12-20 11:31:56.718 INFO  com.Util.RedisUtil                                :31   [32m127976254166142976[0;39m key不存在，放入：DOC_VOTE_123355187095146496_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:31:56.832 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976254166142976[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:31:56.834 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976254166142976[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:31:56.970 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976254166142976[0;39m <==    Updates: 1
2021-12-20 11:31:56.971 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976254166142976[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:31:56.972 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976254166142976[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:31:57.043 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976254166142976[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:31:57.044 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976254166142976[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 8, 5
2021-12-20 11:31:57.046 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976254166142976[0;39m <==      Total: 1
2021-12-20 11:31:57.049 INFO  com.aspect.LogAspect                              :92   [32m127976254166142976[0;39m 返回结果: {"success":true}
2021-12-20 11:31:57.050 INFO  com.aspect.LogAspect                              :93   [32m127976254166142976[0;39m ------------- 结束 耗时：373 ms -------------
2021-12-20 11:31:57.050 INFO  com.websocket.WebSocketServer                     :71   [32m127976254166142976[0;39m 推送消息：Emg8lJBpMb，内容：【文档1.2】被点赞！
2021-12-20 11:31:57.579 INFO  com.aspect.LogAspect                              :54   [32m127976257949405184[0;39m ------------- 开始 -------------
2021-12-20 11:31:57.579 INFO  com.aspect.LogAspect                              :55   [32m127976257949405184[0;39m 请求地址: http://localhost:8081/doc/find-content/124191201023889408 GET
2021-12-20 11:31:57.579 INFO  com.aspect.LogAspect                              :56   [32m127976257949405184[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:31:57.579 INFO  com.aspect.LogAspect                              :57   [32m127976257949405184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:57.580 INFO  com.aspect.LogAspect                              :80   [32m127976257949405184[0;39m 请求参数: [124191201023889408]
2021-12-20 11:31:57.649 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976257949405184[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:31:57.649 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976257949405184[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:31:57.719 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976257949405184[0;39m <==    Columns: id, content
2021-12-20 11:31:57.720 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976257949405184[0;39m <==        Row: 124191201023889408, <<BLOB>>
2021-12-20 11:31:57.721 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976257949405184[0;39m <==      Total: 1
2021-12-20 11:31:57.722 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976257949405184[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:31:57.723 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976257949405184[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:31:57.880 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976257949405184[0;39m <==    Updates: 1
2021-12-20 11:31:57.881 INFO  com.aspect.LogAspect                              :92   [32m127976257949405184[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:31:57.882 INFO  com.aspect.LogAspect                              :93   [32m127976257949405184[0;39m ------------- 结束 耗时：304 ms -------------
2021-12-20 11:31:58.645 INFO  com.aspect.LogAspect                              :54   [32m127976262420533248[0;39m ------------- 开始 -------------
2021-12-20 11:31:58.645 INFO  com.aspect.LogAspect                              :55   [32m127976262420533248[0;39m 请求地址: http://localhost:8081/doc/vote/124191201023889408 GET
2021-12-20 11:31:58.645 INFO  com.aspect.LogAspect                              :56   [32m127976262420533248[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:31:58.645 INFO  com.aspect.LogAspect                              :57   [32m127976262420533248[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:31:58.645 INFO  com.aspect.LogAspect                              :80   [32m127976262420533248[0;39m 请求参数: [124191201023889408]
2021-12-20 11:31:58.704 INFO  com.Util.RedisUtil                                :31   [32m127976262420533248[0;39m key不存在，放入：DOC_VOTE_124191201023889408_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:31:58.855 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976262420533248[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:31:58.856 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976262420533248[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:31:59.045 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976262420533248[0;39m <==    Updates: 1
2021-12-20 11:31:59.046 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976262420533248[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:31:59.048 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976262420533248[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:31:59.163 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976262420533248[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:31:59.164 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976262420533248[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 5, 5
2021-12-20 11:31:59.166 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976262420533248[0;39m <==      Total: 1
2021-12-20 11:31:59.169 INFO  com.aspect.LogAspect                              :92   [32m127976262420533248[0;39m 返回结果: {"success":true}
2021-12-20 11:31:59.169 INFO  com.aspect.LogAspect                              :93   [32m127976262420533248[0;39m ------------- 结束 耗时：524 ms -------------
2021-12-20 11:31:59.170 INFO  com.websocket.WebSocketServer                     :71   [32m127976262420533248[0;39m 推送消息：Emg8lJBpMb，内容：【文档3.1】被点赞！
2021-12-20 11:32:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127976268141563904[0;39m 生成今日电子书快照开始
2021-12-20 11:32:00.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976268141563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976268141563904[0;39m ==> Parameters: 
2021-12-20 11:32:00.115 INFO  com.aspect.LogAspect                              :54   [32m127976268586160128[0;39m ------------- 开始 -------------
2021-12-20 11:32:00.116 INFO  com.aspect.LogAspect                              :55   [32m127976268586160128[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:32:00.116 INFO  com.aspect.LogAspect                              :56   [32m127976268586160128[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:32:00.116 INFO  com.aspect.LogAspect                              :57   [32m127976268586160128[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:00.116 INFO  com.aspect.LogAspect                              :80   [32m127976268586160128[0;39m 请求参数: []
2021-12-20 11:32:00.116 INFO  com.aspect.LogAspect                              :54   [32m127976268590354432[0;39m ------------- 开始 -------------
2021-12-20 11:32:00.117 INFO  com.aspect.LogAspect                              :55   [32m127976268590354432[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:32:00.117 INFO  com.aspect.LogAspect                              :54   [32m127976268594548736[0;39m ------------- 开始 -------------
2021-12-20 11:32:00.117 INFO  com.aspect.LogAspect                              :56   [32m127976268590354432[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:32:00.117 INFO  com.aspect.LogAspect                              :55   [32m127976268594548736[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:32:00.117 INFO  com.aspect.LogAspect                              :57   [32m127976268590354432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:00.117 INFO  com.aspect.LogAspect                              :56   [32m127976268594548736[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:32:00.118 INFO  com.aspect.LogAspect                              :57   [32m127976268594548736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:00.118 INFO  com.aspect.LogAspect                              :80   [32m127976268590354432[0;39m 请求参数: []
2021-12-20 11:32:00.118 INFO  com.aspect.LogAspect                              :80   [32m127976268594548736[0;39m 请求参数: []
2021-12-20 11:32:00.185 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976268586160128[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:00.185 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976268586160128[0;39m ==> Parameters: 
2021-12-20 11:32:00.189 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976268590354432[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:00.189 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976268590354432[0;39m ==> Parameters: 
2021-12-20 11:32:00.200 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976268594548736[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:32:00.201 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976268594548736[0;39m ==> Parameters: 
2021-12-20 11:32:00.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976268141563904[0;39m <==    Updates: 0
2021-12-20 11:32:00.206 INFO  com.job.EbookSnapshotJob                          :35   [32m127976268141563904[0;39m 生成今日电子书快照结束，耗时：196毫秒
2021-12-20 11:32:00.268 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976268590354432[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:32:00.268 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976268590354432[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:32:00.268 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976268590354432[0;39m <==      Total: 1
2021-12-20 11:32:00.275 INFO  com.aspect.LogAspect                              :92   [32m127976268590354432[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:32:00.275 INFO  com.aspect.LogAspect                              :93   [32m127976268590354432[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-20 11:32:00.275 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976268586160128[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:32:00.275 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976268586160128[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:32:00.275 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976268586160128[0;39m <==        Row: 2021-12-20, 504, 175, 0, 0
2021-12-20 11:32:00.275 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976268586160128[0;39m <==      Total: 2
2021-12-20 11:32:00.275 INFO  com.aspect.LogAspect                              :92   [32m127976268586160128[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":504,"viewIncrease":0,"voteCount":175,"voteIncrease":0}],"success":true}
2021-12-20 11:32:00.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:32:00.275 INFO  com.aspect.LogAspect                              :93   [32m127976268586160128[0;39m ------------- 结束 耗时：160 ms -------------
2021-12-20 11:32:00.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:32:00.291 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:32:00.293 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:32:00.295 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:32:00.297 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:32:00.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:32:00.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:32:00.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:32:00.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:32:00.305 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:32:00.308 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:32:00.310 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:32:00.311 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:32:00.313 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:32:00.315 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:32:00.316 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:32:00.317 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:32:00.318 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:32:00.319 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976268594548736[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:32:00.320 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976268594548736[0;39m <==      Total: 19
2021-12-20 11:32:00.325 INFO  com.aspect.LogAspect                              :92   [32m127976268594548736[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:32:00.326 INFO  com.aspect.LogAspect                              :93   [32m127976268594548736[0;39m ------------- 结束 耗时：209 ms -------------
2021-12-20 11:32:02.433 INFO  com.aspect.LogAspect                              :54   [32m127976278308556800[0;39m ------------- 开始 -------------
2021-12-20 11:32:02.433 INFO  com.aspect.LogAspect                              :55   [32m127976278308556800[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:02.433 INFO  com.aspect.LogAspect                              :56   [32m127976278308556800[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:02.433 INFO  com.aspect.LogAspect                              :57   [32m127976278308556800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:02.433 INFO  com.aspect.LogAspect                              :80   [32m127976278308556800[0;39m 请求参数: [{"categoryId2":501,"page":1,"size":1000}]
2021-12-20 11:32:02.507 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976278308556800[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:02.507 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976278308556800[0;39m ==> Parameters: 501(Long)
2021-12-20 11:32:02.591 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976278308556800[0;39m <==    Columns: count(0)
2021-12-20 11:32:02.592 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976278308556800[0;39m <==        Row: 0
2021-12-20 11:32:02.593 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976278308556800[0;39m <==      Total: 1
2021-12-20 11:32:02.594 INFO  com.servicess.EbookService                        :48   [32m127976278308556800[0;39m 总行数：0
2021-12-20 11:32:02.595 INFO  com.servicess.EbookService                        :49   [32m127976278308556800[0;39m 总页数：0
2021-12-20 11:32:02.596 INFO  com.aspect.LogAspect                              :92   [32m127976278308556800[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:32:02.596 INFO  com.aspect.LogAspect                              :93   [32m127976278308556800[0;39m ------------- 结束 耗时：163 ms -------------
2021-12-20 11:32:03.944 INFO  com.aspect.LogAspect                              :54   [32m127976284646150144[0;39m ------------- 开始 -------------
2021-12-20 11:32:03.945 INFO  com.aspect.LogAspect                              :55   [32m127976284646150144[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:03.945 INFO  com.aspect.LogAspect                              :56   [32m127976284646150144[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:03.945 INFO  com.aspect.LogAspect                              :57   [32m127976284646150144[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:03.946 INFO  com.aspect.LogAspect                              :80   [32m127976284646150144[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2021-12-20 11:32:04.028 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976284646150144[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:04.029 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976284646150144[0;39m ==> Parameters: 502(Long)
2021-12-20 11:32:04.127 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976284646150144[0;39m <==    Columns: count(0)
2021-12-20 11:32:04.127 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976284646150144[0;39m <==        Row: 0
2021-12-20 11:32:04.128 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976284646150144[0;39m <==      Total: 1
2021-12-20 11:32:04.128 INFO  com.servicess.EbookService                        :48   [32m127976284646150144[0;39m 总行数：0
2021-12-20 11:32:04.128 INFO  com.servicess.EbookService                        :49   [32m127976284646150144[0;39m 总页数：0
2021-12-20 11:32:04.128 INFO  com.aspect.LogAspect                              :92   [32m127976284646150144[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:32:04.128 INFO  com.aspect.LogAspect                              :93   [32m127976284646150144[0;39m ------------- 结束 耗时：184 ms -------------
2021-12-20 11:32:04.804 INFO  com.aspect.LogAspect                              :54   [32m127976288253251584[0;39m ------------- 开始 -------------
2021-12-20 11:32:04.805 INFO  com.aspect.LogAspect                              :55   [32m127976288253251584[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:04.805 INFO  com.aspect.LogAspect                              :56   [32m127976288253251584[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:04.805 INFO  com.aspect.LogAspect                              :57   [32m127976288253251584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:04.806 INFO  com.aspect.LogAspect                              :80   [32m127976288253251584[0;39m 请求参数: [{"categoryId2":503,"page":1,"size":1000}]
2021-12-20 11:32:04.882 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976288253251584[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:04.883 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976288253251584[0;39m ==> Parameters: 503(Long)
2021-12-20 11:32:04.943 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976288253251584[0;39m <==    Columns: count(0)
2021-12-20 11:32:04.945 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976288253251584[0;39m <==        Row: 0
2021-12-20 11:32:04.945 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976288253251584[0;39m <==      Total: 1
2021-12-20 11:32:04.945 INFO  com.servicess.EbookService                        :48   [32m127976288253251584[0;39m 总行数：0
2021-12-20 11:32:04.947 INFO  com.servicess.EbookService                        :49   [32m127976288253251584[0;39m 总页数：0
2021-12-20 11:32:04.947 INFO  com.aspect.LogAspect                              :92   [32m127976288253251584[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:32:04.948 INFO  com.aspect.LogAspect                              :93   [32m127976288253251584[0;39m ------------- 结束 耗时：144 ms -------------
2021-12-20 11:32:05.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127976289129861120[0;39m 生成今日电子书快照开始
2021-12-20 11:32:05.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976289129861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976289129861120[0;39m ==> Parameters: 
2021-12-20 11:32:05.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976289129861120[0;39m <==    Updates: 0
2021-12-20 11:32:05.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127976289129861120[0;39m 生成今日电子书快照结束，耗时：234毫秒
2021-12-20 11:32:05.248 INFO  com.job.DocJob                                    :32   [32m127976290115522560[0;39m 更新电子书下的文档数据开始
2021-12-20 11:32:05.248 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976290115522560[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:32:05.248 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976290115522560[0;39m ==> Parameters: 
2021-12-20 11:32:05.410 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976290115522560[0;39m <==    Updates: 3
2021-12-20 11:32:05.410 INFO  com.job.DocJob                                    :35   [32m127976290115522560[0;39m 更新电子书下的文档数据结束，耗时：162毫秒
2021-12-20 11:32:06.510 INFO  com.aspect.LogAspect                              :54   [32m127976295408734208[0;39m ------------- 开始 -------------
2021-12-20 11:32:06.511 INFO  com.aspect.LogAspect                              :55   [32m127976295408734208[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:06.511 INFO  com.aspect.LogAspect                              :56   [32m127976295408734208[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:06.511 INFO  com.aspect.LogAspect                              :57   [32m127976295408734208[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:06.511 INFO  com.aspect.LogAspect                              :80   [32m127976295408734208[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2021-12-20 11:32:06.598 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976295408734208[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:06.599 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976295408734208[0;39m ==> Parameters: 401(Long)
2021-12-20 11:32:06.720 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976295408734208[0;39m <==    Columns: count(0)
2021-12-20 11:32:06.720 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976295408734208[0;39m <==        Row: 1
2021-12-20 11:32:06.721 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976295408734208[0;39m <==      Total: 1
2021-12-20 11:32:06.721 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976295408734208[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:32:06.722 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976295408734208[0;39m ==> Parameters: 401(Long), 1000(Integer)
2021-12-20 11:32:06.808 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976295408734208[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:32:06.808 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976295408734208[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-20 11:32:06.809 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976295408734208[0;39m <==      Total: 1
2021-12-20 11:32:06.809 INFO  com.servicess.EbookService                        :48   [32m127976295408734208[0;39m 总行数：1
2021-12-20 11:32:06.809 INFO  com.servicess.EbookService                        :49   [32m127976295408734208[0;39m 总页数：1
2021-12-20 11:32:06.810 INFO  com.aspect.LogAspect                              :92   [32m127976295408734208[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23}],"total":1},"success":true}
2021-12-20 11:32:06.811 INFO  com.aspect.LogAspect                              :93   [32m127976295408734208[0;39m ------------- 结束 耗时：301 ms -------------
2021-12-20 11:32:07.563 INFO  com.aspect.LogAspect                              :54   [32m127976299821142016[0;39m ------------- 开始 -------------
2021-12-20 11:32:07.563 INFO  com.aspect.LogAspect                              :55   [32m127976299821142016[0;39m 请求地址: http://localhost:8081/doc/all/4 GET
2021-12-20 11:32:07.563 INFO  com.aspect.LogAspect                              :56   [32m127976299821142016[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:32:07.564 INFO  com.aspect.LogAspect                              :57   [32m127976299821142016[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:07.564 INFO  com.aspect.LogAspect                              :80   [32m127976299821142016[0;39m 请求参数: [4]
2021-12-20 11:32:07.642 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976299821142016[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:32:07.643 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976299821142016[0;39m ==> Parameters: 4(Long)
2021-12-20 11:32:07.710 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976299821142016[0;39m <==      Total: 0
2021-12-20 11:32:07.710 INFO  com.aspect.LogAspect                              :92   [32m127976299821142016[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:32:07.710 INFO  com.aspect.LogAspect                              :93   [32m127976299821142016[0;39m ------------- 结束 耗时：148 ms -------------
2021-12-20 11:32:08.908 ERROR com.controller.ControllerExceptionHandler         :61   [32m127976257949405184[0;39m 系统异常：
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "undefined"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:832)
Caused by: java.lang.NumberFormatException: For input string: "undefined"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:68)
	at java.base/java.lang.Long.parseLong(Long.java:707)
	at java.base/java.lang.Long.valueOf(Long.java:1159)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 47 common frames omitted
2021-12-20 11:32:08.911 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m127976257949405184[0;39m Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "undefined"]
2021-12-20 11:32:10.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127976310059438080[0;39m 生成今日电子书快照开始
2021-12-20 11:32:10.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976310059438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:10.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976310059438080[0;39m ==> Parameters: 
2021-12-20 11:32:10.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976310059438080[0;39m <==    Updates: 0
2021-12-20 11:32:10.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127976310059438080[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-20 11:32:10.471 INFO  com.aspect.LogAspect                              :54   [32m127976312022372352[0;39m ------------- 开始 -------------
2021-12-20 11:32:10.472 INFO  com.aspect.LogAspect                              :55   [32m127976312022372352[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:32:10.472 INFO  com.aspect.LogAspect                              :56   [32m127976312022372352[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:32:10.472 INFO  com.aspect.LogAspect                              :57   [32m127976312022372352[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:10.472 INFO  com.aspect.LogAspect                              :80   [32m127976312022372352[0;39m 请求参数: []
2021-12-20 11:32:10.473 INFO  com.aspect.LogAspect                              :54   [32m127976312030760960[0;39m ------------- 开始 -------------
2021-12-20 11:32:10.474 INFO  com.aspect.LogAspect                              :55   [32m127976312030760960[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:32:10.474 INFO  com.aspect.LogAspect                              :56   [32m127976312030760960[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:32:10.474 INFO  com.aspect.LogAspect                              :57   [32m127976312030760960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:10.474 INFO  com.aspect.LogAspect                              :80   [32m127976312030760960[0;39m 请求参数: []
2021-12-20 11:32:10.475 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976312030760960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:10.475 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976312030760960[0;39m ==> Parameters: 
2021-12-20 11:32:10.476 INFO  com.aspect.LogAspect                              :54   [32m127976312043343872[0;39m ------------- 开始 -------------
2021-12-20 11:32:10.476 INFO  com.aspect.LogAspect                              :55   [32m127976312043343872[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:32:10.476 INFO  com.aspect.LogAspect                              :56   [32m127976312043343872[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:32:10.476 INFO  com.aspect.LogAspect                              :57   [32m127976312043343872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:10.477 INFO  com.aspect.LogAspect                              :80   [32m127976312043343872[0;39m 请求参数: []
2021-12-20 11:32:10.544 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976312022372352[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:10.544 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976312022372352[0;39m ==> Parameters: 
2021-12-20 11:32:10.557 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976312043343872[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:32:10.557 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976312043343872[0;39m ==> Parameters: 
2021-12-20 11:32:10.563 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976312030760960[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:32:10.564 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976312030760960[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:32:10.564 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976312030760960[0;39m <==      Total: 1
2021-12-20 11:32:10.564 INFO  com.aspect.LogAspect                              :92   [32m127976312030760960[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:32:10.564 INFO  com.aspect.LogAspect                              :93   [32m127976312030760960[0;39m ------------- 结束 耗时：91 ms -------------
2021-12-20 11:32:10.620 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976312022372352[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:32:10.620 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976312022372352[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:32:10.621 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976312022372352[0;39m <==        Row: 2021-12-20, 508, 178, 4, 3
2021-12-20 11:32:10.622 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976312022372352[0;39m <==      Total: 2
2021-12-20 11:32:10.622 INFO  com.aspect.LogAspect                              :92   [32m127976312022372352[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":508,"viewIncrease":4,"voteCount":178,"voteIncrease":3}],"success":true}
2021-12-20 11:32:10.622 INFO  com.aspect.LogAspect                              :93   [32m127976312022372352[0;39m ------------- 结束 耗时：151 ms -------------
2021-12-20 11:32:10.637 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:32:10.638 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:32:10.638 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:32:10.638 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:32:10.639 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:32:10.639 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:32:10.640 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:32:10.640 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:32:10.641 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:32:10.641 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:32:10.641 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:32:10.641 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:32:10.642 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:32:10.642 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:32:10.642 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:32:10.642 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:32:10.643 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:32:10.643 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:32:10.643 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:32:10.644 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976312043343872[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:32:10.644 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976312043343872[0;39m <==      Total: 19
2021-12-20 11:32:10.645 INFO  com.aspect.LogAspect                              :92   [32m127976312043343872[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:32:10.645 INFO  com.aspect.LogAspect                              :93   [32m127976312043343872[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:32:12.098 INFO  com.aspect.LogAspect                              :54   [32m127976318846504960[0;39m ------------- 开始 -------------
2021-12-20 11:32:12.098 INFO  com.aspect.LogAspect                              :55   [32m127976318846504960[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:12.098 INFO  com.aspect.LogAspect                              :56   [32m127976318846504960[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:12.098 INFO  com.aspect.LogAspect                              :57   [32m127976318846504960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:12.099 INFO  com.aspect.LogAspect                              :80   [32m127976318846504960[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-20 11:32:12.168 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976318846504960[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:12.168 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976318846504960[0;39m ==> Parameters: 201(Long)
2021-12-20 11:32:12.244 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976318846504960[0;39m <==    Columns: count(0)
2021-12-20 11:32:12.244 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976318846504960[0;39m <==        Row: 0
2021-12-20 11:32:12.245 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976318846504960[0;39m <==      Total: 1
2021-12-20 11:32:12.245 INFO  com.servicess.EbookService                        :48   [32m127976318846504960[0;39m 总行数：0
2021-12-20 11:32:12.245 INFO  com.servicess.EbookService                        :49   [32m127976318846504960[0;39m 总页数：0
2021-12-20 11:32:12.246 INFO  com.aspect.LogAspect                              :92   [32m127976318846504960[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:32:12.247 INFO  com.aspect.LogAspect                              :93   [32m127976318846504960[0;39m ------------- 结束 耗时：149 ms -------------
2021-12-20 11:32:12.644 INFO  com.aspect.LogAspect                              :54   [32m127976321136594944[0;39m ------------- 开始 -------------
2021-12-20 11:32:12.644 INFO  com.aspect.LogAspect                              :55   [32m127976321136594944[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:12.645 INFO  com.aspect.LogAspect                              :56   [32m127976321136594944[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:12.645 INFO  com.aspect.LogAspect                              :57   [32m127976321136594944[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:12.645 INFO  com.aspect.LogAspect                              :80   [32m127976321136594944[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-20 11:32:12.719 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976321136594944[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:12.719 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976321136594944[0;39m ==> Parameters: 202(Long)
2021-12-20 11:32:12.792 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976321136594944[0;39m <==    Columns: count(0)
2021-12-20 11:32:12.792 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976321136594944[0;39m <==        Row: 1
2021-12-20 11:32:12.792 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976321136594944[0;39m <==      Total: 1
2021-12-20 11:32:12.793 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976321136594944[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:32:12.793 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976321136594944[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-20 11:32:12.875 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976321136594944[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:32:12.875 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976321136594944[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 100, 21
2021-12-20 11:32:12.876 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976321136594944[0;39m <==      Total: 1
2021-12-20 11:32:12.876 INFO  com.servicess.EbookService                        :48   [32m127976321136594944[0;39m 总行数：1
2021-12-20 11:32:12.877 INFO  com.servicess.EbookService                        :49   [32m127976321136594944[0;39m 总页数：1
2021-12-20 11:32:12.877 INFO  com.aspect.LogAspect                              :92   [32m127976321136594944[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":100,"voteCount":21}],"total":1},"success":true}
2021-12-20 11:32:12.878 INFO  com.aspect.LogAspect                              :93   [32m127976321136594944[0;39m ------------- 结束 耗时：234 ms -------------
2021-12-20 11:32:13.319 INFO  com.aspect.LogAspect                              :54   [32m127976323967750144[0;39m ------------- 开始 -------------
2021-12-20 11:32:13.319 INFO  com.aspect.LogAspect                              :55   [32m127976323967750144[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-20 11:32:13.320 INFO  com.aspect.LogAspect                              :56   [32m127976323967750144[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:32:13.320 INFO  com.aspect.LogAspect                              :57   [32m127976323967750144[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:13.321 INFO  com.aspect.LogAspect                              :80   [32m127976323967750144[0;39m 请求参数: [1]
2021-12-20 11:32:13.388 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976323967750144[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:32:13.389 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976323967750144[0;39m ==> Parameters: 1(Long)
2021-12-20 11:32:13.466 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:32:13.467 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-20 11:32:13.468 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-20 11:32:13.469 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 9, 2
2021-12-20 11:32:13.470 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 16, 3
2021-12-20 11:32:13.471 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 23, 6
2021-12-20 11:32:13.476 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-20 11:32:13.479 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976323967750144[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 14, 2
2021-12-20 11:32:13.481 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976323967750144[0;39m <==      Total: 7
2021-12-20 11:32:13.484 INFO  com.aspect.LogAspect                              :92   [32m127976323967750144[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":14,"voteCount":5},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":16,"voteCount":3},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":23,"voteCount":6},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":14,"voteCount":2}],"success":true}
2021-12-20 11:32:13.484 INFO  com.aspect.LogAspect                              :93   [32m127976323967750144[0;39m ------------- 结束 耗时：165 ms -------------
2021-12-20 11:32:13.526 INFO  com.aspect.LogAspect                              :54   [32m127976324835971072[0;39m ------------- 开始 -------------
2021-12-20 11:32:13.526 INFO  com.aspect.LogAspect                              :55   [32m127976324835971072[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-20 11:32:13.526 INFO  com.aspect.LogAspect                              :56   [32m127976324835971072[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:32:13.527 INFO  com.aspect.LogAspect                              :57   [32m127976324835971072[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:13.527 INFO  com.aspect.LogAspect                              :80   [32m127976324835971072[0;39m 请求参数: [119304585604108288]
2021-12-20 11:32:13.597 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976324835971072[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:32:13.598 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976324835971072[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:32:13.686 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976324835971072[0;39m <==    Columns: id, content
2021-12-20 11:32:13.687 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976324835971072[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-20 11:32:13.688 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976324835971072[0;39m <==      Total: 1
2021-12-20 11:32:13.689 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976324835971072[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:32:13.690 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976324835971072[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:32:13.838 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976324835971072[0;39m <==    Updates: 1
2021-12-20 11:32:13.838 INFO  com.aspect.LogAspect                              :92   [32m127976324835971072[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-20 11:32:13.839 INFO  com.aspect.LogAspect                              :93   [32m127976324835971072[0;39m ------------- 结束 耗时：313 ms -------------
2021-12-20 11:32:14.678 INFO  com.aspect.LogAspect                              :54   [32m127976329667809280[0;39m ------------- 开始 -------------
2021-12-20 11:32:14.679 INFO  com.aspect.LogAspect                              :55   [32m127976329667809280[0;39m 请求地址: http://localhost:8081/doc/find-content/118617791401168896 GET
2021-12-20 11:32:14.679 INFO  com.aspect.LogAspect                              :56   [32m127976329667809280[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:32:14.679 INFO  com.aspect.LogAspect                              :57   [32m127976329667809280[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:14.680 INFO  com.aspect.LogAspect                              :80   [32m127976329667809280[0;39m 请求参数: [118617791401168896]
2021-12-20 11:32:14.749 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976329667809280[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:32:14.749 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976329667809280[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:32:14.837 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976329667809280[0;39m <==      Total: 0
2021-12-20 11:32:14.838 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976329667809280[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:32:14.839 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976329667809280[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:32:15.000 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976329667809280[0;39m <==    Updates: 1
2021-12-20 11:32:15.001 INFO  com.aspect.LogAspect                              :92   [32m127976329667809280[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:32:15.001 INFO  com.aspect.LogAspect                              :93   [32m127976329667809280[0;39m ------------- 结束 耗时：323 ms -------------
2021-12-20 11:32:15.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127976331051929600[0;39m 生成今日电子书快照开始
2021-12-20 11:32:15.010 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976331051929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:15.014 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976331051929600[0;39m ==> Parameters: 
2021-12-20 11:32:15.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976331051929600[0;39m <==    Updates: 0
2021-12-20 11:32:15.155 INFO  com.job.EbookSnapshotJob                          :35   [32m127976331051929600[0;39m 生成今日电子书快照结束，耗时：146毫秒
2021-12-20 11:32:16.890 INFO  com.aspect.LogAspect                              :54   [32m127976338945609728[0;39m ------------- 开始 -------------
2021-12-20 11:32:16.891 INFO  com.aspect.LogAspect                              :55   [32m127976338945609728[0;39m 请求地址: http://localhost:8081/doc/vote/118617791401168896 GET
2021-12-20 11:32:16.891 INFO  com.aspect.LogAspect                              :56   [32m127976338945609728[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:32:16.891 INFO  com.aspect.LogAspect                              :57   [32m127976338945609728[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:16.892 INFO  com.aspect.LogAspect                              :80   [32m127976338945609728[0;39m 请求参数: [118617791401168896]
2021-12-20 11:32:16.937 INFO  com.Util.RedisUtil                                :31   [32m127976338945609728[0;39m key不存在，放入：DOC_VOTE_118617791401168896_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:32:17.071 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976338945609728[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:32:17.072 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976338945609728[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:32:17.200 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976338945609728[0;39m <==    Updates: 1
2021-12-20 11:32:17.201 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976338945609728[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:32:17.202 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976338945609728[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:32:17.272 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976338945609728[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:32:17.272 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976338945609728[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 17, 4
2021-12-20 11:32:17.273 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976338945609728[0;39m <==      Total: 1
2021-12-20 11:32:17.274 INFO  com.aspect.LogAspect                              :92   [32m127976338945609728[0;39m 返回结果: {"success":true}
2021-12-20 11:32:17.274 INFO  com.aspect.LogAspect                              :93   [32m127976338945609728[0;39m ------------- 结束 耗时：384 ms -------------
2021-12-20 11:32:17.275 INFO  com.websocket.WebSocketServer                     :71   [32m127976338945609728[0;39m 推送消息：Emg8lJBpMb，内容：【文档2.2.1】被点赞！
2021-12-20 11:32:17.906 INFO  com.aspect.LogAspect                              :54   [32m127976343207022593[0;39m ------------- 开始 -------------
2021-12-20 11:32:17.906 INFO  com.aspect.LogAspect                              :54   [32m127976343207022592[0;39m ------------- 开始 -------------
2021-12-20 11:32:17.906 INFO  com.aspect.LogAspect                              :55   [32m127976343207022593[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :55   [32m127976343207022592[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :56   [32m127976343207022593[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :56   [32m127976343207022592[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :57   [32m127976343207022593[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :57   [32m127976343207022592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :80   [32m127976343207022593[0;39m 请求参数: []
2021-12-20 11:32:17.907 INFO  com.aspect.LogAspect                              :80   [32m127976343207022592[0;39m 请求参数: []
2021-12-20 11:32:17.909 INFO  com.aspect.LogAspect                              :54   [32m127976343219605504[0;39m ------------- 开始 -------------
2021-12-20 11:32:17.909 INFO  com.aspect.LogAspect                              :55   [32m127976343219605504[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:32:17.909 INFO  com.aspect.LogAspect                              :56   [32m127976343219605504[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:32:17.909 INFO  com.aspect.LogAspect                              :57   [32m127976343219605504[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:17.910 INFO  com.aspect.LogAspect                              :80   [32m127976343219605504[0;39m 请求参数: []
2021-12-20 11:32:17.974 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976343207022593[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:17.974 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976343207022593[0;39m ==> Parameters: 
2021-12-20 11:32:17.974 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976343207022592[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:17.974 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976343207022592[0;39m ==> Parameters: 
2021-12-20 11:32:17.989 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976343219605504[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:32:17.989 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976343219605504[0;39m ==> Parameters: 
2021-12-20 11:32:18.041 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976343207022593[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:32:18.041 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976343207022593[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:32:18.041 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976343207022593[0;39m <==        Row: 2021-12-20, 508, 178, 4, 3
2021-12-20 11:32:18.041 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976343207022593[0;39m <==      Total: 2
2021-12-20 11:32:18.041 INFO  com.aspect.LogAspect                              :92   [32m127976343207022593[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":508,"viewIncrease":4,"voteCount":178,"voteIncrease":3}],"success":true}
2021-12-20 11:32:18.041 INFO  com.aspect.LogAspect                              :93   [32m127976343207022593[0;39m ------------- 结束 耗时：135 ms -------------
2021-12-20 11:32:18.059 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976343207022592[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:32:18.059 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976343207022592[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:32:18.064 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976343207022592[0;39m <==      Total: 1
2021-12-20 11:32:18.066 INFO  com.aspect.LogAspect                              :92   [32m127976343207022592[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:32:18.066 INFO  com.aspect.LogAspect                              :93   [32m127976343207022592[0;39m ------------- 结束 耗时：160 ms -------------
2021-12-20 11:32:18.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:32:18.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:32:18.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:32:18.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:32:18.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:32:18.084 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:32:18.086 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:32:18.087 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:32:18.089 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:32:18.090 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:32:18.091 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:32:18.091 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:32:18.092 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:32:18.092 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:32:18.093 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:32:18.093 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:32:18.093 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:32:18.094 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:32:18.094 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:32:18.095 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976343219605504[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:32:18.095 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976343219605504[0;39m <==      Total: 19
2021-12-20 11:32:18.096 INFO  com.aspect.LogAspect                              :92   [32m127976343219605504[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:32:18.097 INFO  com.aspect.LogAspect                              :93   [32m127976343219605504[0;39m ------------- 结束 耗时：188 ms -------------
2021-12-20 11:32:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127976352031838208[0;39m 生成今日电子书快照开始
2021-12-20 11:32:20.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976352031838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976352031838208[0;39m ==> Parameters: 
2021-12-20 11:32:20.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976352031838208[0;39m <==    Updates: 0
2021-12-20 11:32:20.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127976352031838208[0;39m 生成今日电子书快照结束，耗时：214毫秒
2021-12-20 11:32:21.232 INFO  com.aspect.LogAspect                              :54   [32m127976357157277696[0;39m ------------- 开始 -------------
2021-12-20 11:32:21.232 INFO  com.aspect.LogAspect                              :55   [32m127976357157277696[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:32:21.233 INFO  com.aspect.LogAspect                              :56   [32m127976357157277696[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:32:21.233 INFO  com.aspect.LogAspect                              :57   [32m127976357157277696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:21.233 INFO  com.aspect.LogAspect                              :80   [32m127976357157277696[0;39m 请求参数: [{"categoryId2":115484763686572032,"page":1,"size":1000}]
2021-12-20 11:32:21.325 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976357157277696[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:32:21.326 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976357157277696[0;39m ==> Parameters: 115484763686572032(Long)
2021-12-20 11:32:21.416 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976357157277696[0;39m <==    Columns: count(0)
2021-12-20 11:32:21.417 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976357157277696[0;39m <==        Row: 1
2021-12-20 11:32:21.418 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976357157277696[0;39m <==      Total: 1
2021-12-20 11:32:21.419 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976357157277696[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:32:21.421 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976357157277696[0;39m ==> Parameters: 115484763686572032(Long), 1000(Integer)
2021-12-20 11:32:21.511 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976357157277696[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:32:21.512 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976357157277696[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-20 11:32:21.513 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976357157277696[0;39m <==      Total: 1
2021-12-20 11:32:21.514 INFO  com.servicess.EbookService                        :48   [32m127976357157277696[0;39m 总行数：1
2021-12-20 11:32:21.515 INFO  com.servicess.EbookService                        :49   [32m127976357157277696[0;39m 总页数：1
2021-12-20 11:32:21.516 INFO  com.aspect.LogAspect                              :92   [32m127976357157277696[0;39m 返回结果: {"content":{"list":[{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":1},"success":true}
2021-12-20 11:32:21.516 INFO  com.aspect.LogAspect                              :93   [32m127976357157277696[0;39m ------------- 结束 耗时：284 ms -------------
2021-12-20 11:32:22.356 INFO  com.aspect.LogAspect                              :54   [32m127976361871675392[0;39m ------------- 开始 -------------
2021-12-20 11:32:22.356 INFO  com.aspect.LogAspect                              :55   [32m127976361871675392[0;39m 请求地址: http://localhost:8081/doc/all/117509669114744832 GET
2021-12-20 11:32:22.357 INFO  com.aspect.LogAspect                              :56   [32m127976361871675392[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:32:22.357 INFO  com.aspect.LogAspect                              :57   [32m127976361871675392[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:22.357 INFO  com.aspect.LogAspect                              :80   [32m127976361871675392[0;39m 请求参数: [117509669114744832]
2021-12-20 11:32:22.429 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976361871675392[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:32:22.430 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976361871675392[0;39m ==> Parameters: 117509669114744832(Long)
2021-12-20 11:32:22.504 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976361871675392[0;39m <==      Total: 0
2021-12-20 11:32:22.506 INFO  com.aspect.LogAspect                              :92   [32m127976361871675392[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:32:22.506 INFO  com.aspect.LogAspect                              :93   [32m127976361871675392[0;39m ------------- 结束 耗时：150 ms -------------
2021-12-20 11:32:24.029 INFO  com.aspect.LogAspect                              :54   [32m127976368888745985[0;39m ------------- 开始 -------------
2021-12-20 11:32:24.030 INFO  com.aspect.LogAspect                              :55   [32m127976368888745985[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:32:24.030 INFO  com.aspect.LogAspect                              :56   [32m127976368888745985[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:32:24.030 INFO  com.aspect.LogAspect                              :57   [32m127976368888745985[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:24.029 INFO  com.aspect.LogAspect                              :54   [32m127976368888745984[0;39m ------------- 开始 -------------
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :55   [32m127976368888745984[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:32:24.030 INFO  com.aspect.LogAspect                              :80   [32m127976368888745985[0;39m 请求参数: []
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :56   [32m127976368888745984[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :54   [32m127976368897134592[0;39m ------------- 开始 -------------
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :57   [32m127976368888745984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :55   [32m127976368897134592[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :80   [32m127976368888745984[0;39m 请求参数: []
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :56   [32m127976368897134592[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:32:24.031 INFO  com.aspect.LogAspect                              :57   [32m127976368897134592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:24.032 INFO  com.aspect.LogAspect                              :80   [32m127976368897134592[0;39m 请求参数: []
2021-12-20 11:32:24.106 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976368888745985[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:24.106 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976368888745984[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:24.106 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976368888745985[0;39m ==> Parameters: 
2021-12-20 11:32:24.106 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976368888745984[0;39m ==> Parameters: 
2021-12-20 11:32:24.122 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976368897134592[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:32:24.122 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976368897134592[0;39m ==> Parameters: 
2021-12-20 11:32:24.200 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976368888745984[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:32:24.200 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976368888745985[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:32:24.200 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976368888745984[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:32:24.200 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976368888745985[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:32:24.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:32:24.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:32:24.200 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976368888745984[0;39m <==        Row: 2021-12-20, 508, 178, 4, 3
2021-12-20 11:32:24.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:32:24.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:32:24.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:32:24.200 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976368888745985[0;39m <==      Total: 1
2021-12-20 11:32:24.200 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:32:24.215 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:32:24.215 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976368888745984[0;39m <==      Total: 2
2021-12-20 11:32:24.215 INFO  com.aspect.LogAspect                              :92   [32m127976368888745985[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:32:24.215 INFO  com.aspect.LogAspect                              :93   [32m127976368888745985[0;39m ------------- 结束 耗时：186 ms -------------
2021-12-20 11:32:24.215 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:32:24.215 INFO  com.aspect.LogAspect                              :92   [32m127976368888745984[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":508,"viewIncrease":4,"voteCount":178,"voteIncrease":3}],"success":true}
2021-12-20 11:32:24.215 INFO  com.aspect.LogAspect                              :93   [32m127976368888745984[0;39m ------------- 结束 耗时：186 ms -------------
2021-12-20 11:32:24.215 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:32:24.222 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:32:24.223 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:32:24.225 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:32:24.226 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:32:24.228 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:32:24.230 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:32:24.231 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:32:24.233 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:32:24.236 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:32:24.238 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:32:24.239 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976368897134592[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:32:24.239 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976368897134592[0;39m <==      Total: 19
2021-12-20 11:32:24.247 INFO  com.aspect.LogAspect                              :92   [32m127976368897134592[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:32:24.248 INFO  com.aspect.LogAspect                              :93   [32m127976368897134592[0;39m ------------- 结束 耗时：217 ms -------------
2021-12-20 11:32:25.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127976372978192384[0;39m 生成今日电子书快照开始
2021-12-20 11:32:25.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976372978192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:25.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976372978192384[0;39m ==> Parameters: 
2021-12-20 11:32:25.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976372978192384[0;39m <==    Updates: 0
2021-12-20 11:32:25.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127976372978192384[0;39m 生成今日电子书快照结束，耗时：228毫秒
2021-12-20 11:32:29.270 INFO  com.websocket.WebSocketServer                     :41   [32m127976329667809280[0;39m 连接关闭，token：Emg8lJBpMb，session id：2！当前连接数：0
2021-12-20 11:32:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127976393953906688[0;39m 生成今日电子书快照开始
2021-12-20 11:32:30.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976393953906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976393953906688[0;39m ==> Parameters: 
2021-12-20 11:32:30.202 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976393953906688[0;39m <==    Updates: 0
2021-12-20 11:32:30.202 INFO  com.job.EbookSnapshotJob                          :35   [32m127976393953906688[0;39m 生成今日电子书快照结束，耗时：197毫秒
2021-12-20 11:32:30.321 INFO  com.websocket.WebSocketServer                     :32   [32m127976338945609728[0;39m 有新连接：token：m8ezRnK8sD，session id：3，当前连接数：1
2021-12-20 11:32:30.404 INFO  com.aspect.LogAspect                              :54   [32m127976395627433984[0;39m ------------- 开始 -------------
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :55   [32m127976395627433984[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :56   [32m127976395627433984[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :57   [32m127976395627433984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :54   [32m127976395631628288[0;39m ------------- 开始 -------------
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :80   [32m127976395627433984[0;39m 请求参数: []
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :55   [32m127976395631628288[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:32:30.405 INFO  com.aspect.LogAspect                              :56   [32m127976395631628288[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:32:30.406 INFO  com.aspect.LogAspect                              :57   [32m127976395631628288[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:30.406 INFO  com.aspect.LogAspect                              :80   [32m127976395631628288[0;39m 请求参数: []
2021-12-20 11:32:30.406 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976395631628288[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:30.407 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976395631628288[0;39m ==> Parameters: 
2021-12-20 11:32:30.407 INFO  com.aspect.LogAspect                              :54   [32m127976395640016896[0;39m ------------- 开始 -------------
2021-12-20 11:32:30.407 INFO  com.aspect.LogAspect                              :55   [32m127976395640016896[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:32:30.407 INFO  com.aspect.LogAspect                              :56   [32m127976395640016896[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:32:30.408 INFO  com.aspect.LogAspect                              :57   [32m127976395640016896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:32:30.408 INFO  com.aspect.LogAspect                              :80   [32m127976395640016896[0;39m 请求参数: []
2021-12-20 11:32:30.473 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976395627433984[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:32:30.473 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976395627433984[0;39m ==> Parameters: 
2021-12-20 11:32:30.511 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976395640016896[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:32:30.512 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976395631628288[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:32:30.513 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976395640016896[0;39m ==> Parameters: 
2021-12-20 11:32:30.515 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976395631628288[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:32:30.517 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976395631628288[0;39m <==      Total: 1
2021-12-20 11:32:30.519 INFO  com.aspect.LogAspect                              :92   [32m127976395631628288[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:32:30.519 INFO  com.aspect.LogAspect                              :93   [32m127976395631628288[0;39m ------------- 结束 耗时：114 ms -------------
2021-12-20 11:32:30.560 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976395627433984[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:32:30.560 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976395627433984[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:32:30.561 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976395627433984[0;39m <==        Row: 2021-12-20, 508, 178, 4, 3
2021-12-20 11:32:30.561 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976395627433984[0;39m <==      Total: 2
2021-12-20 11:32:30.562 INFO  com.aspect.LogAspect                              :92   [32m127976395627433984[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":508,"viewIncrease":4,"voteCount":178,"voteIncrease":3}],"success":true}
2021-12-20 11:32:30.562 INFO  com.aspect.LogAspect                              :93   [32m127976395627433984[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-20 11:32:30.602 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:32:30.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:32:30.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:32:30.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:32:30.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:32:30.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:32:30.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:32:30.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:32:30.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:32:30.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:32:30.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:32:30.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:32:30.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:32:30.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:32:30.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:32:30.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:32:30.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:32:30.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:32:30.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:32:30.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976395640016896[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:32:30.608 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976395640016896[0;39m <==      Total: 19
2021-12-20 11:32:30.610 INFO  com.aspect.LogAspect                              :92   [32m127976395640016896[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:32:30.610 INFO  com.aspect.LogAspect                              :93   [32m127976395640016896[0;39m ------------- 结束 耗时：203 ms -------------
2021-12-20 11:32:35.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127976414938009600[0;39m 生成今日电子书快照开始
2021-12-20 11:32:35.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976414938009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:35.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976414938009600[0;39m ==> Parameters: 
2021-12-20 11:32:35.223 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976414938009600[0;39m <==    Updates: 0
2021-12-20 11:32:35.223 INFO  com.job.EbookSnapshotJob                          :35   [32m127976414938009600[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 11:32:35.223 INFO  com.job.DocJob                                    :32   [32m127976415839784960[0;39m 更新电子书下的文档数据开始
2021-12-20 11:32:35.223 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976415839784960[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:32:35.223 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976415839784960[0;39m ==> Parameters: 
2021-12-20 11:32:35.377 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976415839784960[0;39m <==    Updates: 3
2021-12-20 11:32:35.377 INFO  com.job.DocJob                                    :35   [32m127976415839784960[0;39m 更新电子书下的文档数据结束，耗时：154毫秒
2021-12-20 11:32:40.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127976435959861248[0;39m 生成今日电子书快照开始
2021-12-20 11:32:40.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976435959861248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:40.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976435959861248[0;39m ==> Parameters: 
2021-12-20 11:32:40.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976435959861248[0;39m <==    Updates: 0
2021-12-20 11:32:40.283 INFO  com.job.EbookSnapshotJob                          :35   [32m127976435959861248[0;39m 生成今日电子书快照结束，耗时：261毫秒
2021-12-20 11:32:45.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127976456922992640[0;39m 生成今日电子书快照开始
2021-12-20 11:32:45.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976456922992640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:45.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976456922992640[0;39m ==> Parameters: 
2021-12-20 11:32:45.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976456922992640[0;39m <==    Updates: 0
2021-12-20 11:32:45.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127976456922992640[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:32:50.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127976477881929728[0;39m 生成今日电子书快照开始
2021-12-20 11:32:50.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976477881929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:50.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976477881929728[0;39m ==> Parameters: 
2021-12-20 11:32:50.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976477881929728[0;39m <==    Updates: 0
2021-12-20 11:32:50.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127976477881929728[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:32:55.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127976498874421248[0;39m 生成今日电子书快照开始
2021-12-20 11:32:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976498874421248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:32:55.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976498874421248[0;39m ==> Parameters: 
2021-12-20 11:32:55.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976498874421248[0;39m <==    Updates: 0
2021-12-20 11:32:55.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127976498874421248[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:33:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127976519824969728[0;39m 生成今日电子书快照开始
2021-12-20 11:33:00.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976519824969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:00.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976519824969728[0;39m ==> Parameters: 
2021-12-20 11:33:00.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976519824969728[0;39m <==    Updates: 0
2021-12-20 11:33:00.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127976519824969728[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:33:05.020 INFO  com.job.DocJob                                    :32   [32m127976540817461248[0;39m 更新电子书下的文档数据开始
2021-12-20 11:33:05.089 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976540817461248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:33:05.089 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976540817461248[0;39m ==> Parameters: 
2021-12-20 11:33:05.220 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976540817461248[0;39m <==    Updates: 3
2021-12-20 11:33:05.220 INFO  com.job.DocJob                                    :35   [32m127976540817461248[0;39m 更新电子书下的文档数据结束，耗时：200毫秒
2021-12-20 11:33:05.220 INFO  com.job.EbookSnapshotJob                          :32   [32m127976541656322048[0;39m 生成今日电子书快照开始
2021-12-20 11:33:05.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976541656322048[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:05.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976541656322048[0;39m ==> Parameters: 
2021-12-20 11:33:05.364 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976541656322048[0;39m <==    Updates: 0
2021-12-20 11:33:05.364 INFO  com.job.EbookSnapshotJob                          :35   [32m127976541656322048[0;39m 生成今日电子书快照结束，耗时：144毫秒
2021-12-20 11:33:09.406 INFO  com.websocket.WebSocketServer                     :41   [32m127976368888745984[0;39m 连接关闭，token：m8ezRnK8sD，session id：3！当前连接数：0
2021-12-20 11:33:10.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127976561734455296[0;39m 生成今日电子书快照开始
2021-12-20 11:33:10.191 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976561734455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:10.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976561734455296[0;39m ==> Parameters: 
2021-12-20 11:33:10.353 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976561734455296[0;39m <==    Updates: 0
2021-12-20 11:33:10.353 INFO  com.job.EbookSnapshotJob                          :35   [32m127976561734455296[0;39m 生成今日电子书快照结束，耗时：345毫秒
2021-12-20 11:33:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127976582722752512[0;39m 生成今日电子书快照开始
2021-12-20 11:33:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976582722752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976582722752512[0;39m ==> Parameters: 
2021-12-20 11:33:15.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976582722752512[0;39m <==    Updates: 0
2021-12-20 11:33:15.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127976582722752512[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:33:19.062 INFO  com.websocket.WebSocketServer                     :32   [32m127976368897134592[0;39m 有新连接：token：rbltC6rfE7，session id：4，当前连接数：1
2021-12-20 11:33:19.232 INFO  com.aspect.LogAspect                              :54   [32m127976600426909697[0;39m ------------- 开始 -------------
2021-12-20 11:33:19.232 INFO  com.aspect.LogAspect                              :55   [32m127976600426909697[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :56   [32m127976600426909697[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :57   [32m127976600426909697[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :54   [32m127976600431104000[0;39m ------------- 开始 -------------
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :80   [32m127976600426909697[0;39m 请求参数: []
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :55   [32m127976600431104000[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :56   [32m127976600431104000[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:33:19.233 INFO  com.aspect.LogAspect                              :57   [32m127976600431104000[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:33:19.232 INFO  com.aspect.LogAspect                              :54   [32m127976600426909696[0;39m ------------- 开始 -------------
2021-12-20 11:33:19.234 INFO  com.aspect.LogAspect                              :80   [32m127976600431104000[0;39m 请求参数: []
2021-12-20 11:33:19.234 INFO  com.aspect.LogAspect                              :55   [32m127976600426909696[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:33:19.234 INFO  com.aspect.LogAspect                              :56   [32m127976600426909696[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:33:19.234 INFO  com.aspect.LogAspect                              :57   [32m127976600426909696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:33:19.234 INFO  com.aspect.LogAspect                              :80   [32m127976600426909696[0;39m 请求参数: []
2021-12-20 11:33:19.310 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976600426909697[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:33:19.311 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976600426909697[0;39m ==> Parameters: 
2021-12-20 11:33:19.312 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976600431104000[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:33:19.313 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976600431104000[0;39m ==> Parameters: 
2021-12-20 11:33:19.325 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976600426909696[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:33:19.326 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976600426909696[0;39m ==> Parameters: 
2021-12-20 11:33:19.399 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:33:19.400 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976600426909697[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:33:19.400 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976600426909696[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:33:19.400 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:33:19.400 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976600426909697[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:33:19.400 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976600426909696[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:33:19.400 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:33:19.400 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:33:19.400 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976600426909697[0;39m <==      Total: 1
2021-12-20 11:33:19.401 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976600426909696[0;39m <==        Row: 2021-12-20, 510, 179, 6, 4
2021-12-20 11:33:19.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:33:19.401 INFO  com.aspect.LogAspect                              :92   [32m127976600426909697[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:33:19.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:33:19.401 INFO  com.aspect.LogAspect                              :93   [32m127976600426909697[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:33:19.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:33:19.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:33:19.401 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976600426909696[0;39m <==      Total: 2
2021-12-20 11:33:19.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:33:19.402 INFO  com.aspect.LogAspect                              :92   [32m127976600426909696[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":510,"viewIncrease":6,"voteCount":179,"voteIncrease":4}],"success":true}
2021-12-20 11:33:19.402 INFO  com.aspect.LogAspect                              :93   [32m127976600426909696[0;39m ------------- 结束 耗时：170 ms -------------
2021-12-20 11:33:19.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:33:19.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:33:19.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:33:19.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:33:19.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:33:19.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:33:19.405 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:33:19.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:33:19.406 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:33:19.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:33:19.407 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976600431104000[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:33:19.408 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976600431104000[0;39m <==      Total: 19
2021-12-20 11:33:19.409 INFO  com.aspect.LogAspect                              :92   [32m127976600431104000[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:33:19.409 INFO  com.aspect.LogAspect                              :93   [32m127976600431104000[0;39m ------------- 结束 耗时：176 ms -------------
2021-12-20 11:33:20.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127976603723632640[0;39m 生成今日电子书快照开始
2021-12-20 11:33:20.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976603723632640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:20.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976603723632640[0;39m ==> Parameters: 
2021-12-20 11:33:20.279 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976603723632640[0;39m <==    Updates: 0
2021-12-20 11:33:20.279 INFO  com.job.EbookSnapshotJob                          :35   [32m127976603723632640[0;39m 生成今日电子书快照结束，耗时：261毫秒
2021-12-20 11:33:25.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127976624640626688[0;39m 生成今日电子书快照开始
2021-12-20 11:33:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976624640626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976624640626688[0;39m ==> Parameters: 
2021-12-20 11:33:25.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976624640626688[0;39m <==    Updates: 0
2021-12-20 11:33:25.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127976624640626688[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 11:33:30.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127976645666672640[0;39m 生成今日电子书快照开始
2021-12-20 11:33:30.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976645666672640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:30.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976645666672640[0;39m ==> Parameters: 
2021-12-20 11:33:30.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976645666672640[0;39m <==    Updates: 0
2021-12-20 11:33:30.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127976645666672640[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:33:35.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127976666625609728[0;39m 生成今日电子书快照开始
2021-12-20 11:33:35.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976666625609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:35.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976666625609728[0;39m ==> Parameters: 
2021-12-20 11:33:35.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976666625609728[0;39m <==    Updates: 0
2021-12-20 11:33:35.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127976666625609728[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 11:33:35.242 INFO  com.job.DocJob                                    :32   [32m127976667577716736[0;39m 更新电子书下的文档数据开始
2021-12-20 11:33:35.243 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976667577716736[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:33:35.244 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976667577716736[0;39m ==> Parameters: 
2021-12-20 11:33:35.389 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976667577716736[0;39m <==    Updates: 3
2021-12-20 11:33:35.389 INFO  com.job.DocJob                                    :35   [32m127976667577716736[0;39m 更新电子书下的文档数据结束，耗时：146毫秒
2021-12-20 11:33:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127976687597129728[0;39m 生成今日电子书快照开始
2021-12-20 11:33:40.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976687597129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:40.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976687597129728[0;39m ==> Parameters: 
2021-12-20 11:33:40.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976687597129728[0;39m <==    Updates: 0
2021-12-20 11:33:40.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127976687597129728[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:33:44.401 INFO  com.websocket.WebSocketServer                     :41   [32m127976368888745985[0;39m 连接关闭，token：rbltC6rfE7，session id：4！当前连接数：0
2021-12-20 11:33:45.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127976708543483904[0;39m 生成今日电子书快照开始
2021-12-20 11:33:45.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976708543483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976708543483904[0;39m ==> Parameters: 
2021-12-20 11:33:45.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976708543483904[0;39m <==    Updates: 0
2021-12-20 11:33:45.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127976708543483904[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:33:50.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127976729494032384[0;39m 生成今日电子书快照开始
2021-12-20 11:33:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976729494032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976729494032384[0;39m ==> Parameters: 
2021-12-20 11:33:50.205 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976729494032384[0;39m <==    Updates: 0
2021-12-20 11:33:50.205 INFO  com.job.EbookSnapshotJob                          :35   [32m127976729494032384[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:33:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127976750473940992[0;39m 生成今日电子书快照开始
2021-12-20 11:33:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976750473940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:33:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976750473940992[0;39m ==> Parameters: 
2021-12-20 11:33:55.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976750473940992[0;39m <==    Updates: 0
2021-12-20 11:33:55.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127976750473940992[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:34:00.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127976771441266688[0;39m 生成今日电子书快照开始
2021-12-20 11:34:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976771441266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976771441266688[0;39m ==> Parameters: 
2021-12-20 11:34:00.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976771441266688[0;39m <==    Updates: 0
2021-12-20 11:34:00.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127976771441266688[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:34:05.006 INFO  com.job.DocJob                                    :32   [32m127976792416980992[0;39m 更新电子书下的文档数据开始
2021-12-20 11:34:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976792416980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:34:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976792416980992[0;39m ==> Parameters: 
2021-12-20 11:34:05.224 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976792416980992[0;39m <==    Updates: 3
2021-12-20 11:34:05.224 INFO  com.job.DocJob                                    :35   [32m127976792416980992[0;39m 更新电子书下的文档数据结束，耗时：217毫秒
2021-12-20 11:34:05.224 INFO  com.job.EbookSnapshotJob                          :32   [32m127976793331339264[0;39m 生成今日电子书快照开始
2021-12-20 11:34:05.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976793331339264[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:05.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976793331339264[0;39m ==> Parameters: 
2021-12-20 11:34:05.375 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976793331339264[0;39m <==    Updates: 0
2021-12-20 11:34:05.390 INFO  com.job.EbookSnapshotJob                          :35   [32m127976793331339264[0;39m 生成今日电子书快照结束，耗时：166毫秒
2021-12-20 11:34:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127976813426249728[0;39m 生成今日电子书快照开始
2021-12-20 11:34:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976813426249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:10.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976813426249728[0;39m ==> Parameters: 
2021-12-20 11:34:10.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976813426249728[0;39m <==    Updates: 0
2021-12-20 11:34:10.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127976813426249728[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:34:13.802 INFO  com.websocket.WebSocketServer                     :32   [32m127976357157277696[0;39m 有新连接：token：hLyXbZA57q，session id：5，当前连接数：1
2021-12-20 11:34:13.992 INFO  com.aspect.LogAspect                              :54   [32m127976830106996736[0;39m ------------- 开始 -------------
2021-12-20 11:34:13.992 INFO  com.aspect.LogAspect                              :55   [32m127976830106996736[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:34:13.993 INFO  com.aspect.LogAspect                              :56   [32m127976830106996736[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:34:13.993 INFO  com.aspect.LogAspect                              :57   [32m127976830106996736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:13.993 INFO  com.aspect.LogAspect                              :80   [32m127976830106996736[0;39m 请求参数: []
2021-12-20 11:34:13.993 INFO  com.aspect.LogAspect                              :54   [32m127976830111191040[0;39m ------------- 开始 -------------
2021-12-20 11:34:13.993 INFO  com.aspect.LogAspect                              :55   [32m127976830111191040[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:34:13.994 INFO  com.aspect.LogAspect                              :56   [32m127976830111191040[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:34:13.994 INFO  com.aspect.LogAspect                              :57   [32m127976830111191040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:13.994 INFO  com.aspect.LogAspect                              :80   [32m127976830111191040[0;39m 请求参数: []
2021-12-20 11:34:13.997 INFO  com.aspect.LogAspect                              :54   [32m127976830127968256[0;39m ------------- 开始 -------------
2021-12-20 11:34:13.997 INFO  com.aspect.LogAspect                              :55   [32m127976830127968256[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:34:13.998 INFO  com.aspect.LogAspect                              :56   [32m127976830127968256[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:34:13.998 INFO  com.aspect.LogAspect                              :57   [32m127976830127968256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:13.998 INFO  com.aspect.LogAspect                              :80   [32m127976830127968256[0;39m 请求参数: []
2021-12-20 11:34:14.075 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976830106996736[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:34:14.075 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976830106996736[0;39m ==> Parameters: 
2021-12-20 11:34:14.076 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976830111191040[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:34:14.076 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976830111191040[0;39m ==> Parameters: 
2021-12-20 11:34:14.083 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976830127968256[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:34:14.083 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976830127968256[0;39m ==> Parameters: 
2021-12-20 11:34:14.152 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976830106996736[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:34:14.153 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976830106996736[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:34:14.156 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976830106996736[0;39m <==        Row: 2021-12-20, 510, 179, 6, 4
2021-12-20 11:34:14.157 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976830106996736[0;39m <==      Total: 2
2021-12-20 11:34:14.158 INFO  com.aspect.LogAspect                              :92   [32m127976830106996736[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":510,"viewIncrease":6,"voteCount":179,"voteIncrease":4}],"success":true}
2021-12-20 11:34:14.159 INFO  com.aspect.LogAspect                              :93   [32m127976830106996736[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-20 11:34:14.173 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:34:14.173 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976830111191040[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:34:14.173 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:34:14.174 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976830111191040[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:34:14.174 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:34:14.174 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:34:14.174 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976830111191040[0;39m <==      Total: 1
2021-12-20 11:34:14.174 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:34:14.175 INFO  com.aspect.LogAspect                              :92   [32m127976830111191040[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:34:14.175 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:34:14.175 INFO  com.aspect.LogAspect                              :93   [32m127976830111191040[0;39m ------------- 结束 耗时：182 ms -------------
2021-12-20 11:34:14.175 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:34:14.175 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:34:14.176 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:34:14.176 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:34:14.177 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:34:14.177 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:34:14.178 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:34:14.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:34:14.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:34:14.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:34:14.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:34:14.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:34:14.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:34:14.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976830127968256[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:34:14.180 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976830127968256[0;39m <==      Total: 19
2021-12-20 11:34:14.181 INFO  com.aspect.LogAspect                              :92   [32m127976830127968256[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:34:14.182 INFO  com.aspect.LogAspect                              :93   [32m127976830127968256[0;39m ------------- 结束 耗时：185 ms -------------
2021-12-20 11:34:15.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127976834360020992[0;39m 生成今日电子书快照开始
2021-12-20 11:34:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976834360020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:15.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976834360020992[0;39m ==> Parameters: 
2021-12-20 11:34:15.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976834360020992[0;39m <==    Updates: 0
2021-12-20 11:34:15.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127976834360020992[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 11:34:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127976855360901120[0;39m 生成今日电子书快照开始
2021-12-20 11:34:20.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976855360901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:20.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976855360901120[0;39m ==> Parameters: 
2021-12-20 11:34:20.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976855360901120[0;39m <==    Updates: 0
2021-12-20 11:34:20.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127976855360901120[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:34:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127976876332421120[0;39m 生成今日电子书快照开始
2021-12-20 11:34:25.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976876332421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:25.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976876332421120[0;39m ==> Parameters: 
2021-12-20 11:34:25.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976876332421120[0;39m <==    Updates: 0
2021-12-20 11:34:25.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127976876332421120[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-20 11:34:26.012 INFO  com.aspect.LogAspect                              :54   [32m127976880522530816[0;39m ------------- 开始 -------------
2021-12-20 11:34:26.012 INFO  com.aspect.LogAspect                              :55   [32m127976880522530816[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:34:26.013 INFO  com.aspect.LogAspect                              :56   [32m127976880522530816[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:34:26.013 INFO  com.aspect.LogAspect                              :57   [32m127976880522530816[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:26.013 INFO  com.aspect.LogAspect                              :80   [32m127976880522530816[0;39m 请求参数: [{"categoryId2":301,"page":1,"size":1000}]
2021-12-20 11:34:26.080 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976880522530816[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:34:26.080 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976880522530816[0;39m ==> Parameters: 301(Long)
2021-12-20 11:34:26.141 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976880522530816[0;39m <==    Columns: count(0)
2021-12-20 11:34:26.141 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976880522530816[0;39m <==        Row: 1
2021-12-20 11:34:26.142 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976880522530816[0;39m <==      Total: 1
2021-12-20 11:34:26.142 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976880522530816[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:34:26.142 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976880522530816[0;39m ==> Parameters: 301(Long), 1000(Integer)
2021-12-20 11:34:26.244 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976880522530816[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:34:26.245 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976880522530816[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 3, 3
2021-12-20 11:34:26.246 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976880522530816[0;39m <==      Total: 1
2021-12-20 11:34:26.247 INFO  com.servicess.EbookService                        :48   [32m127976880522530816[0;39m 总行数：1
2021-12-20 11:34:26.248 INFO  com.servicess.EbookService                        :49   [32m127976880522530816[0;39m 总页数：1
2021-12-20 11:34:26.249 INFO  com.aspect.LogAspect                              :92   [32m127976880522530816[0;39m 返回结果: {"content":{"list":[{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":3,"voteCount":3}],"total":1},"success":true}
2021-12-20 11:34:26.249 INFO  com.aspect.LogAspect                              :93   [32m127976880522530816[0;39m ------------- 结束 耗时：237 ms -------------
2021-12-20 11:34:28.073 INFO  com.aspect.LogAspect                              :54   [32m127976889166991360[0;39m ------------- 开始 -------------
2021-12-20 11:34:28.073 INFO  com.aspect.LogAspect                              :55   [32m127976889166991360[0;39m 请求地址: http://localhost:8081/doc/all/3 GET
2021-12-20 11:34:28.074 INFO  com.aspect.LogAspect                              :56   [32m127976889166991360[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:34:28.074 INFO  com.aspect.LogAspect                              :57   [32m127976889166991360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:28.074 INFO  com.aspect.LogAspect                              :80   [32m127976889166991360[0;39m 请求参数: [3]
2021-12-20 11:34:28.150 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976889166991360[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:34:28.151 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976889166991360[0;39m ==> Parameters: 3(Long)
2021-12-20 11:34:28.237 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976889166991360[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:34:28.237 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127976889166991360[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 3, 3
2021-12-20 11:34:28.238 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976889166991360[0;39m <==      Total: 1
2021-12-20 11:34:28.249 INFO  com.aspect.LogAspect                              :92   [32m127976889166991360[0;39m 返回结果: {"content":[{"ebookId":3,"id":125274442472493056,"name":"test","parent":0,"sort":1,"viewCount":3,"voteCount":3}],"success":true}
2021-12-20 11:34:28.250 INFO  com.aspect.LogAspect                              :93   [32m127976889166991360[0;39m ------------- 结束 耗时：177 ms -------------
2021-12-20 11:34:28.306 INFO  com.aspect.LogAspect                              :54   [32m127976890144264192[0;39m ------------- 开始 -------------
2021-12-20 11:34:28.307 INFO  com.aspect.LogAspect                              :55   [32m127976890144264192[0;39m 请求地址: http://localhost:8081/doc/find-content/125274442472493056 GET
2021-12-20 11:34:28.308 INFO  com.aspect.LogAspect                              :56   [32m127976890144264192[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:34:28.308 INFO  com.aspect.LogAspect                              :57   [32m127976890144264192[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:28.309 INFO  com.aspect.LogAspect                              :80   [32m127976890144264192[0;39m 请求参数: [125274442472493056]
2021-12-20 11:34:28.408 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976890144264192[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:34:28.409 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976890144264192[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:34:28.489 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976890144264192[0;39m <==    Columns: id, content
2021-12-20 11:34:28.489 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127976890144264192[0;39m <==        Row: 125274442472493056, <<BLOB>>
2021-12-20 11:34:28.490 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127976890144264192[0;39m <==      Total: 1
2021-12-20 11:34:28.491 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976890144264192[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:34:28.492 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976890144264192[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:34:28.626 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127976890144264192[0;39m <==    Updates: 1
2021-12-20 11:34:28.640 INFO  com.aspect.LogAspect                              :92   [32m127976890144264192[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:34:28.641 INFO  com.aspect.LogAspect                              :93   [32m127976890144264192[0;39m ------------- 结束 耗时：335 ms -------------
2021-12-20 11:34:29.506 INFO  com.aspect.LogAspect                              :54   [32m127976895177428992[0;39m ------------- 开始 -------------
2021-12-20 11:34:29.506 INFO  com.aspect.LogAspect                              :55   [32m127976895177428992[0;39m 请求地址: http://localhost:8081/doc/vote/125274442472493056 GET
2021-12-20 11:34:29.506 INFO  com.aspect.LogAspect                              :56   [32m127976895177428992[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:34:29.506 INFO  com.aspect.LogAspect                              :57   [32m127976895177428992[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:29.506 INFO  com.aspect.LogAspect                              :80   [32m127976895177428992[0;39m 请求参数: [125274442472493056]
2021-12-20 11:34:29.567 INFO  com.Util.RedisUtil                                :31   [32m127976895177428992[0;39m key不存在，放入：DOC_VOTE_125274442472493056_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:34:29.714 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976895177428992[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:34:29.715 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976895177428992[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:34:29.869 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127976895177428992[0;39m <==    Updates: 1
2021-12-20 11:34:29.871 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976895177428992[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:34:29.871 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976895177428992[0;39m ==> Parameters: 125274442472493056(Long)
2021-12-20 11:34:29.944 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976895177428992[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:34:29.945 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127976895177428992[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 4, 4
2021-12-20 11:34:29.946 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127976895177428992[0;39m <==      Total: 1
2021-12-20 11:34:29.948 INFO  com.aspect.LogAspect                              :92   [32m127976895177428992[0;39m 返回结果: {"success":true}
2021-12-20 11:34:29.950 INFO  com.aspect.LogAspect                              :93   [32m127976895177428992[0;39m ------------- 结束 耗时：444 ms -------------
2021-12-20 11:34:29.964 INFO  com.websocket.WebSocketServer                     :71   [32m127976895177428992[0;39m 推送消息：hLyXbZA57q，内容：【test】被点赞！
2021-12-20 11:34:30.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127976897299746816[0;39m 生成今日电子书快照开始
2021-12-20 11:34:30.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976897299746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:30.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976897299746816[0;39m ==> Parameters: 
2021-12-20 11:34:30.203 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976897299746816[0;39m <==    Updates: 0
2021-12-20 11:34:30.204 INFO  com.job.EbookSnapshotJob                          :35   [32m127976897299746816[0;39m 生成今日电子书快照结束，耗时：192毫秒
2021-12-20 11:34:30.634 INFO  com.aspect.LogAspect                              :54   [32m127976899908603904[0;39m ------------- 开始 -------------
2021-12-20 11:34:30.634 INFO  com.aspect.LogAspect                              :55   [32m127976899908603904[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:34:30.634 INFO  com.aspect.LogAspect                              :56   [32m127976899908603904[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:34:30.634 INFO  com.aspect.LogAspect                              :54   [32m127976899908603905[0;39m ------------- 开始 -------------
2021-12-20 11:34:30.634 INFO  com.aspect.LogAspect                              :57   [32m127976899908603904[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:30.635 INFO  com.aspect.LogAspect                              :55   [32m127976899908603905[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:34:30.635 INFO  com.aspect.LogAspect                              :56   [32m127976899908603905[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:34:30.635 INFO  com.aspect.LogAspect                              :80   [32m127976899908603904[0;39m 请求参数: []
2021-12-20 11:34:30.635 INFO  com.aspect.LogAspect                              :57   [32m127976899908603905[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:30.635 INFO  com.aspect.LogAspect                              :80   [32m127976899908603905[0;39m 请求参数: []
2021-12-20 11:34:30.637 INFO  com.aspect.LogAspect                              :54   [32m127976899921186816[0;39m ------------- 开始 -------------
2021-12-20 11:34:30.637 INFO  com.aspect.LogAspect                              :55   [32m127976899921186816[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:34:30.637 INFO  com.aspect.LogAspect                              :56   [32m127976899921186816[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:34:30.638 INFO  com.aspect.LogAspect                              :57   [32m127976899921186816[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:30.638 INFO  com.aspect.LogAspect                              :80   [32m127976899921186816[0;39m 请求参数: []
2021-12-20 11:34:30.708 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976899908603905[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:34:30.708 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976899908603904[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:34:30.708 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976899908603905[0;39m ==> Parameters: 
2021-12-20 11:34:30.708 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976899908603904[0;39m ==> Parameters: 
2021-12-20 11:34:30.723 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976899921186816[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:34:30.723 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976899921186816[0;39m ==> Parameters: 
2021-12-20 11:34:30.800 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976899908603905[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:34:30.800 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976899908603904[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:34:30.802 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976899908603904[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:34:30.802 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976899908603905[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:34:30.802 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976899908603905[0;39m <==      Total: 1
2021-12-20 11:34:30.808 INFO  com.aspect.LogAspect                              :92   [32m127976899908603905[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:34:30.808 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976899908603904[0;39m <==        Row: 2021-12-20, 510, 179, 6, 4
2021-12-20 11:34:30.809 INFO  com.aspect.LogAspect                              :93   [32m127976899908603905[0;39m ------------- 结束 耗时：175 ms -------------
2021-12-20 11:34:30.811 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976899908603904[0;39m <==      Total: 2
2021-12-20 11:34:30.812 INFO  com.aspect.LogAspect                              :92   [32m127976899908603904[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":510,"viewIncrease":6,"voteCount":179,"voteIncrease":4}],"success":true}
2021-12-20 11:34:30.813 INFO  com.aspect.LogAspect                              :93   [32m127976899908603904[0;39m ------------- 结束 耗时：179 ms -------------
2021-12-20 11:34:30.823 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:34:30.825 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:34:30.826 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:34:30.826 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:34:30.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:34:30.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:34:30.827 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:34:30.828 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:34:30.828 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:34:30.829 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:34:30.829 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:34:30.829 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:34:30.830 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:34:30.830 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:34:30.830 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:34:30.831 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:34:30.831 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:34:30.831 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:34:30.831 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:34:30.832 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976899921186816[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:34:30.832 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976899921186816[0;39m <==      Total: 19
2021-12-20 11:34:30.834 INFO  com.aspect.LogAspect                              :92   [32m127976899921186816[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:34:30.834 INFO  com.aspect.LogAspect                              :93   [32m127976899921186816[0;39m ------------- 结束 耗时：197 ms -------------
2021-12-20 11:34:34.830 INFO  com.aspect.LogAspect                              :54   [32m127976917507903488[0;39m ------------- 开始 -------------
2021-12-20 11:34:34.830 INFO  com.aspect.LogAspect                              :55   [32m127976917507903488[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:34:34.830 INFO  com.aspect.LogAspect                              :56   [32m127976917507903488[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:34:34.831 INFO  com.aspect.LogAspect                              :57   [32m127976917507903488[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:34.831 INFO  com.aspect.LogAspect                              :80   [32m127976917507903488[0;39m 请求参数: [{"categoryId2":115484763686572032,"page":1,"size":1000}]
2021-12-20 11:34:34.918 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976917507903488[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:34:34.918 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976917507903488[0;39m ==> Parameters: 115484763686572032(Long)
2021-12-20 11:34:34.998 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976917507903488[0;39m <==    Columns: count(0)
2021-12-20 11:34:34.998 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976917507903488[0;39m <==        Row: 1
2021-12-20 11:34:34.999 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976917507903488[0;39m <==      Total: 1
2021-12-20 11:34:35.002 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976917507903488[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:34:35.003 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976917507903488[0;39m ==> Parameters: 115484763686572032(Long), 1000(Integer)
2021-12-20 11:34:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127976918279655424[0;39m 生成今日电子书快照开始
2021-12-20 11:34:35.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976918279655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:35.088 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976917507903488[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:34:35.089 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976917507903488[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-20 11:34:35.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976918279655424[0;39m ==> Parameters: 
2021-12-20 11:34:35.090 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976917507903488[0;39m <==      Total: 1
2021-12-20 11:34:35.091 INFO  com.servicess.EbookService                        :48   [32m127976917507903488[0;39m 总行数：1
2021-12-20 11:34:35.092 INFO  com.servicess.EbookService                        :49   [32m127976917507903488[0;39m 总页数：1
2021-12-20 11:34:35.093 INFO  com.aspect.LogAspect                              :92   [32m127976917507903488[0;39m 返回结果: {"content":{"list":[{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":1},"success":true}
2021-12-20 11:34:35.094 INFO  com.aspect.LogAspect                              :93   [32m127976917507903488[0;39m ------------- 结束 耗时：264 ms -------------
2021-12-20 11:34:35.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976918279655424[0;39m <==    Updates: 0
2021-12-20 11:34:35.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127976918279655424[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 11:34:35.256 INFO  com.job.DocJob                                    :32   [32m127976919294676992[0;39m 更新电子书下的文档数据开始
2021-12-20 11:34:35.257 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976919294676992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:34:35.258 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976919294676992[0;39m ==> Parameters: 
2021-12-20 11:34:35.396 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127976919294676992[0;39m <==    Updates: 3
2021-12-20 11:34:35.397 INFO  com.job.DocJob                                    :35   [32m127976919294676992[0;39m 更新电子书下的文档数据结束，耗时：140毫秒
2021-12-20 11:34:39.118 INFO  com.aspect.LogAspect                              :54   [32m127976935493079040[0;39m ------------- 开始 -------------
2021-12-20 11:34:39.119 INFO  com.aspect.LogAspect                              :55   [32m127976935493079040[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:34:39.119 INFO  com.aspect.LogAspect                              :56   [32m127976935493079040[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:34:39.119 INFO  com.aspect.LogAspect                              :57   [32m127976935493079040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:39.121 INFO  com.aspect.LogAspect                              :80   [32m127976935493079040[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 11:34:39.203 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127976935493079040[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:34:39.204 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127976935493079040[0;39m ==> Parameters: test123(String)
2021-12-20 11:34:39.284 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127976935493079040[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:34:39.285 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127976935493079040[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:34:39.287 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127976935493079040[0;39m <==      Total: 1
2021-12-20 11:34:39.311 INFO  com.controller.UserController                     :77   [32m127976935493079040[0;39m 生成单点登录token:127976936302579712,并放入redis中
2021-12-20 11:34:39.363 INFO  com.aspect.LogAspect                              :92   [32m127976935493079040[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127976936302579712"},"success":true}
2021-12-20 11:34:39.363 INFO  com.aspect.LogAspect                              :93   [32m127976935493079040[0;39m ------------- 结束 耗时：245 ms -------------
2021-12-20 11:34:39.479 INFO  com.websocket.WebSocketServer                     :41   [32m127976830127968256[0;39m 连接关闭，token：hLyXbZA57q，session id：5！当前连接数：0
2021-12-20 11:34:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127976939230203904[0;39m 生成今日电子书快照开始
2021-12-20 11:34:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976939230203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:40.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976939230203904[0;39m ==> Parameters: 
2021-12-20 11:34:40.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976939230203904[0;39m <==    Updates: 0
2021-12-20 11:34:40.255 INFO  com.job.EbookSnapshotJob                          :35   [32m127976939230203904[0;39m 生成今日电子书快照结束，耗时：246毫秒
2021-12-20 11:34:40.565 INFO  com.websocket.WebSocketServer                     :32   [32m127976880522530816[0;39m 有新连接：token：PHtT7sim5e，session id：6，当前连接数：1
2021-12-20 11:34:40.646 INFO  com.aspect.LogAspect                              :54   [32m127976941901975552[0;39m ------------- 开始 -------------
2021-12-20 11:34:40.646 INFO  com.aspect.LogAspect                              :55   [32m127976941901975552[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:34:40.646 INFO  com.aspect.LogAspect                              :56   [32m127976941901975552[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:34:40.647 INFO  com.aspect.LogAspect                              :57   [32m127976941901975552[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:40.647 INFO  com.aspect.LogAspect                              :80   [32m127976941901975552[0;39m 请求参数: []
2021-12-20 11:34:40.647 INFO  com.aspect.LogAspect                              :54   [32m127976941906169856[0;39m ------------- 开始 -------------
2021-12-20 11:34:40.647 INFO  com.aspect.LogAspect                              :55   [32m127976941906169856[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:34:40.647 INFO  com.aspect.LogAspect                              :56   [32m127976941906169856[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:34:40.647 INFO  com.aspect.LogAspect                              :57   [32m127976941906169856[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:40.648 INFO  com.aspect.LogAspect                              :80   [32m127976941906169856[0;39m 请求参数: []
2021-12-20 11:34:40.650 INFO  com.aspect.LogAspect                              :54   [32m127976941918752768[0;39m ------------- 开始 -------------
2021-12-20 11:34:40.650 INFO  com.aspect.LogAspect                              :55   [32m127976941918752768[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:34:40.651 INFO  com.aspect.LogAspect                              :56   [32m127976941918752768[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:34:40.651 INFO  com.aspect.LogAspect                              :57   [32m127976941918752768[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:40.651 INFO  com.aspect.LogAspect                              :80   [32m127976941918752768[0;39m 请求参数: []
2021-12-20 11:34:40.717 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976941901975552[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:34:40.717 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976941901975552[0;39m ==> Parameters: 
2021-12-20 11:34:40.733 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976941918752768[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:34:40.734 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976941918752768[0;39m ==> Parameters: 
2021-12-20 11:34:40.763 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976941906169856[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:34:40.763 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976941906169856[0;39m ==> Parameters: 
2021-12-20 11:34:40.794 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976941901975552[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:34:40.795 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976941901975552[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:34:40.795 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127976941901975552[0;39m <==        Row: 2021-12-20, 511, 180, 7, 5
2021-12-20 11:34:40.796 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127976941901975552[0;39m <==      Total: 2
2021-12-20 11:34:40.796 INFO  com.aspect.LogAspect                              :92   [32m127976941901975552[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":511,"viewIncrease":7,"voteCount":180,"voteIncrease":5}],"success":true}
2021-12-20 11:34:40.796 INFO  com.aspect.LogAspect                              :93   [32m127976941901975552[0;39m ------------- 结束 耗时：150 ms -------------
2021-12-20 11:34:40.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:34:40.844 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976941906169856[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:34:40.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:34:40.844 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127976941906169856[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:34:40.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:34:40.845 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127976941906169856[0;39m <==      Total: 1
2021-12-20 11:34:40.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:34:40.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:34:40.845 INFO  com.aspect.LogAspect                              :92   [32m127976941906169856[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:34:40.845 INFO  com.aspect.LogAspect                              :93   [32m127976941906169856[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-20 11:34:40.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:34:40.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:34:40.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:34:40.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:34:40.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:34:40.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:34:40.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:34:40.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:34:40.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:34:40.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:34:40.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:34:40.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:34:40.849 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:34:40.849 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:34:40.850 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976941918752768[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:34:40.850 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976941918752768[0;39m <==      Total: 19
2021-12-20 11:34:40.852 INFO  com.aspect.LogAspect                              :92   [32m127976941918752768[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:34:40.852 INFO  com.aspect.LogAspect                              :93   [32m127976941918752768[0;39m ------------- 结束 耗时：202 ms -------------
2021-12-20 11:34:40.866 INFO  com.aspect.LogAspect                              :54   [32m127976942824722432[0;39m ------------- 开始 -------------
2021-12-20 11:34:40.867 INFO  com.aspect.LogAspect                              :55   [32m127976942824722432[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:34:40.867 INFO  com.aspect.LogAspect                              :56   [32m127976942824722432[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:34:40.867 INFO  com.aspect.LogAspect                              :57   [32m127976942824722432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:40.867 INFO  com.aspect.LogAspect                              :80   [32m127976942824722432[0;39m 请求参数: []
2021-12-20 11:34:40.867 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976942824722432[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:34:40.868 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976942824722432[0;39m ==> Parameters: 
2021-12-20 11:34:40.961 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:34:40.962 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:34:40.963 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:34:40.963 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:34:40.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:34:40.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:34:40.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:34:40.965 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:34:40.967 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:34:40.968 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:34:40.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:34:40.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:34:40.973 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:34:40.974 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:34:40.975 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:34:40.975 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:34:40.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:34:40.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:34:40.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:34:40.977 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127976942824722432[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:34:40.977 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127976942824722432[0;39m <==      Total: 19
2021-12-20 11:34:40.980 INFO  com.aspect.LogAspect                              :92   [32m127976942824722432[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:34:40.981 INFO  com.aspect.LogAspect                              :93   [32m127976942824722432[0;39m ------------- 结束 耗时：115 ms -------------
2021-12-20 11:34:41.022 INFO  com.aspect.LogAspect                              :54   [32m127976943479033856[0;39m ------------- 开始 -------------
2021-12-20 11:34:41.022 INFO  com.aspect.LogAspect                              :55   [32m127976943479033856[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:34:41.022 INFO  com.aspect.LogAspect                              :56   [32m127976943479033856[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:34:41.022 INFO  com.aspect.LogAspect                              :57   [32m127976943479033856[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:41.023 INFO  com.aspect.LogAspect                              :80   [32m127976943479033856[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:34:41.025 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976943479033856[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 11:34:41.025 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976943479033856[0;39m ==> Parameters: 
2021-12-20 11:34:41.095 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976943479033856[0;39m <==    Columns: count(0)
2021-12-20 11:34:41.096 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127976943479033856[0;39m <==        Row: 6
2021-12-20 11:34:41.096 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127976943479033856[0;39m <==      Total: 1
2021-12-20 11:34:41.097 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976943479033856[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 11:34:41.098 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976943479033856[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:34:41.164 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:34:41.166 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 102, 22
2021-12-20 11:34:41.167 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 81, 32
2021-12-20 11:34:41.169 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 11:34:41.170 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-20 11:34:41.172 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-20 11:34:41.173 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127976943479033856[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-20 11:34:41.174 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127976943479033856[0;39m <==      Total: 6
2021-12-20 11:34:41.175 INFO  com.servicess.EbookService                        :48   [32m127976943479033856[0;39m 总行数：6
2021-12-20 11:34:41.176 INFO  com.servicess.EbookService                        :49   [32m127976943479033856[0;39m 总页数：1
2021-12-20 11:34:41.179 INFO  com.aspect.LogAspect                              :92   [32m127976943479033856[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":102,"voteCount":22},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":81,"voteCount":32},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-20 11:34:41.180 INFO  com.aspect.LogAspect                              :93   [32m127976943479033856[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-20 11:34:44.032 INFO  com.aspect.LogAspect                              :54   [32m127976956103888896[0;39m ------------- 开始 -------------
2021-12-20 11:34:44.033 INFO  com.aspect.LogAspect                              :55   [32m127976956103888896[0;39m 请求地址: http://localhost:8081/doc/all/117509669114744832 GET
2021-12-20 11:34:44.033 INFO  com.aspect.LogAspect                              :56   [32m127976956103888896[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:34:44.033 INFO  com.aspect.LogAspect                              :57   [32m127976956103888896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:44.033 INFO  com.aspect.LogAspect                              :80   [32m127976956103888896[0;39m 请求参数: [117509669114744832]
2021-12-20 11:34:44.114 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976956103888896[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:34:44.114 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976956103888896[0;39m ==> Parameters: 117509669114744832(Long)
2021-12-20 11:34:44.194 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127976956103888896[0;39m <==      Total: 0
2021-12-20 11:34:44.195 INFO  com.aspect.LogAspect                              :92   [32m127976956103888896[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:34:44.195 INFO  com.aspect.LogAspect                              :93   [32m127976956103888896[0;39m ------------- 结束 耗时：163 ms -------------
2021-12-20 11:34:45.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127976960193335296[0;39m 生成今日电子书快照开始
2021-12-20 11:34:45.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976960193335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:45.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976960193335296[0;39m ==> Parameters: 
2021-12-20 11:34:45.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976960193335296[0;39m <==    Updates: 0
2021-12-20 11:34:45.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127976960193335296[0;39m 生成今日电子书快照结束，耗时：227毫秒
2021-12-20 11:34:50.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127976981169049600[0;39m 生成今日电子书快照开始
2021-12-20 11:34:50.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976981169049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:50.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976981169049600[0;39m ==> Parameters: 
2021-12-20 11:34:50.231 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127976981169049600[0;39m <==    Updates: 0
2021-12-20 11:34:50.231 INFO  com.job.EbookSnapshotJob                          :35   [32m127976981169049600[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:34:55.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127977002136375296[0;39m 生成今日电子书快照开始
2021-12-20 11:34:55.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977002136375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:34:55.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977002136375296[0;39m ==> Parameters: 
2021-12-20 11:34:55.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977002136375296[0;39m <==    Updates: 0
2021-12-20 11:34:55.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127977002136375296[0;39m 生成今日电子书快照结束，耗时：229毫秒
2021-12-20 11:34:58.931 INFO  com.interceptor.LoginInterceptor                  :29   [32m127976941906169856[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 11:34:58.931 INFO  com.interceptor.LoginInterceptor                  :65   [32m127976941906169856[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-20 11:34:58.935 INFO  com.interceptor.LoginInterceptor                  :29   [32m127976941918752768[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 11:34:58.935 INFO  com.interceptor.LoginInterceptor                  :40   [32m127976941918752768[0;39m 接口登录拦截：，path：http://localhost:8081/doc/save
2021-12-20 11:34:58.935 INFO  com.interceptor.LoginInterceptor                  :44   [32m127976941918752768[0;39m 登录校验开始，token：127976936302579712
2021-12-20 11:34:59.015 INFO  com.interceptor.LoginInterceptor                  :56   [32m127976941918752768[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127976936302579712"}
2021-12-20 11:34:59.059 INFO  com.aspect.LogAspect                              :54   [32m127977019131695104[0;39m ------------- 开始 -------------
2021-12-20 11:34:59.060 INFO  com.aspect.LogAspect                              :55   [32m127977019131695104[0;39m 请求地址: http://localhost:8081/doc/save POST
2021-12-20 11:34:59.060 INFO  com.aspect.LogAspect                              :56   [32m127977019131695104[0;39m 类名方法: com.controller.DocController.save
2021-12-20 11:34:59.060 INFO  com.aspect.LogAspect                              :57   [32m127977019131695104[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:59.064 INFO  com.aspect.LogAspect                              :80   [32m127977019131695104[0;39m 请求参数: [{"content":"","ebookId":117509669114744832,"name":"测试文档","parent":0,"sort":1}]
2021-12-20 11:34:59.260 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977019131695104[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2021-12-20 11:34:59.262 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977019131695104[0;39m ==> Parameters: 127977019945390080(Long), 117509669114744832(Long), 0(Long), 测试文档(String), 1(Integer), 0(Integer), 0(Integer)
2021-12-20 11:34:59.420 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977019131695104[0;39m <==    Updates: 1
2021-12-20 11:34:59.423 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977019131695104[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2021-12-20 11:34:59.424 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977019131695104[0;39m ==> Parameters: 127977019945390080(Long), (String)
2021-12-20 11:34:59.594 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977019131695104[0;39m <==    Updates: 1
2021-12-20 11:34:59.726 INFO  com.aspect.LogAspect                              :92   [32m127977019131695104[0;39m 返回结果: {"success":true}
2021-12-20 11:34:59.727 INFO  com.aspect.LogAspect                              :93   [32m127977019131695104[0;39m ------------- 结束 耗时：668 ms -------------
2021-12-20 11:34:59.728 INFO  com.interceptor.LoginInterceptor                  :65   [32m127977019131695104[0;39m ------------- LoginInterceptor 结束 耗时：793 ms -------------
2021-12-20 11:34:59.758 INFO  com.aspect.LogAspect                              :54   [32m127977022063513600[0;39m ------------- 开始 -------------
2021-12-20 11:34:59.759 INFO  com.aspect.LogAspect                              :55   [32m127977022063513600[0;39m 请求地址: http://localhost:8081/doc/all/117509669114744832 GET
2021-12-20 11:34:59.759 INFO  com.aspect.LogAspect                              :56   [32m127977022063513600[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:34:59.759 INFO  com.aspect.LogAspect                              :57   [32m127977022063513600[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:34:59.759 INFO  com.aspect.LogAspect                              :80   [32m127977022063513600[0;39m 请求参数: [117509669114744832]
2021-12-20 11:34:59.760 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977022063513600[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:34:59.761 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977022063513600[0;39m ==> Parameters: 117509669114744832(Long)
2021-12-20 11:34:59.887 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977022063513600[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:34:59.887 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977022063513600[0;39m <==        Row: 127977019945390080, 117509669114744832, 0, 测试文档, 1, 0, 0
2021-12-20 11:34:59.888 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977022063513600[0;39m <==      Total: 1
2021-12-20 11:34:59.890 INFO  com.aspect.LogAspect                              :92   [32m127977022063513600[0;39m 返回结果: {"content":[{"ebookId":117509669114744832,"id":127977019945390080,"name":"测试文档","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-12-20 11:34:59.890 INFO  com.aspect.LogAspect                              :93   [32m127977022063513600[0;39m ------------- 结束 耗时：132 ms -------------
2021-12-20 11:35:00.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127977023086923776[0;39m 生成今日电子书快照开始
2021-12-20 11:35:00.003 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977023086923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:00.003 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977023086923776[0;39m ==> Parameters: 
2021-12-20 11:35:00.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977023086923776[0;39m <==    Updates: 0
2021-12-20 11:35:00.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127977023086923776[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-20 11:35:05.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127977044071026688[0;39m 生成今日电子书快照开始
2021-12-20 11:35:05.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977044071026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:05.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977044071026688[0;39m ==> Parameters: 
2021-12-20 11:35:05.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977044071026688[0;39m <==    Updates: 0
2021-12-20 11:35:05.228 INFO  com.job.EbookSnapshotJob                          :35   [32m127977044071026688[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:35:05.229 INFO  com.job.DocJob                                    :32   [32m127977045010550784[0;39m 更新电子书下的文档数据开始
2021-12-20 11:35:05.231 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977045010550784[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:35:05.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977045010550784[0;39m ==> Parameters: 
2021-12-20 11:35:05.385 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977045010550784[0;39m <==    Updates: 4
2021-12-20 11:35:05.385 INFO  com.job.DocJob                                    :35   [32m127977045010550784[0;39m 更新电子书下的文档数据结束，耗时：155毫秒
2021-12-20 11:35:07.443 INFO  com.aspect.LogAspect                              :54   [32m127977054296739840[0;39m ------------- 开始 -------------
2021-12-20 11:35:07.443 INFO  com.aspect.LogAspect                              :55   [32m127977054296739840[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:35:07.443 INFO  com.aspect.LogAspect                              :56   [32m127977054296739840[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:35:07.443 INFO  com.aspect.LogAspect                              :57   [32m127977054296739840[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:07.444 INFO  com.aspect.LogAspect                              :80   [32m127977054296739840[0;39m 请求参数: []
2021-12-20 11:35:07.519 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977054296739840[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:35:07.519 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977054296739840[0;39m ==> Parameters: 
2021-12-20 11:35:07.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:35:07.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:35:07.602 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:35:07.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:35:07.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:35:07.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:35:07.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:35:07.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:35:07.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:35:07.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:35:07.606 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:35:07.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:35:07.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:35:07.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:35:07.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:35:07.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:35:07.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:35:07.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:35:07.609 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:35:07.610 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977054296739840[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:35:07.611 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977054296739840[0;39m <==      Total: 19
2021-12-20 11:35:07.613 INFO  com.aspect.LogAspect                              :92   [32m127977054296739840[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:35:07.614 INFO  com.aspect.LogAspect                              :93   [32m127977054296739840[0;39m ------------- 结束 耗时：171 ms -------------
2021-12-20 11:35:07.635 INFO  com.aspect.LogAspect                              :54   [32m127977055102046208[0;39m ------------- 开始 -------------
2021-12-20 11:35:07.635 INFO  com.aspect.LogAspect                              :55   [32m127977055102046208[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:35:07.635 INFO  com.aspect.LogAspect                              :56   [32m127977055102046208[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:35:07.635 INFO  com.aspect.LogAspect                              :57   [32m127977055102046208[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:07.636 INFO  com.aspect.LogAspect                              :80   [32m127977055102046208[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:35:07.711 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977055102046208[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 11:35:07.711 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977055102046208[0;39m ==> Parameters: 
2021-12-20 11:35:07.791 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977055102046208[0;39m <==    Columns: count(0)
2021-12-20 11:35:07.792 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977055102046208[0;39m <==        Row: 6
2021-12-20 11:35:07.793 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977055102046208[0;39m <==      Total: 1
2021-12-20 11:35:07.795 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977055102046208[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 11:35:07.796 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977055102046208[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:35:07.864 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:35:07.865 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 102, 22
2021-12-20 11:35:07.865 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 81, 32
2021-12-20 11:35:07.866 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 11:35:07.866 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-20 11:35:07.868 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-20 11:35:07.869 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977055102046208[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 11:35:07.870 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977055102046208[0;39m <==      Total: 6
2021-12-20 11:35:07.870 INFO  com.servicess.EbookService                        :48   [32m127977055102046208[0;39m 总行数：6
2021-12-20 11:35:07.870 INFO  com.servicess.EbookService                        :49   [32m127977055102046208[0;39m 总页数：1
2021-12-20 11:35:07.873 INFO  com.aspect.LogAspect                              :92   [32m127977055102046208[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":102,"voteCount":22},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":81,"voteCount":32},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 11:35:07.873 INFO  com.aspect.LogAspect                              :93   [32m127977055102046208[0;39m ------------- 结束 耗时：238 ms -------------
2021-12-20 11:35:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127977065080295424[0;39m 生成今日电子书快照开始
2021-12-20 11:35:10.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977065080295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:10.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977065080295424[0;39m ==> Parameters: 
2021-12-20 11:35:10.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977065080295424[0;39m <==    Updates: 0
2021-12-20 11:35:10.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127977065080295424[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:35:12.116 INFO  com.aspect.LogAspect                              :54   [32m127977073896722432[0;39m ------------- 开始 -------------
2021-12-20 11:35:12.117 INFO  com.aspect.LogAspect                              :55   [32m127977073896722432[0;39m 请求地址: http://localhost:8081/doc/all/5 GET
2021-12-20 11:35:12.117 INFO  com.aspect.LogAspect                              :56   [32m127977073896722432[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:35:12.117 INFO  com.aspect.LogAspect                              :57   [32m127977073896722432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:12.117 INFO  com.aspect.LogAspect                              :80   [32m127977073896722432[0;39m 请求参数: [5]
2021-12-20 11:35:12.190 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977073896722432[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:35:12.191 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977073896722432[0;39m ==> Parameters: 5(Long)
2021-12-20 11:35:12.280 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977073896722432[0;39m <==      Total: 0
2021-12-20 11:35:12.282 INFO  com.aspect.LogAspect                              :92   [32m127977073896722432[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:35:12.282 INFO  com.aspect.LogAspect                              :93   [32m127977073896722432[0;39m ------------- 结束 耗时：166 ms -------------
2021-12-20 11:35:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127977086009872384[0;39m 生成今日电子书快照开始
2021-12-20 11:35:15.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977086009872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:15.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977086009872384[0;39m ==> Parameters: 
2021-12-20 11:35:15.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977086009872384[0;39m <==    Updates: 0
2021-12-20 11:35:15.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127977086009872384[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:35:19.835 INFO  com.interceptor.LoginInterceptor                  :29   [32m127976880522530816[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 11:35:19.835 INFO  com.interceptor.LoginInterceptor                  :40   [32m127976880522530816[0;39m 接口登录拦截：，path：http://localhost:8081/doc/save
2021-12-20 11:35:19.835 INFO  com.interceptor.LoginInterceptor                  :44   [32m127976880522530816[0;39m 登录校验开始，token：127976936302579712
2021-12-20 11:35:19.880 INFO  com.interceptor.LoginInterceptor                  :56   [32m127976880522530816[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127976936302579712"}
2021-12-20 11:35:19.881 INFO  com.aspect.LogAspect                              :54   [32m127977106465492992[0;39m ------------- 开始 -------------
2021-12-20 11:35:19.881 INFO  com.aspect.LogAspect                              :55   [32m127977106465492992[0;39m 请求地址: http://localhost:8081/doc/save POST
2021-12-20 11:35:19.882 INFO  com.aspect.LogAspect                              :56   [32m127977106465492992[0;39m 类名方法: com.controller.DocController.save
2021-12-20 11:35:19.882 INFO  com.aspect.LogAspect                              :57   [32m127977106465492992[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:19.883 INFO  com.aspect.LogAspect                              :80   [32m127977106465492992[0;39m 请求参数: [{"content":"","ebookId":5,"name":"文档1","parent":0,"sort":1}]
2021-12-20 11:35:20.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127977106993975296[0;39m 生成今日电子书快照开始
2021-12-20 11:35:20.021 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977106465492992[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2021-12-20 11:35:20.023 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977106465492992[0;39m ==> Parameters: 127977107048501248(Long), 5(Long), 0(Long), 文档1(String), 1(Integer), 0(Integer), 0(Integer)
2021-12-20 11:35:20.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977106993975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:20.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977106993975296[0;39m ==> Parameters: 
2021-12-20 11:35:20.202 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977106465492992[0;39m <==    Updates: 1
2021-12-20 11:35:20.202 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977106465492992[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2021-12-20 11:35:20.204 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977106465492992[0;39m ==> Parameters: 127977107048501248(Long), (String)
2021-12-20 11:35:20.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977106993975296[0;39m <==    Updates: 0
2021-12-20 11:35:20.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127977106993975296[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 11:35:20.352 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977106465492992[0;39m <==    Updates: 1
2021-12-20 11:35:20.534 INFO  com.aspect.LogAspect                              :92   [32m127977106465492992[0;39m 返回结果: {"success":true}
2021-12-20 11:35:20.535 INFO  com.aspect.LogAspect                              :93   [32m127977106465492992[0;39m ------------- 结束 耗时：654 ms -------------
2021-12-20 11:35:20.539 INFO  com.interceptor.LoginInterceptor                  :65   [32m127977106465492992[0;39m ------------- LoginInterceptor 结束 耗时：704 ms -------------
2021-12-20 11:35:20.573 INFO  com.aspect.LogAspect                              :54   [32m127977109367951360[0;39m ------------- 开始 -------------
2021-12-20 11:35:20.573 INFO  com.aspect.LogAspect                              :55   [32m127977109367951360[0;39m 请求地址: http://localhost:8081/doc/all/5 GET
2021-12-20 11:35:20.573 INFO  com.aspect.LogAspect                              :56   [32m127977109367951360[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:35:20.574 INFO  com.aspect.LogAspect                              :57   [32m127977109367951360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:20.574 INFO  com.aspect.LogAspect                              :80   [32m127977109367951360[0;39m 请求参数: [5]
2021-12-20 11:35:20.641 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977109367951360[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:35:20.641 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977109367951360[0;39m ==> Parameters: 5(Long)
2021-12-20 11:35:20.720 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977109367951360[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:35:20.720 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977109367951360[0;39m <==        Row: 127977107048501248, 5, 0, 文档1, 1, 0, 0
2021-12-20 11:35:20.720 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977109367951360[0;39m <==      Total: 1
2021-12-20 11:35:20.721 INFO  com.aspect.LogAspect                              :92   [32m127977109367951360[0;39m 返回结果: {"content":[{"ebookId":5,"id":127977107048501248,"name":"文档1","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-12-20 11:35:20.721 INFO  com.aspect.LogAspect                              :93   [32m127977109367951360[0;39m ------------- 结束 耗时：148 ms -------------
2021-12-20 11:35:22.161 INFO  com.aspect.LogAspect                              :54   [32m127977116028506112[0;39m ------------- 开始 -------------
2021-12-20 11:35:22.162 INFO  com.aspect.LogAspect                              :55   [32m127977116028506112[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:35:22.162 INFO  com.aspect.LogAspect                              :56   [32m127977116028506112[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:35:22.162 INFO  com.aspect.LogAspect                              :57   [32m127977116028506112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:22.163 INFO  com.aspect.LogAspect                              :80   [32m127977116028506112[0;39m 请求参数: []
2021-12-20 11:35:22.230 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977116028506112[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:35:22.231 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977116028506112[0;39m ==> Parameters: 
2021-12-20 11:35:22.310 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:35:22.310 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:35:22.311 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:35:22.311 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:35:22.312 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:35:22.313 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:35:22.314 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:35:22.316 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:35:22.320 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:35:22.322 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:35:22.324 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:35:22.325 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:35:22.327 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:35:22.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:35:22.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:35:22.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:35:22.330 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:35:22.332 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:35:22.333 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:35:22.335 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977116028506112[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:35:22.336 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977116028506112[0;39m <==      Total: 19
2021-12-20 11:35:22.340 INFO  com.aspect.LogAspect                              :92   [32m127977116028506112[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:35:22.341 INFO  com.aspect.LogAspect                              :93   [32m127977116028506112[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-20 11:35:22.378 INFO  com.aspect.LogAspect                              :54   [32m127977116938670080[0;39m ------------- 开始 -------------
2021-12-20 11:35:22.379 INFO  com.aspect.LogAspect                              :55   [32m127977116938670080[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:35:22.379 INFO  com.aspect.LogAspect                              :56   [32m127977116938670080[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:35:22.380 INFO  com.aspect.LogAspect                              :57   [32m127977116938670080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:22.380 INFO  com.aspect.LogAspect                              :80   [32m127977116938670080[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:35:22.455 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977116938670080[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 11:35:22.455 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977116938670080[0;39m ==> Parameters: 
2021-12-20 11:35:22.533 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977116938670080[0;39m <==    Columns: count(0)
2021-12-20 11:35:22.534 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977116938670080[0;39m <==        Row: 6
2021-12-20 11:35:22.535 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977116938670080[0;39m <==      Total: 1
2021-12-20 11:35:22.537 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977116938670080[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 11:35:22.537 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977116938670080[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:35:22.621 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:35:22.622 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 102, 22
2021-12-20 11:35:22.624 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 81, 32
2021-12-20 11:35:22.625 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 11:35:22.625 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-20 11:35:22.626 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-20 11:35:22.627 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977116938670080[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 11:35:22.628 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977116938670080[0;39m <==      Total: 6
2021-12-20 11:35:22.631 INFO  com.servicess.EbookService                        :48   [32m127977116938670080[0;39m 总行数：6
2021-12-20 11:35:22.632 INFO  com.servicess.EbookService                        :49   [32m127977116938670080[0;39m 总页数：1
2021-12-20 11:35:22.636 INFO  com.aspect.LogAspect                              :92   [32m127977116938670080[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":102,"voteCount":22},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":81,"voteCount":32},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 11:35:22.637 INFO  com.aspect.LogAspect                              :93   [32m127977116938670080[0;39m ------------- 结束 耗时：259 ms -------------
2021-12-20 11:35:25.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127977127940329472[0;39m 生成今日电子书快照开始
2021-12-20 11:35:25.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977127940329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:25.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977127940329472[0;39m ==> Parameters: 
2021-12-20 11:35:25.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977127940329472[0;39m <==    Updates: 0
2021-12-20 11:35:25.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127977127940329472[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:35:25.826 INFO  com.aspect.LogAspect                              :54   [32m127977131400630272[0;39m ------------- 开始 -------------
2021-12-20 11:35:25.826 INFO  com.aspect.LogAspect                              :55   [32m127977131400630272[0;39m 请求地址: http://localhost:8081/doc/all/3 GET
2021-12-20 11:35:25.826 INFO  com.aspect.LogAspect                              :56   [32m127977131400630272[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:35:25.827 INFO  com.aspect.LogAspect                              :57   [32m127977131400630272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:25.827 INFO  com.aspect.LogAspect                              :80   [32m127977131400630272[0;39m 请求参数: [3]
2021-12-20 11:35:25.896 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977131400630272[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:35:25.897 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977131400630272[0;39m ==> Parameters: 3(Long)
2021-12-20 11:35:25.967 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977131400630272[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:35:25.968 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977131400630272[0;39m <==        Row: 125274442472493056, 3, 0, test, 1, 4, 4
2021-12-20 11:35:25.969 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977131400630272[0;39m <==      Total: 1
2021-12-20 11:35:25.970 INFO  com.aspect.LogAspect                              :92   [32m127977131400630272[0;39m 返回结果: {"content":[{"ebookId":3,"id":125274442472493056,"name":"test","parent":0,"sort":1,"viewCount":4,"voteCount":4}],"success":true}
2021-12-20 11:35:25.971 INFO  com.aspect.LogAspect                              :93   [32m127977131400630272[0;39m ------------- 结束 耗时：145 ms -------------
2021-12-20 11:35:27.601 INFO  com.aspect.LogAspect                              :54   [32m127977138845519872[0;39m ------------- 开始 -------------
2021-12-20 11:35:27.601 INFO  com.aspect.LogAspect                              :55   [32m127977138845519872[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:35:27.602 INFO  com.aspect.LogAspect                              :56   [32m127977138845519872[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:35:27.602 INFO  com.aspect.LogAspect                              :57   [32m127977138845519872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:27.602 INFO  com.aspect.LogAspect                              :80   [32m127977138845519872[0;39m 请求参数: []
2021-12-20 11:35:27.671 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977138845519872[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:35:27.671 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977138845519872[0;39m ==> Parameters: 
2021-12-20 11:35:27.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:35:27.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:35:27.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:35:27.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:35:27.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:35:27.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:35:27.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:35:27.755 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:35:27.756 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:35:27.756 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:35:27.757 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:35:27.759 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:35:27.761 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:35:27.762 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:35:27.763 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:35:27.764 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:35:27.765 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:35:27.766 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:35:27.766 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:35:27.767 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977138845519872[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:35:27.767 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977138845519872[0;39m <==      Total: 19
2021-12-20 11:35:27.769 INFO  com.aspect.LogAspect                              :92   [32m127977138845519872[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:35:27.769 INFO  com.aspect.LogAspect                              :93   [32m127977138845519872[0;39m ------------- 结束 耗时：168 ms -------------
2021-12-20 11:35:27.786 INFO  com.aspect.LogAspect                              :54   [32m127977139617271808[0;39m ------------- 开始 -------------
2021-12-20 11:35:27.786 INFO  com.aspect.LogAspect                              :55   [32m127977139617271808[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:35:27.786 INFO  com.aspect.LogAspect                              :56   [32m127977139617271808[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:35:27.786 INFO  com.aspect.LogAspect                              :57   [32m127977139617271808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:27.786 INFO  com.aspect.LogAspect                              :80   [32m127977139617271808[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:35:27.878 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977139617271808[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 11:35:27.879 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977139617271808[0;39m ==> Parameters: 
2021-12-20 11:35:27.945 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977139617271808[0;39m <==    Columns: count(0)
2021-12-20 11:35:27.946 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977139617271808[0;39m <==        Row: 6
2021-12-20 11:35:27.947 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977139617271808[0;39m <==      Total: 1
2021-12-20 11:35:27.949 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977139617271808[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 11:35:27.951 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977139617271808[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:35:28.037 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:35:28.037 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 102, 22
2021-12-20 11:35:28.038 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 81, 32
2021-12-20 11:35:28.039 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 11:35:28.039 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-20 11:35:28.040 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-20 11:35:28.042 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977139617271808[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 11:35:28.043 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977139617271808[0;39m <==      Total: 6
2021-12-20 11:35:28.044 INFO  com.servicess.EbookService                        :48   [32m127977139617271808[0;39m 总行数：6
2021-12-20 11:35:28.046 INFO  com.servicess.EbookService                        :49   [32m127977139617271808[0;39m 总页数：1
2021-12-20 11:35:28.049 INFO  com.aspect.LogAspect                              :92   [32m127977139617271808[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":102,"voteCount":22},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":81,"voteCount":32},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 11:35:28.049 INFO  com.aspect.LogAspect                              :93   [32m127977139617271808[0;39m ------------- 结束 耗时：264 ms -------------
2021-12-20 11:35:30.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127977148920238080[0;39m 生成今日电子书快照开始
2021-12-20 11:35:30.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977148920238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:30.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977148920238080[0;39m ==> Parameters: 
2021-12-20 11:35:30.114 INFO  com.aspect.LogAspect                              :54   [32m127977149385805824[0;39m ------------- 开始 -------------
2021-12-20 11:35:30.114 INFO  com.aspect.LogAspect                              :55   [32m127977149385805824[0;39m 请求地址: http://localhost:8081/doc/all/4 GET
2021-12-20 11:35:30.115 INFO  com.aspect.LogAspect                              :56   [32m127977149385805824[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:35:30.115 INFO  com.aspect.LogAspect                              :57   [32m127977149385805824[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:30.115 INFO  com.aspect.LogAspect                              :80   [32m127977149385805824[0;39m 请求参数: [4]
2021-12-20 11:35:30.208 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977149385805824[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:35:30.209 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977149385805824[0;39m ==> Parameters: 4(Long)
2021-12-20 11:35:30.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977148920238080[0;39m <==    Updates: 0
2021-12-20 11:35:30.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127977148920238080[0;39m 生成今日电子书快照结束，耗时：208毫秒
2021-12-20 11:35:30.286 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977149385805824[0;39m <==      Total: 0
2021-12-20 11:35:30.287 INFO  com.aspect.LogAspect                              :92   [32m127977149385805824[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:35:30.288 INFO  com.aspect.LogAspect                              :93   [32m127977149385805824[0;39m ------------- 结束 耗时：174 ms -------------
2021-12-20 11:35:35.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127977169908535296[0;39m 生成今日电子书快照开始
2021-12-20 11:35:35.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977169908535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:35.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977169908535296[0;39m ==> Parameters: 
2021-12-20 11:35:35.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977169908535296[0;39m <==    Updates: 0
2021-12-20 11:35:35.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127977169908535296[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-20 11:35:35.219 INFO  com.job.DocJob                                    :32   [32m127977170797727744[0;39m 更新电子书下的文档数据开始
2021-12-20 11:35:35.219 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977170797727744[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:35:35.219 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977170797727744[0;39m ==> Parameters: 
2021-12-20 11:35:35.378 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977170797727744[0;39m <==    Updates: 5
2021-12-20 11:35:35.378 INFO  com.job.DocJob                                    :35   [32m127977170797727744[0;39m 更新电子书下的文档数据结束，耗时：159毫秒
2021-12-20 11:35:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127977190917804032[0;39m 生成今日电子书快照开始
2021-12-20 11:35:40.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977190917804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:40.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977190917804032[0;39m ==> Parameters: 
2021-12-20 11:35:40.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977190917804032[0;39m <==    Updates: 0
2021-12-20 11:35:40.276 INFO  com.job.EbookSnapshotJob                          :35   [32m127977190917804032[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 11:35:41.329 INFO  com.interceptor.LoginInterceptor                  :29   [32m127977073896722432[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-20 11:35:41.330 INFO  com.interceptor.LoginInterceptor                  :40   [32m127977073896722432[0;39m 接口登录拦截：，path：http://localhost:8081/doc/save
2021-12-20 11:35:41.330 INFO  com.interceptor.LoginInterceptor                  :44   [32m127977073896722432[0;39m 登录校验开始，token：127976936302579712
2021-12-20 11:35:41.365 INFO  com.interceptor.LoginInterceptor                  :56   [32m127977073896722432[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127976936302579712"}
2021-12-20 11:35:41.366 INFO  com.aspect.LogAspect                              :54   [32m127977196580114432[0;39m ------------- 开始 -------------
2021-12-20 11:35:41.366 INFO  com.aspect.LogAspect                              :55   [32m127977196580114432[0;39m 请求地址: http://localhost:8081/doc/save POST
2021-12-20 11:35:41.367 INFO  com.aspect.LogAspect                              :56   [32m127977196580114432[0;39m 类名方法: com.controller.DocController.save
2021-12-20 11:35:41.367 INFO  com.aspect.LogAspect                              :57   [32m127977196580114432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:41.367 INFO  com.aspect.LogAspect                              :80   [32m127977196580114432[0;39m 请求参数: [{"content":"","ebookId":4,"name":"前言","parent":0,"sort":1}]
2021-12-20 11:35:41.503 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977196580114432[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2021-12-20 11:35:41.505 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977196580114432[0;39m ==> Parameters: 127977197154734080(Long), 4(Long), 0(Long), 前言(String), 1(Integer), 0(Integer), 0(Integer)
2021-12-20 11:35:41.766 DEBUG com.mapper.DocMapper.insert                       :137  [32m127977196580114432[0;39m <==    Updates: 1
2021-12-20 11:35:41.768 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977196580114432[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2021-12-20 11:35:41.769 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977196580114432[0;39m ==> Parameters: 127977197154734080(Long), (String)
2021-12-20 11:35:41.933 DEBUG com.mapper.ContentMapper.insert                   :137  [32m127977196580114432[0;39m <==    Updates: 1
2021-12-20 11:35:42.125 INFO  com.aspect.LogAspect                              :92   [32m127977196580114432[0;39m 返回结果: {"success":true}
2021-12-20 11:35:42.126 INFO  com.aspect.LogAspect                              :93   [32m127977196580114432[0;39m ------------- 结束 耗时：760 ms -------------
2021-12-20 11:35:42.129 INFO  com.interceptor.LoginInterceptor                  :65   [32m127977196580114432[0;39m ------------- LoginInterceptor 结束 耗时：799 ms -------------
2021-12-20 11:35:42.158 INFO  com.aspect.LogAspect                              :54   [32m127977199902003200[0;39m ------------- 开始 -------------
2021-12-20 11:35:42.159 INFO  com.aspect.LogAspect                              :55   [32m127977199902003200[0;39m 请求地址: http://localhost:8081/doc/all/4 GET
2021-12-20 11:35:42.159 INFO  com.aspect.LogAspect                              :56   [32m127977199902003200[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:35:42.160 INFO  com.aspect.LogAspect                              :57   [32m127977199902003200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:42.161 INFO  com.aspect.LogAspect                              :80   [32m127977199902003200[0;39m 请求参数: [4]
2021-12-20 11:35:42.163 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977199902003200[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:35:42.165 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977199902003200[0;39m ==> Parameters: 4(Long)
2021-12-20 11:35:42.270 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977199902003200[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:35:42.271 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977199902003200[0;39m <==        Row: 127977197154734080, 4, 0, 前言, 1, 0, 0
2021-12-20 11:35:42.272 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977199902003200[0;39m <==      Total: 1
2021-12-20 11:35:42.273 INFO  com.aspect.LogAspect                              :92   [32m127977199902003200[0;39m 返回结果: {"content":[{"ebookId":4,"id":127977197154734080,"name":"前言","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-12-20 11:35:42.273 INFO  com.aspect.LogAspect                              :93   [32m127977199902003200[0;39m ------------- 结束 耗时：115 ms -------------
2021-12-20 11:35:43.819 INFO  com.aspect.LogAspect                              :54   [32m127977206868742144[0;39m ------------- 开始 -------------
2021-12-20 11:35:43.820 INFO  com.aspect.LogAspect                              :55   [32m127977206868742144[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:35:43.820 INFO  com.aspect.LogAspect                              :56   [32m127977206868742144[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:35:43.820 INFO  com.aspect.LogAspect                              :57   [32m127977206868742144[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:43.820 INFO  com.aspect.LogAspect                              :80   [32m127977206868742144[0;39m 请求参数: []
2021-12-20 11:35:43.895 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977206868742144[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:35:43.896 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977206868742144[0;39m ==> Parameters: 
2021-12-20 11:35:43.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:35:43.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:35:43.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:35:43.973 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:35:43.974 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:35:43.975 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:35:43.975 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:35:43.975 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:35:43.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:35:43.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:35:43.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:35:43.978 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:35:43.979 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:35:43.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:35:43.981 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:35:43.982 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:35:43.983 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:35:43.984 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:35:43.984 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:35:43.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977206868742144[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:35:43.985 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977206868742144[0;39m <==      Total: 19
2021-12-20 11:35:43.987 INFO  com.aspect.LogAspect                              :92   [32m127977206868742144[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:35:43.988 INFO  com.aspect.LogAspect                              :93   [32m127977206868742144[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:35:44.017 INFO  com.aspect.LogAspect                              :54   [32m127977207699214336[0;39m ------------- 开始 -------------
2021-12-20 11:35:44.018 INFO  com.aspect.LogAspect                              :55   [32m127977207699214336[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:35:44.018 INFO  com.aspect.LogAspect                              :56   [32m127977207699214336[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:35:44.019 INFO  com.aspect.LogAspect                              :57   [32m127977207699214336[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:44.019 INFO  com.aspect.LogAspect                              :80   [32m127977207699214336[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:35:44.113 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977207699214336[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 11:35:44.113 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977207699214336[0;39m ==> Parameters: 
2021-12-20 11:35:44.184 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977207699214336[0;39m <==    Columns: count(0)
2021-12-20 11:35:44.184 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977207699214336[0;39m <==        Row: 6
2021-12-20 11:35:44.185 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977207699214336[0;39m <==      Total: 1
2021-12-20 11:35:44.185 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977207699214336[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 11:35:44.185 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977207699214336[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:35:44.275 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:35:44.276 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 102, 22
2021-12-20 11:35:44.276 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 81, 32
2021-12-20 11:35:44.277 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 11:35:44.279 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-20 11:35:44.280 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2021-12-20 11:35:44.281 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977207699214336[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 11:35:44.282 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977207699214336[0;39m <==      Total: 6
2021-12-20 11:35:44.283 INFO  com.servicess.EbookService                        :48   [32m127977207699214336[0;39m 总行数：6
2021-12-20 11:35:44.284 INFO  com.servicess.EbookService                        :49   [32m127977207699214336[0;39m 总页数：1
2021-12-20 11:35:44.285 INFO  com.aspect.LogAspect                              :92   [32m127977207699214336[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":102,"voteCount":22},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":81,"voteCount":32},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 11:35:44.286 INFO  com.aspect.LogAspect                              :93   [32m127977207699214336[0;39m ------------- 结束 耗时：269 ms -------------
2021-12-20 11:35:45.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127977211826409472[0;39m 生成今日电子书快照开始
2021-12-20 11:35:45.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977211826409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:45.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977211826409472[0;39m ==> Parameters: 
2021-12-20 11:35:45.228 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977211826409472[0;39m <==    Updates: 0
2021-12-20 11:35:45.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127977211826409472[0;39m 生成今日电子书快照结束，耗时：228毫秒
2021-12-20 11:35:50.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127977232839872512[0;39m 生成今日电子书快照开始
2021-12-20 11:35:50.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977232839872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:50.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977232839872512[0;39m ==> Parameters: 
2021-12-20 11:35:50.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977232839872512[0;39m <==    Updates: 0
2021-12-20 11:35:50.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127977232839872512[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:35:52.716 INFO  com.aspect.LogAspect                              :54   [32m127977244185464833[0;39m ------------- 开始 -------------
2021-12-20 11:35:52.716 INFO  com.aspect.LogAspect                              :54   [32m127977244185464832[0;39m ------------- 开始 -------------
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :55   [32m127977244185464832[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :55   [32m127977244185464833[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :56   [32m127977244185464832[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :56   [32m127977244185464833[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :57   [32m127977244185464832[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :57   [32m127977244185464833[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :80   [32m127977244185464832[0;39m 请求参数: []
2021-12-20 11:35:52.717 INFO  com.aspect.LogAspect                              :80   [32m127977244185464833[0;39m 请求参数: []
2021-12-20 11:35:52.718 INFO  com.aspect.LogAspect                              :54   [32m127977244189659136[0;39m ------------- 开始 -------------
2021-12-20 11:35:52.718 INFO  com.aspect.LogAspect                              :55   [32m127977244189659136[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:35:52.718 INFO  com.aspect.LogAspect                              :56   [32m127977244189659136[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:35:52.718 INFO  com.aspect.LogAspect                              :57   [32m127977244189659136[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:35:52.718 INFO  com.aspect.LogAspect                              :80   [32m127977244189659136[0;39m 请求参数: []
2021-12-20 11:35:52.784 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977244185464832[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:35:52.784 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977244185464832[0;39m ==> Parameters: 
2021-12-20 11:35:52.793 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977244189659136[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:35:52.793 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977244185464833[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:35:52.793 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977244189659136[0;39m ==> Parameters: 
2021-12-20 11:35:52.793 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977244185464833[0;39m ==> Parameters: 
2021-12-20 11:35:52.860 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977244185464832[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:35:52.861 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977244185464832[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:35:52.862 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977244185464832[0;39m <==        Row: 2021-12-20, 243, 81, -261, -94
2021-12-20 11:35:52.863 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977244185464832[0;39m <==      Total: 2
2021-12-20 11:35:52.863 INFO  com.aspect.LogAspect                              :92   [32m127977244185464832[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":243,"viewIncrease":-261,"voteCount":81,"voteIncrease":-94}],"success":true}
2021-12-20 11:35:52.863 INFO  com.aspect.LogAspect                              :93   [32m127977244185464832[0;39m ------------- 结束 耗时：147 ms -------------
2021-12-20 11:35:52.871 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977244185464833[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:35:52.871 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:35:52.872 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:35:52.872 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977244185464833[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:35:52.873 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:35:52.873 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977244185464833[0;39m <==      Total: 1
2021-12-20 11:35:52.873 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:35:52.874 INFO  com.aspect.LogAspect                              :92   [32m127977244185464833[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:35:52.874 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:35:52.874 INFO  com.aspect.LogAspect                              :93   [32m127977244185464833[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-20 11:35:52.874 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:35:52.875 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:35:52.876 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:35:52.876 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:35:52.877 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:35:52.878 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:35:52.879 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:35:52.879 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:35:52.880 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:35:52.881 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:35:52.882 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:35:52.882 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:35:52.883 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:35:52.883 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:35:52.883 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977244189659136[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:35:52.884 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977244189659136[0;39m <==      Total: 19
2021-12-20 11:35:52.887 INFO  com.aspect.LogAspect                              :92   [32m127977244189659136[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:35:52.887 INFO  com.aspect.LogAspect                              :93   [32m127977244189659136[0;39m ------------- 结束 耗时：170 ms -------------
2021-12-20 11:35:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127977253811392512[0;39m 生成今日电子书快照开始
2021-12-20 11:35:55.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977253811392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:35:55.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977253811392512[0;39m ==> Parameters: 
2021-12-20 11:35:55.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977253811392512[0;39m <==    Updates: 0
2021-12-20 11:35:55.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127977253811392512[0;39m 生成今日电子书快照结束，耗时：234毫秒
2021-12-20 11:36:00.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127977274766135296[0;39m 生成今日电子书快照开始
2021-12-20 11:36:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977274766135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977274766135296[0;39m ==> Parameters: 
2021-12-20 11:36:00.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977274766135296[0;39m <==    Updates: 0
2021-12-20 11:36:00.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127977274766135296[0;39m 生成今日电子书快照结束，耗时：205毫秒
2021-12-20 11:36:01.691 INFO  com.websocket.WebSocketServer                     :41   [32m127977139617271808[0;39m 连接关闭，token：PHtT7sim5e，session id：6！当前连接数：0
2021-12-20 11:36:02.327 INFO  com.websocket.WebSocketServer                     :32   [32m127977055102046208[0;39m 有新连接：token：RXN33DFWtF，session id：7，当前连接数：1
2021-12-20 11:36:02.407 INFO  com.aspect.LogAspect                              :54   [32m127977284832464896[0;39m ------------- 开始 -------------
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :55   [32m127977284832464896[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :56   [32m127977284832464896[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :57   [32m127977284832464896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :54   [32m127977284836659200[0;39m ------------- 开始 -------------
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :80   [32m127977284832464896[0;39m 请求参数: []
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :55   [32m127977284836659200[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :56   [32m127977284836659200[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:36:02.408 INFO  com.aspect.LogAspect                              :57   [32m127977284836659200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:36:02.409 INFO  com.aspect.LogAspect                              :80   [32m127977284836659200[0;39m 请求参数: []
2021-12-20 11:36:02.411 INFO  com.aspect.LogAspect                              :54   [32m127977284849242112[0;39m ------------- 开始 -------------
2021-12-20 11:36:02.411 INFO  com.aspect.LogAspect                              :55   [32m127977284849242112[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:36:02.412 INFO  com.aspect.LogAspect                              :56   [32m127977284849242112[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:36:02.412 INFO  com.aspect.LogAspect                              :57   [32m127977284849242112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:36:02.412 INFO  com.aspect.LogAspect                              :80   [32m127977284849242112[0;39m 请求参数: []
2021-12-20 11:36:02.484 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977284832464896[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:36:02.485 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977284832464896[0;39m ==> Parameters: 
2021-12-20 11:36:02.502 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977284849242112[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:36:02.502 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977284849242112[0;39m ==> Parameters: 
2021-12-20 11:36:02.507 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977284836659200[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:36:02.507 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977284836659200[0;39m ==> Parameters: 
2021-12-20 11:36:02.592 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977284832464896[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:36:02.592 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:36:02.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:36:02.595 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977284832464896[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:36:02.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:36:02.598 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:36:02.598 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977284832464896[0;39m <==        Row: 2021-12-20, 243, 81, -261, -94
2021-12-20 11:36:02.599 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:36:02.600 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977284832464896[0;39m <==      Total: 2
2021-12-20 11:36:02.600 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:36:02.601 INFO  com.aspect.LogAspect                              :92   [32m127977284832464896[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":243,"viewIncrease":-261,"voteCount":81,"voteIncrease":-94}],"success":true}
2021-12-20 11:36:02.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:36:02.601 INFO  com.aspect.LogAspect                              :93   [32m127977284832464896[0;39m ------------- 结束 耗时：194 ms -------------
2021-12-20 11:36:02.602 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:36:02.602 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977284836659200[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:36:02.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:36:02.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:36:02.604 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977284836659200[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:36:02.604 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:36:02.605 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977284836659200[0;39m <==      Total: 1
2021-12-20 11:36:02.605 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:36:02.607 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:36:02.607 INFO  com.aspect.LogAspect                              :92   [32m127977284836659200[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:36:02.608 INFO  com.aspect.LogAspect                              :93   [32m127977284836659200[0;39m ------------- 结束 耗时：200 ms -------------
2021-12-20 11:36:02.608 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:36:02.609 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:36:02.610 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:36:02.611 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:36:02.613 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:36:02.615 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:36:02.617 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977284849242112[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:36:02.618 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977284849242112[0;39m <==      Total: 19
2021-12-20 11:36:02.624 INFO  com.aspect.LogAspect                              :92   [32m127977284849242112[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:36:02.624 INFO  com.aspect.LogAspect                              :93   [32m127977284849242112[0;39m ------------- 结束 耗时：213 ms -------------
2021-12-20 11:36:05.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127977295729266688[0;39m 生成今日电子书快照开始
2021-12-20 11:36:05.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977295729266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:05.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977295729266688[0;39m ==> Parameters: 
2021-12-20 11:36:05.222 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977295729266688[0;39m <==    Updates: 0
2021-12-20 11:36:05.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127977295729266688[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:36:05.222 INFO  com.job.DocJob                                    :32   [32m127977296639430656[0;39m 更新电子书下的文档数据开始
2021-12-20 11:36:05.222 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977296639430656[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:36:05.222 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977296639430656[0;39m ==> Parameters: 
2021-12-20 11:36:05.375 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977296639430656[0;39m <==    Updates: 6
2021-12-20 11:36:05.375 INFO  com.job.DocJob                                    :35   [32m127977296639430656[0;39m 更新电子书下的文档数据结束，耗时：153毫秒
2021-12-20 11:36:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127977316730146816[0;39m 生成今日电子书快照开始
2021-12-20 11:36:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977316730146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:10.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977316730146816[0;39m ==> Parameters: 
2021-12-20 11:36:10.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977316730146816[0;39m <==    Updates: 0
2021-12-20 11:36:10.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127977316730146816[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:36:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127977337693278208[0;39m 生成今日电子书快照开始
2021-12-20 11:36:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977337693278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977337693278208[0;39m ==> Parameters: 
2021-12-20 11:36:15.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977337693278208[0;39m <==    Updates: 0
2021-12-20 11:36:15.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127977337693278208[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:36:20.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127977358727712768[0;39m 生成今日电子书快照开始
2021-12-20 11:36:20.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977358727712768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:20.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977358727712768[0;39m ==> Parameters: 
2021-12-20 11:36:20.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977358727712768[0;39m <==    Updates: 0
2021-12-20 11:36:20.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127977358727712768[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:36:25.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127977379699232768[0;39m 生成今日电子书快照开始
2021-12-20 11:36:25.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977379699232768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:25.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977379699232768[0;39m ==> Parameters: 
2021-12-20 11:36:25.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977379699232768[0;39m <==    Updates: 0
2021-12-20 11:36:25.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127977379699232768[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:36:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127977400586866688[0;39m 生成今日电子书快照开始
2021-12-20 11:36:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977400586866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:30.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977400586866688[0;39m ==> Parameters: 
2021-12-20 11:36:30.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977400586866688[0;39m <==    Updates: 0
2021-12-20 11:36:30.240 INFO  com.job.EbookSnapshotJob                          :35   [32m127977400586866688[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 11:36:35.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127977421604524032[0;39m 生成今日电子书快照开始
2021-12-20 11:36:35.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977421604524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:35.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977421604524032[0;39m ==> Parameters: 
2021-12-20 11:36:35.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977421604524032[0;39m <==    Updates: 0
2021-12-20 11:36:35.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127977421604524032[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:36:35.239 INFO  com.job.DocJob                                    :32   [32m127977422539853824[0;39m 更新电子书下的文档数据开始
2021-12-20 11:36:35.239 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977422539853824[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:36:35.239 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977422539853824[0;39m ==> Parameters: 
2021-12-20 11:36:35.371 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977422539853824[0;39m <==    Updates: 6
2021-12-20 11:36:35.386 INFO  com.job.DocJob                                    :35   [32m127977422539853824[0;39m 更新电子书下的文档数据结束，耗时：147毫秒
2021-12-20 11:36:40.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127977442580238336[0;39m 生成今日电子书快照开始
2021-12-20 11:36:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977442580238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977442580238336[0;39m ==> Parameters: 
2021-12-20 11:36:40.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977442580238336[0;39m <==    Updates: 0
2021-12-20 11:36:40.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127977442580238336[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 11:36:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127977463568535552[0;39m 生成今日电子书快照开始
2021-12-20 11:36:45.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977463568535552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:45.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977463568535552[0;39m ==> Parameters: 
2021-12-20 11:36:45.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977463568535552[0;39m <==    Updates: 0
2021-12-20 11:36:45.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127977463568535552[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 11:36:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127977484523278336[0;39m 生成今日电子书快照开始
2021-12-20 11:36:50.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977484523278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:50.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977484523278336[0;39m ==> Parameters: 
2021-12-20 11:36:50.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977484523278336[0;39m <==    Updates: 0
2021-12-20 11:36:50.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127977484523278336[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:36:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127977505478021120[0;39m 生成今日电子书快照开始
2021-12-20 11:36:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977505478021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:36:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977505478021120[0;39m ==> Parameters: 
2021-12-20 11:36:55.399 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977505478021120[0;39m <==    Updates: 0
2021-12-20 11:36:55.399 INFO  com.job.EbookSnapshotJob                          :35   [32m127977505478021120[0;39m 生成今日电子书快照结束，耗时：386毫秒
2021-12-20 11:37:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127977526441152512[0;39m 生成今日电子书快照开始
2021-12-20 11:37:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977526441152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977526441152512[0;39m ==> Parameters: 
2021-12-20 11:37:00.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977526441152512[0;39m <==    Updates: 0
2021-12-20 11:37:00.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127977526441152512[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:37:05.010 INFO  com.job.DocJob                                    :32   [32m127977547408478208[0;39m 更新电子书下的文档数据开始
2021-12-20 11:37:05.074 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977547408478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:37:05.074 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977547408478208[0;39m ==> Parameters: 
2021-12-20 11:37:05.227 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977547408478208[0;39m <==    Updates: 6
2021-12-20 11:37:05.227 INFO  com.job.DocJob                                    :35   [32m127977547408478208[0;39m 更新电子书下的文档数据结束，耗时：217毫秒
2021-12-20 11:37:05.227 INFO  com.job.EbookSnapshotJob                          :32   [32m127977548318642176[0;39m 生成今日电子书快照开始
2021-12-20 11:37:05.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977548318642176[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:05.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977548318642176[0;39m ==> Parameters: 
2021-12-20 11:37:05.390 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977548318642176[0;39m <==    Updates: 0
2021-12-20 11:37:05.390 INFO  com.job.EbookSnapshotJob                          :35   [32m127977548318642176[0;39m 生成今日电子书快照结束，耗时：163毫秒
2021-12-20 11:37:10.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127977568346443776[0;39m 生成今日电子书快照开始
2021-12-20 11:37:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977568346443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977568346443776[0;39m ==> Parameters: 
2021-12-20 11:37:10.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977568346443776[0;39m <==    Updates: 0
2021-12-20 11:37:10.206 INFO  com.job.EbookSnapshotJob                          :35   [32m127977568346443776[0;39m 生成今日电子书快照结束，耗时：204毫秒
2021-12-20 11:37:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127977589385072640[0;39m 生成今日电子书快照开始
2021-12-20 11:37:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977589385072640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:15.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977589385072640[0;39m ==> Parameters: 
2021-12-20 11:37:15.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977589385072640[0;39m <==    Updates: 0
2021-12-20 11:37:15.221 INFO  com.job.EbookSnapshotJob                          :35   [32m127977589385072640[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-20 11:37:36.508 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 11:37:36.530 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 6920 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:37:36.530 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:37:36.608 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 11:37:36.608 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 11:37:37.731 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:37:37.731 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:37:38.163 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 429 ms. Found 0 Redis repository interfaces.
2021-12-20 11:37:38.749 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:37:38.749 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:37:38.749 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:37:38.749 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:37:38.812 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:37:38.812 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2204 ms
2021-12-20 11:37:40.406 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:37:40.437 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:37:40.468 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:37:40.484 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 4.666 seconds (JVM running for 5.735)
2021-12-20 11:37:45.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127977715214192640[0;39m 生成今日电子书快照开始
2021-12-20 11:37:45.038 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127977715214192640[0;39m HikariPool-1 - Starting...
2021-12-20 11:37:45.974 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127977715214192640[0;39m HikariPool-1 - Start completed.
2021-12-20 11:37:45.990 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977715214192640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:46.026 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977715214192640[0;39m ==> Parameters: 
2021-12-20 11:37:46.173 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977715214192640[0;39m <==    Updates: 6
2021-12-20 11:37:46.190 INFO  com.job.EbookSnapshotJob                          :35   [32m127977715214192640[0;39m 生成今日电子书快照结束，耗时：1171毫秒
2021-12-20 11:37:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127977736147963904[0;39m 生成今日电子书快照开始
2021-12-20 11:37:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977736147963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977736147963904[0;39m ==> Parameters: 
2021-12-20 11:37:50.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977736147963904[0;39m <==    Updates: 0
2021-12-20 11:37:50.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127977736147963904[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-20 11:37:55.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127977757165621248[0;39m 生成今日电子书快照开始
2021-12-20 11:37:55.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977757165621248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:37:55.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977757165621248[0;39m ==> Parameters: 
2021-12-20 11:37:55.405 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977757165621248[0;39m <==    Updates: 0
2021-12-20 11:37:55.405 INFO  com.job.EbookSnapshotJob                          :35   [32m127977757165621248[0;39m 生成今日电子书快照结束，耗时：385毫秒
2021-12-20 11:38:00.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127977778170695680[0;39m 生成今日电子书快照开始
2021-12-20 11:38:00.185 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977778170695680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:00.185 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977778170695680[0;39m ==> Parameters: 
2021-12-20 11:38:00.345 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977778170695680[0;39m <==    Updates: 0
2021-12-20 11:38:00.345 INFO  com.job.EbookSnapshotJob                          :35   [32m127977778170695680[0;39m 生成今日电子书快照结束，耗时：317毫秒
2021-12-20 11:38:05.016 INFO  com.job.DocJob                                    :32   [32m127977799091884032[0;39m 更新电子书下的文档数据开始
2021-12-20 11:38:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977799091884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:38:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977799091884032[0;39m ==> Parameters: 
2021-12-20 11:38:05.229 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977799091884032[0;39m <==    Updates: 6
2021-12-20 11:38:05.229 INFO  com.job.DocJob                                    :35   [32m127977799091884032[0;39m 更新电子书下的文档数据结束，耗时：213毫秒
2021-12-20 11:38:05.229 INFO  com.job.EbookSnapshotJob                          :32   [32m127977799985270784[0;39m 生成今日电子书快照开始
2021-12-20 11:38:05.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977799985270784[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:05.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977799985270784[0;39m ==> Parameters: 
2021-12-20 11:38:05.377 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977799985270784[0;39m <==    Updates: 0
2021-12-20 11:38:05.377 INFO  com.job.EbookSnapshotJob                          :35   [32m127977799985270784[0;39m 生成今日电子书快照结束，耗时：148毫秒
2021-12-20 11:38:10.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127977820088569856[0;39m 生成今日电子书快照开始
2021-12-20 11:38:10.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977820088569856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:10.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977820088569856[0;39m ==> Parameters: 
2021-12-20 11:38:10.361 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977820088569856[0;39m <==    Updates: 0
2021-12-20 11:38:10.361 INFO  com.job.EbookSnapshotJob                          :35   [32m127977820088569856[0;39m 生成今日电子书快照结束，耗时：339毫秒
2021-12-20 11:38:12.219 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 11:38:12.219 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 11:38:12.220 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 11:38:12.256 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：XWBKRDXmLE，session id：0，当前连接数：1
2021-12-20 11:38:12.497 INFO  com.aspect.LogAspect                              :54   [32m127977830465277952[0;39m ------------- 开始 -------------
2021-12-20 11:38:12.497 INFO  com.aspect.LogAspect                              :54   [32m127977830465277954[0;39m ------------- 开始 -------------
2021-12-20 11:38:12.497 INFO  com.aspect.LogAspect                              :54   [32m127977830465277953[0;39m ------------- 开始 -------------
2021-12-20 11:38:12.498 INFO  com.aspect.LogAspect                              :55   [32m127977830465277952[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:38:12.498 INFO  com.aspect.LogAspect                              :55   [32m127977830465277953[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:38:12.498 INFO  com.aspect.LogAspect                              :56   [32m127977830465277952[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:38:12.498 INFO  com.aspect.LogAspect                              :56   [32m127977830465277953[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:38:12.499 INFO  com.aspect.LogAspect                              :57   [32m127977830465277952[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:12.498 INFO  com.aspect.LogAspect                              :55   [32m127977830465277954[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:38:12.499 INFO  com.aspect.LogAspect                              :57   [32m127977830465277953[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:12.499 INFO  com.aspect.LogAspect                              :56   [32m127977830465277954[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:38:12.500 INFO  com.aspect.LogAspect                              :57   [32m127977830465277954[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:12.542 INFO  com.aspect.LogAspect                              :80   [32m127977830465277953[0;39m 请求参数: []
2021-12-20 11:38:12.542 INFO  com.aspect.LogAspect                              :80   [32m127977830465277952[0;39m 请求参数: []
2021-12-20 11:38:12.542 INFO  com.aspect.LogAspect                              :80   [32m127977830465277954[0;39m 请求参数: []
2021-12-20 11:38:12.615 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977830465277953[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:12.618 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977830465277953[0;39m ==> Parameters: 
2021-12-20 11:38:12.636 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977830465277952[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:38:12.636 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977830465277954[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:12.637 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977830465277952[0;39m ==> Parameters: 
2021-12-20 11:38:12.637 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977830465277954[0;39m ==> Parameters: 
2021-12-20 11:38:12.760 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977830465277953[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:38:12.760 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977830465277954[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:38:12.760 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:38:12.761 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:38:12.762 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977830465277953[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:38:12.762 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977830465277954[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:38:12.763 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:38:12.764 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:38:12.766 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977830465277954[0;39m <==        Row: 2021-12-20, 187, 58, -317, -117
2021-12-20 11:38:12.766 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:38:12.767 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977830465277954[0;39m <==      Total: 2
2021-12-20 11:38:12.767 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:38:12.768 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977830465277953[0;39m <==      Total: 1
2021-12-20 11:38:12.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:38:12.769 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:38:12.770 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:38:12.771 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:38:12.772 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:38:12.773 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:38:12.774 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:38:12.775 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:38:12.776 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:38:12.776 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:38:12.777 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:38:12.779 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:38:12.780 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:38:12.780 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977830465277952[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:38:12.780 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977830465277952[0;39m <==      Total: 19
2021-12-20 11:38:12.796 INFO  com.aspect.LogAspect                              :92   [32m127977830465277953[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:38:12.796 INFO  com.aspect.LogAspect                              :92   [32m127977830465277954[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":187,"viewIncrease":-317,"voteCount":58,"voteIncrease":-117}],"success":true}
2021-12-20 11:38:12.796 INFO  com.aspect.LogAspect                              :92   [32m127977830465277952[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:38:12.796 INFO  com.aspect.LogAspect                              :93   [32m127977830465277953[0;39m ------------- 结束 耗时：300 ms -------------
2021-12-20 11:38:12.796 INFO  com.aspect.LogAspect                              :93   [32m127977830465277952[0;39m ------------- 结束 耗时：300 ms -------------
2021-12-20 11:38:12.796 INFO  com.aspect.LogAspect                              :93   [32m127977830465277954[0;39m ------------- 结束 耗时：300 ms -------------
2021-12-20 11:38:15.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127977841055895552[0;39m 生成今日电子书快照开始
2021-12-20 11:38:15.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977841055895552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:15.121 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977841055895552[0;39m ==> Parameters: 
2021-12-20 11:38:15.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977841055895552[0;39m <==    Updates: 0
2021-12-20 11:38:15.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127977841055895552[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 11:38:20.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127977862035804160[0;39m 生成今日电子书快照开始
2021-12-20 11:38:20.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977862035804160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:20.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977862035804160[0;39m ==> Parameters: 
2021-12-20 11:38:20.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977862035804160[0;39m <==    Updates: 0
2021-12-20 11:38:20.273 INFO  com.job.EbookSnapshotJob                          :35   [32m127977862035804160[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:38:25.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127977882940215296[0;39m 生成今日电子书快照开始
2021-12-20 11:38:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977882940215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977882940215296[0;39m ==> Parameters: 
2021-12-20 11:38:25.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977882940215296[0;39m <==    Updates: 0
2021-12-20 11:38:25.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127977882940215296[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:38:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127977903953678336[0;39m 生成今日电子书快照开始
2021-12-20 11:38:30.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977903953678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:30.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977903953678336[0;39m ==> Parameters: 
2021-12-20 11:38:30.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977903953678336[0;39m <==    Updates: 0
2021-12-20 11:38:30.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127977903953678336[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:38:32.121 INFO  com.aspect.LogAspect                              :54   [32m127977912778493952[0;39m ------------- 开始 -------------
2021-12-20 11:38:32.122 INFO  com.aspect.LogAspect                              :55   [32m127977912778493952[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:32.122 INFO  com.aspect.LogAspect                              :56   [32m127977912778493952[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:32.122 INFO  com.aspect.LogAspect                              :57   [32m127977912778493952[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:32.124 INFO  com.aspect.LogAspect                              :80   [32m127977912778493952[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-20 11:38:32.242 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977912778493952[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:32.243 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977912778493952[0;39m ==> Parameters: 201(Long)
2021-12-20 11:38:32.325 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977912778493952[0;39m <==    Columns: count(0)
2021-12-20 11:38:32.327 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977912778493952[0;39m <==        Row: 0
2021-12-20 11:38:32.331 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977912778493952[0;39m <==      Total: 1
2021-12-20 11:38:32.339 INFO  com.servicess.EbookService                        :48   [32m127977912778493952[0;39m 总行数：0
2021-12-20 11:38:32.340 INFO  com.servicess.EbookService                        :49   [32m127977912778493952[0;39m 总页数：0
2021-12-20 11:38:32.348 INFO  com.aspect.LogAspect                              :92   [32m127977912778493952[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:38:32.349 INFO  com.aspect.LogAspect                              :93   [32m127977912778493952[0;39m ------------- 结束 耗时：228 ms -------------
2021-12-20 11:38:34.311 INFO  com.aspect.LogAspect                              :54   [32m127977921964019712[0;39m ------------- 开始 -------------
2021-12-20 11:38:34.311 INFO  com.aspect.LogAspect                              :55   [32m127977921964019712[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:34.312 INFO  com.aspect.LogAspect                              :56   [32m127977921964019712[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:34.313 INFO  com.aspect.LogAspect                              :57   [32m127977921964019712[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:34.314 INFO  com.aspect.LogAspect                              :80   [32m127977921964019712[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-20 11:38:34.404 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977921964019712[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:34.405 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977921964019712[0;39m ==> Parameters: 101(Long)
2021-12-20 11:38:34.478 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977921964019712[0;39m <==    Columns: count(0)
2021-12-20 11:38:34.478 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977921964019712[0;39m <==        Row: 1
2021-12-20 11:38:34.482 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977921964019712[0;39m <==      Total: 1
2021-12-20 11:38:34.488 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977921964019712[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:38:34.489 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977921964019712[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-20 11:38:34.559 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977921964019712[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:38:34.560 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977921964019712[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 81, 32
2021-12-20 11:38:34.561 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977921964019712[0;39m <==      Total: 1
2021-12-20 11:38:34.566 INFO  com.servicess.EbookService                        :48   [32m127977921964019712[0;39m 总行数：1
2021-12-20 11:38:34.567 INFO  com.servicess.EbookService                        :49   [32m127977921964019712[0;39m 总页数：1
2021-12-20 11:38:34.593 INFO  com.aspect.LogAspect                              :92   [32m127977921964019712[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":81,"voteCount":32}],"total":1},"success":true}
2021-12-20 11:38:34.594 INFO  com.aspect.LogAspect                              :93   [32m127977921964019712[0;39m ------------- 结束 耗时：283 ms -------------
2021-12-20 11:38:35.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127977924883255296[0;39m 生成今日电子书快照开始
2021-12-20 11:38:35.007 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977924883255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:35.007 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977924883255296[0;39m ==> Parameters: 
2021-12-20 11:38:35.176 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977924883255296[0;39m <==    Updates: 0
2021-12-20 11:38:35.179 INFO  com.job.EbookSnapshotJob                          :35   [32m127977924883255296[0;39m 生成今日电子书快照结束，耗时：172毫秒
2021-12-20 11:38:35.181 INFO  com.job.DocJob                                    :32   [32m127977925613064192[0;39m 更新电子书下的文档数据开始
2021-12-20 11:38:35.183 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977925613064192[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:38:35.184 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977925613064192[0;39m ==> Parameters: 
2021-12-20 11:38:35.280 INFO  com.aspect.LogAspect                              :54   [32m127977926028300288[0;39m ------------- 开始 -------------
2021-12-20 11:38:35.281 INFO  com.aspect.LogAspect                              :55   [32m127977926028300288[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-20 11:38:35.281 INFO  com.aspect.LogAspect                              :56   [32m127977926028300288[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:38:35.282 INFO  com.aspect.LogAspect                              :57   [32m127977926028300288[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:35.282 INFO  com.aspect.LogAspect                              :80   [32m127977926028300288[0;39m 请求参数: [2]
2021-12-20 11:38:35.329 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127977925613064192[0;39m <==    Updates: 6
2021-12-20 11:38:35.329 INFO  com.job.DocJob                                    :35   [32m127977925613064192[0;39m 更新电子书下的文档数据结束，耗时：147毫秒
2021-12-20 11:38:35.345 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977926028300288[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:38:35.345 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977926028300288[0;39m ==> Parameters: 2(Long)
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 9, 2, 0, 文档1, 1, 34, 6
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 11, 5
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 7, 5
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-20 11:38:35.433 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 8, 5
2021-12-20 11:38:35.448 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 5, 5
2021-12-20 11:38:35.448 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977926028300288[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 2, 2
2021-12-20 11:38:35.448 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977926028300288[0;39m <==      Total: 8
2021-12-20 11:38:35.489 INFO  com.aspect.LogAspect                              :92   [32m127977926028300288[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":34,"voteCount":6},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":11,"voteCount":5},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":7,"voteCount":5},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":8,"voteCount":5},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":5,"voteCount":5},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":2,"voteCount":2}],"success":true}
2021-12-20 11:38:35.491 INFO  com.aspect.LogAspect                              :93   [32m127977926028300288[0;39m ------------- 结束 耗时：211 ms -------------
2021-12-20 11:38:35.528 INFO  com.aspect.LogAspect                              :54   [32m127977927068487680[0;39m ------------- 开始 -------------
2021-12-20 11:38:35.528 INFO  com.aspect.LogAspect                              :55   [32m127977927068487680[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-20 11:38:35.529 INFO  com.aspect.LogAspect                              :56   [32m127977927068487680[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:35.529 INFO  com.aspect.LogAspect                              :57   [32m127977927068487680[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:35.529 INFO  com.aspect.LogAspect                              :80   [32m127977927068487680[0;39m 请求参数: [9]
2021-12-20 11:38:35.530 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977927068487680[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:35.531 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977927068487680[0;39m ==> Parameters: 9(Long)
2021-12-20 11:38:35.605 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977927068487680[0;39m <==      Total: 0
2021-12-20 11:38:35.608 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977927068487680[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:35.609 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977927068487680[0;39m ==> Parameters: 9(Long)
2021-12-20 11:38:35.738 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977927068487680[0;39m <==    Updates: 1
2021-12-20 11:38:35.740 INFO  com.aspect.LogAspect                              :92   [32m127977927068487680[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:35.740 INFO  com.aspect.LogAspect                              :93   [32m127977927068487680[0;39m ------------- 结束 耗时：212 ms -------------
2021-12-20 11:38:36.611 INFO  com.aspect.LogAspect                              :54   [32m127977931610918912[0;39m ------------- 开始 -------------
2021-12-20 11:38:36.612 INFO  com.aspect.LogAspect                              :55   [32m127977931610918912[0;39m 请求地址: http://localhost:8081/doc/vote/9 GET
2021-12-20 11:38:36.613 INFO  com.aspect.LogAspect                              :56   [32m127977931610918912[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:36.613 INFO  com.aspect.LogAspect                              :57   [32m127977931610918912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:36.614 INFO  com.aspect.LogAspect                              :80   [32m127977931610918912[0;39m 请求参数: [9]
2021-12-20 11:38:37.185 INFO  com.Util.RedisUtil                                :31   [32m127977931610918912[0;39m key不存在，放入：DOC_VOTE_9_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:37.285 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977931610918912[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:37.286 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977931610918912[0;39m ==> Parameters: 9(Long)
2021-12-20 11:38:37.417 INFO  com.aspect.LogAspect                              :54   [32m127977934991527936[0;39m ------------- 开始 -------------
2021-12-20 11:38:37.418 INFO  com.aspect.LogAspect                              :55   [32m127977934991527936[0;39m 请求地址: http://localhost:8081/doc/find-content/123355187095146496 GET
2021-12-20 11:38:37.418 INFO  com.aspect.LogAspect                              :56   [32m127977934991527936[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:37.418 INFO  com.aspect.LogAspect                              :57   [32m127977934991527936[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:37.418 INFO  com.aspect.LogAspect                              :80   [32m127977934991527936[0;39m 请求参数: [123355187095146496]
2021-12-20 11:38:37.430 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977931610918912[0;39m <==    Updates: 1
2021-12-20 11:38:37.430 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977931610918912[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:37.431 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977931610918912[0;39m ==> Parameters: 9(Long)
2021-12-20 11:38:37.487 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977934991527936[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:37.487 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977934991527936[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:38:37.516 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977931610918912[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:37.517 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977931610918912[0;39m <==        Row: 9, 2, 0, 文档1, 1, 35, 7
2021-12-20 11:38:37.517 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977931610918912[0;39m <==      Total: 1
2021-12-20 11:38:37.521 INFO  com.aspect.LogAspect                              :92   [32m127977931610918912[0;39m 返回结果: {"success":true}
2021-12-20 11:38:37.521 INFO  com.aspect.LogAspect                              :93   [32m127977931610918912[0;39m ------------- 结束 耗时：910 ms -------------
2021-12-20 11:38:37.535 INFO  com.websocket.WebSocketServer                     :71   [32m127977931610918912[0;39m 推送消息：XWBKRDXmLE，内容：【文档1】被点赞！
2021-12-20 11:38:37.558 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977934991527936[0;39m <==    Columns: id, content
2021-12-20 11:38:37.558 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977934991527936[0;39m <==        Row: 123355187095146496, <<BLOB>>
2021-12-20 11:38:37.559 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977934991527936[0;39m <==      Total: 1
2021-12-20 11:38:37.560 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977934991527936[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:37.561 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977934991527936[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:38:37.707 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977934991527936[0;39m <==    Updates: 1
2021-12-20 11:38:37.708 INFO  com.aspect.LogAspect                              :92   [32m127977934991527936[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:37.708 INFO  com.aspect.LogAspect                              :93   [32m127977934991527936[0;39m ------------- 结束 耗时：291 ms -------------
2021-12-20 11:38:38.283 INFO  com.aspect.LogAspect                              :54   [32m127977938623795200[0;39m ------------- 开始 -------------
2021-12-20 11:38:38.283 INFO  com.aspect.LogAspect                              :55   [32m127977938623795200[0;39m 请求地址: http://localhost:8081/doc/vote/123355187095146496 GET
2021-12-20 11:38:38.283 INFO  com.aspect.LogAspect                              :56   [32m127977938623795200[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:38.283 INFO  com.aspect.LogAspect                              :57   [32m127977938623795200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:38.284 INFO  com.aspect.LogAspect                              :80   [32m127977938623795200[0;39m 请求参数: [123355187095146496]
2021-12-20 11:38:38.369 INFO  com.Util.RedisUtil                                :31   [32m127977938623795200[0;39m key不存在，放入：DOC_VOTE_123355187095146496_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:38.484 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977938623795200[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:38.486 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977938623795200[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:38:38.635 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977938623795200[0;39m <==    Updates: 1
2021-12-20 11:38:38.636 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977938623795200[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:38.636 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977938623795200[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 11:38:38.730 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977938623795200[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:38.731 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977938623795200[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 9, 6
2021-12-20 11:38:38.733 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977938623795200[0;39m <==      Total: 1
2021-12-20 11:38:38.735 INFO  com.aspect.LogAspect                              :92   [32m127977938623795200[0;39m 返回结果: {"success":true}
2021-12-20 11:38:38.736 INFO  com.aspect.LogAspect                              :93   [32m127977938623795200[0;39m ------------- 结束 耗时：453 ms -------------
2021-12-20 11:38:38.737 INFO  com.websocket.WebSocketServer                     :71   [32m127977938623795200[0;39m 推送消息：XWBKRDXmLE，内容：【文档1.2】被点赞！
2021-12-20 11:38:39.760 INFO  com.aspect.LogAspect                              :54   [32m127977944818782208[0;39m ------------- 开始 -------------
2021-12-20 11:38:39.760 INFO  com.aspect.LogAspect                              :55   [32m127977944818782208[0;39m 请求地址: http://localhost:8081/doc/find-content/123355236525019136 GET
2021-12-20 11:38:39.761 INFO  com.aspect.LogAspect                              :56   [32m127977944818782208[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:39.761 INFO  com.aspect.LogAspect                              :57   [32m127977944818782208[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:39.761 INFO  com.aspect.LogAspect                              :80   [32m127977944818782208[0;39m 请求参数: [123355236525019136]
2021-12-20 11:38:39.838 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977944818782208[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:39.840 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977944818782208[0;39m ==> Parameters: 123355236525019136(Long)
2021-12-20 11:38:39.926 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977944818782208[0;39m <==    Columns: id, content
2021-12-20 11:38:39.928 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977944818782208[0;39m <==        Row: 123355236525019136, <<BLOB>>
2021-12-20 11:38:39.930 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977944818782208[0;39m <==      Total: 1
2021-12-20 11:38:39.932 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977944818782208[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:39.934 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977944818782208[0;39m ==> Parameters: 123355236525019136(Long)
2021-12-20 11:38:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127977945863163904[0;39m 生成今日电子书快照开始
2021-12-20 11:38:40.089 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977944818782208[0;39m <==    Updates: 1
2021-12-20 11:38:40.090 INFO  com.aspect.LogAspect                              :92   [32m127977944818782208[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:40.091 INFO  com.aspect.LogAspect                              :93   [32m127977944818782208[0;39m ------------- 结束 耗时：331 ms -------------
2021-12-20 11:38:40.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977945863163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:40.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977945863163904[0;39m ==> Parameters: 
2021-12-20 11:38:40.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977945863163904[0;39m <==    Updates: 0
2021-12-20 11:38:40.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127977945863163904[0;39m 生成今日电子书快照结束，耗时：272毫秒
2021-12-20 11:38:40.362 INFO  com.aspect.LogAspect                              :54   [32m127977947343753216[0;39m ------------- 开始 -------------
2021-12-20 11:38:40.363 INFO  com.aspect.LogAspect                              :55   [32m127977947343753216[0;39m 请求地址: http://localhost:8081/doc/vote/123355236525019136 GET
2021-12-20 11:38:40.363 INFO  com.aspect.LogAspect                              :56   [32m127977947343753216[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:40.363 INFO  com.aspect.LogAspect                              :57   [32m127977947343753216[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:40.363 INFO  com.aspect.LogAspect                              :80   [32m127977947343753216[0;39m 请求参数: [123355236525019136]
2021-12-20 11:38:40.406 INFO  com.Util.RedisUtil                                :31   [32m127977947343753216[0;39m key不存在，放入：DOC_VOTE_123355236525019136_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:40.447 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977947343753216[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:40.449 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977947343753216[0;39m ==> Parameters: 123355236525019136(Long)
2021-12-20 11:38:40.592 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977947343753216[0;39m <==    Updates: 1
2021-12-20 11:38:40.596 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977947343753216[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:40.599 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977947343753216[0;39m ==> Parameters: 123355236525019136(Long)
2021-12-20 11:38:40.687 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977947343753216[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:40.688 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977947343753216[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 8, 6
2021-12-20 11:38:40.689 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977947343753216[0;39m <==      Total: 1
2021-12-20 11:38:40.692 INFO  com.aspect.LogAspect                              :92   [32m127977947343753216[0;39m 返回结果: {"success":true}
2021-12-20 11:38:40.693 INFO  com.aspect.LogAspect                              :93   [32m127977947343753216[0;39m ------------- 结束 耗时：331 ms -------------
2021-12-20 11:38:40.699 INFO  com.websocket.WebSocketServer                     :71   [32m127977947343753216[0;39m 推送消息：XWBKRDXmLE，内容：【文档2.1】被点赞！
2021-12-20 11:38:41.233 INFO  com.aspect.LogAspect                              :54   [32m127977950996992000[0;39m ------------- 开始 -------------
2021-12-20 11:38:41.234 INFO  com.aspect.LogAspect                              :55   [32m127977950996992000[0;39m 请求地址: http://localhost:8081/doc/find-content/124191201023889408 GET
2021-12-20 11:38:41.234 INFO  com.aspect.LogAspect                              :56   [32m127977950996992000[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:41.234 INFO  com.aspect.LogAspect                              :57   [32m127977950996992000[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:41.235 INFO  com.aspect.LogAspect                              :80   [32m127977950996992000[0;39m 请求参数: [124191201023889408]
2021-12-20 11:38:41.310 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977950996992000[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:41.312 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977950996992000[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:38:41.391 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977950996992000[0;39m <==    Columns: id, content
2021-12-20 11:38:41.392 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977950996992000[0;39m <==        Row: 124191201023889408, <<BLOB>>
2021-12-20 11:38:41.395 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977950996992000[0;39m <==      Total: 1
2021-12-20 11:38:41.398 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977950996992000[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:41.400 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977950996992000[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:38:41.555 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977950996992000[0;39m <==    Updates: 1
2021-12-20 11:38:41.557 INFO  com.aspect.LogAspect                              :92   [32m127977950996992000[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:41.558 INFO  com.aspect.LogAspect                              :93   [32m127977950996992000[0;39m ------------- 结束 耗时：325 ms -------------
2021-12-20 11:38:42.033 INFO  com.aspect.LogAspect                              :54   [32m127977954352435200[0;39m ------------- 开始 -------------
2021-12-20 11:38:42.034 INFO  com.aspect.LogAspect                              :55   [32m127977954352435200[0;39m 请求地址: http://localhost:8081/doc/vote/124191201023889408 GET
2021-12-20 11:38:42.034 INFO  com.aspect.LogAspect                              :56   [32m127977954352435200[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:42.034 INFO  com.aspect.LogAspect                              :57   [32m127977954352435200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:42.034 INFO  com.aspect.LogAspect                              :80   [32m127977954352435200[0;39m 请求参数: [124191201023889408]
2021-12-20 11:38:42.074 INFO  com.Util.RedisUtil                                :31   [32m127977954352435200[0;39m key不存在，放入：DOC_VOTE_124191201023889408_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:42.198 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977954352435200[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:42.199 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977954352435200[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:38:42.351 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977954352435200[0;39m <==    Updates: 1
2021-12-20 11:38:42.351 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977954352435200[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:42.352 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977954352435200[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-20 11:38:42.431 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977954352435200[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:42.432 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977954352435200[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 6, 6
2021-12-20 11:38:42.432 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977954352435200[0;39m <==      Total: 1
2021-12-20 11:38:42.433 INFO  com.aspect.LogAspect                              :92   [32m127977954352435200[0;39m 返回结果: {"success":true}
2021-12-20 11:38:42.434 INFO  com.aspect.LogAspect                              :93   [32m127977954352435200[0;39m ------------- 结束 耗时：401 ms -------------
2021-12-20 11:38:42.434 INFO  com.websocket.WebSocketServer                     :71   [32m127977954352435200[0;39m 推送消息：XWBKRDXmLE，内容：【文档3.1】被点赞！
2021-12-20 11:38:42.985 INFO  com.aspect.LogAspect                              :54   [32m127977958345412608[0;39m ------------- 开始 -------------
2021-12-20 11:38:42.986 INFO  com.aspect.LogAspect                              :55   [32m127977958345412608[0;39m 请求地址: http://localhost:8081/doc/find-content/124191230128164864 GET
2021-12-20 11:38:42.986 INFO  com.aspect.LogAspect                              :56   [32m127977958345412608[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:42.986 INFO  com.aspect.LogAspect                              :57   [32m127977958345412608[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:42.986 INFO  com.aspect.LogAspect                              :80   [32m127977958345412608[0;39m 请求参数: [124191230128164864]
2021-12-20 11:38:43.073 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977958345412608[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:43.074 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977958345412608[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-20 11:38:43.142 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977958345412608[0;39m <==    Columns: id, content
2021-12-20 11:38:43.143 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977958345412608[0;39m <==        Row: 124191230128164864, <<BLOB>>
2021-12-20 11:38:43.145 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977958345412608[0;39m <==      Total: 1
2021-12-20 11:38:43.147 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977958345412608[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:43.148 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977958345412608[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-20 11:38:43.335 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977958345412608[0;39m <==    Updates: 1
2021-12-20 11:38:43.336 INFO  com.aspect.LogAspect                              :92   [32m127977958345412608[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:43.336 INFO  com.aspect.LogAspect                              :93   [32m127977958345412608[0;39m ------------- 结束 耗时：351 ms -------------
2021-12-20 11:38:43.747 INFO  com.aspect.LogAspect                              :54   [32m127977961541472256[0;39m ------------- 开始 -------------
2021-12-20 11:38:43.748 INFO  com.aspect.LogAspect                              :55   [32m127977961541472256[0;39m 请求地址: http://localhost:8081/doc/vote/124191230128164864 GET
2021-12-20 11:38:43.748 INFO  com.aspect.LogAspect                              :56   [32m127977961541472256[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:43.748 INFO  com.aspect.LogAspect                              :57   [32m127977961541472256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:43.748 INFO  com.aspect.LogAspect                              :80   [32m127977961541472256[0;39m 请求参数: [124191230128164864]
2021-12-20 11:38:43.797 INFO  com.Util.RedisUtil                                :31   [32m127977961541472256[0;39m key不存在，放入：DOC_VOTE_124191230128164864_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:43.916 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977961541472256[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:43.916 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977961541472256[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-20 11:38:44.057 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977961541472256[0;39m <==    Updates: 1
2021-12-20 11:38:44.057 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977961541472256[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:44.057 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977961541472256[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-20 11:38:44.142 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977961541472256[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:44.144 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977961541472256[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 3, 3
2021-12-20 11:38:44.145 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977961541472256[0;39m <==      Total: 1
2021-12-20 11:38:44.149 INFO  com.aspect.LogAspect                              :92   [32m127977961541472256[0;39m 返回结果: {"success":true}
2021-12-20 11:38:44.150 INFO  com.aspect.LogAspect                              :93   [32m127977961541472256[0;39m ------------- 结束 耗时：403 ms -------------
2021-12-20 11:38:44.150 INFO  com.websocket.WebSocketServer                     :71   [32m127977961541472256[0;39m 推送消息：XWBKRDXmLE，内容：【文档3.2】被点赞！
2021-12-20 11:38:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127977966864044032[0;39m 生成今日电子书快照开始
2021-12-20 11:38:45.064 INFO  com.aspect.LogAspect                              :54   [32m127977967065370624[0;39m ------------- 开始 -------------
2021-12-20 11:38:45.064 INFO  com.aspect.LogAspect                              :55   [32m127977967065370624[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:38:45.064 INFO  com.aspect.LogAspect                              :56   [32m127977967065370624[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:38:45.064 INFO  com.aspect.LogAspect                              :57   [32m127977967065370624[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:45.064 INFO  com.aspect.LogAspect                              :80   [32m127977967065370624[0;39m 请求参数: []
2021-12-20 11:38:45.064 INFO  com.aspect.LogAspect                              :54   [32m127977967065370625[0;39m ------------- 开始 -------------
2021-12-20 11:38:45.065 INFO  com.aspect.LogAspect                              :55   [32m127977967065370625[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:38:45.065 INFO  com.aspect.LogAspect                              :56   [32m127977967065370625[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:38:45.065 INFO  com.aspect.LogAspect                              :57   [32m127977967065370625[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:45.065 INFO  com.aspect.LogAspect                              :80   [32m127977967065370625[0;39m 请求参数: []
2021-12-20 11:38:45.068 INFO  com.aspect.LogAspect                              :54   [32m127977967082147840[0;39m ------------- 开始 -------------
2021-12-20 11:38:45.068 INFO  com.aspect.LogAspect                              :55   [32m127977967082147840[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:38:45.068 INFO  com.aspect.LogAspect                              :56   [32m127977967082147840[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:38:45.069 INFO  com.aspect.LogAspect                              :57   [32m127977967082147840[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:45.069 INFO  com.aspect.LogAspect                              :80   [32m127977967082147840[0;39m 请求参数: []
2021-12-20 11:38:45.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977966864044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:45.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977966864044032[0;39m ==> Parameters: 
2021-12-20 11:38:45.150 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977967065370625[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:45.150 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977967082147840[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:38:45.150 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977967065370624[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:45.151 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977967082147840[0;39m ==> Parameters: 
2021-12-20 11:38:45.151 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977967065370625[0;39m ==> Parameters: 
2021-12-20 11:38:45.152 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977967065370624[0;39m ==> Parameters: 
2021-12-20 11:38:45.233 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977967065370625[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:38:45.235 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977967065370624[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:38:45.235 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127977967065370625[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:38:45.239 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977967065370624[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:38:45.239 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127977967065370625[0;39m <==      Total: 1
2021-12-20 11:38:45.241 INFO  com.aspect.LogAspect                              :92   [32m127977967065370625[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:38:45.242 INFO  com.aspect.LogAspect                              :93   [32m127977967065370625[0;39m ------------- 结束 耗时：178 ms -------------
2021-12-20 11:38:45.242 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:38:45.242 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127977967065370624[0;39m <==        Row: 2021-12-20, 187, 58, -317, -117
2021-12-20 11:38:45.243 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:38:45.244 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127977967065370624[0;39m <==      Total: 2
2021-12-20 11:38:45.246 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:38:45.247 INFO  com.aspect.LogAspect                              :92   [32m127977967065370624[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":187,"viewIncrease":-317,"voteCount":58,"voteIncrease":-117}],"success":true}
2021-12-20 11:38:45.248 INFO  com.aspect.LogAspect                              :93   [32m127977967065370624[0;39m ------------- 结束 耗时：185 ms -------------
2021-12-20 11:38:45.248 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:38:45.250 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:38:45.251 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:38:45.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:38:45.257 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:38:45.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977966864044032[0;39m <==    Updates: 0
2021-12-20 11:38:45.258 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:38:45.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127977966864044032[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 11:38:45.259 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:38:45.260 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:38:45.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:38:45.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:38:45.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:38:45.265 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:38:45.266 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:38:45.267 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:38:45.268 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:38:45.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:38:45.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127977967082147840[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:38:45.271 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127977967082147840[0;39m <==      Total: 19
2021-12-20 11:38:45.275 INFO  com.aspect.LogAspect                              :92   [32m127977967082147840[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:38:45.275 INFO  com.aspect.LogAspect                              :93   [32m127977967082147840[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 11:38:47.123 INFO  com.aspect.LogAspect                              :54   [32m127977975701442560[0;39m ------------- 开始 -------------
2021-12-20 11:38:47.123 INFO  com.aspect.LogAspect                              :55   [32m127977975701442560[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:47.124 INFO  com.aspect.LogAspect                              :56   [32m127977975701442560[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:47.124 INFO  com.aspect.LogAspect                              :57   [32m127977975701442560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:47.124 INFO  com.aspect.LogAspect                              :80   [32m127977975701442560[0;39m 请求参数: [{"categoryId2":501,"page":1,"size":1000}]
2021-12-20 11:38:47.183 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977975701442560[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:47.184 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977975701442560[0;39m ==> Parameters: 501(Long)
2021-12-20 11:38:47.241 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977975701442560[0;39m <==    Columns: count(0)
2021-12-20 11:38:47.241 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977975701442560[0;39m <==        Row: 0
2021-12-20 11:38:47.242 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977975701442560[0;39m <==      Total: 1
2021-12-20 11:38:47.242 INFO  com.servicess.EbookService                        :48   [32m127977975701442560[0;39m 总行数：0
2021-12-20 11:38:47.242 INFO  com.servicess.EbookService                        :49   [32m127977975701442560[0;39m 总页数：0
2021-12-20 11:38:47.242 INFO  com.aspect.LogAspect                              :92   [32m127977975701442560[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:38:47.243 INFO  com.aspect.LogAspect                              :93   [32m127977975701442560[0;39m ------------- 结束 耗时：120 ms -------------
2021-12-20 11:38:47.685 INFO  com.aspect.LogAspect                              :54   [32m127977978058641408[0;39m ------------- 开始 -------------
2021-12-20 11:38:47.685 INFO  com.aspect.LogAspect                              :55   [32m127977978058641408[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:47.686 INFO  com.aspect.LogAspect                              :56   [32m127977978058641408[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:47.686 INFO  com.aspect.LogAspect                              :57   [32m127977978058641408[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:47.686 INFO  com.aspect.LogAspect                              :80   [32m127977978058641408[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2021-12-20 11:38:47.757 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977978058641408[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:47.758 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977978058641408[0;39m ==> Parameters: 502(Long)
2021-12-20 11:38:47.840 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977978058641408[0;39m <==    Columns: count(0)
2021-12-20 11:38:47.841 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977978058641408[0;39m <==        Row: 0
2021-12-20 11:38:47.841 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977978058641408[0;39m <==      Total: 1
2021-12-20 11:38:47.842 INFO  com.servicess.EbookService                        :48   [32m127977978058641408[0;39m 总行数：0
2021-12-20 11:38:47.842 INFO  com.servicess.EbookService                        :49   [32m127977978058641408[0;39m 总页数：0
2021-12-20 11:38:47.843 INFO  com.aspect.LogAspect                              :92   [32m127977978058641408[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:38:47.843 INFO  com.aspect.LogAspect                              :93   [32m127977978058641408[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-20 11:38:48.141 INFO  com.aspect.LogAspect                              :54   [32m127977979971244032[0;39m ------------- 开始 -------------
2021-12-20 11:38:48.141 INFO  com.aspect.LogAspect                              :55   [32m127977979971244032[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:48.141 INFO  com.aspect.LogAspect                              :56   [32m127977979971244032[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:48.141 INFO  com.aspect.LogAspect                              :57   [32m127977979971244032[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:48.142 INFO  com.aspect.LogAspect                              :80   [32m127977979971244032[0;39m 请求参数: [{"categoryId2":503,"page":1,"size":1000}]
2021-12-20 11:38:48.226 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977979971244032[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:48.227 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977979971244032[0;39m ==> Parameters: 503(Long)
2021-12-20 11:38:48.291 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977979971244032[0;39m <==    Columns: count(0)
2021-12-20 11:38:48.292 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977979971244032[0;39m <==        Row: 0
2021-12-20 11:38:48.293 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977979971244032[0;39m <==      Total: 1
2021-12-20 11:38:48.294 INFO  com.servicess.EbookService                        :48   [32m127977979971244032[0;39m 总行数：0
2021-12-20 11:38:48.295 INFO  com.servicess.EbookService                        :49   [32m127977979971244032[0;39m 总页数：0
2021-12-20 11:38:48.295 INFO  com.aspect.LogAspect                              :92   [32m127977979971244032[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:38:48.296 INFO  com.aspect.LogAspect                              :93   [32m127977979971244032[0;39m ------------- 结束 耗时：155 ms -------------
2021-12-20 11:38:49.839 INFO  com.aspect.LogAspect                              :54   [32m127977987093172224[0;39m ------------- 开始 -------------
2021-12-20 11:38:49.839 INFO  com.aspect.LogAspect                              :55   [32m127977987093172224[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:49.840 INFO  com.aspect.LogAspect                              :56   [32m127977987093172224[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:49.840 INFO  com.aspect.LogAspect                              :57   [32m127977987093172224[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:49.840 INFO  com.aspect.LogAspect                              :80   [32m127977987093172224[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2021-12-20 11:38:49.926 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977987093172224[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:49.927 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977987093172224[0;39m ==> Parameters: 401(Long)
2021-12-20 11:38:50.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127977987810398208[0;39m 生成今日电子书快照开始
2021-12-20 11:38:50.031 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977987093172224[0;39m <==    Columns: count(0)
2021-12-20 11:38:50.031 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127977987093172224[0;39m <==        Row: 1
2021-12-20 11:38:50.031 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127977987093172224[0;39m <==      Total: 1
2021-12-20 11:38:50.032 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977987093172224[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:38:50.034 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977987093172224[0;39m ==> Parameters: 401(Long), 1000(Integer)
2021-12-20 11:38:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977987810398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:50.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977987810398208[0;39m ==> Parameters: 
2021-12-20 11:38:50.111 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977987093172224[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:38:50.111 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127977987093172224[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2021-12-20 11:38:50.112 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127977987093172224[0;39m <==      Total: 1
2021-12-20 11:38:50.112 INFO  com.servicess.EbookService                        :48   [32m127977987093172224[0;39m 总行数：1
2021-12-20 11:38:50.113 INFO  com.servicess.EbookService                        :49   [32m127977987093172224[0;39m 总页数：1
2021-12-20 11:38:50.113 INFO  com.aspect.LogAspect                              :92   [32m127977987093172224[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2021-12-20 11:38:50.113 INFO  com.aspect.LogAspect                              :93   [32m127977987093172224[0;39m ------------- 结束 耗时：274 ms -------------
2021-12-20 11:38:50.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127977987810398208[0;39m <==    Updates: 0
2021-12-20 11:38:50.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127977987810398208[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:38:51.129 INFO  com.aspect.LogAspect                              :54   [32m127977992503824384[0;39m ------------- 开始 -------------
2021-12-20 11:38:51.129 INFO  com.aspect.LogAspect                              :55   [32m127977992503824384[0;39m 请求地址: http://localhost:8081/doc/all/4 GET
2021-12-20 11:38:51.129 INFO  com.aspect.LogAspect                              :56   [32m127977992503824384[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:38:51.129 INFO  com.aspect.LogAspect                              :57   [32m127977992503824384[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:51.130 INFO  com.aspect.LogAspect                              :80   [32m127977992503824384[0;39m 请求参数: [4]
2021-12-20 11:38:51.213 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977992503824384[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:38:51.213 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977992503824384[0;39m ==> Parameters: 4(Long)
2021-12-20 11:38:51.329 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977992503824384[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:51.330 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127977992503824384[0;39m <==        Row: 127977197154734080, 4, 0, 前言, 1, 0, 0
2021-12-20 11:38:51.332 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127977992503824384[0;39m <==      Total: 1
2021-12-20 11:38:51.335 INFO  com.aspect.LogAspect                              :92   [32m127977992503824384[0;39m 返回结果: {"content":[{"ebookId":4,"id":127977197154734080,"name":"前言","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-12-20 11:38:51.336 INFO  com.aspect.LogAspect                              :93   [32m127977992503824384[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 11:38:51.367 INFO  com.aspect.LogAspect                              :54   [32m127977993502068736[0;39m ------------- 开始 -------------
2021-12-20 11:38:51.368 INFO  com.aspect.LogAspect                              :55   [32m127977993502068736[0;39m 请求地址: http://localhost:8081/doc/find-content/127977197154734080 GET
2021-12-20 11:38:51.368 INFO  com.aspect.LogAspect                              :56   [32m127977993502068736[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:51.369 INFO  com.aspect.LogAspect                              :57   [32m127977993502068736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:51.369 INFO  com.aspect.LogAspect                              :80   [32m127977993502068736[0;39m 请求参数: [127977197154734080]
2021-12-20 11:38:51.370 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977993502068736[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:51.371 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977993502068736[0;39m ==> Parameters: 127977197154734080(Long)
2021-12-20 11:38:51.483 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977993502068736[0;39m <==    Columns: id, content
2021-12-20 11:38:51.484 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127977993502068736[0;39m <==        Row: 127977197154734080, <<BLOB>>
2021-12-20 11:38:51.485 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127977993502068736[0;39m <==      Total: 1
2021-12-20 11:38:51.487 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977993502068736[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:51.488 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977993502068736[0;39m ==> Parameters: 127977197154734080(Long)
2021-12-20 11:38:51.652 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127977993502068736[0;39m <==    Updates: 1
2021-12-20 11:38:51.653 INFO  com.aspect.LogAspect                              :92   [32m127977993502068736[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:51.653 INFO  com.aspect.LogAspect                              :93   [32m127977993502068736[0;39m ------------- 结束 耗时：286 ms -------------
2021-12-20 11:38:52.044 INFO  com.aspect.LogAspect                              :54   [32m127977996341612544[0;39m ------------- 开始 -------------
2021-12-20 11:38:52.044 INFO  com.aspect.LogAspect                              :55   [32m127977996341612544[0;39m 请求地址: http://localhost:8081/doc/vote/127977197154734080 GET
2021-12-20 11:38:52.044 INFO  com.aspect.LogAspect                              :56   [32m127977996341612544[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:52.045 INFO  com.aspect.LogAspect                              :57   [32m127977996341612544[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:52.045 INFO  com.aspect.LogAspect                              :80   [32m127977996341612544[0;39m 请求参数: [127977197154734080]
2021-12-20 11:38:52.086 INFO  com.Util.RedisUtil                                :31   [32m127977996341612544[0;39m key不存在，放入：DOC_VOTE_127977197154734080_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:52.197 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977996341612544[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:52.199 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977996341612544[0;39m ==> Parameters: 127977197154734080(Long)
2021-12-20 11:38:52.395 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127977996341612544[0;39m <==    Updates: 1
2021-12-20 11:38:52.396 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977996341612544[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:52.398 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977996341612544[0;39m ==> Parameters: 127977197154734080(Long)
2021-12-20 11:38:52.489 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977996341612544[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:52.490 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127977996341612544[0;39m <==        Row: 127977197154734080, 4, 0, 前言, 1, 1, 1
2021-12-20 11:38:52.492 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127977996341612544[0;39m <==      Total: 1
2021-12-20 11:38:52.495 INFO  com.aspect.LogAspect                              :92   [32m127977996341612544[0;39m 返回结果: {"success":true}
2021-12-20 11:38:52.495 INFO  com.aspect.LogAspect                              :93   [32m127977996341612544[0;39m ------------- 结束 耗时：451 ms -------------
2021-12-20 11:38:52.497 INFO  com.websocket.WebSocketServer                     :71   [32m127977996341612544[0;39m 推送消息：XWBKRDXmLE，内容：【前言】被点赞！
2021-12-20 11:38:53.439 INFO  com.aspect.LogAspect                              :54   [32m127978002192666624[0;39m ------------- 开始 -------------
2021-12-20 11:38:53.439 INFO  com.aspect.LogAspect                              :55   [32m127978002192666624[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:38:53.439 INFO  com.aspect.LogAspect                              :56   [32m127978002192666624[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:38:53.440 INFO  com.aspect.LogAspect                              :57   [32m127978002192666624[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:53.440 INFO  com.aspect.LogAspect                              :80   [32m127978002192666624[0;39m 请求参数: []
2021-12-20 11:38:53.440 INFO  com.aspect.LogAspect                              :54   [32m127978002196860928[0;39m ------------- 开始 -------------
2021-12-20 11:38:53.440 INFO  com.aspect.LogAspect                              :55   [32m127978002196860928[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:38:53.440 INFO  com.aspect.LogAspect                              :56   [32m127978002196860928[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:38:53.441 INFO  com.aspect.LogAspect                              :57   [32m127978002196860928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:53.441 INFO  com.aspect.LogAspect                              :80   [32m127978002196860928[0;39m 请求参数: []
2021-12-20 11:38:53.442 INFO  com.aspect.LogAspect                              :54   [32m127978002205249536[0;39m ------------- 开始 -------------
2021-12-20 11:38:53.442 INFO  com.aspect.LogAspect                              :55   [32m127978002205249536[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:38:53.443 INFO  com.aspect.LogAspect                              :56   [32m127978002205249536[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:38:53.443 INFO  com.aspect.LogAspect                              :57   [32m127978002205249536[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:53.443 INFO  com.aspect.LogAspect                              :80   [32m127978002205249536[0;39m 请求参数: []
2021-12-20 11:38:53.563 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978002205249536[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:38:53.563 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978002192666624[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:53.563 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978002196860928[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:53.564 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978002205249536[0;39m ==> Parameters: 
2021-12-20 11:38:53.565 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978002192666624[0;39m ==> Parameters: 
2021-12-20 11:38:53.566 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978002196860928[0;39m ==> Parameters: 
2021-12-20 11:38:53.643 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:38:53.644 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:38:53.646 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:38:53.647 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:38:53.649 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:38:53.649 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978002192666624[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:38:53.650 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:38:53.651 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978002192666624[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:38:53.651 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:38:53.652 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:38:53.653 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978002192666624[0;39m <==        Row: 2021-12-20, 187, 58, -317, -117
2021-12-20 11:38:53.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:38:53.655 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978002192666624[0;39m <==      Total: 2
2021-12-20 11:38:53.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:38:53.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:38:53.656 INFO  com.aspect.LogAspect                              :92   [32m127978002192666624[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":187,"viewIncrease":-317,"voteCount":58,"voteIncrease":-117}],"success":true}
2021-12-20 11:38:53.657 INFO  com.aspect.LogAspect                              :93   [32m127978002192666624[0;39m ------------- 结束 耗时：218 ms -------------
2021-12-20 11:38:53.657 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:38:53.658 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:38:53.659 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:38:53.660 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:38:53.663 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:38:53.665 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:38:53.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:38:53.668 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:38:53.669 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978002205249536[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:38:53.671 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978002205249536[0;39m <==      Total: 19
2021-12-20 11:38:53.680 INFO  com.aspect.LogAspect                              :92   [32m127978002205249536[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:38:53.680 INFO  com.aspect.LogAspect                              :93   [32m127978002205249536[0;39m ------------- 结束 耗时：238 ms -------------
2021-12-20 11:38:53.713 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978002196860928[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:38:53.714 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978002196860928[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:38:53.715 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978002196860928[0;39m <==      Total: 1
2021-12-20 11:38:53.715 INFO  com.aspect.LogAspect                              :92   [32m127978002196860928[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:38:53.716 INFO  com.aspect.LogAspect                              :93   [32m127978002196860928[0;39m ------------- 结束 耗时：276 ms -------------
2021-12-20 11:38:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127978008777723904[0;39m 生成今日电子书快照开始
2021-12-20 11:38:55.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978008777723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:38:55.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978008777723904[0;39m ==> Parameters: 
2021-12-20 11:38:55.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978008777723904[0;39m <==    Updates: 0
2021-12-20 11:38:55.246 INFO  com.job.EbookSnapshotJob                          :35   [32m127978008777723904[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 11:38:55.743 INFO  com.aspect.LogAspect                              :54   [32m127978011856343040[0;39m ------------- 开始 -------------
2021-12-20 11:38:55.743 INFO  com.aspect.LogAspect                              :55   [32m127978011856343040[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:38:55.744 INFO  com.aspect.LogAspect                              :56   [32m127978011856343040[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:38:55.744 INFO  com.aspect.LogAspect                              :57   [32m127978011856343040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:55.744 INFO  com.aspect.LogAspect                              :80   [32m127978011856343040[0;39m 请求参数: [{"categoryId2":117509419725623296,"page":1,"size":1000}]
2021-12-20 11:38:55.815 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978011856343040[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:38:55.815 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978011856343040[0;39m ==> Parameters: 117509419725623296(Long)
2021-12-20 11:38:55.885 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127978011856343040[0;39m <==    Columns: count(0)
2021-12-20 11:38:55.886 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127978011856343040[0;39m <==        Row: 1
2021-12-20 11:38:55.887 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978011856343040[0;39m <==      Total: 1
2021-12-20 11:38:55.889 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127978011856343040[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:38:55.890 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127978011856343040[0;39m ==> Parameters: 117509419725623296(Long), 1000(Integer)
2021-12-20 11:38:55.965 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127978011856343040[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:38:55.966 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127978011856343040[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2021-12-20 11:38:55.967 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127978011856343040[0;39m <==      Total: 1
2021-12-20 11:38:55.968 INFO  com.servicess.EbookService                        :48   [32m127978011856343040[0;39m 总行数：1
2021-12-20 11:38:55.968 INFO  com.servicess.EbookService                        :49   [32m127978011856343040[0;39m 总页数：1
2021-12-20 11:38:55.969 INFO  com.aspect.LogAspect                              :92   [32m127978011856343040[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2021-12-20 11:38:55.970 INFO  com.aspect.LogAspect                              :93   [32m127978011856343040[0;39m ------------- 结束 耗时：227 ms -------------
2021-12-20 11:38:56.697 INFO  com.aspect.LogAspect                              :54   [32m127978015857709056[0;39m ------------- 开始 -------------
2021-12-20 11:38:56.697 INFO  com.aspect.LogAspect                              :55   [32m127978015857709056[0;39m 请求地址: http://localhost:8081/doc/all/5 GET
2021-12-20 11:38:56.698 INFO  com.aspect.LogAspect                              :56   [32m127978015857709056[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:38:56.698 INFO  com.aspect.LogAspect                              :57   [32m127978015857709056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:56.699 INFO  com.aspect.LogAspect                              :80   [32m127978015857709056[0;39m 请求参数: [5]
2021-12-20 11:38:56.767 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127978015857709056[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:38:56.768 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127978015857709056[0;39m ==> Parameters: 5(Long)
2021-12-20 11:38:56.848 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978015857709056[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:56.849 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978015857709056[0;39m <==        Row: 127977107048501248, 5, 0, 文档1, 1, 0, 0
2021-12-20 11:38:56.854 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127978015857709056[0;39m <==      Total: 1
2021-12-20 11:38:56.856 INFO  com.aspect.LogAspect                              :92   [32m127978015857709056[0;39m 返回结果: {"content":[{"ebookId":5,"id":127977107048501248,"name":"文档1","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-12-20 11:38:56.857 INFO  com.aspect.LogAspect                              :93   [32m127978015857709056[0;39m ------------- 结束 耗时：160 ms -------------
2021-12-20 11:38:56.893 INFO  com.aspect.LogAspect                              :54   [32m127978016679792640[0;39m ------------- 开始 -------------
2021-12-20 11:38:56.895 INFO  com.aspect.LogAspect                              :55   [32m127978016679792640[0;39m 请求地址: http://localhost:8081/doc/find-content/127977107048501248 GET
2021-12-20 11:38:56.896 INFO  com.aspect.LogAspect                              :56   [32m127978016679792640[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:38:56.897 INFO  com.aspect.LogAspect                              :57   [32m127978016679792640[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:56.900 INFO  com.aspect.LogAspect                              :80   [32m127978016679792640[0;39m 请求参数: [127977107048501248]
2021-12-20 11:38:56.988 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978016679792640[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:38:56.989 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978016679792640[0;39m ==> Parameters: 127977107048501248(Long)
2021-12-20 11:38:57.068 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127978016679792640[0;39m <==    Columns: id, content
2021-12-20 11:38:57.070 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127978016679792640[0;39m <==        Row: 127977107048501248, <<BLOB>>
2021-12-20 11:38:57.071 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978016679792640[0;39m <==      Total: 1
2021-12-20 11:38:57.073 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978016679792640[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:38:57.074 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978016679792640[0;39m ==> Parameters: 127977107048501248(Long)
2021-12-20 11:38:57.211 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978016679792640[0;39m <==    Updates: 1
2021-12-20 11:38:57.212 INFO  com.aspect.LogAspect                              :92   [32m127978016679792640[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:38:57.213 INFO  com.aspect.LogAspect                              :93   [32m127978016679792640[0;39m ------------- 结束 耗时：320 ms -------------
2021-12-20 11:38:57.420 INFO  com.aspect.LogAspect                              :54   [32m127978018890190848[0;39m ------------- 开始 -------------
2021-12-20 11:38:57.420 INFO  com.aspect.LogAspect                              :55   [32m127978018890190848[0;39m 请求地址: http://localhost:8081/doc/vote/127977107048501248 GET
2021-12-20 11:38:57.420 INFO  com.aspect.LogAspect                              :56   [32m127978018890190848[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:38:57.420 INFO  com.aspect.LogAspect                              :57   [32m127978018890190848[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:57.420 INFO  com.aspect.LogAspect                              :80   [32m127978018890190848[0;39m 请求参数: [127977107048501248]
2021-12-20 11:38:57.479 INFO  com.Util.RedisUtil                                :31   [32m127978018890190848[0;39m key不存在，放入：DOC_VOTE_127977107048501248_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:38:57.596 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978018890190848[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:38:57.598 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978018890190848[0;39m ==> Parameters: 127977107048501248(Long)
2021-12-20 11:38:57.749 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978018890190848[0;39m <==    Updates: 1
2021-12-20 11:38:57.751 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978018890190848[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:38:57.752 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978018890190848[0;39m ==> Parameters: 127977107048501248(Long)
2021-12-20 11:38:57.833 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978018890190848[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:38:57.833 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978018890190848[0;39m <==        Row: 127977107048501248, 5, 0, 文档1, 1, 1, 1
2021-12-20 11:38:57.833 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978018890190848[0;39m <==      Total: 1
2021-12-20 11:38:57.836 INFO  com.aspect.LogAspect                              :92   [32m127978018890190848[0;39m 返回结果: {"success":true}
2021-12-20 11:38:57.836 INFO  com.aspect.LogAspect                              :93   [32m127978018890190848[0;39m ------------- 结束 耗时：416 ms -------------
2021-12-20 11:38:57.836 INFO  com.websocket.WebSocketServer                     :71   [32m127978018890190848[0;39m 推送消息：XWBKRDXmLE，内容：【文档1】被点赞！
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :54   [32m127978024636387329[0;39m ------------- 开始 -------------
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :54   [32m127978024636387328[0;39m ------------- 开始 -------------
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :55   [32m127978024636387329[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :55   [32m127978024636387328[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :56   [32m127978024636387329[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :56   [32m127978024636387328[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :57   [32m127978024636387329[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :57   [32m127978024636387328[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :80   [32m127978024636387329[0;39m 请求参数: []
2021-12-20 11:38:58.790 INFO  com.aspect.LogAspect                              :80   [32m127978024636387328[0;39m 请求参数: []
2021-12-20 11:38:58.791 INFO  com.aspect.LogAspect                              :54   [32m127978024640581632[0;39m ------------- 开始 -------------
2021-12-20 11:38:58.791 INFO  com.aspect.LogAspect                              :55   [32m127978024640581632[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:38:58.792 INFO  com.aspect.LogAspect                              :56   [32m127978024640581632[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:38:58.792 INFO  com.aspect.LogAspect                              :57   [32m127978024640581632[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:38:58.792 INFO  com.aspect.LogAspect                              :80   [32m127978024640581632[0;39m 请求参数: []
2021-12-20 11:38:58.855 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978024636387328[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:58.855 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978024636387328[0;39m ==> Parameters: 
2021-12-20 11:38:58.880 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978024636387329[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:38:58.880 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978024636387329[0;39m ==> Parameters: 
2021-12-20 11:38:58.880 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978024640581632[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:38:58.880 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978024640581632[0;39m ==> Parameters: 
2021-12-20 11:38:58.912 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978024636387328[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:38:58.912 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978024636387328[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:38:58.912 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978024636387328[0;39m <==      Total: 1
2021-12-20 11:38:58.912 INFO  com.aspect.LogAspect                              :92   [32m127978024636387328[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:38:58.927 INFO  com.aspect.LogAspect                              :93   [32m127978024636387328[0;39m ------------- 结束 耗时：138 ms -------------
2021-12-20 11:38:58.965 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978024636387329[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:38:58.966 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978024636387329[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:38:58.967 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978024636387329[0;39m <==        Row: 2021-12-20, 187, 58, -317, -117
2021-12-20 11:38:58.968 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978024636387329[0;39m <==      Total: 2
2021-12-20 11:38:58.968 INFO  com.aspect.LogAspect                              :92   [32m127978024636387329[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":187,"viewIncrease":-317,"voteCount":58,"voteIncrease":-117}],"success":true}
2021-12-20 11:38:58.969 INFO  com.aspect.LogAspect                              :93   [32m127978024636387329[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-20 11:38:58.981 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:38:58.982 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:38:58.982 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:38:58.982 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:38:58.983 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:38:58.983 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:38:58.983 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:38:58.984 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:38:58.984 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:38:58.984 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:38:58.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:38:58.986 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:38:58.986 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978024640581632[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:38:58.986 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978024640581632[0;39m <==      Total: 19
2021-12-20 11:38:58.987 INFO  com.aspect.LogAspect                              :92   [32m127978024640581632[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:38:58.987 INFO  com.aspect.LogAspect                              :93   [32m127978024640581632[0;39m ------------- 结束 耗时：196 ms -------------
2021-12-20 11:39:00.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127978029736660992[0;39m 生成今日电子书快照开始
2021-12-20 11:39:00.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978029736660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:00.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978029736660992[0;39m ==> Parameters: 
2021-12-20 11:39:00.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978029736660992[0;39m <==    Updates: 0
2021-12-20 11:39:00.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127978029736660992[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 11:39:00.486 INFO  com.aspect.LogAspect                              :54   [32m127978031745732608[0;39m ------------- 开始 -------------
2021-12-20 11:39:00.486 INFO  com.aspect.LogAspect                              :55   [32m127978031745732608[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:39:00.486 INFO  com.aspect.LogAspect                              :56   [32m127978031745732608[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:39:00.486 INFO  com.aspect.LogAspect                              :57   [32m127978031745732608[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:00.486 INFO  com.aspect.LogAspect                              :80   [32m127978031745732608[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-20 11:39:00.564 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978031745732608[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:39:00.564 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978031745732608[0;39m ==> Parameters: 201(Long)
2021-12-20 11:39:00.629 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127978031745732608[0;39m <==    Columns: count(0)
2021-12-20 11:39:00.630 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127978031745732608[0;39m <==        Row: 0
2021-12-20 11:39:00.631 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978031745732608[0;39m <==      Total: 1
2021-12-20 11:39:00.632 INFO  com.servicess.EbookService                        :48   [32m127978031745732608[0;39m 总行数：0
2021-12-20 11:39:00.633 INFO  com.servicess.EbookService                        :49   [32m127978031745732608[0;39m 总页数：0
2021-12-20 11:39:00.633 INFO  com.aspect.LogAspect                              :92   [32m127978031745732608[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 11:39:00.634 INFO  com.aspect.LogAspect                              :93   [32m127978031745732608[0;39m ------------- 结束 耗时：149 ms -------------
2021-12-20 11:39:01.157 INFO  com.aspect.LogAspect                              :54   [32m127978034564304896[0;39m ------------- 开始 -------------
2021-12-20 11:39:01.158 INFO  com.aspect.LogAspect                              :55   [32m127978034564304896[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:39:01.158 INFO  com.aspect.LogAspect                              :56   [32m127978034564304896[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:39:01.158 INFO  com.aspect.LogAspect                              :57   [32m127978034564304896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:01.159 INFO  com.aspect.LogAspect                              :80   [32m127978034564304896[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-20 11:39:01.225 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978034564304896[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:39:01.225 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978034564304896[0;39m ==> Parameters: 202(Long)
2021-12-20 11:39:01.313 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127978034564304896[0;39m <==    Columns: count(0)
2021-12-20 11:39:01.313 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127978034564304896[0;39m <==        Row: 1
2021-12-20 11:39:01.314 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127978034564304896[0;39m <==      Total: 1
2021-12-20 11:39:01.314 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127978034564304896[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:39:01.315 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127978034564304896[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-20 11:39:01.436 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127978034564304896[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:39:01.437 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127978034564304896[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 102, 22
2021-12-20 11:39:01.437 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127978034564304896[0;39m <==      Total: 1
2021-12-20 11:39:01.438 INFO  com.servicess.EbookService                        :48   [32m127978034564304896[0;39m 总行数：1
2021-12-20 11:39:01.439 INFO  com.servicess.EbookService                        :49   [32m127978034564304896[0;39m 总页数：1
2021-12-20 11:39:01.440 INFO  com.aspect.LogAspect                              :92   [32m127978034564304896[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":102,"voteCount":22}],"total":1},"success":true}
2021-12-20 11:39:01.440 INFO  com.aspect.LogAspect                              :93   [32m127978034564304896[0;39m ------------- 结束 耗时：283 ms -------------
2021-12-20 11:39:02.029 INFO  com.aspect.LogAspect                              :54   [32m127978038221737984[0;39m ------------- 开始 -------------
2021-12-20 11:39:02.029 INFO  com.aspect.LogAspect                              :55   [32m127978038221737984[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-20 11:39:02.029 INFO  com.aspect.LogAspect                              :56   [32m127978038221737984[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:39:02.029 INFO  com.aspect.LogAspect                              :57   [32m127978038221737984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:02.030 INFO  com.aspect.LogAspect                              :80   [32m127978038221737984[0;39m 请求参数: [1]
2021-12-20 11:39:02.112 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127978038221737984[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:39:02.113 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127978038221737984[0;39m ==> Parameters: 1(Long)
2021-12-20 11:39:02.189 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:39:02.191 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-20 11:39:02.192 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-20 11:39:02.193 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 9, 2
2021-12-20 11:39:02.193 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 17, 4
2021-12-20 11:39:02.194 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 24, 6
2021-12-20 11:39:02.196 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-20 11:39:02.197 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127978038221737984[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 14, 2
2021-12-20 11:39:02.198 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127978038221737984[0;39m <==      Total: 7
2021-12-20 11:39:02.211 INFO  com.aspect.LogAspect                              :92   [32m127978038221737984[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":14,"voteCount":5},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":17,"voteCount":4},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":24,"voteCount":6},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":14,"voteCount":2}],"success":true}
2021-12-20 11:39:02.212 INFO  com.aspect.LogAspect                              :93   [32m127978038221737984[0;39m ------------- 结束 耗时：183 ms -------------
2021-12-20 11:39:02.256 INFO  com.aspect.LogAspect                              :54   [32m127978039173844992[0;39m ------------- 开始 -------------
2021-12-20 11:39:02.256 INFO  com.aspect.LogAspect                              :55   [32m127978039173844992[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-20 11:39:02.256 INFO  com.aspect.LogAspect                              :56   [32m127978039173844992[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:39:02.256 INFO  com.aspect.LogAspect                              :57   [32m127978039173844992[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:02.257 INFO  com.aspect.LogAspect                              :80   [32m127978039173844992[0;39m 请求参数: [119304585604108288]
2021-12-20 11:39:02.325 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978039173844992[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:39:02.326 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978039173844992[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:39:02.406 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127978039173844992[0;39m <==    Columns: id, content
2021-12-20 11:39:02.407 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127978039173844992[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-20 11:39:02.410 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978039173844992[0;39m <==      Total: 1
2021-12-20 11:39:02.412 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978039173844992[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:39:02.416 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978039173844992[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:39:02.589 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978039173844992[0;39m <==    Updates: 1
2021-12-20 11:39:02.592 INFO  com.aspect.LogAspect                              :92   [32m127978039173844992[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-20 11:39:02.593 INFO  com.aspect.LogAspect                              :93   [32m127978039173844992[0;39m ------------- 结束 耗时：337 ms -------------
2021-12-20 11:39:03.559 INFO  com.aspect.LogAspect                              :54   [32m127978044639023104[0;39m ------------- 开始 -------------
2021-12-20 11:39:03.559 INFO  com.aspect.LogAspect                              :55   [32m127978044639023104[0;39m 请求地址: http://localhost:8081/doc/find-content/118617791401168896 GET
2021-12-20 11:39:03.559 INFO  com.aspect.LogAspect                              :56   [32m127978044639023104[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:39:03.560 INFO  com.aspect.LogAspect                              :57   [32m127978044639023104[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:03.560 INFO  com.aspect.LogAspect                              :80   [32m127978044639023104[0;39m 请求参数: [118617791401168896]
2021-12-20 11:39:03.657 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978044639023104[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:39:03.659 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978044639023104[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:39:03.759 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978044639023104[0;39m <==      Total: 0
2021-12-20 11:39:03.761 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978044639023104[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:39:03.762 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978044639023104[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:39:03.910 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978044639023104[0;39m <==    Updates: 1
2021-12-20 11:39:03.911 INFO  com.aspect.LogAspect                              :92   [32m127978044639023104[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:39:03.912 INFO  com.aspect.LogAspect                              :93   [32m127978044639023104[0;39m ------------- 结束 耗时：353 ms -------------
2021-12-20 11:39:04.593 INFO  com.aspect.LogAspect                              :54   [32m127978048975933440[0;39m ------------- 开始 -------------
2021-12-20 11:39:04.594 INFO  com.aspect.LogAspect                              :55   [32m127978048975933440[0;39m 请求地址: http://localhost:8081/doc/vote/118617791401168896 GET
2021-12-20 11:39:04.594 INFO  com.aspect.LogAspect                              :56   [32m127978048975933440[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:39:04.594 INFO  com.aspect.LogAspect                              :57   [32m127978048975933440[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:04.594 INFO  com.aspect.LogAspect                              :80   [32m127978048975933440[0;39m 请求参数: [118617791401168896]
2021-12-20 11:39:04.635 INFO  com.Util.RedisUtil                                :31   [32m127978048975933440[0;39m key不存在，放入：DOC_VOTE_118617791401168896_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:39:04.747 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978048975933440[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:39:04.748 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978048975933440[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:39:04.904 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978048975933440[0;39m <==    Updates: 1
2021-12-20 11:39:04.905 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978048975933440[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:39:04.907 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978048975933440[0;39m ==> Parameters: 118617791401168896(Long)
2021-12-20 11:39:04.990 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978048975933440[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:39:04.991 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978048975933440[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 18, 5
2021-12-20 11:39:04.993 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978048975933440[0;39m <==      Total: 1
2021-12-20 11:39:04.994 INFO  com.aspect.LogAspect                              :92   [32m127978048975933440[0;39m 返回结果: {"success":true}
2021-12-20 11:39:04.995 INFO  com.aspect.LogAspect                              :93   [32m127978048975933440[0;39m ------------- 结束 耗时：402 ms -------------
2021-12-20 11:39:04.996 INFO  com.websocket.WebSocketServer                     :71   [32m127978048975933440[0;39m 推送消息：XWBKRDXmLE，内容：【文档2.2.1】被点赞！
2021-12-20 11:39:05.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127978050741735424[0;39m 生成今日电子书快照开始
2021-12-20 11:39:05.014 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978050741735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:05.015 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978050741735424[0;39m ==> Parameters: 
2021-12-20 11:39:05.178 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978050741735424[0;39m <==    Updates: 0
2021-12-20 11:39:05.178 INFO  com.job.EbookSnapshotJob                          :35   [32m127978050741735424[0;39m 生成今日电子书快照结束，耗时：164毫秒
2021-12-20 11:39:05.179 INFO  com.job.DocJob                                    :32   [32m127978051433795584[0;39m 更新电子书下的文档数据开始
2021-12-20 11:39:05.180 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978051433795584[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:39:05.180 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978051433795584[0;39m ==> Parameters: 
2021-12-20 11:39:05.334 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978051433795584[0;39m <==    Updates: 6
2021-12-20 11:39:05.336 INFO  com.job.DocJob                                    :35   [32m127978051433795584[0;39m 更新电子书下的文档数据结束，耗时：157毫秒
2021-12-20 11:39:05.486 INFO  com.aspect.LogAspect                              :54   [32m127978052721446912[0;39m ------------- 开始 -------------
2021-12-20 11:39:05.486 INFO  com.aspect.LogAspect                              :55   [32m127978052721446912[0;39m 请求地址: http://localhost:8081/doc/find-content/5 GET
2021-12-20 11:39:05.486 INFO  com.aspect.LogAspect                              :56   [32m127978052721446912[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:39:05.486 INFO  com.aspect.LogAspect                              :57   [32m127978052721446912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:05.487 INFO  com.aspect.LogAspect                              :80   [32m127978052721446912[0;39m 请求参数: [5]
2021-12-20 11:39:05.556 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978052721446912[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:39:05.556 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978052721446912[0;39m ==> Parameters: 5(Long)
2021-12-20 11:39:05.630 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978052721446912[0;39m <==      Total: 0
2021-12-20 11:39:05.631 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978052721446912[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:39:05.632 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978052721446912[0;39m ==> Parameters: 5(Long)
2021-12-20 11:39:05.767 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978052721446912[0;39m <==    Updates: 1
2021-12-20 11:39:05.768 INFO  com.aspect.LogAspect                              :92   [32m127978052721446912[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:39:05.769 INFO  com.aspect.LogAspect                              :93   [32m127978052721446912[0;39m ------------- 结束 耗时：283 ms -------------
2021-12-20 11:39:06.242 INFO  com.aspect.LogAspect                              :54   [32m127978055892340736[0;39m ------------- 开始 -------------
2021-12-20 11:39:06.242 INFO  com.aspect.LogAspect                              :55   [32m127978055892340736[0;39m 请求地址: http://localhost:8081/doc/vote/5 GET
2021-12-20 11:39:06.242 INFO  com.aspect.LogAspect                              :56   [32m127978055892340736[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:39:06.243 INFO  com.aspect.LogAspect                              :57   [32m127978055892340736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:06.243 INFO  com.aspect.LogAspect                              :80   [32m127978055892340736[0;39m 请求参数: [5]
2021-12-20 11:39:06.286 INFO  com.Util.RedisUtil                                :31   [32m127978055892340736[0;39m key不存在，放入：DOC_VOTE_5_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:39:06.443 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978055892340736[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:39:06.444 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978055892340736[0;39m ==> Parameters: 5(Long)
2021-12-20 11:39:06.588 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978055892340736[0;39m <==    Updates: 1
2021-12-20 11:39:06.591 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978055892340736[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:39:06.593 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978055892340736[0;39m ==> Parameters: 5(Long)
2021-12-20 11:39:06.673 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978055892340736[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:39:06.674 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978055892340736[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 15, 3
2021-12-20 11:39:06.674 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978055892340736[0;39m <==      Total: 1
2021-12-20 11:39:06.675 INFO  com.aspect.LogAspect                              :92   [32m127978055892340736[0;39m 返回结果: {"success":true}
2021-12-20 11:39:06.675 INFO  com.aspect.LogAspect                              :93   [32m127978055892340736[0;39m ------------- 结束 耗时：433 ms -------------
2021-12-20 11:39:06.675 INFO  com.websocket.WebSocketServer                     :71   [32m127978055892340736[0;39m 推送消息：XWBKRDXmLE，内容：【文档2.2】被点赞！
2021-12-20 11:39:06.933 INFO  com.aspect.LogAspect                              :54   [32m127978058790604800[0;39m ------------- 开始 -------------
2021-12-20 11:39:06.933 INFO  com.aspect.LogAspect                              :55   [32m127978058790604800[0;39m 请求地址: http://localhost:8081/doc/find-content/4 GET
2021-12-20 11:39:06.933 INFO  com.aspect.LogAspect                              :56   [32m127978058790604800[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:39:06.934 INFO  com.aspect.LogAspect                              :57   [32m127978058790604800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:06.934 INFO  com.aspect.LogAspect                              :80   [32m127978058790604800[0;39m 请求参数: [4]
2021-12-20 11:39:07.008 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978058790604800[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:39:07.009 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978058790604800[0;39m ==> Parameters: 4(Long)
2021-12-20 11:39:07.086 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978058790604800[0;39m <==      Total: 0
2021-12-20 11:39:07.087 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978058790604800[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:39:07.088 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978058790604800[0;39m ==> Parameters: 4(Long)
2021-12-20 11:39:07.235 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978058790604800[0;39m <==    Updates: 1
2021-12-20 11:39:07.236 INFO  com.aspect.LogAspect                              :92   [32m127978058790604800[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:39:07.236 INFO  com.aspect.LogAspect                              :93   [32m127978058790604800[0;39m ------------- 结束 耗时：303 ms -------------
2021-12-20 11:39:08.041 INFO  com.aspect.LogAspect                              :54   [32m127978063437893632[0;39m ------------- 开始 -------------
2021-12-20 11:39:08.042 INFO  com.aspect.LogAspect                              :55   [32m127978063437893632[0;39m 请求地址: http://localhost:8081/doc/vote/4 GET
2021-12-20 11:39:08.042 INFO  com.aspect.LogAspect                              :56   [32m127978063437893632[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:39:08.042 INFO  com.aspect.LogAspect                              :57   [32m127978063437893632[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:08.042 INFO  com.aspect.LogAspect                              :80   [32m127978063437893632[0;39m 请求参数: [4]
2021-12-20 11:39:08.084 INFO  com.Util.RedisUtil                                :31   [32m127978063437893632[0;39m key不存在，放入：DOC_VOTE_4_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:39:08.265 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978063437893632[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:39:08.266 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978063437893632[0;39m ==> Parameters: 4(Long)
2021-12-20 11:39:08.435 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978063437893632[0;39m <==    Updates: 1
2021-12-20 11:39:08.437 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978063437893632[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:39:08.438 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978063437893632[0;39m ==> Parameters: 4(Long)
2021-12-20 11:39:08.523 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978063437893632[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:39:08.524 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978063437893632[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 10, 3
2021-12-20 11:39:08.525 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978063437893632[0;39m <==      Total: 1
2021-12-20 11:39:08.526 INFO  com.aspect.LogAspect                              :92   [32m127978063437893632[0;39m 返回结果: {"success":true}
2021-12-20 11:39:08.526 INFO  com.websocket.WebSocketServer                     :71   [32m127978063437893632[0;39m 推送消息：XWBKRDXmLE，内容：【文档2.1】被点赞！
2021-12-20 11:39:08.526 INFO  com.aspect.LogAspect                              :93   [32m127978063437893632[0;39m ------------- 结束 耗时：485 ms -------------
2021-12-20 11:39:09.422 INFO  com.aspect.LogAspect                              :54   [32m127978069230227456[0;39m ------------- 开始 -------------
2021-12-20 11:39:09.422 INFO  com.aspect.LogAspect                              :55   [32m127978069230227456[0;39m 请求地址: http://localhost:8081/doc/find-content/3 GET
2021-12-20 11:39:09.422 INFO  com.aspect.LogAspect                              :56   [32m127978069230227456[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:39:09.423 INFO  com.aspect.LogAspect                              :57   [32m127978069230227456[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:09.423 INFO  com.aspect.LogAspect                              :80   [32m127978069230227456[0;39m 请求参数: [3]
2021-12-20 11:39:09.503 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978069230227456[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:39:09.504 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978069230227456[0;39m ==> Parameters: 3(Long)
2021-12-20 11:39:09.602 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127978069230227456[0;39m <==      Total: 0
2021-12-20 11:39:09.604 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978069230227456[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:39:09.605 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978069230227456[0;39m ==> Parameters: 3(Long)
2021-12-20 11:39:09.740 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127978069230227456[0;39m <==    Updates: 1
2021-12-20 11:39:09.741 INFO  com.aspect.LogAspect                              :92   [32m127978069230227456[0;39m 返回结果: {"content":"","success":true}
2021-12-20 11:39:09.741 INFO  com.aspect.LogAspect                              :93   [32m127978069230227456[0;39m ------------- 结束 耗时：319 ms -------------
2021-12-20 11:39:10.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127978071675506688[0;39m 生成今日电子书快照开始
2021-12-20 11:39:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978071675506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:10.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978071675506688[0;39m ==> Parameters: 
2021-12-20 11:39:10.208 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978071675506688[0;39m <==    Updates: 0
2021-12-20 11:39:10.209 INFO  com.job.EbookSnapshotJob                          :35   [32m127978071675506688[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-20 11:39:10.354 INFO  com.aspect.LogAspect                              :54   [32m127978073139318784[0;39m ------------- 开始 -------------
2021-12-20 11:39:10.354 INFO  com.aspect.LogAspect                              :55   [32m127978073139318784[0;39m 请求地址: http://localhost:8081/doc/vote/3 GET
2021-12-20 11:39:10.354 INFO  com.aspect.LogAspect                              :56   [32m127978073139318784[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:39:10.354 INFO  com.aspect.LogAspect                              :57   [32m127978073139318784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:10.354 INFO  com.aspect.LogAspect                              :80   [32m127978073139318784[0;39m 请求参数: [3]
2021-12-20 11:39:10.395 INFO  com.Util.RedisUtil                                :31   [32m127978073139318784[0;39m key不存在，放入：DOC_VOTE_3_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:39:10.505 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978073139318784[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:39:10.506 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978073139318784[0;39m ==> Parameters: 3(Long)
2021-12-20 11:39:10.669 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127978073139318784[0;39m <==    Updates: 1
2021-12-20 11:39:10.670 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978073139318784[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:39:10.671 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978073139318784[0;39m ==> Parameters: 3(Long)
2021-12-20 11:39:10.752 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978073139318784[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:39:10.752 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127978073139318784[0;39m <==        Row: 3, 1, 0, 文档2, 2, 11, 2
2021-12-20 11:39:10.753 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127978073139318784[0;39m <==      Total: 1
2021-12-20 11:39:10.753 INFO  com.aspect.LogAspect                              :92   [32m127978073139318784[0;39m 返回结果: {"success":true}
2021-12-20 11:39:10.753 INFO  com.aspect.LogAspect                              :93   [32m127978073139318784[0;39m ------------- 结束 耗时：399 ms -------------
2021-12-20 11:39:10.753 INFO  com.websocket.WebSocketServer                     :71   [32m127978073139318784[0;39m 推送消息：XWBKRDXmLE，内容：【文档2】被点赞！
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :54   [32m127978076318601216[0;39m ------------- 开始 -------------
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :54   [32m127978076318601217[0;39m ------------- 开始 -------------
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :55   [32m127978076318601216[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :55   [32m127978076318601217[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :56   [32m127978076318601217[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :54   [32m127978076318601218[0;39m ------------- 开始 -------------
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :57   [32m127978076318601217[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :56   [32m127978076318601216[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :55   [32m127978076318601218[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :57   [32m127978076318601216[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:11.112 INFO  com.aspect.LogAspect                              :80   [32m127978076318601217[0;39m 请求参数: []
2021-12-20 11:39:11.113 INFO  com.aspect.LogAspect                              :80   [32m127978076318601216[0;39m 请求参数: []
2021-12-20 11:39:11.113 INFO  com.aspect.LogAspect                              :56   [32m127978076318601218[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:11.113 INFO  com.aspect.LogAspect                              :57   [32m127978076318601218[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:11.113 INFO  com.aspect.LogAspect                              :80   [32m127978076318601218[0;39m 请求参数: []
2021-12-20 11:39:11.181 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978076318601217[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:11.181 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978076318601217[0;39m ==> Parameters: 
2021-12-20 11:39:11.181 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978076318601216[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:11.181 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978076318601216[0;39m ==> Parameters: 
2021-12-20 11:39:11.202 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978076318601218[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:11.202 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978076318601218[0;39m ==> Parameters: 
2021-12-20 11:39:11.276 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978076318601217[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:11.277 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978076318601217[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:11.278 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978076318601217[0;39m <==      Total: 1
2021-12-20 11:39:11.278 INFO  com.aspect.LogAspect                              :92   [32m127978076318601217[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:11.279 INFO  com.aspect.LogAspect                              :93   [32m127978076318601217[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-20 11:39:11.292 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:11.293 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978076318601216[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:11.293 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:11.293 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:11.294 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:11.294 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978076318601216[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:11.294 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:11.295 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:11.295 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:11.295 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978076318601216[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:11.296 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:11.296 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978076318601216[0;39m <==      Total: 2
2021-12-20 11:39:11.297 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:11.297 INFO  com.aspect.LogAspect                              :92   [32m127978076318601216[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:11.297 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:11.298 INFO  com.aspect.LogAspect                              :93   [32m127978076318601216[0;39m ------------- 结束 耗时：186 ms -------------
2021-12-20 11:39:11.298 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:11.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:11.299 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:11.300 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:11.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:11.301 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:11.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:11.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:11.302 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:11.303 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978076318601218[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:11.303 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978076318601218[0;39m <==      Total: 19
2021-12-20 11:39:11.304 INFO  com.aspect.LogAspect                              :92   [32m127978076318601218[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:11.305 INFO  com.aspect.LogAspect                              :93   [32m127978076318601218[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-20 11:39:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127978092667998208[0;39m 生成今日电子书快照开始
2021-12-20 11:39:15.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978092667998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:15.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978092667998208[0;39m ==> Parameters: 
2021-12-20 11:39:15.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978092667998208[0;39m <==    Updates: 0
2021-12-20 11:39:15.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127978092667998208[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 11:39:15.648 INFO  com.websocket.WebSocketServer                     :41   [32m127978048975933440[0;39m 连接关闭，token：XWBKRDXmLE，session id：0！当前连接数：0
2021-12-20 11:39:16.490 INFO  com.websocket.WebSocketServer                     :32   [32m127978052721446912[0;39m 有新连接：token：lYlsrE6gAJ，session id：1，当前连接数：1
2021-12-20 11:39:16.560 INFO  com.aspect.LogAspect                              :54   [32m127978099169169408[0;39m ------------- 开始 -------------
2021-12-20 11:39:16.560 INFO  com.aspect.LogAspect                              :55   [32m127978099169169408[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :56   [32m127978099169169408[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :57   [32m127978099169169408[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :54   [32m127978099173363712[0;39m ------------- 开始 -------------
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :80   [32m127978099169169408[0;39m 请求参数: []
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :55   [32m127978099173363712[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :56   [32m127978099173363712[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :57   [32m127978099173363712[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:16.561 INFO  com.aspect.LogAspect                              :80   [32m127978099173363712[0;39m 请求参数: []
2021-12-20 11:39:16.564 INFO  com.aspect.LogAspect                              :54   [32m127978099185946624[0;39m ------------- 开始 -------------
2021-12-20 11:39:16.564 INFO  com.aspect.LogAspect                              :55   [32m127978099185946624[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:16.564 INFO  com.aspect.LogAspect                              :56   [32m127978099185946624[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:16.564 INFO  com.aspect.LogAspect                              :57   [32m127978099185946624[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:16.565 INFO  com.aspect.LogAspect                              :80   [32m127978099185946624[0;39m 请求参数: []
2021-12-20 11:39:16.635 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978099169169408[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:16.636 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978099169169408[0;39m ==> Parameters: 
2021-12-20 11:39:16.637 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978099173363712[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:16.638 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978099173363712[0;39m ==> Parameters: 
2021-12-20 11:39:16.644 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978099185946624[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:16.645 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978099185946624[0;39m ==> Parameters: 
2021-12-20 11:39:16.709 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978099169169408[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:16.711 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978099169169408[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:16.715 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978099169169408[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:16.716 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978099169169408[0;39m <==      Total: 2
2021-12-20 11:39:16.717 INFO  com.aspect.LogAspect                              :92   [32m127978099169169408[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:16.717 INFO  com.aspect.LogAspect                              :93   [32m127978099169169408[0;39m ------------- 结束 耗时：157 ms -------------
2021-12-20 11:39:16.745 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:16.745 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978099173363712[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:16.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:16.747 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978099173363712[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:16.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:16.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:16.748 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978099173363712[0;39m <==      Total: 1
2021-12-20 11:39:16.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:16.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:16.748 INFO  com.aspect.LogAspect                              :92   [32m127978099173363712[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:16.749 INFO  com.aspect.LogAspect                              :93   [32m127978099173363712[0;39m ------------- 结束 耗时：188 ms -------------
2021-12-20 11:39:16.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:16.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:16.750 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:16.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:16.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:16.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:16.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:16.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:16.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:16.755 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:16.755 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:16.755 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:16.756 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:16.756 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978099185946624[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:16.756 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978099185946624[0;39m <==      Total: 19
2021-12-20 11:39:16.757 INFO  com.aspect.LogAspect                              :92   [32m127978099185946624[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:16.758 INFO  com.aspect.LogAspect                              :93   [32m127978099185946624[0;39m ------------- 结束 耗时：194 ms -------------
2021-12-20 11:39:17.633 INFO  com.websocket.WebSocketServer                     :41   [32m127978069230227456[0;39m 连接关闭，token：lYlsrE6gAJ，session id：1！当前连接数：0
2021-12-20 11:39:18.399 INFO  com.websocket.WebSocketServer                     :32   [32m127978073139318784[0;39m 有新连接：token：lXOs9ghkdf，session id：2，当前连接数：1
2021-12-20 11:39:18.472 INFO  com.aspect.LogAspect                              :54   [32m127978107188678656[0;39m ------------- 开始 -------------
2021-12-20 11:39:18.473 INFO  com.aspect.LogAspect                              :55   [32m127978107188678656[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:18.473 INFO  com.aspect.LogAspect                              :56   [32m127978107188678656[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:18.473 INFO  com.aspect.LogAspect                              :57   [32m127978107188678656[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:18.473 INFO  com.aspect.LogAspect                              :80   [32m127978107188678656[0;39m 请求参数: []
2021-12-20 11:39:18.474 INFO  com.aspect.LogAspect                              :54   [32m127978107197067264[0;39m ------------- 开始 -------------
2021-12-20 11:39:18.474 INFO  com.aspect.LogAspect                              :55   [32m127978107197067264[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:18.474 INFO  com.aspect.LogAspect                              :56   [32m127978107197067264[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:18.475 INFO  com.aspect.LogAspect                              :57   [32m127978107197067264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:18.475 INFO  com.aspect.LogAspect                              :80   [32m127978107197067264[0;39m 请求参数: []
2021-12-20 11:39:18.476 INFO  com.aspect.LogAspect                              :54   [32m127978107205455872[0;39m ------------- 开始 -------------
2021-12-20 11:39:18.476 INFO  com.aspect.LogAspect                              :55   [32m127978107205455872[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:18.476 INFO  com.aspect.LogAspect                              :56   [32m127978107205455872[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:18.476 INFO  com.aspect.LogAspect                              :57   [32m127978107205455872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:18.476 INFO  com.aspect.LogAspect                              :80   [32m127978107205455872[0;39m 请求参数: []
2021-12-20 11:39:18.565 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978107188678656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:18.566 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978107188678656[0;39m ==> Parameters: 
2021-12-20 11:39:18.586 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978107197067264[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:18.586 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978107205455872[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:18.587 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978107205455872[0;39m ==> Parameters: 
2021-12-20 11:39:18.587 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978107197067264[0;39m ==> Parameters: 
2021-12-20 11:39:18.636 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978107188678656[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:18.638 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978107188678656[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:18.639 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978107188678656[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:18.641 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978107188678656[0;39m <==      Total: 2
2021-12-20 11:39:18.642 INFO  com.aspect.LogAspect                              :92   [32m127978107188678656[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:18.643 INFO  com.aspect.LogAspect                              :93   [32m127978107188678656[0;39m ------------- 结束 耗时：171 ms -------------
2021-12-20 11:39:18.664 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:18.664 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978107197067264[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:18.665 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:18.665 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978107197067264[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:18.665 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:18.665 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:18.665 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978107197067264[0;39m <==      Total: 1
2021-12-20 11:39:18.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:18.666 INFO  com.aspect.LogAspect                              :92   [32m127978107197067264[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:18.666 INFO  com.aspect.LogAspect                              :93   [32m127978107197067264[0;39m ------------- 结束 耗时：192 ms -------------
2021-12-20 11:39:18.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:18.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:18.667 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:18.667 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:18.667 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:18.668 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:18.668 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:18.669 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:18.669 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:18.670 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:18.670 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:18.671 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:18.671 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:18.671 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:18.672 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978107205455872[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:18.672 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978107205455872[0;39m <==      Total: 19
2021-12-20 11:39:18.674 INFO  com.aspect.LogAspect                              :92   [32m127978107205455872[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:18.675 INFO  com.aspect.LogAspect                              :93   [32m127978107205455872[0;39m ------------- 结束 耗时：199 ms -------------
2021-12-20 11:39:19.286 INFO  com.websocket.WebSocketServer                     :41   [32m127978048975933440[0;39m 连接关闭，token：lXOs9ghkdf，session id：2！当前连接数：0
2021-12-20 11:39:19.527 INFO  com.websocket.WebSocketServer                     :32   [32m127978052721446912[0;39m 有新连接：token：cZB2uCnHSH，session id：3，当前连接数：1
2021-12-20 11:39:19.576 INFO  com.aspect.LogAspect                              :54   [32m127978111819190272[0;39m ------------- 开始 -------------
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :55   [32m127978111819190272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :56   [32m127978111819190272[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :54   [32m127978111823384576[0;39m ------------- 开始 -------------
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :57   [32m127978111819190272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :55   [32m127978111823384576[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :80   [32m127978111819190272[0;39m 请求参数: []
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :56   [32m127978111823384576[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:19.577 INFO  com.aspect.LogAspect                              :57   [32m127978111823384576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:19.578 INFO  com.aspect.LogAspect                              :80   [32m127978111823384576[0;39m 请求参数: []
2021-12-20 11:39:19.579 INFO  com.aspect.LogAspect                              :54   [32m127978111831773184[0;39m ------------- 开始 -------------
2021-12-20 11:39:19.579 INFO  com.aspect.LogAspect                              :55   [32m127978111831773184[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:19.579 INFO  com.aspect.LogAspect                              :56   [32m127978111831773184[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:19.579 INFO  com.aspect.LogAspect                              :57   [32m127978111831773184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:19.579 INFO  com.aspect.LogAspect                              :80   [32m127978111831773184[0;39m 请求参数: []
2021-12-20 11:39:19.646 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978111819190272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:19.646 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978111819190272[0;39m ==> Parameters: 
2021-12-20 11:39:19.657 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978111831773184[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:19.657 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978111831773184[0;39m ==> Parameters: 
2021-12-20 11:39:19.660 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978111823384576[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:19.660 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978111823384576[0;39m ==> Parameters: 
2021-12-20 11:39:19.716 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978111819190272[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:19.716 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978111819190272[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:19.717 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978111819190272[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:19.718 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978111819190272[0;39m <==      Total: 2
2021-12-20 11:39:19.718 INFO  com.aspect.LogAspect                              :92   [32m127978111819190272[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:19.718 INFO  com.aspect.LogAspect                              :93   [32m127978111819190272[0;39m ------------- 结束 耗时：142 ms -------------
2021-12-20 11:39:19.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:19.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:19.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:19.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:19.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:19.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:19.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:19.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:19.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:19.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:19.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:19.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:19.738 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978111831773184[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:19.738 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978111831773184[0;39m <==      Total: 19
2021-12-20 11:39:19.738 INFO  com.aspect.LogAspect                              :92   [32m127978111831773184[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:19.739 INFO  com.aspect.LogAspect                              :93   [32m127978111831773184[0;39m ------------- 结束 耗时：160 ms -------------
2021-12-20 11:39:19.756 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978111823384576[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:19.756 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978111823384576[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:19.757 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978111823384576[0;39m <==      Total: 1
2021-12-20 11:39:19.758 INFO  com.aspect.LogAspect                              :92   [32m127978111823384576[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:19.758 INFO  com.aspect.LogAspect                              :93   [32m127978111823384576[0;39m ------------- 结束 耗时：181 ms -------------
2021-12-20 11:39:20.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127978113601769472[0;39m 生成今日电子书快照开始
2021-12-20 11:39:20.002 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978113601769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:20.004 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978113601769472[0;39m ==> Parameters: 
2021-12-20 11:39:20.090 INFO  com.websocket.WebSocketServer                     :41   [32m127978069230227456[0;39m 连接关闭，token：cZB2uCnHSH，session id：3！当前连接数：0
2021-12-20 11:39:20.198 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978113601769472[0;39m <==    Updates: 0
2021-12-20 11:39:20.198 INFO  com.job.EbookSnapshotJob                          :35   [32m127978113601769472[0;39m 生成今日电子书快照结束，耗时：197毫秒
2021-12-20 11:39:20.318 INFO  com.websocket.WebSocketServer                     :32   [32m127978073139318784[0;39m 有新连接：token：cAl7Nghvrp，session id：4，当前连接数：1
2021-12-20 11:39:20.366 INFO  com.aspect.LogAspect                              :54   [32m127978115132690432[0;39m ------------- 开始 -------------
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :55   [32m127978115132690432[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :54   [32m127978115136884736[0;39m ------------- 开始 -------------
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :56   [32m127978115132690432[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :55   [32m127978115136884736[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :57   [32m127978115132690432[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :56   [32m127978115136884736[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :80   [32m127978115132690432[0;39m 请求参数: []
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :57   [32m127978115136884736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:20.367 INFO  com.aspect.LogAspect                              :80   [32m127978115136884736[0;39m 请求参数: []
2021-12-20 11:39:20.367 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978115132690432[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:20.368 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978115132690432[0;39m ==> Parameters: 
2021-12-20 11:39:20.370 INFO  com.aspect.LogAspect                              :54   [32m127978115149467648[0;39m ------------- 开始 -------------
2021-12-20 11:39:20.370 INFO  com.aspect.LogAspect                              :55   [32m127978115149467648[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:20.371 INFO  com.aspect.LogAspect                              :56   [32m127978115149467648[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:20.371 INFO  com.aspect.LogAspect                              :57   [32m127978115149467648[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:20.371 INFO  com.aspect.LogAspect                              :80   [32m127978115149467648[0;39m 请求参数: []
2021-12-20 11:39:20.446 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978115136884736[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:20.446 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978115136884736[0;39m ==> Parameters: 
2021-12-20 11:39:20.448 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978115149467648[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:20.448 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978115132690432[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:20.448 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978115149467648[0;39m ==> Parameters: 
2021-12-20 11:39:20.448 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978115132690432[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:20.449 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978115132690432[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:20.449 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978115132690432[0;39m <==      Total: 2
2021-12-20 11:39:20.449 INFO  com.aspect.LogAspect                              :92   [32m127978115132690432[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:20.449 INFO  com.aspect.LogAspect                              :93   [32m127978115132690432[0;39m ------------- 结束 耗时：83 ms -------------
2021-12-20 11:39:20.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:20.524 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978115136884736[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:20.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:20.524 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978115136884736[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:20.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:20.525 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978115136884736[0;39m <==      Total: 1
2021-12-20 11:39:20.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:20.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:20.525 INFO  com.aspect.LogAspect                              :92   [32m127978115136884736[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:20.525 INFO  com.aspect.LogAspect                              :93   [32m127978115136884736[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-20 11:39:20.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:20.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:20.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:20.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:20.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:20.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:20.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:20.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:20.527 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:20.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:20.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:20.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:20.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:20.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:20.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978115149467648[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:20.529 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978115149467648[0;39m <==      Total: 19
2021-12-20 11:39:20.530 INFO  com.aspect.LogAspect                              :92   [32m127978115149467648[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:20.530 INFO  com.aspect.LogAspect                              :93   [32m127978115149467648[0;39m ------------- 结束 耗时：160 ms -------------
2021-12-20 11:39:20.666 INFO  com.websocket.WebSocketServer                     :41   [32m127978048975933440[0;39m 连接关闭，token：cAl7Nghvrp，session id：4！当前连接数：0
2021-12-20 11:39:20.901 INFO  com.websocket.WebSocketServer                     :32   [32m127978052721446912[0;39m 有新连接：token：GQjsyghnAP，session id：5，当前连接数：1
2021-12-20 11:39:20.950 INFO  com.aspect.LogAspect                              :54   [32m127978117582163968[0;39m ------------- 开始 -------------
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :54   [32m127978117586358272[0;39m ------------- 开始 -------------
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :55   [32m127978117586358272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :55   [32m127978117582163968[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :56   [32m127978117582163968[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :56   [32m127978117586358272[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :57   [32m127978117582163968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :57   [32m127978117586358272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:20.951 INFO  com.aspect.LogAspect                              :80   [32m127978117582163968[0;39m 请求参数: []
2021-12-20 11:39:20.952 INFO  com.aspect.LogAspect                              :80   [32m127978117586358272[0;39m 请求参数: []
2021-12-20 11:39:20.952 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978117586358272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:20.953 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978117586358272[0;39m ==> Parameters: 
2021-12-20 11:39:20.953 INFO  com.aspect.LogAspect                              :54   [32m127978117594746880[0;39m ------------- 开始 -------------
2021-12-20 11:39:20.953 INFO  com.aspect.LogAspect                              :55   [32m127978117594746880[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:20.954 INFO  com.aspect.LogAspect                              :56   [32m127978117594746880[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:20.954 INFO  com.aspect.LogAspect                              :57   [32m127978117594746880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:20.954 INFO  com.aspect.LogAspect                              :80   [32m127978117594746880[0;39m 请求参数: []
2021-12-20 11:39:20.954 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978117594746880[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:20.954 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978117594746880[0;39m ==> Parameters: 
2021-12-20 11:39:21.028 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978117582163968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:21.029 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978117582163968[0;39m ==> Parameters: 
2021-12-20 11:39:21.050 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978117586358272[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:21.050 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:21.051 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:21.051 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978117586358272[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:21.051 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:21.051 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:21.051 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978117586358272[0;39m <==      Total: 1
2021-12-20 11:39:21.052 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:21.052 INFO  com.aspect.LogAspect                              :92   [32m127978117586358272[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:21.052 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:21.052 INFO  com.aspect.LogAspect                              :93   [32m127978117586358272[0;39m ------------- 结束 耗时：101 ms -------------
2021-12-20 11:39:21.052 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:21.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:21.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:21.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:21.054 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:21.054 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:21.054 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:21.055 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:21.056 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:21.056 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:21.056 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:21.057 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:21.057 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:21.057 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978117594746880[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:21.058 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978117594746880[0;39m <==      Total: 19
2021-12-20 11:39:21.060 INFO  com.aspect.LogAspect                              :92   [32m127978117594746880[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:21.060 INFO  com.aspect.LogAspect                              :93   [32m127978117594746880[0;39m ------------- 结束 耗时：107 ms -------------
2021-12-20 11:39:21.120 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978117582163968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:21.121 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978117582163968[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:21.121 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978117582163968[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:21.122 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978117582163968[0;39m <==      Total: 2
2021-12-20 11:39:21.123 INFO  com.aspect.LogAspect                              :92   [32m127978117582163968[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:21.123 INFO  com.aspect.LogAspect                              :93   [32m127978117582163968[0;39m ------------- 结束 耗时：173 ms -------------
2021-12-20 11:39:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127978134627815424[0;39m 生成今日电子书快照开始
2021-12-20 11:39:25.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978134627815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:25.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978134627815424[0;39m ==> Parameters: 
2021-12-20 11:39:25.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978134627815424[0;39m <==    Updates: 0
2021-12-20 11:39:25.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127978134627815424[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:39:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127978155599335424[0;39m 生成今日电子书快照开始
2021-12-20 11:39:30.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978155599335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:30.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978155599335424[0;39m ==> Parameters: 
2021-12-20 11:39:30.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978155599335424[0;39m <==    Updates: 0
2021-12-20 11:39:30.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127978155599335424[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 11:39:32.410 INFO  com.websocket.WebSocketServer                     :41   [32m127978069230227456[0;39m 连接关闭，token：GQjsyghnAP，session id：5！当前连接数：0
2021-12-20 11:39:33.078 INFO  com.websocket.WebSocketServer                     :32   [32m127978073139318784[0;39m 有新连接：token：6yq1gm6OW2，session id：6，当前连接数：1
2021-12-20 11:39:33.152 INFO  com.aspect.LogAspect                              :54   [32m127978168761061376[0;39m ------------- 开始 -------------
2021-12-20 11:39:33.152 INFO  com.aspect.LogAspect                              :55   [32m127978168761061376[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:33.153 INFO  com.aspect.LogAspect                              :56   [32m127978168761061376[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:33.153 INFO  com.aspect.LogAspect                              :57   [32m127978168761061376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:33.153 INFO  com.aspect.LogAspect                              :80   [32m127978168761061376[0;39m 请求参数: []
2021-12-20 11:39:33.153 INFO  com.aspect.LogAspect                              :54   [32m127978168765255680[0;39m ------------- 开始 -------------
2021-12-20 11:39:33.153 INFO  com.aspect.LogAspect                              :55   [32m127978168765255680[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:33.154 INFO  com.aspect.LogAspect                              :56   [32m127978168765255680[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:33.154 INFO  com.aspect.LogAspect                              :57   [32m127978168765255680[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:33.154 INFO  com.aspect.LogAspect                              :80   [32m127978168765255680[0;39m 请求参数: []
2021-12-20 11:39:33.156 INFO  com.aspect.LogAspect                              :54   [32m127978168777838592[0;39m ------------- 开始 -------------
2021-12-20 11:39:33.156 INFO  com.aspect.LogAspect                              :55   [32m127978168777838592[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:33.156 INFO  com.aspect.LogAspect                              :56   [32m127978168777838592[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:33.156 INFO  com.aspect.LogAspect                              :57   [32m127978168777838592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:33.156 INFO  com.aspect.LogAspect                              :80   [32m127978168777838592[0;39m 请求参数: []
2021-12-20 11:39:33.236 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978168761061376[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:33.236 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978168761061376[0;39m ==> Parameters: 
2021-12-20 11:39:33.247 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978168765255680[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:33.247 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978168777838592[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:33.247 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978168777838592[0;39m ==> Parameters: 
2021-12-20 11:39:33.247 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978168765255680[0;39m ==> Parameters: 
2021-12-20 11:39:33.315 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978168761061376[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:33.315 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978168761061376[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:33.316 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978168761061376[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:33.316 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978168761061376[0;39m <==      Total: 2
2021-12-20 11:39:33.316 INFO  com.aspect.LogAspect                              :92   [32m127978168761061376[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:33.316 INFO  com.aspect.LogAspect                              :93   [32m127978168761061376[0;39m ------------- 结束 耗时：164 ms -------------
2021-12-20 11:39:33.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:33.328 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978168765255680[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:33.328 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:33.329 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:33.329 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978168765255680[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:33.329 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:33.329 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:33.329 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978168765255680[0;39m <==      Total: 1
2021-12-20 11:39:33.329 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:33.330 INFO  com.aspect.LogAspect                              :92   [32m127978168765255680[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:33.330 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:33.330 INFO  com.aspect.LogAspect                              :93   [32m127978168765255680[0;39m ------------- 结束 耗时：177 ms -------------
2021-12-20 11:39:33.330 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:33.330 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:33.330 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:33.331 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:33.331 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:33.332 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:33.332 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:33.332 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:33.333 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:33.333 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:33.333 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:33.333 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:33.334 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978168777838592[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:33.334 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978168777838592[0;39m <==      Total: 19
2021-12-20 11:39:33.335 INFO  com.aspect.LogAspect                              :92   [32m127978168777838592[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:33.335 INFO  com.aspect.LogAspect                              :93   [32m127978168777838592[0;39m ------------- 结束 耗时：179 ms -------------
2021-12-20 11:39:34.831 INFO  com.websocket.WebSocketServer                     :41   [32m127978048975933440[0;39m 连接关闭，token：6yq1gm6OW2，session id：6！当前连接数：0
2021-12-20 11:39:35.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127978176524718080[0;39m 生成今日电子书快照开始
2021-12-20 11:39:35.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978176524718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:35.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978176524718080[0;39m ==> Parameters: 
2021-12-20 11:39:35.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978176524718080[0;39m <==    Updates: 0
2021-12-20 11:39:35.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127978176524718080[0;39m 生成今日电子书快照结束，耗时：258毫秒
2021-12-20 11:39:35.262 INFO  com.job.DocJob                                    :32   [32m127978177611042816[0;39m 更新电子书下的文档数据开始
2021-12-20 11:39:35.262 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978177611042816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:39:35.262 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978177611042816[0;39m ==> Parameters: 
2021-12-20 11:39:35.407 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978177611042816[0;39m <==    Updates: 6
2021-12-20 11:39:35.408 INFO  com.job.DocJob                                    :35   [32m127978177611042816[0;39m 更新电子书下的文档数据结束，耗时：146毫秒
2021-12-20 11:39:35.434 INFO  com.websocket.WebSocketServer                     :32   [32m127978052721446912[0;39m 有新连接：token：mg12ZloApD，session id：7，当前连接数：1
2021-12-20 11:39:35.501 INFO  com.aspect.LogAspect                              :54   [32m127978178613481472[0;39m ------------- 开始 -------------
2021-12-20 11:39:35.501 INFO  com.aspect.LogAspect                              :55   [32m127978178613481472[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:39:35.502 INFO  com.aspect.LogAspect                              :56   [32m127978178613481472[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:39:35.502 INFO  com.aspect.LogAspect                              :57   [32m127978178613481472[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:35.502 INFO  com.aspect.LogAspect                              :54   [32m127978178617675776[0;39m ------------- 开始 -------------
2021-12-20 11:39:35.502 INFO  com.aspect.LogAspect                              :80   [32m127978178613481472[0;39m 请求参数: []
2021-12-20 11:39:35.502 INFO  com.aspect.LogAspect                              :55   [32m127978178617675776[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:39:35.502 INFO  com.aspect.LogAspect                              :56   [32m127978178617675776[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:39:35.503 INFO  com.aspect.LogAspect                              :57   [32m127978178617675776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:35.503 INFO  com.aspect.LogAspect                              :80   [32m127978178617675776[0;39m 请求参数: []
2021-12-20 11:39:35.504 INFO  com.aspect.LogAspect                              :54   [32m127978178626064384[0;39m ------------- 开始 -------------
2021-12-20 11:39:35.505 INFO  com.aspect.LogAspect                              :55   [32m127978178626064384[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:39:35.505 INFO  com.aspect.LogAspect                              :56   [32m127978178626064384[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:39:35.505 INFO  com.aspect.LogAspect                              :57   [32m127978178626064384[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:39:35.505 INFO  com.aspect.LogAspect                              :80   [32m127978178626064384[0;39m 请求参数: []
2021-12-20 11:39:35.506 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978178626064384[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:39:35.506 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978178626064384[0;39m ==> Parameters: 
2021-12-20 11:39:35.579 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978178613481472[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:35.580 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978178617675776[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:39:35.580 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978178613481472[0;39m ==> Parameters: 
2021-12-20 11:39:35.580 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978178617675776[0;39m ==> Parameters: 
2021-12-20 11:39:35.595 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:39:35.595 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:39:35.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:39:35.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:39:35.598 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:39:35.598 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:39:35.598 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978178626064384[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:39:35.598 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978178626064384[0;39m <==      Total: 19
2021-12-20 11:39:35.599 INFO  com.aspect.LogAspect                              :92   [32m127978178626064384[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:39:35.599 INFO  com.aspect.LogAspect                              :93   [32m127978178626064384[0;39m ------------- 结束 耗时：95 ms -------------
2021-12-20 11:39:35.653 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978178613481472[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:39:35.654 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978178613481472[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:39:35.654 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978178613481472[0;39m <==        Row: 2021-12-20, 196, 66, -308, -109
2021-12-20 11:39:35.654 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978178613481472[0;39m <==      Total: 2
2021-12-20 11:39:35.655 INFO  com.aspect.LogAspect                              :92   [32m127978178613481472[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":196,"viewIncrease":-308,"voteCount":66,"voteIncrease":-109}],"success":true}
2021-12-20 11:39:35.655 INFO  com.aspect.LogAspect                              :93   [32m127978178613481472[0;39m ------------- 结束 耗时：154 ms -------------
2021-12-20 11:39:35.660 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978178617675776[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:39:35.661 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978178617675776[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:39:35.661 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978178617675776[0;39m <==      Total: 1
2021-12-20 11:39:35.661 INFO  com.aspect.LogAspect                              :92   [32m127978178617675776[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:39:35.662 INFO  com.aspect.LogAspect                              :93   [32m127978178617675776[0;39m ------------- 结束 耗时：160 ms -------------
2021-12-20 11:39:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127978197550764032[0;39m 生成今日电子书快照开始
2021-12-20 11:39:40.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978197550764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:40.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978197550764032[0;39m ==> Parameters: 
2021-12-20 11:39:40.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978197550764032[0;39m <==    Updates: 0
2021-12-20 11:39:40.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127978197550764032[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:39:45.031 INFO  com.job.EbookSnapshotJob                          :32   [32m127978218585198592[0;39m 生成今日电子书快照开始
2021-12-20 11:39:45.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978218585198592[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:45.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978218585198592[0;39m ==> Parameters: 
2021-12-20 11:39:45.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978218585198592[0;39m <==    Updates: 0
2021-12-20 11:39:45.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127978218585198592[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:39:50.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127978239456055296[0;39m 生成今日电子书快照开始
2021-12-20 11:39:50.202 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978239456055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:50.202 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978239456055296[0;39m ==> Parameters: 
2021-12-20 11:39:50.409 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978239456055296[0;39m <==    Updates: 0
2021-12-20 11:39:50.409 INFO  com.job.EbookSnapshotJob                          :35   [32m127978239456055296[0;39m 生成今日电子书快照结束，耗时：402毫秒
2021-12-20 11:39:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127978260423380992[0;39m 生成今日电子书快照开始
2021-12-20 11:39:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978260423380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:39:55.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978260423380992[0;39m ==> Parameters: 
2021-12-20 11:39:55.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978260423380992[0;39m <==    Updates: 0
2021-12-20 11:39:55.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127978260423380992[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:40:00.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127978281445232640[0;39m 生成今日电子书快照开始
2021-12-20 11:40:00.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978281445232640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:00.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978281445232640[0;39m ==> Parameters: 
2021-12-20 11:40:00.341 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978281445232640[0;39m <==    Updates: 0
2021-12-20 11:40:00.341 INFO  com.job.EbookSnapshotJob                          :35   [32m127978281445232640[0;39m 生成今日电子书快照结束，耗时：323毫秒
2021-12-20 11:40:05.014 INFO  com.job.DocJob                                    :32   [32m127978302399975424[0;39m 更新电子书下的文档数据开始
2021-12-20 11:40:05.115 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978302399975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:40:05.115 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978302399975424[0;39m ==> Parameters: 
2021-12-20 11:40:05.231 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978302399975424[0;39m <==    Updates: 6
2021-12-20 11:40:05.231 INFO  com.job.DocJob                                    :35   [32m127978302399975424[0;39m 更新电子书下的文档数据结束，耗时：217毫秒
2021-12-20 11:40:05.231 INFO  com.job.EbookSnapshotJob                          :32   [32m127978303310139392[0;39m 生成今日电子书快照开始
2021-12-20 11:40:05.231 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978303310139392[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:05.246 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978303310139392[0;39m ==> Parameters: 
2021-12-20 11:40:05.616 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978303310139392[0;39m <==    Updates: 0
2021-12-20 11:40:05.616 INFO  com.job.EbookSnapshotJob                          :35   [32m127978303310139392[0;39m 生成今日电子书快照结束，耗时：385毫秒
2021-12-20 11:40:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127978323363106816[0;39m 生成今日电子书快照开始
2021-12-20 11:40:10.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978323363106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:10.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978323363106816[0;39m ==> Parameters: 
2021-12-20 11:40:10.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978323363106816[0;39m <==    Updates: 0
2021-12-20 11:40:10.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127978323363106816[0;39m 生成今日电子书快照结束，耗时：262毫秒
2021-12-20 11:40:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127978344301072384[0;39m 生成今日电子书快照开始
2021-12-20 11:40:15.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978344301072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:15.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978344301072384[0;39m ==> Parameters: 
2021-12-20 11:40:15.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978344301072384[0;39m <==    Updates: 0
2021-12-20 11:40:15.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127978344301072384[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:40:20.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127978365360672768[0;39m 生成今日电子书快照开始
2021-12-20 11:40:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978365360672768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978365360672768[0;39m ==> Parameters: 
2021-12-20 11:40:20.304 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978365360672768[0;39m <==    Updates: 0
2021-12-20 11:40:20.304 INFO  com.job.EbookSnapshotJob                          :35   [32m127978365360672768[0;39m 生成今日电子书快照结束，耗时：279毫秒
2021-12-20 11:40:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127978386273472512[0;39m 生成今日电子书快照开始
2021-12-20 11:40:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978386273472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978386273472512[0;39m ==> Parameters: 
2021-12-20 11:40:25.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978386273472512[0;39m <==    Updates: 0
2021-12-20 11:40:25.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127978386273472512[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 11:40:26.461 INFO  com.websocket.WebSocketServer                     :41   [32m127978069230227456[0;39m 连接关闭，token：mg12ZloApD，session id：7！当前连接数：0
2021-12-20 11:40:27.154 INFO  com.websocket.WebSocketServer                     :32   [32m127978073139318784[0;39m 有新连接：token：spd9VhJCmE，session id：8，当前连接数：1
2021-12-20 11:40:27.225 INFO  com.aspect.LogAspect                              :54   [32m127978395559661568[0;39m ------------- 开始 -------------
2021-12-20 11:40:27.226 INFO  com.aspect.LogAspect                              :55   [32m127978395559661568[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:40:27.226 INFO  com.aspect.LogAspect                              :56   [32m127978395559661568[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:40:27.232 INFO  com.aspect.LogAspect                              :57   [32m127978395559661568[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:40:27.233 INFO  com.aspect.LogAspect                              :54   [32m127978395593216000[0;39m ------------- 开始 -------------
2021-12-20 11:40:27.233 INFO  com.aspect.LogAspect                              :80   [32m127978395559661568[0;39m 请求参数: []
2021-12-20 11:40:27.233 INFO  com.aspect.LogAspect                              :55   [32m127978395593216000[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:40:27.233 INFO  com.aspect.LogAspect                              :56   [32m127978395593216000[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:40:27.233 INFO  com.aspect.LogAspect                              :57   [32m127978395593216000[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:40:27.233 INFO  com.aspect.LogAspect                              :80   [32m127978395593216000[0;39m 请求参数: []
2021-12-20 11:40:27.236 INFO  com.aspect.LogAspect                              :54   [32m127978395605798912[0;39m ------------- 开始 -------------
2021-12-20 11:40:27.236 INFO  com.aspect.LogAspect                              :55   [32m127978395605798912[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:40:27.236 INFO  com.aspect.LogAspect                              :56   [32m127978395605798912[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:40:27.237 INFO  com.aspect.LogAspect                              :57   [32m127978395605798912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:40:27.237 INFO  com.aspect.LogAspect                              :80   [32m127978395605798912[0;39m 请求参数: []
2021-12-20 11:40:27.325 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978395559661568[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:40:27.325 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978395593216000[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:40:27.325 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978395559661568[0;39m ==> Parameters: 
2021-12-20 11:40:27.325 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978395593216000[0;39m ==> Parameters: 
2021-12-20 11:40:27.328 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978395605798912[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:40:27.329 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978395605798912[0;39m ==> Parameters: 
2021-12-20 11:40:27.414 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978395559661568[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:40:27.415 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:40:27.415 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978395559661568[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:40:27.415 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978395593216000[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:40:27.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:40:27.416 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978395593216000[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:40:27.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:40:27.417 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978395559661568[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:40:27.417 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:40:27.417 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978395593216000[0;39m <==      Total: 1
2021-12-20 11:40:27.417 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978395559661568[0;39m <==      Total: 2
2021-12-20 11:40:27.418 INFO  com.aspect.LogAspect                              :92   [32m127978395593216000[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:40:27.417 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:40:27.418 INFO  com.aspect.LogAspect                              :92   [32m127978395559661568[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:40:27.418 INFO  com.aspect.LogAspect                              :93   [32m127978395559661568[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-20 11:40:27.419 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:40:27.419 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:40:27.420 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:40:27.418 INFO  com.aspect.LogAspect                              :93   [32m127978395593216000[0;39m ------------- 结束 耗时：185 ms -------------
2021-12-20 11:40:27.420 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:40:27.421 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:40:27.421 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:40:27.422 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:40:27.422 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:40:27.425 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:40:27.426 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:40:27.427 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:40:27.427 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:40:27.428 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:40:27.429 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:40:27.429 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978395605798912[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:40:27.430 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978395605798912[0;39m <==      Total: 19
2021-12-20 11:40:27.434 INFO  com.aspect.LogAspect                              :92   [32m127978395605798912[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:40:27.435 INFO  com.aspect.LogAspect                              :93   [32m127978395605798912[0;39m ------------- 结束 耗时：199 ms -------------
2021-12-20 11:40:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127978407240798208[0;39m 生成今日电子书快照开始
2021-12-20 11:40:30.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978407240798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:30.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978407240798208[0;39m ==> Parameters: 
2021-12-20 11:40:30.240 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978407240798208[0;39m <==    Updates: 0
2021-12-20 11:40:30.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127978407240798208[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-20 11:40:35.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127978428182958080[0;39m 生成今日电子书快照开始
2021-12-20 11:40:35.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978428182958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:35.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978428182958080[0;39m ==> Parameters: 
2021-12-20 11:40:35.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978428182958080[0;39m <==    Updates: 0
2021-12-20 11:40:35.220 INFO  com.job.EbookSnapshotJob                          :35   [32m127978428182958080[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:40:35.220 INFO  com.job.DocJob                                    :32   [32m127978429093122048[0;39m 更新电子书下的文档数据开始
2021-12-20 11:40:35.220 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978429093122048[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:40:35.220 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978429093122048[0;39m ==> Parameters: 
2021-12-20 11:40:35.389 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978429093122048[0;39m <==    Updates: 6
2021-12-20 11:40:35.389 INFO  com.job.DocJob                                    :35   [32m127978429093122048[0;39m 更新电子书下的文档数据结束，耗时：169毫秒
2021-12-20 11:40:40.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127978449196421120[0;39m 生成今日电子书快照开始
2021-12-20 11:40:40.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978449196421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:40.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978449196421120[0;39m ==> Parameters: 
2021-12-20 11:40:40.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978449196421120[0;39m <==    Updates: 0
2021-12-20 11:40:40.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127978449196421120[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 11:40:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127978470163746816[0;39m 生成今日电子书快照开始
2021-12-20 11:40:45.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978470163746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:45.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978470163746816[0;39m ==> Parameters: 
2021-12-20 11:40:45.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978470163746816[0;39m <==    Updates: 0
2021-12-20 11:40:45.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127978470163746816[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:40:50.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127978491173015552[0;39m 生成今日电子书快照开始
2021-12-20 11:40:50.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978491173015552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:50.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978491173015552[0;39m ==> Parameters: 
2021-12-20 11:40:50.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978491173015552[0;39m <==    Updates: 0
2021-12-20 11:40:50.237 INFO  com.job.EbookSnapshotJob                          :35   [32m127978491173015552[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:40:55.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127978512140341248[0;39m 生成今日电子书快照开始
2021-12-20 11:40:55.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978512140341248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:40:55.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978512140341248[0;39m ==> Parameters: 
2021-12-20 11:40:55.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978512140341248[0;39m <==    Updates: 0
2021-12-20 11:40:55.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127978512140341248[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:41:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127978533107666944[0;39m 生成今日电子书快照开始
2021-12-20 11:41:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978533107666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:00.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978533107666944[0;39m ==> Parameters: 
2021-12-20 11:41:00.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978533107666944[0;39m <==    Updates: 0
2021-12-20 11:41:00.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127978533107666944[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:41:05.011 INFO  com.job.DocJob                                    :32   [32m127978554045632512[0;39m 更新电子书下的文档数据开始
2021-12-20 11:41:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978554045632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:41:05.096 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978554045632512[0;39m ==> Parameters: 
2021-12-20 11:41:05.312 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978554045632512[0;39m <==    Updates: 6
2021-12-20 11:41:05.312 INFO  com.job.DocJob                                    :35   [32m127978554045632512[0;39m 更新电子书下的文档数据结束，耗时：301毫秒
2021-12-20 11:41:05.312 INFO  com.job.EbookSnapshotJob                          :32   [32m127978555308118016[0;39m 生成今日电子书快照开始
2021-12-20 11:41:05.312 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978555308118016[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:05.318 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978555308118016[0;39m ==> Parameters: 
2021-12-20 11:41:05.450 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978555308118016[0;39m <==    Updates: 0
2021-12-20 11:41:05.450 INFO  com.job.EbookSnapshotJob                          :35   [32m127978555308118016[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-20 11:41:10.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127978575084261376[0;39m 生成今日电子书快照开始
2021-12-20 11:41:10.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978575084261376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:10.133 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978575084261376[0;39m ==> Parameters: 
2021-12-20 11:41:10.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978575084261376[0;39m <==    Updates: 0
2021-12-20 11:41:10.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127978575084261376[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:41:15.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127978596047392768[0;39m 生成今日电子书快照开始
2021-12-20 11:41:15.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978596047392768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:15.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978596047392768[0;39m ==> Parameters: 
2021-12-20 11:41:15.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978596047392768[0;39m <==    Updates: 0
2021-12-20 11:41:15.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127978596047392768[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:41:20.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127978617014718464[0;39m 生成今日电子书快照开始
2021-12-20 11:41:20.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978617014718464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:20.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978617014718464[0;39m ==> Parameters: 
2021-12-20 11:41:20.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978617014718464[0;39m <==    Updates: 0
2021-12-20 11:41:20.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127978617014718464[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:41:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127978637919129600[0;39m 生成今日电子书快照开始
2021-12-20 11:41:25.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978637919129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:25.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978637919129600[0;39m ==> Parameters: 
2021-12-20 11:41:25.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978637919129600[0;39m <==    Updates: 0
2021-12-20 11:41:25.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127978637919129600[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:41:30.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127978658894843904[0;39m 生成今日电子书快照开始
2021-12-20 11:41:30.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978658894843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:30.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978658894843904[0;39m ==> Parameters: 
2021-12-20 11:41:30.288 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978658894843904[0;39m <==    Updates: 0
2021-12-20 11:41:30.288 INFO  com.job.EbookSnapshotJob                          :35   [32m127978658894843904[0;39m 生成今日电子书快照结束，耗时：279毫秒
2021-12-20 11:41:35.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127978679929278464[0;39m 生成今日电子书快照开始
2021-12-20 11:41:35.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978679929278464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:35.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978679929278464[0;39m ==> Parameters: 
2021-12-20 11:41:35.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978679929278464[0;39m <==    Updates: 0
2021-12-20 11:41:35.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127978679929278464[0;39m 生成今日电子书快照结束，耗时：202毫秒
2021-12-20 11:41:35.226 INFO  com.job.DocJob                                    :32   [32m127978680776527872[0;39m 更新电子书下的文档数据开始
2021-12-20 11:41:35.226 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978680776527872[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:41:35.226 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978680776527872[0;39m ==> Parameters: 
2021-12-20 11:41:35.410 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978680776527872[0;39m <==    Updates: 6
2021-12-20 11:41:35.410 INFO  com.job.DocJob                                    :35   [32m127978680776527872[0;39m 更新电子书下的文档数据结束，耗时：184毫秒
2021-12-20 11:41:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127978700867244032[0;39m 生成今日电子书快照开始
2021-12-20 11:41:40.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978700867244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:40.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978700867244032[0;39m ==> Parameters: 
2021-12-20 11:41:40.305 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978700867244032[0;39m <==    Updates: 0
2021-12-20 11:41:40.305 INFO  com.job.EbookSnapshotJob                          :35   [32m127978700867244032[0;39m 生成今日电子书快照结束，耗时：289毫秒
2021-12-20 11:41:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127978721859735552[0;39m 生成今日电子书快照开始
2021-12-20 11:41:45.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978721859735552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:45.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978721859735552[0;39m ==> Parameters: 
2021-12-20 11:41:45.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978721859735552[0;39m <==    Updates: 0
2021-12-20 11:41:45.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127978721859735552[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:41:50.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127978742852227072[0;39m 生成今日电子书快照开始
2021-12-20 11:41:50.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978742852227072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:50.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978742852227072[0;39m ==> Parameters: 
2021-12-20 11:41:50.321 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978742852227072[0;39m <==    Updates: 0
2021-12-20 11:41:50.329 INFO  com.job.EbookSnapshotJob                          :35   [32m127978742852227072[0;39m 生成今日电子书快照结束，耗时：303毫秒
2021-12-20 11:41:55.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127978763790192640[0;39m 生成今日电子书快照开始
2021-12-20 11:41:55.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978763790192640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:41:55.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978763790192640[0;39m ==> Parameters: 
2021-12-20 11:41:55.401 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978763790192640[0;39m <==    Updates: 0
2021-12-20 11:41:55.401 INFO  com.job.EbookSnapshotJob                          :35   [32m127978763790192640[0;39m 生成今日电子书快照结束，耗时：383毫秒
2021-12-20 11:42:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127978784753324032[0;39m 生成今日电子书快照开始
2021-12-20 11:42:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978784753324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:00.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978784753324032[0;39m ==> Parameters: 
2021-12-20 11:42:00.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978784753324032[0;39m <==    Updates: 0
2021-12-20 11:42:00.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127978784753324032[0;39m 生成今日电子书快照结束，耗时：211毫秒
2021-12-20 11:42:05.014 INFO  com.job.DocJob                                    :32   [32m127978805716455424[0;39m 更新电子书下的文档数据开始
2021-12-20 11:42:05.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978805716455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:42:05.067 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978805716455424[0;39m ==> Parameters: 
2021-12-20 11:42:05.237 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978805716455424[0;39m <==    Updates: 6
2021-12-20 11:42:05.237 INFO  com.job.DocJob                                    :35   [32m127978805716455424[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 11:42:05.237 INFO  com.job.EbookSnapshotJob                          :32   [32m127978806651785216[0;39m 生成今日电子书快照开始
2021-12-20 11:42:05.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978806651785216[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:05.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978806651785216[0;39m ==> Parameters: 
2021-12-20 11:42:05.384 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978806651785216[0;39m <==    Updates: 0
2021-12-20 11:42:05.384 INFO  com.job.EbookSnapshotJob                          :35   [32m127978806651785216[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :54   [32m127978819687682048[0;39m ------------- 开始 -------------
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :55   [32m127978819687682048[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :56   [32m127978819687682048[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :54   [32m127978819687682049[0;39m ------------- 开始 -------------
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :57   [32m127978819687682048[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :55   [32m127978819687682049[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :80   [32m127978819687682048[0;39m 请求参数: []
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :56   [32m127978819687682049[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :57   [32m127978819687682049[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:42:08.345 INFO  com.aspect.LogAspect                              :80   [32m127978819687682049[0;39m 请求参数: []
2021-12-20 11:42:08.423 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978819687682048[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:42:08.424 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978819687682048[0;39m ==> Parameters: 
2021-12-20 11:42:08.424 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978819687682049[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:42:08.424 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978819687682049[0;39m ==> Parameters: 
2021-12-20 11:42:08.492 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978819687682048[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:42:08.492 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978819687682049[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:42:08.507 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978819687682048[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:42:08.507 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978819687682049[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:42:08.507 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978819687682049[0;39m <==      Total: 1
2021-12-20 11:42:08.507 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978819687682048[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:42:08.507 INFO  com.aspect.LogAspect                              :92   [32m127978819687682049[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:42:08.507 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978819687682048[0;39m <==      Total: 2
2021-12-20 11:42:08.507 INFO  com.aspect.LogAspect                              :93   [32m127978819687682049[0;39m ------------- 结束 耗时：162 ms -------------
2021-12-20 11:42:08.507 INFO  com.aspect.LogAspect                              :92   [32m127978819687682048[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:42:08.507 INFO  com.aspect.LogAspect                              :93   [32m127978819687682048[0;39m ------------- 结束 耗时：162 ms -------------
2021-12-20 11:42:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127978826675392512[0;39m 生成今日电子书快照开始
2021-12-20 11:42:10.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978826675392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:10.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978826675392512[0;39m ==> Parameters: 
2021-12-20 11:42:10.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978826675392512[0;39m <==    Updates: 0
2021-12-20 11:42:10.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127978826675392512[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:42:11.169 INFO  com.websocket.WebSocketServer                     :32   [32m127978395559661568[0;39m 有新连接：token：geFcU9OOuI，session id：9，当前连接数：2
2021-12-20 11:42:11.386 INFO  com.aspect.LogAspect                              :54   [32m127978832442560512[0;39m ------------- 开始 -------------
2021-12-20 11:42:11.386 INFO  com.aspect.LogAspect                              :55   [32m127978832442560512[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:42:11.386 INFO  com.aspect.LogAspect                              :56   [32m127978832442560512[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:42:11.387 INFO  com.aspect.LogAspect                              :57   [32m127978832442560512[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:42:11.387 INFO  com.aspect.LogAspect                              :80   [32m127978832442560512[0;39m 请求参数: []
2021-12-20 11:42:11.387 INFO  com.aspect.LogAspect                              :54   [32m127978832446754816[0;39m ------------- 开始 -------------
2021-12-20 11:42:11.387 INFO  com.aspect.LogAspect                              :55   [32m127978832446754816[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:42:11.387 INFO  com.aspect.LogAspect                              :56   [32m127978832446754816[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:42:11.388 INFO  com.aspect.LogAspect                              :57   [32m127978832446754816[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:42:11.388 INFO  com.aspect.LogAspect                              :80   [32m127978832446754816[0;39m 请求参数: []
2021-12-20 11:42:11.392 INFO  com.aspect.LogAspect                              :54   [32m127978832467726336[0;39m ------------- 开始 -------------
2021-12-20 11:42:11.392 INFO  com.aspect.LogAspect                              :55   [32m127978832467726336[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:42:11.392 INFO  com.aspect.LogAspect                              :56   [32m127978832467726336[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:42:11.392 INFO  com.aspect.LogAspect                              :57   [32m127978832467726336[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:42:11.393 INFO  com.aspect.LogAspect                              :80   [32m127978832467726336[0;39m 请求参数: []
2021-12-20 11:42:11.473 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978832467726336[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:42:11.473 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978832446754816[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:42:11.473 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978832442560512[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:42:11.473 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978832442560512[0;39m ==> Parameters: 
2021-12-20 11:42:11.473 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978832446754816[0;39m ==> Parameters: 
2021-12-20 11:42:11.473 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978832467726336[0;39m ==> Parameters: 
2021-12-20 11:42:11.544 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:42:11.545 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:42:11.547 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:42:11.548 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:42:11.548 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:42:11.549 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:42:11.549 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:42:11.549 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:42:11.550 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:42:11.550 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:42:11.551 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:42:11.551 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:42:11.552 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:42:11.552 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:42:11.553 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:42:11.553 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:42:11.554 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:42:11.554 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:42:11.555 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:42:11.555 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127978832467726336[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:42:11.555 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127978832467726336[0;39m <==      Total: 19
2021-12-20 11:42:11.558 INFO  com.aspect.LogAspect                              :92   [32m127978832467726336[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:42:11.559 INFO  com.aspect.LogAspect                              :93   [32m127978832467726336[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-20 11:42:11.560 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978832442560512[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:42:11.561 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978832442560512[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:42:11.561 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978832446754816[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:42:11.562 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127978832446754816[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:42:11.562 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127978832442560512[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:42:11.563 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127978832442560512[0;39m <==      Total: 2
2021-12-20 11:42:11.563 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127978832446754816[0;39m <==      Total: 1
2021-12-20 11:42:11.563 INFO  com.aspect.LogAspect                              :92   [32m127978832446754816[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:42:11.563 INFO  com.aspect.LogAspect                              :92   [32m127978832442560512[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:42:11.564 INFO  com.aspect.LogAspect                              :93   [32m127978832446754816[0;39m ------------- 结束 耗时：177 ms -------------
2021-12-20 11:42:11.564 INFO  com.aspect.LogAspect                              :93   [32m127978832442560512[0;39m ------------- 结束 耗时：178 ms -------------
2021-12-20 11:42:11.805 INFO  com.websocket.WebSocketServer                     :41   [32m127978178626064384[0;39m 连接关闭，token：spd9VhJCmE，session id：8！当前连接数：1
2021-12-20 11:42:15.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127978847630135296[0;39m 生成今日电子书快照开始
2021-12-20 11:42:15.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978847630135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:15.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978847630135296[0;39m ==> Parameters: 
2021-12-20 11:42:15.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978847630135296[0;39m <==    Updates: 0
2021-12-20 11:42:15.248 INFO  com.job.EbookSnapshotJob                          :35   [32m127978847630135296[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 11:42:18.898 INFO  com.websocket.WebSocketServer                     :41   [32m127978048975933440[0;39m 连接关闭，token：geFcU9OOuI，session id：9！当前连接数：0
2021-12-20 11:42:20.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127978868610043904[0;39m 生成今日电子书快照开始
2021-12-20 11:42:20.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978868610043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:20.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978868610043904[0;39m ==> Parameters: 
2021-12-20 11:42:20.294 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978868610043904[0;39m <==    Updates: 0
2021-12-20 11:42:20.294 INFO  com.job.EbookSnapshotJob                          :35   [32m127978868610043904[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 11:42:25.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127978889573175296[0;39m 生成今日电子书快照开始
2021-12-20 11:42:25.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978889573175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:25.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978889573175296[0;39m ==> Parameters: 
2021-12-20 11:42:25.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978889573175296[0;39m <==    Updates: 0
2021-12-20 11:42:25.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127978889573175296[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:42:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127978910574055424[0;39m 生成今日电子书快照开始
2021-12-20 11:42:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978910574055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978910574055424[0;39m ==> Parameters: 
2021-12-20 11:42:30.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978910574055424[0;39m <==    Updates: 0
2021-12-20 11:42:30.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127978910574055424[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:42:35.007 INFO  com.job.DocJob                                    :32   [32m127978931516215296[0;39m 更新电子书下的文档数据开始
2021-12-20 11:42:35.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978931516215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:42:35.061 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978931516215296[0;39m ==> Parameters: 
2021-12-20 11:42:35.230 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127978931516215296[0;39m <==    Updates: 6
2021-12-20 11:42:35.230 INFO  com.job.DocJob                                    :35   [32m127978931516215296[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 11:42:35.230 INFO  com.job.EbookSnapshotJob                          :32   [32m127978932451545088[0;39m 生成今日电子书快照开始
2021-12-20 11:42:35.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978932451545088[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:35.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978932451545088[0;39m ==> Parameters: 
2021-12-20 11:42:35.377 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978932451545088[0;39m <==    Updates: 0
2021-12-20 11:42:35.377 INFO  com.job.EbookSnapshotJob                          :35   [32m127978932451545088[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-20 11:42:40.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127978952550649856[0;39m 生成今日电子书快照开始
2021-12-20 11:42:40.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978952550649856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:40.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978952550649856[0;39m ==> Parameters: 
2021-12-20 11:42:40.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978952550649856[0;39m <==    Updates: 0
2021-12-20 11:42:40.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127978952550649856[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:42:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127978973517975552[0;39m 生成今日电子书快照开始
2021-12-20 11:42:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978973517975552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:45.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978973517975552[0;39m ==> Parameters: 
2021-12-20 11:42:45.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978973517975552[0;39m <==    Updates: 0
2021-12-20 11:42:45.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127978973517975552[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:42:50.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127978994485301248[0;39m 生成今日电子书快照开始
2021-12-20 11:42:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978994485301248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978994485301248[0;39m ==> Parameters: 
2021-12-20 11:42:50.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127978994485301248[0;39m <==    Updates: 0
2021-12-20 11:42:50.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127978994485301248[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:42:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127979015427461120[0;39m 生成今日电子书快照开始
2021-12-20 11:42:55.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979015427461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:42:55.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979015427461120[0;39m ==> Parameters: 
2021-12-20 11:42:55.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979015427461120[0;39m <==    Updates: 0
2021-12-20 11:42:55.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127979015427461120[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:43:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127979036390592512[0;39m 生成今日电子书快照开始
2021-12-20 11:43:00.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979036390592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:00.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979036390592512[0;39m ==> Parameters: 
2021-12-20 11:43:00.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979036390592512[0;39m <==    Updates: 0
2021-12-20 11:43:00.275 INFO  com.job.EbookSnapshotJob                          :35   [32m127979036390592512[0;39m 生成今日电子书快照结束，耗时：264毫秒
2021-12-20 11:43:05.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127979057412444160[0;39m 生成今日电子书快照开始
2021-12-20 11:43:05.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979057412444160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:05.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979057412444160[0;39m ==> Parameters: 
2021-12-20 11:43:05.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979057412444160[0;39m <==    Updates: 0
2021-12-20 11:43:05.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127979057412444160[0;39m 生成今日电子书快照结束，耗时：249毫秒
2021-12-20 11:43:05.272 INFO  com.job.DocJob                                    :32   [32m127979058456825856[0;39m 更新电子书下的文档数据开始
2021-12-20 11:43:05.272 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979058456825856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:43:05.272 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979058456825856[0;39m ==> Parameters: 
2021-12-20 11:43:05.427 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979058456825856[0;39m <==    Updates: 6
2021-12-20 11:43:05.427 INFO  com.job.DocJob                                    :35   [32m127979058456825856[0;39m 更新电子书下的文档数据结束，耗时：155毫秒
2021-12-20 11:43:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127979078346215424[0;39m 生成今日电子书快照开始
2021-12-20 11:43:10.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979078346215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:10.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979078346215424[0;39m ==> Parameters: 
2021-12-20 11:43:10.321 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979078346215424[0;39m <==    Updates: 0
2021-12-20 11:43:10.321 INFO  com.job.EbookSnapshotJob                          :35   [32m127979078346215424[0;39m 生成今日电子书快照结束，耗时：307毫秒
2021-12-20 11:43:15.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127979099313541120[0;39m 生成今日电子书快照开始
2021-12-20 11:43:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979099313541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:15.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979099313541120[0;39m ==> Parameters: 
2021-12-20 11:43:15.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979099313541120[0;39m <==    Updates: 0
2021-12-20 11:43:15.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127979099313541120[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:43:20.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127979120331198464[0;39m 生成今日电子书快照开始
2021-12-20 11:43:20.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979120331198464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:20.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979120331198464[0;39m ==> Parameters: 
2021-12-20 11:43:20.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979120331198464[0;39m <==    Updates: 0
2021-12-20 11:43:20.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127979120331198464[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:43:22.290 INFO  com.websocket.WebSocketServer                     :32   [32m127978069230227456[0;39m 有新连接：token：sI5x49hLMi，session id：a，当前连接数：1
2021-12-20 11:43:22.473 INFO  com.aspect.LogAspect                              :54   [32m127979130603048960[0;39m ------------- 开始 -------------
2021-12-20 11:43:22.473 INFO  com.aspect.LogAspect                              :55   [32m127979130603048960[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:43:22.474 INFO  com.aspect.LogAspect                              :56   [32m127979130603048960[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:43:22.474 INFO  com.aspect.LogAspect                              :57   [32m127979130603048960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:43:22.474 INFO  com.aspect.LogAspect                              :80   [32m127979130603048960[0;39m 请求参数: []
2021-12-20 11:43:22.474 INFO  com.aspect.LogAspect                              :54   [32m127979130607243264[0;39m ------------- 开始 -------------
2021-12-20 11:43:22.474 INFO  com.aspect.LogAspect                              :55   [32m127979130607243264[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:43:22.475 INFO  com.aspect.LogAspect                              :56   [32m127979130607243264[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:43:22.475 INFO  com.aspect.LogAspect                              :57   [32m127979130607243264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:43:22.475 INFO  com.aspect.LogAspect                              :80   [32m127979130607243264[0;39m 请求参数: []
2021-12-20 11:43:22.477 INFO  com.aspect.LogAspect                              :54   [32m127979130619826176[0;39m ------------- 开始 -------------
2021-12-20 11:43:22.477 INFO  com.aspect.LogAspect                              :55   [32m127979130619826176[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:43:22.477 INFO  com.aspect.LogAspect                              :56   [32m127979130619826176[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:43:22.478 INFO  com.aspect.LogAspect                              :57   [32m127979130619826176[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:43:22.478 INFO  com.aspect.LogAspect                              :80   [32m127979130619826176[0;39m 请求参数: []
2021-12-20 11:43:22.577 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127979130607243264[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:43:22.577 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127979130603048960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:43:22.578 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127979130607243264[0;39m ==> Parameters: 
2021-12-20 11:43:22.579 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127979130603048960[0;39m ==> Parameters: 
2021-12-20 11:43:22.583 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127979130619826176[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:43:22.583 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127979130619826176[0;39m ==> Parameters: 
2021-12-20 11:43:22.669 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127979130607243264[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:43:22.671 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127979130607243264[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:43:22.672 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127979130607243264[0;39m <==      Total: 1
2021-12-20 11:43:22.672 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127979130603048960[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:43:22.672 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:43:22.672 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:43:22.673 INFO  com.aspect.LogAspect                              :92   [32m127979130607243264[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:43:22.673 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127979130603048960[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:43:22.673 INFO  com.aspect.LogAspect                              :93   [32m127979130607243264[0;39m ------------- 结束 耗时：199 ms -------------
2021-12-20 11:43:22.673 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:43:22.674 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:43:22.675 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127979130603048960[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:43:22.675 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:43:22.676 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:43:22.676 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127979130603048960[0;39m <==      Total: 2
2021-12-20 11:43:22.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:43:22.677 INFO  com.aspect.LogAspect                              :92   [32m127979130603048960[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:43:22.678 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:43:22.678 INFO  com.aspect.LogAspect                              :93   [32m127979130603048960[0;39m ------------- 结束 耗时：205 ms -------------
2021-12-20 11:43:22.679 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:43:22.681 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:43:22.683 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:43:22.684 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:43:22.685 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:43:22.686 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:43:22.687 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:43:22.689 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:43:22.689 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:43:22.690 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:43:22.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:43:22.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979130619826176[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:43:22.692 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127979130619826176[0;39m <==      Total: 19
2021-12-20 11:43:22.695 INFO  com.aspect.LogAspect                              :92   [32m127979130619826176[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:43:22.695 INFO  com.aspect.LogAspect                              :93   [32m127979130619826176[0;39m ------------- 结束 耗时：218 ms -------------
2021-12-20 11:43:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127979141256581120[0;39m 生成今日电子书快照开始
2021-12-20 11:43:25.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979141256581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:25.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979141256581120[0;39m ==> Parameters: 
2021-12-20 11:43:25.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979141256581120[0;39m <==    Updates: 0
2021-12-20 11:43:25.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127979141256581120[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:43:27.970 INFO  com.websocket.WebSocketServer                     :41   [32m127978819687682049[0;39m 连接关闭，token：sI5x49hLMi，session id：a！当前连接数：0
2021-12-20 11:43:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127979162236489728[0;39m 生成今日电子书快照开始
2021-12-20 11:43:30.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979162236489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:30.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979162236489728[0;39m ==> Parameters: 
2021-12-20 11:43:30.322 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979162236489728[0;39m <==    Updates: 0
2021-12-20 11:43:30.322 INFO  com.job.EbookSnapshotJob                          :35   [32m127979162236489728[0;39m 生成今日电子书快照结束，耗时：307毫秒
2021-12-20 11:43:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127979183203815424[0;39m 生成今日电子书快照开始
2021-12-20 11:43:35.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979183203815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:35.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979183203815424[0;39m ==> Parameters: 
2021-12-20 11:43:35.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979183203815424[0;39m <==    Updates: 0
2021-12-20 11:43:35.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127979183203815424[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:43:35.215 INFO  com.job.DocJob                                    :32   [32m127979184046870528[0;39m 更新电子书下的文档数据开始
2021-12-20 11:43:35.215 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979184046870528[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:43:35.215 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979184046870528[0;39m ==> Parameters: 
2021-12-20 11:43:35.554 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979184046870528[0;39m <==    Updates: 6
2021-12-20 11:43:35.554 INFO  com.job.DocJob                                    :35   [32m127979184046870528[0;39m 更新电子书下的文档数据结束，耗时：339毫秒
2021-12-20 11:43:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127979204158558208[0;39m 生成今日电子书快照开始
2021-12-20 11:43:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979204158558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979204158558208[0;39m ==> Parameters: 
2021-12-20 11:43:40.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979204158558208[0;39m <==    Updates: 0
2021-12-20 11:43:40.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127979204158558208[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:43:45.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127979225180409856[0;39m 生成今日电子书快照开始
2021-12-20 11:43:45.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979225180409856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:45.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979225180409856[0;39m ==> Parameters: 
2021-12-20 11:43:45.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979225180409856[0;39m <==    Updates: 0
2021-12-20 11:43:45.275 INFO  com.job.EbookSnapshotJob                          :35   [32m127979225180409856[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:43:50.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127979246143541248[0;39m 生成今日电子书快照开始
2021-12-20 11:43:50.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979246143541248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:50.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979246143541248[0;39m ==> Parameters: 
2021-12-20 11:43:50.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979246143541248[0;39m <==    Updates: 0
2021-12-20 11:43:50.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127979246143541248[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:43:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127979267110866944[0;39m 生成今日电子书快照开始
2021-12-20 11:43:55.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979267110866944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:43:55.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979267110866944[0;39m ==> Parameters: 
2021-12-20 11:43:55.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979267110866944[0;39m <==    Updates: 0
2021-12-20 11:43:55.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127979267110866944[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:44:00.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127979288053026816[0;39m 生成今日电子书快照开始
2021-12-20 11:44:00.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979288053026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:00.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979288053026816[0;39m ==> Parameters: 
2021-12-20 11:44:00.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979288053026816[0;39m <==    Updates: 0
2021-12-20 11:44:00.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127979288053026816[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:44:05.014 INFO  com.job.DocJob                                    :32   [32m127979309032935424[0;39m 更新电子书下的文档数据开始
2021-12-20 11:44:05.068 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979309032935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:44:05.068 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979309032935424[0;39m ==> Parameters: 
2021-12-20 11:44:05.230 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979309032935424[0;39m <==    Updates: 6
2021-12-20 11:44:05.230 INFO  com.job.DocJob                                    :35   [32m127979309032935424[0;39m 更新电子书下的文档数据结束，耗时：216毫秒
2021-12-20 11:44:05.230 INFO  com.job.EbookSnapshotJob                          :32   [32m127979309938905088[0;39m 生成今日电子书快照开始
2021-12-20 11:44:05.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979309938905088[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:05.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979309938905088[0;39m ==> Parameters: 
2021-12-20 11:44:05.400 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979309938905088[0;39m <==    Updates: 0
2021-12-20 11:44:05.400 INFO  com.job.EbookSnapshotJob                          :35   [32m127979309938905088[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-20 11:44:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127979330000261120[0;39m 生成今日电子书快照开始
2021-12-20 11:44:10.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979330000261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:10.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979330000261120[0;39m ==> Parameters: 
2021-12-20 11:44:10.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979330000261120[0;39m <==    Updates: 0
2021-12-20 11:44:10.252 INFO  com.job.EbookSnapshotJob                          :35   [32m127979330000261120[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:44:15.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127979351022112768[0;39m 生成今日电子书快照开始
2021-12-20 11:44:15.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979351022112768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:15.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979351022112768[0;39m ==> Parameters: 
2021-12-20 11:44:15.284 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979351022112768[0;39m <==    Updates: 0
2021-12-20 11:44:15.284 INFO  com.job.EbookSnapshotJob                          :35   [32m127979351022112768[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 11:44:20.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127979371955884032[0;39m 生成今日电子书快照开始
2021-12-20 11:44:20.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979371955884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:20.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979371955884032[0;39m ==> Parameters: 
2021-12-20 11:44:20.348 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979371955884032[0;39m <==    Updates: 0
2021-12-20 11:44:20.348 INFO  com.job.EbookSnapshotJob                          :35   [32m127979371955884032[0;39m 生成今日电子书快照结束，耗时：332毫秒
2021-12-20 11:44:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127979392914821120[0;39m 生成今日电子书快照开始
2021-12-20 11:44:25.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979392914821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:25.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979392914821120[0;39m ==> Parameters: 
2021-12-20 11:44:25.344 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979392914821120[0;39m <==    Updates: 0
2021-12-20 11:44:25.360 INFO  com.job.EbookSnapshotJob                          :35   [32m127979392914821120[0;39m 生成今日电子书快照结束，耗时：347毫秒
2021-12-20 11:44:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127979413890535424[0;39m 生成今日电子书快照开始
2021-12-20 11:44:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979413890535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:30.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979413890535424[0;39m ==> Parameters: 
2021-12-20 11:44:30.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979413890535424[0;39m <==    Updates: 0
2021-12-20 11:44:30.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127979413890535424[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:44:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127979434849472512[0;39m 生成今日电子书快照开始
2021-12-20 11:44:35.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979434849472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:35.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979434849472512[0;39m ==> Parameters: 
2021-12-20 11:44:35.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979434849472512[0;39m <==    Updates: 0
2021-12-20 11:44:35.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127979434849472512[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:44:35.280 INFO  com.job.DocJob                                    :32   [32m127979435977740288[0;39m 更新电子书下的文档数据开始
2021-12-20 11:44:35.280 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979435977740288[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:44:35.280 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979435977740288[0;39m ==> Parameters: 
2021-12-20 11:44:35.465 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979435977740288[0;39m <==    Updates: 6
2021-12-20 11:44:35.465 INFO  com.job.DocJob                                    :35   [32m127979435977740288[0;39m 更新电子书下的文档数据结束，耗时：185毫秒
2021-12-20 11:44:40.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127979455858741248[0;39m 生成今日电子书快照开始
2021-12-20 11:44:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979455858741248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:40.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979455858741248[0;39m ==> Parameters: 
2021-12-20 11:44:40.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979455858741248[0;39m <==    Updates: 0
2021-12-20 11:44:40.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127979455858741248[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:44:45.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127979476821872640[0;39m 生成今日电子书快照开始
2021-12-20 11:44:45.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979476821872640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:45.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979476821872640[0;39m ==> Parameters: 
2021-12-20 11:44:45.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979476821872640[0;39m <==    Updates: 0
2021-12-20 11:44:45.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127979476821872640[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:44:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127979497772421120[0;39m 生成今日电子书快照开始
2021-12-20 11:44:50.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979497772421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:50.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979497772421120[0;39m ==> Parameters: 
2021-12-20 11:44:50.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979497772421120[0;39m <==    Updates: 0
2021-12-20 11:44:50.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127979497772421120[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:44:55.027 INFO  com.job.EbookSnapshotJob                          :32   [32m127979518802661376[0;39m 生成今日电子书快照开始
2021-12-20 11:44:55.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979518802661376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:44:55.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979518802661376[0;39m ==> Parameters: 
2021-12-20 11:44:55.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979518802661376[0;39m <==    Updates: 0
2021-12-20 11:44:55.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127979518802661376[0;39m 生成今日电子书快照结束，耗时：232毫秒
2021-12-20 11:45:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127979539740626944[0;39m 生成今日电子书快照开始
2021-12-20 11:45:00.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979539740626944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:00.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979539740626944[0;39m ==> Parameters: 
2021-12-20 11:45:00.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979539740626944[0;39m <==    Updates: 0
2021-12-20 11:45:00.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127979539740626944[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:45:05.016 INFO  com.job.DocJob                                    :32   [32m127979560699564032[0;39m 更新电子书下的文档数据开始
2021-12-20 11:45:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979560699564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:45:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979560699564032[0;39m ==> Parameters: 
2021-12-20 11:45:05.239 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979560699564032[0;39m <==    Updates: 6
2021-12-20 11:45:05.239 INFO  com.job.DocJob                                    :35   [32m127979560699564032[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 11:45:05.239 INFO  com.job.EbookSnapshotJob                          :32   [32m127979561634893824[0;39m 生成今日电子书快照开始
2021-12-20 11:45:05.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979561634893824[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:05.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979561634893824[0;39m ==> Parameters: 
2021-12-20 11:45:05.370 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979561634893824[0;39m <==    Updates: 0
2021-12-20 11:45:05.370 INFO  com.job.EbookSnapshotJob                          :35   [32m127979561634893824[0;39m 生成今日电子书快照结束，耗时：131毫秒
2021-12-20 11:45:10.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127979581637529600[0;39m 生成今日电子书快照开始
2021-12-20 11:45:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979581637529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979581637529600[0;39m ==> Parameters: 
2021-12-20 11:45:10.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979581637529600[0;39m <==    Updates: 0
2021-12-20 11:45:10.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127979581637529600[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-20 11:45:15.029 INFO  com.job.EbookSnapshotJob                          :32   [32m127979602697129984[0;39m 生成今日电子书快照开始
2021-12-20 11:45:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979602697129984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:15.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979602697129984[0;39m ==> Parameters: 
2021-12-20 11:45:15.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979602697129984[0;39m <==    Updates: 0
2021-12-20 11:45:15.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127979602697129984[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:45:20.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127979623588958208[0;39m 生成今日电子书快照开始
2021-12-20 11:45:20.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979623588958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:20.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979623588958208[0;39m ==> Parameters: 
2021-12-20 11:45:20.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979623588958208[0;39m <==    Updates: 0
2021-12-20 11:45:20.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127979623588958208[0;39m 生成今日电子书快照结束，耗时：264毫秒
2021-12-20 11:45:25.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127979644547895296[0;39m 生成今日电子书快照开始
2021-12-20 11:45:25.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979644547895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:25.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979644547895296[0;39m ==> Parameters: 
2021-12-20 11:45:25.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979644547895296[0;39m <==    Updates: 0
2021-12-20 11:45:25.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127979644547895296[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:45:30.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127979665573941248[0;39m 生成今日电子书快照开始
2021-12-20 11:45:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979665573941248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:30.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979665573941248[0;39m ==> Parameters: 
2021-12-20 11:45:30.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979665573941248[0;39m <==    Updates: 0
2021-12-20 11:45:30.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127979665573941248[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:45:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127979686507712512[0;39m 生成今日电子书快照开始
2021-12-20 11:45:35.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979686507712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:35.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979686507712512[0;39m ==> Parameters: 
2021-12-20 11:45:35.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979686507712512[0;39m <==    Updates: 0
2021-12-20 11:45:35.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127979686507712512[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:45:35.250 INFO  com.job.DocJob                                    :32   [32m127979687510151168[0;39m 更新电子书下的文档数据开始
2021-12-20 11:45:35.250 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979687510151168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:45:35.250 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979687510151168[0;39m ==> Parameters: 
2021-12-20 11:45:35.397 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979687510151168[0;39m <==    Updates: 6
2021-12-20 11:45:35.397 INFO  com.job.DocJob                                    :35   [32m127979687510151168[0;39m 更新电子书下的文档数据结束，耗时：147毫秒
2021-12-20 11:45:40.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127979707504398336[0;39m 生成今日电子书快照开始
2021-12-20 11:45:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979707504398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979707504398336[0;39m ==> Parameters: 
2021-12-20 11:45:40.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979707504398336[0;39m <==    Updates: 0
2021-12-20 11:45:40.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127979707504398336[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:45:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127979728454946816[0;39m 生成今日电子书快照开始
2021-12-20 11:45:45.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979728454946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:45.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979728454946816[0;39m ==> Parameters: 
2021-12-20 11:45:45.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979728454946816[0;39m <==    Updates: 0
2021-12-20 11:45:45.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127979728454946816[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:45:50.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127979749485187072[0;39m 生成今日电子书快照开始
2021-12-20 11:45:50.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979749485187072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:50.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979749485187072[0;39m ==> Parameters: 
2021-12-20 11:45:50.323 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979749485187072[0;39m <==    Updates: 0
2021-12-20 11:45:50.324 INFO  com.job.EbookSnapshotJob                          :35   [32m127979749485187072[0;39m 生成今日电子书快照结束，耗时：298毫秒
2021-12-20 11:45:55.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127979770381209600[0;39m 生成今日电子书快照开始
2021-12-20 11:45:55.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979770381209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:45:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979770381209600[0;39m ==> Parameters: 
2021-12-20 11:45:55.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979770381209600[0;39m <==    Updates: 0
2021-12-20 11:45:55.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127979770381209600[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-20 11:46:00.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127979791403061248[0;39m 生成今日电子书快照开始
2021-12-20 11:46:00.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979791403061248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:00.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979791403061248[0;39m ==> Parameters: 
2021-12-20 11:46:00.288 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979791403061248[0;39m <==    Updates: 0
2021-12-20 11:46:00.288 INFO  com.job.EbookSnapshotJob                          :35   [32m127979791403061248[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-20 11:46:05.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127979812332638208[0;39m 生成今日电子书快照开始
2021-12-20 11:46:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979812332638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979812332638208[0;39m ==> Parameters: 
2021-12-20 11:46:05.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979812332638208[0;39m <==    Updates: 0
2021-12-20 11:46:05.232 INFO  com.job.EbookSnapshotJob                          :35   [32m127979812332638208[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:46:05.232 INFO  com.job.DocJob                                    :32   [32m127979813263773696[0;39m 更新电子书下的文档数据开始
2021-12-20 11:46:05.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979813263773696[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:46:05.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979813263773696[0;39m ==> Parameters: 
2021-12-20 11:46:05.426 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979813263773696[0;39m <==    Updates: 6
2021-12-20 11:46:05.426 INFO  com.job.DocJob                                    :35   [32m127979813263773696[0;39m 更新电子书下的文档数据结束，耗时：194毫秒
2021-12-20 11:46:10.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127979833350295552[0;39m 生成今日电子书快照开始
2021-12-20 11:46:10.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979833350295552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:10.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979833350295552[0;39m ==> Parameters: 
2021-12-20 11:46:10.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979833350295552[0;39m <==    Updates: 0
2021-12-20 11:46:10.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127979833350295552[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 11:46:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127979854279872512[0;39m 生成今日电子书快照开始
2021-12-20 11:46:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979854279872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:15.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979854279872512[0;39m ==> Parameters: 
2021-12-20 11:46:15.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979854279872512[0;39m <==    Updates: 0
2021-12-20 11:46:15.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127979854279872512[0;39m 生成今日电子书快照结束，耗时：208毫秒
2021-12-20 11:46:20.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127979875280752640[0;39m 生成今日电子书快照开始
2021-12-20 11:46:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979875280752640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979875280752640[0;39m ==> Parameters: 
2021-12-20 11:46:20.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979875280752640[0;39m <==    Updates: 0
2021-12-20 11:46:20.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127979875280752640[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:46:25.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127979896193552384[0;39m 生成今日电子书快照开始
2021-12-20 11:46:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979896193552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979896193552384[0;39m ==> Parameters: 
2021-12-20 11:46:25.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979896193552384[0;39m <==    Updates: 0
2021-12-20 11:46:25.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127979896193552384[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 11:46:30.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127979917156683776[0;39m 生成今日电子书快照开始
2021-12-20 11:46:30.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979917156683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:30.064 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979917156683776[0;39m ==> Parameters: 
2021-12-20 11:46:30.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979917156683776[0;39m <==    Updates: 0
2021-12-20 11:46:30.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127979917156683776[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:46:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127979938178535424[0;39m 生成今日电子书快照开始
2021-12-20 11:46:35.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979938178535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:35.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979938178535424[0;39m ==> Parameters: 
2021-12-20 11:46:35.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979938178535424[0;39m <==    Updates: 0
2021-12-20 11:46:35.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127979938178535424[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:46:35.214 INFO  com.job.DocJob                                    :32   [32m127979939017396224[0;39m 更新电子书下的文档数据开始
2021-12-20 11:46:35.214 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979939017396224[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:46:35.214 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979939017396224[0;39m ==> Parameters: 
2021-12-20 11:46:35.377 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127979939017396224[0;39m <==    Updates: 6
2021-12-20 11:46:35.377 INFO  com.job.DocJob                                    :35   [32m127979939017396224[0;39m 更新电子书下的文档数据结束，耗时：163毫秒
2021-12-20 11:46:38.454 INFO  com.websocket.WebSocketServer                     :32   [32m127978073139318784[0;39m 有新连接：token：w26TwFFfsI，session id：b，当前连接数：1
2021-12-20 11:46:38.701 INFO  com.aspect.LogAspect                              :54   [32m127979953642934272[0;39m ------------- 开始 -------------
2021-12-20 11:46:38.701 INFO  com.aspect.LogAspect                              :55   [32m127979953642934272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:46:38.701 INFO  com.aspect.LogAspect                              :56   [32m127979953642934272[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:46:38.701 INFO  com.aspect.LogAspect                              :57   [32m127979953642934272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:46:38.702 INFO  com.aspect.LogAspect                              :80   [32m127979953642934272[0;39m 请求参数: []
2021-12-20 11:46:38.702 INFO  com.aspect.LogAspect                              :54   [32m127979953647128576[0;39m ------------- 开始 -------------
2021-12-20 11:46:38.703 INFO  com.aspect.LogAspect                              :55   [32m127979953647128576[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:46:38.703 INFO  com.aspect.LogAspect                              :56   [32m127979953647128576[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:46:38.704 INFO  com.aspect.LogAspect                              :57   [32m127979953647128576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:46:38.705 INFO  com.aspect.LogAspect                              :80   [32m127979953647128576[0;39m 请求参数: []
2021-12-20 11:46:38.708 INFO  com.aspect.LogAspect                              :54   [32m127979953672294400[0;39m ------------- 开始 -------------
2021-12-20 11:46:38.708 INFO  com.aspect.LogAspect                              :55   [32m127979953672294400[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:46:38.708 INFO  com.aspect.LogAspect                              :56   [32m127979953672294400[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:46:38.708 INFO  com.aspect.LogAspect                              :57   [32m127979953672294400[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:46:38.708 INFO  com.aspect.LogAspect                              :80   [32m127979953672294400[0;39m 请求参数: []
2021-12-20 11:46:38.795 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127979953647128576[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:46:38.796 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127979953647128576[0;39m ==> Parameters: 
2021-12-20 11:46:38.797 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127979953672294400[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:46:38.797 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127979953642934272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:46:38.798 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127979953672294400[0;39m ==> Parameters: 
2021-12-20 11:46:38.798 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127979953642934272[0;39m ==> Parameters: 
2021-12-20 11:46:38.887 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127979953642934272[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:46:38.887 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127979953647128576[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:46:38.889 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127979953642934272[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:46:38.889 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127979953647128576[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:46:38.891 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127979953647128576[0;39m <==      Total: 1
2021-12-20 11:46:38.892 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127979953642934272[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:46:38.894 INFO  com.aspect.LogAspect                              :92   [32m127979953647128576[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:46:38.894 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127979953642934272[0;39m <==      Total: 2
2021-12-20 11:46:38.895 INFO  com.aspect.LogAspect                              :93   [32m127979953647128576[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-20 11:46:38.896 INFO  com.aspect.LogAspect                              :92   [32m127979953642934272[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:46:38.896 INFO  com.aspect.LogAspect                              :93   [32m127979953642934272[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-20 11:46:38.900 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:46:38.901 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:46:38.903 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:46:38.904 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:46:38.906 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:46:38.908 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:46:38.909 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:46:38.910 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:46:38.910 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:46:38.911 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:46:38.912 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:46:38.912 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:46:38.913 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:46:38.913 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:46:38.914 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:46:38.914 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:46:38.914 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:46:38.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:46:38.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:46:38.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127979953672294400[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:46:38.916 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127979953672294400[0;39m <==      Total: 19
2021-12-20 11:46:38.917 INFO  com.aspect.LogAspect                              :92   [32m127979953672294400[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:46:38.918 INFO  com.aspect.LogAspect                              :93   [32m127979953672294400[0;39m ------------- 结束 耗时：211 ms -------------
2021-12-20 11:46:40.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127979959187804160[0;39m 生成今日电子书快照开始
2021-12-20 11:46:40.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979959187804160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:40.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979959187804160[0;39m ==> Parameters: 
2021-12-20 11:46:40.288 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979959187804160[0;39m <==    Updates: 0
2021-12-20 11:46:40.288 INFO  com.job.EbookSnapshotJob                          :35   [32m127979959187804160[0;39m 生成今日电子书快照结束，耗时：264毫秒
2021-12-20 11:46:45.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127979980083826688[0;39m 生成今日电子书快照开始
2021-12-20 11:46:45.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979980083826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:45.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979980083826688[0;39m ==> Parameters: 
2021-12-20 11:46:45.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127979980083826688[0;39m <==    Updates: 0
2021-12-20 11:46:45.243 INFO  com.job.EbookSnapshotJob                          :35   [32m127979980083826688[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:46:48.445 INFO  com.websocket.WebSocketServer                     :41   [32m127978048975933440[0;39m 连接关闭，token：w26TwFFfsI，session id：b！当前连接数：0
2021-12-20 11:46:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127980001105678336[0;39m 生成今日电子书快照开始
2021-12-20 11:46:50.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980001105678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:50.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980001105678336[0;39m ==> Parameters: 
2021-12-20 11:46:50.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980001105678336[0;39m <==    Updates: 0
2021-12-20 11:46:50.271 INFO  com.job.EbookSnapshotJob                          :35   [32m127980001105678336[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:46:55.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127980022035255296[0;39m 生成今日电子书快照开始
2021-12-20 11:46:55.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980022035255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:46:55.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980022035255296[0;39m ==> Parameters: 
2021-12-20 11:46:55.382 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980022035255296[0;39m <==    Updates: 0
2021-12-20 11:46:55.382 INFO  com.job.EbookSnapshotJob                          :35   [32m127980022035255296[0;39m 生成今日电子书快照结束，耗时：375毫秒
2021-12-20 11:47:00.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127980043023552512[0;39m 生成今日电子书快照开始
2021-12-20 11:47:00.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980043023552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:00.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980043023552512[0;39m ==> Parameters: 
2021-12-20 11:47:00.412 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980043023552512[0;39m <==    Updates: 0
2021-12-20 11:47:00.412 INFO  com.job.EbookSnapshotJob                          :35   [32m127980043023552512[0;39m 生成今日电子书快照结束，耗时：401毫秒
2021-12-20 11:47:05.010 INFO  com.job.DocJob                                    :32   [32m127980063990878208[0;39m 更新电子书下的文档数据开始
2021-12-20 11:47:05.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980063990878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:47:05.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980063990878208[0;39m ==> Parameters: 
2021-12-20 11:47:05.258 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980063990878208[0;39m <==    Updates: 6
2021-12-20 11:47:05.258 INFO  com.job.DocJob                                    :35   [32m127980063990878208[0;39m 更新电子书下的文档数据结束，耗时：248毫秒
2021-12-20 11:47:05.258 INFO  com.job.EbookSnapshotJob                          :32   [32m127980065031065600[0;39m 生成今日电子书快照开始
2021-12-20 11:47:05.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980065031065600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:05.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980065031065600[0;39m ==> Parameters: 
2021-12-20 11:47:05.427 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980065031065600[0;39m <==    Updates: 0
2021-12-20 11:47:05.427 INFO  com.job.EbookSnapshotJob                          :35   [32m127980065031065600[0;39m 生成今日电子书快照结束，耗时：169毫秒
2021-12-20 11:47:10.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127980085012729856[0;39m 生成今日电子书快照开始
2021-12-20 11:47:10.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980085012729856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:10.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980085012729856[0;39m ==> Parameters: 
2021-12-20 11:47:10.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980085012729856[0;39m <==    Updates: 0
2021-12-20 11:47:10.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127980085012729856[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:47:15.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127980105975861248[0;39m 生成今日电子书快照开始
2021-12-20 11:47:15.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980105975861248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:15.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980105975861248[0;39m ==> Parameters: 
2021-12-20 11:47:15.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980105975861248[0;39m <==    Updates: 0
2021-12-20 11:47:15.236 INFO  com.job.EbookSnapshotJob                          :35   [32m127980105975861248[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 11:47:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127980126913826816[0;39m 生成今日电子书快照开始
2021-12-20 11:47:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980126913826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980126913826816[0;39m ==> Parameters: 
2021-12-20 11:47:20.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980126913826816[0;39m <==    Updates: 0
2021-12-20 11:47:20.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127980126913826816[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 11:47:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127980147868569600[0;39m 生成今日电子书快照开始
2021-12-20 11:47:25.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980147868569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:25.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980147868569600[0;39m ==> Parameters: 
2021-12-20 11:47:25.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980147868569600[0;39m <==    Updates: 0
2021-12-20 11:47:25.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127980147868569600[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:47:30.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127980168907198464[0;39m 生成今日电子书快照开始
2021-12-20 11:47:30.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980168907198464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:30.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980168907198464[0;39m ==> Parameters: 
2021-12-20 11:47:30.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980168907198464[0;39m <==    Updates: 0
2021-12-20 11:47:30.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127980168907198464[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:47:35.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127980189870329856[0;39m 生成今日电子书快照开始
2021-12-20 11:47:35.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980189870329856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:35.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980189870329856[0;39m ==> Parameters: 
2021-12-20 11:47:35.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980189870329856[0;39m <==    Updates: 0
2021-12-20 11:47:35.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127980189870329856[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:47:35.260 INFO  com.job.DocJob                                    :32   [32m127980190868574208[0;39m 更新电子书下的文档数据开始
2021-12-20 11:47:35.260 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980190868574208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:47:35.260 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980190868574208[0;39m ==> Parameters: 
2021-12-20 11:47:35.426 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980190868574208[0;39m <==    Updates: 6
2021-12-20 11:47:35.426 INFO  com.job.DocJob                                    :35   [32m127980190868574208[0;39m 更新电子书下的文档数据结束，耗时：166毫秒
2021-12-20 11:47:40.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127980210833461248[0;39m 生成今日电子书快照开始
2021-12-20 11:47:40.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980210833461248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:40.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980210833461248[0;39m ==> Parameters: 
2021-12-20 11:47:40.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980210833461248[0;39m <==    Updates: 0
2021-12-20 11:47:40.272 INFO  com.job.EbookSnapshotJob                          :35   [32m127980210833461248[0;39m 生成今日电子书快照结束，耗时：252毫秒
2021-12-20 11:47:45.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127980231784009728[0;39m 生成今日电子书快照开始
2021-12-20 11:47:45.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980231784009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980231784009728[0;39m ==> Parameters: 
2021-12-20 11:47:45.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980231784009728[0;39m <==    Updates: 0
2021-12-20 11:47:45.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127980231784009728[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:47:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127980252747141120[0;39m 生成今日电子书快照开始
2021-12-20 11:47:50.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980252747141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:50.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980252747141120[0;39m ==> Parameters: 
2021-12-20 11:47:50.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980252747141120[0;39m <==    Updates: 0
2021-12-20 11:47:50.238 INFO  com.job.EbookSnapshotJob                          :35   [32m127980252747141120[0;39m 生成今日电子书快照结束，耗时：225毫秒
2021-12-20 11:47:55.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127980273773187072[0;39m 生成今日电子书快照开始
2021-12-20 11:47:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980273773187072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:47:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980273773187072[0;39m ==> Parameters: 
2021-12-20 11:47:55.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980273773187072[0;39m <==    Updates: 0
2021-12-20 11:47:55.242 INFO  com.job.EbookSnapshotJob                          :35   [32m127980273773187072[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:48:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980294702764032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:00.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980294702764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:00.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980294702764032[0;39m ==> Parameters: 
2021-12-20 11:48:00.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980294702764032[0;39m <==    Updates: 0
2021-12-20 11:48:00.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127980294702764032[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:48:05.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127980315670089728[0;39m 生成今日电子书快照开始
2021-12-20 11:48:05.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980315670089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:05.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980315670089728[0;39m ==> Parameters: 
2021-12-20 11:48:05.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980315670089728[0;39m <==    Updates: 0
2021-12-20 11:48:05.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127980315670089728[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 11:48:05.270 INFO  com.job.DocJob                                    :32   [32m127980316739637248[0;39m 更新电子书下的文档数据开始
2021-12-20 11:48:05.270 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980316739637248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:48:05.270 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980316739637248[0;39m ==> Parameters: 
2021-12-20 11:48:05.432 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980316739637248[0;39m <==    Updates: 6
2021-12-20 11:48:05.432 INFO  com.job.DocJob                                    :35   [32m127980316739637248[0;39m 更新电子书下的文档数据结束，耗时：162毫秒
2021-12-20 11:48:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980336645804032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980336645804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980336645804032[0;39m ==> Parameters: 
2021-12-20 11:48:10.333 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980336645804032[0;39m <==    Updates: 0
2021-12-20 11:48:10.333 INFO  com.job.EbookSnapshotJob                          :35   [32m127980336645804032[0;39m 生成今日电子书快照结束，耗时：317毫秒
2021-12-20 11:48:15.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980357617324032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:15.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980357617324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:15.069 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980357617324032[0;39m ==> Parameters: 
2021-12-20 11:48:15.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980357617324032[0;39m <==    Updates: 0
2021-12-20 11:48:15.270 INFO  com.job.EbookSnapshotJob                          :35   [32m127980357617324032[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:48:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127980378584649728[0;39m 生成今日电子书快照开始
2021-12-20 11:48:20.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980378584649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:20.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980378584649728[0;39m ==> Parameters: 
2021-12-20 11:48:20.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980378584649728[0;39m <==    Updates: 0
2021-12-20 11:48:20.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127980378584649728[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:48:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127980399551975424[0;39m 生成今日电子书快照开始
2021-12-20 11:48:25.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980399551975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:25.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980399551975424[0;39m ==> Parameters: 
2021-12-20 11:48:25.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980399551975424[0;39m <==    Updates: 0
2021-12-20 11:48:25.245 INFO  com.job.EbookSnapshotJob                          :35   [32m127980399551975424[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:48:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127980420485746688[0;39m 生成今日电子书快照开始
2021-12-20 11:48:30.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980420485746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:30.059 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980420485746688[0;39m ==> Parameters: 
2021-12-20 11:48:30.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980420485746688[0;39m <==    Updates: 0
2021-12-20 11:48:30.206 INFO  com.job.EbookSnapshotJob                          :35   [32m127980420485746688[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:48:35.003 INFO  com.job.DocJob                                    :32   [32m127980441448878080[0;39m 更新电子书下的文档数据开始
2021-12-20 11:48:35.088 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980441448878080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:48:35.088 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980441448878080[0;39m ==> Parameters: 
2021-12-20 11:48:35.241 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980441448878080[0;39m <==    Updates: 6
2021-12-20 11:48:35.241 INFO  com.job.DocJob                                    :35   [32m127980441448878080[0;39m 更新电子书下的文档数据结束，耗时：238毫秒
2021-12-20 11:48:35.241 INFO  com.job.EbookSnapshotJob                          :32   [32m127980442447122432[0;39m 生成今日电子书快照开始
2021-12-20 11:48:35.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980442447122432[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:35.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980442447122432[0;39m ==> Parameters: 
2021-12-20 11:48:35.404 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980442447122432[0;39m <==    Updates: 0
2021-12-20 11:48:35.404 INFO  com.job.EbookSnapshotJob                          :35   [32m127980442447122432[0;39m 生成今日电子书快照结束，耗时：163毫秒
2021-12-20 11:48:40.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980462474924032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980462474924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980462474924032[0;39m ==> Parameters: 
2021-12-20 11:48:40.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980462474924032[0;39m <==    Updates: 0
2021-12-20 11:48:40.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127980462474924032[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:48:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980483446444032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:45.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980483446444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:45.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980483446444032[0;39m ==> Parameters: 
2021-12-20 11:48:45.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980483446444032[0;39m <==    Updates: 0
2021-12-20 11:48:45.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127980483446444032[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:48:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980504417964032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:50.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980504417964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:50.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980504417964032[0;39m ==> Parameters: 
2021-12-20 11:48:50.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980504417964032[0;39m <==    Updates: 0
2021-12-20 11:48:50.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127980504417964032[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:48:55.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980525389484032[0;39m 生成今日电子书快照开始
2021-12-20 11:48:55.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980525389484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:48:55.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980525389484032[0;39m ==> Parameters: 
2021-12-20 11:48:55.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980525389484032[0;39m <==    Updates: 0
2021-12-20 11:48:55.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127980525389484032[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:49:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127980546331643904[0;39m 生成今日电子书快照开始
2021-12-20 11:49:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980546331643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980546331643904[0;39m ==> Parameters: 
2021-12-20 11:49:00.231 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980546331643904[0;39m <==    Updates: 0
2021-12-20 11:49:00.231 INFO  com.job.EbookSnapshotJob                          :35   [32m127980546331643904[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:49:05.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127980567336718336[0;39m 生成今日电子书快照开始
2021-12-20 11:49:05.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980567336718336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:05.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980567336718336[0;39m ==> Parameters: 
2021-12-20 11:49:05.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980567336718336[0;39m <==    Updates: 0
2021-12-20 11:49:05.276 INFO  com.job.EbookSnapshotJob                          :35   [32m127980567336718336[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 11:49:05.276 INFO  com.job.DocJob                                    :32   [32m127980568423043072[0;39m 更新电子书下的文档数据开始
2021-12-20 11:49:05.276 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980568423043072[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:49:05.276 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980568423043072[0;39m ==> Parameters: 
2021-12-20 11:49:05.423 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980568423043072[0;39m <==    Updates: 6
2021-12-20 11:49:05.423 INFO  com.job.DocJob                                    :35   [32m127980568423043072[0;39m 更新电子书下的文档数据结束，耗时：147毫秒
2021-12-20 11:49:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127980588262100992[0;39m 生成今日电子书快照开始
2021-12-20 11:49:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980588262100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980588262100992[0;39m ==> Parameters: 
2021-12-20 11:49:10.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980588262100992[0;39m <==    Updates: 0
2021-12-20 11:49:10.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127980588262100992[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:49:15.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127980609292341248[0;39m 生成今日电子书快照开始
2021-12-20 11:49:15.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980609292341248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:15.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980609292341248[0;39m ==> Parameters: 
2021-12-20 11:49:15.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980609292341248[0;39m <==    Updates: 0
2021-12-20 11:49:15.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127980609292341248[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:49:20.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127980630259666944[0;39m 生成今日电子书快照开始
2021-12-20 11:49:20.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980630259666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:20.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980630259666944[0;39m ==> Parameters: 
2021-12-20 11:49:20.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980630259666944[0;39m <==    Updates: 0
2021-12-20 11:49:20.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127980630259666944[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:49:25.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127980651239575552[0;39m 生成今日电子书快照开始
2021-12-20 11:49:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980651239575552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980651239575552[0;39m ==> Parameters: 
2021-12-20 11:49:25.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980651239575552[0;39m <==    Updates: 0
2021-12-20 11:49:25.206 INFO  com.job.EbookSnapshotJob                          :35   [32m127980651239575552[0;39m 生成今日电子书快照结束，耗时：185毫秒
2021-12-20 11:49:30.038 INFO  com.job.EbookSnapshotJob                          :32   [32m127980672282398720[0;39m 生成今日电子书快照开始
2021-12-20 11:49:30.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980672282398720[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:30.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980672282398720[0;39m ==> Parameters: 
2021-12-20 11:49:30.331 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980672282398720[0;39m <==    Updates: 0
2021-12-20 11:49:30.331 INFO  com.job.EbookSnapshotJob                          :35   [32m127980672282398720[0;39m 生成今日电子书快照结束，耗时：293毫秒
2021-12-20 11:49:35.012 INFO  com.job.DocJob                                    :32   [32m127980693144866816[0;39m 更新电子书下的文档数据开始
2021-12-20 11:49:35.097 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980693144866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:49:35.097 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980693144866816[0;39m ==> Parameters: 
2021-12-20 11:49:35.235 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980693144866816[0;39m <==    Updates: 6
2021-12-20 11:49:35.235 INFO  com.job.DocJob                                    :35   [32m127980693144866816[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 11:49:35.235 INFO  com.job.EbookSnapshotJob                          :32   [32m127980694080196608[0;39m 生成今日电子书快照开始
2021-12-20 11:49:35.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980694080196608[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:35.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980694080196608[0;39m ==> Parameters: 
2021-12-20 11:49:35.414 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980694080196608[0;39m <==    Updates: 0
2021-12-20 11:49:35.414 INFO  com.job.EbookSnapshotJob                          :35   [32m127980694080196608[0;39m 生成今日电子书快照结束，耗时：179毫秒
2021-12-20 11:49:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127980714116386816[0;39m 生成今日电子书快照开始
2021-12-20 11:49:40.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980714116386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:40.065 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980714116386816[0;39m ==> Parameters: 
2021-12-20 11:49:40.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980714116386816[0;39m <==    Updates: 0
2021-12-20 11:49:40.281 INFO  com.job.EbookSnapshotJob                          :35   [32m127980714116386816[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 11:49:45.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127980735062740992[0;39m 生成今日电子书快照开始
2021-12-20 11:49:45.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980735062740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:45.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980735062740992[0;39m ==> Parameters: 
2021-12-20 11:49:45.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980735062740992[0;39m <==    Updates: 0
2021-12-20 11:49:45.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127980735062740992[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 11:49:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127980756080398336[0;39m 生成今日电子书快照开始
2021-12-20 11:49:50.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980756080398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:50.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980756080398336[0;39m ==> Parameters: 
2021-12-20 11:49:50.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980756080398336[0;39m <==    Updates: 0
2021-12-20 11:49:50.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127980756080398336[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:49:55.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127980777085472768[0;39m 生成今日电子书快照开始
2021-12-20 11:49:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980777085472768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:49:55.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980777085472768[0;39m ==> Parameters: 
2021-12-20 11:49:55.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980777085472768[0;39m <==    Updates: 0
2021-12-20 11:49:55.273 INFO  com.job.EbookSnapshotJob                          :35   [32m127980777085472768[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:50:00.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127980798027632640[0;39m 生成今日电子书快照开始
2021-12-20 11:50:00.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980798027632640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:00.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980798027632640[0;39m ==> Parameters: 
2021-12-20 11:50:00.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980798027632640[0;39m <==    Updates: 0
2021-12-20 11:50:00.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127980798027632640[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:50:05.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127980818999152640[0;39m 生成今日电子书快照开始
2021-12-20 11:50:05.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980818999152640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:05.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980818999152640[0;39m ==> Parameters: 
2021-12-20 11:50:05.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980818999152640[0;39m <==    Updates: 0
2021-12-20 11:50:05.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127980818999152640[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:50:05.256 INFO  com.job.DocJob                                    :32   [32m127980819997396992[0;39m 更新电子书下的文档数据开始
2021-12-20 11:50:05.256 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980819997396992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:50:05.256 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980819997396992[0;39m ==> Parameters: 
2021-12-20 11:50:05.434 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980819997396992[0;39m <==    Updates: 6
2021-12-20 11:50:05.434 INFO  com.job.DocJob                                    :35   [32m127980819997396992[0;39m 更新电子书下的文档数据结束，耗时：178毫秒
2021-12-20 11:50:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127980839962284032[0;39m 生成今日电子书快照开始
2021-12-20 11:50:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980839962284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980839962284032[0;39m ==> Parameters: 
2021-12-20 11:50:10.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980839962284032[0;39m <==    Updates: 0
2021-12-20 11:50:10.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127980839962284032[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 11:50:15.030 INFO  com.job.EbookSnapshotJob                          :32   [32m127980860992524288[0;39m 生成今日电子书快照开始
2021-12-20 11:50:15.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980860992524288[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:15.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980860992524288[0;39m ==> Parameters: 
2021-12-20 11:50:15.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980860992524288[0;39m <==    Updates: 0
2021-12-20 11:50:15.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127980860992524288[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:50:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127980881888546816[0;39m 生成今日电子书快照开始
2021-12-20 11:50:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980881888546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980881888546816[0;39m ==> Parameters: 
2021-12-20 11:50:20.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980881888546816[0;39m <==    Updates: 0
2021-12-20 11:50:20.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127980881888546816[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:50:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127980902860066816[0;39m 生成今日电子书快照开始
2021-12-20 11:50:25.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980902860066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:25.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980902860066816[0;39m ==> Parameters: 
2021-12-20 11:50:25.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980902860066816[0;39m <==    Updates: 0
2021-12-20 11:50:25.213 INFO  com.job.EbookSnapshotJob                          :35   [32m127980902860066816[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:50:30.028 INFO  com.job.EbookSnapshotJob                          :32   [32m127980923898695680[0;39m 生成今日电子书快照开始
2021-12-20 11:50:30.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980923898695680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:30.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980923898695680[0;39m ==> Parameters: 
2021-12-20 11:50:30.313 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980923898695680[0;39m <==    Updates: 0
2021-12-20 11:50:30.313 INFO  com.job.EbookSnapshotJob                          :35   [32m127980923898695680[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 11:50:35.005 INFO  com.job.DocJob                                    :32   [32m127980944773746688[0;39m 更新电子书下的文档数据开始
2021-12-20 11:50:35.075 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980944773746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:50:35.090 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980944773746688[0;39m ==> Parameters: 
2021-12-20 11:50:35.275 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127980944773746688[0;39m <==    Updates: 6
2021-12-20 11:50:35.275 INFO  com.job.DocJob                                    :35   [32m127980944773746688[0;39m 更新电子书下的文档数据结束，耗时：270毫秒
2021-12-20 11:50:35.275 INFO  com.job.EbookSnapshotJob                          :32   [32m127980945906208768[0;39m 生成今日电子书快照开始
2021-12-20 11:50:35.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980945906208768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:35.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980945906208768[0;39m ==> Parameters: 
2021-12-20 11:50:35.460 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980945906208768[0;39m <==    Updates: 0
2021-12-20 11:50:35.460 INFO  com.job.EbookSnapshotJob                          :35   [32m127980945906208768[0;39m 生成今日电子书快照结束，耗时：185毫秒
2021-12-20 11:50:40.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127980965757849600[0;39m 生成今日电子书快照开始
2021-12-20 11:50:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980965757849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980965757849600[0;39m ==> Parameters: 
2021-12-20 11:50:40.363 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980965757849600[0;39m <==    Updates: 0
2021-12-20 11:50:40.363 INFO  com.job.EbookSnapshotJob                          :35   [32m127980965757849600[0;39m 生成今日电子书快照结束，耗时：355毫秒
2021-12-20 11:50:45.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127980986733563904[0;39m 生成今日电子书快照开始
2021-12-20 11:50:45.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980986733563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:45.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980986733563904[0;39m ==> Parameters: 
2021-12-20 11:50:45.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127980986733563904[0;39m <==    Updates: 0
2021-12-20 11:50:45.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127980986733563904[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:50:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127981007705083904[0;39m 生成今日电子书快照开始
2021-12-20 11:50:50.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981007705083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:50.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981007705083904[0;39m ==> Parameters: 
2021-12-20 11:50:50.279 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981007705083904[0;39m <==    Updates: 0
2021-12-20 11:50:50.279 INFO  com.job.EbookSnapshotJob                          :35   [32m127981007705083904[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-20 11:50:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127981028684992512[0;39m 生成今日电子书快照开始
2021-12-20 11:50:55.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981028684992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:50:55.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981028684992512[0;39m ==> Parameters: 
2021-12-20 11:50:55.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981028684992512[0;39m <==    Updates: 0
2021-12-20 11:50:55.212 INFO  com.job.EbookSnapshotJob                          :35   [32m127981028684992512[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:51:00.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127981049715232768[0;39m 生成今日电子书快照开始
2021-12-20 11:51:00.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981049715232768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:00.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981049715232768[0;39m ==> Parameters: 
2021-12-20 11:51:00.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981049715232768[0;39m <==    Updates: 0
2021-12-20 11:51:00.275 INFO  com.job.EbookSnapshotJob                          :35   [32m127981049715232768[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 11:51:05.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127981070657392640[0;39m 生成今日电子书快照开始
2021-12-20 11:51:05.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981070657392640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:05.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981070657392640[0;39m ==> Parameters: 
2021-12-20 11:51:05.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981070657392640[0;39m <==    Updates: 0
2021-12-20 11:51:05.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127981070657392640[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:51:05.257 INFO  com.job.DocJob                                    :32   [32m127981071659831296[0;39m 更新电子书下的文档数据开始
2021-12-20 11:51:05.257 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981071659831296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:51:05.257 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981071659831296[0;39m ==> Parameters: 
2021-12-20 11:51:05.426 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981071659831296[0;39m <==    Updates: 6
2021-12-20 11:51:05.426 INFO  com.job.DocJob                                    :35   [32m127981071659831296[0;39m 更新电子书下的文档数据结束，耗时：169毫秒
2021-12-20 11:51:10.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127981091637301248[0;39m 生成今日电子书快照开始
2021-12-20 11:51:10.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981091637301248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:10.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981091637301248[0;39m ==> Parameters: 
2021-12-20 11:51:10.274 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981091637301248[0;39m <==    Updates: 0
2021-12-20 11:51:10.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127981091637301248[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:51:15.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127981112621404160[0;39m 生成今日电子书快照开始
2021-12-20 11:51:15.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981112621404160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:15.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981112621404160[0;39m ==> Parameters: 
2021-12-20 11:51:15.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981112621404160[0;39m <==    Updates: 0
2021-12-20 11:51:15.292 INFO  com.job.EbookSnapshotJob                          :35   [32m127981112621404160[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 11:51:20.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127981133592924160[0;39m 生成今日电子书快照开始
2021-12-20 11:51:20.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981133592924160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:20.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981133592924160[0;39m ==> Parameters: 
2021-12-20 11:51:20.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981133592924160[0;39m <==    Updates: 0
2021-12-20 11:51:20.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127981133592924160[0;39m 生成今日电子书快照结束，耗时：233毫秒
2021-12-20 11:51:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127981154522501120[0;39m 生成今日电子书快照开始
2021-12-20 11:51:25.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981154522501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981154522501120[0;39m ==> Parameters: 
2021-12-20 11:51:25.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981154522501120[0;39m <==    Updates: 0
2021-12-20 11:51:25.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127981154522501120[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 11:51:25.950 INFO  com.websocket.WebSocketServer                     :32   [32m127978832446754816[0;39m 有新连接：token：zy8vDbFSAa，session id：c，当前连接数：1
2021-12-20 11:51:26.176 INFO  com.aspect.LogAspect                              :54   [32m127981159400476672[0;39m ------------- 开始 -------------
2021-12-20 11:51:26.177 INFO  com.aspect.LogAspect                              :55   [32m127981159400476672[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:51:26.177 INFO  com.aspect.LogAspect                              :56   [32m127981159400476672[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:51:26.177 INFO  com.aspect.LogAspect                              :57   [32m127981159400476672[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:51:26.177 INFO  com.aspect.LogAspect                              :80   [32m127981159400476672[0;39m 请求参数: []
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :54   [32m127981159417253888[0;39m ------------- 开始 -------------
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :54   [32m127981159417253889[0;39m ------------- 开始 -------------
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :55   [32m127981159417253888[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :55   [32m127981159417253889[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :56   [32m127981159417253888[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :56   [32m127981159417253889[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :57   [32m127981159417253888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :57   [32m127981159417253889[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :80   [32m127981159417253888[0;39m 请求参数: []
2021-12-20 11:51:26.180 INFO  com.aspect.LogAspect                              :80   [32m127981159417253889[0;39m 请求参数: []
2021-12-20 11:51:26.278 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127981159417253888[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:51:26.278 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127981159400476672[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:51:26.278 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127981159417253888[0;39m ==> Parameters: 
2021-12-20 11:51:26.278 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127981159400476672[0;39m ==> Parameters: 
2021-12-20 11:51:26.283 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127981159417253889[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:51:26.283 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127981159417253889[0;39m ==> Parameters: 
2021-12-20 11:51:26.391 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:51:26.392 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127981159400476672[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:51:26.391 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127981159417253888[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:51:26.392 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:51:26.393 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127981159400476672[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:51:26.393 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:51:26.394 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127981159417253888[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:51:26.394 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:51:26.395 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:51:26.395 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127981159417253888[0;39m <==      Total: 1
2021-12-20 11:51:26.395 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127981159400476672[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:51:26.395 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:51:26.396 INFO  com.aspect.LogAspect                              :92   [32m127981159417253888[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:51:26.396 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127981159400476672[0;39m <==      Total: 2
2021-12-20 11:51:26.396 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:51:26.396 INFO  com.aspect.LogAspect                              :93   [32m127981159417253888[0;39m ------------- 结束 耗时：216 ms -------------
2021-12-20 11:51:26.396 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:51:26.397 INFO  com.aspect.LogAspect                              :92   [32m127981159400476672[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:51:26.397 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:51:26.397 INFO  com.aspect.LogAspect                              :93   [32m127981159400476672[0;39m ------------- 结束 耗时：221 ms -------------
2021-12-20 11:51:26.397 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:51:26.398 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:51:26.399 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:51:26.399 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:51:26.400 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:51:26.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:51:26.401 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:51:26.402 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:51:26.403 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:51:26.403 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:51:26.404 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981159417253889[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:51:26.405 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127981159417253889[0;39m <==      Total: 19
2021-12-20 11:51:26.408 INFO  com.aspect.LogAspect                              :92   [32m127981159417253889[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:51:26.408 INFO  com.aspect.LogAspect                              :93   [32m127981159417253889[0;39m ------------- 结束 耗时：228 ms -------------
2021-12-20 11:51:30.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127981175456272384[0;39m 生成今日电子书快照开始
2021-12-20 11:51:30.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981175456272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:30.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981175456272384[0;39m ==> Parameters: 
2021-12-20 11:51:30.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981175456272384[0;39m <==    Updates: 0
2021-12-20 11:51:30.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127981175456272384[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-20 11:51:33.731 INFO  com.websocket.WebSocketServer                     :41   [32m127978178626064384[0;39m 连接关闭，token：zy8vDbFSAa，session id：c！当前连接数：0
2021-12-20 11:51:34.522 INFO  com.websocket.WebSocketServer                     :32   [32m127979130603048960[0;39m 有新连接：token：OfhMCC1ANE，session id：d，当前连接数：1
2021-12-20 11:51:34.597 INFO  com.aspect.LogAspect                              :54   [32m127981194720710656[0;39m ------------- 开始 -------------
2021-12-20 11:51:34.597 INFO  com.aspect.LogAspect                              :55   [32m127981194720710656[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:51:34.597 INFO  com.aspect.LogAspect                              :56   [32m127981194720710656[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :54   [32m127981194724904960[0;39m ------------- 开始 -------------
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :57   [32m127981194720710656[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :55   [32m127981194724904960[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :80   [32m127981194720710656[0;39m 请求参数: []
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :56   [32m127981194724904960[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :57   [32m127981194724904960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:51:34.598 INFO  com.aspect.LogAspect                              :80   [32m127981194724904960[0;39m 请求参数: []
2021-12-20 11:51:34.601 INFO  com.aspect.LogAspect                              :54   [32m127981194737487872[0;39m ------------- 开始 -------------
2021-12-20 11:51:34.602 INFO  com.aspect.LogAspect                              :55   [32m127981194737487872[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:51:34.602 INFO  com.aspect.LogAspect                              :56   [32m127981194737487872[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:51:34.602 INFO  com.aspect.LogAspect                              :57   [32m127981194737487872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:51:34.602 INFO  com.aspect.LogAspect                              :80   [32m127981194737487872[0;39m 请求参数: []
2021-12-20 11:51:34.684 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127981194720710656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:51:34.685 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127981194720710656[0;39m ==> Parameters: 
2021-12-20 11:51:34.691 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127981194724904960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:51:34.691 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127981194724904960[0;39m ==> Parameters: 
2021-12-20 11:51:34.720 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127981194737487872[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:51:34.720 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127981194737487872[0;39m ==> Parameters: 
2021-12-20 11:51:34.756 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127981194720710656[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:51:34.757 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127981194720710656[0;39m <==        Row: 2021-12-19, 504, 175, 504, 175
2021-12-20 11:51:34.758 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127981194720710656[0;39m <==        Row: 2021-12-20, 199, 69, -305, -106
2021-12-20 11:51:34.758 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127981194720710656[0;39m <==      Total: 2
2021-12-20 11:51:34.759 INFO  com.aspect.LogAspect                              :92   [32m127981194720710656[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":504,"viewIncrease":504,"voteCount":175,"voteIncrease":175},{"date":1639929600000,"viewCount":199,"viewIncrease":-305,"voteCount":69,"voteIncrease":-106}],"success":true}
2021-12-20 11:51:34.759 INFO  com.aspect.LogAspect                              :93   [32m127981194720710656[0;39m ------------- 结束 耗时：162 ms -------------
2021-12-20 11:51:34.768 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127981194724904960[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:51:34.769 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127981194724904960[0;39m <==        Row: 2021-12-19, 504, 175
2021-12-20 11:51:34.769 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127981194724904960[0;39m <==      Total: 1
2021-12-20 11:51:34.770 INFO  com.aspect.LogAspect                              :92   [32m127981194724904960[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":504,"voteCount":0,"voteIncrease":175}],"success":true}
2021-12-20 11:51:34.770 INFO  com.aspect.LogAspect                              :93   [32m127981194724904960[0;39m ------------- 结束 耗时：172 ms -------------
2021-12-20 11:51:34.799 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:51:34.799 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:51:34.800 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:51:34.800 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:51:34.801 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:51:34.802 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:51:34.802 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:51:34.802 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:51:34.802 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:51:34.803 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:51:34.803 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:51:34.803 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:51:34.804 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127981194737487872[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:51:34.804 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127981194737487872[0;39m <==      Total: 19
2021-12-20 11:51:34.805 INFO  com.aspect.LogAspect                              :92   [32m127981194737487872[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:51:34.805 INFO  com.aspect.LogAspect                              :93   [32m127981194737487872[0;39m ------------- 结束 耗时：204 ms -------------
2021-12-20 11:51:35.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127981196461346816[0;39m 生成今日电子书快照开始
2021-12-20 11:51:35.013 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981196461346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:35.015 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981196461346816[0;39m ==> Parameters: 
2021-12-20 11:51:35.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981196461346816[0;39m <==    Updates: 0
2021-12-20 11:51:35.161 INFO  com.job.EbookSnapshotJob                          :35   [32m127981196461346816[0;39m 生成今日电子书快照结束，耗时：149毫秒
2021-12-20 11:51:35.161 INFO  com.job.DocJob                                    :32   [32m127981197086298112[0;39m 更新电子书下的文档数据开始
2021-12-20 11:51:35.161 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981197086298112[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:51:35.162 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981197086298112[0;39m ==> Parameters: 
2021-12-20 11:51:35.316 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981197086298112[0;39m <==    Updates: 6
2021-12-20 11:51:35.317 INFO  com.job.DocJob                                    :35   [32m127981197086298112[0;39m 更新电子书下的文档数据结束，耗时：156毫秒
2021-12-20 11:51:40.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127981217462226944[0;39m 生成今日电子书快照开始
2021-12-20 11:51:40.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981217462226944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:40.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981217462226944[0;39m ==> Parameters: 
2021-12-20 11:51:40.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981217462226944[0;39m <==    Updates: 0
2021-12-20 11:51:40.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127981217462226944[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 11:51:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127981238400192512[0;39m 生成今日电子书快照开始
2021-12-20 11:51:45.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981238400192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:45.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981238400192512[0;39m ==> Parameters: 
2021-12-20 11:51:45.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981238400192512[0;39m <==    Updates: 0
2021-12-20 11:51:45.265 INFO  com.job.EbookSnapshotJob                          :35   [32m127981238400192512[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:51:45.384 INFO  com.websocket.WebSocketServer                     :41   [32m127979953642934272[0;39m 连接关闭，token：OfhMCC1ANE，session id：d！当前连接数：0
2021-12-20 11:51:50.025 INFO  com.job.EbookSnapshotJob                          :32   [32m127981259430432768[0;39m 生成今日电子书快照开始
2021-12-20 11:51:50.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981259430432768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:50.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981259430432768[0;39m ==> Parameters: 
2021-12-20 11:51:50.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981259430432768[0;39m <==    Updates: 0
2021-12-20 11:51:50.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127981259430432768[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:51:55.031 INFO  com.job.EbookSnapshotJob                          :32   [32m127981280427118592[0;39m 生成今日电子书快照开始
2021-12-20 11:51:55.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981280427118592[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:51:55.158 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981280427118592[0;39m ==> Parameters: 
2021-12-20 11:51:55.438 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981280427118592[0;39m <==    Updates: 0
2021-12-20 11:51:55.438 INFO  com.job.EbookSnapshotJob                          :35   [32m127981280427118592[0;39m 生成今日电子书快照结束，耗时：407毫秒
2021-12-20 11:52:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127981301335724032[0;39m 生成今日电子书快照开始
2021-12-20 11:52:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981301335724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:00.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981301335724032[0;39m ==> Parameters: 
2021-12-20 11:52:00.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981301335724032[0;39m <==    Updates: 0
2021-12-20 11:52:00.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127981301335724032[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:52:05.009 INFO  com.job.DocJob                                    :32   [32m127981322277883904[0;39m 更新电子书下的文档数据开始
2021-12-20 11:52:05.078 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981322277883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:52:05.094 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981322277883904[0;39m ==> Parameters: 
2021-12-20 11:52:05.232 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981322277883904[0;39m <==    Updates: 6
2021-12-20 11:52:05.232 INFO  com.job.DocJob                                    :35   [32m127981322277883904[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 11:52:05.232 INFO  com.job.EbookSnapshotJob                          :32   [32m127981323213213696[0;39m 生成今日电子书快照开始
2021-12-20 11:52:05.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981323213213696[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:05.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981323213213696[0;39m ==> Parameters: 
2021-12-20 11:52:05.379 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981323213213696[0;39m <==    Updates: 0
2021-12-20 11:52:05.379 INFO  com.job.EbookSnapshotJob                          :35   [32m127981323213213696[0;39m 生成今日电子书快照结束，耗时：147毫秒
2021-12-20 11:52:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127981343253598208[0;39m 生成今日电子书快照开始
2021-12-20 11:52:10.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981343253598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:10.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981343253598208[0;39m ==> Parameters: 
2021-12-20 11:52:10.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981343253598208[0;39m <==    Updates: 0
2021-12-20 11:52:10.264 INFO  com.job.EbookSnapshotJob                          :35   [32m127981343253598208[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:52:15.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127981364267061248[0;39m 生成今日电子书快照开始
2021-12-20 11:52:15.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981364267061248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:15.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981364267061248[0;39m ==> Parameters: 
2021-12-20 11:52:15.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981364267061248[0;39m <==    Updates: 0
2021-12-20 11:52:15.258 INFO  com.job.EbookSnapshotJob                          :35   [32m127981364267061248[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:52:20.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127981385234386944[0;39m 生成今日电子书快照开始
2021-12-20 11:52:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981385234386944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981385234386944[0;39m ==> Parameters: 
2021-12-20 11:52:20.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981385234386944[0;39m <==    Updates: 0
2021-12-20 11:52:20.250 INFO  com.job.EbookSnapshotJob                          :35   [32m127981385234386944[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:52:25.031 INFO  com.job.EbookSnapshotJob                          :32   [32m127981406256238592[0;39m 生成今日电子书快照开始
2021-12-20 11:52:25.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981406256238592[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:25.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981406256238592[0;39m ==> Parameters: 
2021-12-20 11:52:25.310 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981406256238592[0;39m <==    Updates: 0
2021-12-20 11:52:25.310 INFO  com.job.EbookSnapshotJob                          :35   [32m127981406256238592[0;39m 生成今日电子书快照结束，耗时：279毫秒
2021-12-20 11:52:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127981427127095296[0;39m 生成今日电子书快照开始
2021-12-20 11:52:30.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981427127095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:30.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981427127095296[0;39m ==> Parameters: 
2021-12-20 11:52:30.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981427127095296[0;39m <==    Updates: 0
2021-12-20 11:52:30.247 INFO  com.job.EbookSnapshotJob                          :35   [32m127981427127095296[0;39m 生成今日电子书快照结束，耗时：240毫秒
2021-12-20 11:52:35.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127981448111198208[0;39m 生成今日电子书快照开始
2021-12-20 11:52:35.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981448111198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:35.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981448111198208[0;39m ==> Parameters: 
2021-12-20 11:52:35.225 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981448111198208[0;39m <==    Updates: 0
2021-12-20 11:52:35.225 INFO  com.job.EbookSnapshotJob                          :35   [32m127981448111198208[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 11:52:35.225 INFO  com.job.DocJob                                    :32   [32m127981449012973568[0;39m 更新电子书下的文档数据开始
2021-12-20 11:52:35.225 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981449012973568[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:52:35.225 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981449012973568[0;39m ==> Parameters: 
2021-12-20 11:52:35.379 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981449012973568[0;39m <==    Updates: 6
2021-12-20 11:52:35.379 INFO  com.job.DocJob                                    :35   [32m127981449012973568[0;39m 更新电子书下的文档数据结束，耗时：154毫秒
2021-12-20 11:52:40.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127981469082718208[0;39m 生成今日电子书快照开始
2021-12-20 11:52:40.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981469082718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:40.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981469082718208[0;39m ==> Parameters: 
2021-12-20 11:52:40.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981469082718208[0;39m <==    Updates: 0
2021-12-20 11:52:40.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127981469082718208[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:52:45.021 INFO  com.job.EbookSnapshotJob                          :32   [32m127981490100375552[0;39m 生成今日电子书快照开始
2021-12-20 11:52:45.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981490100375552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:45.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981490100375552[0;39m ==> Parameters: 
2021-12-20 11:52:45.257 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981490100375552[0;39m <==    Updates: 0
2021-12-20 11:52:45.257 INFO  com.job.EbookSnapshotJob                          :35   [32m127981490100375552[0;39m 生成今日电子书快照结束，耗时：236毫秒
2021-12-20 11:52:50.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127981511059312640[0;39m 生成今日电子书快照开始
2021-12-20 11:52:50.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981511059312640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:50.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981511059312640[0;39m ==> Parameters: 
2021-12-20 11:52:50.256 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981511059312640[0;39m <==    Updates: 0
2021-12-20 11:52:50.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127981511059312640[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 11:52:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127981532018249728[0;39m 生成今日电子书快照开始
2021-12-20 11:52:55.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981532018249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:52:55.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981532018249728[0;39m ==> Parameters: 
2021-12-20 11:52:55.216 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981532018249728[0;39m <==    Updates: 0
2021-12-20 11:52:55.216 INFO  com.job.EbookSnapshotJob                          :35   [32m127981532018249728[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:53:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127981552981381120[0;39m 生成今日电子书快照开始
2021-12-20 11:53:00.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981552981381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:00.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981552981381120[0;39m ==> Parameters: 
2021-12-20 11:53:00.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981552981381120[0;39m <==    Updates: 0
2021-12-20 11:53:00.267 INFO  com.job.EbookSnapshotJob                          :35   [32m127981552981381120[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:53:05.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127981573936123904[0;39m 生成今日电子书快照开始
2021-12-20 11:53:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981573936123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981573936123904[0;39m ==> Parameters: 
2021-12-20 11:53:05.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981573936123904[0;39m <==    Updates: 0
2021-12-20 11:53:05.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127981573936123904[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:53:05.226 INFO  com.job.DocJob                                    :32   [32m127981574846287872[0;39m 更新电子书下的文档数据开始
2021-12-20 11:53:05.226 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981574846287872[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:53:05.226 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981574846287872[0;39m ==> Parameters: 
2021-12-20 11:53:05.380 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981574846287872[0;39m <==    Updates: 6
2021-12-20 11:53:05.380 INFO  com.job.DocJob                                    :35   [32m127981574846287872[0;39m 更新电子书下的文档数据结束，耗时：154毫秒
2021-12-20 11:53:10.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127981594966364160[0;39m 生成今日电子书快照开始
2021-12-20 11:53:10.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981594966364160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:10.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981594966364160[0;39m ==> Parameters: 
2021-12-20 11:53:10.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981594966364160[0;39m <==    Updates: 0
2021-12-20 11:53:10.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127981594966364160[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-20 11:53:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m127981615849803776[0;39m 生成今日电子书快照开始
2021-12-20 11:53:15.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981615849803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:15.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981615849803776[0;39m ==> Parameters: 
2021-12-20 11:53:15.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981615849803776[0;39m <==    Updates: 0
2021-12-20 11:53:15.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127981615849803776[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:53:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127981636875849728[0;39m 生成今日电子书快照开始
2021-12-20 11:53:20.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981636875849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:20.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981636875849728[0;39m ==> Parameters: 
2021-12-20 11:53:20.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981636875849728[0;39m <==    Updates: 0
2021-12-20 11:53:20.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127981636875849728[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 11:53:25.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127981657868341248[0;39m 生成今日电子书快照开始
2021-12-20 11:53:25.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981657868341248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:25.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981657868341248[0;39m ==> Parameters: 
2021-12-20 11:53:25.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981657868341248[0;39m <==    Updates: 0
2021-12-20 11:53:25.226 INFO  com.job.EbookSnapshotJob                          :35   [32m127981657868341248[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 11:53:30.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127981678835666944[0;39m 生成今日电子书快照开始
2021-12-20 11:53:30.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981678835666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:30.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981678835666944[0;39m ==> Parameters: 
2021-12-20 11:53:30.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981678835666944[0;39m <==    Updates: 0
2021-12-20 11:53:30.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127981678835666944[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:53:35.001 INFO  com.job.EbookSnapshotJob                          :32   [32m127981699731689472[0;39m 生成今日电子书快照开始
2021-12-20 11:53:35.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981699731689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:53:35.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981699731689472[0;39m ==> Parameters: 
2021-12-20 11:53:35.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127981699731689472[0;39m <==    Updates: 0
2021-12-20 11:53:35.217 INFO  com.job.EbookSnapshotJob                          :35   [32m127981699731689472[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:53:35.217 INFO  com.job.DocJob                                    :32   [32m127981700637659136[0;39m 更新电子书下的文档数据开始
2021-12-20 11:53:35.217 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981700637659136[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:53:35.217 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981700637659136[0;39m ==> Parameters: 
2021-12-20 11:53:35.371 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127981700637659136[0;39m <==    Updates: 6
2021-12-20 11:53:35.371 INFO  com.job.DocJob                                    :35   [32m127981700637659136[0;39m 更新电子书下的文档数据结束，耗时：154毫秒
2021-12-20 11:55:20.106 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 11:55:20.122 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 9080 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 11:55:20.122 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 11:55:20.227 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 11:55:20.227 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 11:55:22.593 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 11:55:22.593 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 11:55:23.060 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 458 ms. Found 0 Redis repository interfaces.
2021-12-20 11:55:25.230 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 11:55:25.261 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 11:55:25.261 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 11:55:25.261 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 11:55:25.415 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 11:55:25.415 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 5188 ms
2021-12-20 11:55:27.722 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 11:55:27.753 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 11:55:27.769 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 11:55:27.853 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 8.676 seconds (JVM running for 10.701)
2021-12-20 11:55:30.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127982182093426688[0;39m 生成今日电子书快照开始
2021-12-20 11:55:30.028 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m127982182093426688[0;39m HikariPool-1 - Starting...
2021-12-20 11:55:31.031 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m127982182093426688[0;39m HikariPool-1 - Start completed.
2021-12-20 11:55:31.031 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982182093426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:55:31.046 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982182093426688[0;39m ==> Parameters: 
2021-12-20 11:55:31.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982182093426688[0;39m <==    Updates: 6
2021-12-20 11:55:31.263 INFO  com.job.EbookSnapshotJob                          :35   [32m127982182093426688[0;39m 生成今日电子书快照结束，耗时：1258毫秒
2021-12-20 11:55:35.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127982203123666944[0;39m 生成今日电子书快照开始
2021-12-20 11:55:35.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982203123666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:55:35.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982203123666944[0;39m ==> Parameters: 
2021-12-20 11:55:35.318 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982203123666944[0;39m <==    Updates: 0
2021-12-20 11:55:35.318 INFO  com.job.EbookSnapshotJob                          :35   [32m127982203123666944[0;39m 生成今日电子书快照结束，耗时：299毫秒
2021-12-20 11:55:35.318 INFO  com.job.DocJob                                    :32   [32m127982204377763840[0;39m 更新电子书下的文档数据开始
2021-12-20 11:55:35.324 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982204377763840[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:55:35.324 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982204377763840[0;39m ==> Parameters: 
2021-12-20 11:55:35.471 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982204377763840[0;39m <==    Updates: 6
2021-12-20 11:55:35.471 INFO  com.job.DocJob                                    :35   [32m127982204377763840[0;39m 更新电子书下的文档数据结束，耗时：153毫秒
2021-12-20 11:55:40.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127982224095186944[0;39m 生成今日电子书快照开始
2021-12-20 11:55:45.149 WARN  com.zaxxer.hikari.pool.PoolBase                   :184  [32m127982224095186944[0;39m HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@331009e6 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2021-12-20 11:55:50.169 WARN  com.zaxxer.hikari.pool.PoolBase                   :184  [32m127982224095186944[0;39m HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@442d0d72 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2021-12-20 11:55:55.179 WARN  com.zaxxer.hikari.pool.PoolBase                   :184  [32m127982224095186944[0;39m HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@627ed282 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2021-12-20 11:55:57.794 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982224095186944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:55:57.799 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982224095186944[0;39m ==> Parameters: 
2021-12-20 11:55:57.949 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982224095186944[0;39m <==    Updates: 0
2021-12-20 11:55:57.959 INFO  com.job.EbookSnapshotJob                          :35   [32m127982224095186944[0;39m 生成今日电子书快照结束，耗时：17940毫秒
2021-12-20 11:56:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127982307960295424[0;39m 生成今日电子书快照开始
2021-12-20 11:56:00.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982307960295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:00.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982307960295424[0;39m ==> Parameters: 
2021-12-20 11:56:00.269 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982307960295424[0;39m <==    Updates: 0
2021-12-20 11:56:00.269 INFO  com.job.EbookSnapshotJob                          :35   [32m127982307960295424[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 11:56:05.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127982328910843904[0;39m 生成今日电子书快照开始
2021-12-20 11:56:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982328910843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:05.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982328910843904[0;39m ==> Parameters: 
2021-12-20 11:56:05.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982328910843904[0;39m <==    Updates: 0
2021-12-20 11:56:05.229 INFO  com.job.EbookSnapshotJob                          :35   [32m127982328910843904[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:56:05.229 INFO  com.job.DocJob                                    :32   [32m127982329833590784[0;39m 更新电子书下的文档数据开始
2021-12-20 11:56:05.229 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982329833590784[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:56:05.229 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982329833590784[0;39m ==> Parameters: 
2021-12-20 11:56:05.399 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982329833590784[0;39m <==    Updates: 6
2021-12-20 11:56:05.399 INFO  com.job.DocJob                                    :35   [32m127982329833590784[0;39m 更新电子书下的文档数据结束，耗时：170毫秒
2021-12-20 11:56:10.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127982349882363904[0;39m 生成今日电子书快照开始
2021-12-20 11:56:10.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982349882363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:10.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982349882363904[0;39m ==> Parameters: 
2021-12-20 11:56:10.348 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982349882363904[0;39m <==    Updates: 0
2021-12-20 11:56:10.359 INFO  com.job.EbookSnapshotJob                          :35   [32m127982349882363904[0;39m 生成今日电子书快照结束，耗时：350毫秒
2021-12-20 11:56:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127982370832912384[0;39m 生成今日电子书快照开始
2021-12-20 11:56:15.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982370832912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:15.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982370832912384[0;39m ==> Parameters: 
2021-12-20 11:56:15.234 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982370832912384[0;39m <==    Updates: 0
2021-12-20 11:56:15.234 INFO  com.job.EbookSnapshotJob                          :35   [32m127982370832912384[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-20 11:56:20.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127982391888318464[0;39m 生成今日电子书快照开始
2021-12-20 11:56:20.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982391888318464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:20.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982391888318464[0;39m ==> Parameters: 
2021-12-20 11:56:20.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982391888318464[0;39m <==    Updates: 0
2021-12-20 11:56:20.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127982391888318464[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:56:25.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127982412775952384[0;39m 生成今日电子书快照开始
2021-12-20 11:56:25.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982412775952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:25.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982412775952384[0;39m ==> Parameters: 
2021-12-20 11:56:25.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982412775952384[0;39m <==    Updates: 0
2021-12-20 11:56:25.224 INFO  com.job.EbookSnapshotJob                          :35   [32m127982412775952384[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:56:30.024 INFO  com.job.EbookSnapshotJob                          :32   [32m127982433831358464[0;39m 生成今日电子书快照开始
2021-12-20 11:56:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982433831358464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:30.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982433831358464[0;39m ==> Parameters: 
2021-12-20 11:56:30.227 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982433831358464[0;39m <==    Updates: 0
2021-12-20 11:56:30.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127982433831358464[0;39m 生成今日电子书快照结束，耗时：203毫秒
2021-12-20 11:56:35.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127982454723186688[0;39m 生成今日电子书快照开始
2021-12-20 11:56:35.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982454723186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:35.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982454723186688[0;39m ==> Parameters: 
2021-12-20 11:56:35.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982454723186688[0;39m <==    Updates: 0
2021-12-20 11:56:35.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127982454723186688[0;39m 生成今日电子书快照结束，耗时：209毫秒
2021-12-20 11:56:35.224 INFO  com.job.DocJob                                    :32   [32m127982455641739264[0;39m 更新电子书下的文档数据开始
2021-12-20 11:56:35.224 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982455641739264[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:56:35.224 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982455641739264[0;39m ==> Parameters: 
2021-12-20 11:56:35.367 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982455641739264[0;39m <==    Updates: 6
2021-12-20 11:56:35.367 INFO  com.job.DocJob                                    :35   [32m127982455641739264[0;39m 更新电子书下的文档数据结束，耗时：143毫秒
2021-12-20 11:56:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127982475711483904[0;39m 生成今日电子书快照开始
2021-12-20 11:56:40.072 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982475711483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:40.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982475711483904[0;39m ==> Parameters: 
2021-12-20 11:56:40.206 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982475711483904[0;39m <==    Updates: 0
2021-12-20 11:56:40.207 INFO  com.job.EbookSnapshotJob                          :35   [32m127982475711483904[0;39m 生成今日电子书快照结束，耗时：198毫秒
2021-12-20 11:56:41.085 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 11:56:41.085 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 11:56:41.086 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-20 11:56:41.161 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：Vro4mTRTdL，session id：0，当前连接数：1
2021-12-20 11:56:41.311 INFO  com.aspect.LogAspect                              :54   [32m127982481168273408[0;39m ------------- 开始 -------------
2021-12-20 11:56:41.312 INFO  com.aspect.LogAspect                              :55   [32m127982481168273408[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:56:41.313 INFO  com.aspect.LogAspect                              :56   [32m127982481168273408[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:56:41.313 INFO  com.aspect.LogAspect                              :57   [32m127982481168273408[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:56:41.318 INFO  com.aspect.LogAspect                              :54   [32m127982481201827840[0;39m ------------- 开始 -------------
2021-12-20 11:56:41.318 INFO  com.aspect.LogAspect                              :54   [32m127982481201827841[0;39m ------------- 开始 -------------
2021-12-20 11:56:41.319 INFO  com.aspect.LogAspect                              :55   [32m127982481201827840[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:56:41.319 INFO  com.aspect.LogAspect                              :55   [32m127982481201827841[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:56:41.319 INFO  com.aspect.LogAspect                              :56   [32m127982481201827840[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:56:41.319 INFO  com.aspect.LogAspect                              :56   [32m127982481201827841[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:56:41.319 INFO  com.aspect.LogAspect                              :57   [32m127982481201827840[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:56:41.319 INFO  com.aspect.LogAspect                              :57   [32m127982481201827841[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:56:41.364 INFO  com.aspect.LogAspect                              :80   [32m127982481201827840[0;39m 请求参数: []
2021-12-20 11:56:41.364 INFO  com.aspect.LogAspect                              :80   [32m127982481201827841[0;39m 请求参数: []
2021-12-20 11:56:41.364 INFO  com.aspect.LogAspect                              :80   [32m127982481168273408[0;39m 请求参数: []
2021-12-20 11:56:41.478 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982481201827840[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:56:41.478 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982481201827841[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:56:41.477 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982481168273408[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:56:41.480 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982481201827841[0;39m ==> Parameters: 
2021-12-20 11:56:41.481 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982481201827840[0;39m ==> Parameters: 
2021-12-20 11:56:41.480 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982481168273408[0;39m ==> Parameters: 
2021-12-20 11:56:41.587 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982481201827840[0;39m <==      Total: 0
2021-12-20 11:56:41.587 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:56:41.587 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982481201827841[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:56:41.587 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:56:41.588 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982481201827841[0;39m <==        Row: 2021-12-20, 199, 69, 199, 69
2021-12-20 11:56:41.589 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:56:41.590 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:56:41.591 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:56:41.591 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982481201827841[0;39m <==      Total: 1
2021-12-20 11:56:41.591 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:56:41.592 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:56:41.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:56:41.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:56:41.594 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:56:41.595 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:56:41.595 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:56:41.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:56:41.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:56:41.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:56:41.599 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:56:41.600 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:56:41.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:56:41.602 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:56:41.603 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982481168273408[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:56:41.603 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982481168273408[0;39m <==      Total: 19
2021-12-20 11:56:41.613 INFO  com.aspect.LogAspect                              :92   [32m127982481201827840[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:56:41.614 INFO  com.aspect.LogAspect                              :93   [32m127982481201827840[0;39m ------------- 结束 耗时：296 ms -------------
2021-12-20 11:56:41.617 INFO  com.aspect.LogAspect                              :92   [32m127982481168273408[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:56:41.618 INFO  com.aspect.LogAspect                              :93   [32m127982481168273408[0;39m ------------- 结束 耗时：308 ms -------------
2021-12-20 11:56:41.619 INFO  com.aspect.LogAspect                              :92   [32m127982481201827841[0;39m 返回结果: {"content":[{"date":1639929600000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69}],"success":true}
2021-12-20 11:56:41.619 INFO  com.aspect.LogAspect                              :93   [32m127982481201827841[0;39m ------------- 结束 耗时：301 ms -------------
2021-12-20 11:56:45.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127982496687198208[0;39m 生成今日电子书快照开始
2021-12-20 11:56:45.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982496687198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:45.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982496687198208[0;39m ==> Parameters: 
2021-12-20 11:56:45.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982496687198208[0;39m <==    Updates: 0
2021-12-20 11:56:45.249 INFO  com.job.EbookSnapshotJob                          :35   [32m127982496687198208[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 11:56:50.022 INFO  com.job.EbookSnapshotJob                          :32   [32m127982517709049856[0;39m 生成今日电子书快照开始
2021-12-20 11:56:50.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982517709049856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:50.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982517709049856[0;39m ==> Parameters: 
2021-12-20 11:56:50.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982517709049856[0;39m <==    Updates: 0
2021-12-20 11:56:50.244 INFO  com.job.EbookSnapshotJob                          :35   [32m127982517709049856[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:56:55.019 INFO  com.job.EbookSnapshotJob                          :32   [32m127982538667986944[0;39m 生成今日电子书快照开始
2021-12-20 11:56:55.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982538667986944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:56:55.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982538667986944[0;39m ==> Parameters: 
2021-12-20 11:56:55.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982538667986944[0;39m <==    Updates: 0
2021-12-20 11:56:55.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127982538667986944[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:56:57.724 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：Vro4mTRTdL，session id：0！当前连接数：0
2021-12-20 11:56:58.785 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：L5uYC5laAL，session id：1，当前连接数：1
2021-12-20 11:56:58.854 INFO  com.aspect.LogAspect                              :54   [32m127982554753142784[0;39m ------------- 开始 -------------
2021-12-20 11:56:58.854 INFO  com.aspect.LogAspect                              :54   [32m127982554753142785[0;39m ------------- 开始 -------------
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :55   [32m127982554753142784[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :55   [32m127982554753142785[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :56   [32m127982554753142784[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :56   [32m127982554753142785[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :57   [32m127982554753142784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :57   [32m127982554753142785[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :80   [32m127982554753142784[0;39m 请求参数: []
2021-12-20 11:56:58.855 INFO  com.aspect.LogAspect                              :80   [32m127982554753142785[0;39m 请求参数: []
2021-12-20 11:56:58.858 INFO  com.aspect.LogAspect                              :54   [32m127982554769920000[0;39m ------------- 开始 -------------
2021-12-20 11:56:58.859 INFO  com.aspect.LogAspect                              :55   [32m127982554769920000[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:56:58.859 INFO  com.aspect.LogAspect                              :56   [32m127982554769920000[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:56:58.860 INFO  com.aspect.LogAspect                              :57   [32m127982554769920000[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:56:58.860 INFO  com.aspect.LogAspect                              :80   [32m127982554769920000[0;39m 请求参数: []
2021-12-20 11:56:58.954 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982554753142784[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:56:58.954 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982554753142785[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:56:58.956 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982554753142785[0;39m ==> Parameters: 
2021-12-20 11:56:58.956 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982554753142784[0;39m ==> Parameters: 
2021-12-20 11:56:58.988 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982554769920000[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:56:58.989 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982554769920000[0;39m ==> Parameters: 
2021-12-20 11:56:59.033 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982554753142785[0;39m <==      Total: 0
2021-12-20 11:56:59.035 INFO  com.aspect.LogAspect                              :92   [32m127982554753142785[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:56:59.036 INFO  com.aspect.LogAspect                              :93   [32m127982554753142785[0;39m ------------- 结束 耗时：182 ms -------------
2021-12-20 11:56:59.051 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982554753142784[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:56:59.054 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982554753142784[0;39m <==        Row: 2021-12-20, 199, 69, 199, 69
2021-12-20 11:56:59.056 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982554753142784[0;39m <==      Total: 1
2021-12-20 11:56:59.058 INFO  com.aspect.LogAspect                              :92   [32m127982554753142784[0;39m 返回结果: {"content":[{"date":1639929600000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69}],"success":true}
2021-12-20 11:56:59.058 INFO  com.aspect.LogAspect                              :93   [32m127982554753142784[0;39m ------------- 结束 耗时：204 ms -------------
2021-12-20 11:56:59.061 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:56:59.061 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:56:59.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:56:59.063 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:56:59.065 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:56:59.066 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:56:59.067 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:56:59.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:56:59.069 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:56:59.070 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:56:59.070 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:56:59.071 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:56:59.072 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:56:59.072 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:56:59.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:56:59.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:56:59.074 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:56:59.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:56:59.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:56:59.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982554769920000[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:56:59.077 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982554769920000[0;39m <==      Total: 19
2021-12-20 11:56:59.079 INFO  com.aspect.LogAspect                              :92   [32m127982554769920000[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:56:59.079 INFO  com.aspect.LogAspect                              :93   [32m127982554769920000[0;39m ------------- 结束 耗时：221 ms -------------
2021-12-20 11:57:00.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127982559576592384[0;39m 生成今日电子书快照开始
2021-12-20 11:57:00.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982559576592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:00.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982559576592384[0;39m ==> Parameters: 
2021-12-20 11:57:00.221 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982559576592384[0;39m <==    Updates: 0
2021-12-20 11:57:00.222 INFO  com.job.EbookSnapshotJob                          :35   [32m127982559576592384[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 11:57:00.510 INFO  com.websocket.WebSocketServer                     :41   [32m127982481168273408[0;39m 连接关闭，token：L5uYC5laAL，session id：1！当前连接数：0
2021-12-20 11:57:00.750 INFO  com.websocket.WebSocketServer                     :32   [32m127982481201827841[0;39m 有新连接：token：5anXCFlkW2，session id：2，当前连接数：1
2021-12-20 11:57:00.802 INFO  com.aspect.LogAspect                              :54   [32m127982562923646976[0;39m ------------- 开始 -------------
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :55   [32m127982562923646976[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :54   [32m127982562927841280[0;39m ------------- 开始 -------------
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :56   [32m127982562923646976[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :55   [32m127982562927841280[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :57   [32m127982562923646976[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :56   [32m127982562927841280[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :57   [32m127982562927841280[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :80   [32m127982562923646976[0;39m 请求参数: []
2021-12-20 11:57:00.803 INFO  com.aspect.LogAspect                              :80   [32m127982562927841280[0;39m 请求参数: []
2021-12-20 11:57:00.805 INFO  com.aspect.LogAspect                              :54   [32m127982562936229888[0;39m ------------- 开始 -------------
2021-12-20 11:57:00.806 INFO  com.aspect.LogAspect                              :55   [32m127982562936229888[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:57:00.806 INFO  com.aspect.LogAspect                              :56   [32m127982562936229888[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:57:00.806 INFO  com.aspect.LogAspect                              :57   [32m127982562936229888[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:00.807 INFO  com.aspect.LogAspect                              :80   [32m127982562936229888[0;39m 请求参数: []
2021-12-20 11:57:00.872 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982562923646976[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:57:00.873 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982562923646976[0;39m ==> Parameters: 
2021-12-20 11:57:00.886 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982562936229888[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:57:00.886 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982562927841280[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:57:00.887 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982562936229888[0;39m ==> Parameters: 
2021-12-20 11:57:00.887 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982562927841280[0;39m ==> Parameters: 
2021-12-20 11:57:00.982 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982562927841280[0;39m <==      Total: 0
2021-12-20 11:57:00.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:57:00.986 INFO  com.aspect.LogAspect                              :92   [32m127982562927841280[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:57:00.986 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:57:00.987 INFO  com.aspect.LogAspect                              :93   [32m127982562927841280[0;39m ------------- 结束 耗时：184 ms -------------
2021-12-20 11:57:00.988 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982562923646976[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:57:00.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:57:00.989 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982562923646976[0;39m <==        Row: 2021-12-20, 199, 69, 199, 69
2021-12-20 11:57:00.989 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:57:00.990 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:57:00.990 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982562923646976[0;39m <==      Total: 1
2021-12-20 11:57:00.991 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:57:00.991 INFO  com.aspect.LogAspect                              :92   [32m127982562923646976[0;39m 返回结果: {"content":[{"date":1639929600000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69}],"success":true}
2021-12-20 11:57:00.991 INFO  com.aspect.LogAspect                              :93   [32m127982562923646976[0;39m ------------- 结束 耗时：189 ms -------------
2021-12-20 11:57:00.991 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:57:00.992 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:57:00.993 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:57:00.994 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:57:00.995 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:57:00.997 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:57:00.998 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:57:00.999 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:57:01.000 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:57:01.001 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:57:01.002 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:57:01.002 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:57:01.003 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:57:01.004 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982562936229888[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:57:01.004 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982562936229888[0;39m <==      Total: 19
2021-12-20 11:57:01.007 INFO  com.aspect.LogAspect                              :92   [32m127982562936229888[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:57:01.007 INFO  com.aspect.LogAspect                              :93   [32m127982562936229888[0;39m ------------- 结束 耗时：202 ms -------------
2021-12-20 11:57:05.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127982580590055424[0;39m 生成今日电子书快照开始
2021-12-20 11:57:05.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982580590055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:05.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982580590055424[0;39m ==> Parameters: 
2021-12-20 11:57:05.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982580590055424[0;39m <==    Updates: 0
2021-12-20 11:57:05.214 INFO  com.job.EbookSnapshotJob                          :35   [32m127982580590055424[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:57:05.214 INFO  com.job.DocJob                                    :32   [32m127982581428916224[0;39m 更新电子书下的文档数据开始
2021-12-20 11:57:05.214 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982581428916224[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:57:05.214 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982581428916224[0;39m ==> Parameters: 
2021-12-20 11:57:05.365 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982581428916224[0;39m <==    Updates: 6
2021-12-20 11:57:05.365 INFO  com.job.DocJob                                    :35   [32m127982581428916224[0;39m 更新电子书下的文档数据结束，耗时：151毫秒
2021-12-20 11:57:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127982601557381120[0;39m 生成今日电子书快照开始
2021-12-20 11:57:10.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982601557381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:10.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982601557381120[0;39m ==> Parameters: 
2021-12-20 11:57:10.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982601557381120[0;39m <==    Updates: 0
2021-12-20 11:57:10.261 INFO  com.job.EbookSnapshotJob                          :35   [32m127982601557381120[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:57:15.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127982622499540992[0;39m 生成今日电子书快照开始
2021-12-20 11:57:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982622499540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:15.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982622499540992[0;39m ==> Parameters: 
2021-12-20 11:57:15.213 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982622499540992[0;39m <==    Updates: 0
2021-12-20 11:57:15.213 INFO  com.job.EbookSnapshotJob                          :35   [32m127982622499540992[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 11:57:20.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127982643521392640[0;39m 生成今日电子书快照开始
2021-12-20 11:57:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982643521392640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982643521392640[0;39m ==> Parameters: 
2021-12-20 11:57:20.241 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982643521392640[0;39m <==    Updates: 0
2021-12-20 11:57:20.241 INFO  com.job.EbookSnapshotJob                          :35   [32m127982643521392640[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:57:25.017 INFO  com.job.EbookSnapshotJob                          :32   [32m127982664488718336[0;39m 生成今日电子书快照开始
2021-12-20 11:57:25.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982664488718336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:25.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982664488718336[0;39m ==> Parameters: 
2021-12-20 11:57:25.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982664488718336[0;39m <==    Updates: 0
2021-12-20 11:57:25.276 INFO  com.job.EbookSnapshotJob                          :35   [32m127982664488718336[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 11:57:25.521 INFO  com.websocket.WebSocketServer                     :41   [32m127982554753142784[0;39m 连接关闭，token：5anXCFlkW2，session id：2！当前连接数：0
2021-12-20 11:57:26.203 INFO  com.websocket.WebSocketServer                     :32   [32m127982554769920000[0;39m 有新连接：token：xQfCkUFx1q，session id：3，当前连接数：1
2021-12-20 11:57:26.279 INFO  com.aspect.LogAspect                              :54   [32m127982669781929984[0;39m ------------- 开始 -------------
2021-12-20 11:57:26.280 INFO  com.aspect.LogAspect                              :55   [32m127982669781929984[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:57:26.280 INFO  com.aspect.LogAspect                              :56   [32m127982669781929984[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:57:26.280 INFO  com.aspect.LogAspect                              :57   [32m127982669781929984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:26.281 INFO  com.aspect.LogAspect                              :80   [32m127982669781929984[0;39m 请求参数: []
2021-12-20 11:57:26.281 INFO  com.aspect.LogAspect                              :54   [32m127982669790318592[0;39m ------------- 开始 -------------
2021-12-20 11:57:26.281 INFO  com.aspect.LogAspect                              :55   [32m127982669790318592[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:57:26.281 INFO  com.aspect.LogAspect                              :56   [32m127982669790318592[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:57:26.281 INFO  com.aspect.LogAspect                              :57   [32m127982669790318592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:26.281 INFO  com.aspect.LogAspect                              :80   [32m127982669790318592[0;39m 请求参数: []
2021-12-20 11:57:26.285 INFO  com.aspect.LogAspect                              :54   [32m127982669807095808[0;39m ------------- 开始 -------------
2021-12-20 11:57:26.286 INFO  com.aspect.LogAspect                              :55   [32m127982669807095808[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:57:26.287 INFO  com.aspect.LogAspect                              :56   [32m127982669807095808[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:57:26.287 INFO  com.aspect.LogAspect                              :57   [32m127982669807095808[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:26.287 INFO  com.aspect.LogAspect                              :80   [32m127982669807095808[0;39m 请求参数: []
2021-12-20 11:57:26.443 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982669781929984[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:57:26.444 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982669781929984[0;39m ==> Parameters: 
2021-12-20 11:57:26.459 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982669790318592[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:57:26.459 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982669790318592[0;39m ==> Parameters: 
2021-12-20 11:57:26.460 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982669807095808[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:57:26.460 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982669807095808[0;39m ==> Parameters: 
2021-12-20 11:57:26.512 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982669781929984[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:57:26.515 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982669781929984[0;39m <==        Row: 2021-12-20, 199, 69, 199, 69
2021-12-20 11:57:26.517 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982669781929984[0;39m <==      Total: 1
2021-12-20 11:57:26.519 INFO  com.aspect.LogAspect                              :92   [32m127982669781929984[0;39m 返回结果: {"content":[{"date":1639929600000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69}],"success":true}
2021-12-20 11:57:26.519 INFO  com.aspect.LogAspect                              :93   [32m127982669781929984[0;39m ------------- 结束 耗时：240 ms -------------
2021-12-20 11:57:26.534 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982669790318592[0;39m <==      Total: 0
2021-12-20 11:57:26.537 INFO  com.aspect.LogAspect                              :92   [32m127982669790318592[0;39m 返回结果: {"content":[],"success":true}
2021-12-20 11:57:26.537 INFO  com.aspect.LogAspect                              :93   [32m127982669790318592[0;39m ------------- 结束 耗时：256 ms -------------
2021-12-20 11:57:26.554 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:57:26.555 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:57:26.556 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:57:26.556 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:57:26.557 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:57:26.557 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:57:26.558 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:57:26.558 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:57:26.559 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:57:26.560 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:57:26.560 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:57:26.561 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:57:26.561 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:57:26.561 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:57:26.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:57:26.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:57:26.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:57:26.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:57:26.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:57:26.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982669807095808[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:57:26.564 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982669807095808[0;39m <==      Total: 19
2021-12-20 11:57:26.566 INFO  com.aspect.LogAspect                              :92   [32m127982669807095808[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:57:26.566 INFO  com.aspect.LogAspect                              :93   [32m127982669807095808[0;39m ------------- 结束 耗时：281 ms -------------
2021-12-20 11:57:30.003 INFO  com.job.EbookSnapshotJob                          :32   [32m127982685401518080[0;39m 生成今日电子书快照开始
2021-12-20 11:57:30.088 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982685401518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:30.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982685401518080[0;39m ==> Parameters: 
2021-12-20 11:57:30.219 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982685401518080[0;39m <==    Updates: 0
2021-12-20 11:57:30.219 INFO  com.job.EbookSnapshotJob                          :35   [32m127982685401518080[0;39m 生成今日电子书快照结束，耗时：216毫秒
2021-12-20 11:57:35.019 INFO  com.job.DocJob                                    :32   [32m127982706440146944[0;39m 更新电子书下的文档数据开始
2021-12-20 11:57:35.086 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982706440146944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:57:35.086 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982706440146944[0;39m ==> Parameters: 
2021-12-20 11:57:35.233 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982706440146944[0;39m <==    Updates: 6
2021-12-20 11:57:35.233 INFO  com.job.DocJob                                    :35   [32m127982706440146944[0;39m 更新电子书下的文档数据结束，耗时：214毫秒
2021-12-20 11:57:35.233 INFO  com.job.EbookSnapshotJob                          :32   [32m127982707337728000[0;39m 生成今日电子书快照开始
2021-12-20 11:57:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982707337728000[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:35.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982707337728000[0;39m ==> Parameters: 
2021-12-20 11:57:35.371 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982707337728000[0;39m <==    Updates: 0
2021-12-20 11:57:35.371 INFO  com.job.EbookSnapshotJob                          :35   [32m127982707337728000[0;39m 生成今日电子书快照结束，耗时：138毫秒
2021-12-20 11:57:40.020 INFO  com.job.EbookSnapshotJob                          :32   [32m127982727415861248[0;39m 生成今日电子书快照开始
2021-12-20 11:57:40.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982727415861248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:40.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982727415861248[0;39m ==> Parameters: 
2021-12-20 11:57:40.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982727415861248[0;39m <==    Updates: 0
2021-12-20 11:57:40.251 INFO  com.job.EbookSnapshotJob                          :35   [32m127982727415861248[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 11:57:45.015 INFO  com.job.EbookSnapshotJob                          :32   [32m127982748366409728[0;39m 生成今日电子书快照开始
2021-12-20 11:57:45.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982748366409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:45.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982748366409728[0;39m ==> Parameters: 
2021-12-20 11:57:45.215 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982748366409728[0;39m <==    Updates: 6
2021-12-20 11:57:45.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127982748366409728[0;39m 生成今日电子书快照结束，耗时：200毫秒
2021-12-20 11:57:50.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127982769300180992[0;39m 生成今日电子书快照开始
2021-12-20 11:57:50.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982769300180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:50.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982769300180992[0;39m ==> Parameters: 
2021-12-20 11:57:50.266 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982769300180992[0;39m <==    Updates: 0
2021-12-20 11:57:50.266 INFO  com.job.EbookSnapshotJob                          :35   [32m127982769300180992[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 11:57:51.563 INFO  com.websocket.WebSocketServer                     :41   [32m127982554753142785[0;39m 连接关闭，token：xQfCkUFx1q，session id：3！当前连接数：0
2021-12-20 11:57:52.238 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：r9qy99DKex，session id：4，当前连接数：1
2021-12-20 11:57:52.312 INFO  com.aspect.LogAspect                              :54   [32m127982778968051712[0;39m ------------- 开始 -------------
2021-12-20 11:57:52.312 INFO  com.aspect.LogAspect                              :55   [32m127982778968051712[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:57:52.312 INFO  com.aspect.LogAspect                              :56   [32m127982778968051712[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:57:52.312 INFO  com.aspect.LogAspect                              :57   [32m127982778968051712[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:52.313 INFO  com.aspect.LogAspect                              :80   [32m127982778968051712[0;39m 请求参数: []
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :54   [32m127982778989023233[0;39m ------------- 开始 -------------
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :54   [32m127982778989023232[0;39m ------------- 开始 -------------
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :55   [32m127982778989023233[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :55   [32m127982778989023232[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :56   [32m127982778989023233[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :57   [32m127982778989023233[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:52.316 INFO  com.aspect.LogAspect                              :56   [32m127982778989023232[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:57:52.317 INFO  com.aspect.LogAspect                              :80   [32m127982778989023233[0;39m 请求参数: []
2021-12-20 11:57:52.317 INFO  com.aspect.LogAspect                              :57   [32m127982778989023232[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:57:52.317 INFO  com.aspect.LogAspect                              :80   [32m127982778989023232[0;39m 请求参数: []
2021-12-20 11:57:52.409 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982778968051712[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:57:52.409 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982778989023233[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:57:52.409 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982778989023233[0;39m ==> Parameters: 
2021-12-20 11:57:52.409 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982778968051712[0;39m ==> Parameters: 
2021-12-20 11:57:52.409 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982778989023232[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:57:52.410 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982778989023232[0;39m ==> Parameters: 
2021-12-20 11:57:52.493 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127982778989023232[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:57:52.493 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:57:52.493 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982778968051712[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:57:52.494 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:57:52.494 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127982778989023232[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 11:57:52.494 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982778968051712[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 11:57:52.494 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:57:52.495 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982778989023232[0;39m <==      Total: 1
2021-12-20 11:57:52.495 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:57:52.495 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982778968051712[0;39m <==        Row: 2021-12-20, 199, 69, 0, 0
2021-12-20 11:57:52.495 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:57:52.495 INFO  com.aspect.LogAspect                              :92   [32m127982778989023232[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 11:57:52.495 INFO  com.aspect.LogAspect                              :93   [32m127982778989023232[0;39m ------------- 结束 耗时：179 ms -------------
2021-12-20 11:57:52.496 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:57:52.496 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982778968051712[0;39m <==      Total: 2
2021-12-20 11:57:52.496 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:57:52.496 INFO  com.aspect.LogAspect                              :92   [32m127982778968051712[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":199,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-12-20 11:57:52.496 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:57:52.496 INFO  com.aspect.LogAspect                              :93   [32m127982778968051712[0;39m ------------- 结束 耗时：185 ms -------------
2021-12-20 11:57:52.497 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:57:52.497 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:57:52.498 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:57:52.498 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:57:52.499 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:57:52.499 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:57:52.500 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:57:52.501 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:57:52.501 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:57:52.502 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:57:52.503 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:57:52.504 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982778989023233[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:57:52.505 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982778989023233[0;39m <==      Total: 19
2021-12-20 11:57:52.509 INFO  com.aspect.LogAspect                              :92   [32m127982778989023233[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:57:52.509 INFO  com.aspect.LogAspect                              :93   [32m127982778989023233[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-20 11:57:55.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127982790280089600[0;39m 生成今日电子书快照开始
2021-12-20 11:57:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982790280089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:57:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982790280089600[0;39m ==> Parameters: 
2021-12-20 11:57:55.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982790280089600[0;39m <==    Updates: 0
2021-12-20 11:57:55.230 INFO  com.job.EbookSnapshotJob                          :35   [32m127982790280089600[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 11:58:00.026 INFO  com.job.EbookSnapshotJob                          :32   [32m127982811327107072[0;39m 生成今日电子书快照开始
2021-12-20 11:58:00.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982811327107072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:00.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982811327107072[0;39m ==> Parameters: 
2021-12-20 11:58:00.212 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982811327107072[0;39m <==    Updates: 0
2021-12-20 11:58:00.227 INFO  com.job.EbookSnapshotJob                          :35   [32m127982811327107072[0;39m 生成今日电子书快照结束，耗时：201毫秒
2021-12-20 11:58:05.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127982832235712512[0;39m 生成今日电子书快照开始
2021-12-20 11:58:05.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982832235712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:05.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982832235712512[0;39m ==> Parameters: 
2021-12-20 11:58:05.327 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982832235712512[0;39m <==    Updates: 0
2021-12-20 11:58:05.327 INFO  com.job.EbookSnapshotJob                          :35   [32m127982832235712512[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-20 11:58:05.327 INFO  com.job.DocJob                                    :32   [32m127982833561112576[0;39m 更新电子书下的文档数据开始
2021-12-20 11:58:05.327 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982833561112576[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:58:05.327 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982833561112576[0;39m ==> Parameters: 
2021-12-20 11:58:05.465 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982833561112576[0;39m <==    Updates: 6
2021-12-20 11:58:05.465 INFO  com.job.DocJob                                    :35   [32m127982833561112576[0;39m 更新电子书下的文档数据结束，耗时：138毫秒
2021-12-20 11:58:10.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127982853215621120[0;39m 生成今日电子书快照开始
2021-12-20 11:58:10.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982853215621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:10.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982853215621120[0;39m ==> Parameters: 
2021-12-20 11:58:10.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982853215621120[0;39m <==    Updates: 0
2021-12-20 11:58:10.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127982853215621120[0;39m 生成今日电子书快照结束，耗时：220毫秒
2021-12-20 11:58:15.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127982874174558208[0;39m 生成今日电子书快照开始
2021-12-20 11:58:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982874174558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982874174558208[0;39m ==> Parameters: 
2021-12-20 11:58:15.226 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982874174558208[0;39m <==    Updates: 0
2021-12-20 11:58:15.233 INFO  com.job.EbookSnapshotJob                          :35   [32m127982874174558208[0;39m 生成今日电子书快照结束，耗时：223毫秒
2021-12-20 11:58:20.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127982895120912384[0;39m 生成今日电子书快照开始
2021-12-20 11:58:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982895120912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982895120912384[0;39m ==> Parameters: 
2021-12-20 11:58:20.254 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982895120912384[0;39m <==    Updates: 0
2021-12-20 11:58:20.256 INFO  com.job.EbookSnapshotJob                          :35   [32m127982895120912384[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 11:58:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127982916125986816[0;39m 生成今日电子书快照开始
2021-12-20 11:58:25.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982916125986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:25.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982916125986816[0;39m ==> Parameters: 
2021-12-20 11:58:25.259 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982916125986816[0;39m <==    Updates: 0
2021-12-20 11:58:25.259 INFO  com.job.EbookSnapshotJob                          :35   [32m127982916125986816[0;39m 生成今日电子书快照结束，耗时：247毫秒
2021-12-20 11:58:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127982937076535296[0;39m 生成今日电子书快照开始
2021-12-20 11:58:30.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982937076535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:30.113 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982937076535296[0;39m ==> Parameters: 
2021-12-20 11:58:30.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982937076535296[0;39m <==    Updates: 0
2021-12-20 11:58:30.274 INFO  com.job.EbookSnapshotJob                          :35   [32m127982937076535296[0;39m 生成今日电子书快照结束，耗时：265毫秒
2021-12-20 11:58:32.307 INFO  com.aspect.LogAspect                              :54   [32m127982946723434496[0;39m ------------- 开始 -------------
2021-12-20 11:58:32.307 INFO  com.aspect.LogAspect                              :55   [32m127982946723434496[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 11:58:32.307 INFO  com.aspect.LogAspect                              :56   [32m127982946723434496[0;39m 类名方法: com.controller.UserController.login
2021-12-20 11:58:32.307 INFO  com.aspect.LogAspect                              :57   [32m127982946723434496[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:32.308 INFO  com.aspect.LogAspect                              :80   [32m127982946723434496[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 11:58:32.410 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127982946723434496[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 11:58:32.411 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127982946723434496[0;39m ==> Parameters: test123(String)
2021-12-20 11:58:32.519 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982946723434496[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:58:32.521 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982946723434496[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:58:32.524 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127982946723434496[0;39m <==      Total: 1
2021-12-20 11:58:32.542 INFO  com.controller.UserController                     :77   [32m127982946723434496[0;39m 生成单点登录token:127982947709095936,并放入redis中
2021-12-20 11:58:33.227 INFO  com.aspect.LogAspect                              :92   [32m127982946723434496[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"127982947709095936"},"success":true}
2021-12-20 11:58:33.228 INFO  com.aspect.LogAspect                              :93   [32m127982946723434496[0;39m ------------- 结束 耗时：921 ms -------------
2021-12-20 11:58:33.613 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：r9qy99DKex，session id：4！当前连接数：0
2021-12-20 11:58:34.294 INFO  com.websocket.WebSocketServer                     :32   [32m127982554753142785[0;39m 有新连接：token：wHEvG3uPKu，session id：5，当前连接数：1
2021-12-20 11:58:34.383 INFO  com.aspect.LogAspect                              :54   [32m127982955426615296[0;39m ------------- 开始 -------------
2021-12-20 11:58:34.383 INFO  com.aspect.LogAspect                              :55   [32m127982955426615296[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:58:34.383 INFO  com.aspect.LogAspect                              :56   [32m127982955426615296[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:58:34.383 INFO  com.aspect.LogAspect                              :54   [32m127982955430809600[0;39m ------------- 开始 -------------
2021-12-20 11:58:34.383 INFO  com.aspect.LogAspect                              :57   [32m127982955426615296[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:34.384 INFO  com.aspect.LogAspect                              :55   [32m127982955430809600[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:58:34.384 INFO  com.aspect.LogAspect                              :80   [32m127982955426615296[0;39m 请求参数: []
2021-12-20 11:58:34.384 INFO  com.aspect.LogAspect                              :56   [32m127982955430809600[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:58:34.384 INFO  com.aspect.LogAspect                              :57   [32m127982955430809600[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:34.384 INFO  com.aspect.LogAspect                              :80   [32m127982955430809600[0;39m 请求参数: []
2021-12-20 11:58:34.385 INFO  com.aspect.LogAspect                              :54   [32m127982955439198208[0;39m ------------- 开始 -------------
2021-12-20 11:58:34.385 INFO  com.aspect.LogAspect                              :55   [32m127982955439198208[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:58:34.385 INFO  com.aspect.LogAspect                              :56   [32m127982955439198208[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:58:34.385 INFO  com.aspect.LogAspect                              :57   [32m127982955439198208[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:34.386 INFO  com.aspect.LogAspect                              :80   [32m127982955439198208[0;39m 请求参数: []
2021-12-20 11:58:34.459 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982955430809600[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:58:34.459 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982955426615296[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:58:34.460 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982955430809600[0;39m ==> Parameters: 
2021-12-20 11:58:34.460 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982955426615296[0;39m ==> Parameters: 
2021-12-20 11:58:34.466 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982955439198208[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:58:34.466 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982955439198208[0;39m ==> Parameters: 
2021-12-20 11:58:34.537 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127982955430809600[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:58:34.538 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127982955430809600[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 11:58:34.539 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127982955430809600[0;39m <==      Total: 1
2021-12-20 11:58:34.540 INFO  com.aspect.LogAspect                              :92   [32m127982955430809600[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 11:58:34.540 INFO  com.aspect.LogAspect                              :93   [32m127982955430809600[0;39m ------------- 结束 耗时：157 ms -------------
2021-12-20 11:58:34.545 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982955426615296[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:58:34.545 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:58:34.545 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:58:34.546 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982955426615296[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 11:58:34.546 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:58:34.547 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:58:34.548 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127982955426615296[0;39m <==        Row: 2021-12-20, 199, 69, 0, 0
2021-12-20 11:58:34.548 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:58:34.549 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127982955426615296[0;39m <==      Total: 2
2021-12-20 11:58:34.549 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:58:34.550 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:58:34.550 INFO  com.aspect.LogAspect                              :92   [32m127982955426615296[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":199,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-12-20 11:58:34.551 INFO  com.aspect.LogAspect                              :93   [32m127982955426615296[0;39m ------------- 结束 耗时：169 ms -------------
2021-12-20 11:58:34.551 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:58:34.552 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:58:34.553 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:58:34.553 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:58:34.554 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:58:34.555 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:58:34.556 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:58:34.556 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:58:34.557 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:58:34.558 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:58:34.558 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:58:34.559 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:58:34.559 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127982955439198208[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:58:34.559 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127982955439198208[0;39m <==      Total: 19
2021-12-20 11:58:34.563 INFO  com.aspect.LogAspect                              :92   [32m127982955439198208[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:58:34.564 INFO  com.aspect.LogAspect                              :93   [32m127982955439198208[0;39m ------------- 结束 耗时：179 ms -------------
2021-12-20 11:58:35.013 INFO  com.job.EbookSnapshotJob                          :32   [32m127982958073221120[0;39m 生成今日电子书快照开始
2021-12-20 11:58:35.013 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982958073221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:35.014 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982958073221120[0;39m ==> Parameters: 
2021-12-20 11:58:35.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982958073221120[0;39m <==    Updates: 0
2021-12-20 11:58:35.153 INFO  com.job.EbookSnapshotJob                          :35   [32m127982958073221120[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-20 11:58:35.154 INFO  com.job.DocJob                                    :32   [32m127982958664617984[0;39m 更新电子书下的文档数据开始
2021-12-20 11:58:35.154 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982958664617984[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:58:35.154 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982958664617984[0;39m ==> Parameters: 
2021-12-20 11:58:35.288 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127982958664617984[0;39m <==    Updates: 6
2021-12-20 11:58:35.288 INFO  com.job.DocJob                                    :35   [32m127982958664617984[0;39m 更新电子书下的文档数据结束，耗时：134毫秒
2021-12-20 11:58:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127982979048935424[0;39m 生成今日电子书快照开始
2021-12-20 11:58:40.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982979048935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:40.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982979048935424[0;39m ==> Parameters: 
2021-12-20 11:58:40.237 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982979048935424[0;39m <==    Updates: 0
2021-12-20 11:58:40.239 INFO  com.job.EbookSnapshotJob                          :35   [32m127982979048935424[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 11:58:44.503 INFO  com.aspect.LogAspect                              :54   [32m127982997877166080[0;39m ------------- 开始 -------------
2021-12-20 11:58:44.504 INFO  com.aspect.LogAspect                              :55   [32m127982997877166080[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 11:58:44.504 INFO  com.aspect.LogAspect                              :56   [32m127982997877166080[0;39m 类名方法: com.controller.UserController.list
2021-12-20 11:58:44.504 INFO  com.aspect.LogAspect                              :57   [32m127982997877166080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:44.505 INFO  com.aspect.LogAspect                              :80   [32m127982997877166080[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:58:44.630 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127982997877166080[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 11:58:44.630 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127982997877166080[0;39m ==> Parameters: 
2021-12-20 11:58:44.695 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127982997877166080[0;39m <==    Columns: count(0)
2021-12-20 11:58:44.696 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m127982997877166080[0;39m <==        Row: 8
2021-12-20 11:58:44.698 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m127982997877166080[0;39m <==      Total: 1
2021-12-20 11:58:44.702 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127982997877166080[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 11:58:44.703 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127982997877166080[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:58:44.794 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==    Columns: id, login_name, name, password
2021-12-20 11:58:44.794 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:58:44.795 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:58:44.796 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:58:44.797 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 11:58:44.798 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 11:58:44.799 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:58:44.800 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:58:44.801 TRACE com.mapper.UserMapper.selectByExample             :143  [32m127982997877166080[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 11:58:44.801 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m127982997877166080[0;39m <==      Total: 8
2021-12-20 11:58:44.803 INFO  com.servicess.UserService                         :52   [32m127982997877166080[0;39m 总行数：8
2021-12-20 11:58:44.803 INFO  com.servicess.UserService                         :53   [32m127982997877166080[0;39m 总页数：1
2021-12-20 11:58:44.819 INFO  com.aspect.LogAspect                              :92   [32m127982997877166080[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 11:58:44.819 INFO  com.aspect.LogAspect                              :93   [32m127982997877166080[0;39m ------------- 结束 耗时：316 ms -------------
2021-12-20 11:58:45.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127982999982706688[0;39m 生成今日电子书快照开始
2021-12-20 11:58:45.005 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982999982706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:45.006 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982999982706688[0;39m ==> Parameters: 
2021-12-20 11:58:45.146 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127982999982706688[0;39m <==    Updates: 0
2021-12-20 11:58:45.147 INFO  com.job.EbookSnapshotJob                          :35   [32m127982999982706688[0;39m 生成今日电子书快照结束，耗时：142毫秒
2021-12-20 11:58:49.947 INFO  com.aspect.LogAspect                              :54   [32m127983020710957056[0;39m ------------- 开始 -------------
2021-12-20 11:58:49.947 INFO  com.aspect.LogAspect                              :55   [32m127983020710957056[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:58:49.947 INFO  com.aspect.LogAspect                              :56   [32m127983020710957056[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:58:49.947 INFO  com.aspect.LogAspect                              :57   [32m127983020710957056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:49.948 INFO  com.aspect.LogAspect                              :80   [32m127983020710957056[0;39m 请求参数: []
2021-12-20 11:58:50.009 INFO  com.job.EbookSnapshotJob                          :32   [32m127983020971003904[0;39m 生成今日电子书快照开始
2021-12-20 11:58:50.015 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983020710957056[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:58:50.015 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983020710957056[0;39m ==> Parameters: 
2021-12-20 11:58:50.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983020971003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:50.093 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:58:50.094 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:58:50.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983020971003904[0;39m ==> Parameters: 
2021-12-20 11:58:50.094 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:58:50.095 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:58:50.095 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:58:50.095 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:58:50.096 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:58:50.096 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:58:50.096 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:58:50.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:58:50.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:58:50.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:58:50.098 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:58:50.098 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:58:50.099 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:58:50.099 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:58:50.100 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:58:50.100 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:58:50.101 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:58:50.101 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983020710957056[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:58:50.102 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983020710957056[0;39m <==      Total: 19
2021-12-20 11:58:50.104 INFO  com.aspect.LogAspect                              :92   [32m127983020710957056[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:58:50.105 INFO  com.aspect.LogAspect                              :93   [32m127983020710957056[0;39m ------------- 结束 耗时：158 ms -------------
2021-12-20 11:58:50.135 INFO  com.aspect.LogAspect                              :54   [32m127983021499486208[0;39m ------------- 开始 -------------
2021-12-20 11:58:50.136 INFO  com.aspect.LogAspect                              :55   [32m127983021499486208[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:58:50.136 INFO  com.aspect.LogAspect                              :56   [32m127983021499486208[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:58:50.136 INFO  com.aspect.LogAspect                              :57   [32m127983021499486208[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:50.140 INFO  com.aspect.LogAspect                              :80   [32m127983021499486208[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 11:58:50.146 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983021499486208[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 11:58:50.146 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983021499486208[0;39m ==> Parameters: 
2021-12-20 11:58:50.224 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983021499486208[0;39m <==    Columns: count(0)
2021-12-20 11:58:50.225 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983021499486208[0;39m <==        Row: 6
2021-12-20 11:58:50.225 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983021499486208[0;39m <==      Total: 1
2021-12-20 11:58:50.226 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983021499486208[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 11:58:50.226 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983021499486208[0;39m ==> Parameters: 10(Integer)
2021-12-20 11:58:50.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983020971003904[0;39m <==    Updates: 0
2021-12-20 11:58:50.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127983020971003904[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 11:58:50.308 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:58:50.309 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 107, 26
2021-12-20 11:58:50.310 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 86, 37
2021-12-20 11:58:50.312 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 11:58:50.312 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 11:58:50.313 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 11:58:50.313 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983021499486208[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 11:58:50.314 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983021499486208[0;39m <==      Total: 6
2021-12-20 11:58:50.314 INFO  com.servicess.EbookService                        :48   [32m127983021499486208[0;39m 总行数：6
2021-12-20 11:58:50.314 INFO  com.servicess.EbookService                        :49   [32m127983021499486208[0;39m 总页数：1
2021-12-20 11:58:50.329 INFO  com.aspect.LogAspect                              :92   [32m127983021499486208[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":107,"voteCount":26},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":86,"voteCount":37},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 11:58:50.329 INFO  com.aspect.LogAspect                              :93   [32m127983021499486208[0;39m ------------- 结束 耗时：194 ms -------------
2021-12-20 11:58:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m127983041929940992[0;39m 生成今日电子书快照开始
2021-12-20 11:58:55.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983041929940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:58:55.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983041929940992[0;39m ==> Parameters: 
2021-12-20 11:58:55.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983041929940992[0;39m <==    Updates: 0
2021-12-20 11:58:55.260 INFO  com.job.EbookSnapshotJob                          :35   [32m127983041929940992[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 11:58:57.414 INFO  com.aspect.LogAspect                              :54   [32m127983052029825024[0;39m ------------- 开始 -------------
2021-12-20 11:58:57.414 INFO  com.aspect.LogAspect                              :55   [32m127983052029825024[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:58:57.415 INFO  com.aspect.LogAspect                              :56   [32m127983052029825024[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:58:57.415 INFO  com.aspect.LogAspect                              :57   [32m127983052029825024[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:58:57.415 INFO  com.aspect.LogAspect                              :80   [32m127983052029825024[0;39m 请求参数: []
2021-12-20 11:58:57.501 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983052029825024[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:58:57.502 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983052029825024[0;39m ==> Parameters: 
2021-12-20 11:58:57.575 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:58:57.576 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:58:57.577 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:58:57.578 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:58:57.579 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:58:57.580 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:58:57.581 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:58:57.585 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:58:57.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:58:57.588 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:58:57.589 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:58:57.590 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:58:57.592 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:58:57.593 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:58:57.594 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:58:57.595 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:58:57.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:58:57.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:58:57.598 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:58:57.601 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983052029825024[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:58:57.603 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983052029825024[0;39m <==      Total: 19
2021-12-20 11:58:57.608 INFO  com.aspect.LogAspect                              :92   [32m127983052029825024[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:58:57.609 INFO  com.aspect.LogAspect                              :93   [32m127983052029825024[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-20 11:59:00.005 INFO  com.job.EbookSnapshotJob                          :32   [32m127983062897266688[0;39m 生成今日电子书快照开始
2021-12-20 11:59:00.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983062897266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:00.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983062897266688[0;39m ==> Parameters: 
2021-12-20 11:59:00.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983062897266688[0;39m <==    Updates: 0
2021-12-20 11:59:00.253 INFO  com.job.EbookSnapshotJob                          :35   [32m127983062897266688[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-20 11:59:04.870 INFO  com.aspect.LogAspect                              :54   [32m127983083302555648[0;39m ------------- 开始 -------------
2021-12-20 11:59:04.870 INFO  com.aspect.LogAspect                              :55   [32m127983083302555648[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:59:04.870 INFO  com.aspect.LogAspect                              :56   [32m127983083302555648[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :57   [32m127983083302555648[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :54   [32m127983083306749952[0;39m ------------- 开始 -------------
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :55   [32m127983083306749952[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :80   [32m127983083302555648[0;39m 请求参数: []
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :56   [32m127983083306749952[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :57   [32m127983083306749952[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:04.871 INFO  com.aspect.LogAspect                              :80   [32m127983083306749952[0;39m 请求参数: []
2021-12-20 11:59:04.873 INFO  com.aspect.LogAspect                              :54   [32m127983083315138560[0;39m ------------- 开始 -------------
2021-12-20 11:59:04.873 INFO  com.aspect.LogAspect                              :55   [32m127983083315138560[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:59:04.873 INFO  com.aspect.LogAspect                              :56   [32m127983083315138560[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:59:04.873 INFO  com.aspect.LogAspect                              :57   [32m127983083315138560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:04.874 INFO  com.aspect.LogAspect                              :80   [32m127983083315138560[0;39m 请求参数: []
2021-12-20 11:59:04.947 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983083302555648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:04.947 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983083302555648[0;39m ==> Parameters: 
2021-12-20 11:59:04.968 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983083315138560[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:59:04.968 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983083306749952[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:04.968 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983083315138560[0;39m ==> Parameters: 
2021-12-20 11:59:04.968 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983083306749952[0;39m ==> Parameters: 
2021-12-20 11:59:05.007 INFO  com.job.DocJob                                    :32   [32m127983083877175296[0;39m 更新电子书下的文档数据开始
2021-12-20 11:59:05.026 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983083302555648[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:59:05.029 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983083302555648[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 11:59:05.032 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983083302555648[0;39m <==        Row: 2021-12-20, 199, 69, 0, 0
2021-12-20 11:59:05.034 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983083302555648[0;39m <==      Total: 2
2021-12-20 11:59:05.036 INFO  com.aspect.LogAspect                              :92   [32m127983083302555648[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":199,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-12-20 11:59:05.037 INFO  com.aspect.LogAspect                              :93   [32m127983083302555648[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-20 11:59:05.070 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983083306749952[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:59:05.070 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:59:05.071 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983083306749952[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 11:59:05.071 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:59:05.072 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:59:05.072 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983083306749952[0;39m <==      Total: 1
2021-12-20 11:59:05.072 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:59:05.072 INFO  com.aspect.LogAspect                              :92   [32m127983083306749952[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 11:59:05.073 INFO  com.aspect.LogAspect                              :93   [32m127983083306749952[0;39m ------------- 结束 耗时：202 ms -------------
2021-12-20 11:59:05.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:59:05.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:59:05.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:59:05.074 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:59:05.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:59:05.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:59:05.076 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:59:05.077 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983083877175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:59:05.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:59:05.077 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983083877175296[0;39m ==> Parameters: 
2021-12-20 11:59:05.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:59:05.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:59:05.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:59:05.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:59:05.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:59:05.079 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:59:05.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:59:05.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983083315138560[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:59:05.080 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983083315138560[0;39m <==      Total: 19
2021-12-20 11:59:05.081 INFO  com.aspect.LogAspect                              :92   [32m127983083315138560[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:59:05.082 INFO  com.aspect.LogAspect                              :93   [32m127983083315138560[0;39m ------------- 结束 耗时：209 ms -------------
2021-12-20 11:59:05.229 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983083877175296[0;39m <==    Updates: 6
2021-12-20 11:59:05.229 INFO  com.job.DocJob                                    :35   [32m127983083877175296[0;39m 更新电子书下的文档数据结束，耗时：221毫秒
2021-12-20 11:59:05.230 INFO  com.job.EbookSnapshotJob                          :32   [32m127983084812505088[0;39m 生成今日电子书快照开始
2021-12-20 11:59:05.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983084812505088[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:05.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983084812505088[0;39m ==> Parameters: 
2021-12-20 11:59:05.393 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983084812505088[0;39m <==    Updates: 0
2021-12-20 11:59:05.394 INFO  com.job.EbookSnapshotJob                          :35   [32m127983084812505088[0;39m 生成今日电子书快照结束，耗时：164毫秒
2021-12-20 11:59:10.011 INFO  com.job.EbookSnapshotJob                          :32   [32m127983104865472512[0;39m 生成今日电子书快照开始
2021-12-20 11:59:10.113 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983104865472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:10.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983104865472512[0;39m ==> Parameters: 
2021-12-20 11:59:10.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983104865472512[0;39m <==    Updates: 0
2021-12-20 11:59:10.262 INFO  com.job.EbookSnapshotJob                          :35   [32m127983104865472512[0;39m 生成今日电子书快照结束，耗时：251毫秒
2021-12-20 11:59:14.308 INFO  com.aspect.LogAspect                              :54   [32m127983122888396800[0;39m ------------- 开始 -------------
2021-12-20 11:59:14.308 INFO  com.aspect.LogAspect                              :55   [32m127983122888396800[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:59:14.308 INFO  com.aspect.LogAspect                              :56   [32m127983122888396800[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:59:14.308 INFO  com.aspect.LogAspect                              :57   [32m127983122888396800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:14.309 INFO  com.aspect.LogAspect                              :80   [32m127983122888396800[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-20 11:59:14.383 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983122888396800[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:59:14.384 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983122888396800[0;39m ==> Parameters: 202(Long)
2021-12-20 11:59:14.464 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983122888396800[0;39m <==    Columns: count(0)
2021-12-20 11:59:14.464 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983122888396800[0;39m <==        Row: 1
2021-12-20 11:59:14.465 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983122888396800[0;39m <==      Total: 1
2021-12-20 11:59:14.468 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983122888396800[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:59:14.470 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983122888396800[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-20 11:59:14.553 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983122888396800[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:59:14.554 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983122888396800[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 107, 26
2021-12-20 11:59:14.555 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983122888396800[0;39m <==      Total: 1
2021-12-20 11:59:14.556 INFO  com.servicess.EbookService                        :48   [32m127983122888396800[0;39m 总行数：1
2021-12-20 11:59:14.556 INFO  com.servicess.EbookService                        :49   [32m127983122888396800[0;39m 总页数：1
2021-12-20 11:59:14.557 INFO  com.aspect.LogAspect                              :92   [32m127983122888396800[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":107,"voteCount":26}],"total":1},"success":true}
2021-12-20 11:59:14.558 INFO  com.aspect.LogAspect                              :93   [32m127983122888396800[0;39m ------------- 结束 耗时：250 ms -------------
2021-12-20 11:59:15.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127983125807632384[0;39m 生成今日电子书快照开始
2021-12-20 11:59:15.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983125807632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:15.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983125807632384[0;39m ==> Parameters: 
2021-12-20 11:59:15.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983125807632384[0;39m <==    Updates: 0
2021-12-20 11:59:15.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127983125807632384[0;39m 生成今日电子书快照结束，耗时：211毫秒
2021-12-20 11:59:20.008 INFO  com.job.EbookSnapshotJob                          :32   [32m127983146795929600[0;39m 生成今日电子书快照开始
2021-12-20 11:59:20.191 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983146795929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:20.192 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983146795929600[0;39m ==> Parameters: 
2021-12-20 11:59:20.332 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983146795929600[0;39m <==    Updates: 0
2021-12-20 11:59:20.332 INFO  com.job.EbookSnapshotJob                          :35   [32m127983146795929600[0;39m 生成今日电子书快照结束，耗时：324毫秒
2021-12-20 11:59:20.502 INFO  com.aspect.LogAspect                              :54   [32m127983148867915776[0;39m ------------- 开始 -------------
2021-12-20 11:59:20.502 INFO  com.aspect.LogAspect                              :55   [32m127983148867915776[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:59:20.502 INFO  com.aspect.LogAspect                              :56   [32m127983148867915776[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:59:20.502 INFO  com.aspect.LogAspect                              :57   [32m127983148867915776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:20.502 INFO  com.aspect.LogAspect                              :80   [32m127983148867915776[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-20 11:59:20.569 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983148867915776[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:59:20.569 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983148867915776[0;39m ==> Parameters: 101(Long)
2021-12-20 11:59:20.635 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983148867915776[0;39m <==    Columns: count(0)
2021-12-20 11:59:20.635 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983148867915776[0;39m <==        Row: 1
2021-12-20 11:59:20.635 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983148867915776[0;39m <==      Total: 1
2021-12-20 11:59:20.636 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983148867915776[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:59:20.636 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983148867915776[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-20 11:59:20.702 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983148867915776[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:59:20.702 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983148867915776[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 86, 37
2021-12-20 11:59:20.702 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983148867915776[0;39m <==      Total: 1
2021-12-20 11:59:20.703 INFO  com.servicess.EbookService                        :48   [32m127983148867915776[0;39m 总行数：1
2021-12-20 11:59:20.703 INFO  com.servicess.EbookService                        :49   [32m127983148867915776[0;39m 总页数：1
2021-12-20 11:59:20.703 INFO  com.aspect.LogAspect                              :92   [32m127983148867915776[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":86,"voteCount":37}],"total":1},"success":true}
2021-12-20 11:59:20.703 INFO  com.aspect.LogAspect                              :93   [32m127983148867915776[0;39m ------------- 结束 耗时：201 ms -------------
2021-12-20 11:59:25.010 INFO  com.job.EbookSnapshotJob                          :32   [32m127983167775838208[0;39m 生成今日电子书快照开始
2021-12-20 11:59:25.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983167775838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:25.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983167775838208[0;39m ==> Parameters: 
2021-12-20 11:59:25.395 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983167775838208[0;39m <==    Updates: 0
2021-12-20 11:59:25.395 INFO  com.job.EbookSnapshotJob                          :35   [32m127983167775838208[0;39m 生成今日电子书快照结束，耗时：385毫秒
2021-12-20 11:59:30.023 INFO  com.job.EbookSnapshotJob                          :32   [32m127983188801884160[0;39m 生成今日电子书快照开始
2021-12-20 11:59:30.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983188801884160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:30.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983188801884160[0;39m ==> Parameters: 
2021-12-20 11:59:30.365 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983188801884160[0;39m <==    Updates: 0
2021-12-20 11:59:30.365 INFO  com.job.EbookSnapshotJob                          :35   [32m127983188801884160[0;39m 生成今日电子书快照结束，耗时：342毫秒
2021-12-20 11:59:35.011 INFO  com.job.DocJob                                    :32   [32m127983209723072512[0;39m 更新电子书下的文档数据开始
2021-12-20 11:59:35.097 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983209723072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 11:59:35.099 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983209723072512[0;39m ==> Parameters: 
2021-12-20 11:59:35.312 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983209723072512[0;39m <==    Updates: 6
2021-12-20 11:59:35.312 INFO  com.job.DocJob                                    :35   [32m127983209723072512[0;39m 更新电子书下的文档数据结束，耗时：301毫秒
2021-12-20 11:59:35.313 INFO  com.job.EbookSnapshotJob                          :32   [32m127983210989752320[0;39m 生成今日电子书快照开始
2021-12-20 11:59:35.313 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983210989752320[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:35.315 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983210989752320[0;39m ==> Parameters: 
2021-12-20 11:59:35.465 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983210989752320[0;39m <==    Updates: 0
2021-12-20 11:59:35.465 INFO  com.job.EbookSnapshotJob                          :35   [32m127983210989752320[0;39m 生成今日电子书快照结束，耗时：152毫秒
2021-12-20 11:59:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m127983230707175424[0;39m 生成今日电子书快照开始
2021-12-20 11:59:40.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983230707175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:40.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983230707175424[0;39m ==> Parameters: 
2021-12-20 11:59:40.288 INFO  com.aspect.LogAspect                              :54   [32m127983231856414721[0;39m ------------- 开始 -------------
2021-12-20 11:59:40.288 INFO  com.aspect.LogAspect                              :54   [32m127983231856414720[0;39m ------------- 开始 -------------
2021-12-20 11:59:40.288 INFO  com.aspect.LogAspect                              :55   [32m127983231856414721[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:59:40.288 INFO  com.aspect.LogAspect                              :55   [32m127983231856414720[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:59:40.288 INFO  com.aspect.LogAspect                              :56   [32m127983231856414721[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:59:40.288 INFO  com.aspect.LogAspect                              :56   [32m127983231856414720[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :57   [32m127983231856414721[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :57   [32m127983231856414720[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :80   [32m127983231856414721[0;39m 请求参数: []
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :54   [32m127983231860609024[0;39m ------------- 开始 -------------
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :80   [32m127983231856414720[0;39m 请求参数: []
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :55   [32m127983231860609024[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:59:40.289 INFO  com.aspect.LogAspect                              :56   [32m127983231860609024[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:59:40.290 INFO  com.aspect.LogAspect                              :57   [32m127983231860609024[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:40.290 INFO  com.aspect.LogAspect                              :80   [32m127983231860609024[0;39m 请求参数: []
2021-12-20 11:59:40.290 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983230707175424[0;39m <==    Updates: 0
2021-12-20 11:59:40.290 INFO  com.job.EbookSnapshotJob                          :35   [32m127983230707175424[0;39m 生成今日电子书快照结束，耗时：275毫秒
2021-12-20 11:59:40.362 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983231856414721[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:40.362 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983231856414721[0;39m ==> Parameters: 
2021-12-20 11:59:40.373 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983231860609024[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:59:40.373 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983231860609024[0;39m ==> Parameters: 
2021-12-20 11:59:40.379 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983231856414720[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:40.379 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983231856414720[0;39m ==> Parameters: 
2021-12-20 11:59:40.579 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983231856414721[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:59:40.579 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:59:40.579 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983231856414720[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:59:40.580 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:59:40.580 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983231856414721[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 11:59:40.580 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983231856414720[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 11:59:40.581 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:59:40.582 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983231856414720[0;39m <==      Total: 1
2021-12-20 11:59:40.582 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:59:40.582 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983231856414721[0;39m <==        Row: 2021-12-20, 199, 69, 0, 0
2021-12-20 11:59:40.583 INFO  com.aspect.LogAspect                              :92   [32m127983231856414720[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 11:59:40.584 INFO  com.aspect.LogAspect                              :93   [32m127983231856414720[0;39m ------------- 结束 耗时：296 ms -------------
2021-12-20 11:59:40.584 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:59:40.585 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:59:40.585 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983231856414721[0;39m <==      Total: 2
2021-12-20 11:59:40.585 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:59:40.586 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:59:40.586 INFO  com.aspect.LogAspect                              :92   [32m127983231856414721[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":199,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-12-20 11:59:40.586 INFO  com.aspect.LogAspect                              :93   [32m127983231856414721[0;39m ------------- 结束 耗时：298 ms -------------
2021-12-20 11:59:40.587 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:59:40.587 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:59:40.588 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:59:40.589 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:59:40.590 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:59:40.591 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:59:40.592 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:59:40.594 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:59:40.596 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:59:40.597 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:59:40.598 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:59:40.599 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983231860609024[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:59:40.600 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983231860609024[0;39m <==      Total: 19
2021-12-20 11:59:40.603 INFO  com.aspect.LogAspect                              :92   [32m127983231860609024[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:59:40.604 INFO  com.aspect.LogAspect                              :93   [32m127983231860609024[0;39m ------------- 结束 耗时：315 ms -------------
2021-12-20 11:59:43.442 INFO  com.aspect.LogAspect                              :54   [32m127983245085249536[0;39m ------------- 开始 -------------
2021-12-20 11:59:43.443 INFO  com.aspect.LogAspect                              :55   [32m127983245085249536[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:59:43.443 INFO  com.aspect.LogAspect                              :56   [32m127983245085249536[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:59:43.443 INFO  com.aspect.LogAspect                              :57   [32m127983245085249536[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:43.443 INFO  com.aspect.LogAspect                              :80   [32m127983245085249536[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-20 11:59:43.511 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983245085249536[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:59:43.512 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983245085249536[0;39m ==> Parameters: 101(Long)
2021-12-20 11:59:43.576 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983245085249536[0;39m <==    Columns: count(0)
2021-12-20 11:59:43.577 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983245085249536[0;39m <==        Row: 1
2021-12-20 11:59:43.578 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983245085249536[0;39m <==      Total: 1
2021-12-20 11:59:43.579 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983245085249536[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:59:43.580 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983245085249536[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-20 11:59:43.654 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983245085249536[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:59:43.655 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983245085249536[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 86, 37
2021-12-20 11:59:43.656 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983245085249536[0;39m <==      Total: 1
2021-12-20 11:59:43.657 INFO  com.servicess.EbookService                        :48   [32m127983245085249536[0;39m 总行数：1
2021-12-20 11:59:43.657 INFO  com.servicess.EbookService                        :49   [32m127983245085249536[0;39m 总页数：1
2021-12-20 11:59:43.659 INFO  com.aspect.LogAspect                              :92   [32m127983245085249536[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":86,"voteCount":37}],"total":1},"success":true}
2021-12-20 11:59:43.659 INFO  com.aspect.LogAspect                              :93   [32m127983245085249536[0;39m ------------- 结束 耗时：217 ms -------------
2021-12-20 11:59:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m127983251687084032[0;39m 生成今日电子书快照开始
2021-12-20 11:59:45.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983251687084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:45.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983251687084032[0;39m ==> Parameters: 
2021-12-20 11:59:45.211 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983251687084032[0;39m <==    Updates: 0
2021-12-20 11:59:45.211 INFO  com.job.EbookSnapshotJob                          :35   [32m127983251687084032[0;39m 生成今日电子书快照结束，耗时：195毫秒
2021-12-20 11:59:45.687 INFO  com.aspect.LogAspect                              :54   [32m127983254501462016[0;39m ------------- 开始 -------------
2021-12-20 11:59:45.687 INFO  com.aspect.LogAspect                              :55   [32m127983254501462016[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 11:59:45.687 INFO  com.aspect.LogAspect                              :56   [32m127983254501462016[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 11:59:45.688 INFO  com.aspect.LogAspect                              :57   [32m127983254501462016[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:45.688 INFO  com.aspect.LogAspect                              :80   [32m127983254501462016[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-20 11:59:45.794 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983254501462016[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 11:59:45.795 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983254501462016[0;39m ==> Parameters: 202(Long)
2021-12-20 11:59:45.858 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983254501462016[0;39m <==    Columns: count(0)
2021-12-20 11:59:45.858 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m127983254501462016[0;39m <==        Row: 1
2021-12-20 11:59:45.859 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m127983254501462016[0;39m <==      Total: 1
2021-12-20 11:59:45.859 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983254501462016[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 11:59:45.860 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983254501462016[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-20 11:59:45.930 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983254501462016[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 11:59:45.930 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m127983254501462016[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 107, 26
2021-12-20 11:59:45.931 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m127983254501462016[0;39m <==      Total: 1
2021-12-20 11:59:45.931 INFO  com.servicess.EbookService                        :48   [32m127983254501462016[0;39m 总行数：1
2021-12-20 11:59:45.931 INFO  com.servicess.EbookService                        :49   [32m127983254501462016[0;39m 总页数：1
2021-12-20 11:59:45.932 INFO  com.aspect.LogAspect                              :92   [32m127983254501462016[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":107,"voteCount":26}],"total":1},"success":true}
2021-12-20 11:59:45.932 INFO  com.aspect.LogAspect                              :93   [32m127983254501462016[0;39m ------------- 结束 耗时：245 ms -------------
2021-12-20 11:59:46.838 INFO  com.aspect.LogAspect                              :54   [32m127983259329105920[0;39m ------------- 开始 -------------
2021-12-20 11:59:46.839 INFO  com.aspect.LogAspect                              :55   [32m127983259329105920[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-20 11:59:46.839 INFO  com.aspect.LogAspect                              :56   [32m127983259329105920[0;39m 类名方法: com.controller.DocController.all
2021-12-20 11:59:46.839 INFO  com.aspect.LogAspect                              :57   [32m127983259329105920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:46.840 INFO  com.aspect.LogAspect                              :80   [32m127983259329105920[0;39m 请求参数: [1]
2021-12-20 11:59:46.933 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127983259329105920[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 11:59:46.935 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127983259329105920[0;39m ==> Parameters: 1(Long)
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 10, 3
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 18, 5
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 25, 6
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 3, 1, 0, 文档2, 2, 11, 2
2021-12-20 11:59:47.009 TRACE com.mapper.DocMapper.selectByExample              :143  [32m127983259329105920[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 15, 3
2021-12-20 11:59:47.009 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m127983259329105920[0;39m <==      Total: 7
2021-12-20 11:59:47.047 INFO  com.aspect.LogAspect                              :92   [32m127983259329105920[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":14,"voteCount":5},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":18,"voteCount":5},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":25,"voteCount":6},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":11,"voteCount":2},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":15,"voteCount":3}],"success":true}
2021-12-20 11:59:47.047 INFO  com.aspect.LogAspect                              :93   [32m127983259329105920[0;39m ------------- 结束 耗时：209 ms -------------
2021-12-20 11:59:47.077 INFO  com.aspect.LogAspect                              :54   [32m127983260331544576[0;39m ------------- 开始 -------------
2021-12-20 11:59:47.077 INFO  com.aspect.LogAspect                              :55   [32m127983260331544576[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-20 11:59:47.077 INFO  com.aspect.LogAspect                              :56   [32m127983260331544576[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 11:59:47.077 INFO  com.aspect.LogAspect                              :57   [32m127983260331544576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:47.077 INFO  com.aspect.LogAspect                              :80   [32m127983260331544576[0;39m 请求参数: [119304585604108288]
2021-12-20 11:59:47.138 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127983260331544576[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 11:59:47.138 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127983260331544576[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:59:47.222 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127983260331544576[0;39m <==    Columns: id, content
2021-12-20 11:59:47.222 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m127983260331544576[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-20 11:59:47.222 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m127983260331544576[0;39m <==      Total: 1
2021-12-20 11:59:47.222 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127983260331544576[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 11:59:47.222 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127983260331544576[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:59:47.381 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m127983260331544576[0;39m <==    Updates: 1
2021-12-20 11:59:47.382 INFO  com.aspect.LogAspect                              :92   [32m127983260331544576[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-20 11:59:47.383 INFO  com.aspect.LogAspect                              :93   [32m127983260331544576[0;39m ------------- 结束 耗时：306 ms -------------
2021-12-20 11:59:48.774 INFO  com.aspect.LogAspect                              :54   [32m127983267449278464[0;39m ------------- 开始 -------------
2021-12-20 11:59:48.774 INFO  com.aspect.LogAspect                              :55   [32m127983267449278464[0;39m 请求地址: http://localhost:8081/doc/vote/119304585604108288 GET
2021-12-20 11:59:48.774 INFO  com.aspect.LogAspect                              :56   [32m127983267449278464[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 11:59:48.774 INFO  com.aspect.LogAspect                              :57   [32m127983267449278464[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:48.775 INFO  com.aspect.LogAspect                              :80   [32m127983267449278464[0;39m 请求参数: [119304585604108288]
2021-12-20 11:59:48.834 INFO  com.Util.RedisUtil                                :31   [32m127983267449278464[0;39m key不存在，放入：DOC_VOTE_119304585604108288_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 11:59:48.951 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127983267449278464[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 11:59:48.952 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127983267449278464[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:59:49.102 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m127983267449278464[0;39m <==    Updates: 1
2021-12-20 11:59:49.104 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127983267449278464[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 11:59:49.106 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127983267449278464[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-20 11:59:49.185 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127983267449278464[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 11:59:49.186 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m127983267449278464[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 26, 7
2021-12-20 11:59:49.189 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m127983267449278464[0;39m <==      Total: 1
2021-12-20 11:59:49.197 INFO  com.aspect.LogAspect                              :92   [32m127983267449278464[0;39m 返回结果: {"success":true}
2021-12-20 11:59:49.198 INFO  com.aspect.LogAspect                              :93   [32m127983267449278464[0;39m ------------- 结束 耗时：424 ms -------------
2021-12-20 11:59:49.213 INFO  com.websocket.WebSocketServer                     :71   [32m127983267449278464[0;39m 推送消息：wHEvG3uPKu，内容：【Ant Design of Vue】被点赞！
2021-12-20 11:59:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127983272641826816[0;39m 生成今日电子书快照开始
2021-12-20 11:59:50.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983272641826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:50.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983272641826816[0;39m ==> Parameters: 
2021-12-20 11:59:50.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983272641826816[0;39m <==    Updates: 0
2021-12-20 11:59:50.282 INFO  com.job.EbookSnapshotJob                          :35   [32m127983272641826816[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 11:59:54.775 INFO  com.aspect.LogAspect                              :54   [32m127983292619296768[0;39m ------------- 开始 -------------
2021-12-20 11:59:54.775 INFO  com.aspect.LogAspect                              :55   [32m127983292619296768[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:59:54.775 INFO  com.aspect.LogAspect                              :54   [32m127983292619296769[0;39m ------------- 开始 -------------
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :56   [32m127983292619296768[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :57   [32m127983292619296768[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :55   [32m127983292619296769[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :56   [32m127983292619296769[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :80   [32m127983292619296768[0;39m 请求参数: []
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :57   [32m127983292619296769[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:54.776 INFO  com.aspect.LogAspect                              :80   [32m127983292619296769[0;39m 请求参数: []
2021-12-20 11:59:54.777 INFO  com.aspect.LogAspect                              :54   [32m127983292627685376[0;39m ------------- 开始 -------------
2021-12-20 11:59:54.778 INFO  com.aspect.LogAspect                              :55   [32m127983292627685376[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:59:54.778 INFO  com.aspect.LogAspect                              :56   [32m127983292627685376[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:59:54.778 INFO  com.aspect.LogAspect                              :57   [32m127983292627685376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:54.778 INFO  com.aspect.LogAspect                              :80   [32m127983292627685376[0;39m 请求参数: []
2021-12-20 11:59:54.848 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983292619296768[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:54.848 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983292619296768[0;39m ==> Parameters: 
2021-12-20 11:59:54.864 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983292627685376[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:59:54.864 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983292619296769[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:54.872 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983292627685376[0;39m ==> Parameters: 
2021-12-20 11:59:54.872 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983292619296769[0;39m ==> Parameters: 
2021-12-20 11:59:54.942 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983292619296768[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:59:54.942 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983292619296768[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 11:59:54.942 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983292619296768[0;39m <==        Row: 2021-12-20, 199, 69, 0, 0
2021-12-20 11:59:54.942 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983292619296769[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:59:54.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:59:54.942 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983292619296768[0;39m <==      Total: 2
2021-12-20 11:59:54.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:59:54.942 INFO  com.aspect.LogAspect                              :92   [32m127983292619296768[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":199,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-12-20 11:59:54.942 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983292619296769[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 11:59:54.942 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:59:54.942 INFO  com.aspect.LogAspect                              :93   [32m127983292619296768[0;39m ------------- 结束 耗时：167 ms -------------
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:59:54.951 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983292619296769[0;39m <==      Total: 1
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:59:54.951 INFO  com.aspect.LogAspect                              :92   [32m127983292619296769[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:59:54.951 INFO  com.aspect.LogAspect                              :93   [32m127983292619296769[0;39m ------------- 结束 耗时：176 ms -------------
2021-12-20 11:59:54.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:59:54.965 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:59:54.966 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:59:54.967 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:59:54.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:59:54.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:59:54.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:59:54.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:59:54.973 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:59:54.975 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983292627685376[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:59:54.976 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983292627685376[0;39m <==      Total: 19
2021-12-20 11:59:54.981 INFO  com.aspect.LogAspect                              :92   [32m127983292627685376[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:59:54.981 INFO  com.aspect.LogAspect                              :93   [32m127983292627685376[0;39m ------------- 结束 耗时：204 ms -------------
2021-12-20 11:59:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m127983293613346816[0;39m 生成今日电子书快照开始
2021-12-20 11:59:55.121 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983293613346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 11:59:55.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983293613346816[0;39m ==> Parameters: 
2021-12-20 11:59:55.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983293613346816[0;39m <==    Updates: 0
2021-12-20 11:59:55.278 INFO  com.job.EbookSnapshotJob                          :35   [32m127983293613346816[0;39m 生成今日电子书快照结束，耗时：266毫秒
2021-12-20 11:59:57.584 INFO  com.websocket.WebSocketServer                     :41   [32m127983148867915776[0;39m 连接关闭，token：wHEvG3uPKu，session id：5！当前连接数：0
2021-12-20 11:59:58.245 INFO  com.websocket.WebSocketServer                     :32   [32m127983259329105920[0;39m 有新连接：token：8YxYmBjM4h，session id：6，当前连接数：1
2021-12-20 11:59:58.323 INFO  com.aspect.LogAspect                              :54   [32m127983307500687360[0;39m ------------- 开始 -------------
2021-12-20 11:59:58.323 INFO  com.aspect.LogAspect                              :55   [32m127983307500687360[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 11:59:58.324 INFO  com.aspect.LogAspect                              :56   [32m127983307500687360[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 11:59:58.324 INFO  com.aspect.LogAspect                              :57   [32m127983307500687360[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:58.324 INFO  com.aspect.LogAspect                              :80   [32m127983307500687360[0;39m 请求参数: []
2021-12-20 11:59:58.324 INFO  com.aspect.LogAspect                              :54   [32m127983307504881664[0;39m ------------- 开始 -------------
2021-12-20 11:59:58.324 INFO  com.aspect.LogAspect                              :55   [32m127983307504881664[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 11:59:58.325 INFO  com.aspect.LogAspect                              :56   [32m127983307504881664[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 11:59:58.325 INFO  com.aspect.LogAspect                              :57   [32m127983307504881664[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:58.325 INFO  com.aspect.LogAspect                              :80   [32m127983307504881664[0;39m 请求参数: []
2021-12-20 11:59:58.329 INFO  com.aspect.LogAspect                              :54   [32m127983307525853184[0;39m ------------- 开始 -------------
2021-12-20 11:59:58.329 INFO  com.aspect.LogAspect                              :55   [32m127983307525853184[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 11:59:58.330 INFO  com.aspect.LogAspect                              :56   [32m127983307525853184[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 11:59:58.330 INFO  com.aspect.LogAspect                              :57   [32m127983307525853184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 11:59:58.330 INFO  com.aspect.LogAspect                              :80   [32m127983307525853184[0;39m 请求参数: []
2021-12-20 11:59:58.397 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983307500687360[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:58.397 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983307500687360[0;39m ==> Parameters: 
2021-12-20 11:59:58.436 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983307525853184[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 11:59:58.436 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983307504881664[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 11:59:58.436 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983307504881664[0;39m ==> Parameters: 
2021-12-20 11:59:58.436 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983307525853184[0;39m ==> Parameters: 
2021-12-20 11:59:58.472 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983307500687360[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 11:59:58.473 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983307500687360[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 11:59:58.474 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m127983307500687360[0;39m <==        Row: 2021-12-20, 199, 69, 0, 0
2021-12-20 11:59:58.475 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m127983307500687360[0;39m <==      Total: 2
2021-12-20 11:59:58.476 INFO  com.aspect.LogAspect                              :92   [32m127983307500687360[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":199,"viewIncrease":0,"voteCount":69,"voteIncrease":0}],"success":true}
2021-12-20 11:59:58.476 INFO  com.aspect.LogAspect                              :93   [32m127983307500687360[0;39m ------------- 结束 耗时：153 ms -------------
2021-12-20 11:59:58.513 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983307504881664[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 11:59:58.514 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m127983307504881664[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 11:59:58.515 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m127983307504881664[0;39m <==      Total: 1
2021-12-20 11:59:58.516 INFO  com.aspect.LogAspect                              :92   [32m127983307504881664[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 11:59:58.516 INFO  com.aspect.LogAspect                              :93   [32m127983307504881664[0;39m ------------- 结束 耗时：192 ms -------------
2021-12-20 11:59:58.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==    Columns: id, parent, name, sort
2021-12-20 11:59:58.521 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 11:59:58.522 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 11:59:58.523 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 11:59:58.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 11:59:58.526 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 11:59:58.528 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 11:59:58.529 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 11:59:58.530 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 11:59:58.531 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 11:59:58.531 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 11:59:58.532 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 11:59:58.533 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 11:59:58.534 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 11:59:58.534 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 11:59:58.535 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 11:59:58.535 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 11:59:58.535 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 11:59:58.536 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 11:59:58.536 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m127983307525853184[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 11:59:58.536 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m127983307525853184[0;39m <==      Total: 19
2021-12-20 11:59:58.539 INFO  com.aspect.LogAspect                              :92   [32m127983307525853184[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 11:59:58.539 INFO  com.aspect.LogAspect                              :93   [32m127983307525853184[0;39m ------------- 结束 耗时：210 ms -------------
2021-12-20 12:00:00.007 INFO  com.job.EbookSnapshotJob                          :32   [32m127983314563895296[0;39m 生成今日电子书快照开始
2021-12-20 12:00:00.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983314563895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 12:00:00.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983314563895296[0;39m ==> Parameters: 
2021-12-20 12:00:00.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983314563895296[0;39m <==    Updates: 0
2021-12-20 12:00:00.215 INFO  com.job.EbookSnapshotJob                          :35   [32m127983314563895296[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 12:00:02.606 INFO  com.websocket.WebSocketServer                     :41   [32m127983292619296769[0;39m 连接关闭，token：8YxYmBjM4h，session id：6！当前连接数：0
2021-12-20 12:00:05.013 INFO  com.job.DocJob                                    :32   [32m127983335560581120[0;39m 更新电子书下的文档数据开始
2021-12-20 12:00:05.081 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983335560581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 12:00:05.081 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983335560581120[0;39m ==> Parameters: 
2021-12-20 12:00:05.236 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m127983335560581120[0;39m <==    Updates: 6
2021-12-20 12:00:05.236 INFO  com.job.DocJob                                    :35   [32m127983335560581120[0;39m 更新电子书下的文档数据结束，耗时：223毫秒
2021-12-20 12:00:05.236 INFO  com.job.EbookSnapshotJob                          :32   [32m127983336495910912[0;39m 生成今日电子书快照开始
2021-12-20 12:00:05.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983336495910912[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 12:00:05.236 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983336495910912[0;39m ==> Parameters: 
2021-12-20 12:00:05.389 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983336495910912[0;39m <==    Updates: 0
2021-12-20 12:00:05.390 INFO  com.job.EbookSnapshotJob                          :35   [32m127983336495910912[0;39m 生成今日电子书快照结束，耗时：154毫秒
2021-12-20 12:00:10.004 INFO  com.job.EbookSnapshotJob                          :32   [32m127983356494352384[0;39m 生成今日电子书快照开始
2021-12-20 12:00:10.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983356494352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 12:00:10.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983356494352384[0;39m ==> Parameters: 
2021-12-20 12:00:10.217 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983356494352384[0;39m <==    Updates: 0
2021-12-20 12:00:10.218 INFO  com.job.EbookSnapshotJob                          :35   [32m127983356494352384[0;39m 生成今日电子书快照结束，耗时：213毫秒
2021-12-20 12:00:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m127983377524592640[0;39m 生成今日电子书快照开始
2021-12-20 12:00:15.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983377524592640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 12:00:15.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983377524592640[0;39m ==> Parameters: 
2021-12-20 12:00:15.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m127983377524592640[0;39m <==    Updates: 0
2021-12-20 12:00:15.235 INFO  com.job.EbookSnapshotJob                          :35   [32m127983377524592640[0;39m 生成今日电子书快照结束，耗时：217毫秒
2021-12-20 20:16:00.672 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 20:16:00.783 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 5432 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 20:16:00.783 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 20:16:00.994 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 20:16:00.994 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 20:16:05.717 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 20:16:05.733 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 20:16:06.563 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 807 ms. Found 0 Redis repository interfaces.
2021-12-20 20:16:10.526 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 20:16:10.573 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 20:16:10.573 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 20:16:10.573 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 20:16:10.729 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 20:16:10.729 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 9735 ms
2021-12-20 20:16:19.893 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 20:16:20.224 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 20:16:20.287 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 20:16:20.365 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 21.508 seconds (JVM running for 24.657)
2021-12-20 20:16:25.019 INFO  com.job.EbookSnapshotJob                          :32   [32m128108241958866944[0;39m 生成今日电子书快照开始
2021-12-20 20:16:25.162 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m128108241958866944[0;39m HikariPool-1 - Starting...
2021-12-20 20:16:27.383 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m128108241958866944[0;39m HikariPool-1 - Start completed.
2021-12-20 20:16:27.555 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108241958866944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:27.602 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108241958866944[0;39m ==> Parameters: 
2021-12-20 20:16:27.839 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108241958866944[0;39m <==    Updates: 0
2021-12-20 20:16:27.839 INFO  com.job.EbookSnapshotJob                          :35   [32m128108241958866944[0;39m 生成今日电子书快照结束，耗时：2820毫秒
2021-12-20 20:16:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128108262921998336[0;39m 生成今日电子书快照开始
2021-12-20 20:16:30.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108262921998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:30.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108262921998336[0;39m ==> Parameters: 
2021-12-20 20:16:30.334 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108262921998336[0;39m <==    Updates: 0
2021-12-20 20:16:30.334 INFO  com.job.EbookSnapshotJob                          :35   [32m128108262921998336[0;39m 生成今日电子书快照结束，耗时：317毫秒
2021-12-20 20:16:35.016 INFO  com.job.DocJob                                    :32   [32m128108283889324032[0;39m 更新电子书下的文档数据开始
2021-12-20 20:16:35.125 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108283889324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:16:35.125 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108283889324032[0;39m ==> Parameters: 
2021-12-20 20:16:35.349 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108283889324032[0;39m <==    Updates: 6
2021-12-20 20:16:35.349 INFO  com.job.DocJob                                    :35   [32m128108283889324032[0;39m 更新电子书下的文档数据结束，耗时：333毫秒
2021-12-20 20:16:35.349 INFO  com.job.EbookSnapshotJob                          :32   [32m128108285286027264[0;39m 生成今日电子书快照开始
2021-12-20 20:16:35.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108285286027264[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:35.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108285286027264[0;39m ==> Parameters: 
2021-12-20 20:16:35.561 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108285286027264[0;39m <==    Updates: 0
2021-12-20 20:16:35.561 INFO  com.job.EbookSnapshotJob                          :35   [32m128108285286027264[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-20 20:16:40.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128108304827289600[0;39m 生成今日电子书快照开始
2021-12-20 20:16:40.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108304827289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:40.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108304827289600[0;39m ==> Parameters: 
2021-12-20 20:16:40.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108304827289600[0;39m <==    Updates: 0
2021-12-20 20:16:40.277 INFO  com.job.EbookSnapshotJob                          :35   [32m128108304827289600[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 20:16:45.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128108325803003904[0;39m 生成今日电子书快照开始
2021-12-20 20:16:45.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108325803003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:45.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108325803003904[0;39m ==> Parameters: 
2021-12-20 20:16:45.311 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108325803003904[0;39m <==    Updates: 0
2021-12-20 20:16:45.311 INFO  com.job.EbookSnapshotJob                          :35   [32m128108325803003904[0;39m 生成今日电子书快照结束，耗时：302毫秒
2021-12-20 20:16:49.000 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 20:16:49.001 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 20:16:49.003 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-12-20 20:16:49.446 INFO  com.aspect.LogAspect                              :54   [32m128108344400547842[0;39m ------------- 开始 -------------
2021-12-20 20:16:49.446 INFO  com.aspect.LogAspect                              :54   [32m128108344400547840[0;39m ------------- 开始 -------------
2021-12-20 20:16:49.446 INFO  com.aspect.LogAspect                              :54   [32m128108344400547841[0;39m ------------- 开始 -------------
2021-12-20 20:16:49.448 INFO  com.aspect.LogAspect                              :55   [32m128108344400547840[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:16:49.448 INFO  com.aspect.LogAspect                              :55   [32m128108344400547842[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:16:49.448 INFO  com.aspect.LogAspect                              :55   [32m128108344400547841[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:16:49.448 INFO  com.aspect.LogAspect                              :56   [32m128108344400547841[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:16:49.448 INFO  com.aspect.LogAspect                              :56   [32m128108344400547842[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:16:49.449 INFO  com.aspect.LogAspect                              :56   [32m128108344400547840[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:16:49.449 INFO  com.aspect.LogAspect                              :57   [32m128108344400547842[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:16:49.449 INFO  com.aspect.LogAspect                              :57   [32m128108344400547840[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:16:49.449 INFO  com.aspect.LogAspect                              :57   [32m128108344400547841[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:16:49.458 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：BB3Z5E3vZR，session id：0，当前连接数：1
2021-12-20 20:16:49.491 INFO  com.aspect.LogAspect                              :80   [32m128108344400547840[0;39m 请求参数: []
2021-12-20 20:16:49.491 INFO  com.aspect.LogAspect                              :80   [32m128108344400547842[0;39m 请求参数: []
2021-12-20 20:16:49.491 INFO  com.aspect.LogAspect                              :80   [32m128108344400547841[0;39m 请求参数: []
2021-12-20 20:16:49.575 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108344400547840[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:16:49.575 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108344400547841[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:16:49.576 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108344400547840[0;39m ==> Parameters: 
2021-12-20 20:16:49.576 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108344400547841[0;39m ==> Parameters: 
2021-12-20 20:16:49.602 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108344400547842[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:16:49.602 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108344400547842[0;39m ==> Parameters: 
2021-12-20 20:16:49.715 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:16:49.715 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108344400547840[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:16:49.715 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108344400547841[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:16:49.716 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:16:49.716 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108344400547840[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:16:49.716 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108344400547841[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:16:49.768 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108344400547841[0;39m <==        Row: 2021-12-20, 200, 70, 1, 1
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:16:49.768 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108344400547841[0;39m <==      Total: 2
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:16:49.768 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:16:49.768 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108344400547840[0;39m <==      Total: 1
2021-12-20 20:16:49.775 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:16:49.776 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:16:49.776 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:16:49.776 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:16:49.778 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:16:49.779 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:16:49.779 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108344400547842[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:16:49.780 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108344400547842[0;39m <==      Total: 19
2021-12-20 20:16:49.823 INFO  com.aspect.LogAspect                              :92   [32m128108344400547841[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":200,"viewIncrease":1,"voteCount":70,"voteIncrease":1}],"success":true}
2021-12-20 20:16:49.823 INFO  com.aspect.LogAspect                              :93   [32m128108344400547841[0;39m ------------- 结束 耗时：380 ms -------------
2021-12-20 20:16:49.825 INFO  com.aspect.LogAspect                              :92   [32m128108344400547842[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:16:49.825 INFO  com.aspect.LogAspect                              :93   [32m128108344400547842[0;39m ------------- 结束 耗时：382 ms -------------
2021-12-20 20:16:49.827 INFO  com.aspect.LogAspect                              :92   [32m128108344400547840[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:16:49.827 INFO  com.aspect.LogAspect                              :93   [32m128108344400547840[0;39m ------------- 结束 耗时：384 ms -------------
2021-12-20 20:16:50.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128108346833244160[0;39m 生成今日电子书快照开始
2021-12-20 20:16:50.023 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108346833244160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:50.024 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108346833244160[0;39m ==> Parameters: 
2021-12-20 20:16:50.203 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108346833244160[0;39m <==    Updates: 0
2021-12-20 20:16:50.204 INFO  com.job.EbookSnapshotJob                          :35   [32m128108346833244160[0;39m 生成今日电子书快照结束，耗时：181毫秒
2021-12-20 20:16:55.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128108367754432512[0;39m 生成今日电子书快照开始
2021-12-20 20:16:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108367754432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:16:55.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108367754432512[0;39m ==> Parameters: 
2021-12-20 20:16:55.247 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108367754432512[0;39m <==    Updates: 0
2021-12-20 20:16:55.247 INFO  com.job.EbookSnapshotJob                          :35   [32m128108367754432512[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 20:16:59.989 INFO  com.aspect.LogAspect                              :54   [32m128108388633677824[0;39m ------------- 开始 -------------
2021-12-20 20:16:59.989 INFO  com.aspect.LogAspect                              :55   [32m128108388633677824[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:16:59.989 INFO  com.aspect.LogAspect                              :56   [32m128108388633677824[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:16:59.990 INFO  com.aspect.LogAspect                              :57   [32m128108388633677824[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:16:59.990 INFO  com.aspect.LogAspect                              :80   [32m128108388633677824[0;39m 请求参数: []
2021-12-20 20:16:59.991 INFO  com.aspect.LogAspect                              :54   [32m128108388637872128[0;39m ------------- 开始 -------------
2021-12-20 20:16:59.991 INFO  com.aspect.LogAspect                              :55   [32m128108388637872128[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:16:59.989 INFO  com.aspect.LogAspect                              :54   [32m128108388629483520[0;39m ------------- 开始 -------------
2021-12-20 20:16:59.991 INFO  com.aspect.LogAspect                              :56   [32m128108388637872128[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:16:59.992 INFO  com.aspect.LogAspect                              :57   [32m128108388637872128[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:16:59.992 INFO  com.aspect.LogAspect                              :55   [32m128108388629483520[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:16:59.992 INFO  com.aspect.LogAspect                              :80   [32m128108388637872128[0;39m 请求参数: []
2021-12-20 20:16:59.992 INFO  com.aspect.LogAspect                              :56   [32m128108388629483520[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:16:59.993 INFO  com.aspect.LogAspect                              :57   [32m128108388629483520[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:16:59.993 INFO  com.aspect.LogAspect                              :80   [32m128108388629483520[0;39m 请求参数: []
2021-12-20 20:17:00.022 INFO  com.job.EbookSnapshotJob                          :32   [32m128108388772089856[0;39m 生成今日电子书快照开始
2021-12-20 20:17:00.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108388772089856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:00.148 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108388629483520[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:00.148 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108388633677824[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:00.148 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108388637872128[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:00.152 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108388629483520[0;39m ==> Parameters: 
2021-12-20 20:17:00.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108388772089856[0;39m ==> Parameters: 
2021-12-20 20:17:00.153 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108388633677824[0;39m ==> Parameters: 
2021-12-20 20:17:00.153 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108388637872128[0;39m ==> Parameters: 
2021-12-20 20:17:00.241 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108388633677824[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:17:00.241 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108388629483520[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:17:00.242 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108388633677824[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:17:00.243 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:00.242 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108388629483520[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:17:00.244 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:00.245 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108388633677824[0;39m <==        Row: 2021-12-20, 200, 70, 1, 1
2021-12-20 20:17:00.245 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108388629483520[0;39m <==      Total: 1
2021-12-20 20:17:00.245 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:00.246 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108388633677824[0;39m <==      Total: 2
2021-12-20 20:17:00.246 INFO  com.aspect.LogAspect                              :92   [32m128108388629483520[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:17:00.246 INFO  com.aspect.LogAspect                              :93   [32m128108388629483520[0;39m ------------- 结束 耗时：258 ms -------------
2021-12-20 20:17:00.246 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:00.246 INFO  com.aspect.LogAspect                              :92   [32m128108388633677824[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":200,"viewIncrease":1,"voteCount":70,"voteIncrease":1}],"success":true}
2021-12-20 20:17:00.247 INFO  com.aspect.LogAspect                              :93   [32m128108388633677824[0;39m ------------- 结束 耗时：258 ms -------------
2021-12-20 20:17:00.247 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:00.248 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:00.249 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:00.250 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:00.251 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:00.253 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:00.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:00.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:00.257 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:00.258 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:00.259 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:00.260 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:00.261 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:00.262 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:00.263 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:00.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108388637872128[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:00.265 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108388637872128[0;39m <==      Total: 19
2021-12-20 20:17:00.270 INFO  com.aspect.LogAspect                              :92   [32m128108388637872128[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:00.271 INFO  com.aspect.LogAspect                              :93   [32m128108388637872128[0;39m ------------- 结束 耗时：281 ms -------------
2021-12-20 20:17:00.330 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108388772089856[0;39m <==    Updates: 0
2021-12-20 20:17:00.331 INFO  com.job.EbookSnapshotJob                          :35   [32m128108388772089856[0;39m 生成今日电子书快照结束，耗时：309毫秒
2021-12-20 20:17:01.450 INFO  com.aspect.LogAspect                              :54   [32m128108394761555968[0;39m ------------- 开始 -------------
2021-12-20 20:17:01.450 INFO  com.aspect.LogAspect                              :55   [32m128108394761555968[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:17:01.451 INFO  com.aspect.LogAspect                              :56   [32m128108394761555968[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:17:01.451 INFO  com.aspect.LogAspect                              :54   [32m128108394765750272[0;39m ------------- 开始 -------------
2021-12-20 20:17:01.451 INFO  com.aspect.LogAspect                              :57   [32m128108394761555968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:01.451 INFO  com.aspect.LogAspect                              :55   [32m128108394765750272[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:17:01.451 INFO  com.aspect.LogAspect                              :80   [32m128108394761555968[0;39m 请求参数: []
2021-12-20 20:17:01.451 INFO  com.aspect.LogAspect                              :56   [32m128108394765750272[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:17:01.452 INFO  com.aspect.LogAspect                              :57   [32m128108394765750272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:01.452 INFO  com.aspect.LogAspect                              :80   [32m128108394765750272[0;39m 请求参数: []
2021-12-20 20:17:01.454 INFO  com.aspect.LogAspect                              :54   [32m128108394774138880[0;39m ------------- 开始 -------------
2021-12-20 20:17:01.454 INFO  com.aspect.LogAspect                              :55   [32m128108394774138880[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:01.454 INFO  com.aspect.LogAspect                              :56   [32m128108394774138880[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:01.455 INFO  com.aspect.LogAspect                              :57   [32m128108394774138880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:01.455 INFO  com.aspect.LogAspect                              :80   [32m128108394774138880[0;39m 请求参数: []
2021-12-20 20:17:01.531 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108394761555968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:01.531 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108394765750272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:01.532 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108394774138880[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:01.532 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108394765750272[0;39m ==> Parameters: 
2021-12-20 20:17:01.532 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108394761555968[0;39m ==> Parameters: 
2021-12-20 20:17:01.532 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108394774138880[0;39m ==> Parameters: 
2021-12-20 20:17:01.623 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108394765750272[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:17:01.626 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108394765750272[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:17:01.629 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108394761555968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:17:01.630 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:01.630 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108394765750272[0;39m <==      Total: 1
2021-12-20 20:17:01.631 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:01.631 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108394761555968[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:17:01.632 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:01.634 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:01.634 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108394761555968[0;39m <==        Row: 2021-12-20, 200, 70, 1, 1
2021-12-20 20:17:01.635 INFO  com.aspect.LogAspect                              :92   [32m128108394765750272[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:17:01.636 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:01.636 INFO  com.aspect.LogAspect                              :93   [32m128108394765750272[0;39m ------------- 结束 耗时：185 ms -------------
2021-12-20 20:17:01.636 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108394761555968[0;39m <==      Total: 2
2021-12-20 20:17:01.637 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:01.638 INFO  com.aspect.LogAspect                              :92   [32m128108394761555968[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":200,"viewIncrease":1,"voteCount":70,"voteIncrease":1}],"success":true}
2021-12-20 20:17:01.638 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:01.639 INFO  com.aspect.LogAspect                              :93   [32m128108394761555968[0;39m ------------- 结束 耗时：189 ms -------------
2021-12-20 20:17:01.640 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:01.643 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:01.645 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:01.646 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:01.650 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:01.652 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:01.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:01.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:01.658 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:01.661 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:01.663 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:01.665 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:01.666 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108394774138880[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:01.667 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108394774138880[0;39m <==      Total: 19
2021-12-20 20:17:01.672 INFO  com.aspect.LogAspect                              :92   [32m128108394774138880[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:01.672 INFO  com.aspect.LogAspect                              :93   [32m128108394774138880[0;39m ------------- 结束 耗时：219 ms -------------
2021-12-20 20:17:04.696 INFO  com.aspect.LogAspect                              :54   [32m128108408376266752[0;39m ------------- 开始 -------------
2021-12-20 20:17:04.697 INFO  com.aspect.LogAspect                              :55   [32m128108408376266752[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:17:04.697 INFO  com.aspect.LogAspect                              :56   [32m128108408376266752[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:17:04.697 INFO  com.aspect.LogAspect                              :57   [32m128108408376266752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:04.700 INFO  com.aspect.LogAspect                              :80   [32m128108408376266752[0;39m 请求参数: [{"categoryId2":115484763686572032,"page":1,"size":1000}]
2021-12-20 20:17:04.966 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108408376266752[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:17:04.969 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108408376266752[0;39m ==> Parameters: 115484763686572032(Long)
2021-12-20 20:17:05.010 INFO  com.job.EbookSnapshotJob                          :32   [32m128108409693278208[0;39m 生成今日电子书快照开始
2021-12-20 20:17:05.479 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108409693278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:05.480 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108408376266752[0;39m <==    Columns: count(0)
2021-12-20 20:17:05.481 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108408376266752[0;39m <==        Row: 1
2021-12-20 20:17:05.482 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108409693278208[0;39m ==> Parameters: 
2021-12-20 20:17:05.484 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108408376266752[0;39m <==      Total: 1
2021-12-20 20:17:05.492 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108408376266752[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 20:17:05.493 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108408376266752[0;39m ==> Parameters: 115484763686572032(Long), 1000(Integer)
2021-12-20 20:17:05.570 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108408376266752[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:17:05.572 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108408376266752[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 20:17:05.574 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108408376266752[0;39m <==      Total: 1
2021-12-20 20:17:05.577 INFO  com.servicess.EbookService                        :48   [32m128108408376266752[0;39m 总行数：1
2021-12-20 20:17:05.578 INFO  com.servicess.EbookService                        :49   [32m128108408376266752[0;39m 总页数：1
2021-12-20 20:17:05.595 INFO  com.aspect.LogAspect                              :92   [32m128108408376266752[0;39m 返回结果: {"content":{"list":[{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":1},"success":true}
2021-12-20 20:17:05.595 INFO  com.aspect.LogAspect                              :93   [32m128108408376266752[0;39m ------------- 结束 耗时：899 ms -------------
2021-12-20 20:17:05.689 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108409693278208[0;39m <==    Updates: 0
2021-12-20 20:17:05.690 INFO  com.job.EbookSnapshotJob                          :35   [32m128108409693278208[0;39m 生成今日电子书快照结束，耗时：679毫秒
2021-12-20 20:17:05.690 INFO  com.job.DocJob                                    :32   [32m128108412545404928[0;39m 更新电子书下的文档数据开始
2021-12-20 20:17:05.691 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108412545404928[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:17:05.691 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108412545404928[0;39m ==> Parameters: 
2021-12-20 20:17:05.930 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108412545404928[0;39m <==    Updates: 6
2021-12-20 20:17:05.931 INFO  com.job.DocJob                                    :35   [32m128108412545404928[0;39m 更新电子书下的文档数据结束，耗时：241毫秒
2021-12-20 20:17:07.333 INFO  com.aspect.LogAspect                              :54   [32m128108419436646400[0;39m ------------- 开始 -------------
2021-12-20 20:17:07.333 INFO  com.aspect.LogAspect                              :55   [32m128108419436646400[0;39m 请求地址: http://localhost:8081/doc/all/117509669114744832 GET
2021-12-20 20:17:07.333 INFO  com.aspect.LogAspect                              :56   [32m128108419436646400[0;39m 类名方法: com.controller.DocController.all
2021-12-20 20:17:07.333 INFO  com.aspect.LogAspect                              :57   [32m128108419436646400[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:07.334 INFO  com.aspect.LogAspect                              :80   [32m128108419436646400[0;39m 请求参数: [117509669114744832]
2021-12-20 20:17:07.433 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108419436646400[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 20:17:07.433 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108419436646400[0;39m ==> Parameters: 117509669114744832(Long)
2021-12-20 20:17:07.537 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108419436646400[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:17:07.537 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108419436646400[0;39m <==        Row: 127977019945390080, 117509669114744832, 0, 测试文档, 1, 0, 0
2021-12-20 20:17:07.537 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108419436646400[0;39m <==      Total: 1
2021-12-20 20:17:07.568 INFO  com.aspect.LogAspect                              :92   [32m128108419436646400[0;39m 返回结果: {"content":[{"ebookId":117509669114744832,"id":127977019945390080,"name":"测试文档","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-12-20 20:17:07.568 INFO  com.aspect.LogAspect                              :93   [32m128108419436646400[0;39m ------------- 结束 耗时：235 ms -------------
2021-12-20 20:17:07.602 INFO  com.aspect.LogAspect                              :54   [32m128108420560719872[0;39m ------------- 开始 -------------
2021-12-20 20:17:07.602 INFO  com.aspect.LogAspect                              :55   [32m128108420560719872[0;39m 请求地址: http://localhost:8081/doc/find-content/127977019945390080 GET
2021-12-20 20:17:07.602 INFO  com.aspect.LogAspect                              :56   [32m128108420560719872[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 20:17:07.603 INFO  com.aspect.LogAspect                              :57   [32m128108420560719872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:07.603 INFO  com.aspect.LogAspect                              :80   [32m128108420560719872[0;39m 请求参数: [127977019945390080]
2021-12-20 20:17:07.694 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108420560719872[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 20:17:07.696 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108420560719872[0;39m ==> Parameters: 127977019945390080(Long)
2021-12-20 20:17:07.851 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m128108420560719872[0;39m <==    Columns: id, content
2021-12-20 20:17:07.851 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m128108420560719872[0;39m <==        Row: 127977019945390080, <<BLOB>>
2021-12-20 20:17:07.851 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108420560719872[0;39m <==      Total: 1
2021-12-20 20:17:07.851 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108420560719872[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 20:17:07.851 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108420560719872[0;39m ==> Parameters: 127977019945390080(Long)
2021-12-20 20:17:08.110 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108420560719872[0;39m <==    Updates: 1
2021-12-20 20:17:08.112 INFO  com.aspect.LogAspect                              :92   [32m128108420560719872[0;39m 返回结果: {"content":"","success":true}
2021-12-20 20:17:08.112 INFO  com.aspect.LogAspect                              :93   [32m128108420560719872[0;39m ------------- 结束 耗时：511 ms -------------
2021-12-20 20:17:08.559 INFO  com.aspect.LogAspect                              :54   [32m128108424578863104[0;39m ------------- 开始 -------------
2021-12-20 20:17:08.560 INFO  com.aspect.LogAspect                              :55   [32m128108424578863104[0;39m 请求地址: http://localhost:8081/doc/vote/127977019945390080 GET
2021-12-20 20:17:08.560 INFO  com.aspect.LogAspect                              :56   [32m128108424578863104[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 20:17:08.560 INFO  com.aspect.LogAspect                              :57   [32m128108424578863104[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:08.560 INFO  com.aspect.LogAspect                              :80   [32m128108424578863104[0;39m 请求参数: [127977019945390080]
2021-12-20 20:17:09.991 INFO  com.Util.RedisUtil                                :31   [32m128108424578863104[0;39m key不存在，放入：DOC_VOTE_127977019945390080_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 20:17:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128108430685769728[0;39m 生成今日电子书快照开始
2021-12-20 20:17:10.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108430685769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:10.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108430685769728[0;39m ==> Parameters: 
2021-12-20 20:17:10.256 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m128108424578863104[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 20:17:10.258 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m128108424578863104[0;39m ==> Parameters: 127977019945390080(Long)
2021-12-20 20:17:10.447 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108430685769728[0;39m <==    Updates: 0
2021-12-20 20:17:10.449 INFO  com.job.EbookSnapshotJob                          :35   [32m128108430685769728[0;39m 生成今日电子书快照结束，耗时：434毫秒
2021-12-20 20:17:10.557 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m128108424578863104[0;39m <==    Updates: 1
2021-12-20 20:17:10.559 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m128108424578863104[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 20:17:10.560 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m128108424578863104[0;39m ==> Parameters: 127977019945390080(Long)
2021-12-20 20:17:10.642 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m128108424578863104[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:17:10.643 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m128108424578863104[0;39m <==        Row: 127977019945390080, 117509669114744832, 0, 测试文档, 1, 1, 1
2021-12-20 20:17:10.644 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m128108424578863104[0;39m <==      Total: 1
2021-12-20 20:17:10.647 INFO  com.aspect.LogAspect                              :92   [32m128108424578863104[0;39m 返回结果: {"success":true}
2021-12-20 20:17:10.647 INFO  com.aspect.LogAspect                              :93   [32m128108424578863104[0;39m ------------- 结束 耗时：2088 ms -------------
2021-12-20 20:17:10.700 INFO  com.websocket.WebSocketServer                     :71   [32m128108424578863104[0;39m 推送消息：BB3Z5E3vZR，内容：【测试文档】被点赞！
2021-12-20 20:17:11.943 INFO  com.aspect.LogAspect                              :54   [32m128108438772387840[0;39m ------------- 开始 -------------
2021-12-20 20:17:11.943 INFO  com.aspect.LogAspect                              :55   [32m128108438772387840[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:17:11.943 INFO  com.aspect.LogAspect                              :54   [32m128108438772387841[0;39m ------------- 开始 -------------
2021-12-20 20:17:11.943 INFO  com.aspect.LogAspect                              :56   [32m128108438772387840[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:17:11.943 INFO  com.aspect.LogAspect                              :55   [32m128108438772387841[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:17:11.944 INFO  com.aspect.LogAspect                              :57   [32m128108438772387840[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:11.944 INFO  com.aspect.LogAspect                              :56   [32m128108438772387841[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:17:11.944 INFO  com.aspect.LogAspect                              :80   [32m128108438772387840[0;39m 请求参数: []
2021-12-20 20:17:11.944 INFO  com.aspect.LogAspect                              :57   [32m128108438772387841[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:11.944 INFO  com.aspect.LogAspect                              :80   [32m128108438772387841[0;39m 请求参数: []
2021-12-20 20:17:11.946 INFO  com.aspect.LogAspect                              :54   [32m128108438784970752[0;39m ------------- 开始 -------------
2021-12-20 20:17:11.947 INFO  com.aspect.LogAspect                              :55   [32m128108438784970752[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:11.947 INFO  com.aspect.LogAspect                              :56   [32m128108438784970752[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:11.947 INFO  com.aspect.LogAspect                              :57   [32m128108438784970752[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:11.947 INFO  com.aspect.LogAspect                              :80   [32m128108438784970752[0;39m 请求参数: []
2021-12-20 20:17:12.010 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108438772387841[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:12.010 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108438772387840[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:12.010 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108438772387840[0;39m ==> Parameters: 
2021-12-20 20:17:12.010 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108438772387841[0;39m ==> Parameters: 
2021-12-20 20:17:12.063 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108438784970752[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:12.063 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108438784970752[0;39m ==> Parameters: 
2021-12-20 20:17:12.125 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108438772387840[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:17:12.133 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108438772387840[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:17:12.134 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108438772387841[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:17:12.136 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108438772387841[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:17:12.136 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108438772387840[0;39m <==        Row: 2021-12-20, 200, 70, 1, 1
2021-12-20 20:17:12.137 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108438772387841[0;39m <==      Total: 1
2021-12-20 20:17:12.138 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108438772387840[0;39m <==      Total: 2
2021-12-20 20:17:12.139 INFO  com.aspect.LogAspect                              :92   [32m128108438772387841[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:17:12.139 INFO  com.aspect.LogAspect                              :93   [32m128108438772387841[0;39m ------------- 结束 耗时：196 ms -------------
2021-12-20 20:17:12.142 INFO  com.aspect.LogAspect                              :92   [32m128108438772387840[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":200,"viewIncrease":1,"voteCount":70,"voteIncrease":1}],"success":true}
2021-12-20 20:17:12.143 INFO  com.aspect.LogAspect                              :93   [32m128108438772387840[0;39m ------------- 结束 耗时：200 ms -------------
2021-12-20 20:17:12.177 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:12.177 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:12.178 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:12.179 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:12.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:12.180 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:12.181 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:12.182 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:12.184 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:12.184 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:12.185 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:12.185 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:12.186 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:12.187 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:12.187 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:12.188 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:12.188 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:12.189 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:12.189 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:12.190 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108438784970752[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:12.190 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108438784970752[0;39m <==      Total: 19
2021-12-20 20:17:12.193 INFO  com.aspect.LogAspect                              :92   [32m128108438784970752[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:12.193 INFO  com.aspect.LogAspect                              :93   [32m128108438784970752[0;39m ------------- 结束 耗时：247 ms -------------
2021-12-20 20:17:15.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128108451640512512[0;39m 生成今日电子书快照开始
2021-12-20 20:17:15.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108451640512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:15.128 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108451640512512[0;39m ==> Parameters: 
2021-12-20 20:17:15.223 INFO  com.aspect.LogAspect                              :54   [32m128108452529704960[0;39m ------------- 开始 -------------
2021-12-20 20:17:15.224 INFO  com.aspect.LogAspect                              :55   [32m128108452529704960[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:17:15.224 INFO  com.aspect.LogAspect                              :56   [32m128108452529704960[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:17:15.224 INFO  com.aspect.LogAspect                              :57   [32m128108452529704960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:15.224 INFO  com.aspect.LogAspect                              :80   [32m128108452529704960[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-20 20:17:15.320 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108451640512512[0;39m <==    Updates: 0
2021-12-20 20:17:15.320 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108452529704960[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:17:15.320 INFO  com.job.EbookSnapshotJob                          :35   [32m128108451640512512[0;39m 生成今日电子书快照结束，耗时：308毫秒
2021-12-20 20:17:15.320 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108452529704960[0;39m ==> Parameters: 101(Long)
2021-12-20 20:17:15.440 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108452529704960[0;39m <==    Columns: count(0)
2021-12-20 20:17:15.440 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108452529704960[0;39m <==        Row: 1
2021-12-20 20:17:15.441 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108452529704960[0;39m <==      Total: 1
2021-12-20 20:17:15.441 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108452529704960[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 20:17:15.442 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108452529704960[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-20 20:17:15.531 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108452529704960[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:17:15.532 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108452529704960[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 86, 37
2021-12-20 20:17:15.534 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108452529704960[0;39m <==      Total: 1
2021-12-20 20:17:15.535 INFO  com.servicess.EbookService                        :48   [32m128108452529704960[0;39m 总行数：1
2021-12-20 20:17:15.535 INFO  com.servicess.EbookService                        :49   [32m128108452529704960[0;39m 总页数：1
2021-12-20 20:17:15.537 INFO  com.aspect.LogAspect                              :92   [32m128108452529704960[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":86,"voteCount":37}],"total":1},"success":true}
2021-12-20 20:17:15.538 INFO  com.aspect.LogAspect                              :93   [32m128108452529704960[0;39m ------------- 结束 耗时：315 ms -------------
2021-12-20 20:17:17.273 INFO  com.aspect.LogAspect                              :54   [32m128108461128028160[0;39m ------------- 开始 -------------
2021-12-20 20:17:17.274 INFO  com.aspect.LogAspect                              :55   [32m128108461128028160[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-20 20:17:17.275 INFO  com.aspect.LogAspect                              :56   [32m128108461128028160[0;39m 类名方法: com.controller.DocController.all
2021-12-20 20:17:17.275 INFO  com.aspect.LogAspect                              :57   [32m128108461128028160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:17.275 INFO  com.aspect.LogAspect                              :80   [32m128108461128028160[0;39m 请求参数: [2]
2021-12-20 20:17:17.378 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108461128028160[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 20:17:17.378 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108461128028160[0;39m ==> Parameters: 2(Long)
2021-12-20 20:17:17.458 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:17:17.459 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 9, 2, 0, 文档1, 1, 35, 7
2021-12-20 20:17:17.460 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-20 20:17:17.461 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 11, 5
2021-12-20 20:17:17.462 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 8, 6
2021-12-20 20:17:17.463 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-20 20:17:17.463 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 9, 6
2021-12-20 20:17:17.463 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 6, 6
2021-12-20 20:17:17.464 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108461128028160[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 3, 3
2021-12-20 20:17:17.464 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108461128028160[0;39m <==      Total: 8
2021-12-20 20:17:17.466 INFO  com.aspect.LogAspect                              :92   [32m128108461128028160[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":35,"voteCount":7},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":11,"voteCount":5},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":8,"voteCount":6},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":9,"voteCount":6},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":6,"voteCount":6},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":3,"voteCount":3}],"success":true}
2021-12-20 20:17:17.466 INFO  com.aspect.LogAspect                              :93   [32m128108461128028160[0;39m ------------- 结束 耗时：193 ms -------------
2021-12-20 20:17:17.499 INFO  com.aspect.LogAspect                              :54   [32m128108462075940864[0;39m ------------- 开始 -------------
2021-12-20 20:17:17.499 INFO  com.aspect.LogAspect                              :55   [32m128108462075940864[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-20 20:17:17.499 INFO  com.aspect.LogAspect                              :56   [32m128108462075940864[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 20:17:17.500 INFO  com.aspect.LogAspect                              :57   [32m128108462075940864[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:17.500 INFO  com.aspect.LogAspect                              :80   [32m128108462075940864[0;39m 请求参数: [9]
2021-12-20 20:17:17.614 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108462075940864[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 20:17:17.616 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108462075940864[0;39m ==> Parameters: 9(Long)
2021-12-20 20:17:18.213 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108462075940864[0;39m <==      Total: 0
2021-12-20 20:17:18.215 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108462075940864[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 20:17:18.216 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108462075940864[0;39m ==> Parameters: 9(Long)
2021-12-20 20:17:18.467 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108462075940864[0;39m <==    Updates: 1
2021-12-20 20:17:18.468 INFO  com.aspect.LogAspect                              :92   [32m128108462075940864[0;39m 返回结果: {"content":"","success":true}
2021-12-20 20:17:18.468 INFO  com.aspect.LogAspect                              :93   [32m128108462075940864[0;39m ------------- 结束 耗时：969 ms -------------
2021-12-20 20:17:18.838 INFO  com.aspect.LogAspect                              :54   [32m128108467692113920[0;39m ------------- 开始 -------------
2021-12-20 20:17:18.839 INFO  com.aspect.LogAspect                              :55   [32m128108467692113920[0;39m 请求地址: http://localhost:8081/doc/find-content/123355131981991936 GET
2021-12-20 20:17:18.839 INFO  com.aspect.LogAspect                              :56   [32m128108467692113920[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 20:17:18.839 INFO  com.aspect.LogAspect                              :57   [32m128108467692113920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:18.839 INFO  com.aspect.LogAspect                              :80   [32m128108467692113920[0;39m 请求参数: [123355131981991936]
2021-12-20 20:17:18.973 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108467692113920[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 20:17:18.975 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108467692113920[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-20 20:17:19.132 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m128108467692113920[0;39m <==    Columns: id, content
2021-12-20 20:17:19.132 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m128108467692113920[0;39m <==        Row: 123355131981991936, <<BLOB>>
2021-12-20 20:17:19.133 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108467692113920[0;39m <==      Total: 1
2021-12-20 20:17:19.133 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108467692113920[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 20:17:19.134 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108467692113920[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-20 20:17:19.285 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108467692113920[0;39m <==    Updates: 1
2021-12-20 20:17:19.285 INFO  com.aspect.LogAspect                              :92   [32m128108467692113920[0;39m 返回结果: {"content":"","success":true}
2021-12-20 20:17:19.286 INFO  com.aspect.LogAspect                              :93   [32m128108467692113920[0;39m ------------- 结束 耗时：448 ms -------------
2021-12-20 20:17:19.417 INFO  com.aspect.LogAspect                              :54   [32m128108470120615936[0;39m ------------- 开始 -------------
2021-12-20 20:17:19.417 INFO  com.aspect.LogAspect                              :55   [32m128108470120615936[0;39m 请求地址: http://localhost:8081/doc/find-content/123355187095146496 GET
2021-12-20 20:17:19.417 INFO  com.aspect.LogAspect                              :56   [32m128108470120615936[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 20:17:19.418 INFO  com.aspect.LogAspect                              :57   [32m128108470120615936[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:19.418 INFO  com.aspect.LogAspect                              :80   [32m128108470120615936[0;39m 请求参数: [123355187095146496]
2021-12-20 20:17:19.418 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108470120615936[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 20:17:19.419 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108470120615936[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 20:17:19.530 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m128108470120615936[0;39m <==    Columns: id, content
2021-12-20 20:17:19.532 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m128108470120615936[0;39m <==        Row: 123355187095146496, <<BLOB>>
2021-12-20 20:17:19.534 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128108470120615936[0;39m <==      Total: 1
2021-12-20 20:17:19.536 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108470120615936[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 20:17:19.538 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108470120615936[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 20:17:19.722 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128108470120615936[0;39m <==    Updates: 1
2021-12-20 20:17:19.723 INFO  com.aspect.LogAspect                              :92   [32m128108470120615936[0;39m 返回结果: {"content":"","success":true}
2021-12-20 20:17:19.724 INFO  com.aspect.LogAspect                              :93   [32m128108470120615936[0;39m ------------- 结束 耗时：307 ms -------------
2021-12-20 20:17:20.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128108472591060992[0;39m 生成今日电子书快照开始
2021-12-20 20:17:20.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108472591060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:20.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108472591060992[0;39m ==> Parameters: 
2021-12-20 20:17:20.148 INFO  com.aspect.LogAspect                              :54   [32m128108473186652160[0;39m ------------- 开始 -------------
2021-12-20 20:17:20.149 INFO  com.aspect.LogAspect                              :55   [32m128108473186652160[0;39m 请求地址: http://localhost:8081/doc/vote/123355187095146496 GET
2021-12-20 20:17:20.149 INFO  com.aspect.LogAspect                              :56   [32m128108473186652160[0;39m 类名方法: com.controller.DocController.vote
2021-12-20 20:17:20.149 INFO  com.aspect.LogAspect                              :57   [32m128108473186652160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:20.149 INFO  com.aspect.LogAspect                              :80   [32m128108473186652160[0;39m 请求参数: [123355187095146496]
2021-12-20 20:17:20.250 INFO  com.Util.RedisUtil                                :31   [32m128108473186652160[0;39m key不存在，放入：DOC_VOTE_123355187095146496_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-20 20:17:20.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108472591060992[0;39m <==    Updates: 0
2021-12-20 20:17:20.350 INFO  com.job.EbookSnapshotJob                          :35   [32m128108472591060992[0;39m 生成今日电子书快照结束，耗时：343毫秒
2021-12-20 20:17:20.443 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m128108473186652160[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-20 20:17:20.445 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m128108473186652160[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 20:17:20.639 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m128108473186652160[0;39m <==    Updates: 1
2021-12-20 20:17:20.652 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m128108473186652160[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-20 20:17:20.653 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m128108473186652160[0;39m ==> Parameters: 123355187095146496(Long)
2021-12-20 20:17:20.790 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m128108473186652160[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:17:20.792 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m128108473186652160[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 10, 7
2021-12-20 20:17:20.794 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m128108473186652160[0;39m <==      Total: 1
2021-12-20 20:17:20.796 INFO  com.aspect.LogAspect                              :92   [32m128108473186652160[0;39m 返回结果: {"success":true}
2021-12-20 20:17:20.798 INFO  com.aspect.LogAspect                              :93   [32m128108473186652160[0;39m ------------- 结束 耗时：650 ms -------------
2021-12-20 20:17:20.798 INFO  com.websocket.WebSocketServer                     :71   [32m128108473186652160[0;39m 推送消息：BB3Z5E3vZR，内容：【文档1.2】被点赞！
2021-12-20 20:17:21.626 INFO  com.aspect.LogAspect                              :54   [32m128108479385833472[0;39m ------------- 开始 -------------
2021-12-20 20:17:21.626 INFO  com.aspect.LogAspect                              :54   [32m128108479385833473[0;39m ------------- 开始 -------------
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :55   [32m128108479385833473[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :55   [32m128108479385833472[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :56   [32m128108479385833472[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :56   [32m128108479385833473[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :57   [32m128108479385833472[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :57   [32m128108479385833473[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :80   [32m128108479385833473[0;39m 请求参数: []
2021-12-20 20:17:21.627 INFO  com.aspect.LogAspect                              :80   [32m128108479385833472[0;39m 请求参数: []
2021-12-20 20:17:21.630 INFO  com.aspect.LogAspect                              :54   [32m128108479402610688[0;39m ------------- 开始 -------------
2021-12-20 20:17:21.631 INFO  com.aspect.LogAspect                              :55   [32m128108479402610688[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:21.631 INFO  com.aspect.LogAspect                              :56   [32m128108479402610688[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:21.631 INFO  com.aspect.LogAspect                              :57   [32m128108479402610688[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:21.631 INFO  com.aspect.LogAspect                              :80   [32m128108479402610688[0;39m 请求参数: []
2021-12-20 20:17:21.706 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108479385833473[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:21.706 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108479385833472[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:21.706 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108479385833473[0;39m ==> Parameters: 
2021-12-20 20:17:21.706 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108479385833472[0;39m ==> Parameters: 
2021-12-20 20:17:21.761 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108479402610688[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:21.777 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108479402610688[0;39m ==> Parameters: 
2021-12-20 20:17:21.839 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108479385833473[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:17:21.839 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108479385833472[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:17:21.841 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108479385833473[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:17:21.841 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108479385833472[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:17:21.841 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108479385833472[0;39m <==      Total: 1
2021-12-20 20:17:21.841 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108479385833473[0;39m <==        Row: 2021-12-20, 200, 70, 1, 1
2021-12-20 20:17:21.841 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108479385833473[0;39m <==      Total: 2
2021-12-20 20:17:21.841 INFO  com.aspect.LogAspect                              :92   [32m128108479385833472[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:17:21.841 INFO  com.aspect.LogAspect                              :93   [32m128108479385833472[0;39m ------------- 结束 耗时：215 ms -------------
2021-12-20 20:17:21.841 INFO  com.aspect.LogAspect                              :92   [32m128108479385833473[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":200,"viewIncrease":1,"voteCount":70,"voteIncrease":1}],"success":true}
2021-12-20 20:17:21.841 INFO  com.aspect.LogAspect                              :93   [32m128108479385833473[0;39m ------------- 结束 耗时：215 ms -------------
2021-12-20 20:17:21.931 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:21.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:21.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:21.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:21.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:21.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:21.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:21.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:21.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:21.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:21.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:21.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:21.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:21.935 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:21.935 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:21.935 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:21.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:21.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:21.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:21.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108479402610688[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:21.937 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108479402610688[0;39m <==      Total: 19
2021-12-20 20:17:21.939 INFO  com.aspect.LogAspect                              :92   [32m128108479402610688[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:21.939 INFO  com.aspect.LogAspect                              :93   [32m128108479402610688[0;39m ------------- 结束 耗时：309 ms -------------
2021-12-20 20:17:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128108493570969600[0;39m 生成今日电子书快照开始
2021-12-20 20:17:25.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108493570969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:25.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108493570969600[0;39m ==> Parameters: 
2021-12-20 20:17:25.315 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108493570969600[0;39m <==    Updates: 0
2021-12-20 20:17:25.315 INFO  com.job.EbookSnapshotJob                          :35   [32m128108493570969600[0;39m 生成今日电子书快照结束，耗时：307毫秒
2021-12-20 20:17:28.394 INFO  com.aspect.LogAspect                              :54   [32m128108507772882944[0;39m ------------- 开始 -------------
2021-12-20 20:17:28.394 INFO  com.aspect.LogAspect                              :55   [32m128108507772882944[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 20:17:28.394 INFO  com.aspect.LogAspect                              :56   [32m128108507772882944[0;39m 类名方法: com.controller.UserController.login
2021-12-20 20:17:28.394 INFO  com.aspect.LogAspect                              :57   [32m128108507772882944[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:28.395 INFO  com.aspect.LogAspect                              :80   [32m128108507772882944[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 20:17:28.505 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108507772882944[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 20:17:28.505 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108507772882944[0;39m ==> Parameters: test123(String)
2021-12-20 20:17:28.602 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108507772882944[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:17:28.603 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108507772882944[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:28.604 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108507772882944[0;39m <==      Total: 1
2021-12-20 20:17:28.615 INFO  com.controller.UserController                     :77   [32m128108507772882944[0;39m 生成单点登录token:128108508699824128,并放入redis中
2021-12-20 20:17:28.761 INFO  com.aspect.LogAspect                              :92   [32m128108507772882944[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"128108508699824128"},"success":true}
2021-12-20 20:17:28.762 INFO  com.aspect.LogAspect                              :93   [32m128108507772882944[0;39m ------------- 结束 耗时：368 ms -------------
2021-12-20 20:17:29.155 INFO  com.websocket.WebSocketServer                     :41   [32m128108461128028160[0;39m 连接关闭，token：BB3Z5E3vZR，session id：0！当前连接数：0
2021-12-20 20:17:30.013 INFO  com.job.EbookSnapshotJob                          :32   [32m128108514563461120[0;39m 生成今日电子书快照开始
2021-12-20 20:17:30.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108514563461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:30.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108514563461120[0;39m ==> Parameters: 
2021-12-20 20:17:30.264 INFO  com.websocket.WebSocketServer                     :32   [32m128108462075940864[0;39m 有新连接：token：APwWKteb8y，session id：1，当前连接数：1
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :54   [32m128108515951775744[0;39m ------------- 开始 -------------
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :54   [32m128108515951775745[0;39m ------------- 开始 -------------
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :54   [32m128108515951775746[0;39m ------------- 开始 -------------
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :55   [32m128108515951775745[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :55   [32m128108515951775744[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :55   [32m128108515951775746[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :56   [32m128108515951775745[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :56   [32m128108515951775744[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:17:30.344 INFO  com.aspect.LogAspect                              :56   [32m128108515951775746[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:30.345 INFO  com.aspect.LogAspect                              :57   [32m128108515951775745[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:30.345 INFO  com.aspect.LogAspect                              :57   [32m128108515951775746[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:30.345 INFO  com.aspect.LogAspect                              :57   [32m128108515951775744[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:30.345 INFO  com.aspect.LogAspect                              :80   [32m128108515951775746[0;39m 请求参数: []
2021-12-20 20:17:30.345 INFO  com.aspect.LogAspect                              :80   [32m128108515951775745[0;39m 请求参数: []
2021-12-20 20:17:30.345 INFO  com.aspect.LogAspect                              :80   [32m128108515951775744[0;39m 请求参数: []
2021-12-20 20:17:30.415 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108514563461120[0;39m <==    Updates: 0
2021-12-20 20:17:30.415 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108515951775744[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:30.415 INFO  com.job.EbookSnapshotJob                          :35   [32m128108514563461120[0;39m 生成今日电子书快照结束，耗时：401毫秒
2021-12-20 20:17:30.415 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108515951775744[0;39m ==> Parameters: 
2021-12-20 20:17:30.416 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108515951775745[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:30.416 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108515951775746[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:30.417 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108515951775746[0;39m ==> Parameters: 
2021-12-20 20:17:30.417 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108515951775745[0;39m ==> Parameters: 
2021-12-20 20:17:30.513 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108515951775745[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:17:30.513 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108515951775744[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:17:30.514 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:30.514 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:30.514 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108515951775745[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:17:30.514 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108515951775744[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:17:30.514 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:30.514 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:30.515 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:30.515 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:30.515 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:30.515 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108515951775744[0;39m <==      Total: 1
2021-12-20 20:17:30.516 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:30.516 INFO  com.aspect.LogAspect                              :92   [32m128108515951775744[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:17:30.516 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:30.516 INFO  com.aspect.LogAspect                              :93   [32m128108515951775744[0;39m ------------- 结束 耗时：172 ms -------------
2021-12-20 20:17:30.516 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108515951775745[0;39m <==        Row: 2021-12-20, 200, 70, 1, 1
2021-12-20 20:17:30.517 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:30.518 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:30.518 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108515951775745[0;39m <==      Total: 2
2021-12-20 20:17:30.518 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:30.519 INFO  com.aspect.LogAspect                              :92   [32m128108515951775745[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":200,"viewIncrease":1,"voteCount":70,"voteIncrease":1}],"success":true}
2021-12-20 20:17:30.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:30.519 INFO  com.aspect.LogAspect                              :93   [32m128108515951775745[0;39m ------------- 结束 耗时：175 ms -------------
2021-12-20 20:17:30.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:30.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:30.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:30.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:30.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:30.521 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:30.521 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108515951775746[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:30.522 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108515951775746[0;39m <==      Total: 19
2021-12-20 20:17:30.523 INFO  com.aspect.LogAspect                              :92   [32m128108515951775746[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:30.524 INFO  com.aspect.LogAspect                              :93   [32m128108515951775746[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-20 20:17:30.804 INFO  com.aspect.LogAspect                              :54   [32m128108517881155584[0;39m ------------- 开始 -------------
2021-12-20 20:17:30.805 INFO  com.aspect.LogAspect                              :55   [32m128108517881155584[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:17:30.805 INFO  com.aspect.LogAspect                              :56   [32m128108517881155584[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:17:30.805 INFO  com.aspect.LogAspect                              :57   [32m128108517881155584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:30.807 INFO  com.aspect.LogAspect                              :80   [32m128108517881155584[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:30.809 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108517881155584[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:17:30.809 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108517881155584[0;39m ==> Parameters: 
2021-12-20 20:17:30.891 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108517881155584[0;39m <==    Columns: count(0)
2021-12-20 20:17:30.891 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108517881155584[0;39m <==        Row: 8
2021-12-20 20:17:30.892 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108517881155584[0;39m <==      Total: 1
2021-12-20 20:17:30.893 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108517881155584[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:17:30.893 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108517881155584[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:30.987 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:17:30.989 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:30.990 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:30.991 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:30.992 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:30.993 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:17:30.994 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:30.995 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:30.996 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108517881155584[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:30.997 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108517881155584[0;39m <==      Total: 8
2021-12-20 20:17:30.998 INFO  com.servicess.UserService                         :52   [32m128108517881155584[0;39m 总行数：8
2021-12-20 20:17:30.998 INFO  com.servicess.UserService                         :53   [32m128108517881155584[0;39m 总页数：1
2021-12-20 20:17:31.010 INFO  com.aspect.LogAspect                              :92   [32m128108517881155584[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:17:31.011 INFO  com.aspect.LogAspect                              :93   [32m128108517881155584[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 20:17:31.169 INFO  com.aspect.LogAspect                              :54   [32m128108519412076544[0;39m ------------- 开始 -------------
2021-12-20 20:17:31.169 INFO  com.aspect.LogAspect                              :55   [32m128108519412076544[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:31.169 INFO  com.aspect.LogAspect                              :56   [32m128108519412076544[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:31.170 INFO  com.aspect.LogAspect                              :57   [32m128108519412076544[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:31.170 INFO  com.aspect.LogAspect                              :80   [32m128108519412076544[0;39m 请求参数: []
2021-12-20 20:17:31.270 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108519412076544[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:31.271 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108519412076544[0;39m ==> Parameters: 
2021-12-20 20:17:31.428 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:31.429 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:31.429 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:31.430 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:31.430 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:31.430 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:31.430 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:31.435 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:31.436 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:31.437 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:31.437 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:31.438 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:31.438 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:31.439 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:31.439 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:31.440 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:31.440 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:31.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:31.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:31.442 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108519412076544[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:31.442 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108519412076544[0;39m <==      Total: 19
2021-12-20 20:17:31.444 INFO  com.aspect.LogAspect                              :92   [32m128108519412076544[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:31.444 INFO  com.aspect.LogAspect                              :93   [32m128108519412076544[0;39m ------------- 结束 耗时：275 ms -------------
2021-12-20 20:17:31.450 INFO  com.aspect.LogAspect                              :54   [32m128108520590675968[0;39m ------------- 开始 -------------
2021-12-20 20:17:31.451 INFO  com.aspect.LogAspect                              :55   [32m128108520590675968[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:31.451 INFO  com.aspect.LogAspect                              :56   [32m128108520590675968[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:31.451 INFO  com.aspect.LogAspect                              :57   [32m128108520590675968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:31.452 INFO  com.aspect.LogAspect                              :80   [32m128108520590675968[0;39m 请求参数: []
2021-12-20 20:17:31.457 INFO  com.aspect.LogAspect                              :54   [32m128108520620036096[0;39m ------------- 开始 -------------
2021-12-20 20:17:31.457 INFO  com.aspect.LogAspect                              :55   [32m128108520620036096[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:17:31.457 INFO  com.aspect.LogAspect                              :56   [32m128108520620036096[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:17:31.457 INFO  com.aspect.LogAspect                              :57   [32m128108520620036096[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:31.457 INFO  com.aspect.LogAspect                              :80   [32m128108520620036096[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:31.459 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108520620036096[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:17:31.460 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108520620036096[0;39m ==> Parameters: 
2021-12-20 20:17:31.523 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108520590675968[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:31.524 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108520590675968[0;39m ==> Parameters: 
2021-12-20 20:17:31.557 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108520620036096[0;39m <==    Columns: count(0)
2021-12-20 20:17:31.557 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108520620036096[0;39m <==        Row: 6
2021-12-20 20:17:31.558 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108520620036096[0;39m <==      Total: 1
2021-12-20 20:17:31.560 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108520620036096[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:17:31.561 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108520620036096[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:31.620 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:31.621 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:31.622 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:31.623 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:31.624 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:31.624 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:31.625 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:31.625 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:31.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:31.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:31.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:31.626 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:31.627 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:31.627 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:31.627 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:31.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:31.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:31.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:31.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:31.628 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108520590675968[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:31.629 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108520590675968[0;39m <==      Total: 19
2021-12-20 20:17:31.630 INFO  com.aspect.LogAspect                              :92   [32m128108520590675968[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:31.630 INFO  com.aspect.LogAspect                              :93   [32m128108520590675968[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-20 20:17:31.683 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:17:31.684 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:17:31.685 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 86, 37
2021-12-20 20:17:31.685 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:17:31.686 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:17:31.686 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:17:31.687 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108520620036096[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 20:17:31.687 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108520620036096[0;39m <==      Total: 6
2021-12-20 20:17:31.688 INFO  com.servicess.EbookService                        :48   [32m128108520620036096[0;39m 总行数：6
2021-12-20 20:17:31.688 INFO  com.servicess.EbookService                        :49   [32m128108520620036096[0;39m 总页数：1
2021-12-20 20:17:31.689 INFO  com.aspect.LogAspect                              :92   [32m128108520620036096[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":86,"voteCount":37},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 20:17:31.689 INFO  com.aspect.LogAspect                              :93   [32m128108520620036096[0;39m ------------- 结束 耗时：232 ms -------------
2021-12-20 20:17:31.986 INFO  com.aspect.LogAspect                              :54   [32m128108522838822912[0;39m ------------- 开始 -------------
2021-12-20 20:17:31.986 INFO  com.aspect.LogAspect                              :55   [32m128108522838822912[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:17:31.987 INFO  com.aspect.LogAspect                              :56   [32m128108522838822912[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:17:31.987 INFO  com.aspect.LogAspect                              :57   [32m128108522838822912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:31.987 INFO  com.aspect.LogAspect                              :80   [32m128108522838822912[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:31.989 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108522838822912[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:17:31.990 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108522838822912[0;39m ==> Parameters: 
2021-12-20 20:17:32.066 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108522838822912[0;39m <==    Columns: count(0)
2021-12-20 20:17:32.068 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108522838822912[0;39m <==        Row: 8
2021-12-20 20:17:32.069 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108522838822912[0;39m <==      Total: 1
2021-12-20 20:17:32.072 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108522838822912[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:17:32.073 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108522838822912[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:32.161 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:17:32.162 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:32.163 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:32.164 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:32.164 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:32.166 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:17:32.167 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:32.169 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:32.175 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108522838822912[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:32.176 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108522838822912[0;39m <==      Total: 8
2021-12-20 20:17:32.177 INFO  com.servicess.UserService                         :52   [32m128108522838822912[0;39m 总行数：8
2021-12-20 20:17:32.177 INFO  com.servicess.UserService                         :53   [32m128108522838822912[0;39m 总页数：1
2021-12-20 20:17:32.184 INFO  com.aspect.LogAspect                              :92   [32m128108522838822912[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:17:32.184 INFO  com.aspect.LogAspect                              :93   [32m128108522838822912[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-20 20:17:33.212 INFO  com.aspect.LogAspect                              :54   [32m128108527981039616[0;39m ------------- 开始 -------------
2021-12-20 20:17:33.212 INFO  com.aspect.LogAspect                              :55   [32m128108527981039616[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:33.212 INFO  com.aspect.LogAspect                              :56   [32m128108527981039616[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:33.212 INFO  com.aspect.LogAspect                              :57   [32m128108527981039616[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:33.213 INFO  com.aspect.LogAspect                              :80   [32m128108527981039616[0;39m 请求参数: []
2021-12-20 20:17:33.304 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108527981039616[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:33.305 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108527981039616[0;39m ==> Parameters: 
2021-12-20 20:17:33.441 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:33.442 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:33.442 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:33.443 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:33.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:33.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:33.445 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:33.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:33.448 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:33.449 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:33.451 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:33.452 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:33.454 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:33.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:33.456 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:33.457 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:33.458 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:33.458 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:33.459 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:33.460 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108527981039616[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:33.460 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108527981039616[0;39m <==      Total: 19
2021-12-20 20:17:33.466 INFO  com.aspect.LogAspect                              :92   [32m128108527981039616[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:33.467 INFO  com.aspect.LogAspect                              :93   [32m128108527981039616[0;39m ------------- 结束 耗时：255 ms -------------
2021-12-20 20:17:33.493 INFO  com.aspect.LogAspect                              :54   [32m128108529159639040[0;39m ------------- 开始 -------------
2021-12-20 20:17:33.493 INFO  com.aspect.LogAspect                              :55   [32m128108529159639040[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:17:33.494 INFO  com.aspect.LogAspect                              :56   [32m128108529159639040[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:17:33.494 INFO  com.aspect.LogAspect                              :57   [32m128108529159639040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:33.495 INFO  com.aspect.LogAspect                              :80   [32m128108529159639040[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:33.612 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108529159639040[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:17:33.614 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108529159639040[0;39m ==> Parameters: 
2021-12-20 20:17:33.703 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108529159639040[0;39m <==    Columns: count(0)
2021-12-20 20:17:33.704 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108529159639040[0;39m <==        Row: 6
2021-12-20 20:17:33.704 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108529159639040[0;39m <==      Total: 1
2021-12-20 20:17:33.705 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108529159639040[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:17:33.705 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108529159639040[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:33.829 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:17:33.829 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:17:33.832 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 86, 37
2021-12-20 20:17:33.833 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:17:33.835 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:17:33.836 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:17:33.838 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108529159639040[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 0, 0
2021-12-20 20:17:33.839 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108529159639040[0;39m <==      Total: 6
2021-12-20 20:17:33.840 INFO  com.servicess.EbookService                        :48   [32m128108529159639040[0;39m 总行数：6
2021-12-20 20:17:33.840 INFO  com.servicess.EbookService                        :49   [32m128108529159639040[0;39m 总页数：1
2021-12-20 20:17:33.842 INFO  com.aspect.LogAspect                              :92   [32m128108529159639040[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":86,"voteCount":37},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":0,"voteCount":0}],"total":6},"success":true}
2021-12-20 20:17:33.843 INFO  com.aspect.LogAspect                              :93   [32m128108529159639040[0;39m ------------- 结束 耗时：350 ms -------------
2021-12-20 20:17:34.503 INFO  com.aspect.LogAspect                              :54   [32m128108533395886080[0;39m ------------- 开始 -------------
2021-12-20 20:17:34.504 INFO  com.aspect.LogAspect                              :55   [32m128108533395886080[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:34.504 INFO  com.aspect.LogAspect                              :56   [32m128108533395886080[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:34.504 INFO  com.aspect.LogAspect                              :57   [32m128108533395886080[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:34.505 INFO  com.aspect.LogAspect                              :80   [32m128108533395886080[0;39m 请求参数: []
2021-12-20 20:17:34.598 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108533395886080[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:34.600 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108533395886080[0;39m ==> Parameters: 
2021-12-20 20:17:34.722 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:34.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:34.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:34.724 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:34.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:34.725 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:34.726 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:34.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:34.727 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:34.729 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:34.731 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:34.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:34.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:34.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:34.739 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:34.740 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:34.740 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:34.741 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:34.742 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:34.743 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108533395886080[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:34.743 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108533395886080[0;39m <==      Total: 19
2021-12-20 20:17:34.750 INFO  com.aspect.LogAspect                              :92   [32m128108533395886080[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:34.750 INFO  com.aspect.LogAspect                              :93   [32m128108533395886080[0;39m ------------- 结束 耗时：247 ms -------------
2021-12-20 20:17:35.008 INFO  com.job.DocJob                                    :32   [32m128108535514009600[0;39m 更新电子书下的文档数据开始
2021-12-20 20:17:35.122 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108535514009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:17:35.123 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108535514009600[0;39m ==> Parameters: 
2021-12-20 20:17:35.764 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108535514009600[0;39m <==    Updates: 6
2021-12-20 20:17:35.764 INFO  com.job.DocJob                                    :35   [32m128108535514009600[0;39m 更新电子书下的文档数据结束，耗时：756毫秒
2021-12-20 20:17:35.764 INFO  com.job.EbookSnapshotJob                          :32   [32m128108538684903424[0;39m 生成今日电子书快照开始
2021-12-20 20:17:35.861 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108538684903424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:35.861 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108538684903424[0;39m ==> Parameters: 
2021-12-20 20:17:36.032 INFO  com.aspect.LogAspect                              :54   [32m128108539808976896[0;39m ------------- 开始 -------------
2021-12-20 20:17:36.032 INFO  com.aspect.LogAspect                              :55   [32m128108539808976896[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:17:36.032 INFO  com.aspect.LogAspect                              :56   [32m128108539808976896[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:17:36.032 INFO  com.aspect.LogAspect                              :57   [32m128108539808976896[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:36.032 INFO  com.aspect.LogAspect                              :80   [32m128108539808976896[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:36.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108538684903424[0;39m <==    Updates: 0
2021-12-20 20:17:36.107 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108539808976896[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:17:36.107 INFO  com.job.EbookSnapshotJob                          :35   [32m128108538684903424[0;39m 生成今日电子书快照结束，耗时：343毫秒
2021-12-20 20:17:36.107 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108539808976896[0;39m ==> Parameters: 
2021-12-20 20:17:36.199 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108539808976896[0;39m <==    Columns: count(0)
2021-12-20 20:17:36.201 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108539808976896[0;39m <==        Row: 8
2021-12-20 20:17:36.202 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108539808976896[0;39m <==      Total: 1
2021-12-20 20:17:36.203 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108539808976896[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:17:36.204 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108539808976896[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:36.284 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:17:36.285 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:36.285 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:36.286 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:36.286 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:36.287 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:17:36.288 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:36.289 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:36.289 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108539808976896[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:36.290 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108539808976896[0;39m <==      Total: 8
2021-12-20 20:17:36.291 INFO  com.servicess.UserService                         :52   [32m128108539808976896[0;39m 总行数：8
2021-12-20 20:17:36.291 INFO  com.servicess.UserService                         :53   [32m128108539808976896[0;39m 总页数：1
2021-12-20 20:17:36.292 INFO  com.aspect.LogAspect                              :92   [32m128108539808976896[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:17:36.293 INFO  com.aspect.LogAspect                              :93   [32m128108539808976896[0;39m ------------- 结束 耗时：261 ms -------------
2021-12-20 20:17:40.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128108556477140992[0;39m 生成今日电子书快照开始
2021-12-20 20:17:40.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108556477140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:40.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108556477140992[0;39m ==> Parameters: 
2021-12-20 20:17:40.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108556477140992[0;39m <==    Updates: 0
2021-12-20 20:17:40.263 INFO  com.job.EbookSnapshotJob                          :35   [32m128108556477140992[0;39m 生成今日电子书快照结束，耗时：257毫秒
2021-12-20 20:17:40.337 INFO  com.aspect.LogAspect                              :54   [32m128108557865455616[0;39m ------------- 开始 -------------
2021-12-20 20:17:40.337 INFO  com.aspect.LogAspect                              :55   [32m128108557865455616[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:40.337 INFO  com.aspect.LogAspect                              :56   [32m128108557865455616[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:40.337 INFO  com.aspect.LogAspect                              :57   [32m128108557865455616[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:40.338 INFO  com.aspect.LogAspect                              :80   [32m128108557865455616[0;39m 请求参数: []
2021-12-20 20:17:40.410 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108557865455616[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:40.410 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108557865455616[0;39m ==> Parameters: 
2021-12-20 20:17:40.471 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:40.471 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:40.472 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:40.473 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:40.473 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:40.474 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:40.476 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:40.477 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:40.478 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:40.479 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:40.479 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:40.479 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:40.480 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:40.480 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:40.480 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108557865455616[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:40.482 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108557865455616[0;39m <==      Total: 19
2021-12-20 20:17:40.484 INFO  com.aspect.LogAspect                              :92   [32m128108557865455616[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:40.484 INFO  com.aspect.LogAspect                              :93   [32m128108557865455616[0;39m ------------- 结束 耗时：147 ms -------------
2021-12-20 20:17:40.508 INFO  com.aspect.LogAspect                              :54   [32m128108558582681600[0;39m ------------- 开始 -------------
2021-12-20 20:17:40.508 INFO  com.aspect.LogAspect                              :55   [32m128108558582681600[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:17:40.509 INFO  com.aspect.LogAspect                              :56   [32m128108558582681600[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:17:40.509 INFO  com.aspect.LogAspect                              :57   [32m128108558582681600[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:40.510 INFO  com.aspect.LogAspect                              :80   [32m128108558582681600[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:40.588 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108558582681600[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:17:40.589 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108558582681600[0;39m ==> Parameters: 
2021-12-20 20:17:40.681 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108558582681600[0;39m <==    Columns: count(0)
2021-12-20 20:17:40.681 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108558582681600[0;39m <==        Row: 6
2021-12-20 20:17:40.682 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108558582681600[0;39m <==      Total: 1
2021-12-20 20:17:40.683 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108558582681600[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:17:40.684 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108558582681600[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:40.805 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:17:40.806 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:17:40.806 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:17:40.812 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:17:40.812 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:17:40.813 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:17:40.813 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108558582681600[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:17:40.814 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108558582681600[0;39m <==      Total: 6
2021-12-20 20:17:40.814 INFO  com.servicess.EbookService                        :48   [32m128108558582681600[0;39m 总行数：6
2021-12-20 20:17:40.814 INFO  com.servicess.EbookService                        :49   [32m128108558582681600[0;39m 总页数：1
2021-12-20 20:17:40.822 INFO  com.aspect.LogAspect                              :92   [32m128108558582681600[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:17:40.822 INFO  com.aspect.LogAspect                              :93   [32m128108558582681600[0;39m ------------- 结束 耗时：314 ms -------------
2021-12-20 20:17:42.069 INFO  com.aspect.LogAspect                              :54   [32m128108565129990144[0;39m ------------- 开始 -------------
2021-12-20 20:17:42.069 INFO  com.aspect.LogAspect                              :55   [32m128108565129990144[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-20 20:17:42.069 INFO  com.aspect.LogAspect                              :56   [32m128108565129990144[0;39m 类名方法: com.controller.DocController.all
2021-12-20 20:17:42.070 INFO  com.aspect.LogAspect                              :57   [32m128108565129990144[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:42.070 INFO  com.aspect.LogAspect                              :80   [32m128108565129990144[0;39m 请求参数: [1]
2021-12-20 20:17:42.174 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108565129990144[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 20:17:42.175 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108565129990144[0;39m ==> Parameters: 1(Long)
2021-12-20 20:17:42.271 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:17:42.271 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-20 20:17:42.271 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-20 20:17:42.286 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 10, 3
2021-12-20 20:17:42.286 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 18, 5
2021-12-20 20:17:42.286 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 26, 7
2021-12-20 20:17:42.286 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 3, 1, 0, 文档2, 2, 11, 2
2021-12-20 20:17:42.286 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108565129990144[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 15, 3
2021-12-20 20:17:42.286 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108565129990144[0;39m <==      Total: 7
2021-12-20 20:17:42.286 INFO  com.aspect.LogAspect                              :92   [32m128108565129990144[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":14,"voteCount":5},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":18,"voteCount":5},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":26,"voteCount":7},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":11,"voteCount":2},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":15,"voteCount":3}],"success":true}
2021-12-20 20:17:42.302 INFO  com.aspect.LogAspect                              :93   [32m128108565129990144[0;39m ------------- 结束 耗时：233 ms -------------
2021-12-20 20:17:44.511 INFO  com.aspect.LogAspect                              :54   [32m128108575372480512[0;39m ------------- 开始 -------------
2021-12-20 20:17:44.512 INFO  com.aspect.LogAspect                              :55   [32m128108575372480512[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:17:44.512 INFO  com.aspect.LogAspect                              :56   [32m128108575372480512[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:17:44.512 INFO  com.aspect.LogAspect                              :57   [32m128108575372480512[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:44.512 INFO  com.aspect.LogAspect                              :80   [32m128108575372480512[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:17:44.596 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108575372480512[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:17:44.596 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108575372480512[0;39m ==> Parameters: 
2021-12-20 20:17:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128108577490604032[0;39m 生成今日电子书快照开始
2021-12-20 20:17:45.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108577490604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:45.265 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108575372480512[0;39m <==    Columns: count(0)
2021-12-20 20:17:45.265 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108575372480512[0;39m <==        Row: 8
2021-12-20 20:17:45.267 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108575372480512[0;39m <==      Total: 1
2021-12-20 20:17:45.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108577490604032[0;39m ==> Parameters: 
2021-12-20 20:17:45.268 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108575372480512[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:17:45.269 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108575372480512[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:17:45.368 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:17:45.368 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:45.369 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:45.370 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:45.372 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:17:45.373 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:17:45.374 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:45.374 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:45.375 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108575372480512[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:17:45.376 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108575372480512[0;39m <==      Total: 8
2021-12-20 20:17:45.377 INFO  com.servicess.UserService                         :52   [32m128108575372480512[0;39m 总行数：8
2021-12-20 20:17:45.378 INFO  com.servicess.UserService                         :53   [32m128108575372480512[0;39m 总页数：1
2021-12-20 20:17:45.379 INFO  com.aspect.LogAspect                              :92   [32m128108575372480512[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:17:45.379 INFO  com.aspect.LogAspect                              :93   [32m128108575372480512[0;39m ------------- 结束 耗时：868 ms -------------
2021-12-20 20:17:45.447 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108577490604032[0;39m <==    Updates: 0
2021-12-20 20:17:45.448 INFO  com.job.EbookSnapshotJob                          :35   [32m128108577490604032[0;39m 生成今日电子书快照结束，耗时：432毫秒
2021-12-20 20:17:50.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128108598403403776[0;39m 生成今日电子书快照开始
2021-12-20 20:17:50.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108598403403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:50.245 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108598403403776[0;39m ==> Parameters: 
2021-12-20 20:17:50.361 INFO  com.aspect.LogAspect                              :54   [32m128108599909158912[0;39m ------------- 开始 -------------
2021-12-20 20:17:50.362 INFO  com.aspect.LogAspect                              :55   [32m128108599909158912[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:17:50.362 INFO  com.aspect.LogAspect                              :56   [32m128108599909158912[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:17:50.362 INFO  com.aspect.LogAspect                              :57   [32m128108599909158912[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:50.362 INFO  com.aspect.LogAspect                              :80   [32m128108599909158912[0;39m 请求参数: []
2021-12-20 20:17:50.362 INFO  com.aspect.LogAspect                              :54   [32m128108599913353216[0;39m ------------- 开始 -------------
2021-12-20 20:17:50.363 INFO  com.aspect.LogAspect                              :55   [32m128108599913353216[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:17:50.363 INFO  com.aspect.LogAspect                              :56   [32m128108599913353216[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:17:50.363 INFO  com.aspect.LogAspect                              :57   [32m128108599913353216[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:50.363 INFO  com.aspect.LogAspect                              :80   [32m128108599913353216[0;39m 请求参数: []
2021-12-20 20:17:50.364 INFO  com.aspect.LogAspect                              :54   [32m128108599921741824[0;39m ------------- 开始 -------------
2021-12-20 20:17:50.364 INFO  com.aspect.LogAspect                              :55   [32m128108599921741824[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:17:50.365 INFO  com.aspect.LogAspect                              :56   [32m128108599921741824[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:17:50.365 INFO  com.aspect.LogAspect                              :57   [32m128108599921741824[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:17:50.365 INFO  com.aspect.LogAspect                              :80   [32m128108599921741824[0;39m 请求参数: []
2021-12-20 20:17:50.414 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108598403403776[0;39m <==    Updates: 0
2021-12-20 20:17:50.415 INFO  com.job.EbookSnapshotJob                          :35   [32m128108598403403776[0;39m 生成今日电子书快照结束，耗时：413毫秒
2021-12-20 20:17:50.444 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108599913353216[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:50.444 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108599921741824[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:17:50.444 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108599909158912[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:17:50.444 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108599921741824[0;39m ==> Parameters: 
2021-12-20 20:17:50.444 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108599909158912[0;39m ==> Parameters: 
2021-12-20 20:17:50.444 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108599913353216[0;39m ==> Parameters: 
2021-12-20 20:17:50.683 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108599913353216[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:17:50.683 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108599909158912[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:17:50.685 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108599913353216[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:17:50.685 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108599909158912[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:17:50.687 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108599913353216[0;39m <==      Total: 1
2021-12-20 20:17:50.688 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108599909158912[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:17:50.688 INFO  com.aspect.LogAspect                              :92   [32m128108599913353216[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:17:50.688 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108599909158912[0;39m <==      Total: 2
2021-12-20 20:17:50.689 INFO  com.aspect.LogAspect                              :93   [32m128108599913353216[0;39m ------------- 结束 耗时：327 ms -------------
2021-12-20 20:17:50.689 INFO  com.aspect.LogAspect                              :92   [32m128108599909158912[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:17:50.690 INFO  com.aspect.LogAspect                              :93   [32m128108599909158912[0;39m ------------- 结束 耗时：329 ms -------------
2021-12-20 20:17:50.893 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:17:50.893 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:17:50.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:17:50.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:17:50.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:17:50.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:17:50.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:17:50.895 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:17:50.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:17:50.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:17:50.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:17:50.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:17:50.897 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:17:50.897 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:17:50.898 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:17:50.899 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:17:50.900 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:17:50.901 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:17:50.901 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:17:50.902 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108599921741824[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:17:50.902 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108599921741824[0;39m <==      Total: 19
2021-12-20 20:17:50.905 INFO  com.aspect.LogAspect                              :92   [32m128108599921741824[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:17:50.906 INFO  com.aspect.LogAspect                              :93   [32m128108599921741824[0;39m ------------- 结束 耗时：542 ms -------------
2021-12-20 20:17:55.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128108619400089600[0;39m 生成今日电子书快照开始
2021-12-20 20:17:55.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108619400089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:17:55.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108619400089600[0;39m ==> Parameters: 
2021-12-20 20:17:55.739 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108619400089600[0;39m <==    Updates: 0
2021-12-20 20:17:55.739 INFO  com.job.EbookSnapshotJob                          :35   [32m128108619400089600[0;39m 生成今日电子书快照结束，耗时：731毫秒
2021-12-20 20:18:00.021 INFO  com.job.EbookSnapshotJob                          :32   [32m128108640426135552[0;39m 生成今日电子书快照开始
2021-12-20 20:18:00.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108640426135552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:00.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108640426135552[0;39m ==> Parameters: 
2021-12-20 20:18:00.417 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108640426135552[0;39m <==    Updates: 0
2021-12-20 20:18:00.417 INFO  com.job.EbookSnapshotJob                          :35   [32m128108640426135552[0;39m 生成今日电子书快照结束，耗时：396毫秒
2021-12-20 20:18:05.010 INFO  com.job.DocJob                                    :32   [32m128108661351518208[0;39m 更新电子书下的文档数据开始
2021-12-20 20:18:05.142 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108661351518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:18:05.142 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108661351518208[0;39m ==> Parameters: 
2021-12-20 20:18:05.359 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108661351518208[0;39m <==    Updates: 6
2021-12-20 20:18:05.359 INFO  com.job.DocJob                                    :35   [32m128108661351518208[0;39m 更新电子书下的文档数据结束，耗时：349毫秒
2021-12-20 20:18:05.360 INFO  com.job.EbookSnapshotJob                          :32   [32m128108662819524608[0;39m 生成今日电子书快照开始
2021-12-20 20:18:05.360 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108662819524608[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:05.361 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108662819524608[0;39m ==> Parameters: 
2021-12-20 20:18:05.550 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108662819524608[0;39m <==    Updates: 0
2021-12-20 20:18:05.550 INFO  com.job.EbookSnapshotJob                          :35   [32m128108662819524608[0;39m 生成今日电子书快照结束，耗时：190毫秒
2021-12-20 20:18:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128108682348204032[0;39m 生成今日电子书快照开始
2021-12-20 20:18:10.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108682348204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:10.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108682348204032[0;39m ==> Parameters: 
2021-12-20 20:18:10.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108682348204032[0;39m <==    Updates: 0
2021-12-20 20:18:10.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128108682348204032[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 20:18:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128108703315529728[0;39m 生成今日电子书快照开始
2021-12-20 20:18:15.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108703315529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:15.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108703315529728[0;39m ==> Parameters: 
2021-12-20 20:18:15.427 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108703315529728[0;39m <==    Updates: 0
2021-12-20 20:18:15.427 INFO  com.job.EbookSnapshotJob                          :35   [32m128108703315529728[0;39m 生成今日电子书快照结束，耗时：412毫秒
2021-12-20 20:18:20.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128108724261883904[0;39m 生成今日电子书快照开始
2021-12-20 20:18:20.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108724261883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:20.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108724261883904[0;39m ==> Parameters: 
2021-12-20 20:18:20.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108724261883904[0;39m <==    Updates: 0
2021-12-20 20:18:20.264 INFO  com.job.EbookSnapshotJob                          :35   [32m128108724261883904[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 20:18:25.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128108745296318464[0;39m 生成今日电子书快照开始
2021-12-20 20:18:25.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108745296318464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:25.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108745296318464[0;39m ==> Parameters: 
2021-12-20 20:18:25.325 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108745296318464[0;39m <==    Updates: 0
2021-12-20 20:18:25.325 INFO  com.job.EbookSnapshotJob                          :35   [32m128108745296318464[0;39m 生成今日电子书快照结束，耗时：301毫秒
2021-12-20 20:18:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m128108766209118208[0;39m 生成今日电子书快照开始
2021-12-20 20:18:30.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108766209118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:30.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108766209118208[0;39m ==> Parameters: 
2021-12-20 20:18:30.572 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108766209118208[0;39m <==    Updates: 0
2021-12-20 20:18:30.572 INFO  com.job.EbookSnapshotJob                          :35   [32m128108766209118208[0;39m 生成今日电子书快照结束，耗时：562毫秒
2021-12-20 20:18:32.697 INFO  com.aspect.LogAspect                              :54   [32m128108777479213056[0;39m ------------- 开始 -------------
2021-12-20 20:18:32.698 INFO  com.aspect.LogAspect                              :55   [32m128108777479213056[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:18:32.698 INFO  com.aspect.LogAspect                              :56   [32m128108777479213056[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:18:32.698 INFO  com.aspect.LogAspect                              :57   [32m128108777479213056[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:32.698 INFO  com.aspect.LogAspect                              :80   [32m128108777479213056[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:33.335 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108777479213056[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:18:33.336 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108777479213056[0;39m ==> Parameters: 
2021-12-20 20:18:33.461 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108777479213056[0;39m <==    Columns: count(0)
2021-12-20 20:18:33.463 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108777479213056[0;39m <==        Row: 8
2021-12-20 20:18:33.475 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108777479213056[0;39m <==      Total: 1
2021-12-20 20:18:33.477 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108777479213056[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:18:33.479 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108777479213056[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:33.559 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:18:33.559 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:33.559 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:33.562 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:33.563 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:33.563 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:18:33.563 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:33.564 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:33.564 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108777479213056[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:33.564 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108777479213056[0;39m <==      Total: 8
2021-12-20 20:18:33.565 INFO  com.servicess.UserService                         :52   [32m128108777479213056[0;39m 总行数：8
2021-12-20 20:18:33.565 INFO  com.servicess.UserService                         :53   [32m128108777479213056[0;39m 总页数：1
2021-12-20 20:18:33.565 INFO  com.aspect.LogAspect                              :92   [32m128108777479213056[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:18:33.566 INFO  com.aspect.LogAspect                              :93   [32m128108777479213056[0;39m ------------- 结束 耗时：869 ms -------------
2021-12-20 20:18:35.001 INFO  com.job.DocJob                                    :32   [32m128108787142889472[0;39m 更新电子书下的文档数据开始
2021-12-20 20:18:35.072 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108787142889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:18:35.072 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108787142889472[0;39m ==> Parameters: 
2021-12-20 20:18:35.081 INFO  com.aspect.LogAspect                              :54   [32m128108787478433793[0;39m ------------- 开始 -------------
2021-12-20 20:18:35.081 INFO  com.aspect.LogAspect                              :54   [32m128108787478433792[0;39m ------------- 开始 -------------
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :55   [32m128108787478433792[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :55   [32m128108787478433793[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :56   [32m128108787478433792[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :56   [32m128108787478433793[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :57   [32m128108787478433792[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :57   [32m128108787478433793[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :54   [32m128108787482628096[0;39m ------------- 开始 -------------
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :80   [32m128108787478433792[0;39m 请求参数: []
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :55   [32m128108787482628096[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :80   [32m128108787478433793[0;39m 请求参数: []
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :56   [32m128108787482628096[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:35.082 INFO  com.aspect.LogAspect                              :57   [32m128108787482628096[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:35.083 INFO  com.aspect.LogAspect                              :80   [32m128108787482628096[0;39m 请求参数: []
2021-12-20 20:18:35.171 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108787478433792[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:18:35.171 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108787482628096[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:35.172 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108787478433793[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:18:35.172 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108787482628096[0;39m ==> Parameters: 
2021-12-20 20:18:35.172 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108787478433792[0;39m ==> Parameters: 
2021-12-20 20:18:35.172 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108787478433793[0;39m ==> Parameters: 
2021-12-20 20:18:35.273 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108787142889472[0;39m <==    Updates: 6
2021-12-20 20:18:35.274 INFO  com.job.DocJob                                    :35   [32m128108787142889472[0;39m 更新电子书下的文档数据结束，耗时：273毫秒
2021-12-20 20:18:35.273 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108787478433793[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:18:35.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:35.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:35.274 INFO  com.job.EbookSnapshotJob                          :32   [32m128108788287934464[0;39m 生成今日电子书快照开始
2021-12-20 20:18:35.275 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108787478433792[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:18:35.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:35.275 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108787478433793[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:18:35.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:35.276 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:35.277 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128108787478433793[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:18:35.277 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:35.278 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128108787478433792[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:18:35.278 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108788287934464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:35.279 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128108787478433793[0;39m <==      Total: 2
2021-12-20 20:18:35.279 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128108787478433792[0;39m <==      Total: 1
2021-12-20 20:18:35.279 INFO  com.aspect.LogAspect                              :92   [32m128108787478433793[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:18:35.280 INFO  com.aspect.LogAspect                              :93   [32m128108787478433793[0;39m ------------- 结束 耗时：199 ms -------------
2021-12-20 20:18:35.280 INFO  com.aspect.LogAspect                              :92   [32m128108787478433792[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:18:35.280 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108788287934464[0;39m ==> Parameters: 
2021-12-20 20:18:35.277 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:35.280 INFO  com.aspect.LogAspect                              :93   [32m128108787478433792[0;39m ------------- 结束 耗时：199 ms -------------
2021-12-20 20:18:35.281 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:35.282 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:35.282 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:35.283 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:35.284 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:35.284 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:35.285 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:35.285 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:35.286 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:35.286 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:35.287 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:35.287 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:35.288 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108787482628096[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:35.288 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108787482628096[0;39m <==      Total: 19
2021-12-20 20:18:35.289 INFO  com.aspect.LogAspect                              :92   [32m128108787482628096[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:35.289 INFO  com.aspect.LogAspect                              :93   [32m128108787482628096[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 20:18:35.535 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108788287934464[0;39m <==    Updates: 0
2021-12-20 20:18:35.535 INFO  com.job.EbookSnapshotJob                          :35   [32m128108788287934464[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 20:18:37.977 INFO  com.aspect.LogAspect                              :54   [32m128108799625138176[0;39m ------------- 开始 -------------
2021-12-20 20:18:37.978 INFO  com.aspect.LogAspect                              :55   [32m128108799625138176[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:18:37.978 INFO  com.aspect.LogAspect                              :56   [32m128108799625138176[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:18:37.978 INFO  com.aspect.LogAspect                              :57   [32m128108799625138176[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:37.978 INFO  com.aspect.LogAspect                              :80   [32m128108799625138176[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:38.065 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108799625138176[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:18:38.066 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108799625138176[0;39m ==> Parameters: 
2021-12-20 20:18:38.134 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108799625138176[0;39m <==    Columns: count(0)
2021-12-20 20:18:38.135 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108799625138176[0;39m <==        Row: 8
2021-12-20 20:18:38.136 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108799625138176[0;39m <==      Total: 1
2021-12-20 20:18:38.137 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108799625138176[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:18:38.137 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108799625138176[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:38.236 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:18:38.237 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:38.238 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:38.238 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:38.239 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:38.242 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:18:38.244 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:38.245 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:38.247 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108799625138176[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:38.248 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108799625138176[0;39m <==      Total: 8
2021-12-20 20:18:38.250 INFO  com.servicess.UserService                         :52   [32m128108799625138176[0;39m 总行数：8
2021-12-20 20:18:38.251 INFO  com.servicess.UserService                         :53   [32m128108799625138176[0;39m 总页数：1
2021-12-20 20:18:38.253 INFO  com.aspect.LogAspect                              :92   [32m128108799625138176[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:18:38.254 INFO  com.aspect.LogAspect                              :93   [32m128108799625138176[0;39m ------------- 结束 耗时：277 ms -------------
2021-12-20 20:18:38.853 INFO  com.aspect.LogAspect                              :54   [32m128108803299348480[0;39m ------------- 开始 -------------
2021-12-20 20:18:38.853 INFO  com.aspect.LogAspect                              :55   [32m128108803299348480[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:38.854 INFO  com.aspect.LogAspect                              :56   [32m128108803299348480[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:38.854 INFO  com.aspect.LogAspect                              :57   [32m128108803299348480[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:38.854 INFO  com.aspect.LogAspect                              :80   [32m128108803299348480[0;39m 请求参数: []
2021-12-20 20:18:38.978 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108803299348480[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:38.978 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108803299348480[0;39m ==> Parameters: 
2021-12-20 20:18:39.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:39.080 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:39.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:39.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:39.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:39.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:39.081 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:39.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:39.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:39.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:39.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:39.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:39.082 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:39.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:39.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:39.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:39.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:39.084 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:39.084 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:39.084 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108803299348480[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:39.085 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108803299348480[0;39m <==      Total: 19
2021-12-20 20:18:39.086 INFO  com.aspect.LogAspect                              :92   [32m128108803299348480[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:39.086 INFO  com.aspect.LogAspect                              :93   [32m128108803299348480[0;39m ------------- 结束 耗时：233 ms -------------
2021-12-20 20:18:39.101 INFO  com.aspect.LogAspect                              :54   [32m128108804339535872[0;39m ------------- 开始 -------------
2021-12-20 20:18:39.101 INFO  com.aspect.LogAspect                              :55   [32m128108804339535872[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:18:39.101 INFO  com.aspect.LogAspect                              :56   [32m128108804339535872[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:18:39.101 INFO  com.aspect.LogAspect                              :57   [32m128108804339535872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:39.101 INFO  com.aspect.LogAspect                              :80   [32m128108804339535872[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:39.215 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108804339535872[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:18:39.216 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108804339535872[0;39m ==> Parameters: 
2021-12-20 20:18:39.316 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108804339535872[0;39m <==    Columns: count(0)
2021-12-20 20:18:39.316 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108804339535872[0;39m <==        Row: 6
2021-12-20 20:18:39.317 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108804339535872[0;39m <==      Total: 1
2021-12-20 20:18:39.318 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108804339535872[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:18:39.319 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108804339535872[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:39.401 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:18:39.402 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:18:39.403 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:18:39.404 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:18:39.404 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:39.405 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:18:39.406 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108804339535872[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:39.408 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108804339535872[0;39m <==      Total: 6
2021-12-20 20:18:39.410 INFO  com.servicess.EbookService                        :48   [32m128108804339535872[0;39m 总行数：6
2021-12-20 20:18:39.410 INFO  com.servicess.EbookService                        :49   [32m128108804339535872[0;39m 总页数：1
2021-12-20 20:18:39.412 INFO  com.aspect.LogAspect                              :92   [32m128108804339535872[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:18:39.413 INFO  com.aspect.LogAspect                              :93   [32m128108804339535872[0;39m ------------- 结束 耗时：312 ms -------------
2021-12-20 20:18:39.521 INFO  com.aspect.LogAspect                              :54   [32m128108806096949248[0;39m ------------- 开始 -------------
2021-12-20 20:18:39.521 INFO  com.aspect.LogAspect                              :55   [32m128108806096949248[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:39.521 INFO  com.aspect.LogAspect                              :56   [32m128108806096949248[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:39.521 INFO  com.aspect.LogAspect                              :57   [32m128108806096949248[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:39.521 INFO  com.aspect.LogAspect                              :80   [32m128108806096949248[0;39m 请求参数: []
2021-12-20 20:18:39.622 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108806096949248[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:39.625 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108806096949248[0;39m ==> Parameters: 
2021-12-20 20:18:39.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:39.731 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:39.732 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:39.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:39.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:39.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:39.737 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:39.738 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:39.743 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:39.746 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:39.747 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:39.748 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:39.749 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:39.750 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:39.751 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:39.752 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:39.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:39.753 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:39.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:39.754 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108806096949248[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:39.755 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108806096949248[0;39m <==      Total: 19
2021-12-20 20:18:39.765 INFO  com.aspect.LogAspect                              :92   [32m128108806096949248[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:39.766 INFO  com.aspect.LogAspect                              :93   [32m128108806096949248[0;39m ------------- 结束 耗时：246 ms -------------
2021-12-20 20:18:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128108808156352512[0;39m 生成今日电子书快照开始
2021-12-20 20:18:40.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108808156352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:40.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108808156352512[0;39m ==> Parameters: 
2021-12-20 20:18:40.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108808156352512[0;39m <==    Updates: 0
2021-12-20 20:18:40.277 INFO  com.job.EbookSnapshotJob                          :35   [32m128108808156352512[0;39m 生成今日电子书快照结束，耗时：266毫秒
2021-12-20 20:18:40.333 INFO  com.aspect.LogAspect                              :54   [32m128108809506918400[0;39m ------------- 开始 -------------
2021-12-20 20:18:40.333 INFO  com.aspect.LogAspect                              :55   [32m128108809506918400[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:40.333 INFO  com.aspect.LogAspect                              :56   [32m128108809506918400[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:40.333 INFO  com.aspect.LogAspect                              :57   [32m128108809506918400[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:40.333 INFO  com.aspect.LogAspect                              :80   [32m128108809506918400[0;39m 请求参数: []
2021-12-20 20:18:40.406 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108809506918400[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:40.407 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108809506918400[0;39m ==> Parameters: 
2021-12-20 20:18:40.479 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:40.479 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:40.480 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:40.480 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:40.481 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:40.482 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:40.483 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:40.483 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:40.483 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:40.483 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:40.483 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108809506918400[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:40.483 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108809506918400[0;39m <==      Total: 19
2021-12-20 20:18:40.485 INFO  com.aspect.LogAspect                              :92   [32m128108809506918400[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:40.485 INFO  com.aspect.LogAspect                              :93   [32m128108809506918400[0;39m ------------- 结束 耗时：152 ms -------------
2021-12-20 20:18:40.502 INFO  com.aspect.LogAspect                              :54   [32m128108810215755776[0;39m ------------- 开始 -------------
2021-12-20 20:18:40.502 INFO  com.aspect.LogAspect                              :55   [32m128108810215755776[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:18:40.502 INFO  com.aspect.LogAspect                              :56   [32m128108810215755776[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:18:40.502 INFO  com.aspect.LogAspect                              :57   [32m128108810215755776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:40.502 INFO  com.aspect.LogAspect                              :80   [32m128108810215755776[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:40.571 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108810215755776[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:18:40.571 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108810215755776[0;39m ==> Parameters: 
2021-12-20 20:18:40.675 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108810215755776[0;39m <==    Columns: count(0)
2021-12-20 20:18:40.676 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108810215755776[0;39m <==        Row: 6
2021-12-20 20:18:40.677 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108810215755776[0;39m <==      Total: 1
2021-12-20 20:18:40.679 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108810215755776[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:18:40.680 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108810215755776[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:40.808 INFO  com.aspect.LogAspect                              :54   [32m128108811499212800[0;39m ------------- 开始 -------------
2021-12-20 20:18:40.808 INFO  com.aspect.LogAspect                              :55   [32m128108811499212800[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:40.808 INFO  com.aspect.LogAspect                              :56   [32m128108811499212800[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:40.808 INFO  com.aspect.LogAspect                              :57   [32m128108811499212800[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:40.808 INFO  com.aspect.LogAspect                              :80   [32m128108811499212800[0;39m 请求参数: []
2021-12-20 20:18:40.809 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108811499212800[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:40.809 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108811499212800[0;39m ==> Parameters: 
2021-12-20 20:18:40.861 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:18:40.861 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:18:40.862 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:18:40.862 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:18:40.862 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:40.862 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:18:40.862 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108810215755776[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:40.862 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108810215755776[0;39m <==      Total: 6
2021-12-20 20:18:40.863 INFO  com.servicess.EbookService                        :48   [32m128108810215755776[0;39m 总行数：6
2021-12-20 20:18:40.863 INFO  com.servicess.EbookService                        :49   [32m128108810215755776[0;39m 总页数：1
2021-12-20 20:18:40.863 INFO  com.aspect.LogAspect                              :92   [32m128108810215755776[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:18:40.863 INFO  com.aspect.LogAspect                              :93   [32m128108810215755776[0;39m ------------- 结束 耗时：361 ms -------------
2021-12-20 20:18:40.950 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:40.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:40.951 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:40.952 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:40.953 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:40.954 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:40.954 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:40.956 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:40.957 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:40.958 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:40.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:40.959 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:40.960 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:40.961 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:40.962 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:40.962 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:40.963 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:40.963 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:40.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:40.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108811499212800[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:40.965 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108811499212800[0;39m <==      Total: 19
2021-12-20 20:18:40.967 INFO  com.aspect.LogAspect                              :92   [32m128108811499212800[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:40.967 INFO  com.aspect.LogAspect                              :93   [32m128108811499212800[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-20 20:18:41.716 INFO  com.aspect.LogAspect                              :54   [32m128108815307640832[0;39m ------------- 开始 -------------
2021-12-20 20:18:41.717 INFO  com.aspect.LogAspect                              :55   [32m128108815307640832[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:41.717 INFO  com.aspect.LogAspect                              :56   [32m128108815307640832[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:41.717 INFO  com.aspect.LogAspect                              :57   [32m128108815307640832[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:41.717 INFO  com.aspect.LogAspect                              :80   [32m128108815307640832[0;39m 请求参数: []
2021-12-20 20:18:41.827 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108815307640832[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:41.827 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108815307640832[0;39m ==> Parameters: 
2021-12-20 20:18:41.932 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:41.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:41.933 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:41.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:41.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:41.934 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:41.935 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:41.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:41.936 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:41.937 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:41.938 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:41.940 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:41.940 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:41.941 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:41.943 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:41.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:41.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:41.944 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:41.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:41.945 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108815307640832[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:41.945 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108815307640832[0;39m <==      Total: 19
2021-12-20 20:18:41.947 INFO  com.aspect.LogAspect                              :92   [32m128108815307640832[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:41.947 INFO  com.aspect.LogAspect                              :93   [32m128108815307640832[0;39m ------------- 结束 耗时：231 ms -------------
2021-12-20 20:18:41.974 INFO  com.aspect.LogAspect                              :54   [32m128108816389771264[0;39m ------------- 开始 -------------
2021-12-20 20:18:41.975 INFO  com.aspect.LogAspect                              :55   [32m128108816389771264[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:18:41.975 INFO  com.aspect.LogAspect                              :56   [32m128108816389771264[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:18:41.976 INFO  com.aspect.LogAspect                              :57   [32m128108816389771264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:41.976 INFO  com.aspect.LogAspect                              :80   [32m128108816389771264[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:42.065 INFO  com.aspect.LogAspect                              :54   [32m128108816771452928[0;39m ------------- 开始 -------------
2021-12-20 20:18:42.066 INFO  com.aspect.LogAspect                              :55   [32m128108816771452928[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:18:42.066 INFO  com.aspect.LogAspect                              :56   [32m128108816771452928[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:18:42.066 INFO  com.aspect.LogAspect                              :57   [32m128108816771452928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:42.066 INFO  com.aspect.LogAspect                              :80   [32m128108816771452928[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:42.105 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108816389771264[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:18:42.105 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108816389771264[0;39m ==> Parameters: 
2021-12-20 20:18:42.167 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108816771452928[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:18:42.168 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108816389771264[0;39m <==    Columns: count(0)
2021-12-20 20:18:42.168 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108816771452928[0;39m ==> Parameters: 
2021-12-20 20:18:42.169 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108816389771264[0;39m <==        Row: 6
2021-12-20 20:18:42.169 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108816389771264[0;39m <==      Total: 1
2021-12-20 20:18:42.169 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108816389771264[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:18:42.172 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108816389771264[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:42.237 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108816771452928[0;39m <==    Columns: count(0)
2021-12-20 20:18:42.238 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128108816771452928[0;39m <==        Row: 8
2021-12-20 20:18:42.239 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128108816771452928[0;39m <==      Total: 1
2021-12-20 20:18:42.241 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108816771452928[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:18:42.242 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108816771452928[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:42.270 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:18:42.272 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:18:42.273 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:18:42.274 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:18:42.275 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:42.275 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:18:42.276 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108816389771264[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:42.276 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108816389771264[0;39m <==      Total: 6
2021-12-20 20:18:42.277 INFO  com.servicess.EbookService                        :48   [32m128108816389771264[0;39m 总行数：6
2021-12-20 20:18:42.277 INFO  com.servicess.EbookService                        :49   [32m128108816389771264[0;39m 总页数：1
2021-12-20 20:18:42.279 INFO  com.aspect.LogAspect                              :92   [32m128108816389771264[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:18:42.279 INFO  com.aspect.LogAspect                              :93   [32m128108816389771264[0;39m ------------- 结束 耗时：305 ms -------------
2021-12-20 20:18:42.351 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:18:42.351 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:42.351 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:42.352 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:42.352 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:18:42.352 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:18:42.352 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:42.352 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:42.352 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128108816771452928[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:18:42.352 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128108816771452928[0;39m <==      Total: 8
2021-12-20 20:18:42.356 INFO  com.servicess.UserService                         :52   [32m128108816771452928[0;39m 总行数：8
2021-12-20 20:18:42.357 INFO  com.servicess.UserService                         :53   [32m128108816771452928[0;39m 总页数：1
2021-12-20 20:18:42.358 INFO  com.aspect.LogAspect                              :92   [32m128108816771452928[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:18:42.358 INFO  com.aspect.LogAspect                              :93   [32m128108816771452928[0;39m ------------- 结束 耗时：293 ms -------------
2021-12-20 20:18:45.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128108829115289600[0;39m 生成今日电子书快照开始
2021-12-20 20:18:45.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108829115289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:45.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108829115289600[0;39m ==> Parameters: 
2021-12-20 20:18:45.313 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108829115289600[0;39m <==    Updates: 0
2021-12-20 20:18:45.313 INFO  com.job.EbookSnapshotJob                          :35   [32m128108829115289600[0;39m 生成今日电子书快照结束，耗时：305毫秒
2021-12-20 20:18:46.385 INFO  com.aspect.LogAspect                              :54   [32m128108834890846208[0;39m ------------- 开始 -------------
2021-12-20 20:18:46.385 INFO  com.aspect.LogAspect                              :55   [32m128108834890846208[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:46.385 INFO  com.aspect.LogAspect                              :56   [32m128108834890846208[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:46.385 INFO  com.aspect.LogAspect                              :57   [32m128108834890846208[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:46.386 INFO  com.aspect.LogAspect                              :80   [32m128108834890846208[0;39m 请求参数: []
2021-12-20 20:18:46.467 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108834890846208[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:46.468 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108834890846208[0;39m ==> Parameters: 
2021-12-20 20:18:46.561 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:46.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:46.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:46.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:46.562 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:46.563 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:46.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:46.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:46.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:46.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:46.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:46.564 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108834890846208[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:46.565 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108834890846208[0;39m <==      Total: 19
2021-12-20 20:18:46.565 INFO  com.aspect.LogAspect                              :92   [32m128108834890846208[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:46.565 INFO  com.aspect.LogAspect                              :93   [32m128108834890846208[0;39m ------------- 结束 耗时：180 ms -------------
2021-12-20 20:18:46.580 INFO  com.aspect.LogAspect                              :54   [32m128108835708735488[0;39m ------------- 开始 -------------
2021-12-20 20:18:46.581 INFO  com.aspect.LogAspect                              :55   [32m128108835708735488[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:18:46.581 INFO  com.aspect.LogAspect                              :56   [32m128108835708735488[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:18:46.581 INFO  com.aspect.LogAspect                              :57   [32m128108835708735488[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:46.581 INFO  com.aspect.LogAspect                              :80   [32m128108835708735488[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:46.659 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108835708735488[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:18:46.659 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108835708735488[0;39m ==> Parameters: 
2021-12-20 20:18:46.755 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108835708735488[0;39m <==    Columns: count(0)
2021-12-20 20:18:46.756 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108835708735488[0;39m <==        Row: 6
2021-12-20 20:18:46.756 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108835708735488[0;39m <==      Total: 1
2021-12-20 20:18:46.757 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108835708735488[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:18:46.758 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108835708735488[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:46.918 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:18:46.919 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:18:46.919 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:18:46.920 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:18:46.920 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:46.920 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:18:46.921 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108835708735488[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:46.921 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108835708735488[0;39m <==      Total: 6
2021-12-20 20:18:46.922 INFO  com.servicess.EbookService                        :48   [32m128108835708735488[0;39m 总行数：6
2021-12-20 20:18:46.922 INFO  com.servicess.EbookService                        :49   [32m128108835708735488[0;39m 总页数：1
2021-12-20 20:18:46.924 INFO  com.aspect.LogAspect                              :92   [32m128108835708735488[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:18:46.924 INFO  com.aspect.LogAspect                              :93   [32m128108835708735488[0;39m ------------- 结束 耗时：344 ms -------------
2021-12-20 20:18:48.959 INFO  com.aspect.LogAspect                              :54   [32m128108845686984704[0;39m ------------- 开始 -------------
2021-12-20 20:18:48.959 INFO  com.aspect.LogAspect                              :55   [32m128108845686984704[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-20 20:18:48.959 INFO  com.aspect.LogAspect                              :56   [32m128108845686984704[0;39m 类名方法: com.controller.DocController.all
2021-12-20 20:18:48.959 INFO  com.aspect.LogAspect                              :57   [32m128108845686984704[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:48.959 INFO  com.aspect.LogAspect                              :80   [32m128108845686984704[0;39m 请求参数: [1]
2021-12-20 20:18:49.054 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108845686984704[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 20:18:49.055 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108845686984704[0;39m ==> Parameters: 1(Long)
2021-12-20 20:18:49.143 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:18:49.144 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-20 20:18:49.145 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-20 20:18:49.146 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 10, 3
2021-12-20 20:18:49.146 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 18, 5
2021-12-20 20:18:49.148 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 26, 7
2021-12-20 20:18:49.149 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 3, 1, 0, 文档2, 2, 11, 2
2021-12-20 20:18:49.149 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108845686984704[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 15, 3
2021-12-20 20:18:49.150 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108845686984704[0;39m <==      Total: 7
2021-12-20 20:18:49.153 INFO  com.aspect.LogAspect                              :92   [32m128108845686984704[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":14,"voteCount":5},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":18,"voteCount":5},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":26,"voteCount":7},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":11,"voteCount":2},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":15,"voteCount":3}],"success":true}
2021-12-20 20:18:49.154 INFO  com.aspect.LogAspect                              :93   [32m128108845686984704[0;39m ------------- 结束 耗时：195 ms -------------
2021-12-20 20:18:50.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128108850116169728[0;39m 生成今日电子书快照开始
2021-12-20 20:18:50.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108850116169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:50.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108850116169728[0;39m ==> Parameters: 
2021-12-20 20:18:50.381 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108850116169728[0;39m <==    Updates: 0
2021-12-20 20:18:50.381 INFO  com.job.EbookSnapshotJob                          :35   [32m128108850116169728[0;39m 生成今日电子书快照结束，耗时：366毫秒
2021-12-20 20:18:52.259 INFO  com.aspect.LogAspect                              :54   [32m128108859528187904[0;39m ------------- 开始 -------------
2021-12-20 20:18:52.259 INFO  com.aspect.LogAspect                              :55   [32m128108859528187904[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:52.259 INFO  com.aspect.LogAspect                              :56   [32m128108859528187904[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:52.260 INFO  com.aspect.LogAspect                              :57   [32m128108859528187904[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:52.260 INFO  com.aspect.LogAspect                              :80   [32m128108859528187904[0;39m 请求参数: []
2021-12-20 20:18:52.413 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108859528187904[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:52.414 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108859528187904[0;39m ==> Parameters: 
2021-12-20 20:18:52.513 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:52.514 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:52.516 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:52.516 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:52.517 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:52.518 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:52.518 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:52.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:52.519 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:52.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:52.520 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:52.521 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:52.521 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:52.522 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:52.522 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:52.523 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:52.523 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:52.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:52.524 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:52.525 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108859528187904[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:52.525 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108859528187904[0;39m <==      Total: 19
2021-12-20 20:18:52.529 INFO  com.aspect.LogAspect                              :92   [32m128108859528187904[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:52.530 INFO  com.aspect.LogAspect                              :93   [32m128108859528187904[0;39m ------------- 结束 耗时：271 ms -------------
2021-12-20 20:18:52.551 INFO  com.aspect.LogAspect                              :54   [32m128108860752924672[0;39m ------------- 开始 -------------
2021-12-20 20:18:52.551 INFO  com.aspect.LogAspect                              :55   [32m128108860752924672[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:18:52.551 INFO  com.aspect.LogAspect                              :56   [32m128108860752924672[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:18:52.551 INFO  com.aspect.LogAspect                              :57   [32m128108860752924672[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:52.551 INFO  com.aspect.LogAspect                              :80   [32m128108860752924672[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:52.675 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108860752924672[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:18:52.677 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108860752924672[0;39m ==> Parameters: 
2021-12-20 20:18:52.819 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108860752924672[0;39m <==    Columns: count(0)
2021-12-20 20:18:52.820 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108860752924672[0;39m <==        Row: 6
2021-12-20 20:18:52.821 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108860752924672[0;39m <==      Total: 1
2021-12-20 20:18:52.822 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108860752924672[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:18:52.823 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108860752924672[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:52.978 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:18:52.979 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:18:52.981 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:18:52.982 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:18:52.983 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:52.984 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:18:52.985 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108860752924672[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:52.985 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108860752924672[0;39m <==      Total: 6
2021-12-20 20:18:52.986 INFO  com.servicess.EbookService                        :48   [32m128108860752924672[0;39m 总行数：6
2021-12-20 20:18:52.986 INFO  com.servicess.EbookService                        :49   [32m128108860752924672[0;39m 总页数：1
2021-12-20 20:18:52.988 INFO  com.aspect.LogAspect                              :92   [32m128108860752924672[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:18:52.989 INFO  com.aspect.LogAspect                              :93   [32m128108860752924672[0;39m ------------- 结束 耗时：438 ms -------------
2021-12-20 20:18:55.020 INFO  com.job.EbookSnapshotJob                          :32   [32m128108871108661248[0;39m 生成今日电子书快照开始
2021-12-20 20:18:55.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108871108661248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:18:55.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108871108661248[0;39m ==> Parameters: 
2021-12-20 20:18:55.333 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108871108661248[0;39m <==    Updates: 0
2021-12-20 20:18:55.333 INFO  com.job.EbookSnapshotJob                          :35   [32m128108871108661248[0;39m 生成今日电子书快照结束，耗时：312毫秒
2021-12-20 20:18:56.659 INFO  com.aspect.LogAspect                              :54   [32m128108877983125504[0;39m ------------- 开始 -------------
2021-12-20 20:18:56.660 INFO  com.aspect.LogAspect                              :55   [32m128108877983125504[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:56.660 INFO  com.aspect.LogAspect                              :56   [32m128108877983125504[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:56.660 INFO  com.aspect.LogAspect                              :57   [32m128108877983125504[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:56.660 INFO  com.aspect.LogAspect                              :80   [32m128108877983125504[0;39m 请求参数: []
2021-12-20 20:18:56.771 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108877983125504[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:56.772 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108877983125504[0;39m ==> Parameters: 
2021-12-20 20:18:56.893 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:56.894 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:56.896 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:56.898 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:56.899 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:56.900 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:56.900 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:56.901 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:56.902 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:56.902 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:56.903 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:56.904 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:56.905 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:56.905 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:56.906 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:56.906 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:56.908 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:56.910 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:56.911 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:56.913 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108877983125504[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:56.914 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108877983125504[0;39m <==      Total: 19
2021-12-20 20:18:56.918 INFO  com.aspect.LogAspect                              :92   [32m128108877983125504[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:56.919 INFO  com.aspect.LogAspect                              :93   [32m128108877983125504[0;39m ------------- 结束 耗时：260 ms -------------
2021-12-20 20:18:57.230 INFO  com.aspect.LogAspect                              :54   [32m128108880378073088[0;39m ------------- 开始 -------------
2021-12-20 20:18:57.230 INFO  com.aspect.LogAspect                              :55   [32m128108880378073088[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:18:57.230 INFO  com.aspect.LogAspect                              :56   [32m128108880378073088[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:18:57.230 INFO  com.aspect.LogAspect                              :57   [32m128108880378073088[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:57.231 INFO  com.aspect.LogAspect                              :80   [32m128108880378073088[0;39m 请求参数: []
2021-12-20 20:18:57.369 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108880378073088[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:18:57.370 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108880378073088[0;39m ==> Parameters: 
2021-12-20 20:18:57.454 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:18:57.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:18:57.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:18:57.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:18:57.460 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:18:57.460 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:18:57.460 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:18:57.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:18:57.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:18:57.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:18:57.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:18:57.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:18:57.462 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:18:57.462 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:18:57.462 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:18:57.462 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:18:57.462 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:18:57.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:18:57.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:18:57.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108880378073088[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:18:57.463 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108880378073088[0;39m <==      Total: 19
2021-12-20 20:18:57.464 INFO  com.aspect.LogAspect                              :92   [32m128108880378073088[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:18:57.465 INFO  com.aspect.LogAspect                              :93   [32m128108880378073088[0;39m ------------- 结束 耗时：235 ms -------------
2021-12-20 20:18:57.502 INFO  com.aspect.LogAspect                              :54   [32m128108881518923776[0;39m ------------- 开始 -------------
2021-12-20 20:18:57.502 INFO  com.aspect.LogAspect                              :55   [32m128108881518923776[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:18:57.502 INFO  com.aspect.LogAspect                              :56   [32m128108881518923776[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:18:57.502 INFO  com.aspect.LogAspect                              :57   [32m128108881518923776[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:57.503 INFO  com.aspect.LogAspect                              :80   [32m128108881518923776[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:18:57.568 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108881518923776[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:18:57.568 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108881518923776[0;39m ==> Parameters: 
2021-12-20 20:18:58.117 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108881518923776[0;39m <==    Columns: count(0)
2021-12-20 20:18:58.118 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108881518923776[0;39m <==        Row: 6
2021-12-20 20:18:58.118 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108881518923776[0;39m <==      Total: 1
2021-12-20 20:18:58.119 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108881518923776[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:18:58.120 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108881518923776[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:18:58.228 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:18:58.229 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:18:58.231 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:18:58.233 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:18:58.235 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:58.236 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:18:58.237 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108881518923776[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:18:58.238 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108881518923776[0;39m <==      Total: 6
2021-12-20 20:18:58.241 INFO  com.servicess.EbookService                        :48   [32m128108881518923776[0;39m 总行数：6
2021-12-20 20:18:58.243 INFO  com.servicess.EbookService                        :49   [32m128108881518923776[0;39m 总页数：1
2021-12-20 20:18:58.248 INFO  com.aspect.LogAspect                              :92   [32m128108881518923776[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:18:58.248 INFO  com.aspect.LogAspect                              :93   [32m128108881518923776[0;39m ------------- 结束 耗时：746 ms -------------
2021-12-20 20:18:59.352 INFO  com.aspect.LogAspect                              :54   [32m128108889278386176[0;39m ------------- 开始 -------------
2021-12-20 20:18:59.352 INFO  com.aspect.LogAspect                              :55   [32m128108889278386176[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-20 20:18:59.352 INFO  com.aspect.LogAspect                              :56   [32m128108889278386176[0;39m 类名方法: com.controller.DocController.all
2021-12-20 20:18:59.352 INFO  com.aspect.LogAspect                              :57   [32m128108889278386176[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:18:59.352 INFO  com.aspect.LogAspect                              :80   [32m128108889278386176[0;39m 请求参数: [1]
2021-12-20 20:18:59.425 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108889278386176[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 20:18:59.426 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108889278386176[0;39m ==> Parameters: 1(Long)
2021-12-20 20:18:59.575 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:18:59.575 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-20 20:18:59.576 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 14, 5
2021-12-20 20:18:59.577 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 10, 3
2021-12-20 20:18:59.578 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 18, 5
2021-12-20 20:18:59.579 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 26, 7
2021-12-20 20:18:59.579 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 3, 1, 0, 文档2, 2, 11, 2
2021-12-20 20:18:59.579 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128108889278386176[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 15, 3
2021-12-20 20:18:59.579 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128108889278386176[0;39m <==      Total: 7
2021-12-20 20:18:59.581 INFO  com.aspect.LogAspect                              :92   [32m128108889278386176[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":14,"voteCount":5},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":18,"voteCount":5},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":26,"voteCount":7},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":11,"voteCount":2},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":15,"voteCount":3}],"success":true}
2021-12-20 20:18:59.582 INFO  com.aspect.LogAspect                              :93   [32m128108889278386176[0;39m ------------- 结束 耗时：230 ms -------------
2021-12-20 20:19:00.000 INFO  com.job.EbookSnapshotJob                          :32   [32m128108891996295168[0;39m 生成今日电子书快照开始
2021-12-20 20:19:00.382 INFO  com.aspect.LogAspect                              :54   [32m128108893598519296[0;39m ------------- 开始 -------------
2021-12-20 20:19:00.382 INFO  com.aspect.LogAspect                              :55   [32m128108893598519296[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:19:00.383 INFO  com.aspect.LogAspect                              :56   [32m128108893598519296[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:19:00.383 INFO  com.aspect.LogAspect                              :57   [32m128108893598519296[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:19:00.383 INFO  com.aspect.LogAspect                              :80   [32m128108893598519296[0;39m 请求参数: []
2021-12-20 20:19:00.573 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108891996295168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:00.575 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108891996295168[0;39m ==> Parameters: 
2021-12-20 20:19:00.595 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108893598519296[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:19:00.596 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108893598519296[0;39m ==> Parameters: 
2021-12-20 20:19:00.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:19:00.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:19:00.696 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:19:00.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:19:00.698 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:19:00.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:19:00.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:19:00.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:19:00.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:19:00.701 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:19:00.702 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:19:00.703 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:19:00.706 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:19:00.707 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:19:00.708 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:19:00.709 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:19:00.710 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:19:00.711 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:19:00.712 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:19:00.714 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128108893598519296[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:19:00.714 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128108893598519296[0;39m <==      Total: 19
2021-12-20 20:19:00.717 INFO  com.aspect.LogAspect                              :92   [32m128108893598519296[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:19:00.717 INFO  com.aspect.LogAspect                              :93   [32m128108893598519296[0;39m ------------- 结束 耗时：335 ms -------------
2021-12-20 20:19:00.744 INFO  com.aspect.LogAspect                              :54   [32m128108895116857344[0;39m ------------- 开始 -------------
2021-12-20 20:19:00.744 INFO  com.aspect.LogAspect                              :55   [32m128108895116857344[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:19:00.745 INFO  com.aspect.LogAspect                              :56   [32m128108895116857344[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:19:00.745 INFO  com.aspect.LogAspect                              :57   [32m128108895116857344[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:19:00.745 INFO  com.aspect.LogAspect                              :80   [32m128108895116857344[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:19:00.809 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108895116857344[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:19:00.809 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108895116857344[0;39m ==> Parameters: 
2021-12-20 20:19:00.838 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108891996295168[0;39m <==    Updates: 0
2021-12-20 20:19:00.838 INFO  com.job.EbookSnapshotJob                          :35   [32m128108891996295168[0;39m 生成今日电子书快照结束，耗时：837毫秒
2021-12-20 20:19:00.894 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108895116857344[0;39m <==    Columns: count(0)
2021-12-20 20:19:00.894 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128108895116857344[0;39m <==        Row: 6
2021-12-20 20:19:00.895 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128108895116857344[0;39m <==      Total: 1
2021-12-20 20:19:00.897 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108895116857344[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:19:00.898 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108895116857344[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:19:01.441 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:19:01.443 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:19:01.444 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:19:01.444 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:19:01.445 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:19:01.445 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:19:01.445 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128108895116857344[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:19:01.446 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128108895116857344[0;39m <==      Total: 6
2021-12-20 20:19:01.447 INFO  com.servicess.EbookService                        :48   [32m128108895116857344[0;39m 总行数：6
2021-12-20 20:19:01.447 INFO  com.servicess.EbookService                        :49   [32m128108895116857344[0;39m 总页数：1
2021-12-20 20:19:01.449 INFO  com.aspect.LogAspect                              :92   [32m128108895116857344[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:19:01.450 INFO  com.aspect.LogAspect                              :93   [32m128108895116857344[0;39m ------------- 结束 耗时：706 ms -------------
2021-12-20 20:19:05.001 INFO  com.job.EbookSnapshotJob                          :32   [32m128108912972009472[0;39m 生成今日电子书快照开始
2021-12-20 20:19:05.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108912972009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:05.138 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108912972009472[0;39m ==> Parameters: 
2021-12-20 20:19:05.357 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108912972009472[0;39m <==    Updates: 0
2021-12-20 20:19:05.357 INFO  com.job.EbookSnapshotJob                          :35   [32m128108912972009472[0;39m 生成今日电子书快照结束，耗时：356毫秒
2021-12-20 20:19:05.358 INFO  com.job.DocJob                                    :32   [32m128108914469376000[0;39m 更新电子书下的文档数据开始
2021-12-20 20:19:05.359 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108914469376000[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:19:05.359 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108914469376000[0;39m ==> Parameters: 
2021-12-20 20:19:05.560 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128108914469376000[0;39m <==    Updates: 6
2021-12-20 20:19:05.560 INFO  com.job.DocJob                                    :35   [32m128108914469376000[0;39m 更新电子书下的文档数据结束，耗时：202毫秒
2021-12-20 20:19:10.010 INFO  com.job.EbookSnapshotJob                          :32   [32m128108933981278208[0;39m 生成今日电子书快照开始
2021-12-20 20:19:10.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108933981278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:10.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108933981278208[0;39m ==> Parameters: 
2021-12-20 20:19:10.666 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108933981278208[0;39m <==    Updates: 0
2021-12-20 20:19:10.666 INFO  com.job.EbookSnapshotJob                          :35   [32m128108933981278208[0;39m 生成今日电子书快照结束，耗时：656毫秒
2021-12-20 20:19:15.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128108954977964032[0;39m 生成今日电子书快照开始
2021-12-20 20:19:15.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108954977964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:15.141 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108954977964032[0;39m ==> Parameters: 
2021-12-20 20:19:15.371 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108954977964032[0;39m <==    Updates: 0
2021-12-20 20:19:15.371 INFO  com.job.EbookSnapshotJob                          :35   [32m128108954977964032[0;39m 生成今日电子书快照结束，耗时：355毫秒
2021-12-20 20:19:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128108975945289728[0;39m 生成今日电子书快照开始
2021-12-20 20:19:20.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108975945289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:20.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108975945289728[0;39m ==> Parameters: 
2021-12-20 20:19:20.332 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108975945289728[0;39m <==    Updates: 0
2021-12-20 20:19:20.332 INFO  com.job.EbookSnapshotJob                          :35   [32m128108975945289728[0;39m 生成今日电子书快照结束，耗时：317毫秒
2021-12-20 20:19:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m128108996908421120[0;39m 生成今日电子书快照开始
2021-12-20 20:19:25.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108996908421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:25.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108996908421120[0;39m ==> Parameters: 
2021-12-20 20:19:25.618 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128108996908421120[0;39m <==    Updates: 0
2021-12-20 20:19:25.618 INFO  com.job.EbookSnapshotJob                          :35   [32m128108996908421120[0;39m 生成今日电子书快照结束，耗时：605毫秒
2021-12-20 20:19:30.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128109017892524032[0;39m 生成今日电子书快照开始
2021-12-20 20:19:30.614 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109017892524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:30.614 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109017892524032[0;39m ==> Parameters: 
2021-12-20 20:19:30.976 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109017892524032[0;39m <==    Updates: 0
2021-12-20 20:19:30.976 INFO  com.job.EbookSnapshotJob                          :35   [32m128109017892524032[0;39m 生成今日电子书快照结束，耗时：960毫秒
2021-12-20 20:19:35.003 INFO  com.job.DocJob                                    :32   [32m128109038809518080[0;39m 更新电子书下的文档数据开始
2021-12-20 20:19:35.131 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109038809518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:19:35.132 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109038809518080[0;39m ==> Parameters: 
2021-12-20 20:19:35.284 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109038809518080[0;39m <==    Updates: 6
2021-12-20 20:19:35.284 INFO  com.job.DocJob                                    :35   [32m128109038809518080[0;39m 更新电子书下的文档数据结束，耗时：281毫秒
2021-12-20 20:19:35.285 INFO  com.job.EbookSnapshotJob                          :32   [32m128109039992311808[0;39m 生成今日电子书快照开始
2021-12-20 20:19:35.285 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109039992311808[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:35.286 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109039992311808[0;39m ==> Parameters: 
2021-12-20 20:19:35.455 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109039992311808[0;39m <==    Updates: 0
2021-12-20 20:19:35.455 INFO  com.job.EbookSnapshotJob                          :35   [32m128109039992311808[0;39m 生成今日电子书快照结束，耗时：170毫秒
2021-12-20 20:19:37.423 INFO  com.aspect.LogAspect                              :54   [32m128109048959733760[0;39m ------------- 开始 -------------
2021-12-20 20:19:37.423 INFO  com.aspect.LogAspect                              :55   [32m128109048959733760[0;39m 请求地址: http://localhost:8081/user/logout/128108508699824128 GET
2021-12-20 20:19:37.423 INFO  com.aspect.LogAspect                              :56   [32m128109048959733760[0;39m 类名方法: com.controller.UserController.logout
2021-12-20 20:19:37.424 INFO  com.aspect.LogAspect                              :57   [32m128109048959733760[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:19:37.424 INFO  com.aspect.LogAspect                              :80   [32m128109048959733760[0;39m 请求参数: ["128108508699824128"]
2021-12-20 20:19:37.534 INFO  com.controller.UserController                     :89   [32m128109048959733760[0;39m 从redis中删除token：128108508699824128
2021-12-20 20:19:37.535 INFO  com.aspect.LogAspect                              :92   [32m128109048959733760[0;39m 返回结果: {"success":true}
2021-12-20 20:19:37.535 INFO  com.aspect.LogAspect                              :93   [32m128109048959733760[0;39m ------------- 结束 耗时：112 ms -------------
2021-12-20 20:19:39.496 INFO  com.aspect.LogAspect                              :54   [32m128109057654525952[0;39m ------------- 开始 -------------
2021-12-20 20:19:39.496 INFO  com.aspect.LogAspect                              :55   [32m128109057654525952[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :54   [32m128109057658720256[0;39m ------------- 开始 -------------
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :56   [32m128109057654525952[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :55   [32m128109057658720256[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :57   [32m128109057654525952[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :56   [32m128109057658720256[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :80   [32m128109057654525952[0;39m 请求参数: []
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :57   [32m128109057658720256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:19:39.497 INFO  com.aspect.LogAspect                              :80   [32m128109057658720256[0;39m 请求参数: []
2021-12-20 20:19:39.499 INFO  com.aspect.LogAspect                              :54   [32m128109057667108864[0;39m ------------- 开始 -------------
2021-12-20 20:19:39.500 INFO  com.aspect.LogAspect                              :55   [32m128109057667108864[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:19:39.500 INFO  com.aspect.LogAspect                              :56   [32m128109057667108864[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:19:39.500 INFO  com.aspect.LogAspect                              :57   [32m128109057667108864[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:19:39.500 INFO  com.aspect.LogAspect                              :80   [32m128109057667108864[0;39m 请求参数: []
2021-12-20 20:19:39.605 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128109057654525952[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:19:39.605 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128109057654525952[0;39m ==> Parameters: 
2021-12-20 20:19:39.605 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128109057658720256[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:19:39.605 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128109057658720256[0;39m ==> Parameters: 
2021-12-20 20:19:39.620 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128109057667108864[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:19:39.620 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128109057667108864[0;39m ==> Parameters: 
2021-12-20 20:19:39.694 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128109057654525952[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:19:39.694 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128109057658720256[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:19:39.695 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128109057654525952[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:19:39.695 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128109057658720256[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:19:39.696 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128109057658720256[0;39m <==      Total: 1
2021-12-20 20:19:39.697 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128109057654525952[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:19:39.697 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128109057654525952[0;39m <==      Total: 2
2021-12-20 20:19:39.698 INFO  com.aspect.LogAspect                              :92   [32m128109057658720256[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:19:39.698 INFO  com.aspect.LogAspect                              :93   [32m128109057658720256[0;39m ------------- 结束 耗时：201 ms -------------
2021-12-20 20:19:39.699 INFO  com.aspect.LogAspect                              :92   [32m128109057654525952[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:19:39.699 INFO  com.aspect.LogAspect                              :93   [32m128109057654525952[0;39m ------------- 结束 耗时：203 ms -------------
2021-12-20 20:19:39.731 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:19:39.732 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:19:39.732 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:19:39.732 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:19:39.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:19:39.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:19:39.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:19:39.733 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:19:39.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:19:39.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:19:39.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:19:39.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:19:39.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:19:39.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:19:39.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:19:39.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:19:39.735 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:19:39.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:19:39.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:19:39.736 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128109057667108864[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:19:39.736 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128109057667108864[0;39m <==      Total: 19
2021-12-20 20:19:39.737 INFO  com.aspect.LogAspect                              :92   [32m128109057667108864[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:19:39.738 INFO  com.aspect.LogAspect                              :93   [32m128109057667108864[0;39m ------------- 结束 耗时：239 ms -------------
2021-12-20 20:19:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128109059818786816[0;39m 生成今日电子书快照开始
2021-12-20 20:19:40.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109059818786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:40.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109059818786816[0;39m ==> Parameters: 
2021-12-20 20:19:40.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109059818786816[0;39m <==    Updates: 0
2021-12-20 20:19:40.273 INFO  com.job.EbookSnapshotJob                          :35   [32m128109059818786816[0;39m 生成今日电子书快照结束，耗时：261毫秒
2021-12-20 20:19:45.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128109080807084032[0;39m 生成今日电子书快照开始
2021-12-20 20:19:45.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109080807084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:45.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109080807084032[0;39m ==> Parameters: 
2021-12-20 20:19:45.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109080807084032[0;39m <==    Updates: 0
2021-12-20 20:19:45.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128109080807084032[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 20:19:50.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128109101778604032[0;39m 生成今日电子书快照开始
2021-12-20 20:19:50.542 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109101778604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:50.542 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109101778604032[0;39m ==> Parameters: 
2021-12-20 20:19:50.796 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109101778604032[0;39m <==    Updates: 0
2021-12-20 20:19:50.796 INFO  com.job.EbookSnapshotJob                          :35   [32m128109101778604032[0;39m 生成今日电子书快照结束，耗时：780毫秒
2021-12-20 20:19:55.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128109122708180992[0;39m 生成今日电子书快照开始
2021-12-20 20:19:55.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109122708180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:19:55.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109122708180992[0;39m ==> Parameters: 
2021-12-20 20:19:55.324 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109122708180992[0;39m <==    Updates: 0
2021-12-20 20:19:55.324 INFO  com.job.EbookSnapshotJob                          :35   [32m128109122708180992[0;39m 生成今日电子书快照结束，耗时：318毫秒
2021-12-20 20:20:00.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128109143717449728[0;39m 生成今日电子书快照开始
2021-12-20 20:20:00.094 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109143717449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:00.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109143717449728[0;39m ==> Parameters: 
2021-12-20 20:20:00.353 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109143717449728[0;39m <==    Updates: 0
2021-12-20 20:20:00.353 INFO  com.job.EbookSnapshotJob                          :35   [32m128109143717449728[0;39m 生成今日电子书快照结束，耗时：338毫秒
2021-12-20 20:20:05.013 INFO  com.job.DocJob                                    :32   [32m128109164680581120[0;39m 更新电子书下的文档数据开始
2021-12-20 20:20:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109164680581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:20:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109164680581120[0;39m ==> Parameters: 
2021-12-20 20:20:05.263 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109164680581120[0;39m <==    Updates: 6
2021-12-20 20:20:05.263 INFO  com.job.DocJob                                    :35   [32m128109164680581120[0;39m 更新电子书下的文档数据结束，耗时：250毫秒
2021-12-20 20:20:05.263 INFO  com.job.EbookSnapshotJob                          :32   [32m128109165729157120[0;39m 生成今日电子书快照开始
2021-12-20 20:20:05.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109165729157120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:05.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109165729157120[0;39m ==> Parameters: 
2021-12-20 20:20:05.440 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109165729157120[0;39m <==    Updates: 0
2021-12-20 20:20:05.440 INFO  com.job.EbookSnapshotJob                          :35   [32m128109165729157120[0;39m 生成今日电子书快照结束，耗时：177毫秒
2021-12-20 20:20:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128109185622740992[0;39m 生成今日电子书快照开始
2021-12-20 20:20:10.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109185622740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:10.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109185622740992[0;39m ==> Parameters: 
2021-12-20 20:20:10.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109185622740992[0;39m <==    Updates: 0
2021-12-20 20:20:10.262 INFO  com.job.EbookSnapshotJob                          :35   [32m128109185622740992[0;39m 生成今日电子书快照结束，耗时：256毫秒
2021-12-20 20:20:15.022 INFO  com.job.EbookSnapshotJob                          :32   [32m128109206661369856[0;39m 生成今日电子书快照开始
2021-12-20 20:20:15.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109206661369856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:15.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109206661369856[0;39m ==> Parameters: 
2021-12-20 20:20:15.308 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109206661369856[0;39m <==    Updates: 0
2021-12-20 20:20:15.308 INFO  com.job.EbookSnapshotJob                          :35   [32m128109206661369856[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 20:20:20.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128109227616112640[0;39m 生成今日电子书快照开始
2021-12-20 20:20:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109227616112640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:20.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109227616112640[0;39m ==> Parameters: 
2021-12-20 20:20:20.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109227616112640[0;39m <==    Updates: 0
2021-12-20 20:20:20.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128109227616112640[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:20:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128109248545689600[0;39m 生成今日电子书快照开始
2021-12-20 20:20:25.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109248545689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:25.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109248545689600[0;39m ==> Parameters: 
2021-12-20 20:20:25.318 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109248545689600[0;39m <==    Updates: 0
2021-12-20 20:20:25.318 INFO  com.job.EbookSnapshotJob                          :35   [32m128109248545689600[0;39m 生成今日电子书快照结束，耗时：310毫秒
2021-12-20 20:20:30.039 INFO  com.job.EbookSnapshotJob                          :32   [32m128109269647233024[0;39m 生成今日电子书快照开始
2021-12-20 20:20:30.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109269647233024[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:30.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109269647233024[0;39m ==> Parameters: 
2021-12-20 20:20:30.402 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109269647233024[0;39m <==    Updates: 0
2021-12-20 20:20:30.402 INFO  com.job.EbookSnapshotJob                          :35   [32m128109269647233024[0;39m 生成今日电子书快照结束，耗时：363毫秒
2021-12-20 20:20:35.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109290492923904[0;39m 生成今日电子书快照开始
2021-12-20 20:20:35.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109290492923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:35.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109290492923904[0;39m ==> Parameters: 
2021-12-20 20:20:35.602 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109290492923904[0;39m <==    Updates: 0
2021-12-20 20:20:35.602 INFO  com.job.EbookSnapshotJob                          :35   [32m128109290492923904[0;39m 生成今日电子书快照结束，耗时：593毫秒
2021-12-20 20:20:35.617 INFO  com.job.DocJob                                    :32   [32m128109293043060736[0;39m 更新电子书下的文档数据开始
2021-12-20 20:20:35.711 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109293043060736[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:20:35.711 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109293043060736[0;39m ==> Parameters: 
2021-12-20 20:20:35.949 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109293043060736[0;39m <==    Updates: 6
2021-12-20 20:20:35.949 INFO  com.job.DocJob                                    :35   [32m128109293043060736[0;39m 更新电子书下的文档数据结束，耗时：332毫秒
2021-12-20 20:20:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109311464443904[0;39m 生成今日电子书快照开始
2021-12-20 20:20:40.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109311464443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:40.120 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109311464443904[0;39m ==> Parameters: 
2021-12-20 20:20:40.323 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109311464443904[0;39m <==    Updates: 0
2021-12-20 20:20:40.323 INFO  com.job.EbookSnapshotJob                          :35   [32m128109311464443904[0;39m 生成今日电子书快照结束，耗时：314毫秒
2021-12-20 20:20:45.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128109332498878464[0;39m 生成今日电子书快照开始
2021-12-20 20:20:45.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109332498878464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:45.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109332498878464[0;39m ==> Parameters: 
2021-12-20 20:20:45.294 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109332498878464[0;39m <==    Updates: 0
2021-12-20 20:20:45.294 INFO  com.job.EbookSnapshotJob                          :35   [32m128109332498878464[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-20 20:20:50.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128109353445232640[0;39m 生成今日电子书快照开始
2021-12-20 20:20:50.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109353445232640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:50.091 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109353445232640[0;39m ==> Parameters: 
2021-12-20 20:20:50.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109353445232640[0;39m <==    Updates: 0
2021-12-20 20:20:50.262 INFO  com.job.EbookSnapshotJob                          :35   [32m128109353445232640[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 20:20:55.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128109374374809600[0;39m 生成今日电子书快照开始
2021-12-20 20:20:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109374374809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:20:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109374374809600[0;39m ==> Parameters: 
2021-12-20 20:20:55.287 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109374374809600[0;39m <==    Updates: 0
2021-12-20 20:20:55.287 INFO  com.job.EbookSnapshotJob                          :35   [32m128109374374809600[0;39m 生成今日电子书快照结束，耗时：279毫秒
2021-12-20 20:21:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128109395371495424[0;39m 生成今日电子书快照开始
2021-12-20 20:21:00.175 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109395371495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:00.177 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109395371495424[0;39m ==> Parameters: 
2021-12-20 20:21:00.359 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109395371495424[0;39m <==    Updates: 0
2021-12-20 20:21:00.359 INFO  com.job.EbookSnapshotJob                          :35   [32m128109395371495424[0;39m 生成今日电子书快照结束，耗时：344毫秒
2021-12-20 20:21:05.005 INFO  com.job.EbookSnapshotJob                          :32   [32m128109416305266688[0;39m 生成今日电子书快照开始
2021-12-20 20:21:05.121 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109416305266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:05.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109416305266688[0;39m ==> Parameters: 
2021-12-20 20:21:05.296 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109416305266688[0;39m <==    Updates: 0
2021-12-20 20:21:05.298 INFO  com.job.EbookSnapshotJob                          :35   [32m128109416305266688[0;39m 生成今日电子书快照结束，耗时：293毫秒
2021-12-20 20:21:05.299 INFO  com.job.DocJob                                    :32   [32m128109417538392064[0;39m 更新电子书下的文档数据开始
2021-12-20 20:21:05.300 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109417538392064[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:21:05.301 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109417538392064[0;39m ==> Parameters: 
2021-12-20 20:21:05.461 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109417538392064[0;39m <==    Updates: 6
2021-12-20 20:21:05.461 INFO  com.job.DocJob                                    :35   [32m128109417538392064[0;39m 更新电子书下的文档数据结束，耗时：162毫秒
2021-12-20 20:21:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128109437306146816[0;39m 生成今日电子书快照开始
2021-12-20 20:21:10.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109437306146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:10.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109437306146816[0;39m ==> Parameters: 
2021-12-20 20:21:10.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109437306146816[0;39m <==    Updates: 0
2021-12-20 20:21:10.292 INFO  com.job.EbookSnapshotJob                          :35   [32m128109437306146816[0;39m 生成今日电子书快照结束，耗时：279毫秒
2021-12-20 20:21:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128109458302832640[0;39m 生成今日电子书快照开始
2021-12-20 20:21:15.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109458302832640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:15.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109458302832640[0;39m ==> Parameters: 
2021-12-20 20:21:15.295 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109458302832640[0;39m <==    Updates: 0
2021-12-20 20:21:15.295 INFO  com.job.EbookSnapshotJob                          :35   [32m128109458302832640[0;39m 生成今日电子书快照结束，耗时：277毫秒
2021-12-20 20:21:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128109479270158336[0;39m 生成今日电子书快照开始
2021-12-20 20:21:20.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109479270158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:20.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109479270158336[0;39m ==> Parameters: 
2021-12-20 20:21:20.341 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109479270158336[0;39m <==    Updates: 0
2021-12-20 20:21:20.341 INFO  com.job.EbookSnapshotJob                          :35   [32m128109479270158336[0;39m 生成今日电子书快照结束，耗时：324毫秒
2021-12-20 20:21:25.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128109500241678336[0;39m 生成今日电子书快照开始
2021-12-20 20:21:25.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109500241678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:25.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109500241678336[0;39m ==> Parameters: 
2021-12-20 20:21:25.278 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109500241678336[0;39m <==    Updates: 0
2021-12-20 20:21:25.278 INFO  com.job.EbookSnapshotJob                          :35   [32m128109500241678336[0;39m 生成今日电子书快照结束，耗时：261毫秒
2021-12-20 20:21:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128109521188032512[0;39m 生成今日电子书快照开始
2021-12-20 20:21:30.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109521188032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:30.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109521188032512[0;39m ==> Parameters: 
2021-12-20 20:21:30.310 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109521188032512[0;39m <==    Updates: 0
2021-12-20 20:21:30.310 INFO  com.job.EbookSnapshotJob                          :35   [32m128109521188032512[0;39m 生成今日电子书快照结束，耗时：299毫秒
2021-12-20 20:21:35.026 INFO  com.job.EbookSnapshotJob                          :32   [32m128109542222467072[0;39m 生成今日电子书快照开始
2021-12-20 20:21:35.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109542222467072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:35.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109542222467072[0;39m ==> Parameters: 
2021-12-20 20:21:35.310 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109542222467072[0;39m <==    Updates: 0
2021-12-20 20:21:35.310 INFO  com.job.EbookSnapshotJob                          :35   [32m128109542222467072[0;39m 生成今日电子书快照结束，耗时：284毫秒
2021-12-20 20:21:35.310 INFO  com.job.DocJob                                    :32   [32m128109543413649408[0;39m 更新电子书下的文档数据开始
2021-12-20 20:21:35.310 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109543413649408[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:21:35.310 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109543413649408[0;39m ==> Parameters: 
2021-12-20 20:21:35.556 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109543413649408[0;39m <==    Updates: 6
2021-12-20 20:21:35.557 INFO  com.job.DocJob                                    :35   [32m128109543413649408[0;39m 更新电子书下的文档数据结束，耗时：247毫秒
2021-12-20 20:21:40.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128109563135266816[0;39m 生成今日电子书快照开始
2021-12-20 20:21:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109563135266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109563135266816[0;39m ==> Parameters: 
2021-12-20 20:21:40.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109563135266816[0;39m <==    Updates: 0
2021-12-20 20:21:40.275 INFO  com.job.EbookSnapshotJob                          :35   [32m128109563135266816[0;39m 生成今日电子书快照结束，耗时：263毫秒
2021-12-20 20:21:45.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128109584106786816[0;39m 生成今日电子书快照开始
2021-12-20 20:21:45.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109584106786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:45.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109584106786816[0;39m ==> Parameters: 
2021-12-20 20:21:45.290 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109584106786816[0;39m <==    Updates: 0
2021-12-20 20:21:45.290 INFO  com.job.EbookSnapshotJob                          :35   [32m128109584106786816[0;39m 生成今日电子书快照结束，耗时：278毫秒
2021-12-20 20:21:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128109605099278336[0;39m 生成今日电子书快照开始
2021-12-20 20:21:50.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109605099278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:50.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109605099278336[0;39m ==> Parameters: 
2021-12-20 20:21:50.313 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109605099278336[0;39m <==    Updates: 0
2021-12-20 20:21:50.313 INFO  com.job.EbookSnapshotJob                          :35   [32m128109605099278336[0;39m 生成今日电子书快照结束，耗时：296毫秒
2021-12-20 20:21:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109626037243904[0;39m 生成今日电子书快照开始
2021-12-20 20:21:55.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109626037243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:21:55.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109626037243904[0;39m ==> Parameters: 
2021-12-20 20:21:55.314 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109626037243904[0;39m <==    Updates: 0
2021-12-20 20:21:55.330 INFO  com.job.EbookSnapshotJob                          :35   [32m128109626037243904[0;39m 生成今日电子书快照结束，耗时：321毫秒
2021-12-20 20:22:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109647008763904[0;39m 生成今日电子书快照开始
2021-12-20 20:22:00.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109647008763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:00.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109647008763904[0;39m ==> Parameters: 
2021-12-20 20:22:00.244 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109647008763904[0;39m <==    Updates: 0
2021-12-20 20:22:00.244 INFO  com.job.EbookSnapshotJob                          :35   [32m128109647008763904[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 20:22:05.012 INFO  com.job.DocJob                                    :32   [32m128109667992866816[0;39m 更新电子书下的文档数据开始
2021-12-20 20:22:05.124 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109667992866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:22:05.124 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109667992866816[0;39m ==> Parameters: 
2021-12-20 20:22:05.290 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109667992866816[0;39m <==    Updates: 6
2021-12-20 20:22:05.290 INFO  com.job.DocJob                                    :35   [32m128109667992866816[0;39m 更新电子书下的文档数据结束，耗时：278毫秒
2021-12-20 20:22:05.290 INFO  com.job.EbookSnapshotJob                          :32   [32m128109669158883328[0;39m 生成今日电子书快照开始
2021-12-20 20:22:05.290 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109669158883328[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:05.290 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109669158883328[0;39m ==> Parameters: 
2021-12-20 20:22:05.441 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109669158883328[0;39m <==    Updates: 0
2021-12-20 20:22:05.441 INFO  com.job.EbookSnapshotJob                          :35   [32m128109669158883328[0;39m 生成今日电子书快照结束，耗时：151毫秒
2021-12-20 20:22:10.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128109688985358336[0;39m 生成今日电子书快照开始
2021-12-20 20:22:10.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109688985358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:10.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109688985358336[0;39m ==> Parameters: 
2021-12-20 20:22:10.393 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109688985358336[0;39m <==    Updates: 0
2021-12-20 20:22:10.408 INFO  com.job.EbookSnapshotJob                          :35   [32m128109688985358336[0;39m 生成今日电子书快照结束，耗时：391毫秒
2021-12-20 20:22:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128109709893963776[0;39m 生成今日电子书快照开始
2021-12-20 20:22:15.220 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109709893963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:15.235 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109709893963776[0;39m ==> Parameters: 
2021-12-20 20:22:15.407 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109709893963776[0;39m <==    Updates: 0
2021-12-20 20:22:15.407 INFO  com.job.EbookSnapshotJob                          :35   [32m128109709893963776[0;39m 生成今日电子书快照结束，耗时：405毫秒
2021-12-20 20:22:20.025 INFO  com.job.EbookSnapshotJob                          :32   [32m128109730961952768[0;39m 生成今日电子书快照开始
2021-12-20 20:22:20.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109730961952768[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:20.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109730961952768[0;39m ==> Parameters: 
2021-12-20 20:22:20.486 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109730961952768[0;39m <==    Updates: 0
2021-12-20 20:22:20.486 INFO  com.job.EbookSnapshotJob                          :35   [32m128109730961952768[0;39m 生成今日电子书快照结束，耗时：461毫秒
2021-12-20 20:22:25.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128109751874752512[0;39m 生成今日电子书快照开始
2021-12-20 20:22:25.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109751874752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:25.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109751874752512[0;39m ==> Parameters: 
2021-12-20 20:22:25.562 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109751874752512[0;39m <==    Updates: 0
2021-12-20 20:22:25.577 INFO  com.job.EbookSnapshotJob                          :35   [32m128109751874752512[0;39m 生成今日电子书快照结束，耗时：566毫秒
2021-12-20 20:22:30.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128109772846272512[0;39m 生成今日电子书快照开始
2021-12-20 20:22:30.209 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109772846272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:30.209 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109772846272512[0;39m ==> Parameters: 
2021-12-20 20:22:31.178 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109772846272512[0;39m <==    Updates: 0
2021-12-20 20:22:31.178 INFO  com.job.EbookSnapshotJob                          :35   [32m128109772846272512[0;39m 生成今日电子书快照结束，耗时：1167毫秒
2021-12-20 20:22:35.017 INFO  com.job.DocJob                                    :32   [32m128109793842958336[0;39m 更新电子书下的文档数据开始
2021-12-20 20:22:35.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109793842958336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:22:35.095 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109793842958336[0;39m ==> Parameters: 
2021-12-20 20:22:35.283 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109793842958336[0;39m <==    Updates: 6
2021-12-20 20:22:35.283 INFO  com.job.DocJob                                    :35   [32m128109793842958336[0;39m 更新电子书下的文档数据结束，耗时：266毫秒
2021-12-20 20:22:35.283 INFO  com.job.EbookSnapshotJob                          :32   [32m128109794958643200[0;39m 生成今日电子书快照开始
2021-12-20 20:22:35.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109794958643200[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:35.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109794958643200[0;39m ==> Parameters: 
2021-12-20 20:22:35.677 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109794958643200[0;39m <==    Updates: 0
2021-12-20 20:22:35.677 INFO  com.job.EbookSnapshotJob                          :35   [32m128109794958643200[0;39m 生成今日电子书快照结束，耗时：394毫秒
2021-12-20 20:22:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109814780923904[0;39m 生成今日电子书快照开始
2021-12-20 20:22:40.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109814780923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:40.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109814780923904[0;39m ==> Parameters: 
2021-12-20 20:22:40.314 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109814780923904[0;39m <==    Updates: 0
2021-12-20 20:22:40.314 INFO  com.job.EbookSnapshotJob                          :35   [32m128109814780923904[0;39m 生成今日电子书快照结束，耗时：305毫秒
2021-12-20 20:22:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128109835760832512[0;39m 生成今日电子书快照开始
2021-12-20 20:22:45.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109835760832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:45.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109835760832512[0;39m ==> Parameters: 
2021-12-20 20:22:45.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109835760832512[0;39m <==    Updates: 0
2021-12-20 20:22:45.265 INFO  com.job.EbookSnapshotJob                          :35   [32m128109835760832512[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 20:22:50.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128109856736546816[0;39m 生成今日电子书快照开始
2021-12-20 20:22:50.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109856736546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:50.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109856736546816[0;39m ==> Parameters: 
2021-12-20 20:22:50.306 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109856736546816[0;39m <==    Updates: 0
2021-12-20 20:22:50.306 INFO  com.job.EbookSnapshotJob                          :35   [32m128109856736546816[0;39m 生成今日电子书快照结束，耗时：294毫秒
2021-12-20 20:22:55.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109877695483904[0;39m 生成今日电子书快照开始
2021-12-20 20:22:55.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109877695483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:22:55.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109877695483904[0;39m ==> Parameters: 
2021-12-20 20:22:55.319 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109877695483904[0;39m <==    Updates: 0
2021-12-20 20:22:55.319 INFO  com.job.EbookSnapshotJob                          :35   [32m128109877695483904[0;39m 生成今日电子书快照结束，耗时：310毫秒
2021-12-20 20:23:00.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128109898637643776[0;39m 生成今日电子书快照开始
2021-12-20 20:23:00.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109898637643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:00.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109898637643776[0;39m ==> Parameters: 
2021-12-20 20:23:00.351 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109898637643776[0;39m <==    Updates: 0
2021-12-20 20:23:00.351 INFO  com.job.EbookSnapshotJob                          :35   [32m128109898637643776[0;39m 生成今日电子书快照结束，耗时：349毫秒
2021-12-20 20:23:05.008 INFO  com.job.DocJob                                    :32   [32m128109919634329600[0;39m 更新电子书下的文档数据开始
2021-12-20 20:23:05.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109919634329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:23:05.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109919634329600[0;39m ==> Parameters: 
2021-12-20 20:23:05.278 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128109919634329600[0;39m <==    Updates: 6
2021-12-20 20:23:05.293 INFO  com.job.DocJob                                    :35   [32m128109919634329600[0;39m 更新电子书下的文档数据结束，耗时：285毫秒
2021-12-20 20:23:05.294 INFO  com.job.EbookSnapshotJob                          :32   [32m128109920833900544[0;39m 生成今日电子书快照开始
2021-12-20 20:23:05.295 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109920833900544[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:05.295 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109920833900544[0;39m ==> Parameters: 
2021-12-20 20:23:05.487 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109920833900544[0;39m <==    Updates: 0
2021-12-20 20:23:05.487 INFO  com.job.EbookSnapshotJob                          :35   [32m128109920833900544[0;39m 生成今日电子书快照结束，耗时：193毫秒
2021-12-20 20:23:10.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128109940610043904[0;39m 生成今日电子书快照开始
2021-12-20 20:23:10.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109940610043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:10.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109940610043904[0;39m ==> Parameters: 
2021-12-20 20:23:10.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109940610043904[0;39m <==    Updates: 0
2021-12-20 20:23:10.264 INFO  com.job.EbookSnapshotJob                          :35   [32m128109940610043904[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 20:23:15.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128109961644478464[0;39m 生成今日电子书快照开始
2021-12-20 20:23:15.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109961644478464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:15.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109961644478464[0;39m ==> Parameters: 
2021-12-20 20:23:15.919 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109961644478464[0;39m <==    Updates: 0
2021-12-20 20:23:15.919 INFO  com.job.EbookSnapshotJob                          :35   [32m128109961644478464[0;39m 生成今日电子书快照结束，耗时：895毫秒
2021-12-20 20:23:20.013 INFO  com.job.EbookSnapshotJob                          :32   [32m128109982569861120[0;39m 生成今日电子书快照开始
2021-12-20 20:23:20.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109982569861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:20.112 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109982569861120[0;39m ==> Parameters: 
2021-12-20 20:23:20.318 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128109982569861120[0;39m <==    Updates: 0
2021-12-20 20:23:20.334 INFO  com.job.EbookSnapshotJob                          :35   [32m128109982569861120[0;39m 生成今日电子书快照结束，耗时：321毫秒
2021-12-20 20:23:25.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128110003520409600[0;39m 生成今日电子书快照开始
2021-12-20 20:23:25.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110003520409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:25.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110003520409600[0;39m ==> Parameters: 
2021-12-20 20:23:25.324 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110003520409600[0;39m <==    Updates: 0
2021-12-20 20:23:25.324 INFO  com.job.EbookSnapshotJob                          :35   [32m128110003520409600[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-20 20:23:30.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128110024491929600[0;39m 生成今日电子书快照开始
2021-12-20 20:23:30.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110024491929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:30.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110024491929600[0;39m ==> Parameters: 
2021-12-20 20:23:30.278 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110024491929600[0;39m <==    Updates: 0
2021-12-20 20:23:30.278 INFO  com.job.EbookSnapshotJob                          :35   [32m128110024491929600[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-20 20:23:35.008 INFO  com.job.DocJob                                    :32   [32m128110045463449600[0;39m 更新电子书下的文档数据开始
2021-12-20 20:23:35.117 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110045463449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:23:35.117 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110045463449600[0;39m ==> Parameters: 
2021-12-20 20:23:35.309 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110045463449600[0;39m <==    Updates: 6
2021-12-20 20:23:35.309 INFO  com.job.DocJob                                    :35   [32m128110045463449600[0;39m 更新电子书下的文档数据结束，耗时：301毫秒
2021-12-20 20:23:35.309 INFO  com.job.EbookSnapshotJob                          :32   [32m128110046725935104[0;39m 生成今日电子书快照开始
2021-12-20 20:23:35.309 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110046725935104[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:35.309 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110046725935104[0;39m ==> Parameters: 
2021-12-20 20:23:35.524 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110046725935104[0;39m <==    Updates: 0
2021-12-20 20:23:35.524 INFO  com.job.EbookSnapshotJob                          :35   [32m128110046725935104[0;39m 生成今日电子书快照结束，耗时：215毫秒
2021-12-20 20:23:40.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128110066447552512[0;39m 生成今日电子书快照开始
2021-12-20 20:23:40.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110066447552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:40.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110066447552512[0;39m ==> Parameters: 
2021-12-20 20:23:40.365 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110066447552512[0;39m <==    Updates: 0
2021-12-20 20:23:40.365 INFO  com.job.EbookSnapshotJob                          :35   [32m128110066447552512[0;39m 生成今日电子书快照结束，耗时：354毫秒
2021-12-20 20:23:45.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128110087419072512[0;39m 生成今日电子书快照开始
2021-12-20 20:23:45.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110087419072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:45.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110087419072512[0;39m ==> Parameters: 
2021-12-20 20:23:45.364 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110087419072512[0;39m <==    Updates: 0
2021-12-20 20:23:45.364 INFO  com.job.EbookSnapshotJob                          :35   [32m128110087419072512[0;39m 生成今日电子书快照结束，耗时：353毫秒
2021-12-20 20:23:50.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128110108378009600[0;39m 生成今日电子书快照开始
2021-12-20 20:23:50.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110108378009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:50.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110108378009600[0;39m ==> Parameters: 
2021-12-20 20:23:50.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110108378009600[0;39m <==    Updates: 0
2021-12-20 20:23:50.277 INFO  com.job.EbookSnapshotJob                          :35   [32m128110108378009600[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 20:23:55.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128110129366306816[0;39m 生成今日电子书快照开始
2021-12-20 20:23:55.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110129366306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:23:55.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110129366306816[0;39m ==> Parameters: 
2021-12-20 20:23:55.280 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110129366306816[0;39m <==    Updates: 0
2021-12-20 20:23:55.280 INFO  com.job.EbookSnapshotJob                          :35   [32m128110129366306816[0;39m 生成今日电子书快照结束，耗时：268毫秒
2021-12-20 20:24:00.019 INFO  com.job.EbookSnapshotJob                          :32   [32m128110150367186944[0;39m 生成今日电子书快照开始
2021-12-20 20:24:00.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110150367186944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:00.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110150367186944[0;39m ==> Parameters: 
2021-12-20 20:24:00.328 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110150367186944[0;39m <==    Updates: 0
2021-12-20 20:24:00.328 INFO  com.job.EbookSnapshotJob                          :35   [32m128110150367186944[0;39m 生成今日电子书快照结束，耗时：309毫秒
2021-12-20 20:24:05.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128110171330318336[0;39m 生成今日电子书快照开始
2021-12-20 20:24:05.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110171330318336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:05.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110171330318336[0;39m ==> Parameters: 
2021-12-20 20:24:05.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110171330318336[0;39m <==    Updates: 0
2021-12-20 20:24:05.292 INFO  com.job.EbookSnapshotJob                          :35   [32m128110171330318336[0;39m 生成今日电子书快照结束，耗时：275毫秒
2021-12-20 20:24:05.292 INFO  com.job.DocJob                                    :32   [32m128110172483751936[0;39m 更新电子书下的文档数据开始
2021-12-20 20:24:05.292 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110172483751936[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:24:05.292 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110172483751936[0;39m ==> Parameters: 
2021-12-20 20:24:05.459 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110172483751936[0;39m <==    Updates: 6
2021-12-20 20:24:05.459 INFO  com.job.DocJob                                    :35   [32m128110172483751936[0;39m 更新电子书下的文档数据结束，耗时：167毫秒
2021-12-20 20:24:10.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128110192297644032[0;39m 生成今日电子书快照开始
2021-12-20 20:24:10.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110192297644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:10.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110192297644032[0;39m ==> Parameters: 
2021-12-20 20:24:10.308 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110192297644032[0;39m <==    Updates: 0
2021-12-20 20:24:10.309 INFO  com.job.EbookSnapshotJob                          :35   [32m128110192297644032[0;39m 生成今日电子书快照结束，耗时：293毫秒
2021-12-20 20:24:15.007 INFO  com.job.EbookSnapshotJob                          :32   [32m128110213231415296[0;39m 生成今日电子书快照开始
2021-12-20 20:24:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110213231415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:15.079 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110213231415296[0;39m ==> Parameters: 
2021-12-20 20:24:15.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110213231415296[0;39m <==    Updates: 0
2021-12-20 20:24:15.250 INFO  com.job.EbookSnapshotJob                          :35   [32m128110213231415296[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 20:24:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128110234236489728[0;39m 生成今日电子书快照开始
2021-12-20 20:24:20.089 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110234236489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:20.090 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110234236489728[0;39m ==> Parameters: 
2021-12-20 20:24:20.249 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110234236489728[0;39m <==    Updates: 0
2021-12-20 20:24:20.250 INFO  com.job.EbookSnapshotJob                          :35   [32m128110234236489728[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 20:24:25.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128110255170260992[0;39m 生成今日电子书快照开始
2021-12-20 20:24:25.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110255170260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:25.131 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110255170260992[0;39m ==> Parameters: 
2021-12-20 20:24:25.297 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110255170260992[0;39m <==    Updates: 0
2021-12-20 20:24:25.297 INFO  com.job.EbookSnapshotJob                          :35   [32m128110255170260992[0;39m 生成今日电子书快照结束，耗时：290毫秒
2021-12-20 20:24:30.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128110276154363904[0;39m 生成今日电子书快照开始
2021-12-20 20:24:30.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110276154363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:30.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110276154363904[0;39m ==> Parameters: 
2021-12-20 20:24:30.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110276154363904[0;39m <==    Updates: 0
2021-12-20 20:24:30.233 INFO  com.job.EbookSnapshotJob                          :35   [32m128110276154363904[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 20:24:35.018 INFO  com.job.DocJob                                    :32   [32m128110297163632640[0;39m 更新电子书下的文档数据开始
2021-12-20 20:24:35.112 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110297163632640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:24:35.112 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110297163632640[0;39m ==> Parameters: 
2021-12-20 20:24:35.291 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110297163632640[0;39m <==    Updates: 6
2021-12-20 20:24:35.292 INFO  com.job.DocJob                                    :35   [32m128110297163632640[0;39m 更新电子书下的文档数据结束，耗时：274毫秒
2021-12-20 20:24:35.293 INFO  com.job.EbookSnapshotJob                          :32   [32m128110298317066240[0;39m 生成今日电子书快照开始
2021-12-20 20:24:35.293 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110298317066240[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:35.294 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110298317066240[0;39m ==> Parameters: 
2021-12-20 20:24:35.446 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110298317066240[0;39m <==    Updates: 0
2021-12-20 20:24:35.448 INFO  com.job.EbookSnapshotJob                          :35   [32m128110298317066240[0;39m 生成今日电子书快照结束，耗时：155毫秒
2021-12-20 20:24:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128110318097403904[0;39m 生成今日电子书快照开始
2021-12-20 20:24:40.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110318097403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:40.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110318097403904[0;39m ==> Parameters: 
2021-12-20 20:24:40.286 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110318097403904[0;39m <==    Updates: 0
2021-12-20 20:24:40.286 INFO  com.job.EbookSnapshotJob                          :35   [32m128110318097403904[0;39m 生成今日电子书快照结束，耗时：277毫秒
2021-12-20 20:24:45.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128110339068923904[0;39m 生成今日电子书快照开始
2021-12-20 20:24:45.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110339068923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:45.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110339068923904[0;39m ==> Parameters: 
2021-12-20 20:24:45.308 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110339068923904[0;39m <==    Updates: 0
2021-12-20 20:24:45.308 INFO  com.job.EbookSnapshotJob                          :35   [32m128110339068923904[0;39m 生成今日电子书快照结束，耗时：299毫秒
2021-12-20 20:24:50.029 INFO  com.job.EbookSnapshotJob                          :32   [32m128110360124329984[0;39m 生成今日电子书快照开始
2021-12-20 20:24:50.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110360124329984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:50.164 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110360124329984[0;39m ==> Parameters: 
2021-12-20 20:24:50.413 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110360124329984[0;39m <==    Updates: 0
2021-12-20 20:24:50.413 INFO  com.job.EbookSnapshotJob                          :35   [32m128110360124329984[0;39m 生成今日电子书快照结束，耗时：383毫秒
2021-12-20 20:24:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128110381037129728[0;39m 生成今日电子书快照开始
2021-12-20 20:24:55.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110381037129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:24:55.123 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110381037129728[0;39m ==> Parameters: 
2021-12-20 20:24:55.395 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110381037129728[0;39m <==    Updates: 0
2021-12-20 20:24:55.397 INFO  com.job.EbookSnapshotJob                          :35   [32m128110381037129728[0;39m 生成今日电子书快照结束，耗时：380毫秒
2021-12-20 20:24:56.401 INFO  com.aspect.LogAspect                              :54   [32m128110386850435073[0;39m ------------- 开始 -------------
2021-12-20 20:24:56.401 INFO  com.aspect.LogAspect                              :54   [32m128110386850435072[0;39m ------------- 开始 -------------
2021-12-20 20:24:56.402 INFO  com.aspect.LogAspect                              :55   [32m128110386850435072[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:24:56.402 INFO  com.aspect.LogAspect                              :56   [32m128110386850435072[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:24:56.402 INFO  com.aspect.LogAspect                              :57   [32m128110386850435072[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:24:56.402 INFO  com.aspect.LogAspect                              :80   [32m128110386850435072[0;39m 请求参数: []
2021-12-20 20:24:56.401 INFO  com.aspect.LogAspect                              :55   [32m128110386850435073[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:24:56.403 INFO  com.aspect.LogAspect                              :56   [32m128110386850435073[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:24:56.403 INFO  com.aspect.LogAspect                              :57   [32m128110386850435073[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:24:56.403 INFO  com.aspect.LogAspect                              :80   [32m128110386850435073[0;39m 请求参数: []
2021-12-20 20:24:56.402 INFO  com.aspect.LogAspect                              :54   [32m128110386854629376[0;39m ------------- 开始 -------------
2021-12-20 20:24:56.406 INFO  com.aspect.LogAspect                              :55   [32m128110386854629376[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:24:56.406 INFO  com.aspect.LogAspect                              :56   [32m128110386854629376[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:24:56.406 INFO  com.aspect.LogAspect                              :57   [32m128110386854629376[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:24:56.406 INFO  com.aspect.LogAspect                              :80   [32m128110386854629376[0;39m 请求参数: []
2021-12-20 20:24:56.497 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128110386850435072[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:24:56.497 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128110386854629376[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:24:56.497 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128110386850435073[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:24:56.498 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128110386850435073[0;39m ==> Parameters: 
2021-12-20 20:24:56.498 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128110386854629376[0;39m ==> Parameters: 
2021-12-20 20:24:56.498 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128110386850435072[0;39m ==> Parameters: 
2021-12-20 20:24:56.674 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128110386850435073[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:24:56.674 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:24:56.674 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128110386850435072[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:24:56.675 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:24:56.676 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:24:56.676 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128110386850435073[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:24:56.676 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128110386850435072[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:24:56.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:24:56.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:24:56.678 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128110386850435072[0;39m <==      Total: 1
2021-12-20 20:24:56.678 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:24:56.679 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:24:56.678 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128110386850435073[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:24:56.680 INFO  com.aspect.LogAspect                              :92   [32m128110386850435072[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:24:56.680 INFO  com.aspect.LogAspect                              :93   [32m128110386850435072[0;39m ------------- 结束 耗时：279 ms -------------
2021-12-20 20:24:56.680 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:24:56.681 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128110386850435073[0;39m <==      Total: 2
2021-12-20 20:24:56.681 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:24:56.682 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:24:56.682 INFO  com.aspect.LogAspect                              :92   [32m128110386850435073[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:24:56.683 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:24:56.683 INFO  com.aspect.LogAspect                              :93   [32m128110386850435073[0;39m ------------- 结束 耗时：282 ms -------------
2021-12-20 20:24:56.684 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:24:56.685 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:24:56.686 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:24:56.687 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:24:56.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:24:56.690 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:24:56.691 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:24:56.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:24:56.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110386854629376[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:24:56.695 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128110386854629376[0;39m <==      Total: 19
2021-12-20 20:24:56.702 INFO  com.aspect.LogAspect                              :92   [32m128110386854629376[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:24:56.703 INFO  com.aspect.LogAspect                              :93   [32m128110386854629376[0;39m ------------- 结束 耗时：301 ms -------------
2021-12-20 20:25:00.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128110402012844032[0;39m 生成今日电子书快照开始
2021-12-20 20:25:00.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110402012844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:00.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110402012844032[0;39m ==> Parameters: 
2021-12-20 20:25:00.365 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110402012844032[0;39m <==    Updates: 0
2021-12-20 20:25:00.366 INFO  com.job.EbookSnapshotJob                          :35   [32m128110402012844032[0;39m 生成今日电子书快照结束，耗时：350毫秒
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :54   [32m128110413475876864[0;39m ------------- 开始 -------------
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :54   [32m128110413475876865[0;39m ------------- 开始 -------------
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :55   [32m128110413475876864[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :55   [32m128110413475876865[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :56   [32m128110413475876864[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :56   [32m128110413475876865[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:25:02.749 INFO  com.aspect.LogAspect                              :57   [32m128110413475876864[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :57   [32m128110413475876865[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :54   [32m128110413480071168[0;39m ------------- 开始 -------------
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :80   [32m128110413475876864[0;39m 请求参数: []
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :55   [32m128110413480071168[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :80   [32m128110413475876865[0;39m 请求参数: []
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :56   [32m128110413480071168[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :57   [32m128110413480071168[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:25:02.750 INFO  com.aspect.LogAspect                              :80   [32m128110413480071168[0;39m 请求参数: []
2021-12-20 20:25:02.848 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128110413475876865[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:25:02.848 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128110413480071168[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:25:02.848 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128110413475876864[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:25:02.849 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128110413480071168[0;39m ==> Parameters: 
2021-12-20 20:25:02.849 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128110413475876864[0;39m ==> Parameters: 
2021-12-20 20:25:02.849 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128110413475876865[0;39m ==> Parameters: 
2021-12-20 20:25:02.961 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128110413475876865[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:25:02.962 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128110413475876864[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:25:02.963 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:25:02.964 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128110413475876865[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:25:02.964 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128110413475876864[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:25:02.964 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:25:02.965 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:25:02.966 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128110413475876864[0;39m <==      Total: 1
2021-12-20 20:25:02.966 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:25:02.966 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128110413475876865[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:25:02.967 INFO  com.aspect.LogAspect                              :92   [32m128110413475876864[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:25:02.967 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:25:02.968 INFO  com.aspect.LogAspect                              :93   [32m128110413475876864[0;39m ------------- 结束 耗时：219 ms -------------
2021-12-20 20:25:02.968 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128110413475876865[0;39m <==      Total: 2
2021-12-20 20:25:02.968 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:25:02.969 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:25:02.969 INFO  com.aspect.LogAspect                              :92   [32m128110413475876865[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:25:02.970 INFO  com.aspect.LogAspect                              :93   [32m128110413475876865[0;39m ------------- 结束 耗时：221 ms -------------
2021-12-20 20:25:02.970 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:25:02.971 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:25:02.972 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:25:02.974 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:25:02.976 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:25:02.977 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:25:02.979 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:25:02.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:25:02.981 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:25:02.983 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:25:02.984 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:25:02.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:25:02.985 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128110413480071168[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:25:02.986 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128110413480071168[0;39m <==      Total: 19
2021-12-20 20:25:02.991 INFO  com.aspect.LogAspect                              :92   [32m128110413480071168[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:25:02.992 INFO  com.aspect.LogAspect                              :93   [32m128110413480071168[0;39m ------------- 结束 耗时：242 ms -------------
2021-12-20 20:25:05.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128110422955003904[0;39m 生成今日电子书快照开始
2021-12-20 20:25:05.127 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110422955003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:05.142 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110422955003904[0;39m ==> Parameters: 
2021-12-20 20:25:05.309 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110422955003904[0;39m <==    Updates: 0
2021-12-20 20:25:05.309 INFO  com.job.EbookSnapshotJob                          :35   [32m128110422955003904[0;39m 生成今日电子书快照结束，耗时：300毫秒
2021-12-20 20:25:05.309 INFO  com.job.DocJob                                    :32   [32m128110424213295104[0;39m 更新电子书下的文档数据开始
2021-12-20 20:25:05.309 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110424213295104[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:25:05.309 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110424213295104[0;39m ==> Parameters: 
2021-12-20 20:25:05.519 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110424213295104[0;39m <==    Updates: 6
2021-12-20 20:25:05.519 INFO  com.job.DocJob                                    :35   [32m128110424213295104[0;39m 更新电子书下的文档数据结束，耗时：210毫秒
2021-12-20 20:25:10.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128110443922329600[0;39m 生成今日电子书快照开始
2021-12-20 20:25:10.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110443922329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:10.149 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110443922329600[0;39m ==> Parameters: 
2021-12-20 20:25:10.339 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110443922329600[0;39m <==    Updates: 0
2021-12-20 20:25:10.339 INFO  com.job.EbookSnapshotJob                          :35   [32m128110443922329600[0;39m 生成今日电子书快照结束，耗时：331毫秒
2021-12-20 20:25:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128110464935792640[0;39m 生成今日电子书快照开始
2021-12-20 20:25:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110464935792640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:15.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110464935792640[0;39m ==> Parameters: 
2021-12-20 20:25:15.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110464935792640[0;39m <==    Updates: 0
2021-12-20 20:25:15.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128110464935792640[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:25:20.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128110485840203776[0;39m 生成今日电子书快照开始
2021-12-20 20:25:20.075 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110485840203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:20.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110485840203776[0;39m ==> Parameters: 
2021-12-20 20:25:20.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110485840203776[0;39m <==    Updates: 0
2021-12-20 20:25:20.234 INFO  com.job.EbookSnapshotJob                          :35   [32m128110485840203776[0;39m 生成今日电子书快照结束，耗时：231毫秒
2021-12-20 20:25:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128110506862055424[0;39m 生成今日电子书快照开始
2021-12-20 20:25:25.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110506862055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:25.161 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110506862055424[0;39m ==> Parameters: 
2021-12-20 20:25:25.364 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110506862055424[0;39m <==    Updates: 0
2021-12-20 20:25:25.364 INFO  com.job.EbookSnapshotJob                          :35   [32m128110506862055424[0;39m 生成今日电子书快照结束，耗时：350毫秒
2021-12-20 20:25:30.022 INFO  com.job.EbookSnapshotJob                          :32   [32m128110527867129856[0;39m 生成今日电子书快照开始
2021-12-20 20:25:30.171 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110527867129856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:30.174 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110527867129856[0;39m ==> Parameters: 
2021-12-20 20:25:30.333 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110527867129856[0;39m <==    Updates: 0
2021-12-20 20:25:30.334 INFO  com.job.EbookSnapshotJob                          :35   [32m128110527867129856[0;39m 生成今日电子书快照结束，耗时：311毫秒
2021-12-20 20:25:35.011 INFO  com.job.EbookSnapshotJob                          :32   [32m128110548792512512[0;39m 生成今日电子书快照开始
2021-12-20 20:25:35.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110548792512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:35.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110548792512512[0;39m ==> Parameters: 
2021-12-20 20:25:35.296 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110548792512512[0;39m <==    Updates: 0
2021-12-20 20:25:35.296 INFO  com.job.EbookSnapshotJob                          :35   [32m128110548792512512[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 20:25:35.296 INFO  com.job.DocJob                                    :32   [32m128110549987889152[0;39m 更新电子书下的文档数据开始
2021-12-20 20:25:35.296 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110549987889152[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:25:35.296 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110549987889152[0;39m ==> Parameters: 
2021-12-20 20:25:35.551 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110549987889152[0;39m <==    Updates: 6
2021-12-20 20:25:35.551 INFO  com.job.DocJob                                    :35   [32m128110549987889152[0;39m 更新电子书下的文档数据结束，耗时：255毫秒
2021-12-20 20:25:40.004 INFO  com.job.EbookSnapshotJob                          :32   [32m128110569734672384[0;39m 生成今日电子书快照开始
2021-12-20 20:25:40.168 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110569734672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:40.170 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110569734672384[0;39m ==> Parameters: 
2021-12-20 20:25:40.410 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110569734672384[0;39m <==    Updates: 0
2021-12-20 20:25:40.411 INFO  com.job.EbookSnapshotJob                          :35   [32m128110569734672384[0;39m 生成今日电子书快照结束，耗时：407毫秒
2021-12-20 20:25:45.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128110590697803776[0;39m 生成今日电子书快照开始
2021-12-20 20:25:45.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110590697803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:45.081 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110590697803776[0;39m ==> Parameters: 
2021-12-20 20:25:45.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110590697803776[0;39m <==    Updates: 0
2021-12-20 20:25:45.349 INFO  com.job.EbookSnapshotJob                          :35   [32m128110590697803776[0;39m 生成今日电子书快照结束，耗时：347毫秒
2021-12-20 20:25:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128110611732238336[0;39m 生成今日电子书快照开始
2021-12-20 20:25:50.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110611732238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:50.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110611732238336[0;39m ==> Parameters: 
2021-12-20 20:25:50.317 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110611732238336[0;39m <==    Updates: 0
2021-12-20 20:25:50.317 INFO  com.job.EbookSnapshotJob                          :35   [32m128110611732238336[0;39m 生成今日电子书快照结束，耗时：300毫秒
2021-12-20 20:25:55.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128110632707952640[0;39m 生成今日电子书快照开始
2021-12-20 20:25:55.143 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110632707952640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:25:55.160 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110632707952640[0;39m ==> Parameters: 
2021-12-20 20:25:55.380 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110632707952640[0;39m <==    Updates: 0
2021-12-20 20:25:55.380 INFO  com.job.EbookSnapshotJob                          :35   [32m128110632707952640[0;39m 生成今日电子书快照结束，耗时：362毫秒
2021-12-20 20:26:00.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128110653637529600[0;39m 生成今日电子书快照开始
2021-12-20 20:26:00.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110653637529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:26:00.071 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110653637529600[0;39m ==> Parameters: 
2021-12-20 20:26:00.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110653637529600[0;39m <==    Updates: 0
2021-12-20 20:26:00.242 INFO  com.job.EbookSnapshotJob                          :35   [32m128110653637529600[0;39m 生成今日电子书快照结束，耗时：234毫秒
2021-12-20 20:26:05.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128110674676158464[0;39m 生成今日电子书快照开始
2021-12-20 20:26:05.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110674676158464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:26:05.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110674676158464[0;39m ==> Parameters: 
2021-12-20 20:26:05.343 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110674676158464[0;39m <==    Updates: 0
2021-12-20 20:26:05.343 INFO  com.job.EbookSnapshotJob                          :35   [32m128110674676158464[0;39m 生成今日电子书快照结束，耗时：319毫秒
2021-12-20 20:26:05.343 INFO  com.job.DocJob                                    :32   [32m128110676014141440[0;39m 更新电子书下的文档数据开始
2021-12-20 20:26:05.343 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110676014141440[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:26:05.343 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110676014141440[0;39m ==> Parameters: 
2021-12-20 20:26:05.583 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128110676014141440[0;39m <==    Updates: 6
2021-12-20 20:26:05.583 INFO  com.job.DocJob                                    :35   [32m128110676014141440[0;39m 更新电子书下的文档数据结束，耗时：240毫秒
2021-12-20 20:26:10.012 INFO  com.job.EbookSnapshotJob                          :32   [32m128110695597346816[0;39m 生成今日电子书快照开始
2021-12-20 20:26:10.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110695597346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:26:10.155 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110695597346816[0;39m ==> Parameters: 
2021-12-20 20:26:10.392 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110695597346816[0;39m <==    Updates: 0
2021-12-20 20:26:10.392 INFO  com.job.EbookSnapshotJob                          :35   [32m128110695597346816[0;39m 生成今日电子书快照结束，耗时：380毫秒
2021-12-20 20:26:15.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128110716594032640[0;39m 生成今日电子书快照开始
2021-12-20 20:26:15.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110716594032640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:26:15.111 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110716594032640[0;39m ==> Parameters: 
2021-12-20 20:26:15.417 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110716594032640[0;39m <==    Updates: 0
2021-12-20 20:26:15.417 INFO  com.job.EbookSnapshotJob                          :35   [32m128110716594032640[0;39m 生成今日电子书快照结束，耗时：399毫秒
2021-12-20 20:26:20.026 INFO  com.job.EbookSnapshotJob                          :32   [32m128110737599107072[0;39m 生成今日电子书快照开始
2021-12-20 20:26:20.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110737599107072[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:26:20.124 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110737599107072[0;39m ==> Parameters: 
2021-12-20 20:26:20.312 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128110737599107072[0;39m <==    Updates: 0
2021-12-20 20:26:20.312 INFO  com.job.EbookSnapshotJob                          :35   [32m128110737599107072[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 20:34:46.750 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-20 20:34:46.750 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 8368 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-20 20:34:46.750 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-20 20:34:46.810 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-20 20:34:46.810 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-20 20:34:48.640 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-20 20:34:48.640 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-20 20:34:49.096 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 436 ms. Found 0 Redis repository interfaces.
2021-12-20 20:34:49.737 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-20 20:34:49.752 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-20 20:34:49.752 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-20 20:34:49.752 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-20 20:34:49.830 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-20 20:34:49.830 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3020 ms
2021-12-20 20:34:51.384 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-20 20:34:51.415 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-20 20:34:51.430 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-20 20:34:51.451 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.485 seconds (JVM running for 7.506)
2021-12-20 20:34:55.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128112897590169600[0;39m 生成今日电子书快照开始
2021-12-20 20:34:55.023 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m128112897590169600[0;39m HikariPool-1 - Starting...
2021-12-20 20:34:55.923 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m128112897590169600[0;39m HikariPool-1 - Start completed.
2021-12-20 20:34:55.938 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112897590169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:34:55.954 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112897590169600[0;39m ==> Parameters: 
2021-12-20 20:34:56.116 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112897590169600[0;39m <==    Updates: 0
2021-12-20 20:34:56.116 INFO  com.job.EbookSnapshotJob                          :35   [32m128112897590169600[0;39m 生成今日电子书快照结束，耗时：1108毫秒
2021-12-20 20:35:00.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128112918599438336[0;39m 生成今日电子书快照开始
2021-12-20 20:35:00.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112918599438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:00.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112918599438336[0;39m ==> Parameters: 
2021-12-20 20:35:00.288 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112918599438336[0;39m <==    Updates: 0
2021-12-20 20:35:00.288 INFO  com.job.EbookSnapshotJob                          :35   [32m128112918599438336[0;39m 生成今日电子书快照结束，耗时：271毫秒
2021-12-20 20:35:05.014 INFO  com.job.DocJob                                    :32   [32m128112939558375424[0;39m 更新电子书下的文档数据开始
2021-12-20 20:35:05.092 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128112939558375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:35:05.092 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128112939558375424[0;39m ==> Parameters: 
2021-12-20 20:35:05.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128112939558375424[0;39m <==    Updates: 6
2021-12-20 20:35:05.268 INFO  com.job.DocJob                                    :35   [32m128112939558375424[0;39m 更新电子书下的文档数据结束，耗时：254毫秒
2021-12-20 20:35:05.268 INFO  com.job.EbookSnapshotJob                          :32   [32m128112940623728640[0;39m 生成今日电子书快照开始
2021-12-20 20:35:05.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112940623728640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:05.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112940623728640[0;39m ==> Parameters: 
2021-12-20 20:35:05.460 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112940623728640[0;39m <==    Updates: 0
2021-12-20 20:35:05.460 INFO  com.job.EbookSnapshotJob                          :35   [32m128112940623728640[0;39m 生成今日电子书快照结束，耗时：192毫秒
2021-12-20 20:35:10.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128112960534089728[0;39m 生成今日电子书快照开始
2021-12-20 20:35:10.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112960534089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:10.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112960534089728[0;39m ==> Parameters: 
2021-12-20 20:35:10.298 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112960534089728[0;39m <==    Updates: 0
2021-12-20 20:35:10.298 INFO  com.job.EbookSnapshotJob                          :35   [32m128112960534089728[0;39m 生成今日电子书快照结束，耗时：283毫秒
2021-12-20 20:35:15.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128112981539164160[0;39m 生成今日电子书快照开始
2021-12-20 20:35:15.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112981539164160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:15.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112981539164160[0;39m ==> Parameters: 
2021-12-20 20:35:15.376 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128112981539164160[0;39m <==    Updates: 0
2021-12-20 20:35:15.376 INFO  com.job.EbookSnapshotJob                          :35   [32m128112981539164160[0;39m 生成今日电子书快照结束，耗时：353毫秒
2021-12-20 20:35:20.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128113002477129728[0;39m 生成今日电子书快照开始
2021-12-20 20:35:20.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113002477129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:20.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113002477129728[0;39m ==> Parameters: 
2021-12-20 20:35:21.023 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113002477129728[0;39m <==    Updates: 0
2021-12-20 20:35:21.023 INFO  com.job.EbookSnapshotJob                          :35   [32m128113002477129728[0;39m 生成今日电子书快照结束，耗时：1008毫秒
2021-12-20 20:35:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113023444455424[0;39m 生成今日电子书快照开始
2021-12-20 20:35:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113023444455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:25.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113023444455424[0;39m ==> Parameters: 
2021-12-20 20:35:25.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113023444455424[0;39m <==    Updates: 0
2021-12-20 20:35:25.283 INFO  com.job.EbookSnapshotJob                          :35   [32m128113023444455424[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 20:35:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113044428558336[0;39m 生成今日电子书快照开始
2021-12-20 20:35:30.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113044428558336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:30.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113044428558336[0;39m ==> Parameters: 
2021-12-20 20:35:30.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113044428558336[0;39m <==    Updates: 0
2021-12-20 20:35:30.292 INFO  com.job.EbookSnapshotJob                          :35   [32m128113044428558336[0;39m 生成今日电子书快照结束，耗时：275毫秒
2021-12-20 20:35:35.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113065387495424[0;39m 生成今日电子书快照开始
2021-12-20 20:35:35.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113065387495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:35.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113065387495424[0;39m ==> Parameters: 
2021-12-20 20:35:35.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113065387495424[0;39m <==    Updates: 0
2021-12-20 20:35:35.268 INFO  com.job.EbookSnapshotJob                          :35   [32m128113065387495424[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 20:35:35.268 INFO  com.job.DocJob                                    :32   [32m128113066452848640[0;39m 更新电子书下的文档数据开始
2021-12-20 20:35:35.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113066452848640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:35:35.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113066452848640[0;39m ==> Parameters: 
2021-12-20 20:35:35.461 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113066452848640[0;39m <==    Updates: 6
2021-12-20 20:35:35.461 INFO  com.job.DocJob                                    :35   [32m128113066452848640[0;39m 更新电子书下的文档数据结束，耗时：193毫秒
2021-12-20 20:35:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113086359015424[0;39m 生成今日电子书快照开始
2021-12-20 20:35:40.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113086359015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:40.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113086359015424[0;39m ==> Parameters: 
2021-12-20 20:35:40.915 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113086359015424[0;39m <==    Updates: 0
2021-12-20 20:35:40.915 INFO  com.job.EbookSnapshotJob                          :35   [32m128113086359015424[0;39m 生成今日电子书快照结束，耗时：901毫秒
2021-12-20 20:35:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113107330535424[0;39m 生成今日电子书快照开始
2021-12-20 20:35:45.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113107330535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:45.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113107330535424[0;39m ==> Parameters: 
2021-12-20 20:35:45.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113107330535424[0;39m <==    Updates: 0
2021-12-20 20:35:45.251 INFO  com.job.EbookSnapshotJob                          :35   [32m128113107330535424[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 20:35:50.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128113128318832640[0;39m 生成今日电子书快照开始
2021-12-20 20:35:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113128318832640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113128318832640[0;39m ==> Parameters: 
2021-12-20 20:35:50.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113128318832640[0;39m <==    Updates: 0
2021-12-20 20:35:50.270 INFO  com.job.EbookSnapshotJob                          :35   [32m128113128318832640[0;39m 生成今日电子书快照结束，耗时：252毫秒
2021-12-20 20:35:55.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128113149248409600[0;39m 生成今日电子书快照开始
2021-12-20 20:35:55.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113149248409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:35:55.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113149248409600[0;39m ==> Parameters: 
2021-12-20 20:35:55.501 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113149248409600[0;39m <==    Updates: 0
2021-12-20 20:35:55.501 INFO  com.job.EbookSnapshotJob                          :35   [32m128113149248409600[0;39m 生成今日电子书快照结束，耗时：493毫秒
2021-12-20 20:36:00.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113170245095424[0;39m 生成今日电子书快照开始
2021-12-20 20:36:00.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113170245095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:00.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113170245095424[0;39m ==> Parameters: 
2021-12-20 20:36:00.399 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113170245095424[0;39m <==    Updates: 0
2021-12-20 20:36:00.399 INFO  com.job.EbookSnapshotJob                          :35   [32m128113170245095424[0;39m 生成今日电子书快照结束，耗时：385毫秒
2021-12-20 20:36:05.014 INFO  com.job.DocJob                                    :32   [32m128113191216615424[0;39m 更新电子书下的文档数据开始
2021-12-20 20:36:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113191216615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:36:05.076 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113191216615424[0;39m ==> Parameters: 
2021-12-20 20:36:05.233 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113191216615424[0;39m <==    Updates: 6
2021-12-20 20:36:05.233 INFO  com.job.DocJob                                    :35   [32m128113191216615424[0;39m 更新电子书下的文档数据结束，耗时：219毫秒
2021-12-20 20:36:05.233 INFO  com.job.EbookSnapshotJob                          :32   [32m128113192135168000[0;39m 生成今日电子书快照开始
2021-12-20 20:36:05.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113192135168000[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:05.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113192135168000[0;39m ==> Parameters: 
2021-12-20 20:36:05.392 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113192135168000[0;39m <==    Updates: 0
2021-12-20 20:36:05.392 INFO  com.job.EbookSnapshotJob                          :35   [32m128113192135168000[0;39m 生成今日电子书快照结束，耗时：159毫秒
2021-12-20 20:36:10.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128113212225884160[0;39m 生成今日电子书快照开始
2021-12-20 20:36:10.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113212225884160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:10.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113212225884160[0;39m ==> Parameters: 
2021-12-20 20:36:10.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113212225884160[0;39m <==    Updates: 0
2021-12-20 20:36:10.260 INFO  com.job.EbookSnapshotJob                          :35   [32m128113212225884160[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 20:36:15.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128113233134489600[0;39m 生成今日电子书快照开始
2021-12-20 20:36:15.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113233134489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:15.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113233134489600[0;39m ==> Parameters: 
2021-12-20 20:36:15.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113233134489600[0;39m <==    Updates: 0
2021-12-20 20:36:15.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128113233134489600[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:36:20.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128113254106009600[0;39m 生成今日电子书快照开始
2021-12-20 20:36:20.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113254106009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:20.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113254106009600[0;39m ==> Parameters: 
2021-12-20 20:36:20.238 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113254106009600[0;39m <==    Updates: 0
2021-12-20 20:36:20.238 INFO  com.job.EbookSnapshotJob                          :35   [32m128113254106009600[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-20 20:36:25.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128113275140444160[0;39m 生成今日电子书快照开始
2021-12-20 20:36:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113275140444160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:25.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113275140444160[0;39m ==> Parameters: 
2021-12-20 20:36:25.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113275140444160[0;39m <==    Updates: 0
2021-12-20 20:36:25.283 INFO  com.job.EbookSnapshotJob                          :35   [32m128113275140444160[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 20:36:30.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128113296090992640[0;39m 生成今日电子书快照开始
2021-12-20 20:36:30.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113296090992640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:30.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113296090992640[0;39m ==> Parameters: 
2021-12-20 20:36:30.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113296090992640[0;39m <==    Updates: 0
2021-12-20 20:36:30.252 INFO  com.job.EbookSnapshotJob                          :35   [32m128113296090992640[0;39m 生成今日电子书快照结束，耗时：234毫秒
2021-12-20 20:36:35.007 INFO  com.job.DocJob                                    :32   [32m128113317016375296[0;39m 更新电子书下的文档数据开始
2021-12-20 20:36:35.070 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113317016375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:36:35.070 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113317016375296[0;39m ==> Parameters: 
2021-12-20 20:36:35.261 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113317016375296[0;39m <==    Updates: 6
2021-12-20 20:36:35.261 INFO  com.job.DocJob                                    :35   [32m128113317016375296[0;39m 更新电子书下的文档数据结束，耗时：254毫秒
2021-12-20 20:36:35.261 INFO  com.job.EbookSnapshotJob                          :32   [32m128113318081728512[0;39m 生成今日电子书快照开始
2021-12-20 20:36:35.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113318081728512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:35.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113318081728512[0;39m ==> Parameters: 
2021-12-20 20:36:35.452 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113318081728512[0;39m <==    Updates: 0
2021-12-20 20:36:35.452 INFO  com.job.EbookSnapshotJob                          :35   [32m128113318081728512[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-20 20:36:40.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128113338059198464[0;39m 生成今日电子书快照开始
2021-12-20 20:36:40.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113338059198464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:40.151 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113338059198464[0;39m ==> Parameters: 
2021-12-20 20:36:40.515 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113338059198464[0;39m <==    Updates: 0
2021-12-20 20:36:40.515 INFO  com.job.EbookSnapshotJob                          :35   [32m128113338059198464[0;39m 生成今日电子书快照结束，耗时：491毫秒
2021-12-20 20:36:45.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113359001358336[0;39m 生成今日电子书快照开始
2021-12-20 20:36:45.302 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113359001358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:45.302 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113359001358336[0;39m ==> Parameters: 
2021-12-20 20:36:45.683 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113359001358336[0;39m <==    Updates: 0
2021-12-20 20:36:45.683 INFO  com.job.EbookSnapshotJob                          :35   [32m128113359001358336[0;39m 生成今日电子书快照结束，耗时：666毫秒
2021-12-20 20:36:50.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113379960295424[0;39m 生成今日电子书快照开始
2021-12-20 20:36:50.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113379960295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:50.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113379960295424[0;39m ==> Parameters: 
2021-12-20 20:36:50.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113379960295424[0;39m <==    Updates: 0
2021-12-20 20:36:50.251 INFO  com.job.EbookSnapshotJob                          :35   [32m128113379960295424[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 20:36:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113400931815424[0;39m 生成今日电子书快照开始
2021-12-20 20:36:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113400931815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:36:55.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113400931815424[0;39m ==> Parameters: 
2021-12-20 20:36:55.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113400931815424[0;39m <==    Updates: 0
2021-12-20 20:36:55.267 INFO  com.job.EbookSnapshotJob                          :35   [32m128113400931815424[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:37:00.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113421915918336[0;39m 生成今日电子书快照开始
2021-12-20 20:37:00.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113421915918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:00.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113421915918336[0;39m ==> Parameters: 
2021-12-20 20:37:00.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113421915918336[0;39m <==    Updates: 0
2021-12-20 20:37:00.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128113421915918336[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 20:37:05.017 INFO  com.job.DocJob                                    :32   [32m128113442887438336[0;39m 更新电子书下的文档数据开始
2021-12-20 20:37:05.098 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113442887438336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:37:05.098 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113442887438336[0;39m ==> Parameters: 
2021-12-20 20:37:05.270 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113442887438336[0;39m <==    Updates: 6
2021-12-20 20:37:05.270 INFO  com.job.DocJob                                    :35   [32m128113442887438336[0;39m 更新电子书下的文档数据结束，耗时：253毫秒
2021-12-20 20:37:05.270 INFO  com.job.EbookSnapshotJob                          :32   [32m128113443948597248[0;39m 生成今日电子书快照开始
2021-12-20 20:37:05.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113443948597248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:05.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113443948597248[0;39m ==> Parameters: 
2021-12-20 20:37:05.445 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113443948597248[0;39m <==    Updates: 0
2021-12-20 20:37:05.445 INFO  com.job.EbookSnapshotJob                          :35   [32m128113443948597248[0;39m 生成今日电子书快照结束，耗时：175毫秒
2021-12-20 20:37:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113463846375424[0;39m 生成今日电子书快照开始
2021-12-20 20:37:10.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113463846375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:10.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113463846375424[0;39m ==> Parameters: 
2021-12-20 20:37:10.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113463846375424[0;39m <==    Updates: 0
2021-12-20 20:37:10.268 INFO  com.job.EbookSnapshotJob                          :35   [32m128113463846375424[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 20:37:15.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128113484855644160[0;39m 生成今日电子书快照开始
2021-12-20 20:37:15.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113484855644160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:15.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113484855644160[0;39m ==> Parameters: 
2021-12-20 20:37:15.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113484855644160[0;39m <==    Updates: 0
2021-12-20 20:37:15.282 INFO  com.job.EbookSnapshotJob                          :35   [32m128113484855644160[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 20:37:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113505801998336[0;39m 生成今日电子书快照开始
2021-12-20 20:37:20.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113505801998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:20.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113505801998336[0;39m ==> Parameters: 
2021-12-20 20:37:20.367 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113505801998336[0;39m <==    Updates: 0
2021-12-20 20:37:20.367 INFO  com.job.EbookSnapshotJob                          :35   [32m128113505801998336[0;39m 生成今日电子书快照结束，耗时：350毫秒
2021-12-20 20:37:25.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128113526710603776[0;39m 生成今日电子书快照开始
2021-12-20 20:37:25.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113526710603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:25.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113526710603776[0;39m ==> Parameters: 
2021-12-20 20:37:25.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113526710603776[0;39m <==    Updates: 0
2021-12-20 20:37:25.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128113526710603776[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-20 20:37:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113547745038336[0;39m 生成今日电子书快照开始
2021-12-20 20:37:30.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113547745038336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:30.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113547745038336[0;39m ==> Parameters: 
2021-12-20 20:37:30.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113547745038336[0;39m <==    Updates: 0
2021-12-20 20:37:30.267 INFO  com.job.EbookSnapshotJob                          :35   [32m128113547745038336[0;39m 生成今日电子书快照结束，耗时：250毫秒
2021-12-20 20:37:35.016 INFO  com.job.DocJob                                    :32   [32m128113568712364032[0;39m 更新电子书下的文档数据开始
2021-12-20 20:37:35.083 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113568712364032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:37:35.083 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113568712364032[0;39m ==> Parameters: 
2021-12-20 20:37:35.224 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113568712364032[0;39m <==    Updates: 6
2021-12-20 20:37:35.224 INFO  com.job.DocJob                                    :35   [32m128113568712364032[0;39m 更新电子书下的文档数据结束，耗时：208毫秒
2021-12-20 20:37:35.224 INFO  com.job.EbookSnapshotJob                          :32   [32m128113569584779264[0;39m 生成今日电子书快照开始
2021-12-20 20:37:35.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113569584779264[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:35.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113569584779264[0;39m ==> Parameters: 
2021-12-20 20:37:35.414 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113569584779264[0;39m <==    Updates: 0
2021-12-20 20:37:35.414 INFO  com.job.EbookSnapshotJob                          :35   [32m128113569584779264[0;39m 生成今日电子书快照结束，耗时：190毫秒
2021-12-20 20:37:40.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128113589650329600[0;39m 生成今日电子书快照开始
2021-12-20 20:37:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113589650329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:40.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113589650329600[0;39m ==> Parameters: 
2021-12-20 20:37:40.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113589650329600[0;39m <==    Updates: 0
2021-12-20 20:37:40.214 INFO  com.job.EbookSnapshotJob                          :35   [32m128113589650329600[0;39m 生成今日电子书快照结束，耗时：206毫秒
2021-12-20 20:37:45.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128113610684764160[0;39m 生成今日电子书快照开始
2021-12-20 20:37:45.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113610684764160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:45.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113610684764160[0;39m ==> Parameters: 
2021-12-20 20:37:45.260 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113610684764160[0;39m <==    Updates: 0
2021-12-20 20:37:45.260 INFO  com.job.EbookSnapshotJob                          :35   [32m128113610684764160[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 20:37:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113631631118336[0;39m 生成今日电子书快照开始
2021-12-20 20:37:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113631631118336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:50.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113631631118336[0;39m ==> Parameters: 
2021-12-20 20:37:50.229 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113631631118336[0;39m <==    Updates: 0
2021-12-20 20:37:50.229 INFO  com.job.EbookSnapshotJob                          :35   [32m128113631631118336[0;39m 生成今日电子书快照结束，耗时：212毫秒
2021-12-20 20:37:55.020 INFO  com.job.EbookSnapshotJob                          :32   [32m128113652615221248[0;39m 生成今日电子书快照开始
2021-12-20 20:37:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113652615221248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:37:55.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113652615221248[0;39m ==> Parameters: 
2021-12-20 20:37:55.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113652615221248[0;39m <==    Updates: 0
2021-12-20 20:37:55.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128113652615221248[0;39m 生成今日电子书快照结束，耗时：241毫秒
2021-12-20 20:38:00.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128113673599324160[0;39m 生成今日电子书快照开始
2021-12-20 20:38:00.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113673599324160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:00.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113673599324160[0;39m ==> Parameters: 
2021-12-20 20:38:00.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113673599324160[0;39m <==    Updates: 0
2021-12-20 20:38:00.267 INFO  com.job.EbookSnapshotJob                          :35   [32m128113673599324160[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 20:38:05.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113694533095424[0;39m 生成今日电子书快照开始
2021-12-20 20:38:05.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113694533095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:05.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113694533095424[0;39m ==> Parameters: 
2021-12-20 20:38:05.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113694533095424[0;39m <==    Updates: 0
2021-12-20 20:38:05.252 INFO  com.job.EbookSnapshotJob                          :35   [32m128113694533095424[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 20:38:05.267 INFO  com.job.DocJob                                    :32   [32m128113695594254336[0;39m 更新电子书下的文档数据开始
2021-12-20 20:38:05.267 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113695594254336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:38:05.267 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113695594254336[0;39m ==> Parameters: 
2021-12-20 20:38:05.424 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113695594254336[0;39m <==    Updates: 6
2021-12-20 20:38:05.424 INFO  com.job.DocJob                                    :35   [32m128113695594254336[0;39m 更新电子书下的文档数据结束，耗时：157毫秒
2021-12-20 20:38:10.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113715504615424[0;39m 生成今日电子书快照开始
2021-12-20 20:38:10.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113715504615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:10.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113715504615424[0;39m ==> Parameters: 
2021-12-20 20:38:10.232 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113715504615424[0;39m <==    Updates: 0
2021-12-20 20:38:10.232 INFO  com.job.EbookSnapshotJob                          :35   [32m128113715504615424[0;39m 生成今日电子书快照结束，耗时：218毫秒
2021-12-20 20:38:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128113736480329728[0;39m 生成今日电子书快照开始
2021-12-20 20:38:15.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113736480329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:15.129 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113736480329728[0;39m ==> Parameters: 
2021-12-20 20:38:15.301 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113736480329728[0;39m <==    Updates: 0
2021-12-20 20:38:15.301 INFO  com.job.EbookSnapshotJob                          :35   [32m128113736480329728[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 20:38:20.029 INFO  com.job.EbookSnapshotJob                          :32   [32m128113757510569984[0;39m 生成今日电子书快照开始
2021-12-20 20:38:20.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113757510569984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:20.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113757510569984[0;39m ==> Parameters: 
2021-12-20 20:38:20.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113757510569984[0;39m <==    Updates: 0
2021-12-20 20:38:20.268 INFO  com.job.EbookSnapshotJob                          :35   [32m128113757510569984[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 20:38:25.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113778431758336[0;39m 生成今日电子书快照开始
2021-12-20 20:38:25.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113778431758336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:25.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113778431758336[0;39m ==> Parameters: 
2021-12-20 20:38:25.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113778431758336[0;39m <==    Updates: 0
2021-12-20 20:38:25.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128113778431758336[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 20:38:30.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128113799432638464[0;39m 生成今日电子书快照开始
2021-12-20 20:38:30.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113799432638464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:30.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113799432638464[0;39m ==> Parameters: 
2021-12-20 20:38:30.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113799432638464[0;39m <==    Updates: 0
2021-12-20 20:38:30.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128113799432638464[0;39m 生成今日电子书快照结束，耗时：237毫秒
2021-12-20 20:38:35.015 INFO  com.job.DocJob                                    :32   [32m128113820366409728[0;39m 更新电子书下的文档数据开始
2021-12-20 20:38:35.098 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113820366409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:38:35.098 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113820366409728[0;39m ==> Parameters: 
2021-12-20 20:38:35.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113820366409728[0;39m <==    Updates: 6
2021-12-20 20:38:35.251 INFO  com.job.DocJob                                    :35   [32m128113820366409728[0;39m 更新电子书下的文档数据结束，耗时：236毫秒
2021-12-20 20:38:35.251 INFO  com.job.EbookSnapshotJob                          :32   [32m128113821356265472[0;39m 生成今日电子书快照开始
2021-12-20 20:38:35.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113821356265472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113821356265472[0;39m ==> Parameters: 
2021-12-20 20:38:35.470 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113821356265472[0;39m <==    Updates: 0
2021-12-20 20:38:35.470 INFO  com.job.EbookSnapshotJob                          :35   [32m128113821356265472[0;39m 生成今日电子书快照结束，耗时：219毫秒
2021-12-20 20:38:40.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128113841333735424[0;39m 生成今日电子书快照开始
2021-12-20 20:38:40.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113841333735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:40.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113841333735424[0;39m ==> Parameters: 
2021-12-20 20:38:40.253 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113841333735424[0;39m <==    Updates: 0
2021-12-20 20:38:40.253 INFO  com.job.EbookSnapshotJob                          :35   [32m128113841333735424[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 20:38:45.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113862317838336[0;39m 生成今日电子书快照开始
2021-12-20 20:38:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113862317838336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:45.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113862317838336[0;39m ==> Parameters: 
2021-12-20 20:38:45.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113862317838336[0;39m <==    Updates: 0
2021-12-20 20:38:45.239 INFO  com.job.EbookSnapshotJob                          :35   [32m128113862317838336[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 20:38:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113883289358336[0;39m 生成今日电子书快照开始
2021-12-20 20:38:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113883289358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113883289358336[0;39m ==> Parameters: 
2021-12-20 20:38:50.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113883289358336[0;39m <==    Updates: 0
2021-12-20 20:38:50.239 INFO  com.job.EbookSnapshotJob                          :35   [32m128113883289358336[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 20:38:55.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113904260878336[0;39m 生成今日电子书快照开始
2021-12-20 20:38:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113904260878336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:38:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113904260878336[0;39m ==> Parameters: 
2021-12-20 20:38:55.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113904260878336[0;39m <==    Updates: 0
2021-12-20 20:38:55.230 INFO  com.job.EbookSnapshotJob                          :35   [32m128113904260878336[0;39m 生成今日电子书快照结束，耗时：213毫秒
2021-12-20 20:39:00.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113925232398336[0;39m 生成今日电子书快照开始
2021-12-20 20:39:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113925232398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113925232398336[0;39m ==> Parameters: 
2021-12-20 20:39:00.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113925232398336[0;39m <==    Updates: 0
2021-12-20 20:39:00.230 INFO  com.job.EbookSnapshotJob                          :35   [32m128113925232398336[0;39m 生成今日电子书快照结束，耗时：213毫秒
2021-12-20 20:39:05.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128113946208112640[0;39m 生成今日电子书快照开始
2021-12-20 20:39:05.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113946208112640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:05.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113946208112640[0;39m ==> Parameters: 
2021-12-20 20:39:05.301 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113946208112640[0;39m <==    Updates: 0
2021-12-20 20:39:05.301 INFO  com.job.EbookSnapshotJob                          :35   [32m128113946208112640[0;39m 生成今日电子书快照结束，耗时：283毫秒
2021-12-20 20:39:05.301 INFO  com.job.DocJob                                    :32   [32m128113947395100672[0;39m 更新电子书下的文档数据开始
2021-12-20 20:39:05.301 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113947395100672[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:39:05.301 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113947395100672[0;39m ==> Parameters: 
2021-12-20 20:39:05.514 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128113947395100672[0;39m <==    Updates: 6
2021-12-20 20:39:05.514 INFO  com.job.DocJob                                    :35   [32m128113947395100672[0;39m 更新电子书下的文档数据结束，耗时：213毫秒
2021-12-20 20:39:10.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128113967204798464[0;39m 生成今日电子书快照开始
2021-12-20 20:39:10.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113967204798464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:10.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113967204798464[0;39m ==> Parameters: 
2021-12-20 20:39:10.276 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113967204798464[0;39m <==    Updates: 0
2021-12-20 20:39:10.276 INFO  com.job.EbookSnapshotJob                          :35   [32m128113967204798464[0;39m 生成今日电子书快照结束，耗时：252毫秒
2021-12-20 20:39:15.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128113988146958336[0;39m 生成今日电子书快照开始
2021-12-20 20:39:15.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113988146958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:15.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113988146958336[0;39m ==> Parameters: 
2021-12-20 20:39:15.717 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128113988146958336[0;39m <==    Updates: 0
2021-12-20 20:39:15.717 INFO  com.job.EbookSnapshotJob                          :35   [32m128113988146958336[0;39m 生成今日电子书快照结束，耗时：700毫秒
2021-12-20 20:39:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114009118478336[0;39m 生成今日电子书快照开始
2021-12-20 20:39:20.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114009118478336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:20.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114009118478336[0;39m ==> Parameters: 
2021-12-20 20:39:20.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114009118478336[0;39m <==    Updates: 0
2021-12-20 20:39:20.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128114009118478336[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 20:39:25.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128114030077415424[0;39m 生成今日电子书快照开始
2021-12-20 20:39:25.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114030077415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:25.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114030077415424[0;39m ==> Parameters: 
2021-12-20 20:39:25.218 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114030077415424[0;39m <==    Updates: 0
2021-12-20 20:39:25.218 INFO  com.job.EbookSnapshotJob                          :35   [32m128114030077415424[0;39m 生成今日电子书快照结束，耗时：204毫秒
2021-12-20 20:39:30.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128114051048935424[0;39m 生成今日电子书快照开始
2021-12-20 20:39:30.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114051048935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:30.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114051048935424[0;39m ==> Parameters: 
2021-12-20 20:39:30.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114051048935424[0;39m <==    Updates: 0
2021-12-20 20:39:30.252 INFO  com.job.EbookSnapshotJob                          :35   [32m128114051048935424[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 20:39:35.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128114071995289600[0;39m 生成今日电子书快照开始
2021-12-20 20:39:35.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114071995289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:35.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114071995289600[0;39m ==> Parameters: 
2021-12-20 20:39:35.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114071995289600[0;39m <==    Updates: 0
2021-12-20 20:39:35.251 INFO  com.job.EbookSnapshotJob                          :35   [32m128114071995289600[0;39m 生成今日电子书快照结束，耗时：243毫秒
2021-12-20 20:39:35.251 INFO  com.job.DocJob                                    :32   [32m128114073014505472[0;39m 更新电子书下的文档数据开始
2021-12-20 20:39:35.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114073014505472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:39:35.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114073014505472[0;39m ==> Parameters: 
2021-12-20 20:39:35.408 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114073014505472[0;39m <==    Updates: 6
2021-12-20 20:39:35.408 INFO  com.job.DocJob                                    :35   [32m128114073014505472[0;39m 更新电子书下的文档数据结束，耗时：157毫秒
2021-12-20 20:39:40.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128114093033918464[0;39m 生成今日电子书快照开始
2021-12-20 20:39:40.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114093033918464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:40.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114093033918464[0;39m ==> Parameters: 
2021-12-20 20:39:40.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114093033918464[0;39m <==    Updates: 0
2021-12-20 20:39:40.277 INFO  com.job.EbookSnapshotJob                          :35   [32m128114093033918464[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:39:45.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128114113963495424[0;39m 生成今日电子书快照开始
2021-12-20 20:39:45.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114113963495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:45.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114113963495424[0;39m ==> Parameters: 
2021-12-20 20:39:45.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114113963495424[0;39m <==    Updates: 0
2021-12-20 20:39:45.283 INFO  com.job.EbookSnapshotJob                          :35   [32m128114113963495424[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-20 20:39:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114134947598336[0;39m 生成今日电子书快照开始
2021-12-20 20:39:50.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114134947598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:50.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114134947598336[0;39m ==> Parameters: 
2021-12-20 20:39:50.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114134947598336[0;39m <==    Updates: 0
2021-12-20 20:39:50.239 INFO  com.job.EbookSnapshotJob                          :35   [32m128114134947598336[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 20:39:55.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128114155910729728[0;39m 生成今日电子书快照开始
2021-12-20 20:39:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114155910729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:39:55.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114155910729728[0;39m ==> Parameters: 
2021-12-20 20:39:55.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114155910729728[0;39m <==    Updates: 0
2021-12-20 20:39:55.239 INFO  com.job.EbookSnapshotJob                          :35   [32m128114155910729728[0;39m 生成今日电子书快照结束，耗时：224毫秒
2021-12-20 20:40:00.003 INFO  com.job.EbookSnapshotJob                          :32   [32m128114176831918080[0;39m 生成今日电子书快照开始
2021-12-20 20:40:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114176831918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:00.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114176831918080[0;39m ==> Parameters: 
2021-12-20 20:40:00.214 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114176831918080[0;39m <==    Updates: 0
2021-12-20 20:40:00.214 INFO  com.job.EbookSnapshotJob                          :35   [32m128114176831918080[0;39m 生成今日电子书快照结束，耗时：211毫秒
2021-12-20 20:40:05.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114197862158336[0;39m 生成今日电子书快照开始
2021-12-20 20:40:05.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114197862158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:05.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114197862158336[0;39m ==> Parameters: 
2021-12-20 20:40:05.255 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114197862158336[0;39m <==    Updates: 0
2021-12-20 20:40:05.255 INFO  com.job.EbookSnapshotJob                          :35   [32m128114197862158336[0;39m 生成今日电子书快照结束，耗时：238毫秒
2021-12-20 20:40:05.255 INFO  com.job.DocJob                                    :32   [32m128114198860402688[0;39m 更新电子书下的文档数据开始
2021-12-20 20:40:05.255 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114198860402688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:40:05.255 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114198860402688[0;39m ==> Parameters: 
2021-12-20 20:40:05.430 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114198860402688[0;39m <==    Updates: 6
2021-12-20 20:40:05.430 INFO  com.job.DocJob                                    :35   [32m128114198860402688[0;39m 更新电子书下的文档数据结束，耗时：175毫秒
2021-12-20 20:40:10.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128114218858844160[0;39m 生成今日电子书快照开始
2021-12-20 20:40:10.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114218858844160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:10.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114218858844160[0;39m ==> Parameters: 
2021-12-20 20:40:10.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114218858844160[0;39m <==    Updates: 0
2021-12-20 20:40:10.268 INFO  com.job.EbookSnapshotJob                          :35   [32m128114218858844160[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 20:40:15.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114239805198336[0;39m 生成今日电子书快照开始
2021-12-20 20:40:15.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114239805198336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:15.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114239805198336[0;39m ==> Parameters: 
2021-12-20 20:40:15.333 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114239805198336[0;39m <==    Updates: 0
2021-12-20 20:40:15.333 INFO  com.job.EbookSnapshotJob                          :35   [32m128114239805198336[0;39m 生成今日电子书快照结束，耗时：316毫秒
2021-12-20 20:40:20.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114260776718336[0;39m 生成今日电子书快照开始
2021-12-20 20:40:20.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114260776718336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:20.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114260776718336[0;39m ==> Parameters: 
2021-12-20 20:40:20.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114260776718336[0;39m <==    Updates: 0
2021-12-20 20:40:20.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128114260776718336[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 20:40:25.023 INFO  com.job.EbookSnapshotJob                          :32   [32m128114281773404160[0;39m 生成今日电子书快照开始
2021-12-20 20:40:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114281773404160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:25.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114281773404160[0;39m ==> Parameters: 
2021-12-20 20:40:25.277 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114281773404160[0;39m <==    Updates: 0
2021-12-20 20:40:25.277 INFO  com.job.EbookSnapshotJob                          :35   [32m128114281773404160[0;39m 生成今日电子书快照结束，耗时：254毫秒
2021-12-20 20:40:30.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114302719758336[0;39m 生成今日电子书快照开始
2021-12-20 20:40:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114302719758336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:30.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114302719758336[0;39m ==> Parameters: 
2021-12-20 20:40:30.224 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114302719758336[0;39m <==    Updates: 0
2021-12-20 20:40:30.224 INFO  com.job.EbookSnapshotJob                          :35   [32m128114302719758336[0;39m 生成今日电子书快照结束，耗时：207毫秒
2021-12-20 20:40:35.014 INFO  com.job.DocJob                                    :32   [32m128114323678695424[0;39m 更新电子书下的文档数据开始
2021-12-20 20:40:35.092 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114323678695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:40:35.092 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114323678695424[0;39m ==> Parameters: 
2021-12-20 20:40:35.251 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114323678695424[0;39m <==    Updates: 6
2021-12-20 20:40:35.267 INFO  com.job.DocJob                                    :35   [32m128114323678695424[0;39m 更新电子书下的文档数据结束，耗时：253毫秒
2021-12-20 20:40:35.267 INFO  com.job.EbookSnapshotJob                          :32   [32m128114324739854336[0;39m 生成今日电子书快照开始
2021-12-20 20:40:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114324739854336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:35.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114324739854336[0;39m ==> Parameters: 
2021-12-20 20:40:35.407 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114324739854336[0;39m <==    Updates: 0
2021-12-20 20:40:35.407 INFO  com.job.EbookSnapshotJob                          :35   [32m128114324739854336[0;39m 生成今日电子书快照结束，耗时：140毫秒
2021-12-20 20:40:40.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128114344692158464[0;39m 生成今日电子书快照开始
2021-12-20 20:40:40.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114344692158464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:40.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114344692158464[0;39m ==> Parameters: 
2021-12-20 20:40:40.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114344692158464[0;39m <==    Updates: 0
2021-12-20 20:40:40.263 INFO  com.job.EbookSnapshotJob                          :35   [32m128114344692158464[0;39m 生成今日电子书快照结束，耗时：239毫秒
2021-12-20 20:40:45.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128114365638512640[0;39m 生成今日电子书快照开始
2021-12-20 20:40:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114365638512640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:45.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114365638512640[0;39m ==> Parameters: 
2021-12-20 20:40:45.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114365638512640[0;39m <==    Updates: 0
2021-12-20 20:40:45.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128114365638512640[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:40:50.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114386605838336[0;39m 生成今日电子书快照开始
2021-12-20 20:40:50.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114386605838336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:50.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114386605838336[0;39m ==> Parameters: 
2021-12-20 20:40:50.270 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114386605838336[0;39m <==    Updates: 0
2021-12-20 20:40:50.270 INFO  com.job.EbookSnapshotJob                          :35   [32m128114386605838336[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:40:55.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128114407564775424[0;39m 生成今日电子书快照开始
2021-12-20 20:40:55.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114407564775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:40:55.076 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114407564775424[0;39m ==> Parameters: 
2021-12-20 20:40:55.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114407564775424[0;39m <==    Updates: 0
2021-12-20 20:40:55.233 INFO  com.job.EbookSnapshotJob                          :35   [32m128114407564775424[0;39m 生成今日电子书快照结束，耗时：219毫秒
2021-12-20 20:41:00.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128114428511129600[0;39m 生成今日电子书快照开始
2021-12-20 20:41:00.133 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114428511129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:00.133 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114428511129600[0;39m ==> Parameters: 
2021-12-20 20:41:00.432 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114428511129600[0;39m <==    Updates: 0
2021-12-20 20:41:00.432 INFO  com.job.EbookSnapshotJob                          :35   [32m128114428511129600[0;39m 生成今日电子书快照结束，耗时：424毫秒
2021-12-20 20:41:05.008 INFO  com.job.DocJob                                    :32   [32m128114449482649600[0;39m 更新电子书下的文档数据开始
2021-12-20 20:41:05.133 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114449482649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:41:05.133 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114449482649600[0;39m ==> Parameters: 
2021-12-20 20:41:05.284 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114449482649600[0;39m <==    Updates: 6
2021-12-20 20:41:05.284 INFO  com.job.DocJob                                    :35   [32m128114449482649600[0;39m 更新电子书下的文档数据结束，耗时：276毫秒
2021-12-20 20:41:05.284 INFO  com.job.EbookSnapshotJob                          :32   [32m128114450640277504[0;39m 生成今日电子书快照开始
2021-12-20 20:41:05.284 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114450640277504[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:05.284 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114450640277504[0;39m ==> Parameters: 
2021-12-20 20:41:05.539 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114450640277504[0;39m <==    Updates: 0
2021-12-20 20:41:05.539 INFO  com.job.EbookSnapshotJob                          :35   [32m128114450640277504[0;39m 生成今日电子书快照结束，耗时：255毫秒
2021-12-20 20:41:09.780 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-20 20:41:09.781 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-20 20:41:09.783 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2021-12-20 20:41:09.831 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：okveaVz2dt，session id：0，当前连接数：1
2021-12-20 20:41:10.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128114470496112640[0;39m 生成今日电子书快照开始
2021-12-20 20:41:10.080 INFO  com.aspect.LogAspect                              :54   [32m128114470751965185[0;39m ------------- 开始 -------------
2021-12-20 20:41:10.080 INFO  com.aspect.LogAspect                              :54   [32m128114470751965184[0;39m ------------- 开始 -------------
2021-12-20 20:41:10.080 INFO  com.aspect.LogAspect                              :54   [32m128114470751965186[0;39m ------------- 开始 -------------
2021-12-20 20:41:10.081 INFO  com.aspect.LogAspect                              :55   [32m128114470751965186[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:41:10.081 INFO  com.aspect.LogAspect                              :55   [32m128114470751965184[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:41:10.081 INFO  com.aspect.LogAspect                              :55   [32m128114470751965185[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:41:10.082 INFO  com.aspect.LogAspect                              :56   [32m128114470751965185[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:41:10.082 INFO  com.aspect.LogAspect                              :56   [32m128114470751965186[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:41:10.082 INFO  com.aspect.LogAspect                              :56   [32m128114470751965184[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:41:10.082 INFO  com.aspect.LogAspect                              :57   [32m128114470751965186[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:41:10.082 INFO  com.aspect.LogAspect                              :57   [32m128114470751965184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:41:10.082 INFO  com.aspect.LogAspect                              :57   [32m128114470751965185[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:41:10.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114470496112640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:10.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114470496112640[0;39m ==> Parameters: 
2021-12-20 20:41:10.121 INFO  com.aspect.LogAspect                              :80   [32m128114470751965184[0;39m 请求参数: []
2021-12-20 20:41:10.121 INFO  com.aspect.LogAspect                              :80   [32m128114470751965186[0;39m 请求参数: []
2021-12-20 20:41:10.121 INFO  com.aspect.LogAspect                              :80   [32m128114470751965185[0;39m 请求参数: []
2021-12-20 20:41:10.196 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114470751965186[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:41:10.198 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114470751965186[0;39m ==> Parameters: 
2021-12-20 20:41:10.201 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114470751965184[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:41:10.202 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114470751965184[0;39m ==> Parameters: 
2021-12-20 20:41:10.218 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114470751965185[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:41:10.219 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114470751965185[0;39m ==> Parameters: 
2021-12-20 20:41:10.243 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114470496112640[0;39m <==    Updates: 0
2021-12-20 20:41:10.244 INFO  com.job.EbookSnapshotJob                          :35   [32m128114470496112640[0;39m 生成今日电子书快照结束，耗时：226毫秒
2021-12-20 20:41:10.362 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114470751965186[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:41:10.362 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:41:10.363 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:41:10.362 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114470751965184[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:41:10.365 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114470751965186[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:41:10.365 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114470751965184[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:41:10.366 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:41:10.367 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:41:10.368 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:41:10.369 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114470751965186[0;39m <==      Total: 1
2021-12-20 20:41:10.369 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114470751965184[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:41:10.369 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:41:10.370 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114470751965184[0;39m <==      Total: 2
2021-12-20 20:41:10.370 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:41:10.371 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:41:10.371 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:41:10.372 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:41:10.373 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:41:10.374 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:41:10.374 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:41:10.375 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:41:10.376 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:41:10.377 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:41:10.377 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:41:10.381 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:41:10.382 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:41:10.383 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114470751965185[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:41:10.383 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114470751965185[0;39m <==      Total: 19
2021-12-20 20:41:10.401 INFO  com.aspect.LogAspect                              :92   [32m128114470751965185[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:41:10.402 INFO  com.aspect.LogAspect                              :93   [32m128114470751965185[0;39m ------------- 结束 耗时：324 ms -------------
2021-12-20 20:41:10.403 INFO  com.aspect.LogAspect                              :92   [32m128114470751965186[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:41:10.403 INFO  com.aspect.LogAspect                              :92   [32m128114470751965184[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:41:10.403 INFO  com.aspect.LogAspect                              :93   [32m128114470751965186[0;39m ------------- 结束 耗时：324 ms -------------
2021-12-20 20:41:10.403 INFO  com.aspect.LogAspect                              :93   [32m128114470751965184[0;39m ------------- 结束 耗时：325 ms -------------
2021-12-20 20:41:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128114491455049728[0;39m 生成今日电子书快照开始
2021-12-20 20:41:15.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114491455049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:15.109 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114491455049728[0;39m ==> Parameters: 
2021-12-20 20:41:15.268 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114491455049728[0;39m <==    Updates: 0
2021-12-20 20:41:15.268 INFO  com.job.EbookSnapshotJob                          :35   [32m128114491455049728[0;39m 生成今日电子书快照结束，耗时：253毫秒
2021-12-20 20:41:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m128114512422375424[0;39m 生成今日电子书快照开始
2021-12-20 20:41:20.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114512422375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:20.077 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114512422375424[0;39m ==> Parameters: 
2021-12-20 20:41:20.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114512422375424[0;39m <==    Updates: 0
2021-12-20 20:41:20.233 INFO  com.job.EbookSnapshotJob                          :35   [32m128114512422375424[0;39m 生成今日电子书快照结束，耗时：219毫秒
2021-12-20 20:41:25.024 INFO  com.job.EbookSnapshotJob                          :32   [32m128114533435838464[0;39m 生成今日电子书快照开始
2021-12-20 20:41:25.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114533435838464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:25.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114533435838464[0;39m ==> Parameters: 
2021-12-20 20:41:25.258 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114533435838464[0;39m <==    Updates: 0
2021-12-20 20:41:25.259 INFO  com.job.EbookSnapshotJob                          :35   [32m128114533435838464[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 20:41:30.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128114554369609728[0;39m 生成今日电子书快照开始
2021-12-20 20:41:30.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114554369609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:30.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114554369609728[0;39m ==> Parameters: 
2021-12-20 20:41:30.301 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114554369609728[0;39m <==    Updates: 0
2021-12-20 20:41:30.301 INFO  com.job.EbookSnapshotJob                          :35   [32m128114554369609728[0;39m 生成今日电子书快照结束，耗时：286毫秒
2021-12-20 20:41:35.008 INFO  com.job.DocJob                                    :32   [32m128114575311769600[0;39m 更新电子书下的文档数据开始
2021-12-20 20:41:35.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114575311769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:41:35.102 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114575311769600[0;39m ==> Parameters: 
2021-12-20 20:41:35.261 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114575311769600[0;39m <==    Updates: 6
2021-12-20 20:41:35.261 INFO  com.job.DocJob                                    :35   [32m128114575311769600[0;39m 更新电子书下的文档数据结束，耗时：253毫秒
2021-12-20 20:41:35.261 INFO  com.job.EbookSnapshotJob                          :32   [32m128114576372928512[0;39m 生成今日电子书快照开始
2021-12-20 20:41:35.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114576372928512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:35.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114576372928512[0;39m ==> Parameters: 
2021-12-20 20:41:35.417 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114576372928512[0;39m <==    Updates: 0
2021-12-20 20:41:35.417 INFO  com.job.EbookSnapshotJob                          :35   [32m128114576372928512[0;39m 生成今日电子书快照结束，耗时：156毫秒
2021-12-20 20:41:37.467 INFO  com.aspect.LogAspect                              :54   [32m128114585625563136[0;39m ------------- 开始 -------------
2021-12-20 20:41:37.468 INFO  com.aspect.LogAspect                              :55   [32m128114585625563136[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:41:37.468 INFO  com.aspect.LogAspect                              :56   [32m128114585625563136[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:41:37.469 INFO  com.aspect.LogAspect                              :57   [32m128114585625563136[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:41:37.469 INFO  com.aspect.LogAspect                              :80   [32m128114585625563136[0;39m 请求参数: []
2021-12-20 20:41:37.472 INFO  com.aspect.LogAspect                              :54   [32m128114585646534656[0;39m ------------- 开始 -------------
2021-12-20 20:41:37.473 INFO  com.aspect.LogAspect                              :55   [32m128114585646534656[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:41:37.473 INFO  com.aspect.LogAspect                              :56   [32m128114585646534656[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:41:37.473 INFO  com.aspect.LogAspect                              :57   [32m128114585646534656[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:41:37.473 INFO  com.aspect.LogAspect                              :80   [32m128114585646534656[0;39m 请求参数: []
2021-12-20 20:41:37.475 INFO  com.aspect.LogAspect                              :54   [32m128114585659117568[0;39m ------------- 开始 -------------
2021-12-20 20:41:37.475 INFO  com.aspect.LogAspect                              :55   [32m128114585659117568[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:41:37.475 INFO  com.aspect.LogAspect                              :56   [32m128114585659117568[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:41:37.475 INFO  com.aspect.LogAspect                              :57   [32m128114585659117568[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:41:37.476 INFO  com.aspect.LogAspect                              :80   [32m128114585659117568[0;39m 请求参数: []
2021-12-20 20:41:37.550 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114585625563136[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:41:37.550 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114585625563136[0;39m ==> Parameters: 
2021-12-20 20:41:37.562 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114585646534656[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:41:37.562 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114585659117568[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:41:37.562 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114585659117568[0;39m ==> Parameters: 
2021-12-20 20:41:37.562 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114585646534656[0;39m ==> Parameters: 
2021-12-20 20:41:37.628 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114585625563136[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:41:37.630 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114585625563136[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:41:37.632 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:41:37.633 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:41:37.634 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114585625563136[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:41:37.635 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:41:37.635 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114585625563136[0;39m <==      Total: 2
2021-12-20 20:41:37.637 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:41:37.637 INFO  com.aspect.LogAspect                              :92   [32m128114585625563136[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:41:37.638 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:41:37.640 INFO  com.aspect.LogAspect                              :93   [32m128114585625563136[0;39m ------------- 结束 耗时：173 ms -------------
2021-12-20 20:41:37.641 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:41:37.642 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114585659117568[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:41:37.642 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:41:37.644 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:41:37.644 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114585659117568[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:41:37.645 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:41:37.646 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114585659117568[0;39m <==      Total: 1
2021-12-20 20:41:37.646 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:41:37.647 INFO  com.aspect.LogAspect                              :92   [32m128114585659117568[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:41:37.647 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:41:37.648 INFO  com.aspect.LogAspect                              :93   [32m128114585659117568[0;39m ------------- 结束 耗时：173 ms -------------
2021-12-20 20:41:37.648 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:41:37.649 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:41:37.651 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:41:37.652 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:41:37.653 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:41:37.654 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:41:37.655 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:41:37.656 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:41:37.657 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114585646534656[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:41:37.658 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114585646534656[0;39m <==      Total: 19
2021-12-20 20:41:37.661 INFO  com.aspect.LogAspect                              :92   [32m128114585646534656[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:41:37.662 INFO  com.aspect.LogAspect                              :93   [32m128114585646534656[0;39m ------------- 结束 耗时：190 ms -------------
2021-12-20 20:41:39.335 INFO  com.websocket.WebSocketServer                     :41   [32m                  [0;39m 连接关闭，token：okveaVz2dt，session id：0！当前连接数：0
2021-12-20 20:41:40.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114596321038336[0;39m 生成今日电子书快照开始
2021-12-20 20:41:40.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114596321038336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:40.108 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114596321038336[0;39m ==> Parameters: 
2021-12-20 20:41:40.252 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114596321038336[0;39m <==    Updates: 0
2021-12-20 20:41:40.252 INFO  com.job.EbookSnapshotJob                          :35   [32m128114596321038336[0;39m 生成今日电子书快照结束，耗时：235毫秒
2021-12-20 20:41:45.001 INFO  com.job.EbookSnapshotJob                          :32   [32m128114617225449472[0;39m 生成今日电子书快照开始
2021-12-20 20:41:45.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114617225449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:45.068 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114617225449472[0;39m ==> Parameters: 
2021-12-20 20:41:45.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114617225449472[0;39m <==    Updates: 0
2021-12-20 20:41:45.271 INFO  com.job.EbookSnapshotJob                          :35   [32m128114617225449472[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-20 20:41:50.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128114638226329600[0;39m 生成今日电子书快照开始
2021-12-20 20:41:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114638226329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:50.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114638226329600[0;39m ==> Parameters: 
2021-12-20 20:41:50.230 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114638226329600[0;39m <==    Updates: 0
2021-12-20 20:41:50.230 INFO  com.job.EbookSnapshotJob                          :35   [32m128114638226329600[0;39m 生成今日电子书快照结束，耗时：222毫秒
2021-12-20 20:41:55.017 INFO  com.job.EbookSnapshotJob                          :32   [32m128114659235598336[0;39m 生成今日电子书快照开始
2021-12-20 20:41:55.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114659235598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:41:55.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114659235598336[0;39m ==> Parameters: 
2021-12-20 20:41:55.302 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114659235598336[0;39m <==    Updates: 0
2021-12-20 20:41:55.302 INFO  com.job.EbookSnapshotJob                          :35   [32m128114659235598336[0;39m 生成今日电子书快照结束，耗时：285毫秒
2021-12-20 20:42:00.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128114680169369600[0;39m 生成今日电子书快照开始
2021-12-20 20:42:00.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114680169369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:00.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114680169369600[0;39m ==> Parameters: 
2021-12-20 20:42:00.308 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114680169369600[0;39m <==    Updates: 0
2021-12-20 20:42:00.308 INFO  com.job.EbookSnapshotJob                          :35   [32m128114680169369600[0;39m 生成今日电子书快照结束，耗时：300毫秒
2021-12-20 20:42:05.023 INFO  com.job.DocJob                                    :32   [32m128114701203804160[0;39m 更新电子书下的文档数据开始
2021-12-20 20:42:05.085 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114701203804160[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:42:05.101 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114701203804160[0;39m ==> Parameters: 
2021-12-20 20:42:05.261 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114701203804160[0;39m <==    Updates: 6
2021-12-20 20:42:05.261 INFO  com.job.DocJob                                    :35   [32m128114701203804160[0;39m 更新电子书下的文档数据结束，耗时：238毫秒
2021-12-20 20:42:05.261 INFO  com.job.EbookSnapshotJob                          :32   [32m128114702202048512[0;39m 生成今日电子书快照开始
2021-12-20 20:42:05.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114702202048512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:05.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114702202048512[0;39m ==> Parameters: 
2021-12-20 20:42:05.452 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114702202048512[0;39m <==    Updates: 0
2021-12-20 20:42:05.452 INFO  com.job.EbookSnapshotJob                          :35   [32m128114702202048512[0;39m 生成今日电子书快照结束，耗时：191毫秒
2021-12-20 20:42:10.021 INFO  com.job.EbookSnapshotJob                          :32   [32m128114722166935552[0;39m 生成今日电子书快照开始
2021-12-20 20:42:10.139 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114722166935552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:10.140 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114722166935552[0;39m ==> Parameters: 
2021-12-20 20:42:10.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114722166935552[0;39m <==    Updates: 0
2021-12-20 20:42:10.292 INFO  com.job.EbookSnapshotJob                          :35   [32m128114722166935552[0;39m 生成今日电子书快照结束，耗时：271毫秒
2021-12-20 20:42:11.035 INFO  com.websocket.WebSocketServer                     :32   [32m128114470751965185[0;39m 有新连接：token：fSl1rlti3m，session id：1，当前连接数：1
2021-12-20 20:42:11.267 INFO  com.aspect.LogAspect                              :54   [32m128114727393038336[0;39m ------------- 开始 -------------
2021-12-20 20:42:11.267 INFO  com.aspect.LogAspect                              :55   [32m128114727393038336[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:42:11.268 INFO  com.aspect.LogAspect                              :56   [32m128114727393038336[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:42:11.268 INFO  com.aspect.LogAspect                              :57   [32m128114727393038336[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:11.268 INFO  com.aspect.LogAspect                              :80   [32m128114727393038336[0;39m 请求参数: []
2021-12-20 20:42:11.268 INFO  com.aspect.LogAspect                              :54   [32m128114727397232640[0;39m ------------- 开始 -------------
2021-12-20 20:42:11.269 INFO  com.aspect.LogAspect                              :55   [32m128114727397232640[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:42:11.269 INFO  com.aspect.LogAspect                              :56   [32m128114727397232640[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:42:11.269 INFO  com.aspect.LogAspect                              :57   [32m128114727397232640[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:11.269 INFO  com.aspect.LogAspect                              :80   [32m128114727397232640[0;39m 请求参数: []
2021-12-20 20:42:11.273 INFO  com.aspect.LogAspect                              :54   [32m128114727418204160[0;39m ------------- 开始 -------------
2021-12-20 20:42:11.273 INFO  com.aspect.LogAspect                              :55   [32m128114727418204160[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:11.273 INFO  com.aspect.LogAspect                              :56   [32m128114727418204160[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:11.273 INFO  com.aspect.LogAspect                              :57   [32m128114727418204160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:11.274 INFO  com.aspect.LogAspect                              :80   [32m128114727418204160[0;39m 请求参数: []
2021-12-20 20:42:11.349 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114727393038336[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:11.349 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114727397232640[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:11.349 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114727397232640[0;39m ==> Parameters: 
2021-12-20 20:42:11.349 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114727393038336[0;39m ==> Parameters: 
2021-12-20 20:42:11.351 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114727418204160[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:11.351 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114727418204160[0;39m ==> Parameters: 
2021-12-20 20:42:11.441 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114727393038336[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:42:11.442 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114727397232640[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:42:11.443 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114727397232640[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:42:11.443 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114727393038336[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:42:11.443 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:11.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:11.444 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114727397232640[0;39m <==      Total: 1
2021-12-20 20:42:11.444 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:11.445 INFO  com.aspect.LogAspect                              :92   [32m128114727397232640[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:42:11.445 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114727393038336[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:42:11.445 INFO  com.aspect.LogAspect                              :93   [32m128114727397232640[0;39m ------------- 结束 耗时：177 ms -------------
2021-12-20 20:42:11.445 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:11.445 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114727393038336[0;39m <==      Total: 2
2021-12-20 20:42:11.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:11.446 INFO  com.aspect.LogAspect                              :92   [32m128114727393038336[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:42:11.446 INFO  com.aspect.LogAspect                              :93   [32m128114727393038336[0;39m ------------- 结束 耗时：179 ms -------------
2021-12-20 20:42:11.446 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:11.447 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:11.447 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:11.448 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:11.449 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:11.449 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:11.451 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:11.452 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:11.453 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:11.454 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:11.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:11.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:11.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:11.456 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:11.456 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114727418204160[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:11.457 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114727418204160[0;39m <==      Total: 19
2021-12-20 20:42:11.459 INFO  com.aspect.LogAspect                              :92   [32m128114727418204160[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:11.460 INFO  com.aspect.LogAspect                              :93   [32m128114727418204160[0;39m ------------- 结束 耗时：187 ms -------------
2021-12-20 20:42:15.007 INFO  com.job.EbookSnapshotJob                          :32   [32m128114743079735296[0;39m 生成今日电子书快照开始
2021-12-20 20:42:15.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114743079735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:15.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114743079735296[0;39m ==> Parameters: 
2021-12-20 20:42:15.339 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114743079735296[0;39m <==    Updates: 0
2021-12-20 20:42:15.339 INFO  com.job.EbookSnapshotJob                          :35   [32m128114743079735296[0;39m 生成今日电子书快照结束，耗时：332毫秒
2021-12-20 20:42:20.008 INFO  com.job.EbookSnapshotJob                          :32   [32m128114764055449600[0;39m 生成今日电子书快照开始
2021-12-20 20:42:20.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114764055449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:20.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114764055449600[0;39m ==> Parameters: 
2021-12-20 20:42:20.292 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114764055449600[0;39m <==    Updates: 0
2021-12-20 20:42:20.292 INFO  com.job.EbookSnapshotJob                          :35   [32m128114764055449600[0;39m 生成今日电子书快照结束，耗时：284毫秒
2021-12-20 20:42:25.016 INFO  com.job.EbookSnapshotJob                          :32   [32m128114785060524032[0;39m 生成今日电子书快照开始
2021-12-20 20:42:25.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114785060524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:25.114 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114785060524032[0;39m ==> Parameters: 
2021-12-20 20:42:25.261 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114785060524032[0;39m <==    Updates: 0
2021-12-20 20:42:25.261 INFO  com.job.EbookSnapshotJob                          :35   [32m128114785060524032[0;39m 生成今日电子书快照结束，耗时：244毫秒
2021-12-20 20:42:30.018 INFO  com.job.EbookSnapshotJob                          :32   [32m128114806040432640[0;39m 生成今日电子书快照开始
2021-12-20 20:42:30.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114806040432640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:30.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114806040432640[0;39m ==> Parameters: 
2021-12-20 20:42:30.267 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114806040432640[0;39m <==    Updates: 0
2021-12-20 20:42:30.267 INFO  com.job.EbookSnapshotJob                          :35   [32m128114806040432640[0;39m 生成今日电子书快照结束，耗时：249毫秒
2021-12-20 20:42:35.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128114826961620992[0;39m 生成今日电子书快照开始
2021-12-20 20:42:35.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114826961620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:35.097 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114826961620992[0;39m ==> Parameters: 
2021-12-20 20:42:35.265 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114826961620992[0;39m <==    Updates: 0
2021-12-20 20:42:35.266 INFO  com.job.EbookSnapshotJob                          :35   [32m128114826961620992[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-20 20:42:35.268 INFO  com.job.DocJob                                    :32   [32m128114828060528640[0;39m 更新电子书下的文档数据开始
2021-12-20 20:42:35.269 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114828060528640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:42:35.269 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114828060528640[0;39m ==> Parameters: 
2021-12-20 20:42:35.416 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114828060528640[0;39m <==    Updates: 6
2021-12-20 20:42:35.416 INFO  com.job.DocJob                                    :35   [32m128114828060528640[0;39m 更新电子书下的文档数据结束，耗时：148毫秒
2021-12-20 20:42:37.030 INFO  com.aspect.LogAspect                              :54   [32m128114835450892288[0;39m ------------- 开始 -------------
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :55   [32m128114835450892288[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :54   [32m128114835455086592[0;39m ------------- 开始 -------------
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :56   [32m128114835450892288[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :55   [32m128114835455086592[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :56   [32m128114835455086592[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :57   [32m128114835450892288[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :57   [32m128114835455086592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:37.031 INFO  com.aspect.LogAspect                              :80   [32m128114835450892288[0;39m 请求参数: []
2021-12-20 20:42:37.032 INFO  com.aspect.LogAspect                              :80   [32m128114835455086592[0;39m 请求参数: []
2021-12-20 20:42:37.033 INFO  com.aspect.LogAspect                              :54   [32m128114835463475200[0;39m ------------- 开始 -------------
2021-12-20 20:42:37.034 INFO  com.aspect.LogAspect                              :55   [32m128114835463475200[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:37.034 INFO  com.aspect.LogAspect                              :56   [32m128114835463475200[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:37.034 INFO  com.aspect.LogAspect                              :57   [32m128114835463475200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:37.034 INFO  com.aspect.LogAspect                              :80   [32m128114835463475200[0;39m 请求参数: []
2021-12-20 20:42:37.117 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114835450892288[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:37.117 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114835450892288[0;39m ==> Parameters: 
2021-12-20 20:42:37.301 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114835463475200[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:37.301 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114835463475200[0;39m ==> Parameters: 
2021-12-20 20:42:37.335 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114835450892288[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:42:37.336 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114835450892288[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:42:37.337 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114835450892288[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:42:37.339 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114835450892288[0;39m <==      Total: 2
2021-12-20 20:42:37.340 INFO  com.aspect.LogAspect                              :92   [32m128114835450892288[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:42:37.340 INFO  com.aspect.LogAspect                              :93   [32m128114835450892288[0;39m ------------- 结束 耗时：310 ms -------------
2021-12-20 20:42:37.416 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:37.417 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:37.418 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:37.419 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:37.421 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:37.422 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:37.423 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:37.423 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:37.424 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:37.425 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:37.426 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:37.427 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:37.428 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:37.429 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:37.430 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:37.430 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:37.431 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114835455086592[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:37.431 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:37.432 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:37.432 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114835455086592[0;39m ==> Parameters: 
2021-12-20 20:42:37.433 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:37.435 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114835463475200[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:37.436 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114835463475200[0;39m <==      Total: 19
2021-12-20 20:42:37.441 INFO  com.aspect.LogAspect                              :92   [32m128114835463475200[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:37.441 INFO  com.aspect.LogAspect                              :93   [32m128114835463475200[0;39m ------------- 结束 耗时：408 ms -------------
2021-12-20 20:42:37.506 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114835455086592[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:42:37.507 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114835455086592[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:42:37.508 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114835455086592[0;39m <==      Total: 1
2021-12-20 20:42:37.508 INFO  com.aspect.LogAspect                              :92   [32m128114835455086592[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:42:37.508 INFO  com.aspect.LogAspect                              :93   [32m128114835455086592[0;39m ------------- 结束 耗时：477 ms -------------
2021-12-20 20:42:40.015 INFO  com.job.EbookSnapshotJob                          :32   [32m128114847970889728[0;39m 生成今日电子书快照开始
2021-12-20 20:42:40.132 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114847970889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:40.132 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114847970889728[0;39m ==> Parameters: 
2021-12-20 20:42:40.304 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114847970889728[0;39m <==    Updates: 0
2021-12-20 20:42:40.304 INFO  com.job.EbookSnapshotJob                          :35   [32m128114847970889728[0;39m 生成今日电子书快照结束，耗时：288毫秒
2021-12-20 20:42:41.824 INFO  com.aspect.LogAspect                              :54   [32m128114855558385664[0;39m ------------- 开始 -------------
2021-12-20 20:42:41.824 INFO  com.aspect.LogAspect                              :55   [32m128114855558385664[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-20 20:42:41.824 INFO  com.aspect.LogAspect                              :56   [32m128114855558385664[0;39m 类名方法: com.controller.UserController.login
2021-12-20 20:42:41.825 INFO  com.aspect.LogAspect                              :57   [32m128114855558385664[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:41.826 INFO  com.aspect.LogAspect                              :80   [32m128114855558385664[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-20 20:42:41.942 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114855558385664[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-20 20:42:41.944 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114855558385664[0;39m ==> Parameters: test123(String)
2021-12-20 20:42:42.035 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114855558385664[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:42:42.035 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114855558385664[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:42.036 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114855558385664[0;39m <==      Total: 1
2021-12-20 20:42:42.052 INFO  com.controller.UserController                     :77   [32m128114855558385664[0;39m 生成单点登录token:128114856514686976,并放入redis中
2021-12-20 20:42:42.729 INFO  com.aspect.LogAspect                              :92   [32m128114855558385664[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"128114856514686976"},"success":true}
2021-12-20 20:42:42.730 INFO  com.aspect.LogAspect                              :93   [32m128114855558385664[0;39m ------------- 结束 耗时：906 ms -------------
2021-12-20 20:42:43.065 INFO  com.websocket.WebSocketServer                     :41   [32m128114727397232640[0;39m 连接关闭，token：fSl1rlti3m，session id：1！当前连接数：0
2021-12-20 20:42:44.156 INFO  com.websocket.WebSocketServer                     :32   [32m128114585625563136[0;39m 有新连接：token：6GIYveFCU0，session id：2，当前连接数：1
2021-12-20 20:42:44.242 INFO  com.aspect.LogAspect                              :54   [32m128114865700212736[0;39m ------------- 开始 -------------
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :55   [32m128114865700212736[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :56   [32m128114865700212736[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :54   [32m128114865704407040[0;39m ------------- 开始 -------------
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :57   [32m128114865700212736[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :55   [32m128114865704407040[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :80   [32m128114865700212736[0;39m 请求参数: []
2021-12-20 20:42:44.243 INFO  com.aspect.LogAspect                              :56   [32m128114865704407040[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:42:44.244 INFO  com.aspect.LogAspect                              :57   [32m128114865704407040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:44.244 INFO  com.aspect.LogAspect                              :80   [32m128114865704407040[0;39m 请求参数: []
2021-12-20 20:42:44.247 INFO  com.aspect.LogAspect                              :54   [32m128114865721184256[0;39m ------------- 开始 -------------
2021-12-20 20:42:44.247 INFO  com.aspect.LogAspect                              :55   [32m128114865721184256[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:44.247 INFO  com.aspect.LogAspect                              :56   [32m128114865721184256[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:44.248 INFO  com.aspect.LogAspect                              :57   [32m128114865721184256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:44.248 INFO  com.aspect.LogAspect                              :80   [32m128114865721184256[0;39m 请求参数: []
2021-12-20 20:42:44.338 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114865704407040[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:44.338 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114865700212736[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:44.338 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114865700212736[0;39m ==> Parameters: 
2021-12-20 20:42:44.338 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114865704407040[0;39m ==> Parameters: 
2021-12-20 20:42:44.358 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114865721184256[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:44.358 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114865721184256[0;39m ==> Parameters: 
2021-12-20 20:42:44.404 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114865704407040[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:42:44.406 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114865704407040[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:42:44.407 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114865704407040[0;39m <==      Total: 1
2021-12-20 20:42:44.408 INFO  com.aspect.LogAspect                              :92   [32m128114865704407040[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:42:44.409 INFO  com.aspect.LogAspect                              :93   [32m128114865704407040[0;39m ------------- 结束 耗时：166 ms -------------
2021-12-20 20:42:44.445 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114865700212736[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:42:44.446 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114865700212736[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:42:44.447 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114865700212736[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:42:44.447 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114865700212736[0;39m <==      Total: 2
2021-12-20 20:42:44.448 INFO  com.aspect.LogAspect                              :92   [32m128114865700212736[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:42:44.449 INFO  com.aspect.LogAspect                              :93   [32m128114865700212736[0;39m ------------- 结束 耗时：207 ms -------------
2021-12-20 20:42:44.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:44.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:44.463 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:44.464 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:44.465 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:44.466 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:44.466 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:44.466 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:44.467 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:44.467 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:44.468 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:44.468 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:44.468 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:44.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:44.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:44.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:44.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:44.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:44.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:44.470 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114865721184256[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:44.470 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114865721184256[0;39m <==      Total: 19
2021-12-20 20:42:44.471 INFO  com.aspect.LogAspect                              :92   [32m128114865721184256[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:44.472 INFO  com.aspect.LogAspect                              :93   [32m128114865721184256[0;39m ------------- 结束 耗时：225 ms -------------
2021-12-20 20:42:45.022 INFO  com.job.EbookSnapshotJob                          :32   [32m128114868971769856[0;39m 生成今日电子书快照开始
2021-12-20 20:42:45.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114868971769856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:45.136 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114868971769856[0;39m ==> Parameters: 
2021-12-20 20:42:45.287 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114868971769856[0;39m <==    Updates: 0
2021-12-20 20:42:45.288 INFO  com.job.EbookSnapshotJob                          :35   [32m128114868971769856[0;39m 生成今日电子书快照结束，耗时：265毫秒
2021-12-20 20:42:47.715 INFO  com.aspect.LogAspect                              :54   [32m128114880267030528[0;39m ------------- 开始 -------------
2021-12-20 20:42:47.715 INFO  com.aspect.LogAspect                              :55   [32m128114880267030528[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:42:47.716 INFO  com.aspect.LogAspect                              :56   [32m128114880267030528[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:42:47.716 INFO  com.aspect.LogAspect                              :57   [32m128114880267030528[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:47.718 INFO  com.aspect.LogAspect                              :80   [32m128114880267030528[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:42:47.930 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128114880267030528[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:42:47.933 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128114880267030528[0;39m ==> Parameters: 
2021-12-20 20:42:48.250 INFO  com.aspect.LogAspect                              :54   [32m128114882510983168[0;39m ------------- 开始 -------------
2021-12-20 20:42:48.250 INFO  com.aspect.LogAspect                              :55   [32m128114882510983168[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:48.250 INFO  com.aspect.LogAspect                              :56   [32m128114882510983168[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:48.251 INFO  com.aspect.LogAspect                              :57   [32m128114882510983168[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:48.251 INFO  com.aspect.LogAspect                              :80   [32m128114882510983168[0;39m 请求参数: []
2021-12-20 20:42:48.476 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114882510983168[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:48.476 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114882510983168[0;39m ==> Parameters: 
2021-12-20 20:42:48.483 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128114880267030528[0;39m <==    Columns: count(0)
2021-12-20 20:42:48.484 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128114880267030528[0;39m <==        Row: 8
2021-12-20 20:42:48.487 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128114880267030528[0;39m <==      Total: 1
2021-12-20 20:42:48.498 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114880267030528[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:42:48.500 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114880267030528[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:42:48.570 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:48.570 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:48.571 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:48.571 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:48.572 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:48.572 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:48.572 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:48.572 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:48.572 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:48.573 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:48.573 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:48.574 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:48.574 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:48.574 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:48.576 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:48.576 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:48.576 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:48.576 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:48.580 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:48.581 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114882510983168[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:48.583 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114882510983168[0;39m <==      Total: 19
2021-12-20 20:42:48.589 INFO  com.aspect.LogAspect                              :92   [32m128114882510983168[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:48.589 INFO  com.aspect.LogAspect                              :93   [32m128114882510983168[0;39m ------------- 结束 耗时：339 ms -------------
2021-12-20 20:42:48.596 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:42:48.597 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:48.597 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:48.598 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:48.598 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:48.599 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:42:48.599 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:48.600 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:48.600 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114880267030528[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:48.600 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114880267030528[0;39m <==      Total: 8
2021-12-20 20:42:48.602 INFO  com.servicess.UserService                         :52   [32m128114880267030528[0;39m 总行数：8
2021-12-20 20:42:48.602 INFO  com.servicess.UserService                         :53   [32m128114880267030528[0;39m 总页数：1
2021-12-20 20:42:48.610 INFO  com.aspect.LogAspect                              :92   [32m128114880267030528[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:42:48.611 INFO  com.aspect.LogAspect                              :93   [32m128114880267030528[0;39m ------------- 结束 耗时：897 ms -------------
2021-12-20 20:42:48.618 INFO  com.aspect.LogAspect                              :54   [32m128114884054487040[0;39m ------------- 开始 -------------
2021-12-20 20:42:48.618 INFO  com.aspect.LogAspect                              :55   [32m128114884054487040[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:42:48.618 INFO  com.aspect.LogAspect                              :56   [32m128114884054487040[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:42:48.618 INFO  com.aspect.LogAspect                              :57   [32m128114884054487040[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:48.620 INFO  com.aspect.LogAspect                              :80   [32m128114884054487040[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:42:48.695 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114884054487040[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-20 20:42:48.698 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114884054487040[0;39m ==> Parameters: 
2021-12-20 20:42:48.779 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114884054487040[0;39m <==    Columns: count(0)
2021-12-20 20:42:48.780 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114884054487040[0;39m <==        Row: 6
2021-12-20 20:42:48.781 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114884054487040[0;39m <==      Total: 1
2021-12-20 20:42:48.784 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114884054487040[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-20 20:42:48.785 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114884054487040[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:42:48.884 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:42:48.885 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 108, 27
2021-12-20 20:42:48.885 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:42:48.886 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 4, 4
2021-12-20 20:42:48.886 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:42:48.887 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-20 20:42:48.887 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114884054487040[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 1, 1, 1
2021-12-20 20:42:48.888 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114884054487040[0;39m <==      Total: 6
2021-12-20 20:42:48.888 INFO  com.servicess.EbookService                        :48   [32m128114884054487040[0;39m 总行数：6
2021-12-20 20:42:48.889 INFO  com.servicess.EbookService                        :49   [32m128114884054487040[0;39m 总页数：1
2021-12-20 20:42:48.909 INFO  com.aspect.LogAspect                              :92   [32m128114884054487040[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":108,"voteCount":27},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":4,"voteCount":4},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":1,"voteCount":1},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":1,"id":117509669114744832,"name":"test","viewCount":1,"voteCount":1}],"total":6},"success":true}
2021-12-20 20:42:48.909 INFO  com.aspect.LogAspect                              :93   [32m128114884054487040[0;39m ------------- 结束 耗时：291 ms -------------
2021-12-20 20:42:49.690 INFO  com.aspect.LogAspect                              :54   [32m128114888550780928[0;39m ------------- 开始 -------------
2021-12-20 20:42:49.691 INFO  com.aspect.LogAspect                              :55   [32m128114888550780928[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:49.691 INFO  com.aspect.LogAspect                              :56   [32m128114888550780928[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:49.691 INFO  com.aspect.LogAspect                              :57   [32m128114888550780928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:49.691 INFO  com.aspect.LogAspect                              :80   [32m128114888550780928[0;39m 请求参数: []
2021-12-20 20:42:49.794 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114888550780928[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:49.795 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114888550780928[0;39m ==> Parameters: 
2021-12-20 20:42:49.901 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:49.902 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:49.904 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:49.905 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:49.906 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:49.907 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:49.908 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:49.909 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:49.910 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:49.912 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:49.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:49.916 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:49.918 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:49.918 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:49.919 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:49.920 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:49.921 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:49.922 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:49.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:49.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114888550780928[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:49.924 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114888550780928[0;39m <==      Total: 19
2021-12-20 20:42:49.927 INFO  com.aspect.LogAspect                              :92   [32m128114888550780928[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:49.928 INFO  com.aspect.LogAspect                              :93   [32m128114888550780928[0;39m ------------- 结束 耗时：238 ms -------------
2021-12-20 20:42:50.003 INFO  com.job.EbookSnapshotJob                          :32   [32m128114889863598080[0;39m 生成今日电子书快照开始
2021-12-20 20:42:50.073 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114889863598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:50.074 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114889863598080[0;39m ==> Parameters: 
2021-12-20 20:42:50.248 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114889863598080[0;39m <==    Updates: 0
2021-12-20 20:42:50.248 INFO  com.job.EbookSnapshotJob                          :35   [32m128114889863598080[0;39m 生成今日电子书快照结束，耗时：245毫秒
2021-12-20 20:42:50.653 INFO  com.aspect.LogAspect                              :54   [32m128114892589895680[0;39m ------------- 开始 -------------
2021-12-20 20:42:50.654 INFO  com.aspect.LogAspect                              :55   [32m128114892589895680[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-20 20:42:50.654 INFO  com.aspect.LogAspect                              :56   [32m128114892589895680[0;39m 类名方法: com.controller.UserController.list
2021-12-20 20:42:50.654 INFO  com.aspect.LogAspect                              :57   [32m128114892589895680[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:50.654 INFO  com.aspect.LogAspect                              :80   [32m128114892589895680[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-20 20:42:50.745 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128114892589895680[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-20 20:42:50.746 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128114892589895680[0;39m ==> Parameters: 
2021-12-20 20:42:50.824 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128114892589895680[0;39m <==    Columns: count(0)
2021-12-20 20:42:50.829 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m128114892589895680[0;39m <==        Row: 8
2021-12-20 20:42:50.831 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m128114892589895680[0;39m <==      Total: 1
2021-12-20 20:42:50.833 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114892589895680[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-20 20:42:50.836 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114892589895680[0;39m ==> Parameters: 10(Integer)
2021-12-20 20:42:50.916 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==    Columns: id, login_name, name, password
2021-12-20 20:42:50.916 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:50.918 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:50.918 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:50.919 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-20 20:42:50.920 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-20 20:42:50.920 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:50.921 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:50.928 TRACE com.mapper.UserMapper.selectByExample             :143  [32m128114892589895680[0;39m <==        Row: 127969710334676992, test12345, 12345, 7354a1d413535a6c0dc5c209e198d799
2021-12-20 20:42:50.930 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m128114892589895680[0;39m <==      Total: 8
2021-12-20 20:42:50.932 INFO  com.servicess.UserService                         :52   [32m128114892589895680[0;39m 总行数：8
2021-12-20 20:42:50.933 INFO  com.servicess.UserService                         :53   [32m128114892589895680[0;39m 总页数：1
2021-12-20 20:42:50.937 INFO  com.aspect.LogAspect                              :92   [32m128114892589895680[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"},{"id":127969710334676992,"loginName":"test12345","name":"12345"}],"total":8},"success":true}
2021-12-20 20:42:50.938 INFO  com.aspect.LogAspect                              :93   [32m128114892589895680[0;39m ------------- 结束 耗时：285 ms -------------
2021-12-20 20:42:51.640 INFO  com.aspect.LogAspect                              :54   [32m128114896729673728[0;39m ------------- 开始 -------------
2021-12-20 20:42:51.640 INFO  com.aspect.LogAspect                              :55   [32m128114896729673728[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:42:51.640 INFO  com.aspect.LogAspect                              :56   [32m128114896729673728[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:42:51.640 INFO  com.aspect.LogAspect                              :54   [32m128114896729673729[0;39m ------------- 开始 -------------
2021-12-20 20:42:51.640 INFO  com.aspect.LogAspect                              :57   [32m128114896729673728[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:51.641 INFO  com.aspect.LogAspect                              :80   [32m128114896729673728[0;39m 请求参数: []
2021-12-20 20:42:51.641 INFO  com.aspect.LogAspect                              :55   [32m128114896729673729[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:42:51.641 INFO  com.aspect.LogAspect                              :56   [32m128114896729673729[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:42:51.641 INFO  com.aspect.LogAspect                              :57   [32m128114896729673729[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:51.642 INFO  com.aspect.LogAspect                              :80   [32m128114896729673729[0;39m 请求参数: []
2021-12-20 20:42:51.643 INFO  com.aspect.LogAspect                              :54   [32m128114896742256640[0;39m ------------- 开始 -------------
2021-12-20 20:42:51.644 INFO  com.aspect.LogAspect                              :55   [32m128114896742256640[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:51.644 INFO  com.aspect.LogAspect                              :56   [32m128114896742256640[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:51.644 INFO  com.aspect.LogAspect                              :57   [32m128114896742256640[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:51.644 INFO  com.aspect.LogAspect                              :80   [32m128114896742256640[0;39m 请求参数: []
2021-12-20 20:42:51.750 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114896742256640[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:51.750 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114896729673728[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:51.750 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114896729673729[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:51.751 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114896729673729[0;39m ==> Parameters: 
2021-12-20 20:42:51.751 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114896729673728[0;39m ==> Parameters: 
2021-12-20 20:42:51.751 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114896742256640[0;39m ==> Parameters: 
2021-12-20 20:42:51.845 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114896729673729[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:42:51.845 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:51.845 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114896729673728[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:42:51.846 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:51.846 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114896729673729[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:42:51.847 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114896729673728[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:42:51.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:51.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:51.849 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:51.850 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:51.852 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114896729673729[0;39m <==      Total: 1
2021-12-20 20:42:51.852 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:51.853 INFO  com.aspect.LogAspect                              :92   [32m128114896729673729[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:42:51.853 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114896729673728[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:42:51.854 INFO  com.aspect.LogAspect                              :93   [32m128114896729673729[0;39m ------------- 结束 耗时：214 ms -------------
2021-12-20 20:42:51.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:51.857 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114896729673728[0;39m <==      Total: 2
2021-12-20 20:42:51.857 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:51.859 INFO  com.aspect.LogAspect                              :92   [32m128114896729673728[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:42:51.859 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:51.860 INFO  com.aspect.LogAspect                              :93   [32m128114896729673728[0;39m ------------- 结束 耗时：220 ms -------------
2021-12-20 20:42:51.861 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:51.863 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:51.864 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:51.866 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:51.867 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:51.869 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:51.871 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:51.873 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:51.874 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:51.874 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114896742256640[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:51.875 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114896742256640[0;39m <==      Total: 19
2021-12-20 20:42:51.879 INFO  com.aspect.LogAspect                              :92   [32m128114896742256640[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:51.880 INFO  com.aspect.LogAspect                              :93   [32m128114896742256640[0;39m ------------- 结束 耗时：237 ms -------------
2021-12-20 20:42:53.425 INFO  com.aspect.LogAspect                              :54   [32m128114904216506368[0;39m ------------- 开始 -------------
2021-12-20 20:42:53.425 INFO  com.aspect.LogAspect                              :55   [32m128114904216506368[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:42:53.426 INFO  com.aspect.LogAspect                              :56   [32m128114904216506368[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:42:53.426 INFO  com.aspect.LogAspect                              :57   [32m128114904216506368[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:53.426 INFO  com.aspect.LogAspect                              :80   [32m128114904216506368[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-20 20:42:53.547 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114904216506368[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:42:53.548 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114904216506368[0;39m ==> Parameters: 101(Long)
2021-12-20 20:42:53.624 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114904216506368[0;39m <==    Columns: count(0)
2021-12-20 20:42:53.626 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114904216506368[0;39m <==        Row: 1
2021-12-20 20:42:53.627 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114904216506368[0;39m <==      Total: 1
2021-12-20 20:42:53.629 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114904216506368[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 20:42:53.630 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114904216506368[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-20 20:42:53.716 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114904216506368[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:42:53.717 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114904216506368[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 89, 38
2021-12-20 20:42:53.719 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114904216506368[0;39m <==      Total: 1
2021-12-20 20:42:53.720 INFO  com.servicess.EbookService                        :48   [32m128114904216506368[0;39m 总行数：1
2021-12-20 20:42:53.721 INFO  com.servicess.EbookService                        :49   [32m128114904216506368[0;39m 总页数：1
2021-12-20 20:42:53.723 INFO  com.aspect.LogAspect                              :92   [32m128114904216506368[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":89,"voteCount":38}],"total":1},"success":true}
2021-12-20 20:42:53.724 INFO  com.aspect.LogAspect                              :93   [32m128114904216506368[0;39m ------------- 结束 耗时：299 ms -------------
2021-12-20 20:42:54.880 INFO  com.aspect.LogAspect                              :54   [32m128114910319218688[0;39m ------------- 开始 -------------
2021-12-20 20:42:54.881 INFO  com.aspect.LogAspect                              :55   [32m128114910319218688[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-20 20:42:54.881 INFO  com.aspect.LogAspect                              :56   [32m128114910319218688[0;39m 类名方法: com.controller.DocController.all
2021-12-20 20:42:54.881 INFO  com.aspect.LogAspect                              :57   [32m128114910319218688[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:54.881 INFO  com.aspect.LogAspect                              :80   [32m128114910319218688[0;39m 请求参数: [2]
2021-12-20 20:42:54.985 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128114910319218688[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-20 20:42:54.985 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128114910319218688[0;39m ==> Parameters: 2(Long)
2021-12-20 20:42:55.000 INFO  com.job.EbookSnapshotJob                          :32   [32m128114910822535168[0;39m 生成今日电子书快照开始
2021-12-20 20:42:55.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114910822535168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 9, 2, 0, 文档1, 1, 36, 7
2021-12-20 20:42:55.106 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114910822535168[0;39m ==> Parameters: 
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 12, 5
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 8, 6
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 10, 7
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 6, 6
2021-12-20 20:42:55.106 TRACE com.mapper.DocMapper.selectByExample              :143  [32m128114910319218688[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 3, 3
2021-12-20 20:42:55.106 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m128114910319218688[0;39m <==      Total: 8
2021-12-20 20:42:55.144 INFO  com.aspect.LogAspect                              :92   [32m128114910319218688[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":36,"voteCount":7},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":12,"voteCount":5},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":8,"voteCount":6},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":10,"voteCount":7},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":6,"voteCount":6},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":3,"voteCount":3}],"success":true}
2021-12-20 20:42:55.144 INFO  com.aspect.LogAspect                              :93   [32m128114910319218688[0;39m ------------- 结束 耗时：264 ms -------------
2021-12-20 20:42:55.173 INFO  com.aspect.LogAspect                              :54   [32m128114911548149760[0;39m ------------- 开始 -------------
2021-12-20 20:42:55.173 INFO  com.aspect.LogAspect                              :55   [32m128114911548149760[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-20 20:42:55.174 INFO  com.aspect.LogAspect                              :56   [32m128114911548149760[0;39m 类名方法: com.controller.DocController.findContent
2021-12-20 20:42:55.174 INFO  com.aspect.LogAspect                              :57   [32m128114911548149760[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:55.174 INFO  com.aspect.LogAspect                              :80   [32m128114911548149760[0;39m 请求参数: [9]
2021-12-20 20:42:55.174 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128114911548149760[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-20 20:42:55.176 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128114911548149760[0;39m ==> Parameters: 9(Long)
2021-12-20 20:42:55.302 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m128114911548149760[0;39m <==      Total: 0
2021-12-20 20:42:55.304 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114910822535168[0;39m <==    Updates: 0
2021-12-20 20:42:55.305 INFO  com.job.EbookSnapshotJob                          :35   [32m128114910822535168[0;39m 生成今日电子书快照结束，耗时：305毫秒
2021-12-20 20:42:55.307 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128114911548149760[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-20 20:42:55.309 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128114911548149760[0;39m ==> Parameters: 9(Long)
2021-12-20 20:42:55.501 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m128114911548149760[0;39m <==    Updates: 1
2021-12-20 20:42:55.502 INFO  com.aspect.LogAspect                              :92   [32m128114911548149760[0;39m 返回结果: {"content":"","success":true}
2021-12-20 20:42:55.503 INFO  com.aspect.LogAspect                              :93   [32m128114911548149760[0;39m ------------- 结束 耗时：330 ms -------------
2021-12-20 20:42:56.713 INFO  com.aspect.LogAspect                              :54   [32m128114918007377920[0;39m ------------- 开始 -------------
2021-12-20 20:42:56.714 INFO  com.aspect.LogAspect                              :55   [32m128114918007377920[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-20 20:42:56.714 INFO  com.aspect.LogAspect                              :54   [32m128114918011572224[0;39m ------------- 开始 -------------
2021-12-20 20:42:56.714 INFO  com.aspect.LogAspect                              :56   [32m128114918007377920[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-20 20:42:56.714 INFO  com.aspect.LogAspect                              :55   [32m128114918011572224[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-20 20:42:56.715 INFO  com.aspect.LogAspect                              :57   [32m128114918007377920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:56.715 INFO  com.aspect.LogAspect                              :56   [32m128114918011572224[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-20 20:42:56.715 INFO  com.aspect.LogAspect                              :80   [32m128114918007377920[0;39m 请求参数: []
2021-12-20 20:42:56.715 INFO  com.aspect.LogAspect                              :57   [32m128114918011572224[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:56.715 INFO  com.aspect.LogAspect                              :80   [32m128114918011572224[0;39m 请求参数: []
2021-12-20 20:42:56.716 INFO  com.aspect.LogAspect                              :54   [32m128114918015766528[0;39m ------------- 开始 -------------
2021-12-20 20:42:56.716 INFO  com.aspect.LogAspect                              :55   [32m128114918015766528[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-20 20:42:56.716 INFO  com.aspect.LogAspect                              :56   [32m128114918015766528[0;39m 类名方法: com.controller.CategoryController.all
2021-12-20 20:42:56.716 INFO  com.aspect.LogAspect                              :57   [32m128114918015766528[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:56.716 INFO  com.aspect.LogAspect                              :80   [32m128114918015766528[0;39m 请求参数: []
2021-12-20 20:42:56.785 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114918007377920[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:56.785 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114918007377920[0;39m ==> Parameters: 
2021-12-20 20:42:56.797 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114918011572224[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-20 20:42:56.797 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114918011572224[0;39m ==> Parameters: 
2021-12-20 20:42:56.816 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114918015766528[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-20 20:42:56.817 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114918015766528[0;39m ==> Parameters: 
2021-12-20 20:42:56.868 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114918007377920[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-20 20:42:56.870 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114918007377920[0;39m <==        Row: 2021-12-19, 199, 69, 199, 69
2021-12-20 20:42:56.873 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m128114918007377920[0;39m <==        Row: 2021-12-20, 204, 72, 5, 3
2021-12-20 20:42:56.875 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m128114918007377920[0;39m <==      Total: 2
2021-12-20 20:42:56.876 INFO  com.aspect.LogAspect                              :92   [32m128114918007377920[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":199,"viewIncrease":199,"voteCount":69,"voteIncrease":69},{"date":1639929600000,"viewCount":204,"viewIncrease":5,"voteCount":72,"voteIncrease":3}],"success":true}
2021-12-20 20:42:56.877 INFO  com.aspect.LogAspect                              :93   [32m128114918007377920[0;39m ------------- 结束 耗时：164 ms -------------
2021-12-20 20:42:56.891 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114918011572224[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-20 20:42:56.892 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m128114918011572224[0;39m <==        Row: 2021-12-19, 199, 69
2021-12-20 20:42:56.894 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m128114918011572224[0;39m <==      Total: 1
2021-12-20 20:42:56.912 INFO  com.aspect.LogAspect                              :92   [32m128114918011572224[0;39m 返回结果: {"content":[{"date":1639843200000,"viewCount":0,"viewIncrease":199,"voteCount":0,"voteIncrease":69}],"success":true}
2021-12-20 20:42:56.912 INFO  com.aspect.LogAspect                              :93   [32m128114918011572224[0;39m ------------- 结束 耗时：198 ms -------------
2021-12-20 20:42:56.914 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==    Columns: id, parent, name, sort
2021-12-20 20:42:56.914 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-20 20:42:56.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-20 20:42:56.915 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-20 20:42:56.916 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-20 20:42:56.917 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 101, 100, Vue, 101
2021-12-20 20:42:56.917 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-20 20:42:56.918 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 200, 0, Java, 200
2021-12-20 20:42:56.918 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-20 20:42:56.918 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-20 20:42:56.919 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 300, 0, Python, 300
2021-12-20 20:42:56.920 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-20 20:42:56.920 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-20 20:42:56.921 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-20 20:42:56.921 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-20 20:42:56.922 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-20 20:42:56.923 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 500, 0, 其他, 500
2021-12-20 20:42:56.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-20 20:42:56.924 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-20 20:42:56.925 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m128114918015766528[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-20 20:42:56.925 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m128114918015766528[0;39m <==      Total: 19
2021-12-20 20:42:56.927 INFO  com.aspect.LogAspect                              :92   [32m128114918015766528[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-20 20:42:56.927 INFO  com.aspect.LogAspect                              :93   [32m128114918015766528[0;39m ------------- 结束 耗时：212 ms -------------
2021-12-20 20:42:58.904 INFO  com.aspect.LogAspect                              :54   [32m128114927197097984[0;39m ------------- 开始 -------------
2021-12-20 20:42:58.904 INFO  com.aspect.LogAspect                              :55   [32m128114927197097984[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:42:58.904 INFO  com.aspect.LogAspect                              :56   [32m128114927197097984[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:42:58.904 INFO  com.aspect.LogAspect                              :57   [32m128114927197097984[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:58.905 INFO  com.aspect.LogAspect                              :80   [32m128114927197097984[0;39m 请求参数: [{"categoryId2":501,"page":1,"size":1000}]
2021-12-20 20:42:58.979 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114927197097984[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:42:58.979 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114927197097984[0;39m ==> Parameters: 501(Long)
2021-12-20 20:42:59.046 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114927197097984[0;39m <==    Columns: count(0)
2021-12-20 20:42:59.047 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114927197097984[0;39m <==        Row: 0
2021-12-20 20:42:59.047 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114927197097984[0;39m <==      Total: 1
2021-12-20 20:42:59.048 INFO  com.servicess.EbookService                        :48   [32m128114927197097984[0;39m 总行数：0
2021-12-20 20:42:59.048 INFO  com.servicess.EbookService                        :49   [32m128114927197097984[0;39m 总页数：0
2021-12-20 20:42:59.048 INFO  com.aspect.LogAspect                              :92   [32m128114927197097984[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 20:42:59.049 INFO  com.aspect.LogAspect                              :93   [32m128114927197097984[0;39m ------------- 结束 耗时：145 ms -------------
2021-12-20 20:42:59.793 INFO  com.aspect.LogAspect                              :54   [32m128114930925834240[0;39m ------------- 开始 -------------
2021-12-20 20:42:59.793 INFO  com.aspect.LogAspect                              :55   [32m128114930925834240[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:42:59.793 INFO  com.aspect.LogAspect                              :56   [32m128114930925834240[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:42:59.793 INFO  com.aspect.LogAspect                              :57   [32m128114930925834240[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:42:59.794 INFO  com.aspect.LogAspect                              :80   [32m128114930925834240[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2021-12-20 20:42:59.880 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114930925834240[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:42:59.881 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114930925834240[0;39m ==> Parameters: 502(Long)
2021-12-20 20:42:59.944 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114930925834240[0;39m <==    Columns: count(0)
2021-12-20 20:42:59.945 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114930925834240[0;39m <==        Row: 0
2021-12-20 20:42:59.945 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114930925834240[0;39m <==      Total: 1
2021-12-20 20:42:59.946 INFO  com.servicess.EbookService                        :48   [32m128114930925834240[0;39m 总行数：0
2021-12-20 20:42:59.947 INFO  com.servicess.EbookService                        :49   [32m128114930925834240[0;39m 总页数：0
2021-12-20 20:42:59.947 INFO  com.aspect.LogAspect                              :92   [32m128114930925834240[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 20:42:59.948 INFO  com.aspect.LogAspect                              :93   [32m128114930925834240[0;39m ------------- 结束 耗时：155 ms -------------
2021-12-20 20:43:00.009 INFO  com.job.EbookSnapshotJob                          :32   [32m128114931831803904[0;39m 生成今日电子书快照开始
2021-12-20 20:43:00.010 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114931831803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:43:00.010 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114931831803904[0;39m ==> Parameters: 
2021-12-20 20:43:00.169 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114931831803904[0;39m <==    Updates: 0
2021-12-20 20:43:00.170 INFO  com.job.EbookSnapshotJob                          :35   [32m128114931831803904[0;39m 生成今日电子书快照结束，耗时：161毫秒
2021-12-20 20:43:00.721 INFO  com.aspect.LogAspect                              :54   [32m128114934818148352[0;39m ------------- 开始 -------------
2021-12-20 20:43:00.721 INFO  com.aspect.LogAspect                              :55   [32m128114934818148352[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:43:00.721 INFO  com.aspect.LogAspect                              :56   [32m128114934818148352[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:43:00.721 INFO  com.aspect.LogAspect                              :57   [32m128114934818148352[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:43:00.721 INFO  com.aspect.LogAspect                              :80   [32m128114934818148352[0;39m 请求参数: [{"categoryId2":503,"page":1,"size":1000}]
2021-12-20 20:43:00.808 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114934818148352[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:43:00.809 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114934818148352[0;39m ==> Parameters: 503(Long)
2021-12-20 20:43:00.877 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114934818148352[0;39m <==    Columns: count(0)
2021-12-20 20:43:00.878 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114934818148352[0;39m <==        Row: 0
2021-12-20 20:43:00.878 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114934818148352[0;39m <==      Total: 1
2021-12-20 20:43:00.879 INFO  com.servicess.EbookService                        :48   [32m128114934818148352[0;39m 总行数：0
2021-12-20 20:43:00.879 INFO  com.servicess.EbookService                        :49   [32m128114934818148352[0;39m 总页数：0
2021-12-20 20:43:00.880 INFO  com.aspect.LogAspect                              :92   [32m128114934818148352[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-20 20:43:00.880 INFO  com.aspect.LogAspect                              :93   [32m128114934818148352[0;39m ------------- 结束 耗时：159 ms -------------
2021-12-20 20:43:02.443 INFO  com.aspect.LogAspect                              :54   [32m128114942040739840[0;39m ------------- 开始 -------------
2021-12-20 20:43:02.444 INFO  com.aspect.LogAspect                              :55   [32m128114942040739840[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-20 20:43:02.444 INFO  com.aspect.LogAspect                              :56   [32m128114942040739840[0;39m 类名方法: com.controller.EbookController.list
2021-12-20 20:43:02.444 INFO  com.aspect.LogAspect                              :57   [32m128114942040739840[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:43:02.444 INFO  com.aspect.LogAspect                              :80   [32m128114942040739840[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2021-12-20 20:43:02.537 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114942040739840[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-20 20:43:02.538 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114942040739840[0;39m ==> Parameters: 401(Long)
2021-12-20 20:43:02.599 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114942040739840[0;39m <==    Columns: count(0)
2021-12-20 20:43:02.600 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m128114942040739840[0;39m <==        Row: 1
2021-12-20 20:43:02.600 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m128114942040739840[0;39m <==      Total: 1
2021-12-20 20:43:02.601 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114942040739840[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-20 20:43:02.602 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114942040739840[0;39m ==> Parameters: 401(Long), 1000(Integer)
2021-12-20 20:43:02.681 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114942040739840[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-20 20:43:02.682 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m128114942040739840[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 1
2021-12-20 20:43:02.684 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m128114942040739840[0;39m <==      Total: 1
2021-12-20 20:43:02.685 INFO  com.servicess.EbookService                        :48   [32m128114942040739840[0;39m 总行数：1
2021-12-20 20:43:02.685 INFO  com.servicess.EbookService                        :49   [32m128114942040739840[0;39m 总页数：1
2021-12-20 20:43:02.687 INFO  com.aspect.LogAspect                              :92   [32m128114942040739840[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql入门教程","viewCount":1,"voteCount":1}],"total":1},"success":true}
2021-12-20 20:43:02.687 INFO  com.aspect.LogAspect                              :93   [32m128114942040739840[0;39m ------------- 结束 耗时：244 ms -------------
2021-12-20 20:43:05.006 INFO  com.job.EbookSnapshotJob                          :32   [32m128114952790740992[0;39m 生成今日电子书快照开始
2021-12-20 20:43:05.098 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114952790740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:43:05.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114952790740992[0;39m ==> Parameters: 
2021-12-20 20:43:05.263 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114952790740992[0;39m <==    Updates: 0
2021-12-20 20:43:05.263 INFO  com.job.EbookSnapshotJob                          :35   [32m128114952790740992[0;39m 生成今日电子书快照结束，耗时：257毫秒
2021-12-20 20:43:05.264 INFO  com.job.DocJob                                    :32   [32m128114953872871424[0;39m 更新电子书下的文档数据开始
2021-12-20 20:43:05.265 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114953872871424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-20 20:43:05.265 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114953872871424[0;39m ==> Parameters: 
2021-12-20 20:43:05.418 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m128114953872871424[0;39m <==    Updates: 6
2021-12-20 20:43:05.418 INFO  com.job.DocJob                                    :35   [32m128114953872871424[0;39m 更新电子书下的文档数据结束，耗时：153毫秒
2021-12-20 20:43:09.464 INFO  com.aspect.LogAspect                              :54   [32m128114971484753920[0;39m ------------- 开始 -------------
2021-12-20 20:43:09.464 INFO  com.aspect.LogAspect                              :55   [32m128114971484753920[0;39m 请求地址: http://localhost:8081/user/logout/128114856514686976 GET
2021-12-20 20:43:09.464 INFO  com.aspect.LogAspect                              :56   [32m128114971484753920[0;39m 类名方法: com.controller.UserController.logout
2021-12-20 20:43:09.464 INFO  com.aspect.LogAspect                              :57   [32m128114971484753920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-20 20:43:09.464 INFO  com.aspect.LogAspect                              :80   [32m128114971484753920[0;39m 请求参数: ["128114856514686976"]
2021-12-20 20:43:09.513 INFO  com.controller.UserController                     :89   [32m128114971484753920[0;39m 从redis中删除token：128114856514686976
2021-12-20 20:43:09.514 INFO  com.aspect.LogAspect                              :92   [32m128114971484753920[0;39m 返回结果: {"success":true}
2021-12-20 20:43:09.514 INFO  com.aspect.LogAspect                              :93   [32m128114971484753920[0;39m ------------- 结束 耗时：51 ms -------------
2021-12-20 20:43:10.001 INFO  com.job.EbookSnapshotJob                          :32   [32m128114973741289472[0;39m 生成今日电子书快照开始
2021-12-20 20:43:10.078 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114973741289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:43:10.080 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114973741289472[0;39m ==> Parameters: 
2021-12-20 20:43:10.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114973741289472[0;39m <==    Updates: 0
2021-12-20 20:43:10.244 INFO  com.job.EbookSnapshotJob                          :35   [32m128114973741289472[0;39m 生成今日电子书快照结束，耗时：242毫秒
2021-12-20 20:43:11.460 INFO  com.websocket.WebSocketServer                     :41   [32m128114930925834240[0;39m 连接关闭，token：6GIYveFCU0，session id：2！当前连接数：0
2021-12-20 20:43:15.002 INFO  com.job.EbookSnapshotJob                          :32   [32m128114994717003776[0;39m 生成今日电子书快照开始
2021-12-20 20:43:15.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114994717003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-20 20:43:15.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114994717003776[0;39m ==> Parameters: 
2021-12-20 20:43:15.239 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m128114994717003776[0;39m <==    Updates: 0
2021-12-20 20:43:15.239 INFO  com.job.EbookSnapshotJob                          :35   [32m128114994717003776[0;39m 生成今日电子书快照结束，耗时：237毫秒
