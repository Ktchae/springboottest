2021-12-11 15:45:59.819 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-11 15:45:59.830 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 2848 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-11 15:45:59.830 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-11 15:46:00.019 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-11 15:46:00.019 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-11 15:46:04.805 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-11 15:46:04.815 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-11 15:46:05.425 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 578 ms. Found 0 Redis repository interfaces.
2021-12-11 15:46:07.035 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-11 15:46:07.075 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-11 15:46:07.075 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-11 15:46:07.075 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-11 15:46:07.205 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-11 15:46:07.205 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 7186 ms
2021-12-11 15:46:10.083 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-11 15:46:10.143 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-11 15:46:10.173 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-11 15:46:10.223 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 12.234 seconds (JVM running for 15.448)
2021-12-11 15:46:15.014 INFO  com.job.EbookSnapshotJob                          :32   [32m124778761479655424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:15.124 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m124778761479655424[0;39m HikariPool-1 - Starting...
2021-12-11 15:46:15.891 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m124778761479655424[0;39m HikariPool-1 - Start completed.
2021-12-11 15:46:15.939 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778761479655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:15.969 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778761479655424[0;39m ==> Parameters: 
2021-12-11 15:46:16.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778761479655424[0;39m <==    Updates: 0
2021-12-11 15:46:16.084 INFO  com.job.EbookSnapshotJob                          :35   [32m124778761479655424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š1070æ¯«ç§’
2021-12-11 15:46:20.014 INFO  com.job.EbookSnapshotJob                          :32   [32m124778782451175424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:20.060 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778782451175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:20.063 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778782451175424[0;39m ==> Parameters: 
2021-12-11 15:46:20.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778782451175424[0;39m <==    Updates: 0
2021-12-11 15:46:20.154 INFO  com.job.EbookSnapshotJob                          :35   [32m124778782451175424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š140æ¯«ç§’
2021-12-11 15:46:25.018 INFO  com.job.EbookSnapshotJob                          :32   [32m124778803439472640[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:25.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778803439472640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:25.067 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778803439472640[0;39m ==> Parameters: 
2021-12-11 15:46:25.172 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778803439472640[0;39m <==    Updates: 0
2021-12-11 15:46:25.172 INFO  com.job.EbookSnapshotJob                          :35   [32m124778803439472640[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š154æ¯«ç§’
2021-12-11 15:46:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m124778824364855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:30.061 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778824364855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:30.062 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778824364855296[0;39m ==> Parameters: 
2021-12-11 15:46:30.162 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778824364855296[0;39m <==    Updates: 0
2021-12-11 15:46:30.163 INFO  com.job.EbookSnapshotJob                          :35   [32m124778824364855296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š156æ¯«ç§’
2021-12-11 15:46:35.007 INFO  com.job.EbookSnapshotJob                          :32   [32m124778845336375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:35.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778845336375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:35.047 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778845336375296[0;39m ==> Parameters: 
2021-12-11 15:46:35.147 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778845336375296[0;39m <==    Updates: 0
2021-12-11 15:46:35.147 INFO  com.job.EbookSnapshotJob                          :35   [32m124778845336375296[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š140æ¯«ç§’
2021-12-11 15:46:35.147 INFO  com.job.DocJob                                    :32   [32m124778845923577856[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2021-12-11 15:46:35.162 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124778845923577856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-11 15:46:35.162 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124778845923577856[0;39m ==> Parameters: 
2021-12-11 15:46:35.259 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m124778845923577856[0;39m <==    Updates: 2
2021-12-11 15:46:35.260 INFO  com.job.DocJob                                    :35   [32m124778845923577856[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š113æ¯«ç§’
2021-12-11 15:46:40.008 INFO  com.job.EbookSnapshotJob                          :32   [32m124778866312089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:40.052 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778866312089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:40.057 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778866312089600[0;39m ==> Parameters: 
2021-12-11 15:46:40.154 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778866312089600[0;39m <==    Updates: 0
2021-12-11 15:46:40.154 INFO  com.job.EbookSnapshotJob                          :35   [32m124778866312089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š146æ¯«ç§’
2021-12-11 15:46:45.003 INFO  com.job.EbookSnapshotJob                          :32   [32m124778887262638080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2021-12-11 15:46:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778887262638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-11 15:46:45.053 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778887262638080[0;39m ==> Parameters: 
2021-12-11 15:46:45.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m124778887262638080[0;39m <==    Updates: 0
2021-12-11 15:46:45.153 INFO  com.job.EbookSnapshotJob                          :35   [32m124778887262638080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š150æ¯«ç§’
