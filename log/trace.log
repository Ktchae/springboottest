2021-12-14 15:18:54.377 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-14 15:18:54.377 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 8316 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-14 15:18:54.404 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-14 15:18:54.717 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-14 15:18:54.720 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-14 15:18:59.972 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-14 15:18:59.975 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-14 15:19:00.674 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 666 ms. Found 0 Redis repository interfaces.
2021-12-14 15:19:02.800 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-14 15:19:02.840 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-14 15:19:02.847 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-14 15:19:02.847 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-14 15:19:03.025 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-14 15:19:03.025 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 8302 ms
2021-12-14 15:19:06.573 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-14 15:19:06.653 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-14 15:19:06.703 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-14 15:19:06.767 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 14.323 seconds (JVM running for 18.052)
2021-12-14 15:19:10.006 INFO  com.job.EbookSnapshotJob                          :32   [32m125859109298900992[0;39m 生成今日电子书快照开始
2021-12-14 15:19:10.123 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m125859109298900992[0;39m HikariPool-1 - Starting...
2021-12-14 15:19:11.241 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m125859109298900992[0;39m HikariPool-1 - Start completed.
2021-12-14 15:19:11.293 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859109298900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:11.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859109298900992[0;39m ==> Parameters: 
2021-12-14 15:19:11.547 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859109298900992[0;39m <==    Updates: 0
2021-12-14 15:19:11.549 INFO  com.job.EbookSnapshotJob                          :35   [32m125859109298900992[0;39m 生成今日电子书快照结束，耗时：1542毫秒
2021-12-14 15:19:15.001 INFO  com.job.EbookSnapshotJob                          :32   [32m125859130249449472[0;39m 生成今日电子书快照开始
2021-12-14 15:19:15.092 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859130249449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:15.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859130249449472[0;39m ==> Parameters: 
2021-12-14 15:19:15.251 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859130249449472[0;39m <==    Updates: 0
2021-12-14 15:19:15.251 INFO  com.job.EbookSnapshotJob                          :35   [32m125859130249449472[0;39m 生成今日电子书快照结束，耗时：248毫秒
2021-12-14 15:19:20.008 INFO  com.job.EbookSnapshotJob                          :32   [32m125859151250329600[0;39m 生成今日电子书快照开始
2021-12-14 15:19:20.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859151250329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:20.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859151250329600[0;39m ==> Parameters: 
2021-12-14 15:19:20.273 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859151250329600[0;39m <==    Updates: 0
2021-12-14 15:19:20.273 INFO  com.job.EbookSnapshotJob                          :35   [32m125859151250329600[0;39m 生成今日电子书快照结束，耗时：264毫秒
2021-12-14 15:19:24.549 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-14 15:19:24.549 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-14 15:19:24.555 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 6 ms
2021-12-14 15:19:24.751 INFO  com.aspect.LogAspect                              :54   [32m125859171131330560[0;39m ------------- 开始 -------------
2021-12-14 15:19:24.751 INFO  com.aspect.LogAspect                              :54   [32m125859171131330562[0;39m ------------- 开始 -------------
2021-12-14 15:19:24.751 INFO  com.aspect.LogAspect                              :54   [32m125859171131330561[0;39m ------------- 开始 -------------
2021-12-14 15:19:24.753 INFO  com.aspect.LogAspect                              :55   [32m125859171131330562[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:19:24.754 INFO  com.aspect.LogAspect                              :56   [32m125859171131330562[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:19:24.754 INFO  com.aspect.LogAspect                              :55   [32m125859171131330560[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:19:24.755 INFO  com.aspect.LogAspect                              :57   [32m125859171131330562[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:24.759 INFO  com.aspect.LogAspect                              :55   [32m125859171131330561[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:19:24.760 INFO  com.aspect.LogAspect                              :56   [32m125859171131330561[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:19:24.761 INFO  com.aspect.LogAspect                              :57   [32m125859171131330561[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:24.755 INFO  com.aspect.LogAspect                              :56   [32m125859171131330560[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:19:24.762 INFO  com.aspect.LogAspect                              :57   [32m125859171131330560[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:24.819 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：w0OLY3auBl，session id：0，当前连接数：1
2021-12-14 15:19:24.850 INFO  com.aspect.LogAspect                              :80   [32m125859171131330560[0;39m 请求参数: []
2021-12-14 15:19:24.850 INFO  com.aspect.LogAspect                              :80   [32m125859171131330562[0;39m 请求参数: []
2021-12-14 15:19:24.850 INFO  com.aspect.LogAspect                              :80   [32m125859171131330561[0;39m 请求参数: []
2021-12-14 15:19:24.927 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859171131330561[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:19:24.929 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859171131330561[0;39m ==> Parameters: 
2021-12-14 15:19:24.941 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859171131330562[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:19:24.943 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859171131330562[0;39m ==> Parameters: 
2021-12-14 15:19:24.961 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859171131330560[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:19:24.961 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859171131330560[0;39m ==> Parameters: 
2021-12-14 15:19:25.013 INFO  com.job.EbookSnapshotJob                          :32   [32m125859172238626816[0;39m 生成今日电子书快照开始
2021-12-14 15:19:25.045 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:19:25.045 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859171131330562[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:19:25.046 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859171131330561[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:19:25.047 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:19:25.047 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859171131330562[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:19:25.047 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859171131330561[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:19:25.073 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:19:25.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:19:25.075 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859171131330562[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:19:25.075 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859171131330561[0;39m <==        Row: 2021-12-14, 483, 160, 0, 0
2021-12-14 15:19:25.077 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:19:25.078 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859171131330561[0;39m <==      Total: 2
2021-12-14 15:19:25.078 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859171131330562[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:19:25.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:19:25.078 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859171131330562[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:19:25.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:19:25.078 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859171131330562[0;39m <==      Total: 4
2021-12-14 15:19:25.078 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:19:25.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:19:25.085 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859172238626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:25.086 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859172238626816[0;39m ==> Parameters: 
2021-12-14 15:19:25.086 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:19:25.089 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:19:25.091 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:19:25.093 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:19:25.095 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:19:25.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:19:25.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:19:25.097 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:19:25.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:19:25.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:19:25.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859171131330560[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:19:25.109 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859171131330560[0;39m <==      Total: 19
2021-12-14 15:19:25.167 INFO  com.aspect.LogAspect                              :92   [32m125859171131330560[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:19:25.169 INFO  com.aspect.LogAspect                              :93   [32m125859171131330560[0;39m ------------- 结束 耗时：421 ms -------------
2021-12-14 15:19:25.169 INFO  com.aspect.LogAspect                              :92   [32m125859171131330562[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:19:25.169 INFO  com.aspect.LogAspect                              :92   [32m125859171131330561[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":483,"viewIncrease":0,"voteCount":160,"voteIncrease":0}],"success":true}
2021-12-14 15:19:25.169 INFO  com.aspect.LogAspect                              :93   [32m125859171131330562[0;39m ------------- 结束 耗时：421 ms -------------
2021-12-14 15:19:25.169 INFO  com.aspect.LogAspect                              :93   [32m125859171131330561[0;39m ------------- 结束 耗时：421 ms -------------
2021-12-14 15:19:25.275 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859172238626816[0;39m <==    Updates: 0
2021-12-14 15:19:25.275 INFO  com.job.EbookSnapshotJob                          :35   [32m125859172238626816[0;39m 生成今日电子书快照结束，耗时：262毫秒
2021-12-14 15:19:30.010 INFO  com.job.EbookSnapshotJob                          :32   [32m125859193201758208[0;39m 生成今日电子书快照开始
2021-12-14 15:19:30.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859193201758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:30.103 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859193201758208[0;39m ==> Parameters: 
2021-12-14 15:19:30.262 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859193201758208[0;39m <==    Updates: 0
2021-12-14 15:19:30.271 INFO  com.job.EbookSnapshotJob                          :35   [32m125859193201758208[0;39m 生成今日电子书快照结束，耗时：260毫秒
2021-12-14 15:19:33.335 INFO  com.aspect.LogAspect                              :54   [32m125859207147819008[0;39m ------------- 开始 -------------
2021-12-14 15:19:33.335 INFO  com.aspect.LogAspect                              :55   [32m125859207147819008[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:19:33.335 INFO  com.aspect.LogAspect                              :56   [32m125859207147819008[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:19:33.335 INFO  com.aspect.LogAspect                              :57   [32m125859207147819008[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:33.344 INFO  com.aspect.LogAspect                              :80   [32m125859207147819008[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-14 15:19:33.530 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859207147819008[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-14 15:19:33.536 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859207147819008[0;39m ==> Parameters: 101(Long)
2021-12-14 15:19:33.654 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125859207147819008[0;39m <==    Columns: count(0)
2021-12-14 15:19:33.656 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125859207147819008[0;39m <==        Row: 1
2021-12-14 15:19:33.658 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859207147819008[0;39m <==      Total: 1
2021-12-14 15:19:33.668 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125859207147819008[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-14 15:19:33.668 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125859207147819008[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-14 15:19:33.746 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125859207147819008[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-14 15:19:33.746 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125859207147819008[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 69, 24
2021-12-14 15:19:33.748 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125859207147819008[0;39m <==      Total: 1
2021-12-14 15:19:33.753 INFO  com.servicess.EbookService                        :48   [32m125859207147819008[0;39m 总行数：1
2021-12-14 15:19:33.754 INFO  com.servicess.EbookService                        :49   [32m125859207147819008[0;39m 总页数：1
2021-12-14 15:19:33.788 INFO  com.aspect.LogAspect                              :92   [32m125859207147819008[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":69,"voteCount":24}],"total":1},"success":true}
2021-12-14 15:19:33.789 INFO  com.aspect.LogAspect                              :93   [32m125859207147819008[0;39m ------------- 结束 耗时：454 ms -------------
2021-12-14 15:19:35.003 INFO  com.job.DocJob                                    :32   [32m125859214143918080[0;39m 更新电子书下的文档数据开始
2021-12-14 15:19:35.112 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859214143918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-14 15:19:35.114 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859214143918080[0;39m ==> Parameters: 
2021-12-14 15:19:35.272 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859214143918080[0;39m <==    Updates: 3
2021-12-14 15:19:35.272 INFO  com.job.DocJob                                    :35   [32m125859214143918080[0;39m 更新电子书下的文档数据结束，耗时：268毫秒
2021-12-14 15:19:35.272 INFO  com.job.EbookSnapshotJob                          :32   [32m125859215272185856[0;39m 生成今日电子书快照开始
2021-12-14 15:19:35.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859215272185856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:35.285 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859215272185856[0;39m ==> Parameters: 
2021-12-14 15:19:35.442 INFO  com.aspect.LogAspect                              :54   [32m125859215985217536[0;39m ------------- 开始 -------------
2021-12-14 15:19:35.442 INFO  com.aspect.LogAspect                              :55   [32m125859215985217536[0;39m 请求地址: http://localhost:8081/doc/all/2 GET
2021-12-14 15:19:35.442 INFO  com.aspect.LogAspect                              :56   [32m125859215985217536[0;39m 类名方法: com.controller.DocController.all
2021-12-14 15:19:35.442 INFO  com.aspect.LogAspect                              :57   [32m125859215985217536[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:35.442 INFO  com.aspect.LogAspect                              :80   [32m125859215985217536[0;39m 请求参数: [2]
2021-12-14 15:19:35.461 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859215272185856[0;39m <==    Updates: 0
2021-12-14 15:19:35.461 INFO  com.job.EbookSnapshotJob                          :35   [32m125859215272185856[0;39m 生成今日电子书快照结束，耗时：181毫秒
2021-12-14 15:19:35.584 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125859215985217536[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-14 15:19:35.585 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125859215985217536[0;39m ==> Parameters: 2(Long)
2021-12-14 15:19:35.700 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:19:35.708 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 9, 2, 0, 文档1, 1, 28, 3
2021-12-14 15:19:35.709 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 122746345772683264, 2, 0, 文档2, 1, 12, 2
2021-12-14 15:19:35.709 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 123355131981991936, 2, 9, 文档1.1, 1, 9, 4
2021-12-14 15:19:35.709 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 123355236525019136, 2, 122746345772683264, 文档2.1, 1, 7, 5
2021-12-14 15:19:35.709 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 124191156778176512, 2, 0, 文档3, 1, 2, 2
2021-12-14 15:19:35.713 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 123355187095146496, 2, 9, 文档1.2, 2, 7, 4
2021-12-14 15:19:35.714 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 3, 3
2021-12-14 15:19:35.714 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859215985217536[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 1, 1
2021-12-14 15:19:35.714 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125859215985217536[0;39m <==      Total: 8
2021-12-14 15:19:35.732 INFO  com.aspect.LogAspect                              :92   [32m125859215985217536[0;39m 返回结果: {"content":[{"ebookId":2,"id":9,"name":"文档1","parent":0,"sort":1,"viewCount":28,"voteCount":3},{"ebookId":2,"id":122746345772683264,"name":"文档2","parent":0,"sort":1,"viewCount":12,"voteCount":2},{"ebookId":2,"id":123355131981991936,"name":"文档1.1","parent":9,"sort":1,"viewCount":9,"voteCount":4},{"ebookId":2,"id":123355236525019136,"name":"文档2.1","parent":122746345772683264,"sort":1,"viewCount":7,"voteCount":5},{"ebookId":2,"id":124191156778176512,"name":"文档3","parent":0,"sort":1,"viewCount":2,"voteCount":2},{"ebookId":2,"id":123355187095146496,"name":"文档1.2","parent":9,"sort":2,"viewCount":7,"voteCount":4},{"ebookId":2,"id":124191201023889408,"name":"文档3.1","parent":124191156778176512,"sort":2,"viewCount":3,"voteCount":3},{"ebookId":2,"id":124191230128164864,"name":"文档3.2","parent":124191156778176512,"sort":3,"viewCount":1,"voteCount":1}],"success":true}
2021-12-14 15:19:35.733 INFO  com.aspect.LogAspect                              :93   [32m125859215985217536[0;39m ------------- 结束 耗时：291 ms -------------
2021-12-14 15:19:35.773 INFO  com.aspect.LogAspect                              :54   [32m125859217373532160[0;39m ------------- 开始 -------------
2021-12-14 15:19:35.774 INFO  com.aspect.LogAspect                              :55   [32m125859217373532160[0;39m 请求地址: http://localhost:8081/doc/find-content/9 GET
2021-12-14 15:19:35.775 INFO  com.aspect.LogAspect                              :56   [32m125859217373532160[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:19:35.775 INFO  com.aspect.LogAspect                              :57   [32m125859217373532160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:35.775 INFO  com.aspect.LogAspect                              :80   [32m125859217373532160[0;39m 请求参数: [9]
2021-12-14 15:19:35.776 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859217373532160[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:19:35.776 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859217373532160[0;39m ==> Parameters: 9(Long)
2021-12-14 15:19:35.869 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859217373532160[0;39m <==      Total: 0
2021-12-14 15:19:35.873 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859217373532160[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:19:35.874 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859217373532160[0;39m ==> Parameters: 9(Long)
2021-12-14 15:19:36.036 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859217373532160[0;39m <==    Updates: 1
2021-12-14 15:19:36.036 INFO  com.aspect.LogAspect                              :92   [32m125859217373532160[0;39m 返回结果: {"content":"","success":true}
2021-12-14 15:19:36.037 INFO  com.aspect.LogAspect                              :93   [32m125859217373532160[0;39m ------------- 结束 耗时：264 ms -------------
2021-12-14 15:19:36.634 INFO  com.aspect.LogAspect                              :54   [32m125859220984827904[0;39m ------------- 开始 -------------
2021-12-14 15:19:36.636 INFO  com.aspect.LogAspect                              :55   [32m125859220984827904[0;39m 请求地址: http://localhost:8081/doc/find-content/123355131981991936 GET
2021-12-14 15:19:36.636 INFO  com.aspect.LogAspect                              :56   [32m125859220984827904[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:19:36.637 INFO  com.aspect.LogAspect                              :57   [32m125859220984827904[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:36.637 INFO  com.aspect.LogAspect                              :80   [32m125859220984827904[0;39m 请求参数: [123355131981991936]
2021-12-14 15:19:36.721 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859220984827904[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:19:36.721 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859220984827904[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-14 15:19:36.806 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859220984827904[0;39m <==    Columns: id, content
2021-12-14 15:19:36.806 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859220984827904[0;39m <==        Row: 123355131981991936, <<BLOB>>
2021-12-14 15:19:36.813 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859220984827904[0;39m <==      Total: 1
2021-12-14 15:19:36.820 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859220984827904[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:19:36.822 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859220984827904[0;39m ==> Parameters: 123355131981991936(Long)
2021-12-14 15:19:36.985 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859220984827904[0;39m <==    Updates: 1
2021-12-14 15:19:36.989 INFO  com.aspect.LogAspect                              :92   [32m125859220984827904[0;39m 返回结果: {"content":"","success":true}
2021-12-14 15:19:36.990 INFO  com.aspect.LogAspect                              :93   [32m125859220984827904[0;39m ------------- 结束 耗时：356 ms -------------
2021-12-14 15:19:38.409 INFO  com.aspect.LogAspect                              :54   [32m125859228429717504[0;39m ------------- 开始 -------------
2021-12-14 15:19:38.409 INFO  com.aspect.LogAspect                              :55   [32m125859228429717504[0;39m 请求地址: http://localhost:8081/doc/find-content/124191201023889408 GET
2021-12-14 15:19:38.409 INFO  com.aspect.LogAspect                              :56   [32m125859228429717504[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:19:38.409 INFO  com.aspect.LogAspect                              :57   [32m125859228429717504[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:38.409 INFO  com.aspect.LogAspect                              :80   [32m125859228429717504[0;39m 请求参数: [124191201023889408]
2021-12-14 15:19:38.499 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859228429717504[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:19:38.502 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859228429717504[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-14 15:19:38.583 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859228429717504[0;39m <==    Columns: id, content
2021-12-14 15:19:38.585 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859228429717504[0;39m <==        Row: 124191201023889408, <<BLOB>>
2021-12-14 15:19:38.588 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859228429717504[0;39m <==      Total: 1
2021-12-14 15:19:38.591 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859228429717504[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:19:38.591 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859228429717504[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-14 15:19:38.768 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859228429717504[0;39m <==    Updates: 1
2021-12-14 15:19:38.772 INFO  com.aspect.LogAspect                              :92   [32m125859228429717504[0;39m 返回结果: {"content":"","success":true}
2021-12-14 15:19:38.774 INFO  com.aspect.LogAspect                              :93   [32m125859228429717504[0;39m ------------- 结束 耗时：365 ms -------------
2021-12-14 15:19:39.228 INFO  com.aspect.LogAspect                              :54   [32m125859231864852480[0;39m ------------- 开始 -------------
2021-12-14 15:19:39.228 INFO  com.aspect.LogAspect                              :55   [32m125859231864852480[0;39m 请求地址: http://localhost:8081/doc/vote/124191201023889408 GET
2021-12-14 15:19:39.228 INFO  com.aspect.LogAspect                              :56   [32m125859231864852480[0;39m 类名方法: com.controller.DocController.vote
2021-12-14 15:19:39.229 INFO  com.aspect.LogAspect                              :57   [32m125859231864852480[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:39.229 INFO  com.aspect.LogAspect                              :80   [32m125859231864852480[0;39m 请求参数: [124191201023889408]
2021-12-14 15:19:40.004 INFO  com.job.EbookSnapshotJob                          :32   [32m125859235119632384[0;39m 生成今日电子书快照开始
2021-12-14 15:19:40.093 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859235119632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:40.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859235119632384[0;39m ==> Parameters: 
2021-12-14 15:19:40.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859235119632384[0;39m <==    Updates: 0
2021-12-14 15:19:40.273 INFO  com.job.EbookSnapshotJob                          :35   [32m125859235119632384[0;39m 生成今日电子书快照结束，耗时：269毫秒
2021-12-14 15:19:40.941 INFO  com.Util.RedisUtil                                :31   [32m125859231864852480[0;39m key不存在，放入：DOC_VOTE_124191201023889408_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-14 15:19:41.092 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859231864852480[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-14 15:19:41.094 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859231864852480[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-14 15:19:41.229 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859231864852480[0;39m <==    Updates: 1
2021-12-14 15:19:41.231 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859231864852480[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-14 15:19:41.232 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859231864852480[0;39m ==> Parameters: 124191201023889408(Long)
2021-12-14 15:19:41.304 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859231864852480[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:19:41.304 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859231864852480[0;39m <==        Row: 124191201023889408, 2, 124191156778176512, 文档3.1, 2, 4, 4
2021-12-14 15:19:41.304 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859231864852480[0;39m <==      Total: 1
2021-12-14 15:19:41.311 INFO  com.aspect.LogAspect                              :92   [32m125859231864852480[0;39m 返回结果: {"success":true}
2021-12-14 15:19:41.311 INFO  com.aspect.LogAspect                              :93   [32m125859231864852480[0;39m ------------- 结束 耗时：2083 ms -------------
2021-12-14 15:19:41.364 INFO  com.websocket.WebSocketServer                     :71   [32m125859231864852480[0;39m 推送消息：w0OLY3auBl，内容：【文档3.1】被点赞！
2021-12-14 15:19:43.648 INFO  com.aspect.LogAspect                              :54   [32m125859250403676160[0;39m ------------- 开始 -------------
2021-12-14 15:19:43.649 INFO  com.aspect.LogAspect                              :55   [32m125859250403676160[0;39m 请求地址: http://localhost:8081/doc/find-content/124191230128164864 GET
2021-12-14 15:19:43.649 INFO  com.aspect.LogAspect                              :56   [32m125859250403676160[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:19:43.650 INFO  com.aspect.LogAspect                              :57   [32m125859250403676160[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:43.650 INFO  com.aspect.LogAspect                              :80   [32m125859250403676160[0;39m 请求参数: [124191230128164864]
2021-12-14 15:19:43.749 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859250403676160[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:19:43.749 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859250403676160[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-14 15:19:43.829 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859250403676160[0;39m <==    Columns: id, content
2021-12-14 15:19:43.831 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859250403676160[0;39m <==        Row: 124191230128164864, <<BLOB>>
2021-12-14 15:19:43.833 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859250403676160[0;39m <==      Total: 1
2021-12-14 15:19:43.836 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859250403676160[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:19:43.838 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859250403676160[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-14 15:19:44.009 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859250403676160[0;39m <==    Updates: 1
2021-12-14 15:19:44.014 INFO  com.aspect.LogAspect                              :92   [32m125859250403676160[0;39m 返回结果: {"content":"","success":true}
2021-12-14 15:19:44.014 INFO  com.aspect.LogAspect                              :93   [32m125859250403676160[0;39m ------------- 结束 耗时：366 ms -------------
2021-12-14 15:19:44.833 INFO  com.aspect.LogAspect                              :54   [32m125859255373926400[0;39m ------------- 开始 -------------
2021-12-14 15:19:44.833 INFO  com.aspect.LogAspect                              :55   [32m125859255373926400[0;39m 请求地址: http://localhost:8081/doc/vote/124191230128164864 GET
2021-12-14 15:19:44.833 INFO  com.aspect.LogAspect                              :56   [32m125859255373926400[0;39m 类名方法: com.controller.DocController.vote
2021-12-14 15:19:44.833 INFO  com.aspect.LogAspect                              :57   [32m125859255373926400[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:44.833 INFO  com.aspect.LogAspect                              :80   [32m125859255373926400[0;39m 请求参数: [124191230128164864]
2021-12-14 15:19:44.887 INFO  com.Util.RedisUtil                                :31   [32m125859255373926400[0;39m key不存在，放入：DOC_VOTE_124191230128164864_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-14 15:19:45.007 INFO  com.job.EbookSnapshotJob                          :32   [32m125859256103735296[0;39m 生成今日电子书快照开始
2021-12-14 15:19:45.049 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859255373926400[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-14 15:19:45.049 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859255373926400[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-14 15:19:45.126 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859256103735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:45.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859256103735296[0;39m ==> Parameters: 
2021-12-14 15:19:45.198 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859255373926400[0;39m <==    Updates: 1
2021-12-14 15:19:45.199 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859255373926400[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-14 15:19:45.199 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859255373926400[0;39m ==> Parameters: 124191230128164864(Long)
2021-12-14 15:19:45.271 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859255373926400[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:19:45.272 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859255373926400[0;39m <==        Row: 124191230128164864, 2, 124191156778176512, 文档3.2, 3, 2, 2
2021-12-14 15:19:45.276 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859255373926400[0;39m <==      Total: 1
2021-12-14 15:19:45.277 INFO  com.aspect.LogAspect                              :92   [32m125859255373926400[0;39m 返回结果: {"success":true}
2021-12-14 15:19:45.277 INFO  com.aspect.LogAspect                              :93   [32m125859255373926400[0;39m ------------- 结束 耗时：444 ms -------------
2021-12-14 15:19:45.282 INFO  com.websocket.WebSocketServer                     :71   [32m125859255373926400[0;39m 推送消息：w0OLY3auBl，内容：【文档3.2】被点赞！
2021-12-14 15:19:45.303 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859256103735296[0;39m <==    Updates: 0
2021-12-14 15:19:45.304 INFO  com.job.EbookSnapshotJob                          :35   [32m125859256103735296[0;39m 生成今日电子书快照结束，耗时：296毫秒
2021-12-14 15:19:46.952 INFO  com.aspect.LogAspect                              :54   [32m125859264261656576[0;39m ------------- 开始 -------------
2021-12-14 15:19:46.954 INFO  com.aspect.LogAspect                              :55   [32m125859264261656576[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:19:46.954 INFO  com.aspect.LogAspect                              :56   [32m125859264261656576[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:19:46.954 INFO  com.aspect.LogAspect                              :57   [32m125859264261656576[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:46.954 INFO  com.aspect.LogAspect                              :54   [32m125859264270045184[0;39m ------------- 开始 -------------
2021-12-14 15:19:46.955 INFO  com.aspect.LogAspect                              :80   [32m125859264261656576[0;39m 请求参数: []
2021-12-14 15:19:46.955 INFO  com.aspect.LogAspect                              :55   [32m125859264270045184[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:19:46.955 INFO  com.aspect.LogAspect                              :56   [32m125859264270045184[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:19:46.955 INFO  com.aspect.LogAspect                              :57   [32m125859264270045184[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:46.955 INFO  com.aspect.LogAspect                              :80   [32m125859264270045184[0;39m 请求参数: []
2021-12-14 15:19:46.958 INFO  com.aspect.LogAspect                              :54   [32m125859264286822400[0;39m ------------- 开始 -------------
2021-12-14 15:19:46.959 INFO  com.aspect.LogAspect                              :55   [32m125859264286822400[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:19:46.959 INFO  com.aspect.LogAspect                              :56   [32m125859264286822400[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:19:46.959 INFO  com.aspect.LogAspect                              :57   [32m125859264286822400[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:46.959 INFO  com.aspect.LogAspect                              :80   [32m125859264286822400[0;39m 请求参数: []
2021-12-14 15:19:47.033 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859264270045184[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:19:47.033 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859264286822400[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:19:47.033 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859264261656576[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:19:47.034 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859264286822400[0;39m ==> Parameters: 
2021-12-14 15:19:47.035 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859264261656576[0;39m ==> Parameters: 
2021-12-14 15:19:47.035 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859264270045184[0;39m ==> Parameters: 
2021-12-14 15:19:47.119 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:19:47.119 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:19:47.121 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:19:47.123 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:19:47.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:19:47.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:19:47.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:19:47.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:19:47.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:19:47.124 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859264270045184[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:19:47.124 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859264261656576[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:19:47.124 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:19:47.124 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859264270045184[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:19:47.124 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859264261656576[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:19:47.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:19:47.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:19:47.133 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859264270045184[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:19:47.133 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859264261656576[0;39m <==        Row: 2021-12-14, 483, 160, 0, 0
2021-12-14 15:19:47.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:19:47.133 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859264270045184[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:19:47.133 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859264261656576[0;39m <==      Total: 2
2021-12-14 15:19:47.133 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:19:47.139 INFO  com.aspect.LogAspect                              :92   [32m125859264261656576[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":483,"viewIncrease":0,"voteCount":160,"voteIncrease":0}],"success":true}
2021-12-14 15:19:47.141 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:19:47.142 INFO  com.aspect.LogAspect                              :93   [32m125859264261656576[0;39m ------------- 结束 耗时：190 ms -------------
2021-12-14 15:19:47.142 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859264270045184[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:19:47.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:19:47.143 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859264270045184[0;39m <==      Total: 4
2021-12-14 15:19:47.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:19:47.143 INFO  com.aspect.LogAspect                              :92   [32m125859264270045184[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:19:47.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:19:47.143 INFO  com.aspect.LogAspect                              :93   [32m125859264270045184[0;39m ------------- 结束 耗时：189 ms -------------
2021-12-14 15:19:47.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:19:47.143 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859264286822400[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:19:47.143 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859264286822400[0;39m <==      Total: 19
2021-12-14 15:19:47.159 INFO  com.aspect.LogAspect                              :92   [32m125859264286822400[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:19:47.161 INFO  com.aspect.LogAspect                              :93   [32m125859264286822400[0;39m ------------- 结束 耗时：203 ms -------------
2021-12-14 15:19:50.013 INFO  com.job.EbookSnapshotJob                          :32   [32m125859277100421120[0;39m 生成今日电子书快照开始
2021-12-14 15:19:50.096 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859277100421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:50.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859277100421120[0;39m ==> Parameters: 
2021-12-14 15:19:50.283 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859277100421120[0;39m <==    Updates: 0
2021-12-14 15:19:50.284 INFO  com.job.EbookSnapshotJob                          :35   [32m125859277100421120[0;39m 生成今日电子书快照结束，耗时：270毫秒
2021-12-14 15:19:52.088 INFO  com.aspect.LogAspect                              :54   [32m125859285803601920[0;39m ------------- 开始 -------------
2021-12-14 15:19:52.088 INFO  com.aspect.LogAspect                              :55   [32m125859285803601920[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:19:52.088 INFO  com.aspect.LogAspect                              :56   [32m125859285803601920[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:19:52.088 INFO  com.aspect.LogAspect                              :57   [32m125859285803601920[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:52.088 INFO  com.aspect.LogAspect                              :80   [32m125859285803601920[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-14 15:19:52.170 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859285803601920[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-14 15:19:52.173 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859285803601920[0;39m ==> Parameters: 201(Long)
2021-12-14 15:19:52.343 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125859285803601920[0;39m <==    Columns: count(0)
2021-12-14 15:19:52.344 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125859285803601920[0;39m <==        Row: 0
2021-12-14 15:19:52.345 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859285803601920[0;39m <==      Total: 1
2021-12-14 15:19:52.345 INFO  com.servicess.EbookService                        :48   [32m125859285803601920[0;39m 总行数：0
2021-12-14 15:19:52.345 INFO  com.servicess.EbookService                        :49   [32m125859285803601920[0;39m 总页数：0
2021-12-14 15:19:52.350 INFO  com.aspect.LogAspect                              :92   [32m125859285803601920[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-14 15:19:52.351 INFO  com.aspect.LogAspect                              :93   [32m125859285803601920[0;39m ------------- 结束 耗时：263 ms -------------
2021-12-14 15:19:53.920 INFO  com.aspect.LogAspect                              :54   [32m125859293487566848[0;39m ------------- 开始 -------------
2021-12-14 15:19:53.921 INFO  com.aspect.LogAspect                              :55   [32m125859293487566848[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:19:53.922 INFO  com.aspect.LogAspect                              :56   [32m125859293487566848[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:19:53.923 INFO  com.aspect.LogAspect                              :57   [32m125859293487566848[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:53.924 INFO  com.aspect.LogAspect                              :80   [32m125859293487566848[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-14 15:19:54.054 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859293487566848[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-14 15:19:54.056 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859293487566848[0;39m ==> Parameters: 202(Long)
2021-12-14 15:19:54.126 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125859293487566848[0;39m <==    Columns: count(0)
2021-12-14 15:19:54.127 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125859293487566848[0;39m <==        Row: 1
2021-12-14 15:19:54.127 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125859293487566848[0;39m <==      Total: 1
2021-12-14 15:19:54.127 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125859293487566848[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-14 15:19:54.133 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125859293487566848[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-14 15:19:54.279 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125859293487566848[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-14 15:19:54.280 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125859293487566848[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 89, 13
2021-12-14 15:19:54.282 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125859293487566848[0;39m <==      Total: 1
2021-12-14 15:19:54.284 INFO  com.servicess.EbookService                        :48   [32m125859293487566848[0;39m 总行数：1
2021-12-14 15:19:54.285 INFO  com.servicess.EbookService                        :49   [32m125859293487566848[0;39m 总页数：1
2021-12-14 15:19:54.288 INFO  com.aspect.LogAspect                              :92   [32m125859293487566848[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":89,"voteCount":13}],"total":1},"success":true}
2021-12-14 15:19:54.288 INFO  com.aspect.LogAspect                              :93   [32m125859293487566848[0;39m ------------- 结束 耗时：368 ms -------------
2021-12-14 15:19:55.013 INFO  com.job.EbookSnapshotJob                          :32   [32m125859298071941120[0;39m 生成今日电子书快照开始
2021-12-14 15:19:55.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859298071941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:19:55.095 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859298071941120[0;39m ==> Parameters: 
2021-12-14 15:19:55.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859298071941120[0;39m <==    Updates: 0
2021-12-14 15:19:55.272 INFO  com.job.EbookSnapshotJob                          :35   [32m125859298071941120[0;39m 生成今日电子书快照结束，耗时：259毫秒
2021-12-14 15:19:55.565 INFO  com.aspect.LogAspect                              :54   [32m125859300387196928[0;39m ------------- 开始 -------------
2021-12-14 15:19:55.565 INFO  com.aspect.LogAspect                              :55   [32m125859300387196928[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-14 15:19:55.566 INFO  com.aspect.LogAspect                              :56   [32m125859300387196928[0;39m 类名方法: com.controller.DocController.all
2021-12-14 15:19:55.566 INFO  com.aspect.LogAspect                              :57   [32m125859300387196928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:55.566 INFO  com.aspect.LogAspect                              :80   [32m125859300387196928[0;39m 请求参数: [1]
2021-12-14 15:19:55.644 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125859300387196928[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-14 15:19:55.644 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125859300387196928[0;39m ==> Parameters: 1(Long)
2021-12-14 15:19:55.753 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:19:55.755 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-14 15:19:55.755 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 12, 3
2021-12-14 15:19:55.755 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 8, 2
2021-12-14 15:19:55.755 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 14, 2
2021-12-14 15:19:55.755 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 18, 2
2021-12-14 15:19:55.755 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-14 15:19:55.769 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125859300387196928[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 13, 1
2021-12-14 15:19:55.769 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125859300387196928[0;39m <==      Total: 7
2021-12-14 15:19:55.777 INFO  com.aspect.LogAspect                              :92   [32m125859300387196928[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":12,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":8,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":18,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":13,"voteCount":1}],"success":true}
2021-12-14 15:19:55.777 INFO  com.aspect.LogAspect                              :93   [32m125859300387196928[0;39m ------------- 结束 耗时：212 ms -------------
2021-12-14 15:19:55.854 INFO  com.aspect.LogAspect                              :54   [32m125859301599350784[0;39m ------------- 开始 -------------
2021-12-14 15:19:55.854 INFO  com.aspect.LogAspect                              :55   [32m125859301599350784[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-14 15:19:55.854 INFO  com.aspect.LogAspect                              :56   [32m125859301599350784[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:19:55.854 INFO  com.aspect.LogAspect                              :57   [32m125859301599350784[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:55.854 INFO  com.aspect.LogAspect                              :80   [32m125859301599350784[0;39m 请求参数: [119304585604108288]
2021-12-14 15:19:55.862 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859301599350784[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:19:55.864 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859301599350784[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:19:55.949 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859301599350784[0;39m <==    Columns: id, content
2021-12-14 15:19:55.957 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859301599350784[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-14 15:19:55.959 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859301599350784[0;39m <==      Total: 1
2021-12-14 15:19:55.960 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859301599350784[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:19:55.960 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859301599350784[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:19:56.136 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859301599350784[0;39m <==    Updates: 1
2021-12-14 15:19:56.137 INFO  com.aspect.LogAspect                              :92   [32m125859301599350784[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-14 15:19:56.137 INFO  com.aspect.LogAspect                              :93   [32m125859301599350784[0;39m ------------- 结束 耗时：283 ms -------------
2021-12-14 15:19:58.054 INFO  com.aspect.LogAspect                              :54   [32m125859310826819584[0;39m ------------- 开始 -------------
2021-12-14 15:19:58.055 INFO  com.aspect.LogAspect                              :55   [32m125859310826819584[0;39m 请求地址: http://localhost:8081/doc/vote/119304585604108288 GET
2021-12-14 15:19:58.055 INFO  com.aspect.LogAspect                              :56   [32m125859310826819584[0;39m 类名方法: com.controller.DocController.vote
2021-12-14 15:19:58.055 INFO  com.aspect.LogAspect                              :57   [32m125859310826819584[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:58.055 INFO  com.aspect.LogAspect                              :80   [32m125859310826819584[0;39m 请求参数: [119304585604108288]
2021-12-14 15:19:58.105 INFO  com.Util.RedisUtil                                :31   [32m125859310826819584[0;39m key不存在，放入：DOC_VOTE_119304585604108288_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-14 15:19:58.228 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859310826819584[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-14 15:19:58.230 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859310826819584[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:19:58.376 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859310826819584[0;39m <==    Updates: 1
2021-12-14 15:19:58.377 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859310826819584[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-14 15:19:58.379 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859310826819584[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:19:58.456 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859310826819584[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:19:58.457 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859310826819584[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 19, 3
2021-12-14 15:19:58.457 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859310826819584[0;39m <==      Total: 1
2021-12-14 15:19:58.461 INFO  com.aspect.LogAspect                              :92   [32m125859310826819584[0;39m 返回结果: {"success":true}
2021-12-14 15:19:58.463 INFO  com.aspect.LogAspect                              :93   [32m125859310826819584[0;39m ------------- 结束 耗时：409 ms -------------
2021-12-14 15:19:58.470 INFO  com.websocket.WebSocketServer                     :71   [32m125859310826819584[0;39m 推送消息：w0OLY3auBl，内容：【Ant Design of Vue】被点赞！
2021-12-14 15:19:59.251 INFO  com.aspect.LogAspect                              :54   [32m125859315847401472[0;39m ------------- 开始 -------------
2021-12-14 15:19:59.251 INFO  com.aspect.LogAspect                              :55   [32m125859315847401472[0;39m 请求地址: http://localhost:8081/doc/find-content/2 GET
2021-12-14 15:19:59.251 INFO  com.aspect.LogAspect                              :56   [32m125859315847401472[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:19:59.251 INFO  com.aspect.LogAspect                              :57   [32m125859315847401472[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:19:59.251 INFO  com.aspect.LogAspect                              :80   [32m125859315847401472[0;39m 请求参数: [2]
2021-12-14 15:19:59.331 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859315847401472[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:19:59.333 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859315847401472[0;39m ==> Parameters: 2(Long)
2021-12-14 15:19:59.417 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859315847401472[0;39m <==    Columns: id, content
2021-12-14 15:19:59.418 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125859315847401472[0;39m <==        Row: 2, <<BLOB>>
2021-12-14 15:19:59.419 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125859315847401472[0;39m <==      Total: 1
2021-12-14 15:19:59.422 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859315847401472[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:19:59.423 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859315847401472[0;39m ==> Parameters: 2(Long)
2021-12-14 15:19:59.599 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125859315847401472[0;39m <==    Updates: 1
2021-12-14 15:19:59.599 INFO  com.aspect.LogAspect                              :92   [32m125859315847401472[0;39m 返回结果: {"content":"<p>123456</p>","success":true}
2021-12-14 15:19:59.604 INFO  com.aspect.LogAspect                              :93   [32m125859315847401472[0;39m ------------- 结束 耗时：348 ms -------------
2021-12-14 15:20:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m125859319043461120[0;39m 生成今日电子书快照开始
2021-12-14 15:20:00.115 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859319043461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:00.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859319043461120[0;39m ==> Parameters: 
2021-12-14 15:20:00.293 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859319043461120[0;39m <==    Updates: 0
2021-12-14 15:20:00.295 INFO  com.job.EbookSnapshotJob                          :35   [32m125859319043461120[0;39m 生成今日电子书快照结束，耗时：280毫秒
2021-12-14 15:20:00.440 INFO  com.aspect.LogAspect                              :54   [32m125859320834428928[0;39m ------------- 开始 -------------
2021-12-14 15:20:00.440 INFO  com.aspect.LogAspect                              :55   [32m125859320834428928[0;39m 请求地址: http://localhost:8081/doc/vote/2 GET
2021-12-14 15:20:00.440 INFO  com.aspect.LogAspect                              :56   [32m125859320834428928[0;39m 类名方法: com.controller.DocController.vote
2021-12-14 15:20:00.440 INFO  com.aspect.LogAspect                              :57   [32m125859320834428928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:00.440 INFO  com.aspect.LogAspect                              :80   [32m125859320834428928[0;39m 请求参数: [2]
2021-12-14 15:20:00.497 INFO  com.Util.RedisUtil                                :31   [32m125859320834428928[0;39m key不存在，放入：DOC_VOTE_2_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-14 15:20:00.629 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859320834428928[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-14 15:20:00.632 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859320834428928[0;39m ==> Parameters: 2(Long)
2021-12-14 15:20:00.778 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125859320834428928[0;39m <==    Updates: 1
2021-12-14 15:20:00.781 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859320834428928[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-14 15:20:00.783 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859320834428928[0;39m ==> Parameters: 2(Long)
2021-12-14 15:20:00.897 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859320834428928[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:20:00.898 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125859320834428928[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 13, 4
2021-12-14 15:20:00.898 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125859320834428928[0;39m <==      Total: 1
2021-12-14 15:20:00.898 INFO  com.aspect.LogAspect                              :92   [32m125859320834428928[0;39m 返回结果: {"success":true}
2021-12-14 15:20:00.898 INFO  com.aspect.LogAspect                              :93   [32m125859320834428928[0;39m ------------- 结束 耗时：458 ms -------------
2021-12-14 15:20:00.898 INFO  com.websocket.WebSocketServer                     :71   [32m125859320834428928[0;39m 推送消息：w0OLY3auBl，内容：【文档1.1】被点赞！
2021-12-14 15:20:05.003 INFO  com.job.EbookSnapshotJob                          :32   [32m125859339973038080[0;39m 生成今日电子书快照开始
2021-12-14 15:20:05.107 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859339973038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:05.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859339973038080[0;39m ==> Parameters: 
2021-12-14 15:20:05.281 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859339973038080[0;39m <==    Updates: 0
2021-12-14 15:20:05.283 INFO  com.job.EbookSnapshotJob                          :35   [32m125859339973038080[0;39m 生成今日电子书快照结束，耗时：278毫秒
2021-12-14 15:20:05.286 INFO  com.job.DocJob                                    :32   [32m125859341155831808[0;39m 更新电子书下的文档数据开始
2021-12-14 15:20:05.287 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859341155831808[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-14 15:20:05.289 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859341155831808[0;39m ==> Parameters: 
2021-12-14 15:20:05.453 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859341155831808[0;39m <==    Updates: 3
2021-12-14 15:20:05.454 INFO  com.job.DocJob                                    :35   [32m125859341155831808[0;39m 更新电子书下的文档数据结束，耗时：167毫秒
2021-12-14 15:20:06.852 INFO  com.aspect.LogAspect                              :54   [32m125859347728306176[0;39m ------------- 开始 -------------
2021-12-14 15:20:06.852 INFO  com.aspect.LogAspect                              :55   [32m125859347728306176[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:20:06.852 INFO  com.aspect.LogAspect                              :54   [32m125859347728306177[0;39m ------------- 开始 -------------
2021-12-14 15:20:06.852 INFO  com.aspect.LogAspect                              :56   [32m125859347728306176[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:20:06.853 INFO  com.aspect.LogAspect                              :55   [32m125859347728306177[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:20:06.853 INFO  com.aspect.LogAspect                              :57   [32m125859347728306176[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:06.853 INFO  com.aspect.LogAspect                              :56   [32m125859347728306177[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:20:06.853 INFO  com.aspect.LogAspect                              :80   [32m125859347728306176[0;39m 请求参数: []
2021-12-14 15:20:06.853 INFO  com.aspect.LogAspect                              :57   [32m125859347728306177[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:06.853 INFO  com.aspect.LogAspect                              :80   [32m125859347728306177[0;39m 请求参数: []
2021-12-14 15:20:06.855 INFO  com.aspect.LogAspect                              :54   [32m125859347740889088[0;39m ------------- 开始 -------------
2021-12-14 15:20:06.856 INFO  com.aspect.LogAspect                              :55   [32m125859347740889088[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:20:06.856 INFO  com.aspect.LogAspect                              :56   [32m125859347740889088[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:20:06.856 INFO  com.aspect.LogAspect                              :57   [32m125859347740889088[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:06.856 INFO  com.aspect.LogAspect                              :80   [32m125859347740889088[0;39m 请求参数: []
2021-12-14 15:20:06.917 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859347728306176[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:20:06.918 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859347728306176[0;39m ==> Parameters: 
2021-12-14 15:20:06.938 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859347740889088[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:20:06.938 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859347728306177[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:20:06.938 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859347740889088[0;39m ==> Parameters: 
2021-12-14 15:20:06.939 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859347728306177[0;39m ==> Parameters: 
2021-12-14 15:20:06.999 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859347728306176[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:20:07.009 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859347728306176[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:20:07.012 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859347728306176[0;39m <==        Row: 2021-12-14, 483, 160, 0, 0
2021-12-14 15:20:07.015 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859347728306176[0;39m <==      Total: 2
2021-12-14 15:20:07.017 INFO  com.aspect.LogAspect                              :92   [32m125859347728306176[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":483,"viewIncrease":0,"voteCount":160,"voteIncrease":0}],"success":true}
2021-12-14 15:20:07.018 INFO  com.aspect.LogAspect                              :93   [32m125859347728306176[0;39m ------------- 结束 耗时：166 ms -------------
2021-12-14 15:20:07.025 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859347728306177[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:20:07.025 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:20:07.026 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:20:07.027 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859347728306177[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:20:07.028 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:20:07.029 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:20:07.029 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859347728306177[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:20:07.030 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:20:07.031 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:20:07.032 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:20:07.033 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:20:07.033 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859347728306177[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:20:07.033 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:20:07.033 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:20:07.037 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:20:07.038 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:20:07.038 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859347728306177[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:20:07.038 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:20:07.038 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859347728306177[0;39m <==      Total: 4
2021-12-14 15:20:07.038 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:20:07.038 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:20:07.038 INFO  com.aspect.LogAspect                              :92   [32m125859347728306177[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:20:07.038 INFO  com.aspect.LogAspect                              :93   [32m125859347728306177[0;39m ------------- 结束 耗时：186 ms -------------
2021-12-14 15:20:07.038 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:20:07.049 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:20:07.053 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:20:07.055 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:20:07.056 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859347740889088[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:20:07.057 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859347740889088[0;39m <==      Total: 19
2021-12-14 15:20:07.100 INFO  com.aspect.LogAspect                              :92   [32m125859347740889088[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:20:07.100 INFO  com.aspect.LogAspect                              :93   [32m125859347740889088[0;39m ------------- 结束 耗时：245 ms -------------
2021-12-14 15:20:10.003 INFO  com.job.EbookSnapshotJob                          :32   [32m125859360944558080[0;39m 生成今日电子书快照开始
2021-12-14 15:20:10.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859360944558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:10.070 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859360944558080[0;39m ==> Parameters: 
2021-12-14 15:20:10.233 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859360944558080[0;39m <==    Updates: 0
2021-12-14 15:20:10.234 INFO  com.job.EbookSnapshotJob                          :35   [32m125859360944558080[0;39m 生成今日电子书快照结束，耗时：230毫秒
2021-12-14 15:20:12.647 INFO  com.websocket.WebSocketServer                     :41   [32m125859285803601920[0;39m 连接关闭，token：w0OLY3auBl，session id：0！当前连接数：0
2021-12-14 15:20:15.009 INFO  com.job.EbookSnapshotJob                          :32   [32m125859381941243904[0;39m 生成今日电子书快照开始
2021-12-14 15:20:15.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859381941243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:15.118 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859381941243904[0;39m ==> Parameters: 
2021-12-14 15:20:15.264 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859381941243904[0;39m <==    Updates: 0
2021-12-14 15:20:15.265 INFO  com.job.EbookSnapshotJob                          :35   [32m125859381941243904[0;39m 生成今日电子书快照结束，耗时：256毫秒
2021-12-14 15:20:20.004 INFO  com.job.EbookSnapshotJob                          :32   [32m125859402891792384[0;39m 生成今日电子书快照开始
2021-12-14 15:20:20.082 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859402891792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:20.083 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859402891792384[0;39m ==> Parameters: 
2021-12-14 15:20:20.250 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859402891792384[0;39m <==    Updates: 0
2021-12-14 15:20:20.250 INFO  com.job.EbookSnapshotJob                          :35   [32m125859402891792384[0;39m 生成今日电子书快照结束，耗时：246毫秒
2021-12-14 15:20:24.505 INFO  com.websocket.WebSocketServer                     :32   [32m125859293487566848[0;39m 有新连接：token：Lkx5mxxX76，session id：1，当前连接数：1
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :54   [32m125859422936371200[0;39m ------------- 开始 -------------
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :55   [32m125859422936371200[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :56   [32m125859422936371200[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :57   [32m125859422936371200[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :80   [32m125859422936371200[0;39m 请求参数: []
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :54   [32m125859422936371201[0;39m ------------- 开始 -------------
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :55   [32m125859422936371201[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :56   [32m125859422936371201[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :57   [32m125859422936371201[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :80   [32m125859422936371201[0;39m 请求参数: []
2021-12-14 15:20:24.783 INFO  com.aspect.LogAspect                              :54   [32m125859422936371202[0;39m ------------- 开始 -------------
2021-12-14 15:20:24.791 INFO  com.aspect.LogAspect                              :55   [32m125859422936371202[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:20:24.791 INFO  com.aspect.LogAspect                              :56   [32m125859422936371202[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:20:24.791 INFO  com.aspect.LogAspect                              :57   [32m125859422936371202[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:20:24.791 INFO  com.aspect.LogAspect                              :80   [32m125859422936371202[0;39m 请求参数: []
2021-12-14 15:20:24.877 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859422936371202[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:20:24.877 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859422936371200[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:20:24.877 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859422936371201[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:20:24.877 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859422936371202[0;39m ==> Parameters: 
2021-12-14 15:20:24.877 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859422936371201[0;39m ==> Parameters: 
2021-12-14 15:20:24.877 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859422936371200[0;39m ==> Parameters: 
2021-12-14 15:20:24.978 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859422936371201[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:20:24.978 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859422936371200[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:20:24.979 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:20:24.979 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:20:24.980 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859422936371200[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:20:24.980 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859422936371201[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:20:24.980 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125859422936371200[0;39m <==        Row: 2021-12-14, 489, 164, 6, 4
2021-12-14 15:20:24.980 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859422936371201[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:20:24.980 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125859422936371200[0;39m <==      Total: 2
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:20:24.980 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859422936371201[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:20:24.980 INFO  com.aspect.LogAspect                              :92   [32m125859422936371200[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":489,"viewIncrease":6,"voteCount":164,"voteIncrease":4}],"success":true}
2021-12-14 15:20:24.980 INFO  com.aspect.LogAspect                              :93   [32m125859422936371200[0;39m ------------- 结束 耗时：197 ms -------------
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:20:24.980 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125859422936371201[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:20:24.980 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:20:24.980 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125859422936371201[0;39m <==      Total: 4
2021-12-14 15:20:24.988 INFO  com.aspect.LogAspect                              :92   [32m125859422936371201[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:20:24.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:20:24.988 INFO  com.aspect.LogAspect                              :93   [32m125859422936371201[0;39m ------------- 结束 耗时：205 ms -------------
2021-12-14 15:20:24.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:20:24.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:20:24.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:20:24.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:20:24.988 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:20:24.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:20:24.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:20:24.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:20:24.996 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125859422936371202[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:20:24.996 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125859422936371202[0;39m <==      Total: 19
2021-12-14 15:20:25.004 INFO  com.aspect.LogAspect                              :92   [32m125859422936371202[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:20:25.004 INFO  com.aspect.LogAspect                              :93   [32m125859422936371202[0;39m ------------- 结束 耗时：221 ms -------------
2021-12-14 15:20:25.012 INFO  com.job.EbookSnapshotJob                          :32   [32m125859423896866816[0;39m 生成今日电子书快照开始
2021-12-14 15:20:25.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859423896866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:25.099 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859423896866816[0;39m ==> Parameters: 
2021-12-14 15:20:25.284 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859423896866816[0;39m <==    Updates: 0
2021-12-14 15:20:25.284 INFO  com.job.EbookSnapshotJob                          :35   [32m125859423896866816[0;39m 生成今日电子书快照结束，耗时：272毫秒
2021-12-14 15:20:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m125859444847415296[0;39m 生成今日电子书快照开始
2021-12-14 15:20:30.084 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859444847415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:30.087 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859444847415296[0;39m ==> Parameters: 
2021-12-14 15:20:30.242 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859444847415296[0;39m <==    Updates: 0
2021-12-14 15:20:30.243 INFO  com.job.EbookSnapshotJob                          :35   [32m125859444847415296[0;39m 生成今日电子书快照结束，耗时：236毫秒
2021-12-14 15:20:32.174 INFO  com.websocket.WebSocketServer                     :41   [32m125859315847401472[0;39m 连接关闭，token：Lkx5mxxX76，session id：1！当前连接数：0
2021-12-14 15:20:35.006 INFO  com.job.DocJob                                    :32   [32m125859465814740992[0;39m 更新电子书下的文档数据开始
2021-12-14 15:20:35.083 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859465814740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-14 15:20:35.084 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859465814740992[0;39m ==> Parameters: 
2021-12-14 15:20:35.268 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125859465814740992[0;39m <==    Updates: 3
2021-12-14 15:20:35.269 INFO  com.job.DocJob                                    :35   [32m125859465814740992[0;39m 更新电子书下的文档数据结束，耗时：263毫秒
2021-12-14 15:20:35.270 INFO  com.job.EbookSnapshotJob                          :32   [32m125859466922037248[0;39m 生成今日电子书快照开始
2021-12-14 15:20:35.271 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859466922037248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:35.272 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859466922037248[0;39m ==> Parameters: 
2021-12-14 15:20:35.467 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859466922037248[0;39m <==    Updates: 0
2021-12-14 15:20:35.467 INFO  com.job.EbookSnapshotJob                          :35   [32m125859466922037248[0;39m 生成今日电子书快照结束，耗时：197毫秒
2021-12-14 15:20:40.009 INFO  com.job.EbookSnapshotJob                          :32   [32m125859486798843904[0;39m 生成今日电子书快照开始
2021-12-14 15:20:40.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859486798843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:40.110 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859486798843904[0;39m ==> Parameters: 
2021-12-14 15:20:40.412 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859486798843904[0;39m <==    Updates: 0
2021-12-14 15:20:40.414 INFO  com.job.EbookSnapshotJob                          :35   [32m125859486798843904[0;39m 生成今日电子书快照结束，耗时：405毫秒
2021-12-14 15:20:45.005 INFO  com.job.EbookSnapshotJob                          :32   [32m125859507753586688[0;39m 生成今日电子书快照开始
2021-12-14 15:20:45.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859507753586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:20:45.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859507753586688[0;39m ==> Parameters: 
2021-12-14 15:20:45.296 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125859507753586688[0;39m <==    Updates: 0
2021-12-14 15:20:45.296 INFO  com.job.EbookSnapshotJob                          :35   [32m125859507753586688[0;39m 生成今日电子书快照结束，耗时：291毫秒
2021-12-14 15:30:33.658 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.2.0.Final
2021-12-14 15:30:33.673 INFO  com.SpringbootInitApplication                     :55   [32m                  [0;39m Starting SpringbootInitApplication using Java 15 on PC-20210710SYOZ with PID 8392 (E:\market\market\springboot-init\target\classes started by Administrator in E:\market\market)
2021-12-14 15:30:33.673 INFO  com.SpringbootInitApplication                     :659  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-12-14 15:30:33.747 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-12-14 15:30:33.747 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-12-14 15:30:35.329 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-12-14 15:30:35.331 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-12-14 15:30:35.912 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201  [32m                  [0;39m Finished Spring Data repository scanning in 573 ms. Found 0 Redis repository interfaces.
2021-12-14 15:30:36.693 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8081 (http)
2021-12-14 15:30:36.696 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8081"]
2021-12-14 15:30:36.703 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-12-14 15:30:36.703 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.53]
2021-12-14 15:30:36.778 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-12-14 15:30:36.778 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3031 ms
2021-12-14 15:30:38.431 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-12-14 15:30:38.462 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8081"]
2021-12-14 15:30:38.491 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8081 (http) with context path ''
2021-12-14 15:30:38.504 INFO  com.SpringbootInitApplication                     :61   [32m                  [0;39m Started SpringbootInitApplication in 5.609 seconds (JVM running for 6.882)
2021-12-14 15:30:40.001 INFO  com.job.EbookSnapshotJob                          :32   [32m125862003343495168[0;39m 生成今日电子书快照开始
2021-12-14 15:30:40.021 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m125862003343495168[0;39m HikariPool-1 - Starting...
2021-12-14 15:30:41.504 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m125862003343495168[0;39m HikariPool-1 - Start completed.
2021-12-14 15:30:41.512 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862003343495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:30:41.540 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862003343495168[0;39m ==> Parameters: 
2021-12-14 15:30:41.804 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862003343495168[0;39m <==    Updates: 0
2021-12-14 15:30:41.807 INFO  com.job.EbookSnapshotJob                          :35   [32m125862003343495168[0;39m 生成今日电子书快照结束，耗时：1806毫秒
2021-12-14 15:30:45.002 INFO  com.job.EbookSnapshotJob                          :32   [32m125862024323403776[0;39m 生成今日电子书快照开始
2021-12-14 15:30:45.102 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862024323403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:30:45.104 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862024323403776[0;39m ==> Parameters: 
2021-12-14 15:30:45.371 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862024323403776[0;39m <==    Updates: 0
2021-12-14 15:30:45.371 INFO  com.job.EbookSnapshotJob                          :35   [32m125862024323403776[0;39m 生成今日电子书快照结束，耗时：369毫秒
2021-12-14 15:30:50.003 INFO  com.job.EbookSnapshotJob                          :32   [32m125862045299118080[0;39m 生成今日电子书快照开始
2021-12-14 15:30:50.100 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862045299118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:30:50.101 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862045299118080[0;39m ==> Parameters: 
2021-12-14 15:30:50.312 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862045299118080[0;39m <==    Updates: 0
2021-12-14 15:30:50.312 INFO  com.job.EbookSnapshotJob                          :35   [32m125862045299118080[0;39m 生成今日电子书快照结束，耗时：309毫秒
2021-12-14 15:30:55.003 INFO  com.job.EbookSnapshotJob                          :32   [32m125862066270638080[0;39m 生成今日电子书快照开始
2021-12-14 15:30:55.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862066270638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:30:55.144 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862066270638080[0;39m ==> Parameters: 
2021-12-14 15:30:55.391 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862066270638080[0;39m <==    Updates: 0
2021-12-14 15:30:55.391 INFO  com.job.EbookSnapshotJob                          :35   [32m125862066270638080[0;39m 生成今日电子书快照结束，耗时：388毫秒
2021-12-14 15:31:00.013 INFO  com.job.EbookSnapshotJob                          :32   [32m125862087284101120[0;39m 生成今日电子书快照开始
2021-12-14 15:31:00.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862087284101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:00.105 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862087284101120[0;39m ==> Parameters: 
2021-12-14 15:31:00.109 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-14 15:31:00.109 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-12-14 15:31:00.110 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-12-14 15:31:00.146 INFO  com.websocket.WebSocketServer                     :32   [32m                  [0;39m 有新连接：token：tDuZALCES6，session id：0，当前连接数：1
2021-12-14 15:31:00.313 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862087284101120[0;39m <==    Updates: 0
2021-12-14 15:31:00.314 INFO  com.job.EbookSnapshotJob                          :35   [32m125862087284101120[0;39m 生成今日电子书快照结束，耗时：301毫秒
2021-12-14 15:31:00.408 INFO  com.aspect.LogAspect                              :54   [32m125862088932462594[0;39m ------------- 开始 -------------
2021-12-14 15:31:00.408 INFO  com.aspect.LogAspect                              :54   [32m125862088932462593[0;39m ------------- 开始 -------------
2021-12-14 15:31:00.408 INFO  com.aspect.LogAspect                              :54   [32m125862088932462592[0;39m ------------- 开始 -------------
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :55   [32m125862088932462594[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :55   [32m125862088932462592[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :55   [32m125862088932462593[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :56   [32m125862088932462592[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :56   [32m125862088932462594[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :56   [32m125862088932462593[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :57   [32m125862088932462594[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :57   [32m125862088932462593[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:00.409 INFO  com.aspect.LogAspect                              :57   [32m125862088932462592[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:00.444 INFO  com.aspect.LogAspect                              :80   [32m125862088932462594[0;39m 请求参数: []
2021-12-14 15:31:00.444 INFO  com.aspect.LogAspect                              :80   [32m125862088932462593[0;39m 请求参数: []
2021-12-14 15:31:00.444 INFO  com.aspect.LogAspect                              :80   [32m125862088932462592[0;39m 请求参数: []
2021-12-14 15:31:00.452 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862088932462593[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:00.453 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862088932462593[0;39m ==> Parameters: 
2021-12-14 15:31:00.533 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862088932462592[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:00.534 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862088932462592[0;39m ==> Parameters: 
2021-12-14 15:31:00.567 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862088932462594[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:00.568 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862088932462594[0;39m ==> Parameters: 
2021-12-14 15:31:00.575 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862088932462593[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:31:00.584 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862088932462593[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:31:00.588 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862088932462593[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:31:00.589 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862088932462593[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:31:00.590 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862088932462593[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:31:00.590 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862088932462593[0;39m <==      Total: 4
2021-12-14 15:31:00.607 INFO  com.aspect.LogAspect                              :92   [32m125862088932462593[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:31:00.607 INFO  com.aspect.LogAspect                              :93   [32m125862088932462593[0;39m ------------- 结束 耗时：201 ms -------------
2021-12-14 15:31:00.619 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862088932462592[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:31:00.619 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862088932462592[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:31:00.621 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862088932462592[0;39m <==        Row: 2021-12-14, 489, 164, 6, 4
2021-12-14 15:31:00.622 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862088932462592[0;39m <==      Total: 2
2021-12-14 15:31:00.622 INFO  com.aspect.LogAspect                              :92   [32m125862088932462592[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":489,"viewIncrease":6,"voteCount":164,"voteIncrease":4}],"success":true}
2021-12-14 15:31:00.622 INFO  com.aspect.LogAspect                              :93   [32m125862088932462592[0;39m ------------- 结束 耗时：216 ms -------------
2021-12-14 15:31:00.672 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:00.672 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:00.673 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:00.675 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:00.675 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:00.676 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:00.676 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:00.676 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:00.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:00.688 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:00.689 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:00.690 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862088932462594[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:00.690 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862088932462594[0;39m <==      Total: 19
2021-12-14 15:31:00.705 INFO  com.aspect.LogAspect                              :92   [32m125862088932462594[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:00.705 INFO  com.aspect.LogAspect                              :93   [32m125862088932462594[0;39m ------------- 结束 耗时：299 ms -------------
2021-12-14 15:31:05.013 INFO  com.job.EbookSnapshotJob                          :32   [32m125862108255621120[0;39m 生成今日电子书快照开始
2021-12-14 15:31:05.166 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862108255621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:05.167 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862108255621120[0;39m ==> Parameters: 
2021-12-14 15:31:05.443 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862108255621120[0;39m <==    Updates: 0
2021-12-14 15:31:05.444 INFO  com.job.EbookSnapshotJob                          :35   [32m125862108255621120[0;39m 生成今日电子书快照结束，耗时：428毫秒
2021-12-14 15:31:05.444 INFO  com.job.DocJob                                    :32   [32m125862110063366144[0;39m 更新电子书下的文档数据开始
2021-12-14 15:31:05.454 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125862110063366144[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-14 15:31:05.454 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125862110063366144[0;39m ==> Parameters: 
2021-12-14 15:31:05.686 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125862110063366144[0;39m <==    Updates: 3
2021-12-14 15:31:05.686 INFO  com.job.DocJob                                    :35   [32m125862110063366144[0;39m 更新电子书下的文档数据结束，耗时：242毫秒
2021-12-14 15:31:06.517 INFO  com.aspect.LogAspect                              :54   [32m125862114563854336[0;39m ------------- 开始 -------------
2021-12-14 15:31:06.517 INFO  com.aspect.LogAspect                              :55   [32m125862114563854336[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:31:06.517 INFO  com.aspect.LogAspect                              :56   [32m125862114563854336[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:31:06.517 INFO  com.aspect.LogAspect                              :57   [32m125862114563854336[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:06.529 INFO  com.aspect.LogAspect                              :80   [32m125862114563854336[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-12-14 15:31:06.780 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862114563854336[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-14 15:31:06.782 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862114563854336[0;39m ==> Parameters: 101(Long)
2021-12-14 15:31:06.888 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862114563854336[0;39m <==    Columns: count(0)
2021-12-14 15:31:06.889 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862114563854336[0;39m <==        Row: 1
2021-12-14 15:31:06.889 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862114563854336[0;39m <==      Total: 1
2021-12-14 15:31:06.895 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862114563854336[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-14 15:31:06.897 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862114563854336[0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-12-14 15:31:07.037 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862114563854336[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-14 15:31:07.038 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862114563854336[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 73, 26
2021-12-14 15:31:07.038 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862114563854336[0;39m <==      Total: 1
2021-12-14 15:31:07.038 INFO  com.servicess.EbookService                        :48   [32m125862114563854336[0;39m 总行数：1
2021-12-14 15:31:07.038 INFO  com.servicess.EbookService                        :49   [32m125862114563854336[0;39m 总页数：1
2021-12-14 15:31:07.069 INFO  com.aspect.LogAspect                              :92   [32m125862114563854336[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":73,"voteCount":26}],"total":1},"success":true}
2021-12-14 15:31:07.070 INFO  com.aspect.LogAspect                              :93   [32m125862114563854336[0;39m ------------- 结束 耗时：553 ms -------------
2021-12-14 15:31:08.345 INFO  com.aspect.LogAspect                              :54   [32m125862122231042048[0;39m ------------- 开始 -------------
2021-12-14 15:31:08.346 INFO  com.aspect.LogAspect                              :55   [32m125862122231042048[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:31:08.346 INFO  com.aspect.LogAspect                              :56   [32m125862122231042048[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:31:08.347 INFO  com.aspect.LogAspect                              :57   [32m125862122231042048[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:08.347 INFO  com.aspect.LogAspect                              :80   [32m125862122231042048[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2021-12-14 15:31:08.487 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862122231042048[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-14 15:31:08.487 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862122231042048[0;39m ==> Parameters: 201(Long)
2021-12-14 15:31:08.614 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862122231042048[0;39m <==    Columns: count(0)
2021-12-14 15:31:08.616 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862122231042048[0;39m <==        Row: 0
2021-12-14 15:31:08.617 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862122231042048[0;39m <==      Total: 1
2021-12-14 15:31:08.617 INFO  com.servicess.EbookService                        :48   [32m125862122231042048[0;39m 总行数：0
2021-12-14 15:31:08.617 INFO  com.servicess.EbookService                        :49   [32m125862122231042048[0;39m 总页数：0
2021-12-14 15:31:08.617 INFO  com.aspect.LogAspect                              :92   [32m125862122231042048[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2021-12-14 15:31:08.617 INFO  com.aspect.LogAspect                              :93   [32m125862122231042048[0;39m ------------- 结束 耗时：272 ms -------------
2021-12-14 15:31:08.848 INFO  com.aspect.LogAspect                              :54   [32m125862124340776960[0;39m ------------- 开始 -------------
2021-12-14 15:31:08.848 INFO  com.aspect.LogAspect                              :55   [32m125862124340776960[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:31:08.848 INFO  com.aspect.LogAspect                              :56   [32m125862124340776960[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:31:08.849 INFO  com.aspect.LogAspect                              :57   [32m125862124340776960[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:08.849 INFO  com.aspect.LogAspect                              :80   [32m125862124340776960[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2021-12-14 15:31:08.851 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862124340776960[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-12-14 15:31:08.855 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862124340776960[0;39m ==> Parameters: 202(Long)
2021-12-14 15:31:08.974 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862124340776960[0;39m <==    Columns: count(0)
2021-12-14 15:31:08.977 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862124340776960[0;39m <==        Row: 1
2021-12-14 15:31:08.979 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862124340776960[0;39m <==      Total: 1
2021-12-14 15:31:08.983 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862124340776960[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-12-14 15:31:08.986 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862124340776960[0;39m ==> Parameters: 202(Long), 1000(Integer)
2021-12-14 15:31:09.153 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862124340776960[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-14 15:31:09.153 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862124340776960[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 91, 15
2021-12-14 15:31:09.153 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862124340776960[0;39m <==      Total: 1
2021-12-14 15:31:09.153 INFO  com.servicess.EbookService                        :48   [32m125862124340776960[0;39m 总行数：1
2021-12-14 15:31:09.153 INFO  com.servicess.EbookService                        :49   [32m125862124340776960[0;39m 总页数：1
2021-12-14 15:31:09.153 INFO  com.aspect.LogAspect                              :92   [32m125862124340776960[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":91,"voteCount":15}],"total":1},"success":true}
2021-12-14 15:31:09.161 INFO  com.aspect.LogAspect                              :93   [32m125862124340776960[0;39m ------------- 结束 耗时：313 ms -------------
2021-12-14 15:31:10.009 INFO  com.job.EbookSnapshotJob                          :32   [32m125862129210363904[0;39m 生成今日电子书快照开始
2021-12-14 15:31:10.130 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862129210363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:10.134 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862129210363904[0;39m ==> Parameters: 
2021-12-14 15:31:10.354 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862129210363904[0;39m <==    Updates: 0
2021-12-14 15:31:10.354 INFO  com.job.EbookSnapshotJob                          :35   [32m125862129210363904[0;39m 生成今日电子书快照结束，耗时：344毫秒
2021-12-14 15:31:10.997 INFO  com.aspect.LogAspect                              :54   [32m125862133354336256[0;39m ------------- 开始 -------------
2021-12-14 15:31:10.997 INFO  com.aspect.LogAspect                              :55   [32m125862133354336256[0;39m 请求地址: http://localhost:8081/doc/all/1 GET
2021-12-14 15:31:10.997 INFO  com.aspect.LogAspect                              :56   [32m125862133354336256[0;39m 类名方法: com.controller.DocController.all
2021-12-14 15:31:10.997 INFO  com.aspect.LogAspect                              :57   [32m125862133354336256[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:10.997 INFO  com.aspect.LogAspect                              :80   [32m125862133354336256[0;39m 请求参数: [1]
2021-12-14 15:31:11.115 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125862133354336256[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-12-14 15:31:11.116 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125862133354336256[0;39m ==> Parameters: 1(Long)
2021-12-14 15:31:11.198 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:31:11.206 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 1, 1, 119304585604108288, 文档1, 1, 14, 2
2021-12-14 15:31:11.208 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 13, 4
2021-12-14 15:31:11.211 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 8, 2
2021-12-14 15:31:11.213 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 118617791401168896, 1, 5, 文档2.2.1, 1, 14, 2
2021-12-14 15:31:11.214 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 19, 3
2021-12-14 15:31:11.218 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 3, 1, 0, 文档2, 2, 10, 1
2021-12-14 15:31:11.218 TRACE com.mapper.DocMapper.selectByExample              :143  [32m125862133354336256[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 13, 1
2021-12-14 15:31:11.218 DEBUG com.mapper.DocMapper.selectByExample              :137  [32m125862133354336256[0;39m <==      Total: 7
2021-12-14 15:31:11.245 INFO  com.aspect.LogAspect                              :92   [32m125862133354336256[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"文档1","parent":119304585604108288,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":13,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":8,"voteCount":2},{"ebookId":1,"id":118617791401168896,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":119304585604108288,"name":"Ant Design of Vue","parent":0,"sort":1,"viewCount":19,"voteCount":3},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":10,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":13,"voteCount":1}],"success":true}
2021-12-14 15:31:11.245 INFO  com.aspect.LogAspect                              :93   [32m125862133354336256[0;39m ------------- 结束 耗时：248 ms -------------
2021-12-14 15:31:11.326 INFO  com.aspect.LogAspect                              :54   [32m125862134734262272[0;39m ------------- 开始 -------------
2021-12-14 15:31:11.334 INFO  com.aspect.LogAspect                              :55   [32m125862134734262272[0;39m 请求地址: http://localhost:8081/doc/find-content/119304585604108288 GET
2021-12-14 15:31:11.336 INFO  com.aspect.LogAspect                              :56   [32m125862134734262272[0;39m 类名方法: com.controller.DocController.findContent
2021-12-14 15:31:11.336 INFO  com.aspect.LogAspect                              :57   [32m125862134734262272[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:11.336 INFO  com.aspect.LogAspect                              :80   [32m125862134734262272[0;39m 请求参数: [119304585604108288]
2021-12-14 15:31:11.434 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125862134734262272[0;39m ==>  Preparing: select id , content from content where id = ?
2021-12-14 15:31:11.434 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125862134734262272[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:31:11.571 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125862134734262272[0;39m <==    Columns: id, content
2021-12-14 15:31:11.571 TRACE com.mapper.ContentMapper.selectByPrimaryKey       :143  [32m125862134734262272[0;39m <==        Row: 119304585604108288, <<BLOB>>
2021-12-14 15:31:11.575 DEBUG com.mapper.ContentMapper.selectByPrimaryKey       :137  [32m125862134734262272[0;39m <==      Total: 1
2021-12-14 15:31:11.578 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125862134734262272[0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2021-12-14 15:31:11.578 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125862134734262272[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:31:11.779 DEBUG com.mapper.DocMapperCust.increaseViewCount        :137  [32m125862134734262272[0;39m <==    Updates: 1
2021-12-14 15:31:11.786 INFO  com.aspect.LogAspect                              :92   [32m125862134734262272[0;39m 返回结果: {"content":"<blockquote><h1><b id=\"9lkez\"><font face=\"微软雅黑\">Ant Design of Vue</font></b></h1><p>这里是 Ant Design 的 Vue 实现，开发和服务于企业级后台<font face=\"标楷体\"></font>产品。</p></blockquote>","success":true}
2021-12-14 15:31:11.786 INFO  com.aspect.LogAspect                              :93   [32m125862134734262272[0;39m ------------- 结束 耗时：460 ms -------------
2021-12-14 15:31:12.690 INFO  com.aspect.LogAspect                              :54   [32m125862140455292928[0;39m ------------- 开始 -------------
2021-12-14 15:31:12.691 INFO  com.aspect.LogAspect                              :55   [32m125862140455292928[0;39m 请求地址: http://localhost:8081/doc/vote/119304585604108288 GET
2021-12-14 15:31:12.691 INFO  com.aspect.LogAspect                              :56   [32m125862140455292928[0;39m 类名方法: com.controller.DocController.vote
2021-12-14 15:31:12.691 INFO  com.aspect.LogAspect                              :57   [32m125862140455292928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:12.692 INFO  com.aspect.LogAspect                              :80   [32m125862140455292928[0;39m 请求参数: [119304585604108288]
2021-12-14 15:31:13.705 INFO  com.Util.RedisUtil                                :31   [32m125862140455292928[0;39m key不存在，放入：DOC_VOTE_119304585604108288_0:0:0:0:0:0:0:1，过期 60 秒
2021-12-14 15:31:13.871 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125862140455292928[0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2021-12-14 15:31:13.872 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125862140455292928[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:31:14.076 DEBUG com.mapper.DocMapperCust.increaseVoteCount        :137  [32m125862140455292928[0;39m <==    Updates: 1
2021-12-14 15:31:14.077 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125862140455292928[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2021-12-14 15:31:14.077 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125862140455292928[0;39m ==> Parameters: 119304585604108288(Long)
2021-12-14 15:31:14.183 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125862140455292928[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-12-14 15:31:14.184 TRACE com.mapper.DocMapper.selectByPrimaryKey           :143  [32m125862140455292928[0;39m <==        Row: 119304585604108288, 1, 0, Ant Design of Vue, 1, 20, 4
2021-12-14 15:31:14.186 DEBUG com.mapper.DocMapper.selectByPrimaryKey           :137  [32m125862140455292928[0;39m <==      Total: 1
2021-12-14 15:31:14.198 INFO  com.aspect.LogAspect                              :92   [32m125862140455292928[0;39m 返回结果: {"success":true}
2021-12-14 15:31:14.199 INFO  com.aspect.LogAspect                              :93   [32m125862140455292928[0;39m ------------- 结束 耗时：1509 ms -------------
2021-12-14 15:31:14.237 INFO  com.websocket.WebSocketServer                     :71   [32m125862140455292928[0;39m 推送消息：tDuZALCES6，内容：【Ant Design of Vue】被点赞！
2021-12-14 15:31:15.015 INFO  com.job.EbookSnapshotJob                          :32   [32m125862150207049728[0;39m 生成今日电子书快照开始
2021-12-14 15:31:15.122 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862150207049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:15.125 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862150207049728[0;39m ==> Parameters: 
2021-12-14 15:31:15.373 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862150207049728[0;39m <==    Updates: 0
2021-12-14 15:31:15.374 INFO  com.job.EbookSnapshotJob                          :35   [32m125862150207049728[0;39m 生成今日电子书快照结束，耗时：358毫秒
2021-12-14 15:31:16.218 INFO  com.aspect.LogAspect                              :54   [32m125862155252797440[0;39m ------------- 开始 -------------
2021-12-14 15:31:16.218 INFO  com.aspect.LogAspect                              :55   [32m125862155252797440[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:31:16.219 INFO  com.aspect.LogAspect                              :56   [32m125862155252797440[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:31:16.219 INFO  com.aspect.LogAspect                              :57   [32m125862155252797440[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:16.219 INFO  com.aspect.LogAspect                              :80   [32m125862155252797440[0;39m 请求参数: []
2021-12-14 15:31:16.220 INFO  com.aspect.LogAspect                              :54   [32m125862155261186048[0;39m ------------- 开始 -------------
2021-12-14 15:31:16.221 INFO  com.aspect.LogAspect                              :55   [32m125862155261186048[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:31:16.221 INFO  com.aspect.LogAspect                              :56   [32m125862155261186048[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:31:16.222 INFO  com.aspect.LogAspect                              :57   [32m125862155261186048[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:16.222 INFO  com.aspect.LogAspect                              :80   [32m125862155261186048[0;39m 请求参数: []
2021-12-14 15:31:16.224 INFO  com.aspect.LogAspect                              :54   [32m125862155277963264[0;39m ------------- 开始 -------------
2021-12-14 15:31:16.224 INFO  com.aspect.LogAspect                              :55   [32m125862155277963264[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:16.224 INFO  com.aspect.LogAspect                              :56   [32m125862155277963264[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:16.224 INFO  com.aspect.LogAspect                              :57   [32m125862155277963264[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:16.225 INFO  com.aspect.LogAspect                              :80   [32m125862155277963264[0;39m 请求参数: []
2021-12-14 15:31:16.320 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862155261186048[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:16.320 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862155252797440[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:16.320 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862155277963264[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:16.322 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862155252797440[0;39m ==> Parameters: 
2021-12-14 15:31:16.322 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862155261186048[0;39m ==> Parameters: 
2021-12-14 15:31:16.322 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862155277963264[0;39m ==> Parameters: 
2021-12-14 15:31:16.450 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862155261186048[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:31:16.452 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:16.452 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862155261186048[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:31:16.453 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:16.455 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:16.455 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862155261186048[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:31:16.456 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:16.456 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862155261186048[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:31:16.457 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:16.458 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862155261186048[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:31:16.458 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:16.450 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862155252797440[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:31:16.459 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:16.459 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862155261186048[0;39m <==      Total: 4
2021-12-14 15:31:16.460 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862155252797440[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:31:16.460 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:16.460 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:16.460 INFO  com.aspect.LogAspect                              :92   [32m125862155261186048[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:31:16.461 INFO  com.aspect.LogAspect                              :93   [32m125862155261186048[0;39m ------------- 结束 耗时：241 ms -------------
2021-12-14 15:31:16.461 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862155252797440[0;39m <==        Row: 2021-12-14, 489, 164, 6, 4
2021-12-14 15:31:16.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:16.461 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862155252797440[0;39m <==      Total: 2
2021-12-14 15:31:16.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:16.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:16.461 INFO  com.aspect.LogAspect                              :92   [32m125862155252797440[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":489,"viewIncrease":6,"voteCount":164,"voteIncrease":4}],"success":true}
2021-12-14 15:31:16.461 INFO  com.aspect.LogAspect                              :93   [32m125862155252797440[0;39m ------------- 结束 耗时：243 ms -------------
2021-12-14 15:31:16.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:16.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:16.461 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:16.466 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:16.467 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:16.468 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:16.469 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:16.470 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862155277963264[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:16.471 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862155277963264[0;39m <==      Total: 19
2021-12-14 15:31:16.472 INFO  com.aspect.LogAspect                              :92   [32m125862155277963264[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:16.472 INFO  com.aspect.LogAspect                              :93   [32m125862155277963264[0;39m ------------- 结束 耗时：248 ms -------------
2021-12-14 15:31:20.012 INFO  com.job.EbookSnapshotJob                          :32   [32m125862171165986816[0;39m 生成今日电子书快照开始
2021-12-14 15:31:20.150 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862171165986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:20.153 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862171165986816[0;39m ==> Parameters: 
2021-12-14 15:31:20.377 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862171165986816[0;39m <==    Updates: 0
2021-12-14 15:31:20.380 INFO  com.job.EbookSnapshotJob                          :35   [32m125862171165986816[0;39m 生成今日电子书快照结束，耗时：368毫秒
2021-12-14 15:31:21.936 INFO  com.aspect.LogAspect                              :54   [32m125862179235827712[0;39m ------------- 开始 -------------
2021-12-14 15:31:21.936 INFO  com.aspect.LogAspect                              :55   [32m125862179235827712[0;39m 请求地址: http://localhost:8081/user/login POST
2021-12-14 15:31:21.937 INFO  com.aspect.LogAspect                              :56   [32m125862179235827712[0;39m 类名方法: com.controller.UserController.login
2021-12-14 15:31:21.937 INFO  com.aspect.LogAspect                              :57   [32m125862179235827712[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:21.941 INFO  com.aspect.LogAspect                              :80   [32m125862179235827712[0;39m 请求参数: [{"loginName":"test123"}]
2021-12-14 15:31:22.065 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862179235827712[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-12-14 15:31:22.066 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862179235827712[0;39m ==> Parameters: test123(String)
2021-12-14 15:31:22.173 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862179235827712[0;39m <==    Columns: id, login_name, name, password
2021-12-14 15:31:22.173 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862179235827712[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-14 15:31:22.173 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862179235827712[0;39m <==      Total: 1
2021-12-14 15:31:22.198 INFO  com.controller.UserController                     :77   [32m125862179235827712[0;39m 生成单点登录token:125862180334735360,并放入redis中
2021-12-14 15:31:22.288 INFO  com.aspect.LogAspect                              :92   [32m125862179235827712[0;39m 返回结果: {"content":{"id":120902130663034880,"loginName":"test123","name":"test123","token":"125862180334735360"},"success":true}
2021-12-14 15:31:22.288 INFO  com.aspect.LogAspect                              :93   [32m125862179235827712[0;39m ------------- 结束 耗时：352 ms -------------
2021-12-14 15:31:22.518 INFO  com.websocket.WebSocketServer                     :41   [32m125862122231042048[0;39m 连接关闭，token：tDuZALCES6，session id：0！当前连接数：0
2021-12-14 15:31:23.351 INFO  com.websocket.WebSocketServer                     :32   [32m125862124340776960[0;39m 有新连接：token：TucQg4A7IS，session id：1，当前连接数：1
2021-12-14 15:31:23.445 INFO  com.aspect.LogAspect                              :54   [32m125862185565032448[0;39m ------------- 开始 -------------
2021-12-14 15:31:23.445 INFO  com.aspect.LogAspect                              :55   [32m125862185565032448[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:31:23.446 INFO  com.aspect.LogAspect                              :56   [32m125862185565032448[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:31:23.446 INFO  com.aspect.LogAspect                              :57   [32m125862185565032448[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:23.446 INFO  com.aspect.LogAspect                              :80   [32m125862185565032448[0;39m 请求参数: []
2021-12-14 15:31:23.453 INFO  com.aspect.LogAspect                              :54   [32m125862185598586880[0;39m ------------- 开始 -------------
2021-12-14 15:31:23.453 INFO  com.aspect.LogAspect                              :55   [32m125862185598586880[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:31:23.453 INFO  com.aspect.LogAspect                              :56   [32m125862185598586880[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:31:23.454 INFO  com.aspect.LogAspect                              :57   [32m125862185598586880[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:23.454 INFO  com.aspect.LogAspect                              :80   [32m125862185598586880[0;39m 请求参数: []
2021-12-14 15:31:23.456 INFO  com.aspect.LogAspect                              :54   [32m125862185611169792[0;39m ------------- 开始 -------------
2021-12-14 15:31:23.456 INFO  com.aspect.LogAspect                              :55   [32m125862185611169792[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:23.457 INFO  com.aspect.LogAspect                              :56   [32m125862185611169792[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:23.457 INFO  com.aspect.LogAspect                              :57   [32m125862185611169792[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:23.457 INFO  com.aspect.LogAspect                              :80   [32m125862185611169792[0;39m 请求参数: []
2021-12-14 15:31:23.571 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862185598586880[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:23.571 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862185565032448[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:23.571 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862185611169792[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:23.572 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862185611169792[0;39m ==> Parameters: 
2021-12-14 15:31:23.572 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862185565032448[0;39m ==> Parameters: 
2021-12-14 15:31:23.572 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862185598586880[0;39m ==> Parameters: 
2021-12-14 15:31:23.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:23.699 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862185598586880[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:31:23.700 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:23.701 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862185598586880[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:31:23.702 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:23.704 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:23.705 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862185598586880[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:31:23.705 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:23.706 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:23.707 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862185598586880[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:31:23.707 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:23.708 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:23.709 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862185598586880[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:31:23.710 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:23.711 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862185565032448[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:31:23.711 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:23.711 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:23.711 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862185565032448[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:31:23.715 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862185598586880[0;39m <==      Total: 4
2021-12-14 15:31:23.711 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:23.719 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:23.719 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862185565032448[0;39m <==        Row: 2021-12-14, 489, 164, 6, 4
2021-12-14 15:31:23.721 INFO  com.aspect.LogAspect                              :92   [32m125862185598586880[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:31:23.722 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862185565032448[0;39m <==      Total: 2
2021-12-14 15:31:23.722 INFO  com.aspect.LogAspect                              :93   [32m125862185598586880[0;39m ------------- 结束 耗时：269 ms -------------
2021-12-14 15:31:23.721 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:23.722 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:23.722 INFO  com.aspect.LogAspect                              :92   [32m125862185565032448[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":489,"viewIncrease":6,"voteCount":164,"voteIncrease":4}],"success":true}
2021-12-14 15:31:23.723 INFO  com.aspect.LogAspect                              :93   [32m125862185565032448[0;39m ------------- 结束 耗时：278 ms -------------
2021-12-14 15:31:23.723 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:23.726 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:23.728 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:23.730 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:23.734 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862185611169792[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:23.735 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862185611169792[0;39m <==      Total: 19
2021-12-14 15:31:23.747 INFO  com.aspect.LogAspect                              :92   [32m125862185611169792[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:23.751 INFO  com.aspect.LogAspect                              :93   [32m125862185611169792[0;39m ------------- 结束 耗时：295 ms -------------
2021-12-14 15:31:24.657 INFO  com.interceptor.LoginInterceptor                  :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-12-14 15:31:24.658 INFO  com.interceptor.LoginInterceptor                  :65   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-12-14 15:31:24.663 INFO  com.interceptor.LoginInterceptor                  :29   [32m125862179235827712[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-14 15:31:24.664 INFO  com.interceptor.LoginInterceptor                  :40   [32m125862179235827712[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-14 15:31:24.664 INFO  com.interceptor.LoginInterceptor                  :44   [32m125862179235827712[0;39m 登录校验开始，token：125862180334735360
2021-12-14 15:31:24.725 INFO  com.interceptor.LoginInterceptor                  :56   [32m125862179235827712[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"125862180334735360"}
2021-12-14 15:31:24.746 INFO  com.aspect.LogAspect                              :54   [32m125862191021821952[0;39m ------------- 开始 -------------
2021-12-14 15:31:24.747 INFO  com.aspect.LogAspect                              :55   [32m125862191021821952[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-14 15:31:24.747 INFO  com.aspect.LogAspect                              :56   [32m125862191021821952[0;39m 类名方法: com.controller.UserController.list
2021-12-14 15:31:24.747 INFO  com.aspect.LogAspect                              :57   [32m125862191021821952[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:24.751 INFO  com.aspect.LogAspect                              :80   [32m125862191021821952[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-14 15:31:24.887 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m125862191021821952[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-14 15:31:24.888 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m125862191021821952[0;39m ==> Parameters: 
2021-12-14 15:31:25.009 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m125862191021821952[0;39m <==    Columns: count(0)
2021-12-14 15:31:25.009 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m125862191021821952[0;39m <==        Row: 7
2021-12-14 15:31:25.009 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m125862191021821952[0;39m <==      Total: 1
2021-12-14 15:31:25.009 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862191021821952[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-14 15:31:25.009 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862191021821952[0;39m ==> Parameters: 10(Integer)
2021-12-14 15:31:25.015 INFO  com.job.EbookSnapshotJob                          :32   [32m125862192150089728[0;39m 生成今日电子书快照开始
2021-12-14 15:31:25.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862192150089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:25.136 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==    Columns: id, login_name, name, password
2021-12-14 15:31:25.137 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:25.137 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862192150089728[0;39m ==> Parameters: 
2021-12-14 15:31:25.137 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:25.137 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:25.137 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:25.137 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-14 15:31:25.143 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-14 15:31:25.144 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862191021821952[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-14 15:31:25.144 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862191021821952[0;39m <==      Total: 7
2021-12-14 15:31:25.147 INFO  com.servicess.UserService                         :52   [32m125862191021821952[0;39m 总行数：7
2021-12-14 15:31:25.148 INFO  com.servicess.UserService                         :53   [32m125862191021821952[0;39m 总页数：1
2021-12-14 15:31:25.164 INFO  com.aspect.LogAspect                              :92   [32m125862191021821952[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-14 15:31:25.166 INFO  com.aspect.LogAspect                              :93   [32m125862191021821952[0;39m ------------- 结束 耗时：420 ms -------------
2021-12-14 15:31:25.176 INFO  com.interceptor.LoginInterceptor                  :65   [32m125862191021821952[0;39m ------------- LoginInterceptor 结束 耗时：512 ms -------------
2021-12-14 15:31:25.368 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862192150089728[0;39m <==    Updates: 0
2021-12-14 15:31:25.368 INFO  com.job.EbookSnapshotJob                          :35   [32m125862192150089728[0;39m 生成今日电子书快照结束，耗时：352毫秒
2021-12-14 15:31:26.036 INFO  com.aspect.LogAspect                              :54   [32m125862196432474112[0;39m ------------- 开始 -------------
2021-12-14 15:31:26.036 INFO  com.aspect.LogAspect                              :55   [32m125862196432474112[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:26.036 INFO  com.aspect.LogAspect                              :56   [32m125862196432474112[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:26.036 INFO  com.aspect.LogAspect                              :57   [32m125862196432474112[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:26.036 INFO  com.aspect.LogAspect                              :80   [32m125862196432474112[0;39m 请求参数: []
2021-12-14 15:31:26.143 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862196432474112[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:26.144 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862196432474112[0;39m ==> Parameters: 
2021-12-14 15:31:26.251 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:26.254 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:26.255 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:26.256 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:26.264 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:26.265 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:26.267 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:26.269 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:26.270 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:26.273 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:26.273 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:26.274 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:26.275 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862196432474112[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:26.275 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862196432474112[0;39m <==      Total: 19
2021-12-14 15:31:26.282 INFO  com.aspect.LogAspect                              :92   [32m125862196432474112[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:26.282 INFO  com.aspect.LogAspect                              :93   [32m125862196432474112[0;39m ------------- 结束 耗时：246 ms -------------
2021-12-14 15:31:26.351 INFO  com.aspect.LogAspect                              :54   [32m125862197753679872[0;39m ------------- 开始 -------------
2021-12-14 15:31:26.352 INFO  com.aspect.LogAspect                              :55   [32m125862197753679872[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:31:26.352 INFO  com.aspect.LogAspect                              :56   [32m125862197753679872[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:31:26.353 INFO  com.aspect.LogAspect                              :57   [32m125862197753679872[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:26.353 INFO  com.aspect.LogAspect                              :80   [32m125862197753679872[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-14 15:31:26.359 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862197753679872[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-14 15:31:26.365 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862197753679872[0;39m ==> Parameters: 
2021-12-14 15:31:26.504 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862197753679872[0;39m <==    Columns: count(0)
2021-12-14 15:31:26.504 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862197753679872[0;39m <==        Row: 6
2021-12-14 15:31:26.504 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862197753679872[0;39m <==      Total: 1
2021-12-14 15:31:26.504 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862197753679872[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-14 15:31:26.513 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862197753679872[0;39m ==> Parameters: 10(Integer)
2021-12-14 15:31:26.619 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-14 15:31:26.619 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 91, 15
2021-12-14 15:31:26.619 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 73, 26
2021-12-14 15:31:26.619 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-14 15:31:26.630 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-14 15:31:26.632 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-14 15:31:26.635 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862197753679872[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-14 15:31:26.636 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862197753679872[0;39m <==      Total: 6
2021-12-14 15:31:26.637 INFO  com.servicess.EbookService                        :48   [32m125862197753679872[0;39m 总行数：6
2021-12-14 15:31:26.637 INFO  com.servicess.EbookService                        :49   [32m125862197753679872[0;39m 总页数：1
2021-12-14 15:31:26.637 INFO  com.aspect.LogAspect                              :92   [32m125862197753679872[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":91,"voteCount":15},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":73,"voteCount":26},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-14 15:31:26.637 INFO  com.aspect.LogAspect                              :93   [32m125862197753679872[0;39m ------------- 结束 耗时：286 ms -------------
2021-12-14 15:31:27.607 INFO  com.aspect.LogAspect                              :54   [32m125862203021725696[0;39m ------------- 开始 -------------
2021-12-14 15:31:27.607 INFO  com.aspect.LogAspect                              :55   [32m125862203021725696[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:27.607 INFO  com.aspect.LogAspect                              :56   [32m125862203021725696[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:27.608 INFO  com.aspect.LogAspect                              :57   [32m125862203021725696[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:27.608 INFO  com.aspect.LogAspect                              :80   [32m125862203021725696[0;39m 请求参数: []
2021-12-14 15:31:27.738 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862203021725696[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:27.739 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862203021725696[0;39m ==> Parameters: 
2021-12-14 15:31:27.844 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:27.847 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:27.848 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:27.849 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:27.850 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:27.851 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:27.851 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:27.851 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:27.852 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:27.852 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:27.853 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:27.854 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862203021725696[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:27.854 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862203021725696[0;39m <==      Total: 19
2021-12-14 15:31:27.854 INFO  com.aspect.LogAspect                              :92   [32m125862203021725696[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:27.854 INFO  com.aspect.LogAspect                              :93   [32m125862203021725696[0;39m ------------- 结束 耗时：247 ms -------------
2021-12-14 15:31:29.450 INFO  com.aspect.LogAspect                              :54   [32m125862210751827968[0;39m ------------- 开始 -------------
2021-12-14 15:31:29.451 INFO  com.aspect.LogAspect                              :55   [32m125862210751827968[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:29.451 INFO  com.aspect.LogAspect                              :56   [32m125862210751827968[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:29.451 INFO  com.aspect.LogAspect                              :57   [32m125862210751827968[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:29.451 INFO  com.aspect.LogAspect                              :80   [32m125862210751827968[0;39m 请求参数: []
2021-12-14 15:31:29.575 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862210751827968[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:29.577 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862210751827968[0;39m ==> Parameters: 
2021-12-14 15:31:29.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:29.677 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:29.681 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:29.682 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:29.682 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:29.686 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:29.687 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:29.687 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:29.687 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:29.693 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:29.694 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:29.695 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:29.699 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:29.702 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:29.704 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:29.705 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:29.705 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:29.705 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:29.710 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:29.710 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862210751827968[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:29.714 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862210751827968[0;39m <==      Total: 19
2021-12-14 15:31:29.720 INFO  com.aspect.LogAspect                              :92   [32m125862210751827968[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:29.720 INFO  com.aspect.LogAspect                              :93   [32m125862210751827968[0;39m ------------- 结束 耗时：270 ms -------------
2021-12-14 15:31:29.903 INFO  com.aspect.LogAspect                              :54   [32m125862212651847680[0;39m ------------- 开始 -------------
2021-12-14 15:31:29.903 INFO  com.aspect.LogAspect                              :55   [32m125862212651847680[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:29.903 INFO  com.aspect.LogAspect                              :56   [32m125862212651847680[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:29.904 INFO  com.aspect.LogAspect                              :57   [32m125862212651847680[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:29.904 INFO  com.aspect.LogAspect                              :80   [32m125862212651847680[0;39m 请求参数: []
2021-12-14 15:31:29.974 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862212651847680[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:29.975 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862212651847680[0;39m ==> Parameters: 
2021-12-14 15:31:30.007 INFO  com.job.EbookSnapshotJob                          :32   [32m125862213088055296[0;39m 生成今日电子书快照开始
2021-12-14 15:31:30.075 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:30.083 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:30.084 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:30.086 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:30.087 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:30.088 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:30.089 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:30.089 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:30.091 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:30.096 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:30.099 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:30.100 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:30.102 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:30.103 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:30.105 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:30.106 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:30.107 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:30.109 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:30.113 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:30.114 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862212651847680[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:30.115 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862212651847680[0;39m <==      Total: 19
2021-12-14 15:31:30.121 INFO  com.aspect.LogAspect                              :92   [32m125862212651847680[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:30.121 INFO  com.aspect.LogAspect                              :93   [32m125862212651847680[0;39m ------------- 结束 耗时：218 ms -------------
2021-12-14 15:31:30.131 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862213088055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:30.135 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862213088055296[0;39m ==> Parameters: 
2021-12-14 15:31:30.172 INFO  com.aspect.LogAspect                              :54   [32m125862213780115456[0;39m ------------- 开始 -------------
2021-12-14 15:31:30.172 INFO  com.aspect.LogAspect                              :55   [32m125862213780115456[0;39m 请求地址: http://localhost:8081/ebook/list GET
2021-12-14 15:31:30.172 INFO  com.aspect.LogAspect                              :56   [32m125862213780115456[0;39m 类名方法: com.controller.EbookController.list
2021-12-14 15:31:30.172 INFO  com.aspect.LogAspect                              :57   [32m125862213780115456[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:30.172 INFO  com.aspect.LogAspect                              :80   [32m125862213780115456[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-14 15:31:30.177 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862213780115456[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-12-14 15:31:30.177 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862213780115456[0;39m ==> Parameters: 
2021-12-14 15:31:30.294 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862213780115456[0;39m <==    Columns: count(0)
2021-12-14 15:31:30.294 TRACE com.mapper.EbookMapper.selectByExample_COUNT      :143  [32m125862213780115456[0;39m <==        Row: 6
2021-12-14 15:31:30.296 DEBUG com.mapper.EbookMapper.selectByExample_COUNT      :137  [32m125862213780115456[0;39m <==      Total: 1
2021-12-14 15:31:30.296 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862213780115456[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-12-14 15:31:30.296 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862213780115456[0;39m ==> Parameters: 10(Integer)
2021-12-14 15:31:30.332 INFO  com.interceptor.LoginInterceptor                  :29   [32m125862185611169792[0;39m ------------- LoginInterceptor 开始 -------------
2021-12-14 15:31:30.333 INFO  com.interceptor.LoginInterceptor                  :40   [32m125862185611169792[0;39m 接口登录拦截：，path：http://localhost:8081/user/list
2021-12-14 15:31:30.333 INFO  com.interceptor.LoginInterceptor                  :44   [32m125862185611169792[0;39m 登录校验开始，token：125862180334735360
2021-12-14 15:31:30.349 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862213088055296[0;39m <==    Updates: 0
2021-12-14 15:31:30.350 INFO  com.job.EbookSnapshotJob                          :35   [32m125862213088055296[0;39m 生成今日电子书快照结束，耗时：343毫秒
2021-12-14 15:31:30.379 INFO  com.interceptor.LoginInterceptor                  :56   [32m125862185611169792[0;39m 已登录：{"id":120902130663034880,"loginName":"test123","name":"test123","token":"125862180334735360"}
2021-12-14 15:31:30.381 INFO  com.aspect.LogAspect                              :54   [32m125862214656724992[0;39m ------------- 开始 -------------
2021-12-14 15:31:30.382 INFO  com.aspect.LogAspect                              :55   [32m125862214656724992[0;39m 请求地址: http://localhost:8081/user/list GET
2021-12-14 15:31:30.382 INFO  com.aspect.LogAspect                              :56   [32m125862214656724992[0;39m 类名方法: com.controller.UserController.list
2021-12-14 15:31:30.383 INFO  com.aspect.LogAspect                              :57   [32m125862214656724992[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:30.383 INFO  com.aspect.LogAspect                              :80   [32m125862214656724992[0;39m 请求参数: [{"page":1,"size":10}]
2021-12-14 15:31:30.384 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m125862214656724992[0;39m ==>  Preparing: SELECT count(0) FROM user
2021-12-14 15:31:30.384 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m125862214656724992[0;39m ==> Parameters: 
2021-12-14 15:31:30.413 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-12-14 15:31:30.413 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 7, 91, 15
2021-12-14 15:31:30.415 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==        Row: 2, Vue入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 8, 73, 26
2021-12-14 15:31:30.416 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==        Row: 3, Python入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2021-12-14 15:31:30.417 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==        Row: 4, Mysql入门教程, 400, 401, 零基础入门Mysql开发，企业级应用开发最佳首选框架, /image/cover2.png, 20, 56, 23
2021-12-14 15:31:30.418 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==        Row: 5, Oracle入门教程, 400, 117509419725623296, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 20, 211, 54
2021-12-14 15:31:30.418 TRACE com.mapper.EbookMapper.selectByExample            :143  [32m125862213780115456[0;39m <==        Row: 117509669114744832, test, 115484701694758912, 115484763686572032, test, /image/cover2.png, 20, 57, 45
2021-12-14 15:31:30.419 DEBUG com.mapper.EbookMapper.selectByExample            :137  [32m125862213780115456[0;39m <==      Total: 6
2021-12-14 15:31:30.419 INFO  com.servicess.EbookService                        :48   [32m125862213780115456[0;39m 总行数：6
2021-12-14 15:31:30.419 INFO  com.servicess.EbookService                        :49   [32m125862213780115456[0;39m 总页数：1
2021-12-14 15:31:30.421 INFO  com.aspect.LogAspect                              :92   [32m125862213780115456[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":7,"id":1,"name":"Spring Boot 入门教程","viewCount":91,"voteCount":15},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":8,"id":2,"name":"Vue入门教程","viewCount":73,"voteCount":26},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门Mysql开发，企业级应用开发最佳首选框架","docCount":20,"id":4,"name":"Mysql入门教程","viewCount":56,"voteCount":23},{"category1Id":400,"category2Id":117509419725623296,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":20,"id":5,"name":"Oracle入门教程","viewCount":211,"voteCount":54},{"category1Id":115484701694758912,"category2Id":115484763686572032,"cover":"/image/cover2.png","description":"test","docCount":20,"id":117509669114744832,"name":"test","viewCount":57,"voteCount":45}],"total":6},"success":true}
2021-12-14 15:31:30.422 INFO  com.aspect.LogAspect                              :93   [32m125862213780115456[0;39m ------------- 结束 耗时：250 ms -------------
2021-12-14 15:31:30.501 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m125862214656724992[0;39m <==    Columns: count(0)
2021-12-14 15:31:30.501 TRACE com.mapper.UserMapper.selectByExample_COUNT       :143  [32m125862214656724992[0;39m <==        Row: 7
2021-12-14 15:31:30.501 DEBUG com.mapper.UserMapper.selectByExample_COUNT       :137  [32m125862214656724992[0;39m <==      Total: 1
2021-12-14 15:31:30.501 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862214656724992[0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-12-14 15:31:30.501 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862214656724992[0;39m ==> Parameters: 10(Integer)
2021-12-14 15:31:30.615 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==    Columns: id, login_name, name, password
2021-12-14 15:31:30.616 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 1, test, 测试, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:30.616 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 119742410820554752, test21, test1, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:30.616 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 120066331910475776, test1, test12, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:30.616 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 120207548115718144, test111, test1112, f418afc57d59e8367c9c226e6906a79d
2021-12-14 15:31:30.616 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 120561372676362240, test159, test222, 409349eb88728b557cbb7e83372fe2bb
2021-12-14 15:31:30.621 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 120902130663034880, test123, test123, 7354a1d413535a6c0dc5c209e198d799
2021-12-14 15:31:30.624 TRACE com.mapper.UserMapper.selectByExample             :143  [32m125862214656724992[0;39m <==        Row: 124192551086460928, test11, test11, 7354a1d413535a6c0dc5c209e198d799
2021-12-14 15:31:30.627 DEBUG com.mapper.UserMapper.selectByExample             :137  [32m125862214656724992[0;39m <==      Total: 7
2021-12-14 15:31:30.629 INFO  com.servicess.UserService                         :52   [32m125862214656724992[0;39m 总行数：7
2021-12-14 15:31:30.631 INFO  com.servicess.UserService                         :53   [32m125862214656724992[0;39m 总页数：1
2021-12-14 15:31:30.633 INFO  com.aspect.LogAspect                              :92   [32m125862214656724992[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":119742410820554752,"loginName":"test21","name":"test1"},{"id":120066331910475776,"loginName":"test1","name":"test12"},{"id":120207548115718144,"loginName":"test111","name":"test1112"},{"id":120561372676362240,"loginName":"test159","name":"test222"},{"id":120902130663034880,"loginName":"test123","name":"test123"},{"id":124192551086460928,"loginName":"test11","name":"test11"}],"total":7},"success":true}
2021-12-14 15:31:30.633 INFO  com.aspect.LogAspect                              :93   [32m125862214656724992[0;39m ------------- 结束 耗时：252 ms -------------
2021-12-14 15:31:30.638 INFO  com.interceptor.LoginInterceptor                  :65   [32m125862214656724992[0;39m ------------- LoginInterceptor 结束 耗时：305 ms -------------
2021-12-14 15:31:30.811 INFO  com.aspect.LogAspect                              :54   [32m125862216460275712[0;39m ------------- 开始 -------------
2021-12-14 15:31:30.812 INFO  com.aspect.LogAspect                              :55   [32m125862216460275712[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-statistic GET
2021-12-14 15:31:30.812 INFO  com.aspect.LogAspect                              :56   [32m125862216460275712[0;39m 类名方法: com.controller.EbookSnapshotController.getStatistic
2021-12-14 15:31:30.812 INFO  com.aspect.LogAspect                              :57   [32m125862216460275712[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:30.812 INFO  com.aspect.LogAspect                              :80   [32m125862216460275712[0;39m 请求参数: []
2021-12-14 15:31:30.813 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862216460275712[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:30.814 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862216460275712[0;39m ==> Parameters: 
2021-12-14 15:31:30.815 INFO  com.aspect.LogAspect                              :54   [32m125862216477052928[0;39m ------------- 开始 -------------
2021-12-14 15:31:30.815 INFO  com.aspect.LogAspect                              :55   [32m125862216477052928[0;39m 请求地址: http://localhost:8081/ebook-snapshot/get-30-statistic GET
2021-12-14 15:31:30.815 INFO  com.aspect.LogAspect                              :56   [32m125862216477052928[0;39m 类名方法: com.controller.EbookSnapshotController.get30Statistic
2021-12-14 15:31:30.815 INFO  com.aspect.LogAspect                              :57   [32m125862216477052928[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:30.816 INFO  com.aspect.LogAspect                              :80   [32m125862216477052928[0;39m 请求参数: []
2021-12-14 15:31:30.816 INFO  com.aspect.LogAspect                              :54   [32m125862216481247232[0;39m ------------- 开始 -------------
2021-12-14 15:31:30.816 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862216477052928[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-12-14 15:31:30.817 INFO  com.aspect.LogAspect                              :55   [32m125862216481247232[0;39m 请求地址: http://localhost:8081/category/all GET
2021-12-14 15:31:30.817 INFO  com.aspect.LogAspect                              :56   [32m125862216481247232[0;39m 类名方法: com.controller.CategoryController.all
2021-12-14 15:31:30.817 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862216477052928[0;39m ==> Parameters: 
2021-12-14 15:31:30.817 INFO  com.aspect.LogAspect                              :57   [32m125862216481247232[0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-12-14 15:31:30.817 INFO  com.aspect.LogAspect                              :80   [32m125862216481247232[0;39m 请求参数: []
2021-12-14 15:31:30.942 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862216460275712[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-12-14 15:31:30.943 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862216481247232[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-12-14 15:31:30.943 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862216481247232[0;39m ==> Parameters: 
2021-12-14 15:31:30.943 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862216460275712[0;39m <==        Row: 2021-12-13, 483, 160, -42, -29
2021-12-14 15:31:30.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862216477052928[0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-12-14 15:31:30.944 TRACE com.mapper.EbookSnapshotMapperCust.getStatistic   :143  [32m125862216460275712[0;39m <==        Row: 2021-12-14, 489, 164, 6, 4
2021-12-14 15:31:30.944 DEBUG com.mapper.EbookSnapshotMapperCust.getStatistic   :137  [32m125862216460275712[0;39m <==      Total: 2
2021-12-14 15:31:30.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862216477052928[0;39m <==        Row: 2021-12-10, 0, 0
2021-12-14 15:31:30.944 INFO  com.aspect.LogAspect                              :92   [32m125862216460275712[0;39m 返回结果: {"content":[{"date":1639324800000,"viewCount":483,"viewIncrease":-42,"voteCount":160,"voteIncrease":-29},{"date":1639411200000,"viewCount":489,"viewIncrease":6,"voteCount":164,"voteIncrease":4}],"success":true}
2021-12-14 15:31:30.944 INFO  com.aspect.LogAspect                              :93   [32m125862216460275712[0;39m ------------- 结束 耗时：133 ms -------------
2021-12-14 15:31:30.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862216477052928[0;39m <==        Row: 2021-12-11, 64, 50
2021-12-14 15:31:30.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862216477052928[0;39m <==        Row: 2021-12-12, 4, 4
2021-12-14 15:31:30.944 TRACE com.mapper.EbookSnapshotMapperCust.get30Statistic :143  [32m125862216477052928[0;39m <==        Row: 2021-12-13, -42, -29
2021-12-14 15:31:30.949 DEBUG com.mapper.EbookSnapshotMapperCust.get30Statistic :137  [32m125862216477052928[0;39m <==      Total: 4
2021-12-14 15:31:30.951 INFO  com.aspect.LogAspect                              :92   [32m125862216477052928[0;39m 返回结果: {"content":[{"date":1639065600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1639152000000,"viewCount":0,"viewIncrease":64,"voteCount":0,"voteIncrease":50},{"date":1639238400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":4},{"date":1639324800000,"viewCount":0,"viewIncrease":-42,"voteCount":0,"voteIncrease":-29}],"success":true}
2021-12-14 15:31:30.951 INFO  com.aspect.LogAspect                              :93   [32m125862216477052928[0;39m ------------- 结束 耗时：137 ms -------------
2021-12-14 15:31:31.057 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==    Columns: id, parent, name, sort
2021-12-14 15:31:31.057 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 115484701694758912, 0, test, 1
2021-12-14 15:31:31.059 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 115484763686572032, 115484701694758910, test1, 2
2021-12-14 15:31:31.060 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 115149044279545856, 123, 23, 21
2021-12-14 15:31:31.061 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 100, 0, 前端开发, 100
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 101, 100, Vue, 101
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 200, 0, Java, 200
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 201, 200, 基础应用, 201
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 202, 200, 框架应用, 202
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 300, 0, Python, 300
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 301, 300, 基础应用, 301
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-12-14 15:31:31.062 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 400, 0, 数据库, 400
2021-12-14 15:31:31.067 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 401, 400, MySQL, 401
2021-12-14 15:31:31.067 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 117509419725623296, 400, Oracle, 402
2021-12-14 15:31:31.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 500, 0, 其他, 500
2021-12-14 15:31:31.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 501, 500, 服务器, 501
2021-12-14 15:31:31.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 502, 500, 开发工具, 502
2021-12-14 15:31:31.068 TRACE com.mapper.CategoryMapper.selectByExample         :143  [32m125862216481247232[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-12-14 15:31:31.068 DEBUG com.mapper.CategoryMapper.selectByExample         :137  [32m125862216481247232[0;39m <==      Total: 19
2021-12-14 15:31:31.068 INFO  com.aspect.LogAspect                              :92   [32m125862216481247232[0;39m 返回结果: {"content":[{"id":115484701694758912,"name":"test","parent":0,"sort":1},{"id":115484763686572032,"name":"test1","parent":115484701694758910,"sort":2},{"id":115149044279545856,"name":"23","parent":123,"sort":21},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":117509419725623296,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-12-14 15:31:31.068 INFO  com.aspect.LogAspect                              :93   [32m125862216481247232[0;39m ------------- 结束 耗时：252 ms -------------
2021-12-14 15:31:33.970 INFO  com.websocket.WebSocketServer                     :41   [32m125862124340776960[0;39m 连接关闭，token：TucQg4A7IS，session id：1！当前连接数：0
2021-12-14 15:31:35.004 INFO  com.job.EbookSnapshotJob                          :32   [32m125862234046992384[0;39m 生成今日电子书快照开始
2021-12-14 15:31:35.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862234046992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-12-14 15:31:35.117 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862234046992384[0;39m ==> Parameters: 
2021-12-14 15:31:35.282 DEBUG com.mapper.EbookSnapshotMapperCust.genSnapshot    :137  [32m125862234046992384[0;39m <==    Updates: 0
2021-12-14 15:31:35.282 INFO  com.job.EbookSnapshotJob                          :35   [32m125862234046992384[0;39m 生成今日电子书快照结束，耗时：277毫秒
2021-12-14 15:31:35.283 INFO  com.job.DocJob                                    :32   [32m125862235217203200[0;39m 更新电子书下的文档数据开始
2021-12-14 15:31:35.283 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125862235217203200[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-12-14 15:31:35.283 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125862235217203200[0;39m ==> Parameters: 
2021-12-14 15:31:35.490 DEBUG com.mapper.DocMapperCust.updateEbookInfo          :137  [32m125862235217203200[0;39m <==    Updates: 3
2021-12-14 15:31:35.491 INFO  com.job.DocJob                                    :35   [32m125862235217203200[0;39m 更新电子书下的文档数据结束，耗时：208毫秒
